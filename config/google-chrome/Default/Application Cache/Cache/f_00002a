!function(){function e(t,r,n){function o(i,l){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){return o(t[i][1][e]||e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}return e}()({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.note_buffer_p_prefix=r.note_buffer_t_prefix=r.top_bar=void 0;var n={top_offset_full:44,top_offset_mini:38};r.top_bar=n;r.note_buffer_t_prefix="note_t_";r.note_buffer_p_prefix="note_p_";var o={top_bar:n,note_buffer_t_prefix:"note_t_",note_buffer_p_prefix:"note_p_"},a=o;r.default=a},{}],2:[function(e,t,r){"use strict";var n=window,o=n.IstTooltip,a=window,i=a.IstComplete,l=window,s=l.Signals;window.CURRENT_ACTION_PERFOMED=null,r.get=function(){return window.CURRENT_ACTION_PERFOMED},r.mark=function(e){window.CURRENT_ACTION_PERFOMED=e,s.sendSignal("action_performed"),o.hide(),i.hide(),window.CURRENT_ACTION_PERFOMED=null}},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.GB_hide,s=window,u=s.IstCompleteSelect,c=window,d=c.IstTooltip,f=function(){function e(){n(this,e),this.render=this.render.bind(this),this.showTooltip=this.showTooltip.bind(this),this.getDescription=this.getDescription.bind(this)}return a(e,[{key:"render",value:function(e,t,r,n){var o;o=r[e]?svgs.get(r[e]):"";var a=SPAN({c:"truncated e_name"},this.getDescription(e,t)),i=SPAN({c:"svg_select_arrow"},svgs.get("sm1/caret.svg")),l=A({href:"#",c:"event_select_item","data-track":"activity_log|filter_by_activity"},i,DIV(o,a));n.fixed_pos&&$addClass(l,"fixed_pos");var s=n.tooltip_txt||_("Filter by activity");return e&&(s=n.tooltip_txt_selected||_("Filtering by"),s+=" ".concat(this.getDescription(e,t).toLowerCase())),d.showSimpleText(l,s),l.showTooltip=$p(this.showTooltip,l,i,e,t,r,n),$AEV(l,"click",l.showTooltip),l}},{key:"showTooltip",value:function(e,t,r,n,o,a){var i=this,s=a.selectedItem,c={selectedItem:s,collection:function(){return n},filterItem:function(e){var t;if(e){var r=SPAN({c:"truncated e_name"},e.name);return t=null!=o[e.value]?svgs.get(o[e.value]):SPAN({c:"blank_icon"}),DIV(DIV({c:"ist_complete_icon"},t),DIV({c:"ist_complete_content"},r))}},onSelect:function(t){if(track("activity_log","click","filter_by_activity_select"),l(),e.showTooltip=null,$swap(e,e=i.render(t.value,n,o,a)),$isFunction(a.onSelect))return a.onSelect(t.value)},wildcard_match:!0,placeholder:_("Search")},d=new u(c);return d.showTooltip({title:_("Filter by activity"),icon:t,top_offset:a.top_offset||25,left_offset:a.left_offset||205,arrow_left_offset:a.arrow_left_offset||-135,fn_on_hide:function(){return d=null}}),!1}},{key:"getDescription",value:function(e,t){var r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;if(l.value===e)return l.name}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}}]),e}();t.exports=new f},{}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var f=e("../../reducers/notes"),p=n(e("../../stores/store")),m=e("../../reducers/mainView"),h=n(e("react")),y=n(e("react-dom")),v=e("react-redux"),g=n(e("../../react_components/project_picker")),b=e("../../react_components/icons"),w=window,E=w.Signals,j=window,O=j.DateUtils,S=window,P=S.DateistDateHelpers,I=window,k=I.Indicator,T=window,C=T.IstTooltip,D=window,M=D.getOfflineMessage,x=e("../agenda/RenderDayView"),R=e("../formatter/Formatter.js"),N=e("../items_utils/ItemDueDates.js"),L=e("../../models/ItemsModel"),U=e("../items_utils/ItemsRender"),V=e("../../models/ProjectsModel"),F=e("../notes/NotesUtils"),H=e("../notes/Notes"),q=e("../../models/Collaborators"),G=e("../avatars/Avatars"),z=e("../people_assigner/PeopleAssigner"),W=e("./ActivityEvents"),Y=e("../format_html/FormatHtml"),K=e("../../models/DateExt").default,J=e("../themes/Themes"),Q=e("../../models/SyncEngine"),X=function(){function e(){u(this,e),this._resetState=this._resetState.bind(this),this.showActivity=this.showActivity.bind(this),this.changeLocation=this.changeLocation.bind(this),this.renderEvents=this.renderEvents.bind(this),this._renderEvents=this._renderEvents.bind(this),this._renderLoadMore=this._renderLoadMore.bind(this),this._renderEvent=this._renderEvent.bind(this),this._prepareContent=this._prepareContent.bind(this),this._renderBlankState=this._renderBlankState.bind(this),this._processReqData=this._processReqData.bind(this),this._resetState()}return d(e,[{key:"_resetState",value:function(){return this.project_by_id={},this.item_by_id={},this.current_page=1,this.current_offset=0,this.event_icons={"item:added":"sm1/notification_assigned.svg","item:updated":"sm1/notification_updated.svg","item:completed":"sm1/notification_completed.svg","item:uncompleted":"sm1/notification_uncompleted.svg","item:deleted":"sm1/notification_deleted.svg","note:added":"sm1/notification_commented.svg"},this.no_events=!0,this.no_more_events=!1}},{key:"showActivity",value:function(e,t,r,n){var o,a,i,l;if(E.sendSignal("projects.reset"),this.project_picker_holder&&y.default.unmountComponentAtNode(this.project_picker_holder),this.current_page=0,this.current_offset=0,this.no_events=!0,this.no_more_events=!1,null==t){a=_("Activity: ");var u=e||0,c=0===u?{id:0,name:_("All projects")}:V.get(u);this.project_picker_holder=i=SPAN({c:"activity_selector"}),y.default.render(h.default.createElement(v.Provider,{store:p.default},h.default.createElement(g.default,{onSelect:function(e){var t=e.project_id;p.default.dispatch((0,m.showActivityView)({projectId:0!==t?t:null,itemId:null,eventFilter:r,userFilter:n}))},selectedProjectId:e,withAllProjectsOption:!0},function(e){var t=e.toggle,r=e.buttonProps;return h.default.createElement("a",s({href:"#",onClick:t},r),h.default.createElement("div",{className:"ist_complete_content"},h.default.createElement("span",{className:"truncated p_name"},c.name)),h.default.createElement("span",{className:"icon"},h.default.createElement(b.CaretIcon,null)))})),i);var d=$gc(i,"img");$add(i,d)}else{a=_("Activity: ");var f=L.getById(parseInt(t)),w=R.format(f&&f.content||"");w=w.replace(/^\*\s+/g,""),i=$setHTML(SPAN({c:"truncated item_header"}),w)}if(null==t){var j;if(o=DIV({c:"filters"}),void 0===n&&(n=window.User.id),null!=e){var O=V.get(e),S=V.getChildren(O,!0);j=function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,a=S[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)l=o.value,e.push(l.id)}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}()}else j=function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,a=V.getAll()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)l=o.value,e.push(l.id)}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}();var P=function(t){return track("activity_log","click","filter_by_collaborator_select"),p.default.dispatch((0,m.showActivityView)({projectId:e,itemId:null,eventFilter:r,userFilter:t})),null},I={unassigned_txt:_("Everyone"),unassigned_icon_disable:!0,tooltip_txt:_("Filter by collaborator"),title_txt:_("Filter by collaborator"),tooltip_txt_selected:_("Filtering by collaborator"),show_name:!0,responsible_uid:n,fn_on_select:P,placeholder_txt:_("Search"),project_id:j,never_hide:!0,left_offset:140,arrow_left_offset:-90,me_str:_x("activity_log","Me")},k=new z(I),T=SPAN({c:"select_user","data-track":"activity_log|filter_by_collaborator"},k.render(I));$add(o,T);var C=[{value:null,name:_("All actions")},{value:"item:added",name:_("Added tasks")},{value:"item:updated",name:_("Updated tasks")},{value:"item:completed",name:_("Completed tasks")},{value:"item:uncompleted",name:_("Uncompleted tasks")},{value:"item:deleted",name:_("Deleted tasks")},{value:"note:added",name:_("Added comments")}];null==r&&(r=null);var D={selectedItem:function(){return r},onSelect:function(t){p.default.dispatch((0,m.showActivityView)({projectId:e,itemId:null,eventFilter:t,userFilter:n}))}},A=SPAN({c:"select_event"},W.render(r,C,this.event_icons,D));$add(o,A)}var M=DIV({id:"activity_app"},H2({c:"project_header section_header"},a,i),o,DIV({id:"activity_show"}));return $replace($("editor"),M),this.renderEvents(e,t,r,n),!1}},{key:"changeLocation",value:function(e,t,r,n){var o="undefined"!==n&&n!==window.User.id,a="activity";return(null!=e||null!=t||null!=r||o)&&(null!=e?a+="/project/".concat(e):null!=t?a+="/task/".concat(t):(null!=r||o)&&(a+="/null/null"),null!=r?a+="/".concat(r):o&&(a+="/null"),o&&(a+="/".concat(n))),E.sendSignal("change_location",a)}},{key:"renderEvents",value:function(e,t,r,n){var a=this;this._resetState();var i=$("activity_show");if(!window.User.is_premium)return void $replace(i,this._renderBlankState(0));$replace($("activity_show"),k.cssSpinner());var l=Array.from(this._createReq(e,t,r,n)),s=o(l,2),u=s[0],c=s[1];return u.addCallback(function(o){if(a._processReqData(o),$replace(i,null),a.changeLocation(e,t,r,n),0!==$values(c).length&&0===o.events.length){var l;return $add(i,l=A({c:"load_more no_results"})),a.current_page-1==1?$replace(l,_("No activity in the past week.")):$replace(l,Y.format(_("No activity in the past {count} weeks."),{count:(a.current_page-1).toString()})),a._renderLoadMore(i,e,t,r,n)}return 0===o.events.length?$replace(i,a._renderBlankState()):(a.no_events&&(a.no_events=!1),a._renderEvents(i,o.events,e,t,r,n))}),this._renderLoadMore(i,e,t,r,n),u.addErrback(function(e,t){var r=$("activity_app");r&&$replace(r,M(t))}),u.sendReq(c)}},{key:"_renderEvents",value:function(e,t,r,n,o,a){var i=!0,l=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value;if(void 0!==d.extra_data&&(void 0!==d.extra_data.name||void 0!==d.extra_data.content)){var f=d.event_date;f=P.date_max(f);var p="".concat(f.getFullYear(),"-").concat(f.getMonth(),"-").concat(f.getDate()),m="day_header_".concat(p),h="day_ul_".concat(p),_=$(m);_||(_=x._renderDayHeader(f,!1),_.id=m,$add(e,_));var y=$(h);y||(y=UL({c:"items",id:h}),$add(e,y)),null!=n&&"item"===d.object_type&&"added"===d.event_type&&(this.no_more_events=!0),this._renderEvent(e,y,d)}}}catch(e){l=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}return $replaceClass($$("h2",$("activity_show")),"section_header","subsection_header"),this._renderLoadMore(e,r,n,o,a)}},{key:"_renderLoadMore",value:function(e,t,r,n,a){var i,l=this;return $add(e,i=A({c:"load_more",href:"#","data-track":"activity_log|load_more"})),!0===this.no_more_events?($addClass(i,"no_more_results"),void $replace(i,_("That's it. No more history to load."))):(1===this.current_page?$replace(i,_("Load more history from last week...")):$replace(i,Y.format(_("Load more history from {count} weeks ago..."),{count:this.current_page.toString()})),$AEV(i,"click",function(){if(i.loading)return!1;i.loading=!0,$replace(i,k.cssSpinner());var s=Array.from(l._createReq(t,r,n,a)),u=o(s,2),c=u[0],d=u[1];return c.addCallback(function(o){return l._processReqData(o),0===o.events.length?($remove($$(".no_results")),l.no_events?($addClass(i,"no_results"),l.current_page-1==1?$replace(i,_("No activity in the past week.")):$replace(i,Y.format(_("No activity in the past {count} weeks."),{count:(l.current_page-1).toString()}))):$remove(i),l._renderLoadMore(e,t,r,n,a)):(l.no_events&&(l.no_events=!1,$remove($$(".no_results"))),$remove($$(".activity_error")),$remove(i),l._renderEvents(e,o.events,t,r,n,a))}),c.addErrback(function(e,t){alert(M(t)),i.loading=!1}),c.sendReq(d),!1}))}},{key:"_renderEvent",value:function(e,t,r){var n,o,a,i,l=this._prepareContent(r);if(null!=l){var s=window.User;null!==r.initiator_id&&r.initiator_id!==s.id&&null!=(a=q.getUserById(r.initiator_id))&&(s=a),null!==r.initiator_id&&r.initiator_id!==s.id&&null==a?(n=null,o=SPAN()):(n=G.renderAvatar(s,"medium",J.theme),o=svgs.get(this.event_icons[r.object_type+":"+r.event_type]));var u=SPAN({c:"activity_time"},O.getHourAndMin(r.event_date));null!=r.extra_data.client&&C.showSimpleText(u,r.extra_data.client);var c=null;if("project"===r.object_type?i=r.object_id:"item"!==r.object_type&&"note"!==r.object_type||(i=r.parent_project_id),null!=i){var d=this.project_by_id[i]||V.get(i);d&&(this.project_by_id[i]||(this.project_by_id[i]=d),c=U.createProjectItem({project_id:d.id},d))}var f=LI({c:"event"},DIV({c:"avatar"},n,DIV({c:"avatar_event_icon"},o)),DIV({c:"text"},l,u,DIV({c:"project","data-track":"activity_log|select_project"},c)));return $add(t,f)}}},{key:"_prepareContent",value:function(e){var t,r={added_task:{you:_("{you} added a task: {task}"),user:_("{user} added a task: {task}"),someone:_("{someone} added a task: {task}")},deleted_task:{you:_("{you} deleted a task: {task}"),user:_("{user} deleted a task: {task}"),someone:_("{someone} deleted a task: {task}")},completed_task:{you:_("{you} completed a task: {task}"),user:_("{user} completed a task: {task}"),someone:_("{someone} completed a task: {task}")},uncompleted_task:{you:_("{you} uncompleted a task: {task}"),user:_("{user} uncompleted a task: {task}"),someone:_("{someone} uncompleted a task: {task}")},renamed_task:{you:_("{you} changed the name of {old} to {task}"),user:_("{user} changed the name of {old} to {task}"),someone:_("{someone} changed the name of {old} to {task}")},set_task_due_date:{you:_("{you} set the due date of {task} to {due_date}"),user:_("{user} set the due date of {task} to {due_date}"),someone:_("{someone} set the due date of {task} to {due_date}")},removed_task_due_date:{you:_("{you} removed the due date of {task}"),user:_("{user} removed the due date of {task}"),someone:_("{someone} removed the due date of {task}")},changed_task_due_date:{you:_("{you} changed the due date of {task} to {due_date}"),user:_("{user} changed the due date of {task} to {due_date}"),someone:_("{someone} changed the due date of {task} to {due_date}")},assigned_task:{you:{to_you:_("{you} assigned {task} to {to_yourself}"),to_user:_("{you} assigned {task} to {to_user}"),to_someone:_("{you} assigned {task} to {to_someone}")},user:{to_you:_("{user} assigned {task} to {to_you}"),to_user:_("{user} assigned {task} to {to_user}"),to_someone:_("{user} assigned {task} to {to_someone}")},someone:{to_you:_("{someone} assigned {task} to {to_you}"),to_user:_("{someone} assigned {task} to {to_user}"),to_someone:_("{someone} assigned {task} to {to_someone_else}")}},reassigned_task:{you:{to_you:_("{you} re-assigned {task} to {to_yourself}"),to_user:_("{you} re-assigned {task} to {to_user}"),to_someone:_("{you} re-assigned {task} to {to_someone}")},user:{to_you:_("{user} re-assigned {task} to {to_you}"),to_user:_("{user} re-assigned {task} to {to_user}"),to_someone:_("{user} re-assigned {task} to {to_someone}")},someone:{to_you:_("{someone} re-assigned {task} to {to_you}"),to_user:_("{someone} re-assigned {task} to {to_user}"),to_someone:_("{someone} re-assigned {task} to {to_someone_else}")}},unassigned_task:{you:_("{you} unnassigned {task}"),user:_("{user} unassigned {task}"),someone:_("{someone} unassigned {task}")},added_comment_to:{you:_("{you} added a comment to {task}: {comment}"),user:_("{user} added a comment to {task}: {comment}"),someone:_("{someone} added a comment to {task}: {comment}")},added_comment:{you:_("{you} added a comment: {comment}"),user:_("{user} added a comment: {comment}"),someone:_("{someone} added a comment: {comment}")},added_project_comment_to:{you:_("{you} added a project comment to {project}: {comment}"),user:_("{user} added a project comment to {project}: {comment}"),someone:_("{someone} added a project comment to {project}: {comment}")},added_project_comment:{you:_("{you} added a project comment: {comment}"),user:_("{user} added a project comment: {comment}"),someone:_("{someone} added a project comment: {comment}")}},n=null,o={},a="you";if(o.you=SPAN({c:"user"},_("You")),null!==e.initiator_id&&e.initiator_id!==window.User.id){var i=q.getUserById(e.initiator_id);null!=i?(a="user",o.user=SPAN({c:"user"},R.formatSimple(i.full_name.split(" ")[0]))):(a="someone",o.someone=SPAN({c:"user"},_("Someone")))}if("item"===e.object_type){if(null!=e.extra_data.content&&(t=R.format(e.extra_data.content),t=t.replace(/^\*\s+/g,""),o.task=$setHTML(SPAN({c:"object"}),t)),"added"===e.event_type)n=r.added_task[a];else if("deleted"===e.event_type)$setClass(o.task,"through"),n=r.deleted_task[a];else if("completed"===e.event_type)$setClass(o.task,"through"),n=r.completed_task[a];else if("uncompleted"===e.event_type)n=r.uncompleted_task[a];else if("updated"===e.event_type)if(void 0!==e.extra_data.last_content)t=R.format(e.extra_data.last_content),t=t.replace(/^\*\s+/g,""),o.old=$setHTML(SPAN({c:"through"}),t),n=r.renamed_task[a];else if(void 0!==e.extra_data.due_date)if(null===e.extra_data.due_date)n=r.removed_task_due_date[a];else{var l=K.fromDate(new Date(e.extra_data.due_date));o.due_date=N.create({due:l},!0),$setClass(o.due_date,"bold"),n=null===e.extra_data.last_due_date?r.set_task_due_date[a]:r.changed_task_due_date[a]}else if(void 0!==e.extra_data.responsible_uid)if(null===e.extra_data.responsible_uid)n=r.unassigned_task[a];else{var s,u=q.getUserById(e.extra_data.responsible_uid);null!=u?window.User.id===u.id?(s="to_you","you"===a?o.to_yourself=SPAN({c:"user"},_("yourself")):o.to_you=SPAN({c:"user"},_("you"))):(s="to_user",o.to_user=SPAN({c:"bold"},R.formatSimple(u.full_name.split(" ")[0]))):(s="to_someone","someone"===a?o.to_someone_else=SPAN({c:"user"},_("someone else")):o.to_someone=SPAN({c:"user"},_("someone"))),n=null===e.extra_data.last_responsible_uid?r.assigned_task[a][s]:r.reassigned_task[a][s]}}else if("note"===e.object_type&&(null!=e.extra_data.content&&(t=R.format('"'.concat($trim(e.extra_data.content,160),'"')),t=t.replace(/^\*\s+/g,""),o.comment=$setHTML(DIV({c:"object"}),t)),"added"===e.event_type))if(null!=e.parent_item_id){var c=e.parent_item_id,d=this.item_by_id[c]||L.getById(c);d&&(this.item_by_id[c]||(this.item_by_id[c]=d),t=R.format(d.content),t=t.replace(/^\*\s+/g,""),o.task=$setHTML(SPAN({c:"object"}),t)),null!=o.task?($AEV(o.comment,"click",$p(H.showItemNotes,e.parent_item_id,null,null)),o.comment=A({href:"#"},o.comment),n=r.added_comment_to[a]):n=r.added_comment[a]}else if(null!=e.parent_project_id){var p=e.parent_project_id,m=this.project_by_id[p]||V.get(p);m&&(this.project_by_id[p]||(this.project_by_id[p]=m),t=R.format(m.name),t=t.replace(/^\*\s+/g,""),o.project=$setHTML(SPAN({c:"object"}),t)),null!=o.project?($AEV(o.comment,"click",$p(H.showProjectNotes,e.parent_project_id,null,null)),o.comment=A({href:"#"},o.comment),n=r.added_project_comment_to[a]):n=r.added_project_comment[a]}var h=Y.format(n,o);if(null==h)return null;var y=DIV();if($add(y,h),"item"===e.object_type){var v=F.renderIcon({id:e.object_id},f.TYPE_ITEM_NOTE,e.extra_data.note_count);$add(y,v)}return y}},{key:"_renderBlankState",value:function(){var e;e=window.User.is_premium?_("You don't have any events"):_("The activity log is a premium feature");var t=DIV();$setHTML(t,_("See all changes that have been made in your account, by you or your collaborators.{next_line}Free users can still view their completed tasks inside any project.").replace("{next_line}","<br/>"));var r=DIV({c:"blank_state_text"},B(e),t);return window.User.is_premium||$add(r,DIV({c:"text"},$setHTML(SPAN(),_("<a>Upgrade to Todoist Premium</a> for instant access to this and a lot of other features.").replace("<a>",'<a href="/premium" target="_blank">')))),r}},{key:"_createReq",value:function(e,t,r,n){var o=$requestJSON("/API/".concat(Q.api_version,"/activity/get"));o.offline_message=!0;var a={token:window.User.token,annotate_notes:!0,limit:30};return null!=n&&(a.initiator_id=n,n===window.User.id&&(a.initiator_id_null=!0)),a.object_event_types=null!=r?'["'.concat(r,'"]'):'["item:", "note:added"]',null!=e?(a.parent_project_id=e,a.include_child_objects=!0):null!=t&&(a.parent_item_id=t,a.include_parent_object=!0),this.current_page>=2&&(a.page=this.current_page),0!==this.current_offset&&(a.offset=this.current_offset),[o,a]}},{key:"_processReqData",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=e.events[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;$isString(i.event_date)&&(i.event_date=new Date(i.event_date))}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}if(this.current_offset+=e.events.length,this.current_offset>=e.count)return this.current_page+=1,this.current_offset=0}}]),e}();t.exports=new X},{"../../models/Collaborators":148,"../../models/DateExt":152,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/SyncEngine":169,"../../react_components/icons":842,"../../react_components/project_picker":955,"../../reducers/mainView":1109,"../../reducers/notes":1114,"../../stores/store":1140,"../agenda/RenderDayView":11,"../avatars/Avatars":17,"../format_html/FormatHtml":21,"../formatter/Formatter.js":22,"../items_utils/ItemDueDates.js":31,"../items_utils/ItemsRender":33,"../notes/Notes":46,"../notes/NotesUtils":49,"../people_assigner/PeopleAssigner":55,"../themes/Themes":95,"./ActivityEvents":3,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(null==e)return{};var r,n,o=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.init=r.get=void 0;var s,u=n(e("../../models/DateExt")),c=n(e("../action_perfomed/ActionPerformed")),d=n(e("../items_utils/ItemAddEditForm")),f=n(e("../items_utils/ItemCommonEdits")),p=n(e("../items_utils/ItemsRender")),m=n(e("../items_utils/ItemCheckbox")),h=n(e("../generic_manager/GenericManagerUtils.js")),y=n(e("../generic_manager/GenericArrows.js")),v=n(e("../../menus/MenuAgendaEdit.js")),g=n(e("../left_menu/LeftMenu")),b=n(e("../project_editor/ProjectEditorManager")),w=n(e("../quick_find/QuickFind")),E=n(e("./AgendaUtils")),j=n(e("./AgendaRenderUtils")),O=n(e("./AgendaCurrentDays")),S=n(e("./CompletedToday")),P=n(e("../../models/ItemsModel")),I=n(e("../../filterist")),k=e("../../filterist/errors"),T=e("../../filterist/section"),C=n(e("../onboarding/Onboarding")),D=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../containers/premium_promo/PremiumOnlyModal")),A=e("../../react_components/reactist/modal"),M=n(e("../../react_components/edit_filter_modal")),x=n(e("../../stores/store")),R=n(e("../../stores/subscribeSelected")),N=e("../../reducers/counts"),L=e("../../constants/constants"),U=n(e("react")),B=n(e("react-dom")),V=e("../../reducers/filters"),F=e("../../reducers/mainView"),H=e("../../react_components/emptyState"),q=e("../../reducers/tooltip"),G=e("../../utils"),z=n(e("../../react_components/item_editor/ItemEditorLegacyWrapper")),W=e("../../reducers/reminders"),Y=e("../../reducers/items"),K=e("../../react_components/confirm_dialog"),J=e("../../reducers/user"),Q=window.Signals,X=window.ElementStore,Z=function(){return s};r.get=Z;var ee=function(){window.AgendaInstance=s=new te};r.init=ee;var te=Class({name:"Agenda",init:function(){var e=this;$bindMethods(this),this.saved_collapse_state={},this.current_query="",this.current_view_type=null,this.genereateAgendaArrows(),O.default.reset(),Q.connect("theme_changed",function(){e.currenty_query&&(S.default.reset(),e.renderCompletedTodayIfNeeded())});var t=this;Q.connect("natural_language_project_updated",function(e){var r=t.current_form&&t.current_form[1]&&t.current_form[1].people_assigner;if(r){r.onProjectUpdated(e);var n=$gc(t.current_form[1],"td","people_assigner_holder");r.isShown()?$show(n):$hide(n)}}),(0,R.default)(x.default,function(e){return e.user.features.karma_vacation},function(e){return e.user.days_off},function(){S.default.reset(),e.renderCompletedTodayIfNeeded()})},query:function(e,t,r){return c.default.mark("Agenda/query"),window.AGENDA_LAST_SHOWN=null,t=void 0===t||t,r=void 0===r||r,Q.sendSignal("agenda_query",e),this.current_query=e,0!=r&&w.default.setValue(""),this.clearEmptyStateIfNeeded(),g.default.hide(),this._runQuery(t),!1},reset:function(){w.default.setValue(""),w.default.setPlaceholder(null),this.current_query="",this.saved_collapse_state={},O.default.reset(),S.default.reset()},saveCurrentCollapseState:function(){this.saved_collapse_state={};var e=this.saved_collapse_state;$map($all("li","task_item"),function(t){t.json&&(e[t.json.id]=t._collapsed)})},refresh:function(){if(this.current_form)return void setTimeout(this.refresh,300);this.current_query.length&&(this.saveCurrentCollapseState(),this._runQuery())},blur:function(){w.default.blur()},showFilterEmptyState:function(){function e(){function e(e){var t=(0,V.filterGetAll)(l).reduce(function(e,t){return e[t.id]=t.item_order+1,e},{});x.default.dispatch((0,V.filterUpdateOrders)(t));var r=x.default.dispatch((0,V.filterAdd)(i({},e,{item_order:1}))),n=r.id;x.default.dispatch((0,F.showFilterView)(n,{bottomListSelected:!0}))}function t(e){var t=e.id,r=o(e,["id"]);x.default.dispatch((0,V.filterUpdate)(t,r)),x.default.dispatch((0,F.showFilterView)(t,{bottomListSelected:!0}))}if(!(0,J.isPremium)(l))return void D.showFilter();(0,A.openModal)(function(r){return U.default.createElement(M.default,{filter:s,onCreate:e,onUpdate:t,onClose:r})})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.badSymbol,n=t.queryString,a=DIV({id:"empty-state-holder"}),l=x.default.getState(),s=(0,V.filterGetByID)(l,l.mainView.id);B.default.render(U.default.createElement(H.EmptyStateFilterIncorrect,{query:n,symbol:r,onButtonClick:function(){Q.sendSignal("filterlist_open_edit",l.mainView.id),e()}}),a);var u=$("editor");$replace(u,a),s&&$addToTop(u,DIV(H2({c:"section_header"},s.name)))},_runQuery:function(e){b.default.reset();var t=this;if(this.current_form=null,""===this.current_query)return!1;Q.sendSignal("change_location","agenda/"+this.current_query);var r,n=x.default.getState();try{r=I.default.filter(this.current_query,n)}catch(t){if(!(t instanceof k.UnrecognizedSymbolError))return console.log(t),this.showFilterEmptyState();if(!e)return this.showFilterEmptyState(t);try{var o="q:"+this.current_query;r=I.default.filter(o,n),this.current_query=o}catch(e){return this.showFilterEmptyState(t)}}O.default.reset();var a=DIV({id:"agenda_view"}),i=r.length>1;i&&(r=r.filter(function(e){return!(e.view===T.VIEW_TYPE_OVERDUE&&0==e.items.length)}),i=r.length>1);var l=this.current_query==L.DEFAULT_QUERY_TODAY||this.current_query==L.DEFAULT_QUERY_7_DAYS;if(!this.current_view_type&&r.length>0){var s=r[0].name;s&&s.indexOf(" ")<0&&"@"===s[0]?this.current_view_type=L.MAIN_VIEW_TYPE_LABEL:this.current_view_type=L.MAIN_VIEW_TYPE_FILTER}var u=!1;if($map(r,function(e){e.items.length>0&&(u=!0),j.default.renderSection(t,a,e,l,e.orderable,i)}),u?this.clearEmptyStateIfNeeded():this.renderCompletedTodayIfNeeded(a),this.renderEmptyNext7DaysIfNeeded(a),(this.current_query==L.DEFAULT_QUERY_TODAY||this.current_query==L.DEFAULT_QUERY_7_DAYS)&&r.length>1){var c;c=this.current_query==L.DEFAULT_QUERY_TODAY?HEADER({c:"view_header large_margin_bottom"},H1(_("Today"))):HEADER({c:"view_header large_margin_bottom"},H1(_("Next 7 days"))),$addToTop(a,c),$all("h2","section_header",a).forEach(function(e){$replaceClass(e,"section_header","subsection_header")})}this.cur_div=a,$replace($("editor"),a),Q.sendSignal("rendered.queries"),this.renderOnboardingTipIfNeeded(),this.flashItem(),this.highlightItems()},flashItem:function(){if(this.flash_item){var e=$("item_"+this.flash_item);e&&($addClass(e,"item_flash"),window.scrollTo(0,$position(e).y-200)),this.flash_item=null}},highlightItems:function(){this.highlight_item_ids&&(this.highlight_item_ids.forEach(function(e){var t=$("item_"+e);t&&$addClass(t,"item_hightlight_flash")}),this.highlight_item_ids=null)},showAddItem:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;return this.saveCurrentItem(function(){var o=$parent(e,"li"),a=$parent(e,"ul");n.clearEmptyStateIfNeeded();var l=DateUtils.dateistResultFromDate(a.day_date),s=LI({c:"manager"});t.editor=new z.default({item:i({},r,{due:u.default.fromDateist(l)}),holder:s,withQuickNote:(0,J.isPremium)(x.default.getState()),withIgnoredInitialMatches:!r.content,onCancel:function(){track("task_form","click","cancel"),t.editor.remove(),$show(o),n.current_form=null,n.renderCompletedTodayIfNeeded()},onSubmit:function(){track("task_form","click","add_from_agenda"),n._onAdd()&&n.showAddItem(e)},onKeyDown:function(e){t.handleEditorKeyDown(e,o)},onMultilinePaste:t._handleMultilinePaste}),n.current_form=["add",s],$hide(o),$addBefore(s,o),t.editor.show()}),!1},_onAdd:function(e){var t=this.current_form[1],r=t.nextSibling,n=this.editor.getResultItem();if(!n.content)return this.current_form=null,this.editor.remove(),$show(r),$isFunction(e)&&e(),!1;var o=$parent(t,"ul"),a=this,l=$parent(t,"li"),s=i({},n);s.project_id||(s.project_id=window.User.inbox_project);var u=1,c=l.previousSibling;c&&c.json&&c.json.day_order&&(u=c.json.day_order+1),s.day_order=u,s.item_order=null;var d=P.default.add(s);if(d.due&&d.due.isSameDate(o.day_date)){var p=a.renderItem(d);$swap(l,p),this.displayArrows(p.json,p)}else $remove(l),this.current_form=null,this.flash_item=d.id,this.refresh(),f.default.notifyAddedTo(d);return this.current_form=null,this.editor.remove(),$show($child(o,"li","agenda_add_task")),$isFunction(e)&&e(),!0},saveCurrentItem:function(e){if(this.current_form){var t;t="edit"==this.current_form[0]?this._onSave:this._onAdd,t(e)}else e()},editCurrentItem:function(e,t){var r=$parent($eventElm(t),"li");if(this.isClickAble(r)){v.default.get().hide(!0);var n=$p(this._initForm,r,e);return this.saveCurrentItem(n),!1}},_addMultilineTask:function(e){var t=this,r=e.shift()
;r&&(this.showAddItem($gc(this.cur_div,"li","agenda_add_task"),{content:r.replace(/^[-*] /g,""),project_id:window.User.inbox_project}),setTimeout(function(){t._onAdd(),t._addMultilineTask(e)},50))},_handleMultilinePaste:function(e,t){var r=this,n=this.editor.getResultItem();if(e=e.filter(function(e){return""!==e}),!(e.length>1)||n&&n.content)t();else{var o=_("Do you want to add %s tasks?").replace("%s",e.length);(0,K.showConfirmDialog)({confirmLabel:_("Add tasks"),message:o,onConfirm:function(){r._addMultilineTask(e)},onCancel:function(){t()}})}},_initForm:function(e){var t=this,r=this,n=e.json,o=h.default.getIndent(e),a=LI({c:"manager indent_".concat(o)});return this.editor=new z.default({item:n,holder:a,withQuickNote:!1,onCancel:function(){t.editor.remove(),$show(e),r.current_form=null},onSubmit:r._onSave,onKeyDown:function(r){t.handleEditorKeyDown(r,e)},onMultilinePaste:this._handleMultilinePaste}),r.current_form=["edit",a],$hide(e),$addAfter(a,e),this.editor.show(),!1},_onSave:function(e){track("task_form","click","save");var t=this,r=$parent(t.current_form[1],"li"),n=r.previousSibling,o=$update({},n.json),a=this.editor.getResultItem(),i=(0,G.getObjectDifference)(a,o);if(this.editor.remove(),t.current_form=null,0===(0,G.keys)(i).length||""===i.content)return $show(n),void($isFunction(e)&&e());P.default.update(o.id,i),(i.project_id||i.section_id)&&x.default.dispatch((0,Y.itemMoveAndReorder)({id:a.id,project_id:a.project_id,section_id:a.section_id},null,{allowUndo:!1})),i.reminders&&x.default.dispatch((0,W.reminderUpdate)(o.id,i.reminders));var l=t.renderItem(a,n.render_opts||null);return $swap(n,l),this.displayArrows(l.json,l,!1),$map($all("li","item_"+n.json.id),function(e){if(e!=l){var r=t.renderItem(a,n.render_opts||null);$swap(e,r)}}),this.current_form=null,$isFunction(e)&&e(),this.refresh(),!1},renderItem:function(e,t){var r;r||(r={fn_toggle_menu:v.default.toggle,fn_complete_item:this.completeItem,fn_undo_complete_item:this.uncompleteItem,with_project:!0,with_time:!0,no_indent:!0}),t&&$update(r,t);var n=p.default.renderItem(e,r);n.render_opts.renderCls=this,$addClass(n,"agenda_item"),$addClass(n,"indent_1"),e.id in this.saved_collapse_state?n._collapsed=this.saved_collapse_state[e.id]:n._collapsed=!0;var o=!0;return t&&t.not_editable&&(o=!1),o&&(h.default.attachClick(n.td_time,$p(this.editCurrentItem,r)),h.default.attachClick(n.content,$p(this.editCurrentItem,r))),n},completeItem:function(e,t){var r=this;if(C.default.isFirstCompleteAction())return void C.default.showFirstCompleteAnimation(e,function(){r.completeItem(e,t)});var n=e.json.due&&e.json.due.isSameDate(new Date);c.default.mark("Agenda/complete");var o=!1;t&&t.shift&&(o=!0);var a=P.default.complete(e.json,o),i=!1,l=$first(a);l&&l.in_history&&(i=!0),$map(a,function(e){var t=$("item_"+e.id);t&&(!i&&$hasClass(t,"agenda_child_expanded")?m.default.update(t,1,r.uncompleteItem,!1):d.default.removeItemInList(t))}),r.arrows.updateArrows(),e.json.due&&e.json.due.is_recurring&&r.refresh(),n&&(S.default.reset(),setTimeout(r.renderCompletedTodayIfNeeded,150))},uncompleteItem:function(e){c.default.mark("Agenda/complete");var t=P.default.uncomplete(e.json);$update(e.json,t),m.default.update(e,0,this.completeItem),this.arrows.updateArrows(),this.renderCompletedTodayIfNeeded()},getSortableItems:function(){return $all("li","agenda_item").filter(function(e){if($hasClass(e,"reorder_item"))return!0;var t=e.json.due&&e.json.due.isLessThan(new Date);return!($isHidden(e)||$hasClass(e,"moved")||t)})},displayArrows:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];P.default.getChildren(e).length>0&&(this.arrows.displayArrow(t),r&&this.fetchChildren(t))},genereateAgendaArrows:function(){var e=this;this.arrows=new y.default,this.arrows.list=this,this.arrows.getChildren=h.default.getChildren,this.arrows._hasChildren=function(e){return!(!e||!e.json)&&P.default.getChildren(e.json).length>0},this.arrows._getArrows=function(e){return $all("div","arrow",e)},this.arrows._switchState=function(t){return s.saveCurrentItem(function(){var r=t.host_item;r._collapsed=!r._collapsed,e.fetchChildren(r),$remove($all("div","arrow",r)),e.arrows.displayArrow(r),e.saveCurrentCollapseState()}),!1}},fetchChildren:function(e){var t=X.get(e,"children");if(e.fetched&&t)return void(e._collapsed?$map(t,function(e){$hide(e)}):$map(t,function(e){$show(e)}));e._collapsed||E.default.fetchChildren(e)},getNElement:function(e){for(var t=e.nextSibling;t;){if(!$isHidden(t)&&!$hasClass(t,"manager"))return t;t=t.nextSibling}},getPElement:function(e){for(var t=e.previousSibling;t;){if(!$isHidden(t)&&!$hasClass(t,"manager"))return t;t=t.previousSibling}},renderEmptyNext7DaysIfNeeded:function(e){if(this.current_query===L.DEFAULT_QUERY_7_DAYS){var t=$("empty-state-holder");if(t)return $addToTop(e,t);var r=DIV({id:"empty-state-holder"});(0,q.isScheduled)(q.TOOLTIP_EMPTY_STATE_NEXT_7DAYS,x.default.getState())&&(B.default.render(U.default.createElement(H.EmptyStateNext7Days,null),r),$addToTop(e,r))}},renderCompletedTodayIfNeeded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$("agenda_view");if(this.current_query===L.DEFAULT_QUERY_TODAY){var t;if(this.current_query===L.DEFAULT_QUERY_TODAY){var r=x.default.getState();(0,N.countToday)(r)+(0,N.countOverdue)(r)===0?($add(e,t=DIV({id:"completed_today_holder"})),S.default.render(t,e,this)):this.clearEmptyStateIfNeeded()}}},renderOnboardingTipIfNeeded:function(){C.default.showCompleteTaskTooltipIfNeeded()},clearEmptyStateIfNeeded:function(){var e=$("empty-state-holder");e&&(B.default.unmountComponentAtNode(e),$remove($("completed_today_holder")),$remove(e))},isClickAble:function(e){return e&&!$isIn($nodeName(e),["a","img"])&&!$hasClass(e,"label")&&!$hasClass(e,"menu")},handleEditorKeyDown:function(e,t){var r=this;if((e.ctrlKey||e.metaKey)&&38===e.keyCode){e.preventDefault();var n=this.getPElement(t);if(n)return this.saveCurrentItem(function(){$hasClass(n,"task_item")?r._initForm(n):r.showAddItem(n)}),!1}if((e.ctrlKey||e.metaKey)&&40===e.keyCode){e.preventDefault();var o=this.getNElement(t);return!!o&&(this.saveCurrentItem(function(){$hasClass(o,"task_item")?r._initForm(o):r.showAddItem(o)}),!1)}}}),re={get:Z,init:ee};r.default=re},{"../../constants/constants":98,"../../containers/premium_promo/PremiumOnlyModal":108,"../../filterist":121,"../../filterist/errors":118,"../../filterist/section":124,"../../menus/MenuAgendaEdit.js":134,"../../models/DateExt":152,"../../models/ItemsModel":155,"../../react_components/confirm_dialog":680,"../../react_components/edit_filter_modal":710,"../../react_components/emptyState":731,"../../react_components/item_editor/ItemEditorLegacyWrapper":863,"../../react_components/reactist/modal":971,"../../reducers/counts":1090,"../../reducers/filters":1095,"../../reducers/items":1100,"../../reducers/mainView":1109,"../../reducers/reminders":1122,"../../reducers/tooltip":1133,"../../reducers/user":1135,"../../stores/store":1140,"../../stores/subscribeSelected":1141,"../../utils":1176,"../action_perfomed/ActionPerformed":2,"../generic_manager/GenericArrows.js":24,"../generic_manager/GenericManagerUtils.js":26,"../items_utils/ItemAddEditForm":28,"../items_utils/ItemCheckbox":29,"../items_utils/ItemCommonEdits":30,"../items_utils/ItemsRender":33,"../left_menu/LeftMenu":37,"../onboarding/Onboarding":52,"../project_editor/ProjectEditorManager":62,"../quick_find/QuickFind":76,"./AgendaCurrentDays":6,"./AgendaRenderUtils":7,"./AgendaUtils":8,"./CompletedToday":9,react:"react","react-dom":"react-dom"}],6:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.DateistDateHelpers,s=window,u=s.DateUtils,c=function(){function e(){n(this,e),this.reset=this.reset.bind(this),this.add=this.add.bind(this),this.isAdded=this.isAdded.bind(this),this.getNonOverdue=this.getNonOverdue.bind(this)}return a(e,[{key:"reset",value:function(){this.current_dates={},this.current_dates_list=[]}},{key:"add",value:function(e){e=l.date_max(e);var t=u.formatView(e);this.current_dates[t]=e,this.current_dates_list.push(e)}},{key:"isAdded",value:function(e){e=l.date_max(e);var t=u.formatView(e);return this.current_dates[t]}},{key:"getNonOverdue",value:function(){var e=l.date_min(new Date),t=[],r=!0,n=!1,o=void 0;try{for(var a,i=this.current_dates_list[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;l.is_overdue(e,s)||t.push(s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}}],[{key:"initClass",value:function(){this.prototype.current_dates={},this.prototype.current_dates_list=[]}}]),e}();c.initClass(),t.exports=new c},{}],7:[function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./RenderSearchView")),o=e("../../models/ProjectsModel"),a=e("./RenderFlatListView"),i=e("./RenderDayView"),l=e("./RenderAllProjectsView"),s=e("./RenderMultiDayView"),u=e("./RenderOverdueView");r.renderSection=function(e,t,r,c,d,f){"flat_view"===r.view?a.render(e,t,r.items,r.name,!1,f):"day_view_fixed"===r.view?i.render(e,t,r.day_date,r.items,d):"day_view_span"===r.view?s.displayItems(e,t,r.items,d):"view_all"===r.view?l.render(e,t,o.getAll()):"search"===r.view&&n.default.render(e,t,r),"overdue"===r.view&&u.render(e,t,r.items,c)}},{"../../models/ProjectsModel":159,"./RenderAllProjectsView":10,"./RenderDayView":11,"./RenderFlatListView":12,"./RenderMultiDayView":13,"./RenderOverdueView":14,"./RenderSearchView":15}],8:[function(e,t,r){"use strict";var n=e("../../utils/deps"),o=e("../../reducers/items"),a=window,i=a.ElementStore,l=(0,n.defineDeps)("AgendaUtils",["Agenda","ItemsModel","store"]);r.query=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return l.Agenda.get().query(e,t,r)},r.blur=function(){return l.Agenda.get().blur()},r.reset=function(){return l.Agenda.get().reset()},r.refresh=function(){return l.Agenda.get().refresh()},r.getQuery=function(){return l.Agenda.get().current_query},r.renderItem=function(e,t){return l.Agenda.get().renderItem(e,t)},r.showAddItem=function(e){return l.Agenda.get().showAddItem(e)},r.fetchChildren=function(e){e.fetched=!0,e._collapsed=!1;var t={};e.render_opts&&$update(t,e.render_opts),t.no_indent=!1,t.no_drag_and_drop=!0;var r=e,n=[],a=!0,s=!1,u=void 0;try{for(var c,d=l.ItemsModel.getChildren(e.json,{sorted:!0})[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value;f=(0,o.annotateWithIndent)(f,l.store.getState()),f.agenda_child_view=!0,f.dont_show_arrow=!0,f.collapsed=!1,e.json.indent>1&&(f.indent=f.indent-e.json.indent+1),f.in_history&&f.indent>1&&(t.no_checkbox=!0);var p=l.Agenda.get().renderItem(f,t);$addClass(p,"agenda_child_expanded"),$removeClass(p,"indent_1"),p.fetched=!0,$addAfter(p,r),r=p,n.push(p)}}catch(e){s=!0,u=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw u}}return i.set(e,"children",n),!1}},{"../../reducers/items":1100,"../../utils/deps":1154}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=n(e("react")),a=e("react-redux"),i=n(e("react-dom")),l=n(e("../../stores/store")),s=n(e("../opener/WindowOpener.js")),u=e("../../reducers/stats"),c=e("../../reducers/user"),d=e("../../react_components/emptyState"),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../containers/ProductivityStat")),p=function(){var e=$("empty-state-holder");e&&(i.default.unmountComponentAtNode(e),$remove(e),$remove($("completed_today_holder")))},m=function(e,t,r){var n,p=l.default.getState(),m=(0,u.completedToday)(p),_=(0,u.totalCompleted)(p),y=$("empty-state-holder")||DIV({id:"empty-state-holder",c:"completed_today"});return $add(e,y),n=0===m?_<10?o.default.createElement(d.EmptyStateTodayNew,{onButtonClick:function(){var e=$gc($gc(t,"li","agenda_add_task"),"a");r.showAddItem(e)}}):p.user.features.karma_vacation?o.default.createElement(d.EmptyStateTodayVacation,{onButtonClick:function(){return s.default.showPrefs("karma")}}):(0,c.isDayOff)(p)?o.default.createElement(d.EmptyStateTodayDayOff,null):o.default.createElement(d.EmptyStateTodayDefault,{onButtonClick:function(){var e=$gc($gc(t,"li","agenda_add_task"),"a");r.showAddItem(e)}}):o.default.createElement(a.Provider,{store:l.default},o.default.createElement(d.EmptyStateTodayZero,{onFacebookClick:function(){window.open(h("facebook"))},onProductivityClick:f.show,onTwitterClick:function(){window.open(h("twitter"))}})),i.default.render(n,y),y},h=function(e){return"API/v8/completed/tdzero_share?token=".concat(window.User.token,"&service=").concat(e)};r.render=m,r.reset=p},{"../../containers/ProductivityStat":102,"../../react_components/emptyState":731,"../../reducers/stats":1130,"../../reducers/user":1135,"../../stores/store":1140,"../opener/WindowOpener.js":53,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],10:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../project_editor/ProjectEditorManager"),l=function(){function e(){n(this,e),this.render=this.render.bind(this)}return a(e,[{key:"render",value:function(e,t,r){var n=[],o=!0,a=!1,l=void 0;try{for(var s,u=r[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;n.push(c.id)}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}i.showProjects(n,null,{holder:t,update_location:!1,dont_replace_holder:!0,hideEmptyState:!0})}}]),e}();t.exports=new l},{"../project_editor/ProjectEditorManager":62}],11:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),l=e("../../reducers/mainView"),s=window,u=s.DateistDateHelpers,c=window,d=c.DateUtils,f=e("./AgendaCurrentDays"),p=e("./AgendaUtils"),m=e("./sort"),h=m.dayViewSortFn,y=function(){function e(){n(this,e),this.render=this.render.bind(this)}return a(e,[{key:"getDefaultOpts",value:function(e){var t=new Date,r=u.date_max(t),n=e.getTime()<r.getTime();return{day_diff:Math.abs(u.day_diff(t,e)),cur_date:r,is_overdue:n}}},{key:"render",value:function(e,t,r,n){var o,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];f.add(r),e.display_date=!0;var i=DIV(),l=this.getDefaultOpts(r);$add(i,this._renderDayHeader(u.date_max(r),!0,l)),$add(i,o=UL({class:"items day_list"})),o.day_date=r,0===l.day_diff&&$addClass(o,"ul_today"),n.sort(h),a||$addClass(o,"is_filtered");var s=LI({c:"agenda_item reorder_item",s:"font-size: 0; height: 0px; padding: 0;"});$add(o,s);var c=!0,d=!1,m=void 0;try{for(var y,v=n[Symbol.iterator]();!(c=(y=v.next()).done);c=!0){var g,b=y.value;$add(o,g=e.renderItem(b,{no_drag_and_drop:!a})),e.displayArrows(b,g)}}catch(e){d=!0,m=e}finally{try{c||null==v.return||v.return()}finally{if(d)throw m}}if($add(t,DIV({c:"section_day"},i,o)),0===l.day_diff||!l.is_overdue){var w,E;$add(o,E=LI({c:"agenda_add_task"},w=A({href:"#",c:"action"},SPAN({c:"icon icon_add"},svgs.get("sm1/plus.svg")),_("Add task")))),w.onclick=E.onclick=$p(p.showAddItem,w)}}},{key:"_renderDayHeader",value:function(e,t,r){var n;r||(r=this.getDefaultOpts(e));var o=u.is_same_date(e,r.cur_date),a=function(t){var r=A({href:"#"},t);return $AEV(r,"click",function(){var t,r=u.day_diff(new Date,e);return t=0===r?_("Today"):1===r?_("Tomorrow"):d.getWeekDay(e.getDay()),i.default.dispatch((0,l.showQueryView)(t)),!1}),r};if(r.is_overdue&&!o)n=H2({c:"section_header"}),1===r.day_diff?($add(n,a(_("Yesterday"))),$add(n,SPAN({class:"subsection_header__date"},d.formatView(e,!0)))):($add(n,a(_("%s days ago").replace("%s",Math.abs(r.day_diff)))),$add(n,SPAN({class:"subsection_header__date"},d.formatView(e,!0)))),$addClass(n,"overdue");else{var s;0===r.day_diff?(n=H2(a(_("Today"))),s=!0):1===r.day_diff?(n=H2(a(_("Tomorrow"))),s=!0):(n=H2(a(d.getWeekDay(e.getDay()))),s=!1),$addClass(n,"section_header"),$add(n,SPAN({class:"subsection_header__date"},d.formatView(e,s)))}return n}}]),e}();t.exports=new y},{"../../reducers/mainView":1109,"../../stores/store":1140,"./AgendaCurrentDays":6,"./AgendaUtils":8,"./sort":16}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var l=n(e("../../stores/store")),s=n(e("react")),u=e("../../reducers/stats"),c=e("../../constants/constants"),d=e("../../react_components/emptyState"),f=n(e("../misc/renderContainer")),p=e("./sort"),m=p.createFlatListSort,h=function(){function e(){o(this,e),this.render=this.render.bind(this)}return i(e,[{key:"render",value:function(e,t,r,n){var o=(!(arguments.length>4&&void 0!==arguments[4])||arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5]);$add(t,DIV(H2({c:"section_header"},n)));var a=UL({class:"items section_separator",style:"margin-bottom: 9px;"});if(0===r.length&&!o){var i,p=$("empty-state-holder")||DIV({id:"empty-state-holder"}),h=(0,u.totalCompleted)(l.default.getState());switch(e.current_view_type){case c.MAIN_VIEW_TYPE_LABEL:i=h<20?s.default.createElement(d.EmptyStateLabelNew,null):s.default.createElement(d.EmptyStateLabelZero,null);break;case c.MAIN_VIEW_TYPE_FILTER:i=s.default.createElement(d.EmptyStateFilter,null)}return(0,f.default)(i,p),void $add(t,p)}e.display_date=!1;var _=m(l.default.getState());r.sort(_);var y=!0,v=!1,g=void 0;try{for(var b,w=r[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var E=b.value,j=e.renderItem(E,{with_due_date:!0,with_time:!1,with_project:!0,no_indent:!0,no_drag_and_drop:!0});$add(a,j),e.displayArrows(E,j)}}catch(e){v=!0,g=e}finally{try{y||null==w.return||w.return()}finally{if(v)throw g}}$add(t,a)}}]),e}();t.exports=new h},{"../../constants/constants":98,"../../react_components/emptyState":731,"../../reducers/stats":1130,"../../stores/store":1140,"../misc/renderContainer":44,"./sort":16,react:"react"}],13:[function(e,t,r){"use strict";var n=e("../../utils"),o=e("./AgendaCurrentDays"),a=e("./RenderDayView"),i={displayItems:function(e,t,r,i){var l=(0,n.groupBy)(r,function(e){return e.due.dateMin().getTime()}),s=!0,u=!1,c=void 0;try{for(var d,f=(0,n.keys)(l).sort()[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value,m=l[p],h=m[0].due.toDate();o.add(h),a.render(e,t,h,m,i)}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}};t.exports=i},{"../../utils":1176,"./AgendaCurrentDays":6,"./RenderDayView":11}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var l=n(e("../../stores/store")),s=n(e("../../models/ItemsModel")),u=window,c=u.Signals,d=e("../../containers/SmartSchedule"),f=e("./sort"),p=f.createOverdueViewSort,m=e("../../menus/MenuReschedule"),h=function(){function e(){var t=this;o(this,e),this.render=this.render.bind(this),this.current_items=null,c.connect("menu_reschedule_hide",function(){t.current_items=null}),c.connect("menu_open_smart_schedule",function(){d.openSmartSchedule(t.current_items),m.get().hide()}),c.connect("menu_move_to_today",function(){var e=new Date,r=t.current_items.reduce(function(t,r){return t[r.id]=e,t},{});s.default.updateDue(r),m.get().hide()})}return i(e,[{key:"render",value:function(e,t,r,n){var o,a=this,i=DIV({c:"section_overdue"},o=H2({c:"section_header warning"},_("Overdue")));if(r.length>0&&n){var s=svgs.get("sm1/calendar.svg",{width:20,height:20,className:"icon"}),u=A({c:"smart_schedule_link menu"},_("Reschedule overdue"),s);$AEV(u,"click",function(){a.current_items=r,m.get().toggle(u)}),$add(o,u)}var c=UL({class:"items section_separator",style:"margin-bottom: 9px;"});if(0===r.length)$add(c,LI({c:"no_matches"},_("No tasks match your query")));else{e.display_date=!1,r.sort(p(l.default.getState()));var d=!0,f=!1,h=void 0;try{for(var y,v=r[Symbol.iterator]();!(d=(y=v.next()).done);d=!0){var g=y.value,b=e.renderItem(g,{with_due_date:!0,with_time:!1,with_project:!0,no_indent:!0,no_drag_and_drop:!1});$add(c,b),e.displayArrows(g,b)}}catch(e){f=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}}$add(i,c),$add(t,i)}}]),e}();t.exports=new h},{"../../containers/SmartSchedule":103,"../../menus/MenuReschedule":143,"../../models/ItemsModel":155,"../../stores/store":1140,"./sort":16}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){return d(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var y=e("../../utils/fp"),v=e("../../utils"),g=n(e("../avatars/Avatars")),b=n(e("../notes/NoteMedia")),w=n(e("../notes/Notes")),E=n(e("../project_editor/ProjectEditorManager")),j=n(e("../../stores/store")),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../containers/premium_promo/PremiumOnlyModal")),S=n(e("react")),I=n(e("react-dom")),k=n(e("../../logger/Logger")),T=e("../../react_components/emptyState"),C=n(e("../../models/SyncEngine")),D=e("../../reducers/notes"),M=e("../../reducers/items/utils"),x=n(e("../items_utils/ItemCheckbox")),R=window,N=R.Indicator,L=R.DateUtils,U=e("../../models/ItemsModel"),B=e("../../models/ProjectsModel"),V=e("./sort"),F=V.createSearchViewSort,H=V.createNoteSearchViewSort,q=e("../../models/Collaborators"),G=e("../formatter/Formatter.js"),z=e("../items_utils/ItemsRender"),W=e("../themes/Themes"),Y={render:function(e,t,r){new ee(e,r).render(t,r)}},K=(0,y.get)(".file_attachment.file_name"),J=(0,y.get)(".file_attachment.title"),Q=(0,y.sortBy)(["project_id","date_completed"]),X=Y;r.default=X;var Z=function(e){return new Promise(function(t,r){var n=$requestJSON("/API/".concat(C.default.api_version,"/completed/search"));n.offline_message=!0,n.addCallback(function(e){e.items&&(e.items=e.items.map(M.deserializeItemFields)),t(e)}),n.addErrback(function(e){r(e)}),C.default.api_version>="v7.5"?n.sendReq({query:"search: ".concat(e),only_history:!0,token:window.User.token}):n.sendReq({query:e,only_history:!0,token:window.User.token})})},ee=function(){function e(t,r){var n=this;f(this,e),h(this,"unarchiveHistoryItem",function(e){U.unarchive(e.json),x.default.update(e,0,n.agenda.completeItem)}),this.agenda=t,this.section=r,this.query=r.query,this.completedholder=null,this.handleFetchLink=this.handleFetchLink.bind(this),this.render=this.render.bind(this),this.renderItem=this.renderItem.bind(this),this.renderTabs=this.renderTabs.bind(this),this.notes=[],this.items=[]}return m(e,[{key:"getSearchResult",value:function(){var e=U.getAll(!1),t=(0,D.noteGetAll)(j.default.getState()),r=(0,v.looseMatch)(this.query),n=e.filter(function(e){return!e.in_history&&r(e.content)}),o=function(e){return!(!K(e)||!r(K(e)))||!(!J(e)||!r(J(e)))},a=t.filter(function(e){return!!r(e.content)||!!o(e)});return this.sortItems(n),this.sortNotes(a),[n,a]}},{key:"sortItems",value:function(e){var t=F(j.default.getState());e.sort(t)}},{key:"sortNotes",value:function(e){var t=H(j.default.getState());e.sort(t)}},{key:"renderTabs",value:function(e,t){var r=this,n=e.map(function(e){return LI(e[0])}),o=e.map(function(e){return DIV({c:"ist_tab_content"},e[1])}),a=UL.apply(void 0,[{c:"ist_tab_nav"}].concat(s(n))),i=DIV.apply(void 0,s(o));$addClass(n[0],"active"),$addClass(o[0],"active"),$add(t,a,i);for(var l=function(){for(var t=0;t<e.length;t++)$removeClass(n[t],"active"),$removeClass(o[t],"active")},u=0;u<e.length;u++)!function(t){var a=e[t][0],i=n[t],s=o[t];$AEV(i,"click",function(){l(),r.clearEmptyState(),$addClass(i,"active"),$addClass(s,"active"),a===_("Comments")&&0===r.notes.length?r.renderNoMatch(s,{with_action:!1,shouldFadeIn:!1}):a===_("Tasks")&&0===r.items.length&&r.renderNoMatch(s,{shouldFadeIn:!1})})}(u)}},{key:"render",value:function(e){var t=DIV({c:"search_holder section_separator"}),r=(0,v.format)(_("Results for \u201c{search_term}\u201d"),{search_term:this.query});$add(t,H2({c:"section_header"},r));var n=this.getSearchResult(),a=o(n,2),i=a[0],l=a[1];this.notes=l,this.items=i;var s=this.renderItemsResult(i),u=this.renderNotesResult(l);this.renderTabs([[_("Tasks"),s],[_("Comments"),u]],t),$add(e,t)}},{key:"addFetchLink",value:function(e){var t=DIV({c:"search_link_holder"}),r=A({c:"action search_completed"},_("Search completed tasks..."));$add(t,r);var n=U.getAll(!1),o=(0,v.looseMatch)(this.query),a=n.filter(function(e){return!e.in_history&&e.checked&&!(0,v.isSection)(e.content)&&o(e.content)}),i=$p(this.handleFetchLink,t,a);$AEV(r,"click",i),$add(e,t)}},{key:"handleFetchLink",value:function(e,t){var r=this;if(!window.User.is_premium)return void O.showCompletedTasksSearch();$replace(e,null),$add(e,N.cssSpinner());var n;Z(this.query).catch(function(e){throw n=k.default.captureError(e,{tags:{where:"complete_search"}}),e}).then(function(o){try{if($remove($("items_no_match")),$replace(e,null),o.projects){var a=!0,i=!1,l=void 0;try{for(var u,c=$values(o.projects)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;B.archivedFeteched(d)}}catch(e){i=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}}if(0===o.items.length){var f=(0,v.format)(_("No completed tasks matching for \u201c{search_term}\u201d"),{search_term:r.query});r.renderNoMatch(r.completedholder,{alt_text:f,with_action:!1})}else{var p=UL({c:"items",style:"margin-bottom: 9px;"});r.sortItems(t);var m=Q(o.items);[].concat(s(t),s(m)).forEach(function(e){r.renderItem(p,e)}),$add(r.completedholder,p)}}catch(e){throw n=k.default.captureError(e,{tags:{where:"complete_search"}}),e}}).catch(function(){$remove($("items_no_match")),$replace(e,null);var o=A({c:"action search_completed"},_("Search completed tasks..."));$AEV(o,"click",$p(r.handleFetchLink,e,t));var a=DIV(P({c:"error_msg"},_("An unknown error happened while searching. Please wait a few minutes and try again."),CODE("(ERROR_ID: ".concat(n,")"))),o);$add(e,a)})}},{key:"renderItemsResult",value:function(e){var t=this,r=UL({c:"items",style:"margin-bottom: 9px;"});if(this.completedholder=DIV({c:"completed_holder"}),0===e.length)return this.renderNoMatch(this.completedholder);e.map(function(e){t.renderItem(r,e)});var n=DIV(r);return this.addFetchLink(n),$add(n,this.completedholder),n}},{key:"renderItem",value:function(e,t){if(t=U.getById(t.id)||t){if(B.get(t.project_id)){var r=!t.in_history&&!t.checked,n={with_due_date:!0,with_time:!0,with_project:!0,no_indent:!0,no_drag_and_drop:!0,not_editable:!r};t.in_history&&(n.fn_undo_complete_item=this.unarchiveHistoryItem);var o=this.agenda.renderItem(t,n);$add(e,o),r&&this.agenda.displayArrows(t,o)}}}},{key:"renderNoMatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.alt_text,n=t.with_action,o=void 0===n||n,a=t.shouldFadeIn,i=void 0===a||a,l=r||(0,v.format)(_("No matches for \u201c{search_term}\u201d"),{search_term:this.query}),s=DIV({id:"empty-state-holder"}),u=U.getAll(!1),c=(0,v.looseMatch)(this.query),d=u.filter(function(e){return!e.in_history&&e.checked&&!(0,v.isSection)(e.content)&&c(e.content)});return $add(e,s),I.default.render(S.default.createElement(T.EmptyStateSearchResults,{headerText:l,withAction:o,shouldFadeIn:i,onButtonClick:$p(this.handleFetchLink,e,d)}),s),e}},{key:"renderNotesResult",value:function(e){var t=this;if(0!==e.length){var r=UL({c:"note_search_list",style:"margin-bottom: 9px;"});e.map(function(e){var n=t.renderNote(e);$add(r,n)});return DIV(r)}}},{key:"renderNote",value:function(e){var t,r,n=e.posted_uid===window.User.id?window.User:q.getUserById(e.posted_uid),o=!e.item_id;if(o){if(!(r=B.get(e.project_id)))return null}else{var a=U.getById(e.item_id);if(!a)return null;r=B.get(a.project_id),t=H6({c:"task_title"}),$setHTML(t,G.format(a.content,{as_html:!0}))}var i;r&&(i=z.createProjectItem(null,r),$AEV(i,"click",function(){E.default.showProjects([r.id])}));var l=n?g.default.renderAvatar(n,"medium",W.theme):g.default.renderAnonymous("medium"),s=DIV({c:"note_content"}),u=G.format(e.content,{as_html:!0});r.shared&&n&&(u=(0,v.firstName)(n.full_name)+": "+u),$setHTML(s,u);var c=b.default.render(e),d=SPAN({c:"time"},L.formatView(new Date(e.posted))),f=DIV({c:"content"},t||null,s,c,DIV({c:"meta_info"},d,i)),p=LI(l,f);return $AEV(p,"click",function(){o?w.default.showProjectNotes(e.project_id,e.id):w.default.showItemNotes(e.item_id,e.id)}),p}},{key:"clearEmptyState",value:function(){var e=$("empty-state-holder");e&&(I.default.unmountComponentAtNode(e),$remove(e))}}]),e}()},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../logger/Logger":129,"../../models/Collaborators":148,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/SyncEngine":169,"../../react_components/emptyState":731,"../../reducers/items/utils":1103,"../../reducers/notes":1114,"../../stores/store":1140,"../../utils":1176,"../../utils/fp":1166,"../avatars/Avatars":17,"../formatter/Formatter.js":22,"../items_utils/ItemCheckbox":29,"../items_utils/ItemsRender":33,"../notes/NoteMedia":45,"../notes/Notes":46,"../project_editor/ProjectEditorManager":62,"../themes/Themes":95,"./sort":16,react:"react","react-dom":"react-dom"}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),
r.createNoteSearchViewSort=r.createSearchViewSort=r.createOverdueViewSort=r.createDayViewSortByProject=r.createFlatListSort=r.createByProjectAndItemOrderSort=r.createByResponsible=r.dayViewSortFn=r.byItemContent=r.byID=r.byChildOrder=r.byDateAdded=r.byProjectID=r.byDayOrder=r.byDueDate=r.byPriority=r.composeSortFunc=void 0;var o=e("reselect"),a=e("../../utils"),i=n(e("../formatter/Formatter")),l=n(e("../../logger/Logger")),s=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){for(var n=0,o=t;n<o.length;n++){var a=o[n],i=a(e,r);if(0!=i)return i}return 0}};r.composeSortFunc=s;var u=function(e,t){return t.priority-e.priority};r.byPriority=u;var c=function(e,t){return e=e.due,t=t.due,e||t?e&&!t?-1:!e&&t?1:e.isSameDate(t)?e.with_time||t.with_time?e.with_time&&!t.with_time?-1:!e.with_time&&t.with_time?1:e.getTime()-t.getTime():0:e.getTime()-t.getTime():0};r.byDueDate=c;var d=function(e,t){return e=e.day_order,t=t.day_order,$isNumber(e)&&$isNumber(t)?-1===e&&-1!==t?1:-1!==e&&-1===t?-1:e-t:$isNumber(e)&&!$isNumber(t)?-1:!$isNumber(e)&&$isNumber(t)?1:$isNumber(e)||$isNumber(t)?void 0:0};r.byDayOrder=d;var f=function(e,t){return e=e.project_id,t=t.project_id,(0,a.isRealID)(e)&&(0,a.isRealID)(t)?e-t:(0,a.isRealID)(e)&&(0,a.isTempID)(t)?-1:(0,a.isTempID)(e)&&(0,a.isRealID)(t)?1:(0,a.isTempID)(e)&&(0,a.isTempID)(t)?e.localeCompare(t):void 0};r.byProjectID=f;var p=function(e,t){return e=e.date_added,t=t.date_added,h(e)&&h(t)?e.getTime()-t.getTime():!h(e)&&h(t)?1:h(e)&&!h(t)?-1:h(e)||h(t)?void 0:0};r.byDateAdded=p;var m=function(e,t){return e.child_order-t.child_order};r.byChildOrder=m;var h=function(e){return e instanceof Date},_=function(e,t){return e=e.id,t=t.id,(0,a.isRealID)(e)&&(0,a.isRealID)(t)?e-t:(0,a.isRealID)(e)&&(0,a.isTempID)(t)?-1:(0,a.isTempID)(e)&&(0,a.isRealID)(t)?1:(0,a.isTempID)(e)&&(0,a.isTempID)(t)?e.localeCompare(t):void 0};r.byID=_;var y={only_text:!0,as_html:!1},v=function(e,t){return e=i.default.format(e.content,y),t=i.default.format(t.content,y),e.localeCompare(t)};r.byItemContent=v;var g=s(c,u,d,p,f,_);r.dayViewSortFn=g;var b=[Math.pow(10,12),Math.pow(10,10),Math.pow(10,7),Math.pow(10,4),Math.pow(10,2)],w=(0,o.createSelector)(function(e){return e.projects},function(e){var t=(0,a.LMemoize)(function(t){var r=e[t];if(r.inbox_project)return 1e6;if(r.team_inbox)return 1000001;for(var n=[];;){if(n.push(r.child_order),!r.parent_id)break;r=e[r.parent_id]}n.reverse();for(var o=0,a=0;a<n.length;a++)o+=n[a]*b[a];return o});return function(e,r){return e=t(e.project_id),r=t(r.project_id),e-r}}),E=(0,o.createSelector)(function(e){return e.collaborators.all},function(e){return function(t,r){return t=e[t.responsible_uid],r=e[r.responsible_uid],t||r?t&&!r?-1:!t&&r?1:t&&r?t.full_name===r.full_name?0:t.full_name>r.full_name?-1:1:void 0:0}});r.createByResponsible=E;var j=(0,o.createSelector)(function(e){return e.sections},function(e){return e.items},function(e,t){var r=(0,a.LMemoize)(function(r){for(var n=t[r],o=[];;){o.push(n.child_order);{if(!n.parent_id){var a=e[n.section_id],i=a?a.section_order+1:1;o.push(i);break}if(!t[n.parent_id])return l.default.captureMessage("visual_order_issue",{extra:{item:n}}),-1;n=t[n.parent_id]}}o.reverse();for(var s=0,u=0;u<o.length;u++)s+=o[u]*b[u];return s});return function(e,t){return e=r(e.id),t=r(t.id),e-t}}),O=(0,o.createSelector)(w,j,function(e,t){return s(e,t)});r.createByProjectAndItemOrderSort=O;var S=(0,o.createSelector)(O,function(e){return s(u,c,e,_)});r.createFlatListSort=S;var P=(0,o.createSelector)(O,function(e){return s(c,u,e,f,_)});r.createDayViewSortByProject=P;var I=(0,o.createSelector)(O,function(e){return s(c,u,e,_)});r.createOverdueViewSort=I;var k=(0,o.createSelector)(O,function(e){return s(e,_)});r.createSearchViewSort=k;var T=function(e,t){return e.item_id&&t.item_id?0:!e.item_id&&t.item_id?-1:e.item_id&&!t.item_id?1:e.item_id||t.item_id?void 0:0},C=function(e,t){return e.item_id&&t.item_id?e.item_id-t.item_id:0},D=(0,o.createSelector)(j,function(e,t){return function(r,n){var o=e[r.item_id],a=e[n.item_id];return o&&a?t(o,a):0}}),A=(0,o.createSelector)(w,function(e,t){return function(r,n){var o=e[r.item_id],a=e[n.item_id];return o&&a?t(o,a):0}}),M=(0,o.createSelector)(A,D,function(e,t){return s(e,T,t,C,_)});r.createNoteSearchViewSort=M},{"../../logger/Logger":129,"../../utils":1176,"../formatter/Formatter":22,reselect:"reselect"}],17:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=function(){function e(){n(this,e),this.renderAvatar=this.renderAvatar.bind(this),this.renderAnonymous=this.renderAnonymous.bind(this)}return a(e,[{key:"renderAvatar",value:function(e,t,r){var n;if(e.image_id)n="".concat(this.base_url).concat(e.image_id,"_").concat(t,".jpg");else{var o=50;"small"===t&&(o=18);var a="theme_dark"==r?"1f1f1f":"ffffff";n="https://avatars.doist.com/?".concat($encode({fullName:e.full_name||e.email.split("@")[0],email:e.email,size:2*o,bg:a}))}return IMG({src:n,c:"user_avatar ".concat(t)})}},{key:"renderAnonymous",value:function(e){return IMG({src:"https://d3ptyyxy2at9ui.cloudfront.net/circular_profile-1df5ac.svg",c:"user_avatar ".concat(e)})}}],[{key:"initClass",value:function(){this.prototype.base_url="https://dcff1xvirvpfp.cloudfront.net/"}}]),e}();i.initClass();var l=new i;window.Avatars=l,void 0!==t&&null!==t&&(t.exports=l)},{}],18:[function(e,t,r){"use strict";var n=window,o=n.Signals,a=e("../../models/SyncEngine");r.init=function(){return window.COMET_TIMEOUT=null,o.connect("comet_td_sync",function(){window.COMET_TIMEOUT&&clearTimeout(window.COMET_TIMEOUT);var e=function(){return a.sync(null,!0)};window.COMET_TIMEOUT=setTimeout(e,200)})}},{"../../models/SyncEngine":169}],19:[function(e,t,r){"use strict";function n(){var e=INPUT({type:"text",value:""}),t=_("Copy to clipboard"),r=A({href:"#",c:"action"},t),n=DIV(e,r),o=FORM({c:"copy_to_clipboard"},n),a=function(){try{e.focus();try{e.setSelectionRange(0,9999)}catch(t){e.select()}if(!document.execCommand("Copy"))throw new Error("fail");$setHTML(r,_("Text copied!")),$addClass(r,"active"),setTimeout(function(){$setHTML(r,t),$removeClass(r,"active")},1500)}catch(e){alert(_("Could not copy the URL to the clipboard! Please copy manually."))}return!1};return $AEV(r,"click",a),$AEV(e,"keydown",function(e){return!(!e.ctrlKey&&!e.metaKey)||($preventDefault(e),!1)}),$AEV(e,"cut",function(e){return $preventDefault(e),!1}),{form:o,input:e,fn_copy_to_clipboard:a}}Object.defineProperty(r,"__esModule",{value:!0}),r.genereate=n},{}],20:[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var l=e("../../utils/deps"),s=window,u=s.MouseHover,c=window,d=c.ElementStore,f=e("../../components/project_editor/ProjectEditorManager"),p=e("../postpone/Postpone"),m=e("../sortable/Sortable.js"),h=e("../items_utils/ItemCommonEdits"),y=e("../../models/ItemsModel"),v=e("../../models/StateModel"),g=e("../../utils").parseId,b=(0,l.defineDeps)("DragAndDrop",["Agenda","ProjectList"]),w=function(){function e(){o(this,e),this.attachHandler=this.attachHandler.bind(this),this.attach=this.attach.bind(this),this.agendaMakeSortable=this.agendaMakeSortable.bind(this),this.projectEditorMakeSortable=this.projectEditorMakeSortable.bind(this),this.projectListMakeSortable=this.projectListMakeSortable.bind(this),this.genericMouseDown=this.genericMouseDown.bind(this),this.genericOnEnd=this.genericOnEnd.bind(this),this.genericMakeSortable=this.genericMakeSortable.bind(this),this.agendaOnEnd=this.agendaOnEnd.bind(this),this.agendaOnDrag=this.agendaOnDrag.bind(this),this.agendaOnStart=this.agendaOnStart.bind(this),this.onDragToProject=this.onDragToProject.bind(this),this.onEndToProject=this.onEndToProject.bind(this),this.autoFocusInput=this.autoFocusInput.bind(this),this.scrollCustom=this.scrollCustom.bind(this),this.handler=DIV({c:"drag_and_drop_handler"},svgs.get("sm1/drag.svg")),this.handler.onmousedown=this.genericMouseDown,this.handler.reuseable=!0,this.current_li=null,v.set("drag_and_drop_mode",v.DragMode.waiting)}return i(e,[{key:"attachHandler",value:function(e){$gc(e,"div","drag_and_drop_handler")||(this.current_li=e,$child(e,"div","arrow")?$addClass(this.handler,"extra_arrow_margin"):$removeClass(this.handler,"extra_arrow_margin"),$ATT(e,this.handler))}},{key:"attach",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){return v.get("drag_and_drop_mode")!==v.DragMode.reordering&&(u.clearCurrentTimeout(),t.attachHandler(e))},o=function(){return $remove(t.handler)};u.attach(e,"drag_and_drop_".concat(e.json.id),n,o,200),r.trigger_mouse_over&&n()}},{key:"agendaMakeSortable",value:function(e){return this.genericMakeSortable(b.Agenda.get(),e)}},{key:"projectEditorMakeSortable",value:function(e){return this.current_editor=f.current_editor,this.drag_section=d.get($parent(this.current_li,"div","section"),"SectionList"),this.genericMakeSortable(this.current_editor,e)}},{key:"projectListMakeSortable",value:function(e){return this.genericMakeSortable(b.ProjectList,e)}},{key:"genericMouseDown",value:function(e){if(e&&e.shiftKey)return!1;var t=this.current_li.json.manager_type,r=this.current_li.getAttribute("data-type");return $hasClass(this.current_li,"agenda_item")?this.agendaMakeSortable(e):$hasClass(this.current_li,"task_item")||"project_editor"===t?this.projectEditorMakeSortable(e):"project_list_item"===r?this.projectListMakeSortable(e):void 0}},{key:"genericOnEnd",value:function(){v.set("drag_and_drop_mode",v.DragMode.waiting),this.current_editor=null,this.sortable.onEnd(),this.autoFocusInput()}},{key:"genericMakeSortable",value:function(e,t){var r,n,o=this;e.save_indent=!1,this.handler.onmousedown=this.genericMouseDown;var a=$parent(this.handler,"li");if("ProjectEditor"===e.list_class){r=[];var i=!0,l=!1,s=void 0;try{for(var u,c=$all("li","task_item")[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value;$hasClass(d,"history_item")||($hasClass(d,"reorder_item")||d.json&&!$isHidden(d))&&r.push(d)}}catch(e){l=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}}else r=e===b.Agenda.get()?e.getSortableItems():e.getAllRenrededItems(!0);this.sortable=n=new m(r,e),this.project_items=null;var f=!1,p=n,h=p.onDrag,_=n,y=_.onEnd,g=n,w=g.onStart;return"ProjectEditor"===e.list_class?(this.project_items=this.calculateProjectListXY(),this.list_class=e,h=this.onDragToProject,y=this.onEndToProject,f=!0):e===b.ProjectList?(y=function(){o.genericOnEnd(),e.saveOrder()&&e.reRender()},e===b.ProjectList?f=!0:this.sortable.set_indent=!1):e===b.Agenda.get()&&(y=this.agendaOnEnd,w=this.agendaOnStart,h=this.agendaOnDrag,this.sortable.set_indent=!1),ICE.$dnd.dragAble(a,{handler:this.handler,move_x:f,on_start:w,on_drag:h,scroll_on_overflow:!0,scroll_custom:this.scrollCustom,on_end:y}),v.set("drag_and_drop_mode",v.DragMode.reordering),ICE.$dnd._start(this.handler,t),$preventDefault(t),!1}},{key:"agendaOnEnd",value:function(e){var t=ICE.$dnd.current_root,r=t.json;if(this.genericOnEnd(e),this.postpone_drop){var o=$hasClass(this.postpone_drop,"drop_background");if($remove(this.postpone_drop),o)return void p.postPoneUpdate(t.json,!0)}$removeClass(t,"moved");var a=$parent(t,"ul"),i=$hasClass(a,"is_filtered"),l={},s=1,u=!0,c=!1,d=void 0;try{for(var f,m=a.childNodes[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var h=f.value;$hasClass(h,"moved")||h.json&&h.json.id&&!h.is_manager&&(l[h.json.id]=s++)}}catch(e){c=!0,d=e}finally{try{u||null==m.return||m.return()}finally{if(c)throw d}}var _=a.day_date;if(r.due&&_&&!r.due.isSameDate(_)){var v=r.due.inheritDate({year:_.getFullYear(),month:_.getMonth(),day:_.getDate()});y.updateDue(n({},r.id,v))}i||y.updateDayOrders(l),b.Agenda.get().refresh()}},{key:"agendaOnDrag",value:function(){if(this.sortable.onDrag(),this.postpone_drop){var e=$position(this.postpone_drop).y,t=ICE.$dnd.mouse_pos||$mousePos(),r=t.y,n=e-r;n<14&&n>-60?$addClass(this.postpone_drop,"drop_background"):$removeClass(this.postpone_drop,"drop_background")}}},{key:"agendaOnStart",value:function(){var e,t=ICE.$dnd.current_root,r=t.json,n=$parent(t,"ul");try{var o=p.getPostponeDate(r),a=o.formated_due;e=a}catch(t){e="",console.log(t)}this.postpone_drop=DIV({id:"postpone_drop"},svgs.get("sm1/scheduler_postpone.svg"),$setHTML(SPAN(),_("Drop to postpone: <b>%s</b>").replace("%s",e))),$setOpacity(this.postpone_drop,0),$addAfter(this.postpone_drop,n),$fx.fadeIn(this.postpone_drop),this.sortable.onStart()}},{key:"calculateProjectListXY",value:function(){var e=[],t=b.ProjectList.getAllRenrededItems(!0,!1);t.push($("filter_inbox")),$("filter_team_inbox")&&t.push($("filter_team_inbox")),t=t.concat($$('#top_filters li[data-type="project_list_item"]'));var r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,s=$position(l);s.x_max=s.x+l.offsetWidth,s.y_max=s.y+l.offsetHeight,s.dom=l,e.push(s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}},{key:"onDragToProject",value:function(){if(this.sortable.onDrag(),!this.current_li.json.manager_type){var e=ICE.$dnd.mouse_pos||$mousePos(),t=e.x,r=e.y;r+=$("left_menu").scrollTop-$scrollTop(),this.drop_to_dom&&($removeClass(this.drop_to_dom,"drop_background"),this.drop_to_dom=null);var n=!0,o=!1,a=void 0;try{for(var i,l=this.project_items[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value,u=t>=s.x&&t<=s.x_max;if(u=u&&r>=s.y&&r<=s.y_max){$addClass(s.dom,"drop_background"),this.drop_to_dom=s.dom;break}}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}}},{key:"onEndToProject",value:function(){var e;v.set("drag_and_drop_mode",v.DragMode.waiting);var t=!0,r=!1,n=void 0;try{for(var o,a=this.project_items[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;$removeClass(i.dom,"drop_background")}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var l=ICE.$dnd.current_root,s=this.sortable.cur_child;this.sortable.onEnd();var c=$parent(l,"div","project_editor_instance");c&&(c=d.get(c,"editor"));var f=d.get($parent(l,"div","section"),"SectionList");if(f===this.drag_section?(this.drag_section.saveOrder(l),this.drag_section.arrows.updateArrows()):f&&f!==this.drag_section&&(this.drag_section.arrows.updateArrows(),f.arrows.updateArrows(),f.saveOrder(l)),this.drop_to_dom){var p=[l];s&&(p=p.concat(s));var m={},_=m[l.json.project_id]=[l.json.id],y=!0,b=!1,w=void 0;try{for(var E,j=s[Symbol.iterator]();!(y=(E=j.next()).done);y=!0)e=E.value,_.push(e.json.id)}catch(e){b=!0,w=e}finally{try{y||null==j.return||j.return()}finally{if(b)throw w}}var O;O=this.drop_to_dom.json?this.drop_to_dom.json.id:g(this.drop_to_dom.getAttribute("data-id")),h.moveItems(m,O);var S=!0,P=!1,I=void 0;try{for(var k,T=p[Symbol.iterator]();!(S=(k=T.next()).done);S=!0){var C=k.value;$remove(C)}}catch(e){P=!0,I=e}finally{try{S||null==T.return||T.return()}finally{if(P)throw I}}this.drop_to_dom=null}this.autoFocusInput(),u.clearCurrentTimeout(),this.attachHandler(l)}},{key:"autoFocusInput",value:function(){if(this.current_li.json.manager_type){if(f.current_react_editor)return f.current_react_editor.focusInput();var e=$child(this.current_li,null,"richtext_editor");e&&e.proxyFocus()}}},{key:"updateDayStyles",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=$all("h2","section_header")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value,i=a.parentNode,l=i.nextSibling,s=0,u=!0,c=!1,d=void 0;try{for(var f,p=l.childNodes[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;m.json&&m.json.id&&!m.is_manager&&(s+=1)}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}0===s?$hasClass(a,"overdue")&&($remove(i),$remove(l)):$removeClass(i,"no_matches")}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"scrollCustom",value:function(e,t){var r=this.scrollObject(e);r.scrollBy?r.scrollBy(0,t):r.scrollTop+=t}},{key:"scrollObject",value:function(e){var t=$("left_menu"),r=$position(t);return e.x>=r.x-50&&e.x<=r.x+t.offsetWidth?t:window}}]),e}();window.DragAndDrop=new w,t.exports=window.DragAndDrop},{"../../components/project_editor/ProjectEditorManager":62,"../../models/ItemsModel":155,"../../models/StateModel":165,"../../utils":1176,"../../utils/deps":1154,"../items_utils/ItemCommonEdits":30,"../postpone/Postpone":58,"../sortable/Sortable.js":90}],21:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=function(){function e(){n(this,e),this.format=this.format.bind(this)}return a(e,[{key:"format",value:function(e,t){if(null==e)return null;for(var r=e.split(/[{}]/),n=1,o=r.length-1;n<=o;n+=2){if(null==t[r[n]])return["error: ",e];r[n]=t[r[n]]}return r}}]),e}();t.exports=new i},{}],22:[function(e,t,r){"use strict";function n(e){var t=e.getAttribute("href");if(t.length<50)return t;if("/"==e.pathname)return t.substring(0,50)+"...";var r=e.pathname;r.endsWith("/")&&(r=r.substring(0,r.length-1));var n=r.split("/");return n.length<3?t.substring(0,50)+"...":e.protocol+"//"+e.hostname+"/"+n[1]+"/.../"+n[n.length-1]}var o={formatSimple:function(e,t){return t=this.setOpts(t),t.with_email=!1,window.DoistFormat.formatSimple(e,t)},format:function(e,t){return t=this.setOpts(t),e=window.DoistFormat.format(e,t),e=o.transformExternalServices(e,t)},setOpts:function(e){return e||(e={}),e.fn_generate_link=function(e,t,r){e=e.replace(/javascript:/gi,"");var n=r.attachment;if(t==e&&n&&n.title&&n.url==e){var a=$strip(n.title);a.length>0&&(t=a)}var i=250;e==t&&(i=50),t==e&&t.length>i&&(t=t.substring(0,i)+"\u2026"),t=-1!=t.indexOf("&lt;")||-1!=t.indexOf("&gt;")?$escapeHTML(t,{skip:["&"]}):$escapeHTML(t);var l='<a href="'+e+'" class="ex_link" target="_blank" rel="noopener noreferrer" onclick="return linkRedirecter(this)" onmouseover="Formatter.showLinkTooltip(this)" onmouseout="Formatter.hideLinkTooltip(this)">'+$strip(t)+"</a>";return l=o.handleExternalServices(e,l)},e.fn_handle_gmail=function(e,t,r){return'<a href="https://mail.google.com/mail/u/0/'+t+'" class="ex_link" target="_blank" rel="noopener noreferrer" onclick="return linkRedirecter(this)">'+o.generateServiceIcon("email")+$xssStrip($strip(r))+"</a>"},e.fn_handle_outlook=function(t,r,n){if(e.only_text)return $xssStrip($strip(n));var a=o.generateServiceIcon("email");return"<a href='#openOutlook/"+r.replace(/'/g,"")+'\' class="ex_link" onclick="return OutlookIntegration.openEmail(\''+r+"')\">"+a+$xssStrip($strip(n))+"</a>"},e.fn_handle_thunderbird=function(e,t,r){var n=o.generateServiceIcon("email");return"<a thunder_id='"+r.replace(/'/g,"")+'\' href="#openThunderbird" class="ex_link" onclick="return linkRedirecter(this)">'+n+$xssStrip($strip(t))+"</a>"},e},generateServiceIcon:function(e){var t;switch(e){case"attachment":t="sm1/attachment.svg";break;case"cal":t="sm1/calendar.svg";break;case"email":t="sm1/email.svg";break;case"evernote":t="sm1/evernote.svg";break;case"twist":t="sm1/twist.svg"}return svgs.getString(t,{className:"service_icon"})},handleExternalServices:function(e,t){return-1===e.indexOf("d1x0mwiac2rqwt.cloudfront.net")&&-1===e.indexOf("files.todoist.com")||(t=o.generateServiceIcon("attachment")+" "+t),-1!==e.indexOf("mail.google.com")&&(t=o.generateServiceIcon("email")+" "+t),-1===e.indexOf("twistapp.com/a/")&&-1===e.indexOf("twist.com/a/")||(t=o.generateServiceIcon("twist")+" "+t),-1===e.indexOf("evernote.com/Home.action")&&-1===e.indexOf("evernote.com/shard")&&-1===e.indexOf("evernote://")||(t=o.generateServiceIcon("evernote")+t),-1!==e.indexOf("google.com/calendar/event")&&(t=o.generateServiceIcon("cal")+t),t},transformExternalServices:function(e){if(-1!=e.indexOf('<a href="readdle-spark://')){var t=e.match(/(<a href="readdle-spark:\/\/[^>]+>)(.+)(<\/a>)/);t&&0==t[2].indexOf("readdle-spark:")&&(e=e.replace(t[0],"")||_("Open")+" Spark",t[1]=t[1].replace('target="_blank"','target="_self"'),e=o.generateServiceIcon("email")+" "+t[1]+e+t[3])}else if(-1!=e.indexOf('<a href="bear://')){var r=e.match(/(<a href="bear:\/\/[^>]+>)(.+)(<\/a>)/);r&&0==r[2].indexOf("bear:")&&(e=e.replace(r[0],"")||_("Open")+" Bear",r[1]=r[1].replace('target="_blank"','target="_self"'),e=o.generateServiceIcon("attachment")+" "+r[1]+e+r[3])}else if(-1!=e.indexOf('<a href="airmail://')){var n=e.match(/(<a href="airmail:\/\/[^>]+>)(.+)(<\/a>)/);n&&0==n[2].indexOf("airmail:")&&(e=e.replace(n[0],"")||_("Open")+" AirMail",n[1]=n[1].replace('target="_blank"','target="_self"'),e=o.generateServiceIcon("attachment")+" "+n[1]+e+n[3])}return e},tooltip_TO:null,showLinkTooltip:function(e){o.tooltip_TO&&clearTimeout(o.tooltip_TO),o.tooltip_TO=setTimeout(function(){var t=n(e);t=$trim(t,50),IstTooltip.show(e,DIV({c:"ist_tooltip_content"},t))},350)},hideLinkTooltip:function(){o.tooltip_TO&&clearTimeout(o.tooltip_TO),IstTooltip.hide()}};window.Formatter=t.exports=o},{}],23:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),i=e("../../reducers/mainView"),l=e("../../reducers/utils"),s=e("../../react_components/confirm_dialog"),u=window,c=u.Signals,d=window,f=d.MenuRightClick,p=e("../../menus/HelperColorsPriorities.js"),m=p.selectColor,h=e("../generic_manager/GenericManager.js"),y=e("../generic_manager/GenericManagerUtils.js"),v=e("../action_perfomed/ActionPerformed"),g=e("../formatter/Formatter.js"),b=e("../../models/TemporaryIds"),w=h.extend({initWithData:function(e){var t={data_model:e.data_model,max_indent:4,undo_reorder_intent:e.undo_reorder_intent,markdown_support:!1};$update(t,e),this.opts=t,this.parent(t),this.event_name=e.event_name,this.current_list=null,this.current_item=null,this.empty_text=e.empty_text,this.move_x=!1,this.menu.hide_callbacks.push(function(e,t){if(t){var r=$eventElm(t);if($parent(r,"div","scheduler")||$parent(r,"div","dialog-content")||$parent(r,"div","dialog-timepicker")||$parent(r,"div","dialog-timezone"))return!0;$removeClass($all("li","on_menu_show"),"on_menu_show")}}),c.connect("color_selected",this.colorSelected),e.init&&e.init(),this.is_inited=!0},insertItems:function(e){var t=this.current_list;if(t){this.opts.with_indent&&(e=(0,l.annotateIndentOrder)(e));var r=this.opts.fn_get_selected();$replace(t,null);var n=window.User.team_inbox,o=!0,a=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;if(!c.inbox_project&&c.id!==n){var d=this.renderItem(c);$add(t,d),this.current_item&&b.getRealId(this.current_item.json.id)==c.id&&(this.menu.shown&&(this.menu.current_holder=d),this.current_item=d),r[c.id]&&$addClass(d,"current")}}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}y.showHideChildren($AF(t.childNodes)),this.opts.with_arrows&&this.arrows.updateArrows(),this.checkEmpty()}},reRender:function(){if(this.current_form)return void setTimeout(this.reRender,200);this.insertItems(this.opts.fn_get_all())},renderEmpty:function(){return this.parent()},checkEmpty:function(){this.parent(),c.sendSignal("check_premium_promo")},getProjectById:function(e){var t=null,r=!0,n=!1,o=void 0;try{for(var a,i=$AF(this.current_list.childNodes)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;if(l.json&&l.json.id===e){t=l;break}}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t},deselectCurrent:function(){this.current_list&&$removeClass($all("li","current",this.current_list),"current"),this.current_item&&$removeClass(this.current_item,"current")},setCurrentVisually:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=$AF(this.current_list.childNodes)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(i.json&&i.json.id===e){$removeClass($all("li","current"),"current"),$addClass(i,"current");break}}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}},setCurrentById:function(e,t,r,n){var o;if(this.flash_item=t,e===window.User.inbox_project||e===window.User.team_inbox)this.setCurrent(null,r,n),a.default.dispatch((0,i.showProjectView)([e],{focusedItemId:t}));else{var l=!1,s=!0,u=!1,c=void 0;try{for(var d,f=$AF(this.current_list.childNodes)[Symbol.iterator]();!(s=(d=f.next()).done);s=!0)if(o=d.value,o.json&&o.json.id===e){this.setCurrent(o,r,n),l=!0;break}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}l||this.opts.fn_show_items([e],r,t)}return!1},setCurrent:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.cancelCurrentEdit(),this.deselectCurrent(),e&&e.json){if(v.mark("GenericLeftList/setCurrent"),this.current_item=e,this.current_item_with_children=r,$addClass(e,"current"),this.opts.with_indent&&!1!==r){var n=y.getChildren(e,!0),o=!0,a=!1,i=void 0;try{for(var l,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;$addClass(u,"current")}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}}this.opts.fn_show_items([e.json.id],r,this.flash_item),this.opts.with_arrows&&this.arrows.updateArrows()}},editingDone:function(e){e&&(this.current_item=e),this.current_mode=null,this.current_form=null,this.current_cancel=null,this.opts.with_arrows&&this.arrows.updateArrows(),this.checkEmpty(),this.opts.fn_editing_done&&this.opts.fn_editing_done()},saveItem:function(e,t){var r=$parent(e,"li"),n=r.list_item;if(r&&n){var o=y.getChildren(n);$addAfter(n,r);var a=n.nextSibling,i=$gc(e,null,"richtext_editor").proxyGetValue();this.opts.with_indent&&y.normalizeIndent(r,r);var l=this.selected_color,s={name:""!==i?i:n.json.name};if(this.opts.fn_parse_form&&!1===(s=this.opts.fn_parse_form(e,s,!0)))return;null!==l&&(s.color=l);var u=this.opts.data_model.update(n.json.id,s),c=this.renderItem(u);if($hasClass(n,"current")&&$addClass(c,"current"),$addClass(c,"generic_left_list_updated"),$swap(n,c),this.opts.with_indent){var d=y.getIndent(r);y.setIndent(c,d),this.saveOrder()}$remove(r),this.opts.with_indent&&y.updateParentIds(c,this.opts.data_model,o),this.editingDone(c);a!==c.nextSibling&&this.saveOrder()}return $isFunction(t)&&t(),!1},editCurrentItem:function(){var e=this;this.parent();var t=function(){if($show(e.current_item),e.opts.with_arrows)return e.arrows.updateArrows()},r={cancel:y.genCancel("li",t,this,null,{"data-track":"Labels"===this.event_name?"labels|edit_cancel":"projects|edit_cancel"}),action:this.saveItem,submit_val:_("Save"),submit_attr:{"data-track":"Labels"===this.event_name?"labels|edit_confirm":"projects|edit_confirm"},name_val:this.current_item.json.name,indent_arrows:this.opts.with_indent,placeholder:this.opts.placeholder,fn_extend_form:this.opts.fn_extend_form,current_item:this.current_item.json,manager_type:this.manager_type,manager_reodering:this.manager_reodering};this.current_cancel=r.cancel;var n=this.generateAddEditForm(r);if(this.opts.with_color){this.selected_color=null;var o=this.createColorSelector(this.current_item.json.color);$ATT(n.text_box_holder,o)}else $addClass(n.form,"no_color");var a=n.li_item,i=n.textarea;a.list_item=this.current_item,this.current_form=n.form,this.opts.with_indent&&y.setIndent(a,this.current_item.json.indent),$addAfter(a,this.current_item),i.proxyPlaceCursor(),this.arrows&&this.arrows.updateArrows()},deleteCurrentItem:function(e){var t,r,n=this;v.mark("GenericLeftList/deleteCurrentItem");var o=y.getChildren(e,!1),a=[],i=!1;e.json.shared&&(i=!0);var l=function(e){return $escape(n.format(e,!0,!1))},u=null;if(this.opts.with_indent&&o&&o.length>0){var d=[],f=!0,p=!1,m=void 0;try{for(var h,g=o[Symbol.iterator]();!(f=(h=g.next()).done);f=!0){var b=h.value;r=b.json&&b.json.name,r&&(d.push(l(r)),a.push(b.json.id))}}catch(e){p=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw m}}t=_("Following will be deleted as well: %s."),i&&(t=_("Following will be left as well: %s.")),u=t.replace("%s","<b>".concat(d.join(", "),"</b>"))}t=_("Are you sure you want to delete %s?");var w=_("Delete");i&&(t=_("Are you sure you want to leave %s?"),w=_("Leave"));var E=t.replace("%s","<b>".concat(l(e.json.name),"</b>"));u&&(E="<span>".concat(E,"<br/><br/>").concat(u,"</span>"));var j=function(){return o.splice(0,0,e),a.splice(0,0,e.json.id),n.opts.data_model.deleteMany(a),n.opts.fn_on_delete&&n.opts.fn_on_delete(o),n.editingDone(),c.sendSignal("instant_refresh_interface")};(0,s.showConfirmDialog)({confirmLabel:w,htmlMessage:E,onConfirm:j})},addItem:function(e,t){var r,o=$parent(e,"li"),a=o.previousSibling,i=a?a.json.item_order+1:1;r=void 0!==e.color?e.color:this.opts.default_color,void 0!==this.selected_color&&(r=this.selected_color),this.opts.with_indent&&y.normalizeIndent(o,o);var l={name:$gc(e,null,"richtext_editor").proxyGetValue(),color:r};if(this.opts.with_indent||(l.item_order=i),this.opts.fn_parse_form&&(l=this.opts.fn_parse_form(e,l,!0)),""!==l.name&&!1!==l.is_changed){var s=this.opts.data_model.add(l);if(!s)return;if(this.opts.with_indent){y.normalizeIndent(o,o);s=n({},s,{indent:y.getIndent(o)})}var u=this.renderItem(s);$addClass(u,"generic_left_list_added"),$swap(o,u),this.setCurrent(u),window.scroll(0,0),this.editingDone(u),this.saveOrder({noUndo:!0}),$isFunction(t)&&t()}else this.current_item=o,$isFunction(t)&&t();return!1},showAddItem:function(e,t,r){var n=this;if(!this.fn_check_show_add_item||this.fn_check_show_add_item()){this.parent(e,t,r);var o=function(){if(n.checkEmpty(),n.opts.with_arrows)return n.arrows.updateArrows()},a=this.current_item,i=this.opts.default_color;!0===e&&a&&(i=a.json.color),this.selected_color=i;var l={cancel:y.genCancel("li",o,this,null,{"data-track":"Labels"===this.event_name?"labels|add_cancel":"projects|add_cancel"}),action:this.addItem,submit_val:this.opts.add_text,submit_attr:{"data-track":"Labels"===this.event_name?"labels|add_confirm":"projects|add_confirm"},name_val:"",indent_arrows:this.opts.with_indent,placeholder:this.opts.placeholder,fn_extend_form:this.opts.fn_extend_form,manager_type:this.manager_type,manager_reodering:this.manager_reodering};this.current_cancel=l.cancel;var s=this.generateAddEditForm(l);if(this.opts.with_color){var u=this.createColorSelector(i);$ATT(s.text_box_holder,u)}else $addClass(s.form,"no_color");if((this.current_form=s.form).color=i,!0===e&&this.opts.with_indent){var c=y.getIndent(a)||1,d=a&&a.nextSibling;d&&d.json&&d.indent===c+1&&(c+=1),y.setIndent(s.li_item,c)}this.insertForm(s.li_item,t),this.current_item=null,this.arrows&&this.arrows.updateArrows(),setTimeout(function(){return s.textarea.proxyFocus()},20)}},render:function(){var e=this,t=DIV({c:"left_list_man"});$addClass(t,"actions");var r=A({href:"",class:"action sel_add_project","data-track":"Labels"===this.event_name?"labels|add":"projects|add"},SPAN({c:"icon_add"
},svgs.get("sm1/plus.svg")),this.opts.add_text);return this.add_item=r,r.onclick=function(){return e.saveCurrentItem(function(){return e.current_item=e.getItem($last),e.showAddItem()}),!1},$add(t,r),$add($(this.opts.list_holder),t)},renderItem:function(e,t){var r,o=this,a=TABLE({cellpadding:0,cellspacing:0,class:"item_table"}),i=TBODY();$add(a,i);var l={class:"clickable"};this.li_data_type&&(l["data-type"]=this.li_data_type),l["data-id"]=e.id;var s=LI(l,a);s.json=n({},e),$ATT(s,DIV({c:"invisible_space"}));var u=null;!0!==e.not_editable?(u=y.getMenuEditIcon(),s.menu_icon=u,new f(s,$p(this.toggleMenu,s,{id:e.id,menu_icon:u},e.id)),this.opts.with_ordering&&!0!==t&&!e.inbox_project&&this.opts.DragAndDrop.attach(s)):$addClass(s,"not_editable");var c=e.name,d=c.match(/[^ ]{20}.+?/g);if(d){var p=!0,m=!1,h=void 0;try{for(var _,v=d[Symbol.iterator]();!(p=(_=v.next()).done);p=!0){var g=_.value;c=c.replace(g,g.substr(0,21)+" [BREAK_SYMBOL]")}}catch(e){m=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(m)throw h}}}var b=this.format(c,!1,!0);b=b.replace(/\[BREAK_SYMBOL\]/g,"<br />");var w=TD({class:"name"},$setHTML(SPAN(),b)),E=TD({class:"menu"},u);$AEV(E,["click","touchstart"],function(){return o.toggleMenu(s,u,e.id)}),r=this.opts.with_color?TD({class:"td_color"},this.opts.fn_create_color(e)):null,$add(w,this.opts.fn_create_counter(e));var j=function(t){var r=$eventElm(t);if(!r.is_menu_icon&&"svg"!==$nodeName(r)&&!$hasClass(r,"arrow"))return o.opts.fn_on_click(s,e,t)};return $AEV(s,"click",j),$add(i,TR(r,w,E)),this.opts.with_indent&&y.setIndent(s,e.indent,!0),s},colorSelected:function(e){var t=$("color_selector");if(t&&this.current_form){this.selected_color=e;var r=this.createColorSelector(e);$swap(t,r),IstTooltip.hide();var n=$child(this.current_list,"textarea");n&&n.proxyFocus(!0)}},createColorSelector:function(e){var t=this,r={color:e};this.current_item&&(r.id=this.current_item.json.id);var n=this.opts.fn_create_color(r,!0);return n.id="color_selector",$addClass([n,$child(n,"div")],"menu_icon"),n.setAttribute("data-track","Labels"===this.event_name?"labels|add_or_edit_color":"projects|add_or_edit_color"),$AEV(n,"click",function(e){return e.stopPropagation(),t.menu_colors.show(n,!0),!1}),n.change_y_pos=function(e){return e+=$scrollTop(),e-=$("left_menu").scrollTop},m(this.menu_colors,e),n},createColorDiv:function(e,t){var r=DIV({class:"div_color counter_color ".concat(this.icon),id:e});return $setStyle(r,"color",t),r},toggleMenu:function(e,t,r,n){return this.opts.fn_on_show_menu&&this.opts.fn_on_show_menu(e),$removeClass($all("li","on_menu_show"),"on_menu_show"),$addClass(e,"on_menu_show"),t.change_y_pos=function(){var e=t.menu_icon||t,r=$position(e).y+15;return r-=$("left_menu").scrollTop,r+=$scrollTop()},this.menu.toggle(t,e,n),!1},getAllRenrededItems:function(e,t){void 0===t&&(t=!0);var r=this.parent(e),n=[],o=!0,a=!1,i=void 0;try{for(var l,s=r[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;$hasClass(u,"not_editable")||(!0===t&&u.json&&u.json.inbox_project||!0===t&&u.json&&u.json.team_inbox||n.push(u))}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n},isEmpty:function(){return 0===this.getAllRenrededItems(!1,!1).length},format:function(e,t,r){this.opts.markdown_support||(r=!1);var n="g_l_".concat(t).concat(r),o={only_text:t,as_html:r,with_links:!1,cache_prefix:n};return g.formatSimple(e,o)}});t.exports=w},{"../../menus/HelperColorsPriorities.js":130,"../../models/TemporaryIds":172,"../../react_components/confirm_dialog":680,"../../reducers/mainView":1109,"../../reducers/utils":1136,"../../stores/store":1140,"../action_perfomed/ActionPerformed":2,"../formatter/Formatter.js":22,"../generic_manager/GenericManager.js":25,"../generic_manager/GenericManagerUtils.js":26}],24:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=e("../generic_manager/GenericManagerUtils.js"),i=new Class({init:function(e){e&&$update(this,e),void 0!==this.x_off?this.x_off=this.x_off:this.x_off=0,$bindMethods(this),$isMozilla()&&(this.y_offset=4)},updateArrows:function(e){(e=e||this.list.current_list)&&(this.removeArrows(e),this._updateArrows(e),this.list.current_his_list&&this._updateArrows(this.list.current_his_list))},displayArrow:function(e,t){if(!(e.is_manager||e.json&&e.json.dont_show_arrow)){var r=this._hasChildren(e),n=e.json&&e.json.collapsed;if(!0===t&&(n=!0),void 0!==e._collapsed&&(n=!!e._collapsed),r){var o="down";n&&(o="right");var a=svgs.get("sm1/caret.svg"),i=DIV({c:"arrow "+o});return $add(i,a),$addToTop(e,i),i.host_item=e,e.arrow=i,i.onclick=$p(this._switchState,i),i}}},removeArrows:function(e){var t=this._getArrows(e);$map(t,function(e){e.host_item&&(e.host_item.arrow=null),$remove(e)})},setList:function(e){this.list=e},_updateArrows:function(e){for(var t=$first(e.childNodes),r=t;r;)$isHidden(r)||this._childEdited(r)||this.displayArrow(r),r=r.nextSibling},_saveState:function(e,t){this.data_model.update(e,{collapsed:t},!0)},_switchState:function(e){if(e){var t=e.host_item,r=t.json;if(r.collapsed){t.json=n({},r,{collapsed:0});var o=a.getChildren(t);a.showHideChildren(o,t),$map(o,function(e){$addClass(e,"task_expand_collapse")})}else t.json=n({},r,{collapsed:1}),$map(a.getChildren(t),function(e){$hide(e)});this.updateArrows($parent(t,"ul")),this._saveState(t.json.id,t.json.collapsed)}},_hasEdit:function(e,t){return e.is_manager&&a.getIndent(e),!0},_childEdited:function(e){var t=e.nextSibling;if(!t)return!1;var r;if(e.json)r=e.json.indent;else{if(!e.previousSibling||!e.previousSibling.json)return!1;r=e.previousSibling.json.indent}for(;t;){var n=t.json;if(n&&n.indent<=r)return!1;if(t.is_manager)return!0;if(n&&n.indent<=r)return!1;t=t.nextSibling}return!1},_getArrows:function(e){if(e){var t=$parent(e,"div");return $all("div","arrow",t)}return this.list_holder||(this.list_holder=$parent(this.list.current_list,"td")),$all("div","arrow",this.list_holder)},_hasChildren:function(e){if(!e||!e.json)return!1;var t=e.nextSibling;return!!(t&&t.json&&t.json.indent>e.json.indent)}});t.exports=i},{"../generic_manager/GenericManagerUtils.js":26}],25:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e){return 13==e.keyAscii&&e.ctrl&&!e.shift||w&&77==e.keyAscii&&e.ctrl&&!e.shift}var s=e("../../models/RealHierachy"),u=e("../../utils/fp"),c=window.IstButton,d=window.IstComplete,f=window.FocusElm,p=e("../misc/Util.js").attachKeyDown,m=e("../action_perfomed/ActionPerformed"),h=e("../drag_and_drop/DragAndDrop"),_=e("../richtext_editor/RichTextEditor"),y=e("./GenericManagerUtils.js"),v=e("../../utils/isCompositionEscEvent").default,g=0,b=Class({init:function(){},initWithData:function(e){this.state_manager=this,e&&$update(this,e)},getAllRenrededItems:function(e){var t=[];return $map(this.current_list.childNodes,function(r){if(r&&r.json&&!$hasClass(r,"reorder_item")){if(!0===e&&$isHidden(r))return;t.push(r)}}),t},isFormFirst:function(){var e=$first(this.current_list.childNodes);return $hasClass(e,"reorder_item")&&(e=e.nextSibling),e==$parent(this.state_manager.current_form,"li")},isFormLast:function(){return $last(this.current_list.childNodes)==$parent(this.state_manager.current_form,"li")},isAddFormOn:function(){return this.current_form&&"add"===this.current_mode},isEditFormOn:function(){return this.current_form&&"edit"===this.current_mode},getItem:function(e){e=e||$last;var t=e(this.current_list.childNodes);return t&&$hasClass(t,"reorder_item")?t.nextSibling:t&&t.is_manager?t.previousSibling:t&&t.json&&!t.is_empty?t:null},addIndentArrows:function(e,t,r){var n=DIV({"data-track":"projects|add_or_edit_project_indent_right"},svgs.get("sm1/indent.svg")),o=DIV({"data-track":"projects|add_or_edit_project_indent_left"},svgs.get("sm1/indent.svg",{className:"flipped"})),a=this,i=function(e,r){return a.incIndent(t,e),$all(null,"richtext_editor",t)[0].proxyFocus(!0),$preventDefault(r),!1};n.onclick=$p(i,1),o.onclick=$p(i,-1),!0===r?$add(e,o,n):$add(e,n,o)},generateAddEditForm:function(e){var t=LI({class:"manager indent_1"});t.is_manager=!0,this.li_data_type&&t.setAttribute("data-type",this.li_data_type);var r=FORM(),n=c.createButton(e.submit_val);if($addClass(n,"ist_button_red"),$addClass(n,"submit_btn"),e.submit_attr)for(var o in e.submit_attr)n.setAttribute(o,e.submit_attr[o]);r.onsubmit=function(){return!1},$add(t,r);var a={tabIndex:1,autocomplete:"off",generatePlaceholder:e.generatePlaceholder};e.placeholder&&(a.placeholder=e.placeholder);var i=_(a);i.proxySetValue(e.name_val,!0,!1);var s=$p(e.action,r);r.submit_fn=s,$AEV(n,["click","touchstart"],function(e){return s(e),!1}),void 0===e.with_esc_cancel&&(e.with_esc_cancel=!0);var u=this,f=function(n){if(n=n||window.event,ICE._setEventKey(n),v(n))return!1;if(n.ctrl&&77==n.keyAscii&&e.on_ctrl_m)return $preventDefault(n),e.on_ctrl_m(n),!1;if(e.with_esc_cancel&&27==n.keyAscii){if(window.IstComplete&&window.IstComplete.isShown())return!1;if(i.cancelInput&&i.cancelInput(n))return $preventDefault(n),!1;i.blur(),e.cancel&&e.cancel.onclick(),$preventDefault(n)}if(8==n.keyAscii&&i.cancelInput&&i.cancelInput(n))return $preventDefault(n),!1;if(e.onKeyPress)return e.onKeyPress(n,t);if(l(n))return $preventDefault(n),r.submit_fn(function(){i.blur(),u.showAddItem(!0,!0)},!0),!1;if(13==n.keyAscii&&n.shift&&!e.disable_shift_enter)return $preventDefault(n),r.submit_fn(function(){i.blur(),u.showAddItem(!0,!1)},!0),!1;if(13==n.keyAscii)return(!window.IstComplete||!window.IstComplete.isShown())&&($preventDefault(n),i.blur(),r.submit_fn(null,!0),!1);if(9==n.keyAscii&&!n.ctrl){var o=$f(r,"due_date");if(o&&!d.isShown()){var a=$eventElm(n);if(a&&!$hasClass(a,"due_date"))return $preventDefault(n),o.click(),!1}}if(n.ctrl&&37==n.keyAscii&&!n.shift)return!$gp($eventElm(n),"ul","items")||(!(!r.no_indent&&0!=u.with_indent)||($preventDefault(n),u.incIndent(t,-1),!1));if(n.ctrl&&39==n.keyAscii&&!n.shift)return!$gp($eventElm(n),"ul","items")||(!(!r.no_indent&&0!=u.with_indent)||($preventDefault(n),u.incIndent(t,1),!1));var s=function(e){"edit"==u.current_mode?u.saveItem(u.state_manager.current_form,e,!0):u.addItem(u.state_manager.current_form,e,!0)};return n.ctrl&&38==n.keyAscii&&!n.shift?($preventDefault(n),s(u.editPrevItem),!1):n.ctrl&&40==n.keyAscii&&!n.shift?($preventDefault(n),s(u.editNextItem),!1):void 0},m=TABLE({width:"100%"}),y=TBODY();$add(m,y);var b,w,E=TABLE(TBODY(b=TR(w=TD({c:"text_box_holder"},i))));$AEV(w,"click",function(e){var t=$eventElm(e);if(t&&"input"==$nodeName(t))return!0;i.proxyFocus()});var j=TD({colSpan:2,class:"form_content"},E),O=TR(j);if($add(y,O),e.indent_arrows){var S=TD({rowSpan:2,class:"indent_arrows"});$add(O,S),this.addIndentArrows(S,t)}var P=TD({align:"left",c:"td_submit"}),I=TD({align:"right",c:"td_extra"});$add(P,n,e.cancel),e.td_extra&&$add(I,e.td_extra),$add(r,m),$add(r,TABLE({c:"td_submit_area"},TBODY(TR(P,I)))),e.fn_extend_form&&(r=e.fn_extend_form(r,O,e));var k=[i];return k=k.concat($all("input",null,r)),e.inputs&&(k=k.concat(e.inputs)),$map(k,function(e){p(e,f)}),e.manager_reodering&&(t.json={id:g--,manager_type:e.manager_type,indent:1},h.attach(t,{trigger_mouse_over:!0})),{li_item:t,form:r,textarea:i,text_box_holder:w,duedate:$f(r,"due_date"),form_content:j,input_holders_tr:b}},insertForm:function(e,t){var r=this.current_item;if(r&&!0===t&&e)return r.previousSibling?$addBefore(e,r):$addToTop(this.current_list,e),void f.focus(e,null,35);if(this.current_item){for(var n=r.nextSibling;n&&$isHidden(n);)n=n.nextSibling;return n?$addAfter(e,n.previousSibling||r):$add(this.current_list,e),void f.focus(e,null,35)}$add(this.current_list,e),f.focus(e,null,35)},saveCurrentItem:function(e,t){this.state_manager.current_form?this.state_manager.current_section_list&&this.state_manager.current_section_list.saveCurrentItem(e,t):e()},setCurrentItem:function(e){this.current_item=e},editPrevItem:function(){m.mark("GenericManager/editPrevItem");for(var e=this.current_item.previousSibling;e&&$isHidden(e);)e=e.previousSibling;if($hasClass(e,"reorder_item")&&(e=null),e)this.setCurrentItem(e),this.editCurrentItem(!0);else try{this.isFormFirst()||this.showAddItem(!0,!0)}catch(e){this.showAddItem(!0,!0)}},editNextItem:function(){m.mark("GenericManager/editNextItem");for(var e=this.current_item.nextSibling;e&&$isHidden(e);)e=e.nextSibling;if(e)this.setCurrentItem(e),this.editCurrentItem(!0);else try{this.isFormLast()||this.showAddItem(!0,!1)}catch(e){this.showAddItem(!0,!1)}},showAddItem:function(){m.mark("GenericManager/showAddItem"),this.setCurrentItemViaMenu(),this.current_mode="add",this.removeEmpty(),this.cancelCurrentEdit()},editCurrentItem:function(){this.setCurrentItemViaMenu(),this.current_mode="edit",m.mark("GenericManager/editCurrentItem"),this.cancelCurrentEdit(),$hide(this.current_item)},incIndent:function(e,t){var r=y.getIndent(e)+t;r<1&&(r=1),r>this.max_indent&&(r=this.max_indent);var n;if(n="add"==this.current_mode?e.previousSibling:e.previousSibling.previousSibling,n&&$hasClass(n,"reorder_item")&&(n=null),n){var o=y.getIndent(n);r>o&&(r=o+1)}y.setIndent(e,r)},empty_text:"No items",isEmpty:function(){return 0===this.getAllRenrededItems().length},renderEmpty:function(){return LI({class:"empty"},this.empty_text)},checkEmpty:function(){if(this.isEmpty()){var e=this.renderEmpty();return e&&(y.attachClick(e,this.showAddItem),e.is_empty=!0,$add(this.current_list,e)),!0}return this.removeEmpty(),!1},removeEmpty:function(){$remove($all("li","empty",this.current_list))},getCurrentOrderIndent:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.as_list,n=void 0!==r&&r,o=$all("li",null,this.current_list),a=0,i={},l=[];return $map(o,function(t){t.json&&t.json.id&&!t.is_manager&&(a++,"project_list"===!e.manager_type&&(t.json.item_order=a),n?l.push({id:t.json.id,item_order:a,indent:t.json.indent}):i[t.json.id]=[a,t.json.indent])}),n?l:i},saveOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{noUndo:!1},t=e.noUndo;if(!this.isAddFormOn()){if(this.opts.with_indent){var r=this.getCurrentOrderIndent({as_list:!0}),o=(0,s.deriveParentChildOrder)(r).map((0,u.pick)(["id","parent_id","child_order"]));return this.data_model.moveAndReorder(o,{noUndo:t}),!0}var a=(0,u.mapValues)(function(e){return n(e,1)[0]},this.getCurrentOrderIndent());return this.data_model.updateOrders(a),!0}},incOrderAfterItem:function(e){if(e&&e.json)for(var t=e.json.item_order,r=e.nextSibling,n={};r;)r.json&&r.json.id&&!r.is_manager&&(t++,r.json.item_order=t,n[r.json.id]=[t,r.json.indent]),r=r.nextSibling},setCurrentItemViaMenu:function(){var e=this.menu;e.shown&&e.current_holder&&(this.setCurrentItem(e.current_holder),this.menu.hide())},cancelCurrentEdit:function(){var e=this.state_manager.current_cancel;e&&(e.onclick(),this.state_manager.current_cancel=null)}}),w=-1!=navigator.userAgent.indexOf("Macintosh")&&$isMozilla();t.exports=b},{"../../models/RealHierachy":160,"../../utils/fp":1166,"../../utils/isCompositionEscEvent":1177,"../action_perfomed/ActionPerformed":2,"../drag_and_drop/DragAndDrop":20,"../misc/Util.js":43,"../richtext_editor/RichTextEditor":86,"./GenericManagerUtils.js":26}],26:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=e("../action_perfomed/ActionPerformed"),i={getChildren:function(e,t){for(var r=t&&[e]||[],n=e.json.indent,o=e.nextSibling,a=e.json.project_id;o;)if($hasClass(o,"manager")||$hasClass(o,"reorder_item"))o=o.nextSibling;else{if(!o.json||!o.json.indent||o.json.indent<=n)break;if(a!=o.json.project_id)break;r.push(o),o=o.nextSibling}return r},showHideChildren:function(e,t){var r=[];t&&t.json&&r.push(t),r=r.concat(e);for(var n={},o=0;o<r.length;o++){var a=r[o],i=a.json;if(i)for(var l=o+1;l<r.length;l++){var s=r[l],u=s.json;if(!u)break;if(u.indent<=i.indent)break;n[u.id]=i}}$map(r,function(e){var t=e.json;if(t){for(var r=!0,o=t;;){if(!(o=n[o.id]))break;if(o.collapsed){r=!1;break}}r?$show(e):$hide(e)}})},getParent:function(e,t){t||(t=e.json.indent);for(var r=e.previousSibling;r;)if(r.json&&r.json.id&&!r.is_manager){if(r.json.indent<t)return r;r=r.previousSibling}else r=r.previousSibling;return null},getParentChildOrder:function(e){for(var t=this.getParent(e),r=t&&t.json?t.json.id:null,n=e.previousSibling,o=1;n;){if(n.json&&n.json.id&&!n.is_manager){if(n.json.id===r)break;o++}n=n.previousSibling}return{parent_id:r,child_order:o}},imgOnMouseOver:function(e,t,r){$AEV(e,"mouseover",function(){$removeClass(e,t),$addClass(e,r)}),$AEV(e,"mouseout",function(){$removeClass(e,r),$addClass(e,t)})},getMenuEditIcon:function(){var e=DIV({class:"icon menu gear_menu"});return $add(e,svgs.get("sm1/more_small.svg")),e.is_menu_icon=!0,e},getIndent:function(e){if(!e)return 1;var t=e.className.match(/indent_(\d)/);return t?parseInt(t[1]):1},setIndent:function(e,t,r){r||(a.mark("GenericManagerUtils/setIndent"),$map([1,2,3,4,5],function(t){$removeClass(e,"indent_"+t)})),$addClass(e,"indent_"+t),e.json&&(e.indent=t,e.json.indent=t)},attachClick:function(e,t){if(window.PRINT_MODE)return!1;$AEV(e,"click",function(e){if(2==e.button)return!1;var r=$eventElm(e);if($hasClass(r,"clickable"))return!0;if(document.selection){if(document.selection.createRange().text)return!0}if("input"==$nodeName(r))return!0;if(e.ctrl||e.shift)return!0;if(e._propogated_from_note_icon)return!0;var n=r&&$gp(r,"a");return!(r&&!n&&!$hasClass(r,"label"))||t(e)})},genCancel:function(e,t,r,o,a){o=o||_("Cancel");var i=A(n({class:"cancel",href:"",tabIndex:4},a),o),l=function(n){var o=$parent(i,e);return $remove(o),r.current_form=null,r.current_cancel=null,$isFunction(t)&&t(n),!1};return i.onclick=l,i},openParents:function(e){var t=i;if(e)for(var r=t.getParent(e);r;){var n=r.json.collapsed;r.json.collapsed=0,n&&t.showHideChildren(i.getChildren(r),r),r=t.getParent(r)}},normalizeIndent:function(e,t){if(t){var r=t.previousSibling;r&&$hasClass(r,"reorder_item")&&(r=r.previousSibling),!r&&e.json&&e.json.indent>1&&i.setIndent(e,1)}},updateParentIds:function(e,t,r){var n=i.getParent(e),o=null;n&&(o=n.json.id),e.json.parent_id!=o&&t.update(e.json.id,{parent_id:o});var a=i.getChildren(e);i.normalizeChildren(e,r,t),i.normalizeChildren(e,a,t);var l=[];l=l.concat(r),l=l.concat(a);var s={};$map(l,function(e){if(!s[e.json.id]){s[e.json.id]=!0;var r=i.getParent(e),n=null;r&&(n=r.json.id);var o={};e.json.parent_id!=n&&(o.parent_id=n),!r&&e.json.indent>1?o.indent=1:r&&r.json.indent!=e.json.indent+1&&(o.indent=r.json.indent+1,o.indent>t.max_indent&&(o.indent=t.max_indent)),o.indent&&i.setIndent(e,o.indent),$keys(o).length>0&&t.update(e.json.id,o)}})},normalizeChildren:function(e,t,r){if(t.length>0){var n=t[0];if(n.json.indent!=e.json.indent+1){var o=e.json.indent+1-n.json.indent;$map(t,function(e){var t=e.json.indent+o;t>r.max_indent&&(t=r.max_indent),i.setIndent(e,t),r.update(n.json.id,{indent:t})})}}}};window.GenericManagerUtils=t.exports=i},{"../action_perfomed/ActionPerformed":2}],27:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var u=e("../../utils"),c=n(e("react")),d=n(e("react-dom")),f=e("react-redux"),p=n(e("../../stores/store")),m=n(e("../../react_components/scheduler/SchedulerWrapper")),h=n(e("../../react_components/project_picker")),y=n(e("../../react_components/label_picker")),v=n(e("../../react_components/priority_picker")),g=e("../../react_components/icons"),b=n(e("../../react_components/Button")),w=window.Signals,E=e("../../menus/MenuPriorities"),j=e("../../menus/MenuSelecterMore"),O=e("../items_utils/ItemCommonEdits"),S=e("../people_assigner/PeopleSelector"),P=e("../../models/ProjectsModel"),I=e("../../models/ItemsModel"),k={last_item_selected:null,highlighted_items:{},reactContainers:[],init:function(){var e=this;$AEV(window,"resize",this.resize),w.connect("menu_priority_changed",function(e){var t=$all("li","selected");0!==t.length&&($map(t,function(t){O.updatePriority(t,e)}),w.sendSignal("instant_refresh_interface"),k.hideSelecta(),E.get().hide())}),w.connect("menu_selecter_delete",function(){0!==$all("li","selected").length&&(k.deleteItems(),j.hide())}),w.connect("menu_selecter_duplicate",function(){0!==$all("li","selected").length&&(k.duplicate(),j.hide(),k.hideSelecta())}),w.connect("menu_selecter_to_history",function(){var e=$all("li","selected");if(0!==e.length){var t=e.map(function(e){return T(e).id});I.archive(t),w.sendSignal("instant_refresh_interface"),j.hide(),k.hideSelecta()}}),w.connect("menu_selecter_complete",function(){var e=$all("li","selected");0!==e.length&&($map(e,function(e){I.complete(T(e))}),w.sendSignal("instant_refresh_interface"),j.hide(),k.hideSelecta())}),w.connect("menu_item_assign",function(){j.hide();var e=function(e){$all("li","selected").forEach(function(t){var r=T(t);r&&I.update(r.id,{responsible_uid:e})}),w.sendSignal("instant_refresh_interface")},t=$gc($("item_selecter"),".menu_item_more"),r=T($all("li","selected")[0]).project_id,n={icon:t,fn_on_select:e,project_id:r,from_rendering:!0,top_offset:40,arrow_left_offset:10};(new S).showTooltip(t,n)}),j.init(),$AEV(document,"mousedown",function(t){var r=t.target.closest("li.task_item")||t.target.closest("li[data-item-id]");if(r)return void e.handleListItemMousedown(r,t);k.last_item_selected&&!(t.target.closest("#item_selecter")||t.target.closest(".scheduler-item-selecter")||t.target.closest(".dialog")||t.target.closest("#GB_window")||t.target.closest(".GB_overlay")||t.target.closest(".ist_tooltip_holder")||t.target.closest("#ist_complete_floater")||t.target.closest(".ist_menu")||t.target.closest(".menu_selecter_more"))&&e.deselectAll()})},handleListItemMousedown:function(e,t){var r=$eventElm(t);if(r&&(r.closest(".item_checkbox")||r.closest(".ist_checkbox")||r.closest(".ist_checkbox_img"))&&t.shift)return!0;if($isMac()&&t.meta||!$isMac()&&t.ctrl||t.shift){if($preventDefault(t),r&&($hasClass(r,"ist_checkbox")||$hasClass(r,"ist_checkbox_img")))return!0;if(t.shift&&!$hasClass(e,"selected")){var n=k.last_item_selected;if(n){var o=$all("li","task_item").filter(function(e){return!$isHidden(e)}),a=$index(e,o),i=$index(n,o),l=a,s=i;l>s&&(l=i,s=a);var u=o.slice(l,s);$map(u,function(t){t!=n&&t!=e&&k.selectClick(t)})}}return k.last_item_selected=e,k.selectClick(e)}},selectClick:function(e){return k.toggle(e),document.selection&&document.selection.empty?document.selection.empty():$body().focus(),!1},showSelector:function(){0===$all("li","selected").length?this.hideSelecta():this.showSelecta(),$addClass($html(),"item_selecter_on")},reactRender:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return t||(t=SPAN()),this.reactContainers.includes(t)||this.reactContainers.push(t),d.default.render(c.default.createElement(f.Provider,{store:p.default},e),t),t},reactUnmount:function(){this.reactContainers.forEach(function(e){return d.default.unmountComponentAtNode(e)}),this.reactContainers=[]},hideSelecta:function(){$removeClass($html(),"item_selecter_on"),$removeClass($all("li","selected"),"selected"),$fx.fadeOut($("item_selecter"),{duration:100,onComplete:function(){$remove($("item_selecter"))}}),this.highlighted_items={},this.last_item_selected=null,this.reactUnmount()},labelPickerContainer:void 0,getLabelPickerProps:function(e){var t={};e.forEach(function(e){return(e.labels||[]).forEach(function(e){t[e]=(t[e]||0)+1})});var r=Object.keys(t);return{value:r.filter(function(r){return t[r]===e.length}),partiallySelectedValues:r.filter(function(r){return t[r]<e.length})}},getLabelChanges:function(e,t){var r=e.value.filter(function(e){return!t.value.includes(e)}),n=[].concat(a(t.value.filter(function(t){return!e.value.includes(t)})),a(t.partiallySelectedValues.filter(function(t){return!(e.partiallySelectedValues||[]).includes(t)&&!r.includes(t)})));return{addedLabels:r,removedLabels:n}},handleLabelUpdate:function(e,t,r){var n=this.getLabelChanges(t,r),o=n.addedLabels,i=n.removedLabels;0===o.length&&0===i.length||(e.forEach(function(e){var t=e.id,r=e.labels,n=r.filter(function(e){return!i.includes(e)}),l=o.filter(function(e){return!r.includes(e)}),s=[].concat(a(n),a(l)).sort();I.update(t,{labels:s})}),this.hideSelecta(),w.sendSignal("instant_refresh_interface"))},renderLabelPicker:function(){var e=this,t=$all("li","selected").map(T),r=this.getLabelPickerProps(t);return c.default.createElement(y.default,o({},r,{onChange:function(n){var o=n.target;return e.handleLabelUpdate(t,o,r)}}),c.default.createElement(g.LabelOutlinedIcon,null),c.default.createElement("span",null,_("Labels")))},handlePriorityUpdate:function(e,t){e.forEach(function(e){O.updatePriority(e,t)}),this.hideSelecta(),w.sendSignal("instant_refresh_interface")},renderPriorityPicker:function(){var e=this,t=$all("li","selected");return c.default.createElement(v.default,{onSelect:function(r){e.handlePriorityUpdate(t,r)}},c.default.createElement(c.default.Fragment,null,c.default.createElement(g.PriorityIconB,null),c.default.createElement("span",null,_("Priority"))))},renderProjectPicker:function(){var e=this;return c.default.createElement(h.default,{withSectionSelection:!0,onSelect:function(t){var r=t.project_id,n=t.section_id;setTimeout(function(){var t=$all("li","selected");t=e.getProjectItems(t),O.moveItems(t,r,n),e.hideSelecta(),w.sendSignal("instant_refresh_interface")},0)}},function(e){var t=e.toggle,r=e.buttonProps;return c.default.createElement(b.default,o({onClick:t,className:"fixed_pos menu_item_move"},r),c.default.createElement(g.MoveIcon,null),c.default.createElement("span",null,_("Move to project")))})},showSelecta:function(){if($("item_selecter"))this.reactRender(this.renderLabelPicker(),this.labelPickerContainer),this.reactRender(this.renderPriorityPicker(),this.priorityPickerContainer);else{var e,t,r;$addToTop($body(),DIV({id:"item_selecter"},r=BUTTON({type:"button",c:"dp_icon fixed_pos menu_item_schedule"},svgs.get("sm1/calendar.svg"),SPAN(_("Schedule"))),this.reactRender(this.renderProjectPicker()),this.labelPickerContainer=this.reactRender(this.renderLabelPicker()),this.priorityPickerContainer=this.reactRender(this.renderPriorityPicker()),t=BUTTON({type:"button",c:"fixed_pos menu_icon menu_item_more"},svgs.get("sm1/more.svg"),SPAN(_("More")+"\u2026")),e=BUTTON({type:"button",c:"deselect_items"},svgs.get("sm1/close_big.svg")))),$fx.fadeIn($("item_selecter"),{duration:100}),$AEV(e,"click",$b(this.deselectAll,this)),$AEV(r,"click",$b(this.showSchedulePicker,this)),$AEV(t,"click",$b(this.moreOptions,this)),$AEV(void 0,"click",$b(this.showChangePriority,this))}this.resize()},deselectAll:function(){$removeClass($all("li","selected"),"selected"),this.hideSelecta()},toggle:function(e){var t=T(e);return $hasClass(e,"selected")?($removeClass(e,"selected"),k.highlighted_items[t.id]&&delete k.highlighted_items[t.id]):($addClass(e,"selected"),k.highlighted_items[t.id]=!0),this.showSelector(),!1},resize:function(){var e=$("item_selecter"),t=$("top_bar");e&&($setLeft(e,t.offsetLeft),$setWidth(e,t.offsetWidth))},getProjectItems:function(e){var t={},r={};return $map(e,function(e){var n=T(e);if(n&&!t[n.id]){var o=n.project_id;r[o]||(r[o]=[]),r[o].push(n.id),$map(I.getChildren(n),function(e){t[e.id]||(r[o].push(e.id),t[e.id]=!0)})}}),r},moreOptions:function(t){var r=e("../project_editor/ProjectEditorManager"),n=!!r.getCurrentEditor(),o=(0,u.uniq)($all("li","selected").map(function(e){var t=T(e);if(t&&t.project_id)return t.project_id})),a=1==o.length,i=P.get(o[0]).shared,l=n&&a&&i;return j.show($eventElm(t),t,{show_assign:l,arrow_y_offset:17}),E.get().hide(),!1},deleteItems:function(){var e=$all("li","selected");return O.deleteItems(e),k.deselectAll(),!1},showChangePriority:function(e){var t=E.get(),r=$eventElm(e);return t.show(r,e,{pos_y_offset:1}),j.hide(),!1},showSchedulePicker:function(e){var t=$eventElm(e),r=$all("li","selected");if(0===r.length)return alert("You must select some tasks"),!1;var n=r.map(T);return m.default.show({selectedItems:n,anchor:t,dialogClassName:"scheduler-item-selecter",holder:DIV({c:"scheduler_holder"}),isDialogFixed:!0,selectedDate:1===n.length?n[0].due:null,onDateSelect:function(e){var t=n.reduce(function(t,r,n){return t[r.id]=(0,u.isArray)(e)?e[n]:e,t},{});I.updateDue(t),0===$all("li","selected").length&&k.hideSelecta(),k.deselectAll(),k.hideSelecta()}}),!1},duplicate:function(){var e=$all("li","selected").map(function(e){return T(e).id});O.duplicate(e)}},T=function(e){if(e.json)return e.json;var t=(0,u.parseId)(e.getAttribute("data-item-id"));return I.getById(t)};window.ItemSelecter=k,t.exports=k},{"../../menus/MenuPriorities":136,"../../menus/MenuSelecterMore":144,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../react_components/Button":648,"../../react_components/icons":842,"../../react_components/label_picker":898,"../../react_components/priority_picker":936,"../../react_components/project_picker":955,"../../react_components/scheduler/SchedulerWrapper":1009,"../../stores/store":1140,"../../utils":1176,"../items_utils/ItemCommonEdits":30,"../people_assigner/PeopleSelector":57,"../project_editor/ProjectEditorManager":62,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],28:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var f=function(e){return e&&e.__esModule?e:{default:e}
}(e("../../react_components/scheduler/SchedulerWrapper")),p=e("../../react_components/confirm_dialog"),m=window,h=m.Signals,y=window,v=y.DateUtils,g=window,b=g.IstTooltip,w=window,E=w.IstMenu,j=window,O=j.GB_getLast,S=e("../../components/people_assigner/PeopleAssigner"),P=e("../../components/project_editor/ProjectEditorManager"),I=e("../../components/labels/Labels.js"),k=e("../../components/reminders/Reminders.js"),T=e("../notes/NotesAddTooltip"),C=e("../notes/NotesUtils"),D=e("../../plugin_version/ContentTransformers"),A=D.ContentTransformers,M=e("../../components/project_selecter/ProjectAutoComplete.js"),x=e("../people_assigner/PeopleAutoComplete.js"),R=e("../misc/Misc.js"),N=R.isMacApp,L=e("../../models/ProjectsModel"),U=e("../../models/ItemsModel"),V=e("../../models/Reminders"),F=V.RemindersModel,H=e("../../models/Reminders"),q=H.BufferedRemindersModel,G=e("../../menus/MenuPriorities"),z=e("../../menus/MenuItemEditMore"),W=e("../../menus/HelperMenuAnnotations.js"),Y=e("../generic_manager/GenericManagerUtils.js"),K=e("../drag_and_drop/DragAndDrop"),J=e("../richtext_editor/NatrualLanguageParsing"),Q=e("./ItemDueDates.js"),X=function(){function e(){u(this,e),this.generateForm=this.generateForm.bind(this),this.duedatePredictReqData=this.duedatePredictReqData.bind(this),this.onSaveContent=this.onSaveContent.bind(this),this.onShowContent=this.onShowContent.bind(this),this.genericCancelEdit=this.genericCancelEdit.bind(this),this.genericAddItem=this.genericAddItem.bind(this),this.genericSaveItem=this.genericSaveItem.bind(this),this.annotateReminderButton=this.annotateReminderButton.bind(this),this.annotatePrioirtyButton=this.annotatePrioirtyButton.bind(this),this.menuPriorityUpdated=this.menuPriorityUpdated.bind(this),this.annotateNoteButton=this.annotateNoteButton.bind(this),this.annotateMoreButton=this.annotateMoreButton.bind(this),this.menuIndentGeneric=this.menuIndentGeneric.bind(this),this.parseFormData=this.parseFormData.bind(this),this.addTasksViaPaste=this.addTasksViaPaste.bind(this),h.connect("menu_priority_changed",this.menuPriorityUpdated),h.connect("menu_indent_left",$p(this.menuIndentGeneric,-1)),h.connect("menu_indent_right",$p(this.menuIndentGeneric,1)),h.connect("focus_current_item_input",function(){var e=$$("#editor .richtext_editor");if(e.length>0)try{e[0].proxyFocus(!0)}catch(e){}if(e=$$(".quick_add_task .richtext_editor"),e.length>0)try{e[0].proxyFocus(!0)}catch(e){}})}return d(e,null,[{key:"initClass",value:function(){this.prototype.current_priority=4}}]),d(e,[{key:"generateForm",value:function(e,t){var r,n,o,a,i,l,s,u=this,c=null!=e.current_item?e.current_item.json:void 0;e.name_val&&(A.setupByContent(e.name_val),A.type&&(e.name_val=A.onContentShow(e.name_val)));var d=INPUT({type:"text",c:"input_due_date",name:"due_date",tabIndex:2,placeholder:_("Schedule"),readonly:!0});e.inputs=[d],e.td_extra=SPAN({c:"form_icon_holder"},i=SPAN(),r=SPAN(),l=SPAN(),a=SPAN(),o=SPAN(),n=SPAN());var m,h=P.current_editor;P.current_section_list?m=P.current_section_list.generateAddEditForm(e):(h=P.createEditorInstance(),m=h.generateAddEditForm(e)),e.generatePlaceholder=!0,A.type&&!$hasClass(m.text_box_holder,"has_content_icon")&&A.annotateWithIcon(m.textarea),e.name_val?J.truncate_links=!0:J.truncate_links=!1;var y=!1;e.name_val&&e.name_val.length>0&&(y=!0),J.attach(m.textarea,y),$add(m.input_holders_tr,s=TD({c:"due_date_holder"},d)),m.duedate=d,e.due_date&&(e.due_date.is_recurring?d.value=e.due_date.string:d.value=v.format(e.due_date),d.result=e.due_date),c||(m.textarea.onsubmit=$p(e.action,m.form),m.textarea.onMultilinePaste=function(e,t){var r=t.split("\n");return!((e=u.getEditorTextarea())&&r.length>1)||((0,p.showConfirmDialog)({message:_("Do you want to add %s tasks?").replace("%s",r.length),confirmLabel:_("Add tasks"),onConfirm:function(){u.addTasksViaPaste(e,r)},onCancel:function(){e.focus(),document.execCommand("insertHTML",!1,t),e.onchanged&&e.onchanged()}}),!1)});var g=(null!=c?c.project_id:void 0)||h.project_id;if(q.current_project_id=g,L.get(g)||L.getInbox()){m.form.responsible_uid=e.responsible_uid||void 0;var b=new S({from_rendering:!1,project_id:g,responsible_uid:m.form.responsible_uid,fn_on_select:function(e){m.form.responsible_uid=e},arrow_left_offset:5});m.form.people_assigner=b;var w=TD({c:"people_assigner_holder"},b.render());b.isShown()||$hide(w),$add(m.input_holders_tr,w)}else $add(m.input_holders_tr,TD({c:"people_assigner_holder"}));e.no_indent&&(m.form.no_indent=!0);var E=m.textarea;if(e.current_item){E.proxySetValue(I.textFormat(e.name_val,e.current_item.json.labels),!0,!1);var j=Y.getIndent(e.current_item);Y.setIndent(m.li_item,j)}$AEV(s,"click",function(){var t,r=u.duedatePredictReqData(m.form,c);e.is_quick_add?t="scheduler-quick-add":e.is_note&&(t="scheduler-note-item"),f.default.show({dialogClassName:t,selectedDate:d.result,align:"top",anchor:s,holder:DIV({c:"scheduler_holder"}),selectedItems:[r],onHide:function(){E.proxyFocus(!0)},onDateSelect:function(e){e?(d.value=e.string,d.result=e,E.dateist_disabled=!0):(d.value="",d.result=null,E.dateist_disabled=!1),E.onchanged&&E.onchanged()}})}),I.annotateFormArea(E,r),!1===e.with_project_button&&($swap(i,null),i=null),M.annotateFormArea(E,i),q.reset(),l=this.annotateReminderButton(l,e),this.annotateNoteButton(o,e,g),this.note_button&&(e.on_ctrl_m=function(){c||u.note_button.onclick()}),e.no_indent?$remove(n):this.annotateMoreButton(n,e,m.li_item);var O=4;return e.priority&&(O=5-e.priority),this.current_priority=O,a=this.annotatePrioirtyButton(a,O),x.annotateFormArea(E),t&&t.fixed_pos&&$addClass([E,a,l,r,n],"fixed_pos"),m.form.old_date=d.value,m}},{key:"duedatePredictReqData",value:function(e,t){var r=this.parseFormData(e,{resetNotes:!1}),n={id:t?t.id:null,due:t?t.due:null,date_string:t&&t.due?t.due.string:null,postpone_count:t?t.postpone_count:0,content:r.content,priority:r.priority,project_id:r.project_id,labels:t?t.labels:[]};return n.project_id||(n.project_id=L.getInbox().id),n}},{key:"onSaveContent",value:function(e){return A.type?A.onContentSave(e):e}},{key:"onShowContent",value:function(e){return A.type?A.onContentShow(e):e}},{key:"genericCancelEdit",value:function(){T.reset(),A.onContollerHide()}},{key:"genericAddItem",value:function(e,t){var r=A;r.type&&(t.content=r.onContentSave(t.content),r.onContollerHide()),void 0!==e.responsible_uid&&(t.responsible_uid=e.responsible_uid,e.people_assigner=null)}},{key:"genericSaveItem",value:function(e,t){var r,o=$parent(t,"li"),i=$f(t,"due_date"),l=e.json;if(!1===(r=l.due&&t.old_date===i.value&&i.result&&i.result.date===l.due.date?l.due:!l.due&&i.result||l.due&&i.result&&i.result.date!==l.due.date?i.result:Q.parseDueDate(i)))return!1;var s,u=5-this.current_priority,c={id:l.id,content:this.onSaveContent($gc(t,null,"richtext_editor").proxyGetValue()),priority:u,due:r};if(!0!==t.no_indent){Y.normalizeIndent(o,e),s=Y.getIndent(o);var d=P.current_editor;d||(d=P.createEditorInstance());var f=Y.getParent(e,s),p=null;f&&f.json&&f.json.id&&!f.is_manager&&(p=f.json.id),l.parent_id!==p&&(c.parent_id=p)}$addAfter(e,o),$remove(o);var m=$gc(t,null,"richtext_editor");c=J.annotateFormData(m,c),c.due&&l.due&&c.due.getTime()===l.due.getTime()&&c.due.string===t.old_date&&t.old_date===i.value&&delete c.due,""===c.content&&(c.content=l.content),c.responsible_uid||(void 0!==t.responsible_uid&&l.responsible_uid!==t.responsible_uid&&(c.responsible_uid=t.responsible_uid,c.assigned_by_uid=window.User.id),t.people_assigner=null),c.item_order||delete c.item_order;var _=Array.from(U.update(l.id,c)),y=a(_,2),v=y[0],g=y[1];return s&&(v=n({},v,{indent:s})),this.current_priority=4,this.priority_button=null,A.type&&A.onContollerHide(),O()&&h.sendSignal("instant_refresh_interface"),{item:v,reorder:void 0!==c.parent_id,is_updated:g}}},{key:"annotateReminderButton",value:function(e,t){var r;if(!N()||window.User.is_premium){var n=t.current_item;n&&F.hasReminders(n.json.id)&&$addClass(e.parentNode,"force_form_show");var o=SPAN({c:"icon_reminder"},svgs.get("sm1/reminder.svg"));return o.id="reminders_icon",$addClass(o,"form_action_icon menu_icon"),o.setAttribute("data-track","task_form|reminders"),$AEV(o,"click",function(e){return b.hide(),E.hide(),$addClass(o.parentNode,"force_form_show"),k.showTooltip(n,o,e,{pos_y_offset:40}),!1}),r=window.User.is_premium?DIV(B(_("Reminders")),BR(),_("Add a due date & time")):DIV(B(_("Reminders"))),b.showSimpleText(o,r,null,4,4),$swap(e,o),o}}},{key:"annotatePrioirtyButton",value:function(e){var t,r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;switch(n){case 1:t="sm1/priority_1.svg";break;case 2:t="sm1/priority_2.svg";break;case 3:t="sm1/priority_3.svg";break;default:t="sm1/priority_flag.svg"}var o=SPAN({c:"icon_priority"},svgs.get(t));o.setAttribute("data-track","task_form|priority"),4!==n&&($addClass(e.parentNode,"force_form_show"),$addClass(o,"active")),$AEV(o,"click",function(e){b.hide();var t=G.get();return t.toggle(o,o,e,{pos_y_offset:5,arrow_y_offset:21}),W.selectPriority(t,5-r.current_priority),$addClass(o.parentNode,"force_form_show"),!1});var a=DIV(B(_("Priority")),BR(),_("Add by typing p1, p2, p3, p4"));return b.showSimpleText(o,a,null,4,4),$addClass(o,"form_action_icon menu_icon"),$swap(e,o),this.priority_button=o,o}},{key:"menuPriorityUpdated",value:function(e){if(this.priority_button){e=5-e,this.current_priority=e,G.get().hide(),this.annotatePrioirtyButton(this.priority_button,e);var t=$gp(this.priority_button,"form");J.deselectPriority(t),h.sendSignal("focus_current_item_input")}return!1}},{key:"annotateNoteButton",value:function(e,t,r){if(t.current_item||!C.isPremium(r))return void $remove(e);var n=SPAN({c:"icon_comments"},svgs.get("sm1/comments.svg"));n.setAttribute("data-track","task_form|quick_comment");var o=function(e){return b.hide(),E.hide(),$addClass(n.parentNode,"force_form_show"),T.showTooltip(n,e),!1};n.onclick=o;var a=DIV(B(_("Quick Comment")),BR(),_("Add notes, thoughts..."));return b.showSimpleText(n,a,null,5,4),$addClass(n,"form_action_icon menu_icon"),$swap(e,n),this.note_button=n,n}},{key:"annotateMoreButton",value:function(e,t,r){var n=SPAN({c:"icon_more"},svgs.get("sm1/more_small.svg"));return n.setAttribute("data-track","task_form|more"),$AEV(n,"click",function(e){return z.get().toggle(n,n,e,{arrow_y_offset:12}),!1}),$addClass(n,"form_action_icon menu_icon"),$swap(e,n),this.more_button=n,this.more_button.li_item=r,n}},{key:"menuIndentGeneric",value:function(e){var t=P.current_editor;t&&this.more_button&&t.incIndent(this.more_button.li_item,e),z.get().hide(),h.sendSignal("focus_current_item_input")}},{key:"parseFormData",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.resetNotes,o=void 0===n||n,a=$parent(e,"li");if(a){var i=a.previousSibling;t=i&&i.json&&i.json.item_order+1||1}else t=null;var l=$f(e,"due_date"),s=l.result,u=5-this.current_priority,c=$gc(e,null,"richtext_editor"),d=$strip(c.proxyGetValue());Y.normalizeIndent(a,a);var f={content:d,indent:a&&Y.getIndent(a)||1,priority:u,due:s};t&&(f.order=t);var p=T.getValue();return p.length>0&&(f.note=p,o&&T.reset()),f=J.annotateFormData(c,f)}},{key:"removeItemInList",value:function(e){for(var t=e.nextSibling;;){if(!t)break;if($isShown(t))break;t=t.nextSibling}if($addClass(e,"checked"),$addClass(e,"complete_animation"),setTimeout($p($remove,e),140),t&&$hasClass(t,"task_item")){!!$prevSibling(t,"li","reorder_item")&&K.attachHandler(t)}}},{key:"addTasksViaPaste",value:function(e,t){var r=this;this.paste_timeout&&(clearTimeout(this.paste_timeout),this.paste_timeout=null),this.paste_last_ta=null,this.paste_tries=0;var n=function(){if(r.paste_tries>10)return r.paste_tries=0,r.paste_last_ta=null,void clearTimeout(r.paste_timeout);if((e=r.getEditorTextarea())&&e!==r.paste_last_ta){for(var n;;){if(void 0===(n=t.shift()))break;if(n=$strip(n),n=n.replace(/^[-*] /g,""),n.length>0)break}n&&(null===r.paste_last_ta&&(n=e.proxyGetValue()+" "+n),n.length>0&&(e.proxySetValue(n,!1),e.onchanged(),e.onsubmit())),r.paste_last_ta=e}else r.paste_tries+=1};this.paste_timeout=setInterval(n,50)}},{key:"getEditorTextarea",value:function(){var e=$("editor");return e?$child(e,null,"richtext_editor"):null}}]),e}();X.initClass(),t.exports=new X},{"../../components/labels/Labels.js":36,"../../components/people_assigner/PeopleAssigner":55,"../../components/project_editor/ProjectEditorManager":62,"../../components/project_selecter/ProjectAutoComplete.js":68,"../../components/reminders/Reminders.js":78,"../../menus/HelperMenuAnnotations.js":131,"../../menus/MenuItemEditMore":135,"../../menus/MenuPriorities":136,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/Reminders":161,"../../plugin_version/ContentTransformers":641,"../../react_components/confirm_dialog":680,"../../react_components/scheduler/SchedulerWrapper":1009,"../drag_and_drop/DragAndDrop":20,"../generic_manager/GenericManagerUtils.js":26,"../misc/Misc.js":42,"../notes/NotesAddTooltip":47,"../notes/NotesUtils":49,"../people_assigner/PeopleAutoComplete.js":56,"../richtext_editor/NatrualLanguageParsing":85,"./ItemDueDates.js":31}],29:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=e("../../utils"),u=window,c=u.IstCheckbox,d=window,f=d.Signals,p=e("../../models/StateModel"),m=function(){function e(){a(this,e)}return l(e,[{key:"create",value:function(e,t,r){void 0===r&&(r=e.json.checked);var n=c.genereate();return window.PRINT_MODE||$AEV(n,"click",function(r){return f.sendSignal("hide_editor_menu"),!n.disabled&&!r.ctrl&&p.get("drag_and_drop_mode")!==p.DragMode.reordering&&t(e,r)}),(0,s.isSection)(e.json.content)||c.setChecked(n,r),n}},{key:"update",value:function(e,t,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e){var a=e.json;t?(o&&(e.json=n({},a,{checked:1})),$addClass(e,"checked"),$addClass(e,"with_check_animation")):(o&&(e.json=n({},a,{checked:0})),$removeClass(e,"checked"));var i=$all("div","ist_checkbox",e)[0],l=this.create(e,r,t);return $swap(i,l),l}}}]),e}();t.exports=new m},{"../../models/StateModel":165,"../../utils":1176}],30:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var d=e("../../utils"),f=e("../../utils/fp"),p=n(e("../../stores/store")),m=e("../../reducers/undo"),h=e("../../reducers/items/actions"),y=e("../../reducers/notes/selectors"),v=e("../../react_components/confirm_dialog"),g=n(e("../formatter/Formatter")),b=window,w=b.Signals,E=window,j=E.Alerts,O=window,S=O.DateUtils,P=e("../../components/agenda/AgendaUtils"),I=e("../../models/ItemsModel"),k=e("../action_perfomed/ActionPerformed"),T=function(e){if(e.json)return e.json;var t=(0,d.parseId)(e.getAttribute("data-item-id"));return I.getById(t)},C=function(){function t(){var e=this;s(this,t),this.updatePriority=this.updatePriority.bind(this),this.updateItems=this.updateItems.bind(this),w.connect("show_item_delete_confirm",function(t){var r=[{json:{id:t}}];e.deleteItems(r)})}return c(t,[{key:"updatePriority",value:function(e,t){k.mark("ItemCommonEdits/updatePriority"),w.sendSignal("update_priority",e,t);var r=T(e);if(r){var n=I.update(r.id,{priority:t}),a=o(n,1),i=a[0],l=!0,s=!1,u=void 0;try{for(var c,d=$all("li","item_".concat(i.id))[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value;$update(f.json,i),this._setPriority(f)}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}}}},{key:"_setPriority",value:function(e){for(var t=0,r=[1,2,3,4];t<r.length;t++){var n=r[t];$removeClass(e,"priority_".concat(n))}$addClass(e,"priority_".concat(T(e).priority))}},{key:"deleteItems",value:function(e,t){var r,n,o={},a={},i=0,l=function(e){if(!o[e.id]){var t=a[e.project_id];t||(t=a[e.project_id]=[]),i+=1,t.push(e.id),o[e.id]=e}},s=[];e.forEach(function(e){var t=T(e);if(t){var r=I.getById(t.id);n=I.getChildren(r,{with_parent:!0}),n.forEach(function(e){l(e)}),s.push(e)}}),0!==i&&(1===i?(r=_("Are you sure you want to delete {item_name}?"),r=(0,d.format)(r,{item_name:"<b>".concat($xssStrip($trim(g.default.format(n[0].content,{only_text:!0}),50)),"</b>")})):(r=_n("Are you sure you want to delete this task?","Are you sure you want to delete {num_of_task} tasks?",i),r=(0,d.format)(r,{num_of_task:i})),(0,v.showConfirmDialog)({confirmLabel:_("Delete"),htmlMessage:r,onConfirm:function(){for(var e in a){var r=a[e];I.deleteItem(r,parseInt(e))}s.forEach(function(e){return $remove(e)}),w.sendSignal("instant_refresh_interface"),t&&t(!0)},onCancel:function(){t&&t(!1)}}))}},{key:"updateItems",value:function(e,t,r){var n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;if(s.json){var u=!0,c=!1,d=void 0;try{for(var f,p=$all("li","item_".concat(s.json.id))[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m,h=f.value;m=h.render_opts.renderCls?h.render_opts.renderCls.renderItem(h.json,h.render_opts):P.renderItem(h.json,h.render_opts),m.disabled=!1,r?($ATT($parent(h,"ul"),m),$remove(h)):$swap(h,m)}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}}}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}},{key:"moveItems",value:function(e,t,r){k.mark("ItemCommonEdits/moveItems");var n=(0,f.compose)(f.flatten,d.values)(e);I.moveMultiple(n,t,r);var o=$keys(e);o.push(t),w.sendSignal("projects.rerender",o),w.sendSignal("instant_refresh_interface"),w.sendSignal("hide_editor_menu")}},{key:"notifyAddedTo",value:function(e){if((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&e.due&&e.due.string&&e.due.string.length>0){var t="".concat(e.due.string," (").concat(S.getWeekDay(e.due.getDay()),")"),r=(0,d.format)(_("Task added for {task_due_date}"),{task_due_date:t});p.default.dispatch((0,m.undoPushMessage)(r))}else p.default.dispatch((0,m.notifyAddToProject)(e.id,e.project_id))}},{key:"duplicate",value:function(t){var r=e("../../containers/premium_promo/PremiumOnlyModal");if(!window.User.is_premium)return void r.showTaskDuplication();if(0!==t.length){var n=p.default.getState();(0,y.noteGetItemNoteCount)(n,t,{countChildren:!0})>0?j.askPopup({content:_("Duplicate comments?"),width:350,height:180,center_layout:!0,yes_btn:_("Duplicate comments"),no_btn:_("Exclude comments"),on_yes_click:function(){p.default.dispatch((0,h.itemDuplicate)(t))},on_no_click:function(){p.default.dispatch((0,h.itemDuplicate)(t,{withNotes:!1}))}}):p.default.dispatch((0,h.itemDuplicate)(t))}}}]),t}();t.exports=new C},{"../../components/agenda/AgendaUtils":8,"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/ItemsModel":155,"../../react_components/confirm_dialog":680,"../../reducers/items/actions":1099,"../../reducers/notes/selectors":1116,"../../reducers/undo":1134,"../../stores/store":1140,"../../utils":1176,"../../utils/fp":1166,"../action_perfomed/ActionPerformed":2,"../formatter/Formatter":22}],31:[function(e,t,r){"use strict";var n=e("../../utils"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),a=e("../../reducers/user"),i=window.DateistDateHelpers,l=window.DateUtils,s=window.IstTooltip,u=e("../../models/Reminders").RemindersModel,c=e("..//smart_scheduler/QuickDayShow"),d=e("../reminders/RemindersViewer"),f=e("../../models/DateExt").default,p={createDueInput:function(e){var t=INPUT({type:"text",c:"input_due_date dp_icon",name:"due_date",tabIndex:2,autocomplete:"off",placeholder:_("Schedule"),readonly:!0}),r=function(e,t){var r,n=$gp(e,"table");n&&(r=$gc(n,"div","richtext_editor")),r&&(""===e.value?r.dateist_disabled=!1:r.dateist_disabled=!0,r.save_position=!1,r.onchanged&&r.onchanged(),t&&e.focus())};return e&&e.due_date?function(n){if(n){n=i.has_time(e.due_date)?i.inherit_date(n,e.due_date):i.date_max(n);var o={};i.is_overdue(new Date,n)&&(o.with_year=!0),t.value=l.format(n,!1,o),t.date_string=l.jsonFormat(n)}else t.value="",t.date_string="";t.no_date=!1,t.use_custom=!1,r(t,!1),$isIe()&&t.value&&$removeClass(t,"dummy_text"),window.SHOULD_HIDE=!0,setTimeout(function(){window.SHOULD_HIDE=!1},15);try{t.focus()}catch(e){}try{$remove($all("span","error",$f($parent(t,"form"))))}catch(e){}}(e.due_date):function(){t.date_string="",t.no_date=!0,t.value=""}(),t},parseDueDate:function(e){var t=null;if(""!==e.value){if(t=l.parse(e.value),t.error||!t.due_date){var r=$request("/sync/v8/mark_invalid_date");return r.addErrback(function(){}),r.sendReq({date_string:e.value,lang:window.LANG,translated:"dateist"}),!1}return f.fromDateist(t)}return null},create:function(e){if(e.due){var t=SPAN({class:"date"}),r=new Date,n=new Date;n.setDate(n.getDate()+1);var o=e.due.isLessThan(r),a=i.day_diff(r,e.due.toDate()),c=l.humanizeDayDiff(a,e.due.toDate());return a<=7&&a>=-7&&$addClass(t,"date_future"),s.showTooltip(t,$p(p.createTooltipContent,e)),$add(t,c),o?$addClass(t,"date_overdue"):e.due.isSameDate(r)?$addClass(t,"date_today"):e.due.isSameDate(n)&&$addClass(t,"date_tom"),e.due.is_recurring&&$ATT(t,svgs.get("sm1/recurring.svg")),this.updateAlarmIcon(t,u.hasReminders(e.id)),t}var d=SPAN({class:"date empty"}),f=this.updateAlarmIcon(d,u.hasReminders(e.id));return f&&(f.style.marginRight="0px"),s.showTooltip(d,$p(p.createTooltipContent,e)),d},createTooltipContent:function(e){var t="";if(e.due){var r=new Date,o=i.is_overdue(r,e.due),a=i.day_diff(new Date,e.due),s=a<=7&&a>=-7;if(t=l.formatView(e.due,!s||o),0!==a){t+="<br /><small>"+(a>0?(0,n.format)(_n("1 day left","{num} days left",a),{num:a}):(0,n.format)(_n("1 day ago","{num} days ago",Math.abs(a)),{num:Math.abs(a)}))+"</small>"}if(e.due.is_recurring){t+="<br /><small> "+e.due.string+"</small>"}}t=$setHTML(SPAN({c:"date_tooltip"}),t);var f=u.getRemindersByItemId(e.id);if(f.length>0){var p=d.renderRaw(e,f,{delete_possible:!1});$add(t,p)}if(window.User.is_premium&&e.due){var m=c.show(e.due);$add(t,m)}return t},updateAlarmIcon:function(e,t){var r=$all("svg","alarm_icon",e);r.length>0&&$remove(r[0]);var n;return t&&(n=svgs.get("sm1/reminder_small.svg",{className:"alarm_icon"}),(0,a.isDoistUser)(o.default.getState())?$add(e,n):$addToTop(e,n)),n},updateDueDate:function(e){var t=$all("td","td_due_date",e)[0];if(t){var r=p.create(e.json);$replace(t,r),$fx.highlight($gc(e,"span","date"),{duration:600})}},showDateInsert:function(){return window.open("/Help/DatesTimes"),!1}};t.exports=p},{"../../models/DateExt":152,"../../models/Reminders":161,"../../reducers/user":1135,"../../stores/store":1140,"../../utils":1176,"..//smart_scheduler/QuickDayShow":88,"../reminders/RemindersViewer":83}],32:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t={id:e.id};return e.sync_id&&(t.sync_id=e.sync_id),"https://todoist.com/showTask?"+$encode(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.show=void 0;var a=n(e("clipboard")),i=n(e("../../stores/store")),l=e("../../reducers/undo"),s=window.Indicator,u=window.GB_showHTML,c=e("../../models/SyncEngine"),d=e("../../models/ItemsModel"),f=e("../../models/ProjectsModel"),p=e("../../models/TemporaryIds"),m=e("../copy_to_clipboard/CopyForm"),h=function(e){e=d.getById(e.id);var t;if(a.default.isSupported())t=function(e){var t=o(e),r=document.createElement("div");new a.default(r,{text:function(){return t}}).on("success",function(e){i.default.dispatch((0,l.undoPushMessage)(_("Link copied!"))),e.clearSelection()}),r.click()};else{var r=DIV(s.cssSpinner());u(_("Link to task"),r,200,400),t=function(e){var t=o(e),n=m.genereate();n.input.value=t,$replace(r,n.form),n.input.select(),n.fn_copy_to_clipboard()}}var n=function(e){e=d.getById(e.id);var r=f.get(e.project_id);if(r&&r.shared&&!e.sync_id){var n=$requestJSON("/API/".concat(c.api_version,"/get_item"));n.addCallback(function(e){t(e.item)}),n.sendReq({item_id:e.id,token:window.User.token})}else t(e)};return p.isTemporary(e.id)?c.sync({onSuccess:$p(n,e)},!0):n(e),!1};r.show=h,Signals.connect("item_copy_link",function(e){h({id:e})})},{"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../reducers/undo":1134,"../../stores/store":1140,"../copy_to_clipboard/CopyForm":19,clipboard:"clipboard"}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=n(e("../agenda/AgendaUtils")),u=e("../../utils"),c=n(e("../../react_components/scheduler/SchedulerWrapper")),d=n(e("../notes/Notes")),f=n(e("../../stores/store")),p=e("../../reducers/detailView"),m=e("../../reducers/user"),h=e("../../reducers/items"),y=window,v=y.DateUtils,g=y.MenuRightClick,b=y.Signals,w=y.IstTooltip,E=y.svgs,j=e("../people_assigner/PeopleAssigner"),O=e("../labels/Labels.js"),S=e("../notes/NotesUtils"),P=e("../item_selecter/ItemSelecter.js"),I=e("../drag_and_drop/DragAndDrop"),k=e("../generic_manager/GenericManagerUtils.js"),T=e("../projects_list/ProjectListUtils"),C=e("../formatter/Formatter.js"),D=e("../../models/ItemsModel"),A=e("../../models/ProjectsModel"),M=e("../../models/Colors"),x=e("../../models/Reminders"),R=x.RemindersModel,N=e("../../models/Collaborators"),L=e("./ItemCheckbox"),$=e("./ItemDueDates.js"),U=function(){function e(){a(this,e),this.renderItem=this.renderItem.bind(this),this.getMenuEditIcon=this.getMenuEditIcon.bind(this),this.createProjectItem=this.createProjectItem.bind(this)}return l(e,[{key:"renderItem",value:function(e,t){var r,n,o,a,i,l,s=f.default.getState(),c=(0,m.isDoistUser)(s),y=A.get(e.project_id),T=LI({c:"task_item item_".concat(e.id).concat(c?" task_item--new_design":"").concat(e.responsible_uid?" task_item--assigned":""),id:"item_".concat(e.id)});T.json=e,e.checked&&$addClass(T,"checked"),c?$add(T,o=DIV({c:"task_item_details"})):$add(T,TABLE({cellpadding:0,cellspacing:0},o=TBODY())),P.highlighted_items[e.id]&&$addClass(T,"selected");var M=c?DIV:TD;if(T.td_checker=a=M({c:"checker sel_checkbox_td"}),(0,u.isSection)(e.content)||!0===t.no_checkbox)T.td_checker=a=M();else{var x;x=e.is_archived?function(){return alert(_("This project is archived. Unarchive it to be able to edit it.")),L.update(T,e.checked,x),!0}:e.checked?t.fn_undo_complete_item:t.fn_complete_item,$add(a,L.create(T,x))}var U=null;if(t.with_time&&e.due&&e.due.with_time){var B="40px";window.Settings.AMPM&&(B="67px");var V=DIV({class:"agenda_item__time"},SPAN(v.getHourAndMin(e.due)));V.style.minWidth=B,e.due.isLessThan(new Date)&&$addClass(V,"agenda_item__time_overdue"),U=M({class:"column_time task_content_item"},V)}var F=null;if(t.with_project){if(T.td_project=F=M({class:"column_project task_content_item"},this.createProjectItem(e,null,c)),!t.with_due_date){var H,q=R.hasReminders(e.id);$ATT(F,H=SPAN({c:"sm_icon_holder".concat(q?"":" sm_icon_holder--empty")},$.updateAlarmIcon(F,q))),w.showTooltip(H,$p($.createTooltipContent,e),3,5)}if(!t.with_due_date&&e.due&&e.due.is_recurring){var G;$ATT(F,G=SPAN({c:"sm_icon_holder"},E.get("sm1/recurring.svg",{className:"recurring_icon"}))),w.showTooltip(G,$p($.createTooltipContent,e),3,5)}}c&&(l=DIV({c:"task_info task_content_item"},E.get("sm1/info.svg",{className:"form_action_icon"})),$AEV(l,"click",function(){(0,h.itemGetByID)(s,e.id)?f.default.dispatch((0,p.detailViewShowItem)(e.id)):d.default.showItemNotes(e.id)})),$ATT(T,DIV({c:"invisible_space"}));var z=null,W=null,Y=null,K=DIV({c:"task_item_details_bottom"}),J=C.format(e.content);J=J.replace(/^\*\s+/g,"");var Q=$setHTML(SPAN({c:"text sel_item_content"}),J),X=O.format("",e);c?($setHTML(K,X),S.annotate(e,K,T),$ATT(K,K.lastChild),$add(Q,K)):(S.annotate(e,Q,T),$add(Q,$setHTML(DIV(),X)));var Z=null;if(y&&N.isProjectShared(y.id)){var ee=function(t){if(e.responsible_uid!==t)return t?$addClass(T,"task_item--assigned"):$removeClass(T,"task_item--assigned"),D.update(e.id,{responsible_uid:t}),b.sendSignal("people_assigner_person_changed"),e},te={fn_on_select:ee,responsible_uid:e.responsible_uid,project_id:y.id,from_rendering:!0,arrow_left_offset:5};Z=M({c:"assign_user task_content_item","data-track":"project|assign_person"},new j(te).render(te))}else $addClass(T,"not_shared");t.with_due_date&&(z=M({c:"td_due_date",nowrap:!0},W=DIV({c:"due_date_controls"},Y=$.create(e))),c&&e.due&&$ATT(K,z)),T.content=r=M({c:"text_cursor content task_content_item"},Q),T.td_menu=n=null;var re=!0;if((e.is_archived||e.in_history||t.not_editable)&&(re=!1),window.PRINT_MODE&&(re=!1),T.td_menu=n=M({c:"menu"}),re){$add(n,this.getMenuEditIcon(T,t.fn_toggle_menu,T.td_menu)),new g(T,$p(t.fn_toggle_menu,T,{id:e.id},e.id)),t.no_drag_and_drop||I.attach(T);var ne,oe=SPAN({c:"scheduler_action"},E.get(c?"sm1/calendar.svg":"sm1/scheduler.svg"));t.with_due_date?(e.due?ne=Y:($addToTop(W,oe),ne=oe),c&&(T.td_scheduler=i=M({c:"td_scheduler task_content_item"},oe),$AEV(i,"click",$p(this.onSchedulerClick,T,e,i,t.is_note)))):(T.td_scheduler=i=M({c:"td_scheduler task_content_item"},oe),ne=oe),$AEV(ne,"click",$p(this.onSchedulerClick,T,e,ne,t.is_note))}else{var ae=k.getMenuEditIcon();$addClass(ae,"is_hidden"),$add(n,ae)}if(t.no_indent||k.setIndent(T,e.indent,!0),$addClass(T,"priority_".concat(e.priority)),c){$add(K,F);var ie=DIV({c:"task_item_actions"});$add(ie,l,i,Z,n),$add(T,ie)}return U?(c?$add(o,a,U,r):$add(o,TR(a,U,r,i,l,z,F,Z,n)),T.td_time=U):c?$add(o,a,r):$add(o,TR(a,r,i,l,z,F,Z,n)),T.render_opts=t,T}},{key:"getMenuEditIcon",value:function(e,t,r){var n=k.getMenuEditIcon();return $AEV(r,"click",$p(t,e,n,e.json.id)),e.menu_icon=n,n}},{key:"createProjectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0;t||(t=A.get(e.project_id)),t||(t={name:_("Undefined"),id:null,color:null});var n=t,o=n.name;o=o.replace(/^-\s*/,""),o=$trim(o,30);var a=t.color||0;t.inbox_project&&(a=7),a=M.getHex("project",a);var i=SPAN({c:"project_item__color"},"");i.style.color=a,N.isProjectShared(t.id)?($addClass(i,"project_item__color--shared"),$add(i,E.get("sm1/project_shared.svg"))):i.style.backgroundColor=a;var l=SPAN({c:"clickable project_item"});return $add(l,$setHTML(SPAN({c:"project_item__name"}),C.format(o))),r?$ATT(l,i):$add(l,i),window.PRINT_MODE||$AEV(l,"click",function(r){if(r.ctrl||r.shift)return!1;if(t.id){var n=e?e.id:null;T.setCurrentById(t.id,n)}return!1}),l}},{key:"onSchedulerClick",value:function(e,t,r,n,a){a.stopPropagation()
;var i=$all("li","selected");i=i.indexOf(e)>-1?i:[e];var l=i.map(function(e){return e.json}),u=n?"scheduler-note-item":"scheduler-item";c.default.show({anchor:r,dialogClassName:u,selectedItems:l,holder:DIV({c:"scheduler_holder"}),selectedDate:l.length>1?null:t.due,onDateSelect:function(e){D.updateDue(o({},t.id,e)),s.default.refresh(),n&&d.default.reRenderCurrentItem()},onHide:function(){$removeClass(e,"on_scheduler_show")}}),$addClass(e,"on_scheduler_show")}}]),e}();t.exports=new U},{"../../models/Collaborators":148,"../../models/Colors":149,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/Reminders":161,"../../react_components/scheduler/SchedulerWrapper":1009,"../../reducers/detailView":1092,"../../reducers/items":1100,"../../reducers/user":1135,"../../stores/store":1140,"../../utils":1176,"../agenda/AgendaUtils":8,"../drag_and_drop/DragAndDrop":20,"../formatter/Formatter.js":22,"../generic_manager/GenericManagerUtils.js":26,"../item_selecter/ItemSelecter.js":27,"../labels/Labels.js":36,"../notes/Notes":46,"../notes/NotesUtils":49,"../people_assigner/PeopleAssigner":55,"../projects_list/ProjectListUtils":72,"./ItemCheckbox":29,"./ItemDueDates.js":31}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=n(e("../project_editor/ProjectEditorManager")),a=n(e("../../stores/store")),i=e("../../filterist"),l=e("../agenda/sort"),s=e("../../reducers/items"),u=e("../../components/agenda/sort"),c=window.Signals,d={sortByDate:function(){d.applySort((0,u.composeSortFunc)(u.byDueDate,u.byPriority,u.byChildOrder))},sortByPriority:function(){d.applySort((0,u.composeSortFunc)((0,u.composeSortFunc)(u.byPriority,u.byChildOrder)))},sortByResponsible:function(){var e=(0,u.createByResponsible)(a.default.getState());d.applySort((0,u.composeSortFunc)((0,u.composeSortFunc)(e,u.byPriority,u.byChildOrder)))},sortByName:function(){d.applySort((0,u.composeSortFunc)(u.byItemContent,u.byPriority,u.byChildOrder))},applySort:function(e){var t=o.default.current_editor;if(!t)return!1;a.default.dispatch((0,s.itemSortProjectItems)(t.project_id,e)),c.sendSignal("sort_by_done"),c.sendSignal("instant_refresh_interface")},sortToday:function(){var e=(0,i.filter)("today")[0].items;if(0!==e.length){var t=(0,l.createDayViewSortByProject)(a.default.getState());e.sort(t);var r=e.reduce(function(e,t,r){return e[t.id]=r+1,e},{});a.default.dispatch((0,s.itemUpdateDayOrder)(r,{withUndo:!0})),c.sendSignal("instant_refresh_interface")}}};t.exports=d},{"../../components/agenda/sort":16,"../../filterist":121,"../../reducers/items":1100,"../../stores/store":1140,"../agenda/sort":16,"../project_editor/ProjectEditorManager":62}],35:[function(e,t,r){"use strict";function n(e){var t=e.target||e.srcElement;if(t){var r=$nodeName(t);if("textarea"==r||"input"==r||"select"==r||"textbox"===t.getAttribute("role"))return!0;if($hasClass(t,"ist_button")||$hasClass(t,"richtext_editor")||$hasClass(t,"t_date")||$hasClass(t,"t_label"))return!0}return!1}function o(e){if(n(e))return!0;if(s())return!0;if($$(".side_panel").length>0)return!0;var t=e.keyAscii,r=c.current_section_list;if($isIn(t,[97,65,1092,1060])){var o=$isIn(t,[65,1060]);if(r)r.addNewItem(o);else{var a=$$("li.agenda_add_task");if(a.length>0){var u=$child(a[0],"a");u.scrollIntoView({behavior:"smooth"}),u.onclick(u)}}return $preventDefault(e),!1}return!e.ctrl&&$isIn(t,[47,102,1072])?(f.focus(),f.select(),$preventDefault(e),!1):!e.ctrl&&$isIn(t,[81,113,1081,1049])?($preventDefault(e),d.toggle(),!1):!e.ctrl&&$isIn(t,[115,1099,1491])&&(0,l.isDoistUser)(i.default.getState())&&c.getCurrentEditor()?(c.getCurrentEditor().showSectionAddForm(),$preventDefault(e),!1):!e.ctrl&&$isIn(t,[114,1082])?(p.sortByResponsible(),$preventDefault(e),!1):!e.ctrl&&$isIn(t,[112,1079])?(p.sortByPriority(),$preventDefault(e),!1):e.ctrl&&$isIn(t,[38,40])?(r&&!c.current_form&&(r.addNewItem(40==t),$preventDefault(e)),!1):63==t?m.showKeyboardShortcuts():!e.ctrl&&$isIn(t,[68,100,1074])?("today"===i.default.getState().mainView.type&&p.sortToday(),"project"===i.default.getState().mainView.type&&p.sortByDate(),$preventDefault(e),!1):!(!e.ctrl&&110===t)||(p.sortByName(),$preventDefault(e),!1)}function a(e){if(n(e))return!0;var t=e.keyAscii;if(27==t){if(s()||u.current_input)return!0;if($all("li","selected").length>0)return _.deselectAll(),!1;top.postMessage(JSON.stringify({type:"todoist_close_window"}),"*")}else if(e.ctrl&&90==t)return $preventDefault(e),h.undo(),!1;return!0}var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),l=e("../../reducers/user"),s=window.GB_getLast,u=window.IstComplete,c=e("../project_editor/ProjectEditorManager"),d=e("../quick_add/QuickAdd"),f=e("../quick_find/QuickFind"),p=e("../items_utils/ItemsSortBy.js"),m=e("../opener/WindowOpener.js"),h=e("../items_utils/ItemCommonEdits"),_=e("../item_selecter/ItemSelecter.js");r.init=function(){$AEV(document,"keypress",o),$AEV(document,"keydown",a)}},{"../../reducers/user":1135,"../../stores/store":1140,"../item_selecter/ItemSelecter.js":27,"../items_utils/ItemCommonEdits":30,"../items_utils/ItemsSortBy.js":34,"../opener/WindowOpener.js":53,"../project_editor/ProjectEditorManager":62,"../quick_add/QuickAdd":73,"../quick_find/QuickFind":76}],36:[function(e,t,r){"use strict";var n=e("../../reducers/user"),o=window.Signals,a=window.LibEdit,i=window.IstTooltip,l=window.IstComplete,s=e("../../models/LabelsModel"),u=e("../../models/Colors"),c=e("../../containers/premium_promo/PremiumOnlyModal"),d=e("../richtext_editor/NatrualLanguageParsing"),f=e("../../stores/store").default,p=e("../../reducers/mainView"),m=p.showLabelView,h={re_labels:/(^|\s+)@([^\s,]+)/g,init:function(){},getLabels:function(e){var t=[];return e=e.replace(h.re_labels,function(e,r,n){n=n.toLowerCase();var o=s.get(n);return o?t.push(o.id):t.push(n),""}),[e,t]},queryLabel:function(e){f.dispatch(m(e)),o.sendSignal("select_labels_tab",e)},format:function(e,t){if(!t.labels)return e;var r={},n=[],o=function(e){r[e.name]||(n.push(e),r[e.name]=!0)};$map(t.labels,function(t){var r=s.getByName(t,!1)[0]||{name:t};o(r),e=e.replace(new RegExp("(^|s)@"+r),"$1")});var a=h.getLabels(e)[1];return $map(a,function(t){(t=s.getById(t))&&(o(t),e=e.replace(new RegExp("(^|s)@"+t),"$1"))}),h._format(e,n)},_format:function(e,t){if(!t||0===t.length)return e;(0,n.isDoistUser)(f.getState())||e?t.sort(function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}):t.sort(function(e,t){return e.item_order-t.item_order});var r=[];return $map(t,function(n,o){var a=t[o+1],i=a?"margin-right: 5px;":"";if(n){var l=h.getCssColor(n),s=$xssStrip(n.name);r.push('<a class="label" onclick="Labels.queryLabel(\''+n.name+'\')" style="'+i+l+'">'+s+"</a>"),e=e.replace(new RegExp("(^|s)@"+n,"ig"),"")}}),t=r.join(""),(0,n.isDoistUser)(f.getState())&&!e?t:e+'<div class="labels_holder">'+t+"</div>"},getCssColor:function(e){return"color: "+u.getHex("label",e.color)+";"},formatByContent:function(e){var t=h.getLabels(e);e=t[0];var r=t[1];if(0===r.length)return e;var n=[];return $map(r,function(e){var t;(t=$isNumber(e)?s.getById(e):{name:e,color:0})&&n.push(t)}),h._format(e,n)},jsonFormat:function(e){return e=e.replace(h.re_labels,function(e,t,r){var n=function(e){return"\\"+e};return r=r.replace(/\*|\+/g,n),e.replace(new RegExp(t+"@"+r,"g"),"")}),$strip(e)},textFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={},n=[];return t.map(function(t){if(!r[t]){var o=new RegExp("(^|s)@"+l.escapeReqExpSepcails(t),"ig");null==e.match(o)&&(n.push("@"+t),r[t]=!0)}}),n=n.join(" "),n.length>0&&(n+=" "),n+$strip(e)},getCompletionLabels:function(){var e=[];return $map(s.getAll(!0),function(t){e.push({name:t.name})}),e},annotateFormArea:function(e,t){window.User.is_premium&&(l.attach(e,s.complete_data={collection:function(e){return s.getByName(e.replace("@",""))},filterItem:function(e){var t=DIV({c:"div_color counter_color",s:h.getCssColor(e)},svgs.get("sm1/label.svg")),r=SPAN({c:"label_name"},e.name);return DIV(DIV({c:"ist_complete_icon"},t),DIV({c:"ist_complete_content"},r))},position_item:$parent(e,"td","text_box_holder"),extra_width:1,support_paste:!1,wildcard_match:!0,onNoMatches:function(e,t,r){if(0==r.length&&0!=h.getCompletionLabels().length)return l.hide(),!1;if(r.length>0){r=r.replace(/\\/g,"");var n;$add(e,TR(n=TD({c:"ist_complete_item"},SPAN({c:"ist_complete_content"},_("Label not found.")," ",B(_("Create")+" "+r))))),n.onmouseover=$p(l.onMouseOver,n,{}),n.onmousedown=$p(h._createLabel,r,t)}return!0},preOnSelect:function(e){h.old_support_labels=null,e.is_content_editable&&d&&(h.old_support_labels=d.highlight_labels,d.highlight_labels=!1)},postOnSelect:function(e){e.is_content_editable&&setTimeout(function(){d.highlight_labels=h.old_support_labels,e.input.onchanged()},5)}}),$AEV(e,"keydown",function(e){return!(13==e.keyAscii&&!e.shift&&l.isShown())&&((27!=e.keyAscii||!l.isShown())&&void 0)}),$swap(t,this._crateLabelButton(e)))},showPremiumPromotion:function(){c.showLabel()},_createLabel:function(e,t){return l.hide(),s.add({name:e}),window.LibEdit.insertAtCursor(t,l.CHAR_FORCED_WHITESPACE),!1},_crateLabelButton:function(e){var t=SPAN(svgs.get("sm1/label_outline.svg"));$addClass(t,"form_action_icon"),t.setAttribute("data-track","task_form|label"),$AEV(t,"click",function(){return i.hide(),window.User.is_premium?(a.placeCaretAtEnd(e),l.forceShow(e,!0,s.complete_data)):h.showPremiumPromotion(),!1});var r=DIV(B(_("Label")),BR(),_("Add by typing @"));return i.showSimpleText(t,r,null,6,4),t}};window.Labels=h,t.exports=h},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/Colors":149,"../../models/LabelsModel":156,"../../reducers/mainView":1109,"../../reducers/user":1135,"../../stores/store":1140,"../richtext_editor/NatrualLanguageParsing":85}],37:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../../utils"),l=window,s=l.IstComplete,u=function(){function e(){var t=this;n(this,e),this.render=this.render.bind(this),this.toggleIcon=this.toggleIcon.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.toggle=this.toggle.bind(this),$AEV(window,"resize",(0,i.debounce)(function(){t.mobile_menu_shown&&!window.MINI_VERSION&&t.hide()},200))}return a(e,null,[{key:"initClass",value:function(){this.prototype.offset_top=50}}]),a(e,[{key:"render",value:function(){$ATT($("top_bar_inner"),this.toggleIcon())}},{key:"toggleIcon",value:function(){var e=this.icon_menu_toggle=A({href:"#",c:"left_menu_toggle"},svgs.get("sm1/menu.svg"));return $AEV(e,"click",this.toggle),e}},{key:"isShown",value:function(){return $hasClass($html(),"left_menu_show")}},{key:"show",value:function(){this.mobile_menu_shown=!0;var e=$body();return $addClass($html(),"left_menu_show"),$add(e,this.overlay=DIV({c:"left_menu_overlay"})),$AEV(this.overlay,"click",this.hide),$removeClass(this.icon_menu_toggle,"menu_toggle"),$addClass(this.icon_menu_toggle,"menu_close"),$replace(this.icon_menu_toggle,svgs.get("sm1/close_big.svg")),!1}},{key:"hide",value:function(){return this.mobile_menu_shown=!1,$removeClass($html(),"left_menu_show"),$remove($all("div","left_menu_overlay")),$removeClass(this.icon_menu_toggle,"menu_close"),$addClass(this.icon_menu_toggle,"menu_toggle"),$replace(this.icon_menu_toggle,svgs.get("sm1/menu.svg")),!1}},{key:"toggle",value:function(){return s.hide(),this.isShown()?this.hide():this.show(),!1}}]),e}();u.initClass(),t.exports=new u},{"../../utils":1176}],38:[function(e,t,r){"use strict";var n=e("../../constants/themes"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("../themes/Themes")),a={show:function(){var e=localStorage.getItem("User");if(e){var t,r=localStorage.getItem("LocalSettings.theme");if(r)t=parseInt(r);else{t=JSON.parse(e).theme}t===n.THEME_DARK&&o.default.changeThemeClass(t)}},hide:function(){var e=$("loading");if(e){var t=function(){e&&($remove(e),e=null)};$AEV(e,"animationend",t),$addClass(e,"fade_out"),setTimeout(t,700)}}};window.Loading=a,t.exports=a},{"../../constants/themes":99,"../themes/Themes":95}],39:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var c=window,d=c.Signals,f=window,p=(f.$static_path,e("../../models/Storage")),m=p.$storage,h=e("../notifications/Notifications"),_=function(){function e(){l(this,e),this.connected=!1,this.connect=this.connect.bind(this),window.Notification&&this.connect()}return u(e,[{key:"connect",value:function(){var e=this;this.connected||(d.connect("notify",function(t){var r,o,a,i,l;if(window.MacBridge&&window.MacBridge.bridge);else if("denied"===m("LocalNotifications").get())return;try{var s=h.renderNotification(t,0),u=n(s,5);l=u[0],i=u[1],o=u[2],a=u[3],r=u[4]}catch(e){return}if(i){var c=$setHTML(SPAN(),i);return c=c.textContent||c.innerText,o&&(o=$trim(o,200)),window.MacBridge&&window.MacBridge.bridge?d.sendSignal("mac_notify",c,o,r):e.notify(c,o,a,l.avatar_big,t.notification_key)}}),this.connected=!0)}},{key:"notify",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n||(n="https://d3ptyyxy2at9ui.cloudfront.net/notification_icon-299404.png");var a=function(){var a={icon:n};t&&(a.body=t),o&&(a.tag=o);try{new window.Notification(e,a).onclick=function(){if(window.focus(),r)return r()}}catch(e){}};return"granted"===window.Notification.permission?a():"denied"!==window.Notification.permission?window.Notification.requestPermission(function(e){var t=!1;try{t=window.Notification.includes("permission")}catch(e){}if(t||(window.Notification.permission=e),"granted"===e)return a()}):void 0}}]),e}();t.exports=new _},{"../../models/Storage":167,"../notifications/Notifications":51}],40:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Signals,s=e("../notes/NotesUtils"),u=e("../../models/ItemsModel"),c=e("../../models/Reminders"),d=c.RemindersModel,f=e("../local_notifications/LocalNotifications"),p=e("../formatter/Formatter.js"),m=function(){function e(){n(this,e),this.connect=this.connect.bind(this),this.loopReminders=this.loopReminders.bind(this),window.Notification&&this.connect()}return a(e,null,[{key:"initClass",value:function(){this.prototype.connected=!1}}]),a(e,[{key:"connect",value:function(){this.connected||(l.connect("remind",function(e){var t=u.getById(e.item_id);if(t&&!(t.is_deleted||t.checked||t.in_history)){var r=!0;if(0==window.User.features.reminder_desktop&&(r=!1),r)if(window.MacBridge&&window.MacBridge.bridge)l.sendSignal("mac_remind",t);else if(window.Notification){var n=p.format(t.content,{only_text:!0,as_html:!1});f.notify(n,_("Todoist Reminder"),function(){s.show(t.id)},"reminder_".concat(t.id))}}}),setInterval(this.loopReminders,1e4),this.connected=!0)}},{key:"loopReminders",value:function(){var e=(new Date).getTime(),t=!1,r=!0,n=!1,o=void 0;try{for(var a,i=d.getAllReminders()[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;if(!s.lprocessed&&!s.is_deleted){var c=null;if("relative"===s.type){var f=u.getById(s.item_id);f&&f.due&&(c=f.due.getTime()-60*s.minute_offset*1e3)}if("absolute"===s.type&&(c=s.due.getTime()),c){var p=s.notify_uid;if(!p||p===window.User.id){var m=(e-c)/1e3;m>=0&&m<60&&(s.lprocessed=!0,l.sendSignal("remind",s),t=!0)}}}}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}d.loaded&&t&&d.syncCachedData()}}]),e}();m.initClass(),t.exports=new m},{"../../models/ItemsModel":155,"../../models/Reminders":161,"../formatter/Formatter.js":22,"../local_notifications/LocalNotifications":39,"../notes/NotesUtils":49}],41:[function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),o=e("../../reducers/mainView"),a=e("../../reducers/user"),i=e("../../reducers/detailView"),l=e("../../reducers/items"),s=window.Signals,u=e("../../components/projects_list/ProjectListUtils"),c=e("../../components/project_editor/ProjectExtraActions"),d=e("../../components/activity_log/ActivityLog"),f=e("../../components/quick_add/QuickAdd"),p=e("../../components/agenda/AgendaUtils"),m=e("../../components/notes/Notes.js"),h=e("../../models/TemporaryIds"),_=e("../../models/SyncEngine"),y=e("../../models/ItemsModel"),v=e("../../models/ProjectsModel"),g=e("../opener/WindowOpener.js"),b={init:function(){setInterval(this.locationPolling,400),h.listenAll(function(e,t){var r=b;r.cur_location&&-1!=r.cur_location.indexOf(e)&&r.updateLocation(r.cur_location.replace(e,""+t))}),s.connect("change_location",function(e){b.updateLocation(e)}),h.listenAll(function(e,t){var r=b.getHash();-1!=r.indexOf(e)&&(r=r.replace(e,t),b.updateLocation(r))})},getHash:function(){var e=window.location.hash.substring(1);return $urldecode(e)},getCurrentLocation:function(){return b.cur_location},setHash:function(e){window.location.hash=$urlencode(e)},updateLocation:function(e){var t=b;t.cur_location!=e&&(b.setHash(e),t.cur_location=e)},refreshView:function(){return b.updateView(b.setHash()),!1},updateView:function(e,t){if(window.isEditingOn())return void setTimeout($p(b.updateView,e),400);if(0===e.indexOf("project/")){var r=e.split("/"),s=parseInt(r[1]),h=3==r.length&&"full"===r[2];n.default.dispatch((0,o.showProjectView)([s],{withChildren:h}))}if(0===e.indexOf("project_comments/")){var w,E=e.split("/"),j=parseInt(E[1]);if(E[2]&&(w=parseInt(E[2])),1==t){var O=v.get(j);O?u.setCurrentById(O.id,!1):p.query("today")}m.showProjectNotes(j,w)}else if(0===e.indexOf("task/")){var S,P=e.split("/"),I=parseInt(P[1]);if(P[2]&&(S=parseInt(P[2])),I){if(1==t){var k;k=S?y.getBySyncId(S):y.getById(I),k?u.setCurrentById(k.project_id,!1):p.query("today")}var T=n.default.getState();(0,a.isDoistUser)(T)&&(0,l.itemGetByID)(T,I)?n.default.dispatch((0,i.detailViewShowItem)(I,{activeTab:"comments"})):m.showItemNotes(I,null,S)}}else if(0===e.indexOf("email_tasks/")){var C=parseInt(e.split("/")[1]);C&&(u.setCurrentById(C,!1),c.showEmails(C))}else if(0===e.indexOf("agenda/")){var D=e.split("/");D.shift(),D.length>0&&p.query(D.join("/"))}else if(0===e.indexOf("activity")){var A=null,M=null,x=null,R=void 0,N=e.split("/");N.length>1&&("project"==N[1]?A=parseInt(N[2]):"task"==N[1]&&(M=parseInt(N[2])),"null"!=N[3]&&(x=N[3]),"undefined"!==N[4]&&N[4]!=window.User.id.toString()&&(R="null"==N[4]?null:N[4])),d.showActivity(A,M,x,R)}else-1!=e.indexOf("quickAdd")?(f.toggle(),e=b.cur_location,b.setHash(e)):-1!=e.indexOf("updateCount")?(e=b.cur_location,-1!=e.indexOf("#updateCount")?b.setHash("#start"):b.setHash(e)):-1!=e.indexOf("sync")?(_.sync(null,!0),e=b.cur_location,b.setHash(e)):-1!=e.indexOf("openOutlook")||-1!=e.indexOf("openThunderbird")||("upgrade_to_premium"==e&&(e="windowPref/premium"),"invite_friends"==e&&(e="windowPref/invite_friends"),0===e.indexOf("windowPref/")&&g.showPrefs($last(e.split("/"))))},locationPolling:function(){var e=b,t=e.getHash();e.cur_location&&e.cur_location!=t&&(b.setHash(t),e.updateView(t),e.cur_location=t)}};window.LocationManager=b,t.exports=b},{"../../components/activity_log/ActivityLog":4,"../../components/agenda/AgendaUtils":8,"../../components/notes/Notes.js":46,"../../components/project_editor/ProjectExtraActions":64,"../../components/projects_list/ProjectListUtils":72,"../../components/quick_add/QuickAdd":73,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../reducers/detailView":1092,"../../reducers/items":1100,"../../reducers/mainView":1109,"../../reducers/user":1135,"../../stores/store":1140,"../opener/WindowOpener.js":53}],42:[function(e,t,r){"use strict";function n(){return null!=navigator.userAgent.match(/Todoist for macOS|TDMacApp/)}function o(){var e=navigator.userAgent.match(/Todoist for macOS \((.+)\)/);return e?parseFloat(e[1]):null}function a(){return"ja"==window.LANG||"ko"==window.LANG||0===window.LANG.indexOf("zh")}function i(){var e,t=window.location.href,r=!(l.isWindowApp||l.isOutlookApp||l.isChromeApp);r&&(e=window.open());var n={onSuccess:function(){-1!=t.indexOf("?")?t=t.replace("?","?print_mode=1&"):-1!=t.indexOf("#")&&(t=t.replace("#","?print_mode=1#")),-1!=t.indexOf("#")&&(t=t.split("#")[0]+window.location.hash),t=t.replace("mini=1","minip=0"),e?e.location=t:window.open(t)}};return s.sync(n,!0),!1}var l=e("../../utils/Env"),s=e("../../models/SyncEngine");Signals=window.Signals,Signals.connect("open_print_mode",i),t.exports={isMacApp:n,getMacAppVersion:o,isAsianLang:a}},{"../../models/SyncEngine":169,"../../utils/Env":1144}],43:[function(e,t,r){"use strict";function n(e,t){e(t.shift()),t.length>0&&window.setTimeout($partial(n,e,t),5)}function o(e,t){$isIe()||$isSafari(!0)?$AEV(e,"keydown",t):$AEV(e,"keypress",t)}function a(e,t,r){var n=u[e];n&&clearTimeout(n),u[e]=setTimeout(r,t)}function i(e,t){try{e.postMessage(t,"*")}catch(e){}}function l(e){return-1!=e.indexOf("@")&&-1!=e.indexOf(".")}function s(){function e(e){return t(Math.random()*(1<<(e<<2))^Date.now()).slice(-e)}function t(e){return(0|e).toString(16)}return[e(4)+e(4),e(4),"4"+e(3),t(8|4*Math.random())+e(3),Date.now().toString(16).slice(-10)+e(2)].join("-")}var u={};t.exports={forceLiveRendering:n,attachKeyDown:o,delayAjaxUpdate:a,checkEmail:l,postMessageToWindow:i,UUID:s}},{}],44:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){i.default.render(a.default.createElement(l.Provider,{store:s.default},e),t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("react-dom")),l=e("react-redux"),s=n(e("../../stores/store"))},{"../../stores/store":1140,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],45:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var c=window,d=c.GB_showImage,f=window,p=f.GB_show,m=window,h=m.GB_getLast,y=window,v=y.GB_CURRENT,g=window,b=g.PlayManager,w=e("../formatter/Formatter.js"),E=function(){function e(){l(this,e),this.render=this.render.bind(this),this.iconAttachment=this.iconAttachment.bind(this),this.audioAttachment=this.audioAttachment.bind(this)}return u(e,[{key:"canPlayAudio",value:function(e){var t=document.createElement("audio");return!(!t.canPlayType||!t.canPlayType(e).replace(/no/,""))}},{key:"calculateOptimalDimension",value:function(e,t,r,n){var o;return e/t>r/n?e<=r?[e,t]:(o=r/e,[r,Math.floor(t*o)]):t<=n?[e,t]:(o=n/t,[Math.floor(e*o),n])}},{key:"render",value:function(e){var t=e.file_attachment;if(t&&!e.is_buffer_obj){var r,o,a,i,l=t.file_underlying_type||t.file_type||"",s=(null!=t.file_name?t.file_name.toLowerCase():void 0)||"",u=(null!=t.file_url?t.file_url.toLowerCase():void 0)||"",c=t.resource_type||"file";if(("website"===c||"rich"===c)&&t.title&&t.url){var d,f;f=t.title?DIV({c:"text"},$trim(t.title,65)):null,d=t.description?DIV({c:"desc_text"},$trim(t.description,200)):null;var m=null;if(t.image){var h=Array.from(this.calculateOptimalDimension(t.image_width,t.image_height,120,90)),y=n(h,2);i=y[0],r=y[1],a=-1===t.image.indexOf("resizeist")?"https://image-resize.todoist.com/?url=".concat(encodeURIComponent(t.image),"&width=").concat(i,"&height=").concat(r,"&fallback=true"):t.image,m=DIV({c:"image_holder"},IMG({src:a}))}var g=DIV({c:"content_holder"},f,d);return t.image&&-1!==t.image.indexOf(".gif")&&(g=null),o=DIV({c:"file_attachment"},A({href:t.url,target:"_blank"},m,g)),g&&$addClass(o,"has_content"),m&&$addClass(o,"has_image"),o}if((t.file_url||t.url)&&(t.image||t.tn_m)){var b;if(!(b="image/svg+xml"===t.file_type?t.file_url:t.image?t.image:t.tn_m[0]))return;var w=Array.from(this.calculateOptimalDimension(t.image_width||300,t.image_height||200,300,200)),E=n(w,2);i=E[0],r=E[1];var j=b;-1===b.indexOf("image-resize")&&"image/svg+xml"!==t.file_type&&(j="https://image-resize.todoist.com/?url=".concat(encodeURIComponent(b),"&width=").concat(i,"&height=").concat(r,"&fallback=true"));var O=t.file_url||t.url,S=A({c:"file_attachment_download",target:"_blank",href:O},svgs.get("sm1/download.svg"));return IstTooltip.showTooltip(S,_("Download")),S.addEventListener("click",function(e){e.stopPropagation()}),o=A({href:t.file_url||t.url,target:"_blank",c:"file_attachment with_preview"},IMG({src:j,width:i,height:r,c:"preview"}),S),$AEV(o,"click",$p(this.showImage,o.href,o.href,o)),o}return"outlook/mail"===c?this.iconAttachment(t,"ft_outlook_mail"):0===l.indexOf("td/hyperlink")?this.iconAttachment(t,"ft_link"):0===l.indexOf("td/")?this.iconAttachment(t,"ft_email"):t.file_url&&(-1!==t.file_url.indexOf("cloudfront.net")||-1!==t.file_url.indexOf("files.todoist.com"))&&-1!==l.indexOf("audio/")&&this.canPlayAudio(l)?this.audioAttachment(t):-1!==l.indexOf("pdf")?this.iconAttachment(t,"ft_pdf"):-1!==s.indexOf(".xl")||-1!==l.indexOf("spreadsheet")?this.iconAttachment(t,"ft_excel"):-1!==s.indexOf(".doc")||-1!==l.indexOf("document")?this.iconAttachment(t,"ft_word"):-1!==s.indexOf(".pp")?this.iconAttachment(t,"ft_pp"):-1!==s.indexOf(".zip")?this.iconAttachment(t,"ft_zip"):-1!==s.indexOf(".psd")?this.iconAttachment(t,"ft_psd"):-1!==s.indexOf(".sketch")?this.iconAttachment(t,"ft_sketch"):-1!==s.indexOf(".aep")?this.iconAttachment(t,"ft_aep"):-1!==s.indexOf(".ai")?this.iconAttachment(t,"ft_ai"):-1!==s.indexOf(".py")||-1!==s.indexOf(".php")||-1!==s.indexOf(".java")||-1!==s.indexOf(".rb")||-1!==s.indexOf(".js")?this.iconAttachment(t,"ft_code"):-1!==l.indexOf("/extemail")||-1!==u.indexOf(".email.")||"email"===t.resource_type?this.iconAttachment(t,"ft_extemail",function(){p(t.file_name,t.file_url,500,800);var e=DIV({c:"orginal_link"},A({href:t.file_url,target:"_blank"},_("View in another window"))),r=$last(v);return $addAfter(e,r.iframe),!1}):0===l.indexOf("text/")?this.iconAttachment(t,"ft_text"):this.iconAttachment(t,"ft_generic")}}},{key:"iconAttachment",value:function(e,t){var r,n,o,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("ft_outlook_mail"===t)return r=DIV({c:"file_attachment"},SPAN({c:"text"},$trim(e.file_name||"",50)));if("ft_email"===t){r=DIV({c:"file_attachment link_attachment"});var l=w.format(e.file_url);return $setHTML(r,l),r}var s=null;"pending"===e.upload_state&&(s=_("Pending")),"canceled"===e.upload_state&&(s=_("Canceled")),s&&(s=SPAN({c:"status"},s)),"ft_link"===t?(n="file_attachment link_attachment",o=svgs.get("sm1/link.svg",{className:"link_icon"})):(n="file_attachment",o=svgs.get("ft/".concat(t,".svg"),{className:"file_icon"}));var u=DIV({c:n},a=A({href:e.file_url,target:"_blank"},o,SPAN({c:"text"},$trim(e.file_name||"",50)),s));return s?($addClass(a,"no_action"),a.onclick=function(){return!1}):i&&(a.onclick=i),u}},{key:"showImage",value:function(e,t,r,n){if(-1!==t.indexOf("dropbox.com"))return!0;if(window.MINI_VERSION)return!0;-1===e.indexOf("resizeist")&&(e="https://image-resize.todoist.com/?url=".concat(encodeURIComponent(e),"&maxheight=800&maxwidth=800&fallback=true")),$preventDefault(n),d("",e),h().setZindex(1e7);var o=$last(v),a=t;a.length>40&&(a=a.substring(0,40)+"...");var i=DIV({c:"orginal_link"},A({href:t,target:"_blank"},_("View full size in another window")));return $addAfter(i,o.iframe),!1}},{key:"audioAttachment",value:function(e){var t,r=document.createElement("audio");r.controls=!1,r.src=e.file_url,r.volume=1,$AEV(r,"error",function(){r.error_loading=!0});var n=A({href:"#",c:"play_control"},svgs.get("sm1/audio_play.svg",{className:"icon_play"}),svgs.get("sm1/audio_stop.svg",{className:"icon_stop"})),o=A({href:e.file_url,target:"_blank",c:"audio_link"},svgs.get("sm1/link.svg")),a=DIV({c:"audio_player"},r,n,t=SPAN({c:"timer"},"00:00"),o),i=r.duration||e.file_duration;return i&&b.timerFormat(t,i),b.attach(n,r,t,function(e){"play"===e?$addClass(n,"on"):"stop"===e&&$removeClass(n,"on")}),a}}]),e}();t.exports=new E},{"../formatter/Formatter.js":22}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=e("../../utils/fp"),l=n(e("../../logger/Logger")),s=e("../../utils/Env"),u=n(e("react")),c=n(e("react-dom")),d=n(e("../../stores/store")),f=n(e("../../stores/subscribeSelected")),p=e("../../react_components/emptyState"),m=n(e("../items_utils/ItemDueDates")),h=e("../../reducers/notes"),y=e("../../utils/deps"),v=e("../../reducers/mainView"),g=e("../../react_components/confirm_dialog"),b=window.Signals,w=window.LibEdit,E=window.PlayManager,j=window.FilesManager,O=window.RecordManager,S=window.GFile,I=window.GFileView,k=window.GB_hide,T=window.GB_showHTML,C=window.GB_getLast,D=window.Indicator,M=window.IstButton,x=window.IstTooltip,R=window.DateUtils,N=window.ElementStore,L=window.Emoticons,U=window.TextAreaHolder,V=window.FocusElm,F=window.$isTouchDeviceOnly,H=e("../Constants.js"),q=e("../resizing_text_area/ResizingTextArea.js"),G=e("../items_utils/ItemCheckbox"),z=e("../agenda/AgendaUtils"),W=e("../project_editor/ProjectEditorManager"),Y=e("../projects_list/ProjectListUtils"),K=e("../avatars/Avatars"),J=e("../../plugin_version/ContentTransformers").ContentTransformers,Q=e("../formatter/Formatter.js"),X=e("../action_perfomed/ActionPerformed"),Z=e("../project_editor/ProjectExtraActions"),ee=e("../../models/TemporaryIds"),te=e("../../models/Collaborators"),re=e("../../models/ItemsModel"),ne=e("../../models/ProjectsModel"),oe=e("../../models/NotificationsModel"),ae=e("./WhoToNotify"),ie=e("./NoteMedia"),le=e("./NotesBuffer"),se=e("./NotesUtils"),ue=e("../../containers/premium_promo/PremiumOnlyModal"),ce=e("../misc/Misc.js").getMacAppVersion,de=e("../../menus/MenuReactions"),fe=window.DoistFormat,pe=e("../format_html/FormatHtml"),me=e("../themes/Themes"),he=(0,y.defineDeps)("Notes",["Agenda"]),_e={current_task:null,current_project:null,current_note:null,restore_project:null,restore_items:null,
init:function(){var e=this;$AEV(window,"load",function(){ee.listenAll(function(e,t){var r=$("note_"+e);r&&(r.id="note_"+t)})}),b.connect("notes_updated",function(e){if("play"==E.state)return void setTimeout(function(){b.sendSignal("notes_updated",e)},1e3);_e.current_task?$map(e,function(e){e.item_id==_e.current_task.id&&_e.renderNotes(_e.current_task,h.TYPE_ITEM_NOTE,_e.notes_list,_e.holder)}):_e.current_project&&$map(e,function(e){e.item_id||e.project_id!=_e.current_project.id||_e.renderNotes(_e.current_project,h.TYPE_PROJECT_NOTE,_e.notes_list,_e.holder)})}),b.connect("external_service_annotation",this.externalServicesAnnotation),b.connect("upload_error",function(e,t){var r=_e.current_task;if(r&&r.id==e.item_id)return!0;var n=_('Uploading "%s" failed.').replace("%s",t.file.name);(0,g.showConfirmDialog)({confirmLabel:_("View upload"),htmlMessage:n,onConfirm:function(){null===e.item_id||void 0===e.item_id?_e.showProjectNotes(e.project_id,e.id):_e.showItemNotes(e.item_id,e.id)}})}),b.connect("note_buffer_commit",function(e,t){var r=$("note_"+e.id);r&&$swap(r,_e.renderNote(t))}),b.connect("people_assigner_person_changed",function(){_e.current_task&&b.sendSignal("instant_refresh_interface")}),b.connect("reaction_added",this.reactionAddedMenu),(0,f.default)(d.default,function(e){return e.items},function(t){var r=$$(".note_item form").length>0;if(t&&e.current_task&&!r&&!he.Agenda.get().current_form){var n=t[e.current_task.id];n&&e.current_task!==n&&e.reRenderCurrentItem()}})},isReadOnly:function(){return _e.current_task?_e.current_task.is_archived:_e.current_project?_e.current_project.is_archived:void 0},annotate:function(e,t){var r=se.renderIcon(e,h.TYPE_ITEM_NOTE);$add(t,r)},showProjectNotes:function(e,t){if(!d.default.getState().notes){var r=(0,f.default)(d.default,function(e){return e.notes},function(n){n&&(_e.showProjectNotes(e,t),r())});return!1}if(_e.is_currently_in_edit())return _e.close_currently_edit(function(){_e.showProjectNotes(e,t)}),!1;var n=_e.openGBWindow(!0),o=ne.get(e);return t&&(_e.note_to_focus=t),o?_e.renderHolder(o,h.TYPE_PROJECT_NOTE,n):_e.renderProjectNotesAjax(n,e),!1},showItemNotes:function(e,t,r){if(!d.default.getState().notes){var n=(0,f.default)(d.default,function(e){return e.notes},function(o){o&&(_e.showItemNotes(e,t,r),n())});return!1}if(_e.is_currently_in_edit())return _e.close_currently_edit(function(){_e.showItemNotes(e,t,r)}),!1;var o,a=_e.openGBWindow(!1);return r&&(o=re.getBySyncId(r)),o||(o=re.getById(e)),t&&(_e.note_to_focus=t),o&&!o.in_history?_e.renderHolder(o,h.TYPE_ITEM_NOTE,a):_e.renderItemNotesAjax(a,e,r),!1},is_currently_in_edit:function(){return _e.current_task||_e.current_project||W.current_form},close_currently_edit:function(e){if(_e.current_task)return void k(function(){W.current_editor?W.current_editor.saveCurrentItem(e):e()});W.current_form&&W.current_editor&&W.current_editor.saveCurrentItem(e,!0)},openGBWindow:function(e){var t=e?_("Project Comments"):_("Comments"),r=document.title,n=_e.getDimension(),o=DIV({c:"notes_holder notes_loading"},D.cssSpinner());X.mark("Notes/open");var a=T(t,o,n.height,n.width,{close_validator_fn:function(){_e.clearEmpty();var e=$("note_textarea");if(!e)return!0;var t=function(){ae.reset(),_e.holder=null,_e.current_task=null,_e.current_project=null,_e.submit_fn=null,_e.attach_button=null,_e.files_view=null,j.reset(),O.reset(),E.reset(),document.title=r};return 0!==$strip(e.value).length?(k(null,!1),t(),!1):(t(),!0)}});return $addClass(a.g_window,"notes_gb_window"),o},renderProjectNotesAjax:function(e,t,r){d.default.dispatch((0,h.noteFetchFromProject)(t)).then(function(t){_e.current_project=t.project,_e.temp_project=t.project,_e.renderHolder(t.project,h.TYPE_PROJECT_NOTE,e),ne.get(_e.temp_project.id)&&b.sendSignal("instant_refresh_interface"),r&&r()}).catch(function(e){l.default.captureError(e),k(),(0,i.get)("error_tag",e)?alert(_("The project was not found, could be deleted or moved.")):alert(_("An unknown error happened")+". "+_("Please try again later. We're sorry for the trouble."))})},renderItemNotesAjax:function(e,t,r,n){var o=this;d.default.dispatch((0,h.noteFetchFromItem)(t,r)).then(function(t){if(null==t.item||null==t.project)return k(),void alert(_("This task couldn\u2019t be found. It may have been moved or deleted."));_e.current_project=t.project,_e.temp_project=t.project,_e.renderHolder(t.item,h.TYPE_ITEM_NOTE,e),ne.get(_e.temp_project.id)&&!o.isInSearchView()&&b.sendSignal("instant_refresh_interface"),$isFunction(n)&&n(t.item)}).catch(function(e){k(),l.default.captureError(e),(0,i.get)("error_tag",e)?alert(_("This task couldn\u2019t be found. It may have been moved or deleted.")):alert(_("An unknown error happened")+". "+_("Please try again later. We're sorry for the trouble."))})},renderHolder:function(e,t,r){var n,o,a;if(t===h.TYPE_ITEM_NOTE){var i=Q.format(e.content,{only_text:!0,as_html:!1});if(document.title=$strip(i)+": Todoist",b.sendSignal("change_location","task/"+e.id),_e.current_task=e,_e.current_project=_e.getProject(e.project_id),!_e.current_project)return void _e.renderProjectNotesAjax(r,e.project_id);a=DIV({c:"note_item"},UL({c:"items"},_e.renderItem(e)),_e.renderExtraItemInfo(e))}else{var l=Q.format(e.name,{only_text:!0,as_html:!1});document.title=$strip(l)+": Todoist",b.sendSignal("change_location","project_comments/"+e.id),_e.current_task=null,_e.current_project=e,a=DIV({c:"note_item"},_e.renderExtraProjectInfo(e))}var s=ae.render(e,t),u=M.createButton(_("Add Comment"),null,"red sel_submit_note",{"data-track":"comments|add_comment"}),c=te.isProjectShared(this.current_project.id),d=_e.renderTextareaHolder(!1),f=DIV({c:"notes_holder"},a,this.notes_list=o=DIV({c:"notes_list",id:"current_notes"}),DIV({c:"note_submit"},n=FORM(d.holder,DIV({c:"btn_area"},TABLE({width:"100%"},TBODY(TR(TD({width:"30%"},u),TD({s:"text-align: right"},s))))))));if($add(o,D.cssSpinner()),c&&$addClass(f,"notes_shared"),_e.isReadOnly())$addClass(f,"notes_readonly");else{var p=$p(_e.addNote,e,t,n);n.submit_fn=p,$AEV(n,"submit",p),$AEV(u,"click",p),_e.submit_fn=p}_e.holder=f,_e.externalServicesAnnotation(window.CURRENT_EXERNAL_SERVICE),$swap(r,f),_e.renderNotes(e,t,_e.notes_list,f);var m=$("note_textarea");return F()||setTimeout(function(){m.focus()},50),_e.attachNoteKeyboardShortcuts(m),!1},renderExtraProjectInfo:function(e){var t=DIV({c:"note_extra_info"});return $add(t,_e.renderProjectLink(e)),_e.renderNoteEmail(t,function(){return Z.showProjectCommentEmail(e.id),!1}),_e.renderNoteActivity(t,function(){return window.User.is_premium?(k(),d.default.dispatch((0,v.showActivityView)({projectId:e.id})),!1):(ue.showProjectActivityLog(),!1)}),t},renderExtraItemInfo:function(e){if(!e.date_added)return null;var t=DIV({c:"note_extra_info"});if(e.date_added){_e.resolveDate(e,"date_added");var r=SPAN(R.formatView(e.date_added)),n=function(e){var r=_e.renderProjectLink(e);$add(t,SPAN({c:"sep"}," \u2022 "),r)},o=this.current_project;if(o&&te.isProjectShared(o.id)){var a=te.getUserById(e.assigned_by_uid||e.user_id);if(a)if(null!=e.assigned_by_uid){var i=null==e.responsible_uid?_("Added by"):_("Assigned by"),l=SPAN(i," ",se.shortName(a));$add(t,l),x.showSimpleText(l,SPAN(_("Time added")," ",r));var s=K.renderAvatar(a,"small",me.theme);$ATT(l,s)}else x.showSimpleText(r,_("Time added")),$add(t,r);n(o)}else o&&(x.showSimpleText(r,_("Time added")),$add(t,r),n(o));_e.renderNoteEmail(t,function(){return Z.showItemEmail(e.id),!1}),_e.renderNoteActivity(t,function(){return window.User.is_premium?(k(),d.default.dispatch((0,v.showActivityView)({itemId:e.id})),!1):(ue.showTaskActivityLog(),!1)})}return t},renderNoteEmail:function(e,t){var r;$add(e,SPAN({c:"sep"}," \u2022 "),r=SPAN({c:"icon","data-track":"comments|add_comments_via_email"},svgs.get("sm1/mail.svg"))),r.onclick=t,x.showSimpleText(r,_("Add comments via email"))},renderNoteActivity:function(e,t){var r;$add(e,SPAN({c:"sep"}," \u2022 "),r=SPAN({c:"icon","data-track":"comments|view_activity_log"},svgs.get("sm1/activity_log.svg"))),r.onclick=t,x.showSimpleText(r,_("View activity log"))},reRenderCurrentItem:function(){if(this.current_task){var e=$$("li.task_item",_e.holder)[0];this.current_task=re.getById(this.current_task.id),$swap(e,_e.renderItem(this.current_task))}},renderItem:function(e){var t=z.renderItem(e,{with_due_date:!0,with_time:!1,no_drag_and_drop:!0,no_selecter_attach:!0,with_project:!1,not_editable:_e.isReadOnly(),fn_complete_item:this.completeItem,fn_undo_complete_item:this.uncompleteItem,is_note:!0});return $addClass(t,"note_task"),t},renderTextareaHolder:function(e){function t(){return!!window.User.is_premium||(ue.showSharedProjectFileUpload(),!1)}var r=_("Write a comment"),n=TEXTAREA({placeholder:r,id:"note_textarea"});e||le.initDraft(_e.getCurrentDraftId,n),new q(n,!1),_e.attachNoteKeyboardShortcuts(n);var o,a,i,l;e||(l=j.generateUploadView(),j.attachClipboardPasting(n),_e.files_view=l,o=M.createMiniButton(svgs.get("sm1/attachment.svg"),"upload_btn",{"data-track":"comments|attach_file"}),$AEV(o,"click",function(){return j.showDropArea(!0,{on_computer_click:function(e){if(t()||e.preventDefault(),-1!=navigator.userAgent.indexOf("Mac OS X 10_11")){var r=ce();if(r&&r>=6.4){e.preventDefault();var n=DIV(B(_("Select file from computer isn\u2019t working\u2026")),P(_("To upload files, please drag-and-drop them into your comment instead.")),P(_("Apple has fixed this issue in macOS 10.12. Apologies for the inconvenience!")));alert(n)}}}}),x.hide(),!1}),i=M.createMiniButton(svgs.get("sm1/microphone.svg"),"upload_btn",{"data-track":"comments|record"}),i.addEventListener("click",function(){if(!window.User.is_premium)return ue.showAudioRecording(),!1;O.show()}),a=this.attach_button=M.createMiniButton(svgs.get("sm1/ext_attachment.svg"),"attach_btn"),x.showSimpleText(a,function(){return a.tooltip_text},null,0,10)),s.isMacApp&&(i=null);var u=[o,i,a];u.push(L.getButton(n,null,null,{"data-track":"comments|add_emoji"}));var c=U.create({text_area:n,buttons:u});return e||($addAfter(l,n),j.setDropArea(l,c,function(){return t()})),{holder:c,textarea:n}},completeItem:function(e){re.complete(e.json),m.default.updateDueDate(e),_e._genericUpdateCheckbox(e,!0)},uncompleteItem:function(e){var t=e.json;e.json.in_history?re.unarchive(t):re.uncomplete(t),_e._genericUpdateCheckbox(e,!1);var r=$all("li","item_"+t.id);$map(r,function(e){$hasClass(e,"history_item")&&$remove(e)})},_genericUpdateCheckbox:function(e,t){G.update(e,t,function(){var r;r=t?$p(_e.completeItem,e):$p(_e.uncompleteItem,e),G.update(e,!t,r),m.default.updateDueDate(e)},!1),_e.getProject(e.json.project_id)&&!this.isInSearchView()&&b.sendSignal("instant_refresh_interface")},isInSearchView:function(){return $$(".search_holder").length>0},renderNote:function(e){var t=Q.format(e.content,{as_html:!0,attachment:e.file_attachment}),r=SPAN(svgs.get("sm1/trash.svg")),n=SPAN(svgs.get("sm1/edit.svg")),o=SPAN(svgs.get("sm1/emoji.svg"));x.showTooltip(r,_("Delete"),this.scrollOffset,5),x.showTooltip(n,_("Edit"),this.scrollOffset,5),x.showTooltip(o,_("Add reaction"),this.scrollOffset,5);var a="";e.posted instanceof Date&&(a=R.formatView(e.posted)),e.posted_uid||(e.posted_uid=window.User.id);var i=DIV({c:"note_actions force_form_show"});e.posted_uid==window.User.id&&(e.is_buffer_obj?$add(i,r," "):_e.isReadOnly()||$add(i,n," ",r," ")),$addClass(o,"menu_icon"),$add(i,o," "),$add(i,_e.usersNotified(e)," ");var l=SPAN({c:"time"},a);de.get().shown&&_e.current_note==e&&$addClass(i,l,"reactions_sticky");var s,u=DIV({c:"note_meta"},l,i),c=DIV({c:"note_text",id:"note_"+e.id},u,$setHTML(SPAN({c:"note_content"}),t));if(s=e.posted_uid==window.User.id?window.User:te.getUserById(e.posted_uid)){var d=K.renderAvatar(s,"medium",me.theme);$addClass(c,"has_avatar"),$ATT(c,d),$ATT(u,SPAN({c:"user_name"},se.shortName(s)))}else{var f=K.renderAnonymous("medium");$addClass(c,"has_avatar"),$ATT(c,f),$ATT(u,SPAN({c:"user_name"},_("Someone")))}var p=ie.render(e);p&&$add(c,p),$AEV(r,"click",$p(_e.deleteNote,e,c)),$AEV(n,"click",$p(_e.showEditNote,e,c)),$AEV(o,"click",function(t){track("comments","click","add_reaction"),_e.current_note=e;var r;x.hide(),r=de.get();var n=_e.scrollOffset();r.toggle(o,o,t,{pos_y_offset:n+10,arrow_y_offset:n+23,arrow_x_offset:3});var a=$("note_"+e.id);return $addClass($$(".note_actions",a),$$(".time",a),"reactions_sticky"),!1});var m=N.get(e,"file");if(e.is_buffer_obj&&m){$setOpacity(c,.6);var h=new I(m);$add(c,DIV({c:"files_view"},h.render(!1)))}var y=DIV({c:"reactions_line no_reactions",id:"reactions_"+e.id});return _e.renderReactions(e,y),$add(c,y),c},renderReactions:function(e,t){if(null!=e.reactions){$removeClass(t,"no_reactions");for(var r,n,o=window.User.id,a=Object.keys(e.reactions).sort(),i=0;i<a.length;i++)r=a[i],n=SPAN({c:"reaction_holder"}),$add(n,$setHTML(SPAN(),fe.formatSimple(r,{as_html:!0}))),$add(n,SPAN({c:"reactions_count"},e.reactions[r].length)),$add(t,n),x.showTooltip(n,function(e){return function(){var t=DIV({c:"people_holder reacted_people"});if($map(e,function(e){var r;if(r=e==o?window.User:te.getUserById(e)){var n=K.renderAvatar(r,"small",me.theme),a=DIV({c:"user"},n,SPAN(se.shortName(r)));$add(t,a,BR())}},0,Math.min(e.length,10)),e.length>10){var r=e.length-10,n=DIV({c:"user"});$add(n,pe.format(_("+ {count} others"),{count:r.toString()})),$add(t,n,BR())}return t}}(e.reactions[r]),this.scrollOffset,0),$isIn(o,e.reactions[r])?($addClass(n,"reacted"),$AEV(n,"click",$p(_e.reactionRemovedIcon,e,r))):$AEV(n,"click",$p(_e.reactionAddedIcon,e,r));var l=SPAN({c:"reaction_holder reaction_plus"},"+");return $addClass(l,"form_action_icon menu_icon"),$AEV(l,"click",function(t){_e.current_note=e;var r;x.hide(),r=de.get();var n=_e.scrollOffset();r.toggle(l,l,t,{pos_y_offset:n+13,arrow_y_offset:n+28,arrow_x_offset:8});var o=$("note_"+e.id);return $addClass($$(".note_actions",o),$$(".time",o),"reactions_sticky"),!1}),x.showTooltip(l,_("Add reaction"),this.scrollOffset,9),$add(t,l),t}},clearEmpty:function(){var e=$("current_notes");$gc(e,"div","empty-state")&&c.default.unmountComponentAtNode(e)},focusLatest:function(e){var t=$("current_notes");t&&(t.scrollTop=e.offsetTop)},usersNotified:function(e){var t=e.uids_to_notify;if(t&&t.length>0){var r=SPAN({c:"clickable"},svgs.get("sm1/bell.svg"));return x.showTooltip(r,function(){var e=DIV({c:"people_holder notified_people"},B(_("People notified")),BR());return $map(t,function(t){var r=te.getUserById(t);if(r){var n=K.renderAvatar(r,"small",me.theme),o=DIV({c:"user"},n,SPAN(se.shortName(r)));$add(e,o,BR())}}),e},this.scrollOffset,0),r}},showEditNote:function(e,t){track("comments","click","edit_previous_comment"),_e.current_note=e,_e.edit_note_saved=!1;var r,n=_e.getDimension();r=M.createButton(_("Update"),null,"red");var o,a=_e.renderTextareaHolder(!0);t=DIV({c:"note_submit note_edit"},o=FORM(a.holder,DIV({c:"btn_area"},r)));var i=$p(_e.saveNote,r,e,a.textarea);return o.submit_fn=i,$AEV(r,"click",i),a.textarea.value=e.content,T(_("Edit"),t,n.height,n.width,{close_validator_fn:function(){var t=a.textarea;return!t||(_e.edit_note_saved?(_e.edit_note_saved=!1,!0):t.value==e.content||((0,g.showConfirmDialog)({message:_("Are you sure you want to cancel your current input?"),confirmLabel:_("Yes"),cancelLabel:_("No"),onConfirm:function(){k(null,!1)},onCancel:function(){setTimeout(function(){t.focus()},1)}}),!1))}}),w.placeCursor(a.textarea,a.textarea.value.length),!1},saveNote:function(e,t,r){var n=$strip(r.value);if(""==n)return!1;$hide(e),$addAfter(D.cssSpinner(),e),d.default.dispatch((0,h.noteUpdate)(_e.current_note.id,n));var o,a=_e.current_note;if(a){a.content=n;var i=$("note_"+t.id);i&&(o=_e.renderNote(t),$addClass(o,"note_updated"),$swap(i,o))}return _e.edit_note_saved=!0,k(),!1},renderNotes:function(e,t,r,n){var o=(0,h.noteGetByParentIDSorted)(d.default.getState(),e.id,t);$replace(r,null);var a,i=_e.note_to_focus,l=_("Fetch older comments"),s=(0,h.hasMoreNotes)(d.default.getState(),e.id,t);if(0!==o.length||s){var f;if(s){var m;$add(r,m=A({c:"fetch_old",href:"#"},l)),$AEV(m,"click",function(){return $replace(m,D.cssSpinner()),t===h.TYPE_ITEM_NOTE?_e.renderItemNotesAjax(n,e.id,e.sync_id,function(){var e=$child(n,"div","note_text");e&&_e.focusLatest(e)}):_e.renderProjectNotesAjax(n,e.id,function(){var e=$child(n,"div","note_text");e&&_e.focusLatest(e)}),!1})}if($map(o,function(e){$add(r,f=_e.renderNote(e)),i&&e.id==i&&(a=f)}),setTimeout(function(){oe.markNotesAsRead(o)},200),a){_e.note_to_focus=null;var y=$("current_notes");y&&(y.scrollTop=a.offsetTop-120),$addClass(a,"note_added active"),setTimeout(function(){$removeClass(a,"active")},1500)}else 0!=_e.note_to_focus&&f&&_e.focusLatest(f)}else{var v=t===h.TYPE_ITEM_NOTE?u.default.createElement(p.EmptyStateTaskComments,null):u.default.createElement(p.EmptyStateProjectComments,null);c.default.render(v,r)}},addNote:function(e,t,r){if(t==h.TYPE_ITEM_NOTE&&!se.isPremium(e.project_id))return se.showPromo(h.TYPE_ITEM_NOTE),!1;if(t==h.TYPE_PROJECT_NOTE&&!se.isPremium(e.id))return se.showPromo(h.TYPE_PROJECT_NOTE),!1;var n=$child(r,"textarea"),o=$strip(n.value),a=j.getFiles(_e.files_view);if(0===o.length&&0===a.length)return!1;var i=null;_e.current_project&&te.isProjectShared(_e.current_project.id)&&(i=ae.getUidsToNotify());var l=le.addNotes(e.id,t,n.value,i,a);le.wipeDraft(_e.getCurrentDraftId,n),n.value="",F()?n.blur():n.focus(),_e.files_view&&j.resetView(_e.files_view),O.reset(),n.resize_textarea&&n.resize_textarea(),_e.clearEmpty();var s;return $map(l,function(e){s=_e.renderNote(e),$addClass(s,"note_added"),$add($("current_notes"),s)}),_e.focusLatest(s),b.sendSignal("instant_refresh_interface"),!1},deleteNote:function(e,t){return track("comments","click","delete_previous_comment"),(0,g.showConfirmDialog)({confirmLabel:_("Delete"),message:_("Are you sure you want to delete this?"),onConfirm:function(){_e.note_to_focus=!1,d.default.dispatch((0,h.noteRemove)(e.id)),$remove(t),b.sendSignal("instant_refresh_interface")}}),!1},getDimension:function(){var e=$winSize();return{width:Math.min(e.w-100,600),height:Math.min(e.h-30,560)}},resolveDate:function(e,t){if(!e[t])return null;e.ntime?e[t]=new Date(e.ntime):$isString(e[t])?e[t]=new Date(e[t]):e.ntime=e[t].getTime()},attachNoteKeyboardShortcuts:function(e){e.note_keys_attached||($AEV(e,"keydown",function(t){var r=$parent(e,"form"),n=$child(r,"a","ist_button_red");if(n&&setTimeout(function(){V.focus(n)},5),t.ctrl&&13==t.keyAscii)return r.submit_fn(),$preventDefault(t),!1}),e.note_keys_attached=!0)},externalServicesAnnotation:function(e){var t=_e.attach_button;if(e&&t){var r=e.annotate_fn;e.annotate_attach_text?t.tooltip_text=e.annotate_attach_text:e.is_email?t.tooltip_text=_("Attach email to comment"):t.tooltip_text=_("Attach website to comment"),t.onclick=function(){var e=new S,n=new TEXTAREA;r(n);var o,a=n.value,i=J.onContentSave(a),l=J.type;if("gmail_new"==l)o="td/gmail";else if("outlook"==l)o="td/outlook";else if("thunderbird"==l)o="td/thunderbird";else{o="td/hyperlink";var s=window.PluginVersion.getTitleAndUrl();a=s[0],i=s[1]}e.setUploadContent({file_url:i,file_name:a,file_type:o});var u=new I(e);return $add(_e.files_view,u.render()),x.hide(),$hide(t),setTimeout(function(){$show(t)},20),J.onContollerHide(),!1},$show(t)}else $hide(t)},getProject:function(e){var t=ne.get(e);if(t)return t;var r=_e.temp_project;return r&&r.id==e?r:void 0},getCurrentDraftId:function(){return _e.current_task?H.note_buffer_t_prefix+_e.current_task.id:H.note_buffer_p_prefix+_e.current_project.id},renderProjectLink:function(e){var t=Q.format(e.name,{only_text:!0}),r=$setHTML(A({c:"project_link",href:"#project/"+e.id}),t);return $AEV(r,"click",function(){var t=null;return _e.current_task&&(t=_e.current_task.id),k(),C()&&k(),Y.setCurrentById(e.id,t),!1}),r.id="notes_project_link",r},scrollOffset:function(){return-$("current_notes").scrollTop||0},reactionAddedMenu:function(e){de.get().hide();var t=de.getReactions()[e];d.default.dispatch((0,h.noteAddReaction)(_e.current_note.id,t));var r=(0,h.noteGetByID)(d.default.getState(),_e.current_note.id);_e.refreshReactions(o({},r,{id:_e.current_note.id}))},reactionAddedIcon:function(e,t){x.hide(),d.default.dispatch((0,h.noteAddReaction)(e.id,t));var r=(0,h.noteGetByID)(d.default.getState(),e.id);_e.refreshReactions(o({},r,{id:e.id}))},reactionRemovedIcon:function(e,t){x.hide(),d.default.dispatch((0,h.noteRemoveReaction)(e.id,t));var r=(0,h.noteGetByID)(d.default.getState(),e.id);_e.refreshReactions(o({},r,{id:e.id}))},refreshReactions:function(e){var t=$("reactions_"+e.id);if(t){var r=DIV({c:"reactions_line no_reactions",id:"reactions_"+e.id});_e.renderReactions(e,r),$swap(t,r)}}};window.Notes=_e,t.exports=_e},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../logger/Logger":129,"../../menus/MenuReactions":141,"../../models/Collaborators":148,"../../models/ItemsModel":155,"../../models/NotificationsModel":158,"../../models/ProjectsModel":159,"../../models/TemporaryIds":172,"../../plugin_version/ContentTransformers":641,"../../react_components/confirm_dialog":680,"../../react_components/emptyState":731,"../../reducers/mainView":1109,"../../reducers/notes":1114,"../../stores/store":1140,"../../stores/subscribeSelected":1141,"../../utils/Env":1144,"../../utils/deps":1154,"../../utils/fp":1166,"../Constants.js":1,"../action_perfomed/ActionPerformed":2,"../agenda/AgendaUtils":8,"../avatars/Avatars":17,"../format_html/FormatHtml":21,"../formatter/Formatter.js":22,"../items_utils/ItemCheckbox":29,"../items_utils/ItemDueDates":31,"../misc/Misc.js":42,"../project_editor/ProjectEditorManager":62,"../project_editor/ProjectExtraActions":64,"../projects_list/ProjectListUtils":72,"../resizing_text_area/ResizingTextArea.js":84,"../themes/Themes":95,"./NoteMedia":45,"./NotesBuffer":48,"./NotesUtils":49,"./WhoToNotify":50,react:"react","react-dom":"react-dom"}],47:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Signals,s=window,u=s.TooptipWin,c=function(){function e(){n(this,e),this.reset=this.reset.bind(this),this.getValue=this.getValue.bind(this)}return a(e,[{key:"reset",value:function(){this.current_note=""}},{key:"getValue",value:function(){return $strip(this.current_note)}},{key:"showTooltip",value:function(e){var t,r=this;if($isHidden(e))return!1;var n=DIV(t=TEXTAREA({placeholder:_("Write a comment")}));this.current_note&&(t.value=this.current_note),$AEV(t,"keyup",function(){r.current_note=t.value,r.current_note.length>0?$addClass(e,"active"):$removeClass(e,"active")}),$AEV(t,"keydown",function(e){e.ctrlKey&&13===e.keyCode&&r.win.hide()});var o=$position(e),a={fn_left_offset:function(){return o.x-255},fn_top_offset:function(){return o.y+35},fn_arrow_left:function(){return o.x+10},fixed_pos:$hasClass(e,"fixed_pos"),fn_on_hide:function(){l.sendSignal("focus_current_item_input")}};return this.win=u.show(_("Quick Comment"),n,210,300,a),$addClass(this.win.g_window,"notes_add_tooltip"),t.focus(),!1}}],[{key:"initClass",value:function(){this.prototype.current_note=""}}]),e}();c.initClass(),t.exports=new c},{}],48:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),l=e("../../reducers/notes"),s=window,u=s.Signals,c=window,d=c.ElementStore,f=e("../Constants.js"),p=e("../../models/Storage"),m=p.$storage,h=function(){function e(){n(this,e),this.getNoteUploads=this.getNoteUploads.bind(this),this.addNotes=this.addNotes.bind(this),this.fileStatusChange=this.fileStatusChange.bind(this),u.connect("resolve_temp.item",function(e,t){var r=m("".concat(f.note_buffer_t_prefix).concat(e)).get();r&&m("".concat(f.note_buffer_t_prefix).concat(t)).set(r)}),u.connect("resolve_temp.project",function(e,t){var r=m("".concat(f.note_buffer_p_prefix).concat(e)).get();r&&m("".concat(f.note_buffer_p_prefix).concat(t)).set(r)})}return a(e,null,[{key:"initClass",value:function(){this.prototype.note_uploads=[]}}]),a(e,[{key:"getNoteUploads",value:function(){return this.note_uploads}},{key:"addNotes",value:function(e,t,r,n,o){if(0===o.length)return[i.default.dispatch((0,l.noteAdd)({parentId:e,content:r,type:t,usersToNotify:n}))];for(var a=[];;){var s=o.shift();if(!s)break;0!==a.length&&(r="");var u=function(r,o){var a,s={};r.file_server_info?(s.file_server_info=r.file_server_info,a=!1):(s.file_server_info={file_name:r.file.name,file_type:r.file.type,file_size:r.file.size,upload_state:"pending"},a=!0);var u=i.default.dispatch((0,l.noteAdd)({parentId:e,content:o,type:t,usersToNotify:n,file:s}));return u.is_buffer_obj=a,d.set(u,"file",r),u}(s,r);this.note_uploads.push(u),s.addCallback($p(this.fileStatusChange,u)),a.push(u)}return a}},{key:"fileStatusChange",value:function(e,t){if(t.file)if(t.success){var r=e;if(!t.instant){var n=t.file_server_info;n.upload_state="completed",e=i.default.dispatch((0,l.noteUpdate)(e.id,null,n))}u.sendSignal("refresh_interface"),this.note_uploads=$arrayRemove(this.note_uploads,r),d.remove(e,"file"),e.is_buffer_obj&&delete e.is_buffer_obj}else u.sendSignal("upload_error",e,t);else this.note_uploads=$arrayRemove(this.note_uploads,e),d.remove(e,"file")}},{key:"initDraft",value:function(e,t){var r=m(e()).get();r&&(t.value=r),$AEV(t,"keyup",function(){$log("Storing in ".concat(e())),m(e()).set(t.value)})}},{key:"wipeDraft",value:function(e){m(e()).clear()}}]),e}();h.initClass(),t.exports=new h},{"../../models/Storage":167,"../../reducers/notes":1114,"../../stores/store":1140,"../Constants.js":1}],49:[function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),o=e("../../utils/deps"),a=e("../../reducers/notes"),i=e("../../reducers/detailView"),l=e("../../reducers/user"),s=e("../../reducers/items"),u=window,c=u.GB_hide,d=e("../../containers/premium_promo/PremiumOnlyModal"),f=e("../../models/Collaborators"),p=e("../misc/Misc.js"),m=p.isMacApp,h=(0,o.defineDeps)("NotesUtils",["Notes"]);r.show=function(e,t,r){return h.Notes.showItemNotes(e,t,r)},r.annotate=function(e,t){return h.Notes.annotate(e,t)},r.shortName=function(e){var t=e.full_name.split(" ");return t.length>1?t[0]+" "+t[1].substring(0,1)+".":t[0]};var _=r.showPromo=function(e){return e===a.TYPE_ITEM_NOTE?d.showTaskComment():d.showProjectComment(),!1},y=r.isPremium=function(e){return!!window.User.is_premium||(2===window.User.features.restriction||!(!e||!f.isProjectShared(e)))};r.renderIcon=function(e,t,r){var o=y(e.project_id||e.id);if(0===r&&m()&&!o)return null;e.notes&&$map(e.notes,function(e){n.default.dispatch((0,a.noteInsert)(e))});var u=(0,a.noteGetByParentID)(n.default.getState(),e.id,t);r||(r=u.length);var d=SPAN({c:"clickable note_icon","data-track":"comments|open"},svgs.get("sm1/comments.svg"));if(d.setAttribute("data-note-type",t),d.setAttribute("data-note-parent-id",e.id),d.setAttribute("data-track",t===a.TYPE_PROJECT_NOTE?"project|comments":"task|comments"),r>0){var f=SPAN({c:"clickable note_count sel_note_count"});r="".concat(r),e&&(0,a.hasMoreNotes)(n.default.getState(),e.id,t)&&(r+="+"),$setHTML(f,r),$add(d,f)}else t===a.TYPE_ITEM_NOTE&&$addClass(d,"note_icon_show_on_hover");return d.addEventListener("click",function(u){if(!u.ctrl){var d=n.default.getState();if(!u.altKey&&(0,l.isDoistUser)(d)){if(t===a.TYPE_ITEM_NOTE&&(0,s.itemGetByID)(d,e.id))return n.default.dispatch((0,i.detailViewShowItem)(e.id,{activeTab:"comments"})),void(u._propogated_from_note_icon=!0);if(t===a.TYPE_PROJECT_NOTE)return n.default.dispatch((0,i.detailViewShowProject)(e.id)),void(u._propogated_from_note_icon=!0)}if(r<=0&&!o)return c(),void _(t);t===a.TYPE_ITEM_NOTE?h.Notes.showItemNotes(e.id,null,e.sync_id):h.Notes.showProjectNotes(e.id),u._propogated_from_note_icon=!0}}),d}},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/Collaborators":148,"../../reducers/detailView":1092,"../../reducers/items":1100,"../../reducers/notes":1114,"../../reducers/user":1135,"../../stores/store":1140,"../../utils/deps":1154,"../misc/Misc.js":42}],50:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),l=e("../../reducers/notes"),s=e("../../models/Collaborators"),u=e("../avatars/Avatars"),c=e("../notes/NotesUtils"),d=e("../themes/Themes"),f=function(){function e(){n(this,e),this.reset=this.reset.bind(this),this.is_project_note=this.is_project_note.bind(this),this.current_project_id=this.current_project_id.bind(this),this.render=this.render.bind(this),this.getUidsToNotify=this.getUidsToNotify.bind(this),this.renderCheckmarkSelector=this.renderCheckmarkSelector.bind(this),this.setInitialSelected=this.setInitialSelected.bind(this),this.reRender=this.reRender.bind(this),this.renderMultiSelecter=this.renderMultiSelecter.bind(this)}return a(e,[{key:"reset",value:function(){this.task=null,this.project=null,this.note_type=null,this.other_collaborators=null,this.thread_uids=null,this.current_selected=null,this.holder=null}},{key:"is_project_note",value:function(){return this.note_type===l.TYPE_PROJECT_NOTE}},{key:"current_project_id",value:function(){return this.is_project_note()?this.project.id:this.task.project_id}},{key:"render",value:function(e,t){this.reset(),this.note_type=t,this.note_type===l.TYPE_PROJECT_NOTE?this.project=e:this.task=e;var r=(0,l.noteGetByParentIDSorted)(i.default.getState(),e.id,t),n=window.User.id;this.other_collaborators=s.getAll(this.current_project_id()).filter(function(e){return e.id!==n}),this.thread_uids={};var o=!0,a=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var f=c.value;f.posted_uid!==n&&(this.thread_uids[f.posted_uid]=f.posted_uid)}}catch(e){a=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw u}}return this.holder=DIV({c:"who_to_notify"}),this.setInitialSelected(r),1===this.other_collaborators.length?$add(this.holder,this.renderCheckmarkSelector()):this.other_collaborators.length>1&&$add(this.holder,this.renderMultiSelecter()),this.holder}},{key:"getUidsToNotify",value:function(){return $values(this.current_selected)}},{key:"renderCheckmarkSelector",value:function(){var e=this,t=this.other_collaborators[0],r=t.full_name.split(" ")[0],n=LABEL({for:"notify_person"},_("Notify %s about my comment").replace("%s",r)),o=INPUT({type:"checkbox",value:"notify_person",id:"notify_person"});return this.current_selected[t.id]&&(o.checked=!0),$AEV(o,"change",function(){o.checked?(track("comments","click","notify_collaborators_on"),e.current_selected[t.id]=t.id):(track("comments","click","notify_collaborators_off"),delete e.current_selected[t.id])}),SPAN(o,n)}},{key:"setInitialSelected",value:function(e){var t=this,r=window.User.id;this.current_selected={};var n=function(e){var n=t.other_collaborators.map(function(e){return e.id});e&&e!==r&&n.includes(e)&&(t.current_selected[e]=e)};if(0!==e.length){var o=$last(e);n(o.posted_uid);var a=o.uids_to_notify;if(a){$isString(a)&&(a=$eval(a));var i=!0,l=!1,s=void 0;try{for(var u,c=a[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){n(u.value)}}catch(e){l=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}}}else if(this.is_project_note()){var d=!0,f=!1,p=void 0;try{
for(var m,h=this.other_collaborators[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var _=m.value;n(_.id)}}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}}else n(this.task.assigned_by_uid),n(this.task.responsible_uid)}},{key:"reRender",value:function(){this.getUidsToNotify().length>0?track("comments","click","notify_collaborators_on"):track("comments","click","notify_collaborators_off");var e=this.mutli_selecter,t=this.renderMultiSelecter();$swap(e,t)}},{key:"renderMultiSelecter",value:function(){var e,t,r,n,o,a=this,i=$values(this.current_selected);if(0===i.length)r=_("Notify <b>Nobody</b> about my comment");else if(i.length===this.other_collaborators.length)r=_("Notify <b>Everybody</b> about my comment");else if(1===i.length){n=s.getUserById(i[0]);var l=c.shortName(n);r=_("Notify <b>%s</b> about my comment").replace("%s",l)}else r=_("Notify <b>%s people</b> about my comment").replace("%s",i.length),o=!0;var f=A({href:"#",c:"change"},_("Change"));$AEV(f,"click",function(){return $addClass(a.holder,"expanded"),!1});var p=LABEL({for:"notify_toggle"},_("Notify the following people"),":"),m=INPUT({type:"checkbox",value:"notify_toggle",id:"notify_toggle"});i.length>0&&(m.checked=!0),$AEV(m,"change",function(){if($keys(a.current_selected).length===a.other_collaborators.length)a.current_selected={};else{var e=!0,t=!1,r=void 0;try{for(var o,i=a.other_collaborators[Symbol.iterator]();!(e=(o=i.next()).done);e=!0)n=o.value,a.current_selected[n.id]=n.id}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}a.reRender()});var h=DIV({c:"people people_holder"}),y=!0,v=!1,g=void 0;try{for(var b,w=this.other_collaborators[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){n=b.value;var E,j="notify_".concat(n.id),O=u.renderAvatar(n,"small",d.theme),S=LABEL(O,SPAN({c:"truncated"},c.shortName(n))),P=INPUT({type:"checkbox",value:j}),I=function(e,t){a.current_selected[t]?delete a.current_selected[t]:a.current_selected[t]=t,a.reRender()};this.current_selected[n.id]&&(P.checked=!0),$add(h,E=DIV({c:"user"},P,S));var k=$p(I,P,n.id);$AEV(E,"click",k)}}catch(e){v=!0,g=e}finally{try{y||null==w.return||w.return()}finally{if(v)throw g}}var T=DIV({c:"selecter"},SPAN({c:"top_selecter"},m,p),h),C=DIV({c:"save_holder"},t=A({href:"#"},_("Hide")));$AEV(t,"click",function(){return $removeClass(a.holder,"expanded"),!1});var D=$setHTML(SPAN({c:"desc_text"}),r);if(o){var M=$gc(D,"b");IstTooltip.showTooltip(M,function(){var e=UL({c:"who_to_notify_tooltip"}),t=!0,r=!1,n=void 0;try{for(var o,a=i[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,f=s.getUserById(l);f&&$add(e,LI(u.renderAvatar(f,"small",d.theme),SPAN({c:"truncated"},c.shortName(f))))}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e})}return this.mutli_selecter=e=DIV({c:"mutli_selecter"},C,D,f,T),e}}]),e}();t.exports=new f},{"../../models/Collaborators":148,"../../reducers/notes":1114,"../../stores/store":1140,"../avatars/Avatars":17,"../notes/NotesUtils":49,"../themes/Themes":95}],51:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=e("../../utils"),p=n(e("react")),m=n(e("react-dom")),h=e("../../react_components/emptyState"),y=n(e("../../stores/store")),v=e("../../reducers/user"),g=e("../../reducers/detailView"),b=e("../../reducers/items"),w=window,E=w.Signals,j=window,O=j.IstTooltip,S=window,P=S.ForcedScroll,I=window,k=I.Indicator,T=window,C=T.TooptipWin,D=window,M=D.GB_hide,x=window,R=x.DoistFormat,N=window,L=N.format,U=window,B=(U.$static_path,U.DateUtils),V=e("../avatars/Avatars"),F=e("../notes/Notes.js"),H=e("../projects_list/ProjectListUtils"),q=e("../../react_components/karma_promotion"),G=e("../themes/Themes"),z=e("../Constants.js"),W=e("../../models/NotificationsModel"),Y=e("../../models/Collaborators"),K=e("../../models/ProjectsModel"),J=e("../formatter/Formatter.js"),Q=function(){function e(t){var r=this;s(this,e),d(this,"_ns",function(e,t,n){var o=1===r.allUsers().length?e:t;return(0,f.format)(o,n)}),this.showIndicator=this.showIndicator.bind(this),this.hideIndicator=this.hideIndicator.bind(this),this.createCollapseTaskItem=this.createCollapseTaskItem.bind(this),this.createCollapseNoteItem=this.createCollapseNoteItem.bind(this),this.onlyText=this.onlyText.bind(this),this.markBoxRead=this.markBoxRead.bind(this),this.markItemRead=this.markItemRead.bind(this),this.markBoxUnread=this.markBoxUnread.bind(this),this.isBoxUnread=this.isBoxUnread.bind(this),this.render=this.render.bind(this),this.notification_type=t.notification_type,this.notifications=[t]}return c(e,[{key:"push",value:function(e){if(e.notification_type!==this.notification_type)throw new Error("Programming error: Cannot push notification of different type");return this.notifications.push(e),this.notifications.sort(function(e,t){return t.id-e.id})}},{key:"sortKey",value:function(){return this.notifications[0].id}},{key:"isAggregated",value:function(){return this.notifications.length>1}},{key:"count",value:function(){return this.notifications.length}},{key:"timeString",value:function(){return B.prettyDate(this.notifications[0].created)}},{key:"allUsers",value:function(){var e=[],t=[],r=!0,n=!1,o=void 0;try{for(var a,i=this.notifications[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,s=Y.getUserById(l.from_uid);s||(s=l.from_user),s&&!t.includes(s.id)&&(e.push(s),t.push(s.id))}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}},{key:"hasMultipleUsers",value:function(){return this.allUsers().length>1}},{key:"subject",value:function(){var e=this.allUsers();return 1===e.length?"<b>".concat($xssStrip(e[0].full_name),"</b>"):2===e.length?L(_("<b>%s</b> and <b>%s</b>"),$xssStrip(e[0].full_name),$xssStrip(e[1].full_name)):3===e.length?L(_("<b>%s</b>, <b>%s</b> and <b>%d</b> other"),$xssStrip(e[0].full_name),$xssStrip(e[1].full_name),e.length-2):e.length>=4?L(_("<b>%s</b>, <b>%s</b> and <b>%d</b> others"),$xssStrip(e[0].full_name),$xssStrip(e[1].full_name),e.length-2):"X"}},{key:"genericAccept",value:function(e,t,r,n,o){var a,i,l,s,u=this,c=$setHTML(SPAN(),t),d=DIV({c:"actions"},a=A({href:"#",c:"accept"},_("Accept")),s=A({href:"#",c:"reject"},svgs.get("sm1/close_tiny.svg")));return $AEV(a,"click",function(){return u.showIndicator(d),i=function(){return o()},l=function(e){return alert(e),u.hideIndicator(d)},r(e,i,l),!1}),$AEV(s,"click",function(){return O.hide(),u.showIndicator(d),i=function(){return $remove($parent(d,"li"))},l=function(e){return alert(e),u.hideIndicator(d)},n(e,i,l),!1}),O.showSimpleText(s,_("Reject"),null,0,10),[c,d]}},{key:"showIndicator",value:function(e){return $hide($all("a",null,e)),k.addToElm(e)}},{key:"hideIndicator",value:function(e){return k.removeFromElm(e),$show($all("a",null,e))}},{key:"createCollapseTaskItem",value:function(e){var t=this,r=DIV({c:"collapsed_list_item"},this.onlyText(e.item_content));return e.is_unread&&$addClass(r,"unread"),$AEV(r,"click",function(n){t.markItemRead(e,r);var o=y.default.getState();return(0,v.isDoistUser)(o)&&(0,b.itemGetByID)(o,e.item_id)?(M(),y.default.dispatch((0,g.detailViewShowItem)(e.item_id))):F.showItemNotes(e.item_id),n.stopPropagation(),!1}),r}},{key:"createCollapseNoteItem",value:function(e){var t,r=this,n=Y.getUserById(e.from_uid),o=J.format(e.note_content);if(o=o.replace(/^\*\s+/g,""),this.hasMultipleUsers()&&n&&n.full_name){var a=$strip(n.full_name).split(" ");t=$setHTML(DIV({c:"collapsed_list_item"}),"<b>".concat(a[0],":</b> ").concat(this.onlyText(o)))}else t=$setHTML(DIV({c:"collapsed_list_item"}),"".concat(this.onlyText(o)));e.is_unread&&$addClass(t,"unread");var i=null===e.item_id;return $AEV(t,"click",function(t){r.markBoxRead();var n=y.default.getState();return i?(0,v.isDoistUser)(n)?(M(),y.default.dispatch((0,g.detailViewShowProject)(e.project_id,{activeTab:"comments",highlightedNoteId:e.note_id}))):F.showProjectNotes(e.project_id,e.note_id):(0,v.isDoistUser)(n)&&(0,b.itemGetByID)(n,e.item_id)?(M(),y.default.dispatch((0,g.detailViewShowItem)(e.item_id,{activeTab:"comments",highlightedNoteId:e.note_id}))):F.showItemNotes(e.item_id,e.note_id),t.stopPropagation(),!1}),t}},{key:"onlyText",value:function(e){return R.formatSimple(e,{only_text:!0,as_html:!1,cache_prefix:"noti:"})}},{key:"markBoxRead",value:function(){var e=this.notifications.map(function(e){return e.id}),t=!0,r=!1,n=void 0;try{for(var o,a=this.notifications[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.is_unread=0}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var i=$("noti_".concat(this.notifications[0].notification_key));return i&&($removeClass(i,"unread"),$removeClass($$(".collapsed_list_item",i),"unread"),$replace($$(".unread_icon_wrap",i)[0],svgs.get("sm1/notification_read.svg"))),W.markRead(e)}},{key:"markItemRead",value:function(e,t){e.is_unread=0,$removeClass(t,"unread");var r=!0,n=!0,o=!1,a=void 0;try{for(var i,l=this.notifications[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){if(1===i.value.is_unread){r=!1;break}}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}if(r){var s=$("noti_".concat(this.notifications[0].notification_key));s&&($removeClass(s,"unread"),$replace($$(".unread_icon_wrap",s)[0],svgs.get("sm1/notification_read.svg")))}return W.markRead([e.id])}},{key:"markBoxUnread",value:function(){var e=this.notifications.map(function(e){return e.id}),t=!0,r=!1,n=void 0;try{for(var o,a=this.notifications[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.is_unread=1}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}var i=$("noti_".concat(this.notifications[0].notification_key));return i&&($hasClass(i,"unread")||($addClass(i,"unread"),$addClass($$(".collapsed_list_item",i),"unread")),$replace($$(".unread_icon_wrap",i)[0],svgs.get("sm1/notification_unread.svg"))),W.markUnread(e)}},{key:"isBoxUnread",value:function(){var e;return e=1,this.notifications.map(function(e){return e.is_unread}).includes(e)}},{key:"render",value:function(){var e,t,r,n,a,i,l,s,u,c=this,d=arguments.length>0&&void 0!==arguments[0]&&arguments[0],p=this.notifications[0],m=Y.getUserById(p.from_uid),h=p.notification_type;if(m||(m=p.from_user),!m)if(-1!==h.indexOf("biz_"))m={};else{if(-1===h.indexOf("karma_"))return;m={}}e=m.full_name?V.renderAvatar(m,"medium",G.theme):null;var w=null,E=null,j=null,S=null,P=!1,I=!1,k=!1,T=!1;!1===d&&(a=LI(),a.id="noti_".concat(p.notification_key),this.isAggregated()&&$addClass(a,"collapsible_box"));var C=p.project_name,D=m.full_name;D="<b>".concat($xssStrip(D),"</b>"),C="<b>".concat($xssStrip(C),"</b>");var A=null,x="",R=null,N=null;if("note_added"===h){if(N=svgs.get("sm1/notification_commented.svg"),p.item_id)A=this._ns(_n("{user} added a comment to {task}","{user} added {n} comments to {task}",this.count()),_n("{multiple} added a comment to {task}","{multiple} added {n} comments to {task}",this.count()),{user:this.subject(),multiple:this.subject(),n:this.count(),task:"<b>"+this.onlyText(p.item_content)+"</b>"});else{var $=K.get(p.project_id);A=this._ns(_n("{user} added a project comment to {project}","{user} added {n} project comments to {project}",this.count()),_n("{multiple} added a project comment to {project}","{multiple} added {n} project comments to {project}",this.count()),{user:this.subject(),multiple:this.subject(),n:this.count(),project:$?"<b>"+this.onlyText($.name)+"</b>":_("a shared project")})}if(p.note_content&&(R=this.onlyText(p.note_content)),null!==this.notifications[0].item_id?j=!0:S=!0,!1===d)if(this.isAggregated()){T=!0,x=$setHTML(DIV(),A),t=DIV({c:"collapsed_list"});var U=!0,B=!1,z=void 0;try{for(var J,Q=this.notifications[Symbol.iterator]();!(U=(J=Q.next()).done);U=!0)l=J.value,i=this.createCollapseNoteItem(l),$add(t,i)}catch(e){B=!0,z=e}finally{try{U||null==Q.return||Q.return()}finally{if(B)throw z}}$add(x,t)}else x=$setHTML(SPAN(),A+"<br>"),p.note_content&&$add(x,DIV({c:"desc"},"\u201c".concat(this.onlyText(p.note_content),"\u201d")))}else if(-1!==h.indexOf("item_")){var X=null,ee=K.get(p.project_id);if("item_assigned"===h?(N=svgs.get("sm1/notification_assigned.svg"),A=this._ns(_n("{user} assigned a task in {project}","{user} assigned {n} tasks in {project}",this.count()),_n("{multiple} assigned a task in {project}","{multiple} assigned {n} tasks in {project}",this.count()),{user:this.subject(),multiple:this.subject(),n:this.count(),project:ee?"<b>"+this.onlyText(ee.name)+"</b>":_("a shared project")}),this.isAggregated()?E=p.project_id:j=!0):"item_completed"===h?(N=svgs.get("sm1/notification_completed.svg"),A=this._ns(_n("{user} completed a task in {project}","{user} completed {n} tasks in {project}",this.count()),_n("{multiple} completed a task in {project}","{multiple} completed {n} tasks in {project}",this.count()),{user:this.subject(),multiple:this.subject(),n:this.count(),project:ee?"<b>"+this.onlyText(ee.name)+"</b>":_("a shared project")}),this.isAggregated()?E=p.project_id:j=!0,X="completed"):"item_uncompleted"===h&&(N=svgs.get("sm1/notification_uncompleted.svg"),A=this._ns(_n("{user} uncompleted a task in {project}","{user} uncompleted {n} tasks in {project}",this.count()),_n("{multiple} uncompleted a task in {project}","{multiple} uncompleted {n} tasks in {project}",this.count()),{user:this.subject(),multiple:this.subject(),n:this.count(),project:ee?"<b>"+this.onlyText(ee.name)+"</b>":_("a shared project")}),this.isAggregated()?E=p.project_id:j=!0),p.item_content&&(R=this.onlyText(p.item_content)),!1===d)if(this.isAggregated()){T=!0,x=$setHTML(DIV(),A),t=DIV({c:"collapsed_list"});var te=!0,re=!1,ne=void 0;try{for(var oe,ae=this.notifications[Symbol.iterator]();!(te=(oe=ae.next()).done);te=!0)l=oe.value,i=this.createCollapseTaskItem(l),X&&$addClass(i,X),$add(t,i)}catch(e){re=!0,ne=e}finally{try{te||null==ae.return||ae.return()}finally{if(re)throw ne}}$add(x,t)}else if(x=$setHTML(SPAN(),A),p.item_content){var ie;$add(x,BR(),ie=DIV({c:"desc"},this.onlyText(p.item_content))),X&&$addClass(ie,X)}}else if("share_invitation_sent"===h){if("accepted"===p.state)e=V.renderAvatar(window.User,"medium",G.theme),A=(0,f.format)(_("You joined {project}"),{project:C}),E=p.project_id,!1===d&&(x=$setHTML(SPAN(),A));else if("rejected"===p.state)e=V.renderAvatar(window.User,"medium",G.theme),A=(0,f.format)(_("You declined invitation from {user} to {project}"),{user:m,project:C}),E=null,!1===d&&(x=$setHTML(SPAN(),A));else if(A=(0,f.format)(_("{user} invited you to {project}"),{user:D,project:C}),!1===d){s=function(){var e=(0,f.format)(_("Start collaborating on {project}"),{project:C}),t=$$(".text_holder",a)[0];return $replace(t,DIV({c:"accepted"},_("Invitation accepted!"),BR(),$setHTML(SPAN(),e),u)),$AEV(a,"click",function(){M();var e=null,t=!0,r=!1,n=void 0;try{for(var o,a=K.getAll()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)if(C=o.value,C.name===p.name){e=C.id;break}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e&&H.setCurrentById(e),!1})};var le=Array.from(this.genericAccept(p,A,W.acceptInvitation,W.rejectInvitation,s)),se=o(le,2);x=se[0],w=se[1]}}else if("share_invitation_accepted"===h)A=this._ns(_("{user} joined {project}"),_("{multiple} joined {project}"),{user:this.subject(),multiple:this.subject(),project:C}),N=svgs.get("sm1/notification_user_added.svg"),E=p.project_id,!1===d&&(x=$setHTML(SPAN(),A));else if("share_invitation_rejected"===h)A=(0,f.format)(_("{user} rejected your invitation to {project}"),{user:D,project:C}),N=svgs.get("sm1/notification_user_removed.svg"),E=p.project_id,!1===d&&(x=$setHTML(SPAN(),A));else if("user_left_project"===h)A=this._ns(_("{user} left {project}"),_("{multiple} left {project}"),{user:this.subject(),multiple:this.subject(),project:C}),N=svgs.get("sm1/notification_user_removed.svg"),E=p.project_id,!1===d&&(x=$setHTML(SPAN(),A));else if("user_removed_from_project"===h){if(N=svgs.get("sm1/notification_user_removed.svg"),p.removed_uid===window.User.id)A=(0,f.format)(_("{user} removed you from {project}"),{user:D,project:C});else{var ue=Y.getUserById(p.removed_uid)||{},ce=ue.full_name||"";ce=ce.split(" ")[0],A=(0,f.format)(_("{user} removed {user_2} from {project}"),{user:D,user_2:ce,project:C})}E=p.project_id,!1===d&&(x=$setHTML(SPAN(),A))}else if("owner_left_project"===h)N=svgs.get("sm1/notification_user_removed.svg"),A=(0,f.format)(_("{user} (owner) left {project}"),{user:D,project:C}),E=p.project_id,!1===d&&(x=$setHTML(SPAN(),A));else if("karma_level"===h)n=p.karma_level,A=x=function(){switch(n){case 1:return _("Your journey towards higher productivity begins today! You're now a Todoist Karma Novice.");case 2:return _("Congrats! Reaching 2,500 points makes you a Todoist Karma Intermediate.");case 3:return _("You're a Pro! High five on reaching the Professional level of Todoist Karma!");case 4:return _("Pat yourself on the back\u2013 you're now an impressive Todoist Karma Expert!");case 5:return _("Outstanding work! Achieving 10,000 points makes you a Todoist Karma Master.");case 6:return _("One more level to go! You're now a revered Todoist Karma Grand Master!");case 7:return _("You did it! With over 50,000 points you've reached the top\u2013 Todoist Karma Enlightenment!")}}(),k=!0,!1===d&&(r=Z(n),e=SPAN({c:"karma-icon"},r));else if("biz_invitation_created"===h)if("invited"===p.state){if(s=function(){return $swap(a,a=LI({c:"accepted"},_("Invitation accepted!")))},A=(0,f.format)(_("{user} invited you to the {team_name} account"),{user:D,team_name:p.account_name}),A=_("Todoist Business")+": "+A,!1===d){var de=Array.from(this.genericAccept(p,A,W.acceptInvitationBiz,W.rejectInvitationBiz,s)),fe=o(de,2);x=fe[0],w=fe[1]}}else"accepted"===p.state?(e=null,A=(0,f.format)(_("You joined the {team_name} account"),{team_name:p.account_name}),A=_("Todoist Business")+": "+A,!1===d&&(x=$setHTML(SPAN(),A))):(e=null,A=(0,f.format)(_("You rejected invitation from {user} to the {team_name} account"),{user:D,team_name:p.account_name}),A=_("Todoist Business")+": "+A,!1===d&&(x=$setHTML(SPAN(),A)));else"biz_invitation_accepted"===h?(N=svgs.get("sm1/notification_user_added.svg"),A=(0,f.format)(_("{user} joined the {team_name} account"),{user:D,team_name:p.account_name}),A=_("Todoist Business")+": "+A,P=!0,!1===d&&(x=$setHTML(SPAN(),A))):"biz_invitation_rejected"===h?(N=svgs.get("sm1/notification_user_removed.svg"),A=(0,f.format)(_("{user} rejected your invitation to the {team_name} account"),{user:D,team_name:p.account_name}),A=_("Todoist Business")+": "+A,P=!0,!1===d&&(x=$setHTML(SPAN(),A))):"biz_policy_disallowed_invitation"===h?(A=L(_("Team's permission settings don't allow you to share projects outside of your team. Add %s to your team or change the permission settings"),D),A=_("Todoist Business")+": "+A,E=p.project_id,!1===d&&(x=$setHTML(SPAN(),A))):"biz_policy_rejected_invitation"===h?(A=L(_("Team's permission don't allow user to join projects outside of their team. Ask %s to add yourself to their team or to change the permission settings"),D),A=_("Todoist Business")+": "+A,E=p.project_id,!1===d&&(x=$setHTML(SPAN(),A))):"biz_trial_will_end"===h?(A=_("This is a reminder that your trial will end in a few days. At that time, we will process your first payment to ensure uninterrupted service."),A=_("Todoist Business")+": "+A,I=!0,!1===d&&(x=$setHTML(SPAN(),A))):"biz_trial_enter_cc"===h?(N=svgs.get("sm1/notification_payment.svg"),A=_("This is a reminder that your trial will end in a few days. Update your credit card information to keep using our service."),A=_("Todoist Business")+": "+A,I=!0,!1===d&&(x=$setHTML(SPAN(),A))):"biz_payment_failed"===h?(N=svgs.get("sm1/notification_payment.svg"),A=_("We failed to charge you. Please review and update your credit card information to avoid any disruption in service."),A=_("Todoist Business")+": "+A,I=!0,!1===d&&(x=$setHTML(SPAN(),A))):"biz_account_disabled"===h&&(A=_("Your business account was disabled. Upgrade now to continue using account."),A=_("Todoist Business")+": "+A,I=!0,!1===d&&(x=$setHTML(SPAN(),A)));var pe=null,me=null;if(E)pe=function(){return M(),T?c.markBoxRead():c.markItemRead(p,i),H.setCurrentById(E),!1},me={text:_("View"),action:"view_project",project_id:E,put_in_focus:!0};else if(S){var he=this.notifications[0].note_id;pe=function(){return T?c.markBoxRead():c.markItemRead(p,i),F.showProjectNotes(p.project_id,he),!1},me={text:_("View"),action:"view_project_note",project_id:p.project_id,note_id:he,put_in_focus:!0}}else j?(pe=function(){T?c.markBoxRead():c.markItemRead(p,i);var e=y.default.getState();return(0,v.isDoistUser)(e)&&(0,b.itemGetByID)(e,p.item_id)?(M(),y.default.dispatch((0,g.detailViewShowItem)(p.item_id,{activeTab:"comments",highlightedNoteId:p.note_id}))):F.showItemNotes(p.item_id,p.note_id),!1},me={text:_("View"),action:"view_task",item_id:p.item_id,note_id:p.note_id,put_in_focus:!0}):P?(pe=function(){return window.open("/business/users"),!1},me={text:_("View"),action:"view_business_users"}):I?(pe=function(){return window.open("/business/accountAndBilling"),!1},me={text:_("View"),action:"view_business_billing"}):k&&(pe=function(){return q.show(n,p),!1},me={text:_("View"),action:"view_karma"});if(d)return[m,A,R,pe,me];$addClass(N,"type_icon"),$add(a,DIV({c:"left_container","data-track":"navigation|nofications_single_notification"},DIV({c:"avatar_holder"},e,N),DIV({c:"text_holder"},x,w,u=DIV({c:"time_holder"},this.timeString()))));var _e=DIV({c:"right_container"});if(T){var ye=DIV({c:"collapse_icon_wrap"},svgs.get("sm1/caret.svg"));$AEV(ye,"click",function(e){return $hasClass(a,"is_uncollapsed")?(track("navigation","click","notifications_expand_collapsed"),$removeClass(a,"is_uncollapsed")):$addClass(a,"is_uncollapsed"),e.stopPropagation(),!1}),$add(_e,ye)}r=this.isBoxUnread()?svgs.get("sm1/notification_unread.svg"):svgs.get("sm1/notification_read.svg");var ve=DIV({c:"unread_icon_wrap fixed_pos"},r);return O.showTooltip(ve,function(){return c.isBoxUnread()?_("Mark as Read"):_("Mark as Unread")},function(){return-($gp(ve,"div","GB_iframe_html").scrollTop-50)},5,null,!0),$AEV(ve,"click",function(e){return O.hide(),c.isBoxUnread()?(track("navigation","click","notifications_mark_as_read"),c.markBoxRead()):(track("navigation","click","notifications_mark_as_unread"),c.markBoxUnread()),e.stopPropagation(),!1}),$add(_e,ve),$add(a,_e),pe&&$AEV(a,"click",pe),w&&$addClass(a,"has_actions"),this.isBoxUnread()&&$addClass(a,"unread"),a}},{key:"isMultiUser",get:function(){return this.allUsers().legnth>1}}]),e}(),X=function(){function e(){var t=this;s(this,e),this._renderImageCount=this._renderImageCount.bind(this),this.updateIcon=this.updateIcon.bind(this),this.showDropdown=this.showDropdown.bind(this),this.markRead=this.markRead.bind(this),this.markUnread=this.markUnread.bind(this),this.markReadAll=this.markReadAll.bind(this),this.fetchData=this.fetchData.bind(this),this.aggregated=this.aggregated.bind(this),this.renderNotifications=this.renderNotifications.bind(this),this.renderNotification=this.renderNotification.bind(this),E.connect("notifications_updated",function(){return t.updateIcon(W.getUnreadCount())}),E.connect("theme_changed",function(){return t.updateIcon(W.getUnreadCount())}),E.connect("noti_updated",function(e){if(0===e.is_unread){var t=$("noti_".concat(e.notification_key));if(t&&$hasClass(t,"unread"))return $removeClass(t,"unread")}})}return c(e,[{key:"renderIcon",value:function(){var e=this,t=this._renderImageCount(null),r=SPAN({id:"notifications_counter"},t);return $AEV(r,"click",function(){return track("navigation","click","notifications"),e.updateIcon(0),e.showDropdown(r)}),r}},{key:"_renderImageCount",value:function(e){return e>0?svgs.get("sm1/notifications_unread.svg"):svgs.get("sm1/notifications.svg")}},{key:"updateIcon",value:function(e){var t=this,r=$("notifications_counter");return!r||this.cur_window?this.timeout=setTimeout(function(){return t.timeout=null,t.updateIcon(e)},500):$replace(r,this._renderImageCount(e))}},{key:"showDropdown",value:function(e){var t=this,r=W.getNotifications(),n={no_side_padding:!0,fn_left_offset:function(){return $position(e).x-340},fn_top_offset:function(){return z.top_bar.top_offset_full},fn_arrow_left:function(){return $position(e).x+9},fn_on_hide:function(){return t.empty_state_holder&&(m.default.unmountComponentAtNode(t.empty_state_holder),t.empty_state_holder=null),t.cur_window=null,P.removeListener()},fixed_pos:!0,show_close_img:!1,show_custom_text:r.length>0?A({c:"mark_all_as_read","data-track":"navigation|notifications_mark_all_as_read"},_("Mark all as Read")):"",show_custom_fn:$p(this.markReadAll)},o=DIV({id:"notifications_holder"},DIV({c:"indicator"},k.cssSpinner()));return $AEV(o,"scroll",function(){return O.hide()}),P.attachListener(o,"notifications"),this.cur_window=C.show(_("Notifications"),o,200,390,n),$addClass(this.cur_window.g_window,"notifications"),this.fetchData(o,r)}},{key:"markRead",value:function(e){var t=$("noti_".concat(e.notification_key));if(t&&$hasClass(t,"unread"))return $removeClass(t,"unread")}},{key:"markUnread",value:function(e){var t=$("noti_".concat(e.notification_key));if(t&&!$hasClass(t,"unread"))return $addClass(t,"unread")}},{key:"markReadAll",value:function(){$removeClass($$(".collapsed_list_item"),"unread");var e=!0,t=!1,r=void 0;try{for(var n,o=$$(".unread_icon_wrap")[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;$replace(a,svgs.get("sm1/notification_read.svg"))}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return $removeClass($$("li"),"unread"),W.markReadAll()}},{key:"fetchData",value:function(e,t){var r=$first(t);r&&W.markAsRead(r);var n=!1,o=!0,a=!1,i=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;if(Date.now()/1e3-u.created<=7776e3){n=!0;break}}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}if(0!==t.length&&n)this.renderNotifications(e,t);else{var c;c="https://d3ptyyxy2at9ui.cloudfront.net/no_notifications-983e96.png";var d=IMG({src:c,width:150,height:250,c:"illustration"});if(0!==Y.getCount())return $removeClass(e,"no_scrollbar"),$replace(e,CENTER(DIV({c:"empty"},d,H3(_("No recent notifications")),DIV({c:"final"},_("There hasn\u2019t been any activity in your shared projects recently.")))));$addClass(e,"no_scrollbar"),m.default.render(p.default.createElement(h.EmptyStateNotifications,null),e),this.empty_state_holder=e}}},{key:"aggregated",value:function(e){var t={},r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l,s=a.value,u=Math.floor(s.created/14400);if(["item_completed","item_uncompleted","item_assigned"].includes(s.notification_type))l="".concat(s.notification_type,":").concat(s.project_id,":").concat(s.from_uid,":").concat(u);else if(["share_invitation_accepted","user_left_project"].includes(s.notification_type))l="".concat(s.notification_type,":").concat(s.project_id,":").concat(u);else if("note_added"===s.notification_type){var c=null===s.item_id;l=c?"project_note_added:".concat(s.project_id,":").concat(u):"item_note_added:".concat(s.item_id,":").concat(u)}else l=s.id;void 0===t[l]?t[l]=new Q(s):t[l].push(s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}var d=[];for(var f in t){var p=t[f];d.push(p)}return d.sort(function(e,t){return t.sortKey()-e.sortKey()}),d}},{key:"renderNotifications",value:function(e,t){$remove($all("div","indicator",e)),$("more_button_noti")&&$remove($("more_button_noti"));var r=this.aggregated(t),n=UL(),o=!0,a=!1,i=void 0;try{for(var l,s=r[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;$add(n,u.render(!1))}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return $add(e,n)}},{key:"renderNotification",value:function(e){return new Q(e).render(!0)}}]),e}(),Z=function(e){switch(e){case 1:return svgs.get("sm1/karma_1.svg");case 2:return svgs.get("sm1/karma_2.svg");case 3:return svgs.get("sm1/karma_3.svg");case 4:return svgs.get("sm1/karma_4.svg");case 5:return svgs.get("sm1/karma_5.svg");case 6:return svgs.get("sm1/karma_6.svg");case 7:return svgs.get("sm1/karma_7.svg")}};t.exports=new X},{"../../models/Collaborators":148,"../../models/NotificationsModel":158,"../../models/ProjectsModel":159,"../../react_components/emptyState":731,"../../react_components/karma_promotion":895,"../../reducers/detailView":1092,"../../reducers/items":1100,"../../reducers/user":1135,"../../stores/store":1140,"../../utils":1176,"../Constants.js":1,"../avatars/Avatars":17,"../formatter/Formatter.js":22,"../notes/Notes.js":46,"../projects_list/ProjectListUtils":72,"../themes/Themes":95,react:"react","react-dom":"react-dom"}],52:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.enableCompleteAnimation=r.isCompleteAnimationInProgress=r.showFirstCompleteAnimation=r.isFirstCompleteAction=r.showCompleteTaskTooltipIfNeeded=void 0;var o,a=n(e("../../stores/store")),i=e("../../reducers/tooltip"),l=n(e("../../utils/format")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../logger/Logger")),u=n(e("../opener/WindowOpener.js")),c=e("../../reducers/user"),d=n(e("../../models/ItemsModel")),f=function(e){var t=(_("Mark tasks complete every day to reach Todoist Zero and boost your {link_tag_start}Karma{link_tag_end} points."),(0,l.default)(_("Mark tasks completed every day to reach Todoist Zero and boost your {link_tag_start}Karma{link_tag_end} points."),{link_tag_start:'<a id="karma_info_link">',link_tag_end:"</a>"})),r=DIV({c:"onboarding_tooltip"});$setHTML(r,t);var n=TooptipWin.show(_("Is this done?"),r,300,350,{fn_left_offset:function(){return $position(e).x-40},fn_arrow_left:function(){return $position(e).x+2},fn_top_offset:function(){return $position(e).y+50},close_validator_fn:function(){return!0},fixed_pos:!0});$AEV($$("#karma_info_link",r),"click",function(){u.default.showKarmaInfo(),n.hide()}),$fx.fadeIn(r)},p=function e(){try{var t=(0,c.daysSinceJoin)(a.default.getState());if(t<1||t>7||(0,i.hasSeen)(i.TOOLTIP_COMPLETE_FIRST_TASK,a.default.getState())||d.default.getTotalCompletedCount()>0)return;if(!$isShown($("app_holder"))&&!o)return void(o=setTimeout(e,1e3));if(!$isShown($("app_holder"))||$$("#GB_window .timezone_alert").length>0)return o&&clearTimeout(o),void(o=setTimeout(e,1e3));if($$(".onboarding_tooltip").length>0)return;var r=$$("#editor ul.items li.task_item:not(.reorder_item)");if(0==r.length)return;f(r[0]),a.default.dispatch((0,i.markSeen)(i.TOOLTIP_COMPLETE_FIRST_TASK))}catch(e){s.captureError(e)}};r.showCompleteTaskTooltipIfNeeded=p;var m=!1,h=!1,y=function(){return!(m||(0,i.hasSeen)(i.TOOLTIP_FIRST_TASK_COMPLETED,a.default.getState())||d.default.getTotalCompletedCount()>0)&&(a.default.dispatch((0,i.markSeen)(i.TOOLTIP_FIRST_TASK_COMPLETED)),m=!0,!0)}
;r.isFirstCompleteAction=y;var v=function(e,t){try{var r=document.createElement("div");r.innerHTML=w;var n=DIV({c:"onboarding_complete_overlay"},DIV({c:"grey_background"}),DIV({c:"maincontent"},r,P(_("You completed your first task. Nice work! \ud83d\ude4c"))),DIV({c:"white_block"}));$setStyle(e,{position:"relative"}),$add(e,n),h=!0,setTimeout(function(){h=!1,t&&t()},2e3)}catch(e){h=!1,t()}};r.showFirstCompleteAnimation=v;var g=function(){return h};r.isCompleteAnimationInProgress=g;var b=function(){m=!1};r.enableCompleteAnimation=b;var w='<svg width="30px" height="30px" viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> \x3c!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch --\x3e <title>ist_checkbox_on</title> <desc>Created with Sketch.</desc> <defs></defs> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="ist_checkbox_on" fill-rule="nonzero" fill="#6B6B6B"> <g transform="translate(5.000000, 7.000000)" id="Shape"> <path d="M17.6416667,0.6 C18.4416667,1.325 19.2166667,2.06666667 20,2.80833333 C16.05,6.96666667 11.9416667,11.0166667 7.825,15.0166667 C5.51666667,12.65 3.16666667,10.3166667 0.816666667,7.99166667 C1.6,7.2 2.38333333,6.40833333 3.16666667,5.61666667 C4.71666667,7.15 6.275,8.675 7.775,10.2666667 C11.225,7.225 14.2916667,3.75 17.6416667,0.6 Z"></path> </g> </g> </g> </svg>',E={showCompleteTaskTooltipIfNeeded:p,isFirstCompleteAction:y,showFirstCompleteAnimation:v,isCompleteAnimationInProgress:g,enableCompleteAnimation:b};r.default=E},{"../../logger/Logger":129,"../../models/ItemsModel":155,"../../reducers/tooltip":1133,"../../reducers/user":1135,"../../stores/store":1140,"../../utils/format":1162,"../opener/WindowOpener.js":53}],53:[function(e,t,r){"use strict";var n=window.GB_show,o={en:"https://get.todoist.help/hc/en-us/articles/205063212",de:"https://get.todoist.help/hc/de/articles/205063212",es:"https://get.todoist.help/hc/es/articles/205063212",fr:"https://get.todoist.help/hc/fr/articles/205063212",it:"https://get.todoist.help/hc/fr/articles/205063212",ja:"https://get.todoist.help/hc/ja/articles/205063212",ko:"https://get.todoist.help/hc/ko/articles/205063212",pl:"https://get.todoist.help/hc/pl/articles/205063212",pt_BR:"https://get.todoist.help/hc/pt-br/articles/205063212",pt_PT:"https://get.todoist.help/hc/pt-br/articles/205063212",ru:"https://get.todoist.help/hc/ru/articles/205063212",zh_TW:"https://get.todoist.help/hc/zh-tw/articles/205063212",zh_CN:"https://get.todoist.help/hc/zh-cn/articles/205063212"},a={showKeyboardShortcuts:function(){return window.open(o[window.LANG]||"/Help/KeyboardShortcuts"),!1},showPrefs:function(e){if(!navigator.onLine)return void alert(window.getOfflineMessage({status:-1}));var t="/prefs/";return t+=e||"account",window.location=t,!1},showKarmaInfo:function(){return n(_("More about Todoist Karma"),"/Karma/showInfo",550,500)}};t.exports=a},{}],54:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){var e=5-parseInt($queryArgument("priority")||4),t=$urldecode($queryArgument("content")||""),r=$urldecode($queryArgument("date")||""),n={content:t,priority:e};if(r){var o=DateUtils.parse(r);n.due=u.default.fromDateist(o)}var a=DIV(),i=new s.default({item:n,holder:a,withQuickNote:(0,c.isPremium)(d.default.getState()),onSubmit:function(){l(a,i)}});return i.show(),a}function l(e,t){var r=o({},t.getResultItem());if(!r||""==r.content)return t.focusInput();r.project_id||(r.project_id=window.User.inbox_project),track("task_form","click","quick_task_add"),r.item_order=parseInt((new Date).getTime()/1e3);var n=p.add(r);y.reminders.length>0&&y.commitBuffered(n);var a="https://todoist.com/app#project/"+n.project_id,i=h.get(n.project_id)||h.getInbox(),l=A({c:"action",href:a,target:"_blank"},i.name),s=_("Task successfully added to"),u=A({href:a,c:"ist_button ist_button_red"},_("Close"));$AEV(u,"click",function(){top.postMessage(JSON.stringify({type:"todoist_close_window"}),"*"),window.close()}),$replace($("editor"),DIV(CENTER(f.cssSpinner()))),t.remove();var c={onSuccess:function(){$queryArgument("no_chrome")?(top.postMessage(JSON.stringify({type:"todoist_close_window"}),"*"),$replace($("editor"),null)):$replace($("editor"),DIV(H2({c:"section_header"},_("Quick Add Task")),DIV({c:"confirm"},s," ",l,DIV(u))))}};return m.sync(c,!0),!1}var s=n(e("../../react_components/item_editor/ItemEditorLegacyWrapper")),u=n(e("../../models/DateExt")),c=e("../../reducers/user"),d=n(e("../../stores/store")),f=window.Indicator,p=e("../../models/ItemsModel"),m=e("../../models/SyncEngine"),h=e("../../models/ProjectsModel"),y=e("../../models/Reminders").BufferedRemindersModel,v=!1;r.isShown=function(){return v},r.show=function(){v=!0,$remove($("loading"));var e=i();$replace($("editor"),DIV(H2({c:"section_header"},_("Quick Add Task")),e))}},{"../../models/DateExt":152,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/Reminders":161,"../../models/SyncEngine":169,"../../react_components/item_editor/ItemEditorLegacyWrapper":863,"../../reducers/user":1135,"../../stores/store":1140}],55:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.IstTooltip,s=window,u=s.IstCompleteSelect,c=window,d=c.GB_hide,f=e("../../models/Collaborators"),p=e("../notes/NotesUtils"),m=e("../avatars/Avatars"),h=e("../richtext_editor/NatrualLanguageParsing"),y=e("../themes/Themes"),v=function(){function e(t){n(this,e),this.render=this.render.bind(this),this.isShown=this.isShown.bind(this),this.onProjectUpdated=this.onProjectUpdated.bind(this),this.showTooltip=this.showTooltip.bind(this),this.opts=t,t.responsible_uid&&(this.responsible_uid=t.responsible_uid),t.orginal_project_id||(t.orginal_project_id=t.project_id),t.left_offset||(t.left_offset=205)}return a(e,[{key:"render",value:function(){var e,t,r=this;this.opts.unassigned_icon_disable?this.avatar=null:this.avatar=SPAN({c:"form_action_icon menu_icon"},svgs.get("sm1/add_member_small.svg"));var n=DIV(B(_("Assign to someone")),BR(),_("Select by typing +")),o=this.opts.tooltip_txt?SPAN(this.opts.tooltip_txt):n;if(this.responsible_uid){var a;if(e=2,a=this.responsible_uid===window.User.id?window.User:f.getUserById(this.responsible_uid)){this.avatar=m.renderAvatar(a,"small",y.theme);var i=this.opts.tooltip_txt_selected||_("Assigned to");if(o=SPAN(i+" ",B(p.shortName(a))),a.id===window.User.id){t=(this.opts.me_str||_x("task_assignment","Me"))+" ("+a.full_name.split(" ")[0]+")"}else t=a.full_name}}else e=8,t=this.opts.unassigned_txt||_("Unassigned");if($addClass(this.avatar,"assign_icon"),null!=this.opts.show_name?(this.icon=SPAN({c:"svg_select_arrow"},svgs.get("sm1/caret.svg")),this.user_select=A({href:"#",c:"user_select_item"},this.icon,this.avatar,SPAN({c:"truncated u_name"},t))):(this.icon=this.avatar,this.user_select=this.avatar),l.showTooltip(this.user_select,o,4,e),!window.PRINT_MODE){var s=function(e){return e.stopPropagation(),$addClass(r.user_select,"always_show"),r.showTooltip(),!1};$AEV(this.user_select,"click",s)}return this.opts.never_hide||f.isProjectShared(this.opts.project_id)||$hide(this.user_select),this.user_select}},{key:"isShown",value:function(){return $isShown(this.icon)}},{key:"onProjectUpdated",value:function(e){this.opts.project_id,this.responsible_uid=void 0,this.opts.project_id=e||this.opts.orginal_project_id,$swap(this.icon,this.render())}},{key:"showTooltip",value:function(){var e=this,t={collection:function(){var t,r=[];if(!1!==e.opts.support_unassigned){var n={name:e.opts.unassigned_txt||_("Unassigned"),id:null,email:""};n.full_name=n.name,r.push(n)}t=$isArray(e.opts.project_id)?e.opts.project_id:[e.opts.project_id];var o=!0,a=!1,i=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,c=!0,d=!1,p=void 0;try{for(var m,h=f.getAll(u)[Symbol.iterator]();!(c=(m=h.next()).done);c=!0){var y=m.value,v={};$update(v,y),-1===$index(y,r,function(e){return e.id===y.id})&&(v.id===window.User.id?v.name=_x("task_assignment","Me")+" ("+y.full_name.split(" ")[0]+")":v.name=y.full_name,r.push(v))}}catch(e){d=!0,p=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw p}}}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return r},filterItem:function(t,r){var n;return null===(null!=t?t.id:void 0)?(e.opts.unassigned_icon_disable?e.avatar=null:e.avatar=svgs.get("sm1/add_member_small.svg"),n=SPAN({c:"name_email"},t.full_name)):(n=$setHTML(SPAN({c:"name_email truncated"}),r),e.avatar=m.renderAvatar(t,"small",y.theme)),DIV(DIV({c:"ist_complete_icon"},e.avatar),DIV({c:"ist_complete_content"},n))},onSelect:function(t){if(e.responsible_uid=t.id,e.responsible_uid=null!=t?t.id:void 0,$isFunction(e.opts.fn_on_select)&&e.opts.fn_on_select(t.id),$swap(e.user_select,e.render()),d(),e.opts.onExitFocus)e.opts.onExitFocus();else{var r=$parent(e.user_select,"form");if(r){h.setCurrentPerson(null);var n=$gc(r,null,"richtext_editor");n.onchanged(),n.proxyFocus(!0)}}},wildcard_match:!0,placeholder:this.opts.placeholder_txt||""},r=new u(t),n=r.showTooltip({title:this.opts.title_txt||_("Assign a person"),icon:this.icon,top_offset:27,left_offset:this.opts.left_offset,arrow_left_offset:this.opts.arrow_left_offset,fn_on_hide:function(){r=null}});$addClass(n.g_window,"person_selecter")}}]),e}();t.exports=v},{"../../models/Collaborators":148,"../avatars/Avatars":17,"../notes/NotesUtils":49,"../richtext_editor/NatrualLanguageParsing":85,"../themes/Themes":95}],56:[function(e,t,r){"use strict";var n=e("../../utils/deps"),o=e("../richtext_editor/NatrualLanguageParsing"),a=e("../project_editor/ProjectEditorManager"),i=e("../notes/NotesUtils"),l=e("../avatars/Avatars"),s=e("../../models/ProjectsModel"),u=e("../../models/Collaborators"),c=e("../themes/Themes"),d=(0,n.defineDeps)("PeopleAutoComplete",["Agenda"]),f={annotateFormArea:function(e){IstComplete.attach(e,{trigger:"+",collection:function(){return f.getCompletionPeople()},filterItem:function(e){if(!e)return null;var t=l.renderAvatar(e,"medium",c.theme),r=SPAN({c:"collaborator_name"},e.name);return DIV(DIV({c:"ist_complete_icon"},t),DIV({c:"ist_complete_content"},r))},onNoMatches:function(){return IstComplete.hide(),!1},position_item:$parent(e,"td","text_box_holder"),extra_width:1,support_paste:!1,wildcard_match:!0,preOnSelect:function(e){var t=e.completion_item;o.setCurrentPerson(t.id,"+"+t.name)}}),$AEV(e,"keydown",function(e){if((13==e.keyAscii&&!e.shift||27==e.keyAscii)&&IstComplete.isShown())return!1})},getCompletionProjectId:function(){var e,t=o.highlight_project;if(t){var r=s.get(t[0]);r&&r.shared&&(e=r.id)}else{var n=a.getCurrentEditor();if(n)e=n.project_id;else{var i=d.Agenda.get();if(i.current_form){e=i.current_form[1].people_assigner.opts.project_id}}var l=s.get(e);e=l&&l.shared?l.id:null}return e},getCompletionPeople:function(){var e=[],t=f.getCompletionProjectId();if(t){var r=u.getAll(t);$map(r,function(t){var r={};$update(r,t),r.name=i.shortName(r),r.name||(r.name=r.email),r.name=r.name.replace(/[_*!]+/g,""),e.push(r)})}return e}};t.exports=f},{"../../models/Collaborators":148,"../../models/ProjectsModel":159,"../../utils/deps":1154,"../avatars/Avatars":17,"../notes/NotesUtils":49,"../project_editor/ProjectEditorManager":62,"../richtext_editor/NatrualLanguageParsing":85,"../themes/Themes":95}],57:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.IstCompleteSelect,s=window,u=s.GB_hide,c=e("../../models/Collaborators"),d=e("../avatars/Avatars"),f=e("../themes/Themes"),p=function(){function e(){n(this,e),this.showTooltip=this.showTooltip.bind(this)}return a(e,[{key:"showTooltip",value:function(e,t){var r=this;t.orginal_project_id=t.project_id;var n={collection:function(){var e,r=[];if(!1!==t.support_unassigned){var n={name:t.unassigned_txt||_("Unassigned"),id:null,email:""};n.full_name=n.name,r.push(n)}e=$isArray(t.project_id)?t.project_id:[t.project_id];var o=!0,a=!1,i=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,d=!0,f=!1,p=void 0;try{for(var m,h=c.getAll(u)[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var y=m.value,v={};$update(v,y),-1===$index(y,r,function(e){return e.id===y.id})&&(v.id===window.User.id?v.name=_("Me")+" ("+y.full_name.split(" ")[0]+")":v.name=y.full_name,r.push(v))}}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return r},filterItem:function(e,n){var o;return null===(null!=e?e.id:void 0)?(t.unassigned_icon_disable?r.avatar=null:r.avatar=svgs.get("sm1/add_member_small.svg"),o=SPAN({c:"name_email"},e.full_name)):(o=$setHTML(SPAN({c:"name_email truncated"}),n),r.avatar=d.renderAvatar(e,"small",f.theme)),DIV(DIV({c:"ist_complete_icon"},r.avatar),DIV({c:"ist_complete_content"},o))},onSelect:function(e){$isFunction(t.fn_on_select)&&t.fn_on_select(e.id),u()},wildcard_match:!0,placeholder:t.placeholder_txt||""},o=new l(n),a=o.showTooltip({title:t.title_txt||_("Assign a person"),icon:e,top_offset:t.top_offset,left_offset:t.left_offset,arrow_left_offset:t.arrow_left_offset,fn_on_hide:function(){o=null}});$addClass(a.g_window,"person_selecter")}}]),e}();t.exports=p},{"../../models/Collaborators":148,"../avatars/Avatars":17,"../themes/Themes":95}],58:[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var l=window,s=l.Signals,u=window,c=u.IstTooltip,d=e("../../models/ItemsModel"),f=function(){function e(){o(this,e),this.postPoneUpdate=this.postPoneUpdate.bind(this)}return i(e,[{key:"postPoneUpdate",value:function(e){return this.postPoneModel(e),c.hide(),s.sendSignal("instant_refresh_interface"),!1}},{key:"getPostponeDate",value:function(e){var t=e.due;if(!t)throw"Cannot getPostponeDate() with item with no due date";var r=t.postpone();if("END_REACHED"===r)return{new_due:r,formated_due:""};var n=DateistDateHelpers.day_diff(new Date,r);return{new_due:r,formated_due:DateUtils.humanizeDayDiff(n,r)}}},{key:"postPoneModel",value:function(e){if(!e.due)throw"Cannot getPostponeDate() with item with no due date";try{var t=this.getPostponeDate(e),r=t.new_due;"END_REACHED"==r&&d.complete(e.id,!0),d.updateDue(n({},e.id,r))}catch(e){alert("".concat(e))}}}]),e}();t.exports=new f},{"../../models/ItemsModel":155}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={render:function(e){var t=e.onClick,r=e.text,n=BUTTON({c:"hover_action_button",type:"button"},r);return n.json={},n.onclick=t,n}},o=n;r.default=o},{}],60:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return u(e)||s(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./SectionList")),d=e("../../utils/fp"),f=n(e("react")),p=n(e("react-dom")),m=n(e("../../components/projects_list/ProjectArchive")),h=e("../../reducers/mainView"),y=e("../../react_components/emptyState"),v=e("../../reducers/tooltip"),g=e("../../reducers/stats"),b=n(e("../../stores/store")),w=e("../../reducers/notes"),E=n(e("./HoverActionButton")),j=e("../../reducers/user"),O=e("../../reducers/archived"),S=window.ElementStore,P=window.Indicator,I=window.IstTooltip,k=window.IstCheckbox,T=e("../projects_list/ProjectListUtils"),C=e("../notes/Notes.js"),D=e("../notes/NotesUtils"),M=e("../labels/Labels.js"),x=e("../project_editor/ProjectEditorManager"),R=e("../project_editor/ProjectEditorDragAndDropFiles"),N=e("../agenda/AgendaUtils"),L=e("../left_menu/LeftMenu"),U=e("../sharing/SharingManager"),B=e("../action_perfomed/ActionPerformed"),V=e("../items_utils/ItemCheckbox"),F=e("../generic_manager/GenericManager.js"),H=e("../generic_manager/GenericManagerUtils.js"),q=e("../generic_manager/GenericArrows.js"),G=e("../formatter/Formatter.js"),z=e("../../models/TemporaryIds"),W=e("../../models/ProjectsModel"),Y=e("../../models/SectionsModel").default,K=e("../../models/ItemsModel"),J=e("../../models/Collaborators"),Q=e("../../models/SyncEngine"),X=e("../../menus/MenuProjectGear.js"),Z=e("../../menus/MenuProjectEditor.js"),ee=e("../../menus/MenuPriorities"),te=e("../../menus/MenuReactions"),re=e("./ProjectEditorUtils"),ne={init:function(){X.init(x),Z.init(x),ee.init(x),te.init(x),z.listenAll(function(e,t){var r="item_"+t,n="item_"+e,o=$(n);o&&(o.id=r,$removeClass(o,n),$addClass(o,r));var a=x.getEditorById(e);a&&(a.project_id=t,$values(a.section_list_by_sid).forEach(function(e){e.project_id=t})),x.current_project_id==e&&(x.current_project_id=t)})}},oe=F.extend({initWithData:function(e){var t={list_class:"ProjectEditor",data_model:K,max_indent:5,arrows:new q({data_model:K}),state_manager:x,empty_text:_("This project has no tasks. Add some now!")};t.arrows.setList(this),this.parent(t),this.project_id=e,this.current_limit=0,this.history_fetch_count=0,this.menu=Z.get(),this.current_add_section_li=null,this.section_list_by_sid={},this.editor_instance_div=null,this.list_editor=null,$bindMethods(this)},remove:function(){this.editor_instance_div&&(this.removeEditorContent(),$remove(this.editor_instance_div),S.remove(this.editor_instance_div))},removeEditorContent:function(){$replace(this.list_editor,null),this.current_list=null},isArchived:function(){var e=W.get(this.project_id);return!e||e.is_archived},showProject:function(){N.reset();var e=$("editor");this.list_editor=DIV({c:"list_editor"}),$add(e,this.editor_instance_div=DIV({c:"project_editor_instance","data-project-id":this.project_id},this.list_editor)),S.set(this.editor_instance_div,"editor",this),x.current_project_id==this.project_id&&$addClass(this.editor_instance_div,"current_editor"),x.attachMouseMove(this),R.attach(this),this.renderEditorContent(),T.flashItemIfNeeded(),L.hide();var t=W.get(this.project_id);window.User.karma>=100&&t&&!t.inbox_project&&U.promoCheck()},setTopSectionAsCurrent:function(){var e=this.section_list_by_sid[null];x.setCurrentSectionList(e)},renderEditorContent:function(){var e=this;if(this.current_list=UL({c:"section_list"}),this.isArchived()){var t=P.ringSpinner();return $add(this.list_editor,t),void W.fetchArchivedProject(this.project_id).then(function(r){var n=W.get(e.project_id);$add(e.list_editor,e.renderProjectHeader(n),e.current_list),$remove(t),W.archivedFeteched(r.project);var o=e.renderSectionItem(null,r.items);$add(e.current_list,o)}).catch(function(e){e instanceof Response?404==e.status?alert(_("Project not found")):e.json().then(function(e){return alert(e.error)}):alert(e.message)})}var r=W.get(this.project_id);$add(this.list_editor,this.renderProjectHeader(r),this.current_list);var n=K.itemGetSectionGroups(this.project_id);[null].concat(i(Y.getByPID(this.project_id).map(function(e){return e.id}))).forEach(function(t,r){var o=n[t],a=e.renderSectionItem(t,o);if($add(e.current_list,a),(0,j.isDoistUser)(b.default.getState())){var i=e.renderHoverActionButton(a,r);$add(a,i)}}),this.history_editor||this.renderHistoryEditor(),this.checkEmpty()},renderSectionItem:function(e,t){var r=this,n=new c.default;return n.initWithData({section_id:e,project_id:this.project_id,items:t,on_show_add_item:function(){r.clearEmptyStateIfNeeded()},on_add_form_cancel:function(){r.checkEmpty()}}),this.section_list_by_sid[e]=n,n.render()},renderProjectHeader:function(e){var t=re.generateLink(e);this.project_header_link=t;var r=HEADER({c:"view_header"},H1(t),this.renderHeaderActions(e));return this.isArchived()&&$add(t,SMALL(_("Archived"))),r},renderHistoryEditor:function(){this.fetch_history=A({href:"#",c:"action"},_("Fetch more"),"..."),$AEV(this.fetch_history,["click","touchstart"],this.getMoreHistory),this.current_his_list=UL({c:"items project_history"}),this.history_controller=DIV({c:"controller actions controller_history"},this.fetch_history),this.history_editor=DIV({c:"list_editor history"},this.current_his_list,this.history_controller),$hide(this.history_controller),$add(this.editor_instance_div,this.history_editor)},renderHoverActionButton:function(e,t){var r=this;return E.default.render({onClick:function(){return r.onHoverActionButtonClick(e,t)},text:_("Add section")})},setProjectTitle:function(e){$setHTML($gc(this.project_header_link,"span"),G.formatSimple(e))},showSectionAddForm:function(){var e=this.getSectionAddForm(this.onSectionAdd);$add(this.current_list,this.current_add_section_li),e._focus()},getSectionAddForm:function(e){var t=this;this.clearEmptyStateIfNeeded(),$remove(this.current_add_section_li);var r=(0,c.renderSectionForm)({onSubmit:function(r){e(r),$remove(t.current_add_section_li),$removeClass(t.current_list,"section_add_active")},onCancel:function(){t.checkEmpty(),$remove(t.current_add_section_li),$removeClass(t.current_list,"section_add_active")}});return this.current_add_section_li=LI(DIV({c:"section"},DIV({c:"section_head_holder"},r))),this.current_add_section_li.json={},$addClass(this.current_list,"section_add_active"),r},onSectionAdd:function(e){var t=Y.getByPID(this.project_id),r=0==t.length?1:(0,d.last)(t).section_order+1,n=Y.add({name:e,project_id:this.project_id,section_order:r});$add(this.current_list,this.renderSectionItem(n.id,[]))},onHoverActionButtonClick:function(e,t){var r=this,n=function(n){var o=Y.add({name:n,project_id:r.project_id,section_order:t+1});$addAfter(r.renderSectionItem(o.id,[]),e),r.saveOrder(!1),r.reRender()},o=this.getSectionAddForm(n);$addAfter(this.current_add_section_li,e),o._focus()},showHistory:function(){$show(this.history_editor,this.history_controller),this.history_editor.scrollIntoView(),this.getMoreHistory()},getMoreHistory:function(){var e=this;B.mark("ProjectEditor/getMoreHistory");var t=this.fetch_history;$hide(t),this.history_fetch_count++,P.addToElm(t.parentNode);var r=$requestJSON("/API/".concat(Q.api_version,"/items/get_completed"));r.offline_message=!0,r.addCallback(function(r){r=(0,d.compose)((0,d.map)(function(e){return o({},e,{parent_id:null,section_id:null})}),(0,d.sortBy)(["date_completed","id"]))(r),r.reverse();var n=e.current_his_list;$remove($all("li","empty",n)),P.removeFromElm(t.parentNode);var a=!0,i=!1,l=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;if(!$("item_"+c.id)){b.default.dispatch((0,O.archivedItemFetch)(c));var f=e.renderHistoryItem(c);$add(n,f)}}}catch(e){i=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}var p=e.history_fetch_count,m=r.length;if(1==p&&m<10&&m>0);else if(r.length<10){var h,y;y=p>1?_("No more completed tasks"):_("No completed tasks"),$add(n,h=LI({c:"empty"},y)),$fx.fadeOut(h,{duration:3e3,onComplete:function(){$remove(h)}})}else $show(t);e.arrows&&e.arrows.updateArrows(),e.section_list_by_sid&&Object.values(e.section_list_by_sid).forEach(function(e){e&&e.arrows&&e.arrows.updateArrows()}),e.current_limit+=r.length}),r.addErrback(function(){P.removeFromElm(t.parentNode)}),0===this.current_limit&&(this.current_limit=this.current_his_list.childNodes.length);var n={onSuccess:function(){r.sendReq({offset:e.current_limit,project_id:e.project_id})}};return Q.sync(n),!1},renderHistoryItem:function(e){var t=G.format(e.content),r=TBODY(),n=TABLE(r),o=TD({c:"checker"}),a=TD({c:"content"});$add(r,TR(o,a));var i=SPAN({c:"text"});$setHTML(i,t),$add(a,i);var l=LI({c:"task_item history_item checked",id:"item_"+e.id},n);$addClass(l,"item_"+e.id),l.json=e,C.annotate(e,i,l),$add(a,$setHTML(DIV(),M.format("",e)));var s=V.create(l,this.unarchiveHistoryItem);return $add(o,DIV({c:"div_checker"},s)),k.setChecked(s,1),H.setIndent(l,1),l},unarchiveHistoryItem:function(e){K.unarchive(e.json),$remove(e),this.reRender()},reRender:function(){this.removeEditorContent(),this.renderEditorContent()},editingDone:function(e){x.current_cancel=null,x.current_form=null,this.arrows.updateArrows(),this.current_item=e},checkEmpty:function(){var e=K.itemGetSectionGroups(this.project_id);1===(0,d.keys)(e).length&&0===e[null].length&&this.renderEmpty()},showAddItemForm:function(){this.section_list_by_sid[null].showAddItem(!1,!0,!0)},renderEmpty:function(){var e=this;if(x.hideEmptyState)return null;var t=$("empty-state-holder");t||(t=DIV({id:"empty-state-holder"}),$add($("editor"),t));var r,n=W.get(this.project_id);return r=n.inbox_project?(0,v.isScheduled)(v.TOOLTIP_EMPTY_STATE_INBOX,b.default.getState())?f.default.createElement(y.EmptyStateInboxNew,{onButtonClick:this.showAddItemForm}):f.default.createElement(y.EmptyStateInboxZero,{onButtonClick:this.showAddItemForm}):(0,g.totalCompleted)(b.default.getState())<20?f.default.createElement(y.EmptyStateProjectNew,null):this.last_task_completed?f.default.createElement(y.EmptyStateProjectCelebration,{onButtonClick:this.addNewItem,onLinkClick:function(){var t=$gc($("projects_list"),"li","current");t&&(e.last_task_completed=!1,m.default.archive(t),b.default.dispatch((0,h.showProjectView)([window.User.inbox_project])))}}):f.default.createElement(y.EmptyStateProjectZero,{onButtonClick:this.showAddItemForm}),p.default.render(r,t),null},renderHeaderActions:function(e){var t,r=this;if(!e.inbox_project){var n=J.getAll(this.project_id),o=n.length>1?svgs.get("sm1/member_small.svg"):svgs.get("sm1/add_member_small.svg");t=A({c:"share_icon",href:"#","data-track":"project|share"},o),$AEV(t,["click","touchstart"],function(){return U.show(r.project_id),!1}),I.showSimpleText(t,_("Share options")),n&&n.length>1&&$add(t,SPAN({c:"share_count"},""+n.length))}var a=A({c:"gear_icon icon",href:"#"},svgs.get("sm1/more.svg"));I.showSimpleText(a,_("Project actions"),null,null,5),$AEV(a,["click","touchstart"],function(t){return X.get().toggle(a,a,t,{hide_filter:function(t){return!(!e.inbox_project||!$hasClass(t,"sort_responsible"))}})});var i;return i=D.renderIcon(e,w.TYPE_PROJECT_NOTE),I.showSimpleText(i,_("Project comments"),null,null,7),e.is_archived?DIV({c:"view_header_actions"},i):DIV({c:"view_header_actions"},i,t,a)},clearEmptyStateIfNeeded:function(){var e=$("empty-state-holder");e&&(p.default.unmountComponentAtNode(e),$remove(e))},getCurrentOrder:function(){var e=$$(".section_list > li",null,this.editor_instance_div),t=1,r=[];return $map(e,function(e){e.json&&e.json.id&&r.push({id:e.json.id,section_order:t++})}),r},saveOrder:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getCurrentOrder();Y.reorder(t,e)}});t.exports={ProjectEditorGeneric:ne,ProjectEditor:oe}},{"../../components/projects_list/ProjectArchive":70,"../../menus/MenuPriorities":136,"../../menus/MenuProjectEditor.js":138,"../../menus/MenuProjectGear.js":139,"../../menus/MenuReactions":141,"../../models/Collaborators":148,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/SectionsModel":163,"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../react_components/emptyState":731,"../../reducers/archived":1083,"../../reducers/mainView":1109,"../../reducers/notes":1114,"../../reducers/stats":1130,"../../reducers/tooltip":1133,"../../reducers/user":1135,"../../stores/store":1140,"../../utils/fp":1166,"../action_perfomed/ActionPerformed":2,"../agenda/AgendaUtils":8,"../formatter/Formatter.js":22,"../generic_manager/GenericArrows.js":24,"../generic_manager/GenericManager.js":25,"../generic_manager/GenericManagerUtils.js":26,"../items_utils/ItemCheckbox":29,"../labels/Labels.js":36,"../left_menu/LeftMenu":37,"../notes/Notes.js":46,"../notes/NotesUtils":49,"../project_editor/ProjectEditorDragAndDropFiles":61,"../project_editor/ProjectEditorManager":62,"../projects_list/ProjectListUtils":72,"../sharing/SharingManager":87,"./HoverActionButton":59,"./ProjectEditorUtils":63,"./SectionList":66,react:"react","react-dom":"react-dom"}],61:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Signals,s=e("../../models/ItemsModel"),u=e("../notes/Notes.js"),c=e("../templates/Templates"),d=function(){function e(){n(this,e),this.attach=this.attach.bind(this),this.addOverlay=this.addOverlay.bind(this),this.removeOverlay=this.removeOverlay.bind(this)}return a(e,[{key:"attach",value:function(e){var t=this;if(window.User.is_premium){var r=e.editor_instance_div;r.addEventListener("dragleave",function(e){$preventDefault(e),t.removeOverlay(e,r)},!0),r.addEventListener("dragenter",function(e){$preventDefault(e),t.addOverlay(e,r)},!0),r.addEventListener("dragover",function(e){$preventDefault(e),t.addOverlay(e,r)},!0),r.addEventListener("drop",function(n){$preventDefault(n),t.removeOverlay(n,r);var o=t._getFile(n);if(o){var a=e.project_id;if(-1!==o.name.indexOf(".csv")||-1!==o.name.indexOf(".txt"))c.showImport(a);else{var i=s.add({project_id:a,content:o.name});l.sendSignal("instant_refresh_interface"),u.showItemNotes(i.id),setTimeout(function(){u.submit_fn&&u.submit_fn()},50)}}},!0)}}},{key:"addOverlay",value:function(e,t){this.clearTimeout(t);var r=!1;if(e.dataTransfer.types){var n=!0,o=!1,a=void 0;try{for(var i,l=e.dataTransfer.types[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){if("Files"===i.value){r=!0;break}}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}if(r&&!t.attach_overlay){var s;$addClass(t,"drop_over");var u=_("Add file as task / Import from template");$add($body(),s=DIV({c:"attach_overlay"},SPAN(u)));var c=$position(t);$setWidth(s,t.offsetWidth),$setHeight(s,t.offsetHeight),$setTop(s,c.y),$setLeft(s,c.x),t.attach_overlay=s}}},{key:"removeOverlay",value:function(e,t){
var r=this;this.clearTimeout(t),t.attach_timeout=setTimeout(function(){$removeClass(t,"drop_over"),t.attach_overlay&&($remove(t.attach_overlay),t.attach_overlay=null),r.clearTimeout(t)},100)}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.attach_timeout&&(clearTimeout(e.attach_timeout),e.attach_timeout=null)})},{key:"_getFile",value:function(e){var t=e.dataTransfer&&e.dataTransfer.files;if(t){var r=$first(t);if(r)return r}return null}}]),e}();t.exports=new d},{"../../models/ItemsModel":155,"../notes/Notes.js":46,"../templates/Templates":94}],62:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=n(e("react-dom")),u=e("../../utils/deps"),c=n(e("../../stores/store")),d=e("../../utils/fp"),f=window,p=f.Signals,m=e("../../models/ProjectsModel"),h=e("../../menus/MenuProjectEditor.js"),_=e("../onboarding/Onboarding"),y=(0,u.defineDeps)("ProjectEditorManager",["ProjectEditor"]),v=function(){function e(){var t=this;o(this,e),l(this,"setCurrentSectionList",function(e){t.current_form||h.get().shown||(t.current_section_list=e,t.externalServicesAnnotation(window.CURRENT_EXERNAL_SERVICE))}),l(this,"getCurrentSectionList",function(){return t.current_section_list});var r;this.reset=this.reset.bind(this),this.getCurrentEditor=this.getCurrentEditor.bind(this),this.getEditorById=this.getEditorById.bind(this),this.getEditorsById=this.getEditorsById.bind(this),this.createEditorInstance=this.createEditorInstance.bind(this),this.getCurrentProjectId=this.getCurrentProjectId.bind(this),this.showProjects=this.showProjects.bind(this),this.toggleProject=this.toggleProject.bind(this),this.setAsActive=this.setAsActive.bind(this),this.externalServicesAnnotation=this.externalServicesAnnotation.bind(this),this.attachMouseMove=this.attachMouseMove.bind(this),this.editors=[],this.current_section_list=null,this.current_cancel=null,this.current_form=null,this.current_holder=null,this.hideEmptyState=!1,p.connect("projects.rerender",function(e){var n={},o=!0,a=!1,i=void 0;try{for(var l,s=t.editors[Symbol.iterator]();!(o=(l=s.next()).done);o=!0)r=l.value,n[r.project_id]=r}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}var u=!0,c=!1,d=void 0;try{for(var f,p=e[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value;r=n[parseInt(m)],r&&r.reRender()}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}n=null}),p.connect("projects.rerender.all",function(){t.reRender()}),p.connect("projects.reset",function(){t.reset()}),p.connect("project.name.changed",function(e){(r=t.getEditorById(e.id))&&r.setProjectTitle(e.name)}),p.connect("external_service_annotation",this.externalServicesAnnotation)}return i(e,null,[{key:"initClass",value:function(){this.prototype.DepProjectEditor=null}}]),i(e,[{key:"reset",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.current_section_list=null,this.current_cancel=null,this.current_form=null,this.current_editor=null,this.current_project_id=null,this.current_holder=null,this.hideEmptyState=!1,e){var t=!0,r=!1,n=void 0;try{for(var o,a=this.editors[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.remove()}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this.editors=[]}this.removeEmptyState(),p.sendSignal("project_editor_manager_reset")}},{key:"getCurrentEditor",value:function(){return this.current_editor}},{key:"getEditorById",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=this.editors[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(i.project_id===e)return i}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return null}},{key:"getEditorsById",value:function(){var e={},t=!0,r=!1,n=void 0;try{for(var o,a=this.editors[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){e[o.value.project_id]=!0}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"createEditorInstance",value:function(e){var t=new y.ProjectEditor;return t.initWithData(e),this.editors.push(t),t}},{key:"getCurrentProjectId",value:function(){return this.current_project_id}},{key:"isShowing",value:function(e){return!!this.getEditorById(e)}},{key:"showProjects",value:function(e,t,r){if(r||(r={}),this.removeEmptyState(),r.holder||(r.holder=$("editor")),window.MINI_VERSION){var n=$("blank_state_projects_list");n&&$remove(n)}this.reset(),!0!==r.dont_replace_holder&&$replace(r.holder,null),this.current_holder=r.holder,this.hideEmptyState=r.hideEmptyState,e.length>1?$addClass(r.holder,"project_editors_multiple"):$removeClass(r.holder,"project_editors_multiple"),window.scroll(0,0);var o=!0,a=!1,i=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,c=this.createEditorInstance(u);c.holder=r.holder,c.showProject()}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}var d=this.editors[0];d&&(!1!==r.update_location&&p.sendSignal("change_location","project/".concat(d.project_id)),this.setAsActive(d,!0)),this.externalServicesAnnotation(window.CURRENT_EXERNAL_SERVICE),$isFunction(t)&&t(),setTimeout(function(){_.showCompleteTaskTooltipIfNeeded(),p.sendSignal("rendered.projects")},50)}},{key:"removeEmptyState",value:function(){var e=$("empty-state-holder");e&&s.default.unmountComponentAtNode(e)}},{key:"toggleProject",value:function(e){var t=null,r=[],n=!0,o=!1,a=void 0;try{for(var i,l=this.editors[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;s.project_id===e?t=s:r.push(s)}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}if($addClass(this.current_holder,"project_editors_multiple"),t)return this.current_editor===t&&this.reset(!1),this.editors=r,t.remove(),!1;var u=this.createEditorInstance(e);return u.holder=this.current_holder,u.showProject(),!0}},{key:"setAsActive",value:function(e){!1===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.current_form||h.get().shown||(this.current_project_id=e.project_id,this.current_editor=e,this.current_editor.setTopSectionAsCurrent(),$removeClass($all("div","project_editor_instance"),"current_editor"),$addClass(e.editor_instance_div,"current_editor"))}},{key:"externalServicesAnnotation",value:function(e){var t=this;if(this.current_section_list){var r=$("add_link");if(r&&$remove(r),e){var n=this.current_section_list.controller;if(!n)return;var o=e.annotate_add_text,a=e.annotate_fn;r=A({href:"#",class:"action",id:"add_link"},o),$add(n,r),$addClass($$(".action_add_item",n),"inlined-button"),r.onclick=function(){return t.current_section_list.addNewItem(!1,function(){a(t.current_react_editor)}),!1}}}}},{key:"attachMouseMove",value:function(e){var t=this;$AEV(e.editor_instance_div,"mouseover",function(){t.current_project_id!==e.project_id&&t.setAsActive(e)})}},{key:"checkEmpty",value:function(){this.current_editor&&this.current_editor.checkEmpty()}},{key:"removeEmpty",value:function(){this.current_editor&&this.current_editor.removeEmpty()}},{key:"reRender",value:function(){if(!(0,d.get)("mainView.reactView",c.default.getState())){var e=[],t=!0,r=!1,n=void 0;try{for(var o,a=this.editors[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;m.get(i.project_id)?(i.reRender(),e.push(i)):i.remove()}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this.editors=e,this.setAsActive(this.editors[0])}}}]),e}();v.initClass(),window.ProjectEditorManager=new v,t.exports=window.ProjectEditorManager},{"../../menus/MenuProjectEditor.js":138,"../../models/ProjectsModel":159,"../../stores/store":1140,"../../utils/deps":1154,"../../utils/fp":1166,"../onboarding/Onboarding":52,"react-dom":"react-dom"}],63:[function(e,t,r){"use strict";var n=e("../projects_list/ProjectListUtils"),o=e("../formatter/Formatter.js");r.generateLink=function(e){var t=$setHTML(SPAN(),o.formatSimple(e.name,{with_links:!1})),r=A({href:"#",c:"project_link"},t);return $AEV(r,"click",function(){return n.setCurrentById(e.id,null,null,!1),window.scroll(0,0),!1}),r}},{"../formatter/Formatter.js":22,"../projects_list/ProjectListUtils":72}],64:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.GB_show,s=e("../../containers/premium_promo/PremiumOnlyModal"),u=e("../../models/TemporaryIds"),c=function(){function e(){n(this,e),this.showProjectEmail=this.showProjectEmail.bind(this),this.showProjectCommentEmail=this.showProjectCommentEmail.bind(this),this.showItemEmail=this.showItemEmail.bind(this),this.genericShowEmail=this.genericShowEmail.bind(this),this.showCalFeed=this.showCalFeed.bind(this)}return a(e,[{key:"showProjectEmail",value:function(e){this.genericShowEmail("project",e,_("Add tasks via email"))}},{key:"showProjectCommentEmail",value:function(e){this.genericShowEmail("project_comments",e,_("Add comments via email"))}},{key:"showItemEmail",value:function(e){this.genericShowEmail("item",e,_("Add comments via email"))}},{key:"genericShowEmail",value:function(e,t,r){if(!window.User.is_premium)return s.showEmailForwarding();var n=function(){var n="/Emails/view?obj_type=".concat(e,"&obj_id=").concat(t);l(r,n,500,500)};this.customShowGb(t,n)}},{key:"showCalFeed",value:function(e){if(!window.User.is_premium)return s.showProjectCalendarFeed();var t=function(e){var t="/Calendar/view_project_feed_url?project_id=".concat(e);l(_("Project calendar feed"),t,230,450)};this.customShowGb(e,t)}},{key:"customShowGb",value:function(e,t){u.waitToResolve(e,function(e){t(e)})}}]),e}();t.exports=new c},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/TemporaryIds":172}],65:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("../projects_list/ProjectList")),u=e("../../utils"),c=n(e("../../models/SectionsModel")),d=window,f=d.ElementStore,p=e("../sortable/Sortable.js"),m=e("../../models/StateModel"),h=function(){function e(){var t=this;o(this,e),l(this,"detectDropOnProject",function(){var e=ICE.$dnd.mouse_pos||$mousePos(),r=e.x,n=e.y;n+=$("left_menu").scrollTop-$scrollTop(),t.project_drop_target&&($removeClass(t.project_drop_target,"drop_background"),t.project_drop_target=null);var o=!0,a=!1,i=void 0;try{for(var l,s=t.project_list_offset[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,c=r>=u.x&&r<=u.x_max;if(c=c&&n>=u.y&&n<=u.y_max){$addClass(u.dom,"drop_background"),t.project_drop_target=u.dom;break}}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}}),l(this,"onDrag",function(){t.sortable.onDrag(),t.detectDropOnProject()}),l(this,"onHandlerMouseDown",function(e){t.current_li=$parent(t.current_handler,"li");var r=$parent(t.current_li,".project_editor_instance"),n=$$(".section_list li[data-id]",r);t.sortable=new p(n,"section");var o=t.sortable.onStart;return ICE.$dnd.dragAble(t.current_li,{handler:t.current_handler,move_x:!0,on_start:o,on_drag:t.onDrag,on_end:t.onEnd,scroll_on_overflow:!0,scroll_custom:t.scrollCustom}),m.set("drag_and_drop_mode",m.DragMode.reordering),t.project_list_offset=t.projectListOffsetSnapshot(),ICE.$dnd._start(t.current_handler,e),$preventDefault(e),!1}),l(this,"onEnd",function(){m.set("drag_and_drop_mode",m.DragMode.waiting),t.sortable.onEnd();var e=ICE.$dnd.current_root;if(t.project_drop_target){$removeClass(t.project_drop_target,"drop_background");var r=(0,u.parseId)(t.project_drop_target.getAttribute("data-id")),n=(0,u.parseId)(e.getAttribute("data-id"));return void c.default.move({id:n,project_id:r})}var o=$parent(e,"div","project_editor_instance");o&&(o=f.get(o,"editor"),o.saveOrder())}),this.current_li=null,this.current_handler=null,this.sortable=null,this.project_list_offset=null,m.set("drag_and_drop_mode",m.DragMode.waiting),this.scrollCustom=this.scrollCustom.bind(this)}return i(e,[{key:"attach",value:function(e){var t=this;e.onmousedown=function(r){t.current_handler=e,t.onHandlerMouseDown(r)}}},{key:"projectListOffsetSnapshot",value:function(){var e=[],t=s.default.getAllRenrededItems(!0,!1);t.push($("filter_inbox")),$("filter_team_inbox")&&t.push($("filter_team_inbox")),t=t.concat($$('#top_filters li[data-type="project_list_item"]'));var r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,u=$position(l);u.x_max=u.x+l.offsetWidth,u.y_max=u.y+l.offsetHeight,u.dom=l,e.push(u)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}},{key:"scrollCustom",value:function(e,t){var r=this.scrollObject(e);r.scrollBy?r.scrollBy(0,t):r.scrollTop+=t}},{key:"scrollObject",value:function(e){var t=$("left_menu"),r=$position(t);return e.x>=r.x-50&&e.x<=r.x+t.offsetWidth?t:window}}]),e}(),_=new h;r.default=_},{"../../models/SectionsModel":163,"../../models/StateModel":165,"../../utils":1176,"../projects_list/ProjectList":71,"../sortable/Sortable.js":90}],66:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,r);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n.select()}}function l(e,t){i(e,t,t)}function s(e,t,r,n){track("task_form","click","add_from_project");var a=S.get($parent(e,"div","section"),"SectionList"),i=t.getResultItem();if(!i)return!1;if(""!==i.content){if(i.project_id&&i.project_id!==a.project_id||i.section_id!==a.section_id){var l=(0,y.itemGetMaxTopLevelChildOrder)({project_id:i.project_id,section_id:i.section_id},m.default.getState());i=o({},i,{parent_id:null,section_id:i.project_id!==a.project_id&&i.section_id===a.section_id?null:i.section_id,child_order:l})}else{i=o({},i,a.getParentChildOrder(e),{project_id:a.project_id,section_id:a.section_id})}var s=i,u=s.item_order;i=(0,f.omit)(i,["item_order","indent","order"]);var c=V.add(i);if(!c)return;c=o({},c,{item_order:u,indent:L.getIndent(e)});var d,p=B.get(c.project_id);if(c.project_id!=a.project_id)m.default.dispatch((0,h.notifyAddToProject)(c.id,p.id)),d=e.previousSibling,$swap(e,null);else if(d=a.renderItem(c),$addClass(d,"item_added"),c.section_id!==a.section_id){var _=c.section_id?I.current_holder.querySelector(".section[data-id='".concat(c.section_id,"'] .items")):I.current_holder.querySelector(".section .items");$add(_,d)}else $swap(e,d);a.editingDone(d),c.project_id===a.project_id&&i.section_id===a.section_id&&a.saveOrder(d,{allow_undo:!1});var v={};return p&&F.isProjectShared(p.id)&&0!=i.inherit_asignee?v.responsible_uid=c.responsible_uid:v.responsible_uid=void 0,t.remove(),$remove(e),a.state_manager.current_form=null,$isFunction(r)?r(c):a.showAddItem(!0,!1,!1,v),!1}return n?(t.remove(),$remove(e),a.state_manager.current_form=null,$isFunction(r)&&r(),!1):(a.setCurrentItem(e),$isFunction(r)&&r(!0),!1)}Object.defineProperty(r,"__esModule",{value:!0}),r.renderSectionForm=r.default=void 0;var u=n(e("./SectionMenu")),c=n(e("../../models/SectionsModel")),d=e("../../models/RealHierachy"),f=e("../../utils"),p=e("../../utils/fp"),m=n(e("../../stores/store")),h=e("../../reducers/undo"),y=e("../../reducers/items"),v=n(e("./SectionDragAndDrop")),g=e("../../reducers/user"),b=e("../../reducers/counts"),w=n(e("../../stores/subscribeSelected")),E=n(e("../../react_components/item_editor/ItemEditorLegacyWrapper")),j=e("../../reducers/reminders"),O=e("../../react_components/confirm_dialog"),S=window.ElementStore,P=window.IstTooltip,I=e("../project_editor/ProjectEditorManager"),k=e("../sharing/SharingManager"),T=e("../action_perfomed/ActionPerformed"),C=e("../items_utils/ItemAddEditForm"),D=e("../items_utils/ItemsRender"),M=e("../items_utils/ItemCheckbox"),x=e("../items_utils/ItemDueDates.js"),R=e("../items_utils/ItemCommonEdits"),N=e("../generic_manager/GenericManager.js"),L=e("../generic_manager/GenericManagerUtils.js"),U=e("../generic_manager/GenericArrows.js"),B=e("../../models/ProjectsModel"),V=e("../../models/ItemsModel"),F=e("../../models/Collaborators"),H=e("../../menus/MenuProjectEditor.js"),q=e("../onboarding/Onboarding"),G=e("../drag_and_drop/DragAndDrop"),z=N.extend({initWithData:function(e){var t=this,r=e.project_id,n=e.section_id,o=e.items,a=e.on_show_add_item,i=e.on_add_form_cancel,l={list_class:"SectionList",data_model:V,max_indent:5,undo_reorder_intent:"reorder_section",arrows:new U({data_model:V}),state_manager:I,manager_type:"section",project_id:r,section_id:n,items:o,on_show_add_item:a,on_add_form_cancel:i};if(l.arrows.setList(this),void 0===r||void 0===n)throw new Error("SectionList argument missing error");if(this.parent(l),this.is_top_section=!this.section_id,this.current_limit=0,this.section_div=null,this.menu=H.get(),Object.defineProperty(this,"section",{get:function(){return t.is_top_section?null:c.default.getByID(t.section_id)}}),(0,g.isDoistUser)(m.default.getState())){var s=(0,b.countBySection)(m.default.getState());this.count=s[this.section_id]||0;var u=(0,w.default)(m.default,b.countBySection,function(){if(!document.body.contains(t.section_div)||!t.section)return void u();var e=(0,b.countBySection)(m.default.getState());t.is_top_section||e[t.section_id]===t.count||(t.count=e[t.section_id],$replace(t.header_holder,t.renderHeader()))})}$bindMethods(this)},remove:function(){this.section_div&&($remove(this.current_list,this.section_div),S.remove(this.section_div),this.state_manager=null,this.current_list=null,this.menu=null,this.arrows.data_model=null,this.arrows=null,this.section_div=null,this.project_header_link=null)},setCurrentItem:function(e){this.current_item=e,I.current_item=e},isArchived:function(){var e=B.get(this.project_id);return!!e&&e.is_archived},render:function(){var e=this,t=this;if(this.header_holder=DIV({c:"section_head_holder"}),!this.is_top_section){var r=SPAN({c:"drag_and_drop_handler"},svgs.get("sm1/drag.svg"));v.default.attach(r),$add(this.header_holder,r,this.renderHeader())}this.isArchived()?this.controller=null:(this.add_item=A({c:"action action_add_item"},SPAN({c:"icon icon_add"},svgs.get("sm1/plus.svg")),_("Add task")),this.add_item.onclick=this.addNewItem,this.controller=DIV({c:"controller actions task_actions"},this.add_item)),this.list_holder=DIV({c:"list_holder"});var n={c:"section"};if(this.section_id&&(n["data-id"]=this.section_id),!this.is_top_section&&this.section.collapsed&&(n.c+=" section__collapsed"),this.section_div=DIV(n,this.header_holder,this.list_holder,this.controller),this.current_list=UL({c:"items"}),$add(this.current_list,LI({c:"reorder_item task_item"})),$map(this.items,function(e){var r=t.renderItem(e);$add(t.current_list,r)}),L.showHideChildren($AF(this.current_list.childNodes)),$add(this.list_holder,this.current_list),this.edit_on_load){var o=this.edit_on_load;$map($AF(this.current_list.childNodes),function(e){e.json.id==o&&(t.setCurrentItem(e),t.editCurrentItem())}),this.edit_on_load=null}this.arrows.updateArrows(),S.set(this.section_div,"SectionList",this),$AEV(this.section_div,"mouseover",function(){I.current_section_list!==e&&I.setCurrentSectionList(e)});var i;if(this.is_top_section)i=LI(a({},"data-type","section"),this.section_div);else{var l;i=LI((l={},a(l,"data-type","section"),a(l,"data-id",this.section_id),l),this.section_div),i.json={id:this.section_id}}return i},renderEmpty:function(){return null},renderItem:function(e,t){var r=this;t||(t={fn_toggle_menu:H.toggle,fn_complete_item:this.completeItem,fn_undo_complete_item:this.uncompleteItem,with_due_date:!0});var n=B.get(e.project_id),o=!0;(e.in_history||t.not_editable||!n||n.is_archived)&&(o=!1),o||(t.no_checkbox=!0,t.no_drag_and_drop=!0,t.not_editable=!0);var a=D.renderItem(e,t);return a.render_opts.renderCls=r,o&&L.attachClick(a.content,function(){return r.saveCurrentItem(function(){r.setCurrentItem(a),r.editCurrentItem()}),!0}),a},renderHeader:function(){var e=this,t=DIV({c:"collapser"},svgs.get("sm1/caret.svg")),r=DIV({c:"menu icon"},svgs.get("sm1/more.svg"));$AEV(r,"click",function(t){u.default.toggle({section:e.section,anchor:r,event:t,onAddTaskSelected:function(){e.section.collapsed&&e.toggleCollapse(),e.addNewItem()},onRenameSelected:e.showHeaderForm,onArchiveSelected:function(){var t;t=0===e.items.length?(0,f.format)(_("Are you sure you want to archive {section}?"),{section:"<b>".concat(e.section.name,"</b>")}):(0,f.format)(_n("Archive {section} with its 1 task?","Archive {section} with its {n} tasks?",e.items.length),{section:"<b>".concat(e.section.name,"</b>"),n:e.items.length}),(0,O.showConfirmDialog)({confirmLabel:_("Archive"),htmlMessage:"<span>".concat(t,"</span>"),onConfirm:function(){c.default.archive(e.section_id)}})},onDeleteSelected:function(){var t;t=0===e.items.length?(0,f.format)(_("Are you sure you want to delete {section}?"),{section:"<b>".concat(e.section.name,"</b>")}):(0,f.format)(_n("Delete {section} with its 1 task?","Delete {section} with its {n} tasks?",e.items.length),{section:"<b>".concat(e.section.name,"</b>"),n:e.items.length}),(0,O.showConfirmDialog)({confirmLabel:_("Delete"),htmlMessage:"<span>".concat(t,"</span>"),onConfirm:function(){c.default.remove(e.section_id)}})},onMoveToProject:function(t){c.default.move({id:e.section_id,project_id:t})}}),t.stopPropagation()});var n=(0,g.isDoistUser)(m.default.getState())&&this.count>0?SMALL(this.count):null,o=H2(this.section.name,n);o.addEventListener("click",function(){return e.showHeaderForm()});var a=DIV({c:"section_head"},t,o,r);return t.addEventListener("click",function(){return e.toggleCollapse()}),a},toggleCollapse:function(){this.section.collapsed?(c.default.update({id:this.section_id,collapsed:!1}),$removeClass(this.section_div,"section__collapsed")):(c.default.update({id:this.section_id,collapsed:!0}),$addClass(this.section_div,"section__collapsed"))},collapseOn:function(){},collapseOff:function(){},showHeaderForm:function(){var e=c.default.getByID(this.section_id),t=Y({section:e,onCancel:this.onHeaderFormCancel.bind(this),onSubmit:this.onHeaderFormSubmit});$replace(this.header_holder,t),l($$("input.name",t)[0],1e5)},onHeaderFormCancel:function(){$replace(this.header_holder,this.renderHeader())},onHeaderFormSubmit:function(e){var t=c.default.getByID(this.section_id);c.default.update({id:t.id,name:e}),$replace(this.header_holder,this.renderHeader())},_setIndent:function(e,t){var r=e;e<1&&(r=1),e>5&&(r=5);var n;if(n="add"==I.current_react_editor.getCurrentMode()?t.previousSibling:t.previousSibling.previousSibling,n&&$hasClass(n,"reorder_item")&&(n=null),n){var o=L.getIndent(n);r>o&&(r=o+1)}else r=1;L.setIndent(t,r)},_handleEditorKeyDown:function(e,t){var r=this,n=function(e){"edit"==I.current_react_editor.getCurrentMode()?r.saveItem(e):r.saveCurrentItem(e)};return(e.ctrlKey||e.metaKey)&&38===e.keyCode&&(e.preventDefault(),n(function(){for(var e="add"===I.current_react_editor.getCurrentMode()&&I.current_form?I.current_form.previousSibling:r.current_item.previousSibling;e&&$isHidden(e);)e=e.previousSibling;if(I.current_react_editor.remove(),$remove(I.current_form),I.current_form=null,$hasClass(e,"reorder_item")&&(e=null),e)r.setCurrentItem(e),r.editCurrentItem(!0);else try{r.isFormFirst()||r.showAddItem(!0,!0)}catch(e){r.showAddItem(!0,!0)}})),(e.ctrlKey||e.metaKey)&&40===e.keyCode&&(e.preventDefault(),n(function(){for(var e="add"===I.current_react_editor.getCurrentMode()&&I.current_form?I.current_form.nextSibling:r.current_item.nextSibling;e&&$isHidden(e);)e=e.nextSibling;if(I.current_react_editor.remove(),$remove(I.current_form),I.current_form=null,e)r.setCurrentItem(e),r.editCurrentItem(!0);else try{r.isFormLast()||r.showAddItem(!0,!1)}catch(e){r.showAddItem(!0,!1)}})),!e.ctrlKey&&!e.metaKey||37!=e.keyCode||e.shiftKey?!e.ctrlKey&&!e.metaKey||39!=e.keyCode||e.shiftKey?void 0:(e.preventDefault(),this._setIndent(L.getIndent(t)+1,t)):(e.preventDefault(),this._setIndent(L.getIndent(t)-1,t))},showAddItem:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=this;this.on_show_add_item&&this.on_show_add_item(this),k.promo_shown&&k.promoRemove(),I.current_react_editor&&(I.current_react_editor.remove(),$remove(I.current_form),I.current_form=null),$show(I.current_section_list.add_item),this.parent(e,t,r),H.get().hide();var i,l=o,u=l.indent||L.getIndent(this.current_item)||1;if(!0===e){var c=this.current_item&&this.current_item.nextSibling;!t&&c&&c.json&&c.indent==u+1&&(u+=1),i="manager indent_".concat(u)}else i="manager indent_1";var d=LI({c:i});d.is_manager=!0,l.project_id=I.current_editor.project_id,l.section_id=I.current_section_list.section_id;var f=DIV();return $add(d,f),I.current_react_editor=new E.default({item:l,holder:f,withIndentMenu:!0,withQuickNote:(0,g.isPremium)(m.default.getState()),withIgnoredInitialMatches:!l.content,onCancel:function(){track("task_form","click","cancel"),n.on_add_form_cancel&&n.on_add_form_cancel(n),I.current_react_editor.remove(),I.current_form=null,$remove(d),a.checkEmpty(),a.arrows.updateArrows(),$show(n.add_item)},onSubmit:function(){return s(d,I.current_react_editor,function(){return n.handleSubmitShortcut()})},onKeyDown:function(e){n._handleEditorKeyDown(e,d)},onIndentLeft:function(){return n._setIndent(L.getIndent(d)-1,d)},onIndentRight:function(){return n._setIndent(L.getIndent(d)+1,d)},onMultilinePaste:this._handleMultilinePaste}),I.current_form=d,d.json={manager_type:"project_editor",indent:u},G.attach(d,{trigger_mouse_over:!0}),this.insertForm(d,t),I.current_react_editor.show(),this.arrows.updateArrows(),$hide(this.add_item),!1},addNewItem:function(e,t){var r=this;T.mark("ProjectEditor/addNewItem");var n=function(){!0===e?r.setCurrentItem(r.getItem($first)):r.setCurrentItem(r.getItem($last)),r.showAddItem(!1,!0===e,!0),$isFunction(t)&&t()};return this.saveCurrentItem(n),!1},saveItem:function(e){track("task_form","click","save");var t=this,r=I.current_form,n=r.has_reordered,a=I.current_item,i=a.json,l=L.getChildren(a),s=I.current_react_editor.getResultItem();if(s){""===s.content&&(s=o({},s,{content:i.content}));var u=(0,f.getObjectDifference)(s,i);L.normalizeIndent(r,a);var c=L.getIndent(r);s=o({},s,{indent:c});var d=I.current_editor;d||(d=I.createEditorInstance());var p=L.getParent(a,c),h=null;p&&p.json&&p.json.id&&!p.is_manager&&(h=p.json.id),i.parent_id!==h&&(s=o({},s,{parent_id:h})),$addAfter(a,r),I.current_react_editor.remove(),$remove(I.current_form),V.update(i.id,u),u.reminders&&m.default.dispatch((0,j.reminderUpdate)(i.id,u.reminders));var _;if(s.project_id!=this.project_id)_=a.previousSibling,$map(L.getChildren(a,!0),function(e){$swap(e,null)}),s.section_id&&m.default.dispatch((0,y.itemMoveAndReorder)({id:s.id,project_id:s.project_id,section_id:s.section_id},null,{allowUndo:!1}));else if(s.section_id!==a.json.section_id){s.parent_id=null,s.indent=1,_=t.renderItem(s);var v=s.section_id?I.current_holder.querySelector(".section[data-id='".concat(s.section_id,"'] .items")):I.current_holder.querySelector(".section .items");$add(v,_),$map(L.getChildren(a,!0),function(e){$isHidden(e)||($map([1,2,3,4,5],function(t){$removeClass(e,"indent_"+t)}),$add(v,e))}),L.updateParentIds(_,V,l),this.arrows.updateArrows(v)}else _=t.renderItem(s),$addClass(_,"item_updated"),$swap(a,_),L.updateParentIds(_,V,l);if(this.editingDone(_),_.json&&(n||void 0!==s.parent_id)){var g=$parent(_,".section"),b=S.get(g,"SectionList");b&&b.saveOrder(_,{allow_undo:!1})}return $show(this.add_item),$isFunction(e)&&e(),!1}},editCurrentItem:function(){var e=this;k.promo_shown&&k.promoRemove(),$show(I.current_section_list.add_item);var t=this;this.parent(),H.get().hide();var r=this.current_item;P.hide(),I.current_form&&(I.current_react_editor.remove(),$remove(I.current_form));var n=L.getIndent(r),o=LI({c:"manager indent_".concat(n)});o.is_manager=!0,o.json={id:r.json.id,indent:n,manager_type:"project_editor"},$addAfter(o,r);var a=DIV();$add(o,a),I.current_react_editor=new E.default({item:r.json,holder:a,withIndentMenu:!0,withQuickNote:!1,onCancel:function(){track("task_form","click","cancel"),I.current_react_editor.remove(),I.current_form=null,$remove(o),$show(r),t.arrows.updateArrows()},onSubmit:function(){e.saveItem(function(){return e.handleSubmitShortcut({inEditMode:!0})}),$remove(o)},onKeyDown:function(t){e._handleEditorKeyDown(t,o)},onIndentLeft:function(){return e._setIndent(L.getIndent(o)-1,o)},onIndentRight:function(){return e._setIndent(L.getIndent(o)+1,o)},onMultilinePaste:this._handleMultilinePaste}),I.current_form=o,G.attach(o,{trigger_mouse_over:!0}),I.current_react_editor.show(),this.arrows.updateArrows()},archiveItem:function(e){var t=V.archive(e.json.id);0!==t.length&&(t.forEach(function(e){var t=$("item_"+e.id);t&&$remove(t)}),this.arrows.updateArrows(),this.checkEmpty())},completeItem:function(e,t,r){var n=this;if(q.isFirstCompleteAction())return void q.showFirstCompleteAnimation(e,function(){n.completeItem(e,t)});T.mark("ProjectEditor/completeItem"),t&&t.shift&&(r=!0);var o=V.complete(e.json,r);if(o){var a=$first(o);$rmap(o,function(e){var t=$("item_"+e.id);t&&(a.in_history?C.removeItemInList(t):e.checked?M.update(t,1,n.uncompleteItem):($update(t.json,e),M.update(t,0,n.completeItem),x.updateDueDate(t)))}),this.arrows.updateArrows(),this.checkEmpty()}},uncompleteItem:function(e){var t=this;T.mark("ProjectEditor/uncompleteItem");var r=V.uncomplete(e.json);$update(e.json,r),M.update(e,0,this.completeItem);for(var n=e;;){var o=L.getParent(n);if(!o)break;M.update(o,0,this.completeItem),n=o}t.arrows.updateArrows(),t.checkEmpty()},editingDone:function(e){I.current_cancel=null,I.current_form=null,this.arrows.updateArrows(),this.setCurrentItem(e)},deleteCurrentItem:function(e){var t=L.getChildren(e,!0);return R.deleteItems(t)},checkEmpty:function(){this.parent()},saveOrder:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.allow_undo,n=void 0===r||r;if(e.is_manager)return void(e.has_reordered=!0);var o=e.json,a=this.getCurrentOrderIndent({as_list:!0}),i=(0,d.deriveTaskParentChild)(a),l=i.find(function(e){return e.id===o.id}).parent_id,s=(0,p.compose)((0,p.map)((0,p.pick)(["id","child_order"])),(0,p.filter)(function(e){return e.parent_id===l}))(i),u={id:o.id,parent_id:l,section_id:this.section_id,project_id:this.project_id};V.moveAndReorder(u,s,{allowUndo:n})},getParentChildOrder:function(e){var t=null,r=L.getParent(e);r&&(t=(0,p.get)("json.id",r))
;for(var n=e.previousSibling,o=1;n;){if(n.json&&n.json.id&&!n.is_manager){if(n.json.id===t)break;o++}n=n.previousSibling}return{parent_id:t,child_order:o}},saveCurrentItem:function(e,t){I.current_form?"add"==I.current_react_editor.getCurrentMode()?s(I.current_form,I.current_react_editor,e,t):this.saveItem(e):e()},_addMultilineTask:function(e){var t=this,r=e.shift();if(r){var n=L.getIndent(I.current_form);I.current_react_editor.remove(),$remove(I.current_form),I.current_form=null,this.showAddItem(!0,!1,!1,{content:r.replace(/^[-*] /g,""),indent:n}),setTimeout(function(){s(I.current_form,I.current_react_editor,null,{}),t._addMultilineTask(e)},50)}},_handleMultilinePaste:function(e,t){var r=this,n=I.current_react_editor.getResultItem();if(e=e.filter(function(e){return""!==e}),!(e.length>1)||n&&n.content)t();else{var o=_("Do you want to add %s tasks?").replace("%s",e.length);(0,O.showConfirmDialog)({confirmLabel:_("Add tasks"),message:o,onConfirm:function(){r._addMultilineTask(e)},onCancel:function(){t()}})}},handleSubmitShortcut:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.inEditMode;return event&&"Enter"===event.key&&(event.ctrlKey||event.metaKey)?this.showAddItem(!0,!0):t?event&&"Enter"===event.key&&event.shift?this.showAddItem(!0,!1):void 0:this.showAddItem(!0,!1)}}),W=z;r.default=W;var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.section,r=e.onSubmit,n=e.onCancel,o=t?t.name:"",a=INPUT({c:"name",type:"text",value:o,placeholder:_("Name this section")}),i=A({c:"ist_button ist_button_red"},t?_("Save"):_("Add Section")),l=A({c:"cancel_link"},_("Cancel")),s=FORM({c:"section_form"},a,DIV({c:"actions"},i,l));s.onsubmit=function(e){return e.preventDefault()},s._focus=function(){return a.focus()};var u=function(){var e=a.value.trim();""!==e&&r(e)};return a.addEventListener("keydown",function(e){return"Escape"===e.key?void n():"Enter"===e.key?void u():void 0}),l.addEventListener("click",function(){n()}),i.addEventListener("click",function(){u()}),s};r.renderSectionForm=Y},{"../../menus/MenuProjectEditor.js":138,"../../models/Collaborators":148,"../../models/ItemsModel":155,"../../models/ProjectsModel":159,"../../models/RealHierachy":160,"../../models/SectionsModel":163,"../../react_components/confirm_dialog":680,"../../react_components/item_editor/ItemEditorLegacyWrapper":863,"../../reducers/counts":1090,"../../reducers/items":1100,"../../reducers/reminders":1122,"../../reducers/undo":1134,"../../reducers/user":1135,"../../stores/store":1140,"../../stores/subscribeSelected":1141,"../../utils":1176,"../../utils/fp":1166,"../action_perfomed/ActionPerformed":2,"../drag_and_drop/DragAndDrop":20,"../generic_manager/GenericArrows.js":24,"../generic_manager/GenericManager.js":25,"../generic_manager/GenericManagerUtils.js":26,"../items_utils/ItemAddEditForm":28,"../items_utils/ItemCheckbox":29,"../items_utils/ItemCommonEdits":30,"../items_utils/ItemDueDates.js":31,"../items_utils/ItemsRender":33,"../onboarding/Onboarding":52,"../project_editor/ProjectEditorManager":62,"../sharing/SharingManager":87,"./SectionDragAndDrop":65,"./SectionMenu":67}],67:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("react-dom")),l=e("react-redux"),s=n(e("../../react_components/project_picker")),u=e("../../react_components/icons"),c=n(e("../../stores/store")),d={init:function(){var e=this;this.menu=new IstMenu,this.moveToProjectItem=TR({c:"menu_item"}),this.menu.addItems(IstMenu.createItem(_("Add task"),function(){e.onAddTaskSelected(),e._clearState(),e.menu.hide()},{icon:svgs.get("sm1/plus.svg")}),IstMenu.createItem(_("Edit section"),function(){e.onRenameSelected(),e._clearState(),e.menu.hide()},{icon:svgs.get("sm1/edit.svg")}),this.moveToProjectItem,IstMenu.createItem(_("Archive section"),function(){e.onArchiveSelected()},{icon:svgs.get("sm1/archive.svg")}),IstMenu.createItem(_("Delete section"),function(){e.onDeleteSelected(),e._clearState(),e.menu.hide()},{extra_class:"sel_delete_task danger",icon:svgs.get("sm1/trash.svg")})),$AEV(document,"click",this.menu.hide),this.menu.hide_callbacks.push(function(){i.default.unmountComponentAtNode(e.moveToProjectItem)})},_initIfNotExit:function(){this.menu||this.init()},_clearState:function(){this.onAddTaskSelected=function(){},this.onRenameSelected=function(){},this.onDeleteSelected=function(){},this.onMoveToProject=function(){},this.onArchiveSelected=function(){}},toggle:function(e){var t=this,r=e.event,n=e.anchor,d=e.section,f=e.onAddTaskSelected,p=e.onRenameSelected,m=e.onDeleteSelected,h=e.onArchiveSelected,y=e.onMoveToProject;this._initIfNotExit()&&this.init(),this._clearState(),this.onAddTaskSelected=f,this.onRenameSelected=p,this.onDeleteSelected=m,this.onMoveToProject=y,this.onArchiveSelected=h,i.default.render(a.default.createElement(l.Provider,{store:c.default},a.default.createElement(s.default,{onSelect:function(e){var r=e.project_id;t.onMoveToProject(r),t._clearState(),t.menu.hide()},selectedProjectId:d.project_id},function(e){var t=e.toggle,r=e.buttonProps;return a.default.createElement("td",o({onClick:t},r),a.default.createElement("div",{className:"menu_wrapper"},a.default.createElement("span",{className:"menu_icon"},a.default.createElement(u.MoveIcon,null)),a.default.createElement("div",{className:"menu_label"},_("Move section"))))})),this.moveToProjectItem),this.menu.toggle(n,n,r)}},f=d;r.default=f},{"../../react_components/icons":842,"../../react_components/project_picker":955,"../../stores/store":1140,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],68:[function(e,t,r){"use strict";var n=window.IstTooltip,o=e("../../models/ProjectsModel"),a=e("../richtext_editor/NatrualLanguageParsing"),i=e("./ProjectSelecter"),l={annotateFormArea:function(e,t){IstComplete.attach(e,l.complete_data={trigger:"#",collection:function(){return i.getCompletionProjects()},filterItem:function(e){if(!e)return null;var t=i.renderPItem(e);return e.indent>1&&IstComplete.getCurrentWord().length<=1&&$addClass(t,"indent_"+e.indent),t},wildcard_match:!0,position_item:$parent(e,"td","text_box_holder"),extra_width:1,support_paste:!1,onNoMatches:function(e,t,r){var n;return $add(e,TR(n=TD({c:"ist_complete_item"},DIV(SPAN({c:"ist_complete_content"},_("Project not found.")," ",B(_("Create")+" "+r)))))),n.onmouseover=$p(IstComplete.onMouseOver,n,{}),n.onmousedown=$p(l._createProject,r,t),!0},preOnSelect:function(e){var t=e.completion_item;a.setCurrentProject(t.id,"#"+t.name)}}),$AEV(e,"keydown",function(e){return!(13==e.keyAscii&&!e.shift&&IstComplete.isShown())&&((27!=e.keyAscii||!IstComplete.isShown())&&void 0)}),t&&$swap(t,this._crateButton(e))},_createProject:function(e,t){IstComplete.hide();var r=o.add({name:e});return a.highlight_project=[r.id,"#"+e],window.LibEdit.insertAtCursor(t,IstComplete.CHAR_FORCED_WHITESPACE),!1},_crateButton:function(e){var t=SPAN(svgs.get("sm1/project.svg"));$addClass(t,"form_action_icon"),t.setAttribute("data-track","task_form|project"),$AEV(t,"click",function(){return n.hide(),LibEdit.placeCaretAtEnd(e),IstComplete.forceShow(e,!0,l.complete_data),!1});var r=DIV(B(_("Project")),BR(),_("Select by typing #"));return n.showSimpleText(t,r,null,5,4),t}};t.exports=l},{"../../models/ProjectsModel":159,"../richtext_editor/NatrualLanguageParsing":85,"./ProjectSelecter":69}],69:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=window,u=s.GB_hide,c=window,d=c.IstCompleteSelect,f=e("../formatter/Formatter.js"),p=e("../../models/ProjectsModel"),m=e("../projects_list/ProjectListUtils"),h=function(){function e(){a(this,e),this.render=this.render.bind(this),this.showTooltip=this.showTooltip.bind(this),this.renderPItem=this.renderPItem.bind(this),this.getCompletionProjects=this.getCompletionProjects.bind(this)}return l(e,[{key:"render",value:function(e,t){var r;r=null!=t.support_all&&0===e?{id:0,name:t.all_txt||_("All projects")}:p.get(e);var n=this.renderPItem(r,t),o=A({href:"#",c:"activity_selector"},n,SPAN({c:"icon"},svgs.get("sm1/caret.svg")));return t.fixed_pos&&$addClass(o,"fixed_pos"),o.showTooltip=$p(this.showTooltip,o,t),$AEV(o,"click",o.showTooltip),this.current=o,o}},{key:"showTooltip",value:function(e,t){var r=this,n={selectedItem:t.selectedItem,collection:function(){var e=r.getCompletionProjects();return null!=t.support_all&&e.splice(0,0,{id:0,name:t.all_txt||_("All projects")}),e},filterItem:function(e){if(e){var n=r.renderPItem(e,t);return e.indent>1&&$addClass(n,"indent_".concat(e.indent)),n}},onSelect:function(n){return u(),t.no_swap||(e.showTooltip=null,$swap(e,e=r.render(n.id,t)),r.current=e),$isFunction(t.onSelect)&&t.onSelect(n,e),n.name},wildcard_match:!0,placeholder:t.placeholder_txt||""},o=new d(n);return o.showTooltip({title:_("Select a project"),icon:e,arrow_left_offset:t.arrow_left_offset||0,top_offset:t.top_offset||25,left_offset:t.left_offset||25,fn_on_hide:function(){o=null}}),!1}},{key:"renderPItem",value:function(e){var t,r=e.name;return 0!==e.id?(t=m.createColor(e),r=f.formatSimple(r,{only_text:!0,as_html:!1,cache_prefix:"document"})):t=SPAN({c:"blank_color"}),DIV(DIV({c:"ist_complete_icon"},t),DIV({c:"ist_complete_content"},SPAN({c:"truncated p_name"},r)))}},{key:"getCompletionProjects",value:function(){return p.getAll({with_indent:!0}).map(function(e){return n({},e)})}}]),e}();t.exports=new h},{"../../models/ProjectsModel":159,"../formatter/Formatter.js":22,"../projects_list/ProjectListUtils":72}],70:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../../utils/deps"),l=window,s=l.Indicator,u=window,c=u.Signals,d=e("../../models/ProjectsModel"),f=e("../../models/SyncEngine"),p=e("../generic_manager/GenericManagerUtils.js"),m=(0,i.defineDeps)("ProjectsArchive",["ProjectList"]),h=function(){function e(){n(this,e),this.projectsIds=[],this.render=this.render.bind(this),this.getArchived=this.getArchived.bind(this),this.showHideArchived=this.showHideArchived.bind(this),this.hideArchived=this.hideArchived.bind(this),this.archive=this.archive.bind(this),this.delete=this.delete.bind(this)}return a(e,[{key:"render",value:function(){var e,t;$add($("projects_list_manager"),DIV({c:"controller actions controller_history",id:"projects_archived_holder"},e=A({href:"#",id:"show_archived_link","data-track":"projects|show_archived"},_("Archived projects")),t=A({href:"#",id:"hide_archived_link","data-track":"projects|hide_archived",style:"display:none"},_("Hide Archived"))),UL({id:"projects_archived_ul",c:"items generic_left_list"})),$AEV(e,"click",$p(this.getArchived,e)),$AEV(t,"click",$p(this.hideArchived,t))}},{key:"getArchived",value:function(e){var t=this;$hide(e);var r=$("projects_archived_holder"),n=$("projects_archived_ul");s.addToElm(r.parentNode);var o=$requestJSON("/API/".concat(f.api_version,"/projects/get_archived"));o.offline_message=!0,o.addCallback(function(o){s.removeFromElm(r.parentNode),$replace(n,null),d.archivedFeteched(o),t.projectsIds=[];var a=!0,i=!1,l=void 0;try{for(var u,c=o[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var f=u.value;t.projectsIds.push(f.id),f.indent=1,$add(n,m.ProjectList.renderItem(f,!0))}}catch(e){i=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}if(0===o.length){var p;$add(n,p=LI({c:"empty"},_("No archived projects")));var h=function(){$remove(p),$show(e)};$fx.fadeOut(p,{duration:3e3,onComplete:h})}else t.showHideArchived()}),o.addErrback(function(){s.removeFromElm(r.parentNode)});var a={onSuccess:function(){o.sendReq({token:window.User.token})}};return f.sync(a),!1}},{key:"showHideArchived",value:function(){var e=$("show_archived_link"),t=$("hide_archived_link");e&&($hide(e),$show(t))}},{key:"hideArchived",value:function(){var e=$("show_archived_link"),t=$("hide_archived_link");t&&($replace($("projects_archived_ul"),null),$hide(t),$show(e))}},{key:"archive",value:function(e){var t=p.getChildren(e,!0);t.reverse();var r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;d.archive(l.json.id),c.sendSignal("project_archived",l.json.id),$remove(l)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}c.sendSignal("instant_refresh_interface"),this.hideArchived()}},{key:"unarchive",value:function(e){d.unarchive(e.json);var t=!0,r=!1,n=void 0;try{for(var o,a=p.getChildren(e,!0)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;$arrayRemove(this.projectsIds,i.json.id),$remove(i)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}c.sendSignal("project_unarchived",e.json.id);var l={onSuccess:function(){c.sendSignal("instant_refresh_interface")}};f.sync(l,!0)}},{key:"delete",value:function(e){if(!(this.projectsIds.indexOf(e.json.id)<0)){var t=$("projects_archived_ul"),r=!0,n=!1,o=void 0;try{for(var a,i=p.getChildren(e,!0)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;$arrayRemove(this.projectsIds,l.json.id),$remove(l)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}if(0===this.projectsIds.length){var s=$("hide_archived_link"),u=$("show_archived_link");$hide(s);var c;$add(t,c=LI({c:"empty"},_("No archived projects")));var d=function(){$remove(c),$show(u)};$fx.fadeOut(c,{duration:3e3,onComplete:d})}}}}]),e}();t.exports=new h},{"../../models/ProjectsModel":159,"../../models/SyncEngine":169,"../../utils/deps":1154,"../generic_manager/GenericManagerUtils.js":26}],71:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(){var e=document.getElementById("projects_list");if(e){var t=e.querySelector(".on_menu_show");if(t){var r=t.dataset.id;return void 0!==r?Number(r):void 0}}}var l=e("../../react_components/edit_project_modal"),s=window,u=s.Signals,c=e("../../menus/MenuProjctColors"),d=e("../../menus/MenuProjectList.js"),f=e("../../models/ProjectsModel"),p=e("../../models/Collaborators"),m=e("../../models/TemporaryIds"),h=e("../../models/Colors"),y=e("../generic_left_list/GenericLeftList"),v=e("../generic_manager/GenericArrows.js"),g=e("../drag_and_drop/DragAndDrop"),b=e("./ProjectArchive"),w=e("../project_editor/ProjectEditorManager"),E=e("../../stores/store").default,j=e("../../reducers/mainView"),O=j.showProjectView,S=e("../../reducers/counts"),P=S.countByProject,I=e("../../stores/subscribeSelected").default,k=y.extend({name:"ProjectList",initWithData:function(){var e=this,t={event_name:"Projects",li_data_type:"project_list_item",data_model:f,fn_get_all:function(){return f.getAll()},icon:"project",markdown_support:!0,max_indent:4,default_color:7,empty_text:_("You have no projects"),add_text:_("Add Project"),placeholder:_("Name your project"),list_holder:"projects_list_manager",DragAndDrop:g,with_color:!0,with_arrows:!0,with_indent:!0,with_ordering:!0,manager_reodering:!0,manager_type:"project_list",empty_screen_only_with_activity:!0,fn_on_click:function(t,r,n){if(d.get().hide(n),n.shift||n.ctrl){if($preventDefault(n),w.current_editor){w.toggleProject(r.id)?$addClass(t,"current"):$removeClass(t,"current")}else e.setCurrent(t);return!1}var o;o=e.current_item!==t||!e.current_item_with_children,e.setCurrent(t,null,o)},fn_show_items:function(e,t,r){E.dispatch(O(e,{bottomListSelected:!0,withChildren:!!t,focusedItemId:r}))},fn_on_delete:function(e){var t=!1,r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;b.delete(l),u.sendSignal("project_deleted",l),t=t||w.isShowing(l.json.id)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}t&&w.reset()},fn_create_counter:C.createCounter,fn_get_selected:function(){var e=E.getState();return"project"!==e.type?[]:e.bottomListSelected?[]:e.ids},fn_on_show_menu:function(t){if(t.json.inbox_project)return void $hide($all("tr","project_inbox_action",e.menu.menu_holder));$show($all("tr","project_inbox_action",e.menu.menu_holder));var r=$("menu_archive_text"),n=$parent(r,".menu_wrapper"),o=n.querySelector(".menu_icon"),a=t.json.is_archived;a?($setHTML(r,_("Unarchive")),$replace(o,svgs.get("sm1/unarchive.svg")),$hide($all("tr","project_archive_action",e.menu.menu_holder))):($setHTML(r,_("Archive")),$replace(o,svgs.get("sm1/archive.svg")),$show($all("tr","project_archive_action",e.menu.menu_holder)));var i=p.isProjectShared(t.json.id),l=$("menu_delete_text"),s=$parent(l,".menu_wrapper"),u=s.querySelector(".menu_icon");i?($setHTML(l,_("Leave project")),$replace(u,svgs.get("sm1/leave.svg"))):($setHTML(l,_("Delete project")),$replace(u,svgs.get("sm1/trash.svg"))),a||t.json.is_favorite?$hide($all("tr","project_add_favorite_action",e.menu.menu_holder)):$show($all("tr","project_add_favorite_action",e.menu.menu_holder))}},r=t.arrows=new v({data_model:t.data_model,x_off:-6});r.setList(this);var n=r._switchState,o=function(e,t){n(e,t),C.updateCount(e.host_item.json)};r._switchState=o,t.arrows=r,$bindMethods(this),t.fn_create_color=this.createColor,t.menu=d.init(this),t.menu_colors=c.init(),u.connect("project_editor_manager_reset",function(){e.current_selected&&(e.deselectCurrent(),e.current_selected=null)}),u.connect("projects.reset",function(){e.deselectCurrent()}),this.parent(t)},createColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.createColorDiv("project_color_".concat(e.id),h.getHex("project",e.color));return!0!==t&&p.isProjectShared(e.id)&&($removeClass(r,"project"),$addClass(r,"project_shared"),$add(r,svgs.get("sm1/project_shared.svg"))),r},projectDeleted:function(){var e=this;u.connect("project_deleted",function(t){t===e.current_selected&&(w.reset(),$replace($("editor"),null),e.current_selected=null),$remove(t)})},editCurrentItem:function(){var e=i();e&&(0,l.showEditProjectModal)({projectId:e}),IstMenu.hide()},showAddItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i();(0,l.showAddProjectModal)({anchorProjectId:r,addAbove:t}),IstMenu.hide()}}),T=function(){function e(){var t=this;n(this,e),this.updateCount=this.updateCount.bind(this),this.updateColor=this.updateColor.bind(this),this.createCounter=this.createCounter.bind(this),$AEV(window,"load",function(){m.listenAll(function(e,t){var r=$("project_count_".concat(e));r&&(r.id="project_count_".concat(t)),(r=$("project_color_".concat(e)))&&(r.id="project_color_".concat(t))})}),u.connect("update_project_color",this.updateColor),u.connect("app_data_loaded",function(){I(E,P,function(){$values(E.getState().projects).forEach(function(e){t.updateCount(e)})})})}return a(e,[{key:"updateCount",value:function(e){var t=$("project_count_".concat(e.id));t&&$swap(t,this.createCounter(e))}},{key:"updateColor",value:function(e){var t=$("project_color_".concat(e.id));t&&$swap(t,D.createColor(e))}},{key:"createCounter",value:function(e){var t=P(E.getState()),r=t[e.id]||0;if(e.collapsed){var n=!0,o=!1,a=void 0;try{for(var i,l=f.getChildren(e)[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){r+=t[i.value.id]||0}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}return 0===r&&(r=""),DIV({c:"counter_count",id:"project_count_".concat(e.id)},"".concat(r))}}]),e}(),C=new T,D=new k;window.ProjectList=t.exports=D},{"../../menus/MenuProjctColors":137,"../../menus/MenuProjectList.js":140,"../../models/Collaborators":148,"../../models/Colors":149,"../../models/ProjectsModel":159,"../../models/TemporaryIds":172,"../../react_components/edit_project_modal":714,"../../reducers/counts":1090,"../../reducers/mainView":1109,"../../stores/store":1140,"../../stores/subscribeSelected":1141,"../drag_and_drop/DragAndDrop":20,"../generic_left_list/GenericLeftList":23,"../generic_manager/GenericArrows.js":24,"../project_editor/ProjectEditorManager":62,"./ProjectArchive":70}],72:[function(e,t,r){"use strict";var n=e("../../utils/deps"),o=e("../generic_manager/GenericManagerUtils.js"),a=(0,n.defineDeps)("ProjectListUtils",["ProjectList"]);r.setCurrentById=function(e,t,r,n){return a.ProjectList.setCurrentById(e,t,r,n)},r.createColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.ProjectList.createColor(e,t)},r.deselectCurrent=function(){return a.ProjectList.deselectCurrent()},r.flashItemIfNeeded=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(e=a.ProjectList.flash_item),e){a.ProjectList.flash_item=null;var t=$("item_".concat(e));t&&(o.openParents(t),$isHidden(t)||($fx.highlight(t,{duration:1e3}),window.scrollTo(0,$position(t).y-200)))}}},{"../../utils/deps":1154,"../generic_manager/GenericManagerUtils.js":26}],73:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=n(e("../../models/DateExt")),c=e("../../utils"),d=n(e("react")),f=n(e("react-dom")),p=e("react-redux"),m=n(e("../../stores/store")),h=n(e("../../react_components/Modal")),y=n(e("../../react_components/item_editor")),v=e("../../reducers/collaborators"),g=e("../../react_components/icons"),b=e("../../react_components/confirm_dialog"),w=e("../../reducers/user"),E=window,j=E.Signals,O=window,S=O.IstTooltip,P=window,I=P.IstComplete,k=window,T=k.DateUtils,C=e("../agenda/Agenda.js"),D=e("../agenda/AgendaCurrentDays"),M=e("../projects_list/ProjectListUtils"),x=e("../project_editor/ProjectEditorManager"),R=e("../items_utils/ItemCommonEdits"),N=e("../misc/Misc.js"),L=N.getMacAppVersion,U=e("../../models/ItemsModel"),B=e("./SmartPrefilling"),V=function(){function e(){var t=this;a(this,e),s(this,"_closeModalValidator",function(e){if(!(t.task_added||$parent(e.target,"div","dialog")||$parent(e.target,"div","dialog-content")||$parent(e.target,"div","GB_Window")||$parent(e.target,"div","GB_overlay")||$parent(e.target,"span","popover__wrapper"))){if(0!==$strip(t.result_item.content).length)return void(0,b.showConfirmDialog)({confirmLabel:_("Discard task"),message:_("Are you sure you want to discard your current task?"),onConfirm:function(){t.hide()},onCancel:function(){t.close_confirmation_shown=!1,t.editor.current.focusInput()}});t.hide()}}),this.toggle=this.toggle.bind(this),this._show=this._show.bind(this),this.addTask=this.addTask.bind(this),this.hide=this.hide.bind(this),this.externalServicesAnnotation=this.externalServicesAnnotation.bind(this),$AEV(document,["keydown","keypress"],function(e){if(!e.meta&&!e.alt&&81===e.keyAscii&&e.ctrl)return t.toggle(),$preventDefault(e),!1}),document.addEventListener("DOMContentLoaded",function(){t.quick_add_holder=DIV({c:"quick_add_holder "}),t.editor=d.default.createRef(),t.renderModal()}),j.connect("external_service_annotation",this.externalServicesAnnotation)}return l(e,null,[{key:"initClass",value:function(){this.prototype.shown=!1,this.prototype.support_annotation=!0}}]),l(e,[{key:"toggle",value:function(){if(this.shown)return!1;var e=x.current_editor;e?e.saveCurrentItem(this._show):this._show()}},{key:"_show",value:function(){S.hide();var e=L();return e&&e>=6.4?void j.sendSignal("show_quick_add"):($addClass($body(),"body_quick_add_task"),this.shown=!0,this.task_added=!1,this.renderModal(),this.externalServicesAnnotation(window.CURRENT_EXERNAL_SERVICE),!1)}},{key:"addTask",value:function(e){if(track("task_form","click","add_from_quick_add"),!e||""===e.content)return this.editor.current.focusInput(),!1;var t=o({},e);t.project_id||(t.project_id=x.current_project_id||window.User.inbox_project),t=(0,c.omit)(t,["item_order","indent","order"]);var r=U.add(t);if(!r)return this.editor.current.focusInput(),!1;var n=x.getEditorById(r.project_id);if(r.labels&&r.labels.length>0&&B.prefillLabel())j.sendSignal("instant_refresh_interface");else if(r.due&&!n){C.get().flash_item=r.id;var a=r.due.toDate();a.setHours(23,59,59,999),D.isAdded(a)?j.sendSignal("instant_refresh_interface"):R.notifyAddedTo(r,!0)}else n?(n.reRender(),M.flashItemIfNeeded(r.id)):R.notifyAddedTo(r,!1);return this.task_added=!0,this.hide(),!1}},{key:"hide",value:function(){return this.interval_set&&(clearTimeout(this.interval_set),this.interval_set=null),$remove(this.sprite),this.support_annotation=!0,this.holder=this.sprite=this.shown=!1,$removeClass($body(),"body_quick_add_task"),I.hide(),this.renderModal(),!0}},{key:"renderModal",value:function(){var e=this,t=m.default.getState(),r={},n=D.getNonOverdue();if(n.length>0){var o=n[0],a=T.dateistResultFromDate(o);r.due=u.default.fromDateist(a)}var i=B.prefillLabel();i&&(r.labels=[i]),x.current_editor&&(r.project_id=x.current_editor.project_id),f.default.render(d.default.createElement(p.Provider,{store:m.default},d.default.createElement(h.default,{containerClassName:"quick_add_task_modal",width:550,show:this.shown,onClickOutside:function(t){if(t.key&&"Escape"===t.key||27===t.keyCode)return void(e.should_prevent_key_up_close=$parent(t.target,"div","dialog")||$parent(t.target,"div","dialog-content")||$parent(t.target,"div","GB_Window")||$parent(t.target,"div","GB_overlay")||$parent(t.target,"span","popover__wrapper"));e._closeModalValidator(t)}},d.default.createElement("div",{onKeyUp:function(t){(t.key&&"Escape"===t.key||27===t.keyCode)&&!e.should_prevent_key_up_close&&e._closeModalValidator(t)}},d.default.createElement("div",{className:"quick_add_task_header"},d.default.createElement("h4",null,_("Quick Add Task")),d.default.createElement(g.CloseIcon,{small:!0,onClick:this._closeModalValidator})),d.default.createElement("div",{className:"quick_add_task manager",id:"quick_add_task"},d.default.createElement(y.default,{item:r,forwardedRef:this.editor,collaboratorsByPID:(0,v.getAllCollaboratorsGroupByPID)(t),user:t.user,withQuickNote:(0,w.isPremium)(m.default.getState()),onChange:function(t){e.result_item=t},onSubmit:this.addTask}))))),this.quick_add_holder),this.shown&&($add($("quick_add_task"),this.quick_add_annotate=DIV({id:"quick_add_annotate"},this.quick_annotate_link=A({href:"#",class:"action",id:"quick_annotate_link"},this.quick_annotate_icon=null,this.quick_annotate_add_text=SPAN(_("Attach email to task"))))),$hide(this.quick_add_annotate),$setOpacity(this.quick_add_annotate,0))}},{key:"externalServicesAnnotation",value:function(e){var t=this;this.quick_annotate_link&&this.support_annotation&&this.support_annotation&&(e?($isHidden(this.quick_add_annotate)&&($show(this.quick_add_annotate),setTimeout(function(){return $setOpacity(t.quick_add_annotate,1)},10)),this.quick_annotate_link.onclick=$p(e.annotate_fn,{insertText:function(e){t.editor.current.insertText(e)}}),$setHTML(this.quick_annotate_add_text,e.annotate_add_text)):($setOpacity(this.quick_add_annotate,0),$hide(this.quick_add_annotate)))}},{key:"insertText",value:function(e){this.editor.current.insertText(e)}}]),e}();V.initClass(),t.exports=new V},{"../../models/DateExt":152,"../../models/ItemsModel":155,"../../react_components/Modal":654,"../../react_components/confirm_dialog":680,"../../react_components/icons":842,"../../react_components/item_editor":865,"../../reducers/collaborators":1086,"../../reducers/user":1135,"../../stores/store":1140,"../../utils":1176,"../agenda/Agenda.js":5,"../agenda/AgendaCurrentDays":6,"../items_utils/ItemCommonEdits":30,"../misc/Misc.js":42,"../project_editor/ProjectEditorManager":62,"../projects_list/ProjectListUtils":72,"./SmartPrefilling":74,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],74:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),l=e("../../constants/constants"),s=e("../project_editor/ProjectEditorManager"),u=function(){function e(){n(this,e)}return a(e,[{key:"prefillProject",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=s.current_project_id;return e&&(t||(t=window.User.inbox_project)),t}},{key:"prefillLabel",value:function(){var e=i.default.getState(),t=e.mainView;if(t.type===l.MAIN_VIEW_TYPE_LABEL)return t.id}}]),e}();t.exports=new u},{"../../constants/constants":98,"../../stores/store":1140,"../project_editor/ProjectEditorManager":62}],75:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t){var r=DIV({class:"div_color counter_color",id:e});return $setStyle(r,"color",t),r}var l=e("../../reducers/mainView"),s=e("../../utils"),u=e("../../reducers/user"),c=e("../../reducers/detailView"),d=e("../../reducers/items"),f=window,p=f.IstComplete,m=f.svgs,h=e("../projects_list/ProjectListUtils"),y=e("../notes/Notes.js"),v=e("../agenda/AgendaUtils"),g=e("../../models/ProjectsModel"),b=e("../../models/ItemsModel"),w=e("../../models/LabelsModel"),E=e("../../models/FiltersModel"),j=e("../../models/Colors"),O=e("../../stores/store").default,S=function(e){var t=i("filter_color_".concat(e.id),j.getHex("filter",e.color));return $add(t,m.get("sm1/filter.svg")),t},P=function(e){var t=i("label_color_".concat(e.id),j.getHex("label",e.color));return $add(t,m.get("sm1/label.svg")),t},k=function(){function e(){n(this,e),this.attach=this.attach.bind(this)}return a(e,[{key:"attach",value:function(e){var t,r=this,n=function(e,t){var r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;l.name||(l.name=l.content),l.name=l.name.replace(/[*!]+/g,""),l.type=t}}catch(e){n=!0,o=e}finally{try{
r||null==i.return||i.return()}finally{if(n)throw o}}return e},o=function(e){e=e.toLowerCase();var o=n(g.getByName(e),"project"),a=n(w.getByName(e),"label"),i=n(b.getByName(e,6),"item"),l=!1;if(window.User.is_premium)if("@"===e)r.complete_data.trigger="@",a=n(w.getAll(),"label"),l=!0;else if(0===e.indexOf("@")){r.complete_data.trigger="@";var s=e.slice(1);a=n(w.getByName(s).slice(0,6),"label")}if("#"===e)r.complete_data.trigger="#",l=!0,o=n(g.getAll(),"project");else if(0===e.indexOf("#")){r.complete_data.trigger="#";var u=e.slice(1);o=n(g.getByName(u).slice(0,6),"project")}var c=n(E.getByName(e).slice(0,6),"filter");c=c.concat(r.getByFilters(e));var d=!1;return!1===l&&o.length+a.length+i.length+c.length>=10&&(d=!0),d&&(o=o.slice(0,3),a=a.slice(0,3),i=i.slice(0,3),c=c.slice(0,3)),t=[],t=t.concat(o),t=t.concat(a),t=t.concat(i),t=t.concat(c),t=t.map(function(e){return e=Object.assign({},e),e.name&&(e.name=e.name.replace(/\s*:[^:]+:\s*/g,"")),e.forced=!0,e}),t.push({name:_("Show more results"),forced:!0,fixed_bottom:!0,type:"search"}),t},a=function(e,r){var n;switch(t=DIV(),$add(t,n=$setHTML(SPAN({c:"ist_complete_content"}),"<span>".concat(r,"</span>"))),e.type){case"project":$ATT(t,DIV({c:"ist_complete_icon"},h.createColor(e,!1)));var o=g.getParent(e);o&&$add(n,I({c:"auto_complete_parent"},o.name));break;case"label":$ATT(t,DIV({c:"ist_complete_icon"},P(e)));break;case"filter":$ATT(t,DIV({c:"ist_complete_icon"},S(e)));break;case"item":var a=(0,s.plainItemText)(e.content);$setHTML(n,a),$ATT(n,DIV({c:"auto_complete_task"}));break;case"search":$addClass(t,"auto_complete_search"),$ATT(t,DIV({c:"ist_complete_icon"},m.get("sm2/magnifying_glass.svg")));break;default:$ATT(n,DIV())}return t},i=function(t,r){switch(r.type){case"project":h.setCurrentById(r.id,r.id,null,!0);break;case"item":if(window.User.is_premium){var n=O.getState();(0,u.isDoistUser)(n)&&(0,d.itemGetByID)(n,r.id)?O.dispatch((0,c.detailViewShowItem)(r.id)):y.showItemNotes(r.id)}else h.setCurrentById(r.project_id,r.id);break;case"label":O.dispatch((0,l.showLabelView)(r.name,{bottomListSelected:!0}));break;case"filter":O.dispatch((0,l.showFilterView)(r.id,{bottomListSelected:!0}));break;case"search":var o="q:".concat(e.value);O.dispatch((0,l.showQueryView)(o));break;case"today":O.dispatch((0,l.showTodayView)());break;case"seven_days":O.dispatch((0,l.show7DaysView)())}return p.hide(),v.blur(),!1},f=function(e,t,r){t.istcomplete_word||(t.istcomplete_word=t.value,r.require_trigger=!1,r.wildcard_match=!0,r.omni_match=!0,r.onNoMatches=function(){return p.hide(),!1},r.collection=o,r.filterItem=a,r.onclick=i)};this.complete_data={preselect_match:!1,sort_results:!1,keyPressListener:f,collection:o,filterItem:a,onclick:i,var_height:"40vh",offset_top:6},p.attach(e,this.complete_data);var j=function(){0===e.value.length&&p.hide()};return $AEV(e,"focus",function(){track("navigation","tapped","quick_find")}),$AEV(e,"blur",function(){setTimeout(j,10)}),$AEV(e,"keyup",j),$AEV(e,"keydown",function(t){if(13===t.keyAscii){if(!$child(document,"td","current_match"))return track("navigation","enter","quick_find"),O.dispatch((0,l.showQueryView)(e.value)),e.blur(),!1}return!(13===t.keyAscii&&!t.shift&&p.isShown())&&((27!==t.keyAscii||!p.isShown())&&void 0)})}},{key:"getByFilters",value:function(e){var t=[],r=_("Today");-1!==r.toLowerCase().indexOf(e)&&t.push({name:r,type:"today"});var n=_("Next 7 days");return-1!==n.toLowerCase().indexOf(e)&&t.push({name:n,type:"seven_days"}),t}}]),e}();t.exports=new k},{"../../models/Colors":149,"../../models/FiltersModel":154,"../../models/ItemsModel":155,"../../models/LabelsModel":156,"../../models/ProjectsModel":159,"../../reducers/detailView":1092,"../../reducers/items":1100,"../../reducers/mainView":1109,"../../reducers/user":1135,"../../stores/store":1140,"../../utils":1176,"../agenda/AgendaUtils":8,"../notes/Notes.js":46,"../projects_list/ProjectListUtils":72}],76:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.IstComplete,s=window,u=s.IstTooltip,c=e("./AutoComplete"),d=function(){function e(){n(this,e),this.getValue=this.getValue.bind(this),this.setValue=this.setValue.bind(this),this.setPlaceholder=this.setPlaceholder.bind(this),this.focus=this.focus.bind(this),this.select=this.select.bind(this),this.blur=this.blur.bind(this),this.render=this.render.bind(this),this.renderSearchIcon=this.renderSearchIcon.bind(this),this.renderHelpIcon=this.renderHelpIcon.bind(this)}return a(e,[{key:"getValue",value:function(){return this.input.value}},{key:"setValue",value:function(e){this.input.value=e}},{key:"setPlaceholder",value:function(e){e||(e=_("Quick Find")),this.input_placeholder=e,this.input.placeholder=e}},{key:"focus",value:function(){this.input.focus()}},{key:"select",value:function(){this.input.select()}},{key:"blur",value:function(){this.input.placeholder=this.input_placeholder,this.input.value="",this.input.istcomplete_word="";try{this.input.blur()}catch(e){}}},{key:"render",value:function(){this.input_placeholder=_("Quick Find"),this.input=INPUT({class:"quick_find fixed_pos",type:"text text_box",placeholder:this.input_placeholder,autocomplete:"off",autocorrect:"off",spellcheck:"false"}),c.attach(this.input);var e=DIV();$add(e,this.renderSearchIcon()),$AEV(this.icon_search,"click",this.focus),$add(e,this.input);var t=this.renderHelpIcon();$add(e,t),$add($("quick_find"),e)}},{key:"renderSearchIcon",value:function(){return this.icon_search=svgs.get("sm1/search.svg",{className:"search_icon"}),this.icon_search}},{key:"renderHelpIcon",value:function(){var e,t=this;return this.icon_help=e=A({href:"/Help/Filtering",c:"help_icon",target:"_blank","data-track":"navigation|quick_find_help"},this.icon_help_sprite=svgs.get("sm1/question.svg")),$AEV(this.icon_help_sprite,"click",function(){return!0}),u.showSimpleText(e,SPAN(_("Open Quick Find by typing f"),BR(),_("Press here for more help")),null,10,-23),$hide(e),$AEV(this.input,"keydown",function(e){if(e.key&&"Escape"===e.key||27===e.keyCode)return l.isShown()?l.hide():t.input.blur(),!1}),$AEV(this.input,"focus",function(){$addClass(t.input,"quick_find_focused"),$addClass($("quick_find"),"is_focused"),$show(e)}),$AEV(this.input,"blur",function(){setTimeout(function(){$removeClass(t.input,"quick_find_focused"),$removeClass($("quick_find"),"is_focused"),$hide(e)},200),setTimeout(l.hide,300)}),e}}]),e}();t.exports=new d},{"./AutoComplete":75}],77:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(E()||j())&&!0!==e?(window.refresh_to&&(clearTimeout(window.refresh_to),window.refresh_to=null),window.refresh_to=setTimeout($p(o,e),500)):(window.refresh_real&&(clearTimeout(window.refresh_real),window.refresh_real=null),window.refresh_real=setTimeout($p(O,e),50))}function a(){window.refresh_to&&(clearTimeout(window.refresh_to),window.refresh_to=null),window.refresh_real&&(clearTimeout(window.refresh_real),window.refresh_real=null),O(!0)}Object.defineProperty(r,"__esModule",{value:!0}),r.refreshInterface=o,r.instantRefreshInterface=a,r.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../logger/Logger")),l=n(e("../../stores/store")),s=n(e("../../stores/subscribeSelected")),u=e("../../constants/constants"),c=window,d=c.GB_getLast,f=window,p=f.Signals,m=e("../agenda/Agenda.js"),h=e("../../components/project_editor/ProjectEditorManager"),_=e("../../components/projects_list/ProjectList"),y=e("../../models/StateModel"),v=e("../../menus/MenuProjectList.js"),g=e("../../menus/MenuProjectEditor.js"),b=e("../../menus/MenuAgendaEdit.js"),w=e("../../components/onboarding/Onboarding"),E=window.isEditingOn=function(){var e=v.get()||{},t=g.get()||{},r=b.get()||{},n=!1;n=n||d(),n=n||y.get("drag_and_drop_mode")===y.DragMode.reordering,(h.current_form||t.shown||r.shown)&&(n=!0);var o=h.getCurrentEditor();return o&&o.isArchived()&&(n=!0),e.shown&&(n=!0),$all("form","section_form").length>0&&(n=!0),$all("li","manager").length>0&&(n=!0),$all("div","drag_and_drop_handler").length>0&&(n=!0),$all("li","selected").length>0&&(n=!0),$all("div","scheduler").length>0&&(n=!0),w.isCompleteAnimationInProgress()&&(n=!0),n},j=function(){return $$(".search_holder").length>0},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(!1===e&&E())return o(e),!1;var t=m.get();_.is_inited&&_.reRender();var r=h.getCurrentEditor();if(r&&r.isArchived())return o(!1),!1;var n=l.default.getState(),a=n.mainView;if(a.reactView)return;a.type===u.MAIN_VIEW_TYPE_PROJECT&&p.sendSignal("projects.rerender.all");-1!==[u.MAIN_VIEW_TYPE_QUERY,u.MAIN_VIEW_TYPE_LABEL,u.MAIN_VIEW_TYPE_FILTER,u.MAIN_VIEW_TYPE_TODAY,u.MAIN_VIEW_TYPE_7_DAYS].indexOf(a.type)&&t.refresh()}catch(e){i.captureError(e,{tags:{where:"RefreshInterface"}})}};p.connect("refresh_interface",o),p.connect("instant_refresh_interface",a),(0,s.default)(l.default,function(e){return e.clock},function(){a()}),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&o()});var S={refreshInterface:o,instantRefreshInterface:a};r.default=S},{"../../components/onboarding/Onboarding":52,"../../components/project_editor/ProjectEditorManager":62,"../../components/projects_list/ProjectList":71,"../../constants/constants":98,"../../logger/Logger":129,"../../menus/MenuAgendaEdit.js":134,"../../menus/MenuProjectEditor.js":138,"../../menus/MenuProjectList.js":140,"../../models/StateModel":165,"../../stores/store":1140,"../../stores/subscribeSelected":1141,"../agenda/Agenda.js":5}],78:[function(e,t,r){"use strict";var n=window.Signals,o=window.TooptipWin,a=window.GB_showHTML,i=e("./RemindersManager"),l=e("../../containers/premium_promo/PremiumOnlyModal"),s=e("../../models/Reminders").RemindersModel,u={current_manager:null,renderHolder:function(e){var t=DIV();return this.current_manager=new i(e,t),this.current_manager.render(),t},showTooltip:function(e,t){if(!s.featureEnabled())return l.showReminder();var r=$position(t),a=u.renderHolder(e),i={fn_left_offset:function(){return window.MINI_VERSION?r.x-220:r.x-180},fn_top_offset:function(){return r.y+35},fn_arrow_left:function(){return r.x+8},fixed_pos:$hasClass(t,"fixed_pos"),fn_on_hide:function(){var e=u.current_manager;e&&(e.clean(),u.current_manager=null),n.sendSignal("focus_current_item_input")}},c=o.show(_("Reminders"),a,210,300,i);$addClass(c.g_window,"manage_reminders")},show:function(e){if(!s.featureEnabled())return l.showReminder();var t=u.renderHolder(e);return a(_("Reminders"),t,350,300),!1}};t.exports=u},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/Reminders":161,"./RemindersManager":82}],79:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../../utils"),l=window,s=l.DateUtils,u=window,c=u.DateistDateHelpers,d=window,f=d.IstButton,p=window,m=p.GB_hide,h=window,y=h.IstCompleteSelect,v=e("../avatars/Avatars"),g=e("../opener/WindowOpener.js"),b=e("../../models/Reminders"),w=b.BufferedRemindersModel,E=e("../../models/Reminders"),j=E.RemindersModel,O=e("../../models/Collaborators"),S=e("../../menus/MenuRemindersTypes"),P=e("./RemindersLocation"),I=e("./RemindersConst.js"),k=e("../../containers/premium_promo/PremiumOnlyModal"),T=e("../../models/DateExt").default,C=e("../themes/Themes"),D=_x("reminder_notify","Me"),M=function(){function e(t,r){n(this,e),this.onChangeInterface=this.onChangeInterface.bind(this),this.reRender=this.reRender.bind(this),this.render=this.render.bind(this),this.renderAbsolute=this.renderAbsolute.bind(this),this.renderRelative=this.renderRelative.bind(this),this.addReminder=this.addReminder.bind(this),this.generateSharedServices=this.generateSharedServices.bind(this),this.renderServiceSelector=this.renderServiceSelector.bind(this),this.clean=this.clean.bind(this),this.manager=t,r&&r.due&&r.due.with_time?this.current_interface="relative":this.current_interface="absolute";var o=window.User.auto_reminder;void 0!==o&&-1!==o||(o=30),this.relative_items=[];for(var a in I.min_to_words){var i=I.min_to_words[a];a=parseInt(a);var l={id:a,name:i};a===o&&(this.current_relative_select=l),this.relative_items.push(l)}S.init()}return a(e,[{key:"onChangeInterface",value:function(e){return"location"===e&&!window.User.is_premium&&$all("li","reminder").length>=1?k.showReminder():(this.current_interface=e,this.reRender(),S.get().hide(),!1)}},{key:"reRender",value:function(){var e=this.adder;$swap(e,this.render()),$remove(e)}},{key:"render",value:function(){var e,t=this;this.adder_below=DIV({c:"adder_below"}),e="absolute"===this.current_interface?this.renderAbsolute():"relative"===this.current_interface?this.renderRelative():P.render(this.adder_below);var r=f.createButton(_("Add reminder"),null,"red");return $AEV(r,"click",function(){return t.addReminder(),!1}),this.adder=DIV(DIV({c:"adder"},this.renderSwitcher(),e),this.adder_below,DIV(A({href:"/Help/Reminders",target:"_blank",c:"help"},svgs.get("sm1/question.svg")),r)),this.adder}},{key:"renderAbsolute",value:function(){var e=this,t=_("today at 2pm"),r=this.absolute_input=INPUT({placeholder:t});return $AEV(r,"keydown",function(t){if(13===t.keyAscii)return e.addReminder(),!1}),setTimeout(function(){return r.focus()},150),DIV({c:"absolute"},this.renderServiceSelector(),r)}},{key:"renderRelative",value:function(){var e,t=this,r=function(){return _("%s before").replace("%s",t.current_relative_select.name)},n=A({href:"#",c:"icon relative_selector"},e=SPAN(r()),svgs.get("sm1/caret.svg"));return $AEV(n,"click",function(){var o={selectedItem:function(){return t.current_relative_select},collection:function(){return t.relative_items},filterItem:function(e){return DIV({c:"complete_item"},e.name)},onSelect:function(n){return t.current_relative_select=n,$replace(e,r()),m()},wildcard_match:!0},a=new y(o);return a.showTooltip({icon:n,title:_("Remind me"),arrow_left_offset:5,top_offset:35,left_offset:30,fn_on_hide:function(){return a=null}}),!1}),DIV({c:"relative"},this.renderServiceSelector(),n)}},{key:"checkReminderLimit",value:function(){return"location"===this.current_interface&&j.hasExceededMaxLimitForLocRmd()?(alert(_("You\u2019ve reached the location-based reminder limit.")+"\n\n"+(0,i.format)(_("We limit the number of location-based reminders to {n} per account to keep the app fast and stable. Delete old reminders to make room for more."),{n:300})),!1):"location"===this.current_interface||!j.hasExceededMaxLimitForTimeRmd()||(alert(_("You\u2019ve reached the reminder limit.")+"\n\n"+(0,i.format)(_("We limit the number of reminders to {n} per account to keep the app fast and stable. Delete old reminders to make room for more."),{n:700})),!1)}},{key:"addReminder",value:function(){var e=this;if(!window.User.is_premium&&$all("li","reminder").length>=1)return k.showReminder();if(this.checkReminderLimit()){var t=function(t){return w.add(t),e.manager.viewer.reRender(),e.absolute_input&&(e.absolute_input.value=""),e.manager.updateParentItem(!0)};if("location"===this.current_interface)P.getPlaceResolved(function(e){if(!e)return alert(_("Please select a location first"),function(){return P.input.focus()}),!1;var r={item_id:w.getCurItem().id,type:"location"};return $update(r,e),P.reset(),P.input.focus(),t(r)});else{var r={item_id:w.getCurItem().id,service:"default"};if("absolute"===this.current_interface){var n=this.parseDate(this.absolute_input.value);if(n.error)return alert(n.error,function(){var t=function(){return e.absolute_input.focus()};return setTimeout(t,200)}),!1;r.due=T.fromDateist(n),r.type="absolute"}else r.minute_offset=this.current_relative_select.id,r.type="relative";this.current_service_select&&this.current_service_select.notify_uid&&(r.notify_uid=this.current_service_select.notify_uid),t(r)}return!1}}},{key:"renderSwitcher",value:function(){var e=this.getReminderTypeIcon(this.current_interface),t=svgs.get("sm1/caret.svg");$addClass(t,"menu_icon");var r=A({href:"#",c:"switcher menu"},e,t);return $AEV(r,"click",function(e){return S.get().toggle(r,r,e),!1}),r}},{key:"generateSharedServices",value:function(e){var t=[],r={notify_uid:window.User.id,name:D+" ("+window.User.full_name+")"};$update(r,window.User),t.push(r);var n=!0,o=!1,a=void 0;try{for(var i,l=O.getAll(e)[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value,u={notify_uid:s.id};$update(u,s),s.id!==window.User.id&&(u.name=s.full_name.split(" ")[0],t.push(u))}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return t}},{key:"renderServiceSelector",value:function(){var e=this,t=w.getCurItem();if(O.isProjectShared(t.project_id)){var r=_("Who to notify"),n=function(){var t=e.current_service_select;return v.renderAvatar(t,"small",C.theme)};this.current_service_select=window.User;var o=o=SPAN(n()),a=A({href:"#",c:"service_selector"},o,svgs.get("sm1/caret.svg")),i=this.generateSharedServices(t.project_id);return $AEV(a,"click",function(){var t={selectedItem:function(){return e.current_service_select},collection:function(){return i},filterItem:function(e){var t,r;return e.notify_uid?(t=v.renderAvatar(e,"small",C.theme),r=e.name):(t=v.renderAvatar(window.User,"small",C.theme),r=D+" ("+e.name+")"),DIV({c:"complete_item"},t,r)},onSelect:function(t){if(m(),"settings"===t.id?g.showPrefs("reminders"):(e.current_service_select=t,$replace(o,n())),e.absolute_input)return e.absolute_input.focus()},wildcard_match:!0},l=new y(t);return l.showTooltip({icon:a,title:r,arrow_left_offset:5,top_offset:35,left_offset:170,fn_on_hide:function(){return l=null}}),!1}),a}}},{key:"clean",value:function(){$remove(this.adder),$remove(this.adder_below),$remove(this.absolute_input),this.manager=null,this.adder=null,this.adder_below=null,this.absolute_input=null}},{key:"parseDate",value:function(e){var t=s.parse(e);if(""===e)return{error:_("Date can't be empty")};if(t.error||!t.due_date)return{error:_("Invalid date")};if(t.due_date&&!c.has_time(t.due_date)){var r=t;if(t=s.parse(t.date_string+" @ 9:00"),t.due_date){var n=new Date;if(c.day_diff(n,t.due_date)>=365){var o=n.getHours()+3,a="00";o>23&&(o=23,a=29),t=s.parse(r.date_string+" @ "+o+":"+a)}}}return t}},{key:"getReminderTypeIcon",value:function(e){switch(e){case"absolute":return svgs.get("sm1/history.svg");case"relative":return svgs.get("sm1/clock.svg");case"location":return svgs.get("sm1/location_mark.svg");default:return svgs.get("sm1/history.svg")}}}]),e}();t.exports=M},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../menus/MenuRemindersTypes":142,"../../models/Collaborators":148,"../../models/DateExt":152,"../../models/Reminders":161,"../../utils":1176,"../avatars/Avatars":17,"../opener/WindowOpener.js":53,"../themes/Themes":95,"./RemindersConst.js":80,"./RemindersLocation":81}],80:[function(e,t,r){"use strict";t.exports.min_to_words={0:_("0 min"),10:_("10 min"),30:_("30 min"),45:_("45 min"),60:_("1 hour"),120:_("2 hours"),180:_("3 hours"),1440:_("1 day"),2880:_("2 days"),4320:_("3 days"),10080:_("1 week")}},{}],81:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Indicator,s=window,u=s.GB_hide,c=window,d=c.IstCompleteSelect,f=e("../../models/RemindersLocationModel"),p=function(){function e(){n(this,e),this.render=this.render.bind(this),this.getPlace=this.getPlace.bind(this),this.getPlaceResolved=this.getPlaceResolved.bind(this),this.reset=this.reset.bind(this),this._render=this._render.bind(this),this.initGoogleMaps=this.initGoogleMaps.bind(this),this.selectLocation=this.selectLocation.bind(this),this.showLastLocations=this.showLastLocations.bind(this),this.loadGoogle=this.loadGoogle.bind(this),this.loaded=this.loaded.bind(this),this.nearbySearch=this.nearbySearch.bind(this),this.load_timeout=null,this.callbacks=[]}return a(e,[{key:"render",value:function(e){var t=this;if(window.google&&window.google.maps)return this._render(e),this.holder;var r=DIV({c:"location_selecter_holder"},l.cssSpinner()),n=function(){$replace(r,t._render(e))};return this.loadGoogle(n),r}},{key:"formatPlace",value:function(e,t){return{name:e,loc_lat:"".concat(t.lat()),loc_long:"".concat(t.lng()),loc_trigger:$selectValue(this.gtrigger),radius:100}}},{key:"getPlace",value:function(){if(this.place&&this.gmarker){var e=this.gmarker.getPosition();return this.formatPlace(this.place.name,e)}}},{key:"getPlaceResolved",value:function(e){var t=this;if(this.place&&this.gmarker){var r=this.gmarker.getPosition();this.start_location&&r.lat()===this.start_location.lat()&&r.lng()===this.start_location.lng()?e(this.formatPlace(this.place.name,r)):this.nearbySearch(r,function(n){n=n||t.place.name,e(t.formatPlace(n,r))})}else e(null)}},{key:"reset",value:function(){this.input.value="",$hide(this.gholder),this.place=null,this.start_location=null}},{key:"_render",value:function(e){var t=this,r=A({href:"#",c:"service_selector"},svgs.get("sm1/caret.svg"),svgs.get("sm1/location_mark.svg"));return r.reuseable=!0,$AEV(r,"click",$p(this.showLastLocations,r)),this.holder||(this.holder=DIV({c:"location_selecter"},r,this.input=INPUT({type:"text",placeholder:_("Type location"),reuseable:!0})),this.initGoogleMaps(this.input,e)),this.place=null,this.input.value="",setTimeout(function(){t.input.focus()},100),$AEV(this.input,"keyup",function(){""===t.input.value&&$hide(t.gholder)}),$hide(this.gholder),$replace(e,this.gholder),this.holder}},{key:"initGoogleMaps",value:function(e){var t=this;if(this.gholder)return this.gholder;var r=new window.google.maps.places.Autocomplete(e);this.gholder=DIV({c:"map_holder"},this.map_canvas=DIV({c:"map"}),this.gtrigger=SELECT(OPTION({value:"on_enter",selected:"selected"},_("When I arrive")),OPTION({value:"on_leave"},_("When I leave")))),window.google.maps.event.addListener(r,"place_changed",function(){t.place=r.getPlace(),t.place.geometry&&t.selectLocation(t.place.geometry)})}},{key:"selectLocation",value:function(e){if($show(this.gholder),!this.gmap){var t={zoom:17,mapTypeControl:!1,zoomControl:!0,streetViewControl:!1};this.gmap=new window.google.maps.Map(this.map_canvas,t),this.gmarker=new window.google.maps.Marker({map:this.gmap,anchorPoint:new window.google.maps.Point(0,-29),draggable:!0})}this.gmarker.setPosition(e.location),this.gmarker.setVisible(!0),this.start_location=this.gmarker.getPosition(),e.viewport?this.gmap.fitBounds(e.viewport):(this.gmap.setCenter(e.location),this.gmap.setZoom(17))}},{key:"showLastLocations",value:function(e){var t=this,r={selectedItem:function(){return null},collection:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,a=f.getLastLocations()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;e.push({name:i[0],loc_lat:parseFloat(i[1]),loc_long:parseFloat(i[2])})}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},filterItem:function(e,t){return $setHTML(DIV({c:"complete_item"}),t)},txt_no_matches_found:_("No recent locations found."),onSelect:function(e){t.place={name:e.name},t.input.value=e.name;var r={location:new window.google.maps.LatLng(e.loc_lat,e.loc_long),viewport:null};return t.selectLocation(r),u(),!1},wildcard_match:!0},n=new d(r);return n.showTooltip({icon:e,title:_("Recent locations"),arrow_left_offset:5,top_offset:35,left_offset:170,fn_on_hide:function(){return n=null}}),!1}},{key:"loadGoogle",value:function(e){var t=this;if(!window.google||!window.google.maps)return this.load_timeout&&clearTimeout(this.load_timeout),this.callbacks.push(e),$add($body(),SCRIPT({src:"https://maps.googleapis.com/maps/api/js?libraries=places&async=2&callback=RemindersLocation.loaded&key=AIzaSyCXMDZI-DQwpQ72521KB_V45LXL1Zm_lHU&sensor=false"})),this.load_timeout=setInterval(function(){window.google&&window.google.maps&&t.loaded()},500)}},{key:"loaded",value:function(){this.load_timeout&&(clearTimeout(this.load_timeout),this.load_timeout=null);var e=!0,t=!1,r=void 0;try{for(var n,o=this.callbacks[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){(0,n.value)()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}this.callbacks=[]}},{key:"nearbySearch",value:function(e,t){var r=new window.google.maps.LatLng(e.lat(),e.lng()),n={location:r,radius:"5"};new window.google.maps.places.PlacesService(this.gmap).nearbySearch(n,function(e){return t(e&&e.length>0?e[0].name:null)})}}]),e}();window.RemindersLocation=new p,t.exports=window.RemindersLocation},{"../../models/RemindersLocationModel":162}],82:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../../models/Reminders"),l=i.BufferedRemindersModel,s=e("../../models/ItemsModel"),u=e("../items_utils/ItemDueDates.js"),c=e("./RemindersAdder"),d=e("./RemindersViewer"),f=e("../../menus/MenuRemindersTypes"),p=function(){function e(t,r){n(this,e);var o;this.render=this.render.bind(this),this.updateParentItem=this.updateParentItem.bind(this),this.holder=r,t?(o=s.getById(t.json.id))&&(l.cur_item=o,l.use_buffered=!1):(l.use_buffered=!0,o=l.getCurItem()),this.viewer=new d(this),this.adder=new c(this,o),f.init(this),o&&o.due&&o.due.with_time?f.get().setRelativePossible(!0):f.get().setRelativePossible(!1),window.REMINDER_MANAGER=this}return a(e,null,[{key:"initClass",value:function(){this.prototype.min_to_words={0:_("0 min"),10:_("10 min"),30:_("30 min"),45:_("45 min"),60:_("1 hour"),120:_("2 hours"),180:_("3 hours"),1440:_("1 day"),2880:_("2 days"),4320:_("3 days"),10080:_("1 week")}}}]),a(e,[{key:"render",value:function(){var e=DIV({c:"reminder_manager"},this.viewer.render(),this.adder.render());$replace(this.holder,e)}},{key:"updateParentItem",value:function(e){if(!l.use_buffered){var t=l.getCurItem();if(!t)return;var r=!0,n=!1,o=void 0;try{for(var a,i=$all("li","item_".concat(t.id))[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value,c=$all("span","date",s);c=c.length>0?c[0]:$all("td","column_project",s)[0],u.updateAlarmIcon(c,e)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}var d=$("reminders_icon");this.viewer.is_empty?$removeClass(d,"active"):$addClass(d,"active")}},{key:"clean",value:function(){this.adder.clean(),this.viewer.clean(),this.adder=null,this.viewer=null,window.REMINDER_MANAGER=null}}]),e}();p.initClass(),t.exports=p},{"../../menus/MenuRemindersTypes":142,"../../models/ItemsModel":155,"../../models/Reminders":161,"../items_utils/ItemDueDates.js":31,"./RemindersAdder":79,"./RemindersViewer":83}],83:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../../utils"),l=window,s=l.DateistDateHelpers,u=window,c=u.DateUtils,d=window,f=d.svgs,p=e("../avatars/Avatars"),m=e("../../models/Reminders"),h=m.BufferedRemindersModel,y=e("../../models/Collaborators"),v=e("./RemindersConst.js"),g=e("../themes/Themes"),b=function(e){switch(e){case"absolute":return f.get("sm1/history.svg");case"relative":return f.get("sm1/clock.svg");case"location":return f.get("sm1/location_mark.svg");default:return f.get("sm1/history.svg")}},w=function(){function e(t){n(this,e),this.reRender=this.reRender.bind(this),this.render=this.render.bind(this),this.deleteNotification=this.deleteNotification.bind(this),this.clean=this.clean.bind(this),this.manager=t}return a(e,null,[{key:"initClass",value:function(){this.renderRaw=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};void 0===n.delete_possible&&(n.delete_possible=!0);var o=UL({c:"reminder_viewer"});0===t.length&&$addClass(o,"is_empty"),r=!!y.isProjectShared(e.project_id);var a=!0,l=!1,u=void 0;try{for(var d,m=t[Symbol.iterator]();!(a=(d=m.next()).done);a=!0){var h,w=d.value,E=null;if(r){var j=y.getUserById(w.notify_uid||window.User.id);j&&(E=p.renderAvatar(j,"small",g.theme))}E||(E=b(w.type));var O="",S="";if("absolute"===w.type)if(w.due.is_recurring){var P=w.due.string;O=P}else{var I=w.due.toDate(),k=c.humanizeDayDiff(s.day_diff(new Date,I),I);O=k}else if("relative"===w.type){var T=v.min_to_words[w.minute_offset];O=void 0!==T?_("%s before").replace("%s",T):(0,i.format)(_nx("reminder","1 min before","{n} min before",w.minute_offset),{n:w.minute_offset})}else"location"===w.type&&(O=w.name,S="on_enter"===w.loc_trigger?_("When I arrive"):_("When I leave"));n.delete_possible&&(h=A({href:"#",c:"trash"},f.get("sm1/trash.svg")),$AEV(h,"click",$p(n.fn_delete_notification,w.id)));var C=void 0;C=S.length>0?SPAN({c:"text"},B(O),BR(),S):SPAN({c:"text"},B(O)),$add(o,LI({c:"reminder"},h,DIV(E,C)))}}catch(e){l=!0,u=e}finally{try{a||null==m.return||m.return()}finally{if(l)throw u}}return o}}}]),a(e,[{key:"reRender",value:function(){var e=this.viewer;$swap(e,this.render()),$remove(e)}},{key:"render",value:function(){var t=h.getCurrentReminders(),r=h.getCurItem();0===t.length?this.is_empty=!0:this.is_empty=!1;var n={fn_delete_notification:this.deleteNotification};return this.viewer=e.renderRaw(r,t,n),this.viewer}},{key:"deleteNotification",value:function(e){h.remove(e),this.reRender();var t=h.getCurrentReminders();return this.manager.updateParentItem(t.length>0),!1}},{key:"clean",value:function(){$remove(this.viewer),this.manager=null,this.viewer=null}}]),e}();w.initClass(),t.exports=w},{"../../models/Collaborators":148,"../../models/Reminders":161,"../../utils":1176,"../avatars/Avatars":17,"../themes/Themes":95,"./RemindersConst.js":80}],84:[function(e,t,r){"use strict";var n=new Class({init:function(e,t){$bindMethods(this),this.field=e,this.clone=ICE.DIV({class:"auto_exapnd_clone"},"-"),$add($body(),this.clone),$addClass(e,"auto_exapnd");var r="keypress";this.extra_h=0,($isIe()||$isSafari())&&(r="keydown"),$AEV(e,r,this.keyPress),$AEV(e,"focus",this.resize);var n=this;$AEV(e,"paste",function(){setTimeout(n.resize,100)}),e.resize_textarea=this.resize,e.resize=this.resize,this.escape_cr=!1!==t},keyPress:function(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.resize,10)},resize:function(){var e=this.field,t=this.clone;if(e&&0!==e.clientHeight){t.style.width=e.offsetWidth+"px";var r;if(r=e.proxyGetValue?e.proxyGetValue():e.value,r=r.replace(/</g,"&gt;"),r=r.replace(/\n\r?/g,"<br>--"),""===r&&(r="T"),this.clone.innerHTML=r,t.offsetHeight!=this.old_height){var n=t.offsetHeight;e.style.height=n+this.extra_h+"px",this.old_height=n}}},remove:function(){$remove(this.clone),this.clone=null,this.field=null}});t.exports=n},{}],85:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){
throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var c=window,d=c.LibEdit,f=window,p=f.DateUtils,m=window,h=m.Dateist,y=window,v=y.DateistUtils,g=window,b=g.IstComplete,w=window,E=w.Signals,j=window,O=(j.$static_path,e("../project_editor/ProjectEditorManager")),S=e("../../models/LabelsModel"),P=e("../../models/ProjectsModel"),I=e("../../models/Collaborators"),k=e("../../models/DateExt").default,T=function(){function e(){l(this,e),this.annotateFormData=this.annotateFormData.bind(this),this.attach=this.attach.bind(this),this.setCurrentProject=this.setCurrentProject.bind(this),this.setCurrentPerson=this.setCurrentPerson.bind(this),this.deselectPriority=this.deselectPriority.bind(this),this.generateUserMatcher=this.generateUserMatcher.bind(this),this.generateProjectMatcher=this.generateProjectMatcher.bind(this);var t=_("priority");this.re_priority=new RegExp("(?:(?:^|\\s)!!|\\bp|".concat(t,")\\s*(1|2|3|4)(?=\\s|$)"),"g")}return u(e,null,[{key:"initClass",value:function(){this.prototype.truncate_links=!1,this.prototype.highlight_labels=!0,this.prototype.highlight_project=null,this.prototype.highlight_person=null,this.prototype.highlight_priority=null,this.prototype.re_labels=/(?:^|\s+)@([^\s,]+)/g,this.prototype.re_links=/[\w-]+:\/\/[^\s]+/g,this.prototype.re_special_chars=/([+.?*+^$[\]\\(){}|_&-])/g}}]),u(e,[{key:"annotateFormData",value:function(e,t){var r,n={};for(var o in e.matches){var a=e.matches[o];switch(a[0]){case"priority":this.highlight_priority&&(t.content=t.content.replace(a[1],""),t.priority=5-a[2]);break;case"date":t.content=t.content.replace(a[1],""),r=a[2],r&&r.has_only_time&&t.due?t.due=t.due.inheritDate({year:t.due.getFullYear(),month:t.due.getMonth(),day:t.due.getDate(),hours:r.due_date.getHours(),minutes:r.due_date.getMinutes(),seconds:0},{withTime:!0,timezone:t.due.timezone}):t.due=k.fromDateist(r);break;case"project":this.highlight_project&&(t.content=t.content.replace(a[1],""),t.project_id=this.highlight_project[0],t.item_order=null,t.indent=1);break;case"person":this.highlight_person&&(t.content=t.content.replace(a[1],""),t.responsible_uid=this.highlight_person[0],t.inherit_asignee=!1);break;case"label":this.highlight_labels&&(n[a[3]]=a)}}var i=[],l=!0,s=!1,u=void 0;try{for(var c,d=$$("b.t_label",e)[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value,p=f.json[3];if(p&&-1!==p.indexOf("@")){var m=n[p],h=p.replace("@","");m&&(t.content=t.content.replace(m[1],""),i.push(h))}}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}return t.labels=i,t.content=$strip(t.content.replace(/\s\s+/," ")),t}},{key:"attach",value:function(e,t){var r,o,a=this;h.clear_free_text_cache(),e.ignored={},e.matches={},e.initial_has_content=t,e.dateist_disabled=!1,this.highlight_project=null,this.highlight_person=null,this.highlight_priority=null,this.re_project_matchers=null,this.user_matcher_cache={},this.generateProjectMatcher();var i=function(t,n){t=t.replace(/``/g,"'"),"t_link"===n&&(a.truncate_links=!1),r=d.getCaretOffsetWithin(e),d.setCaretPositionWithin(e,r.start);var i=function(t){e.matches[t]&&delete e.matches[t],e.ignored[t]=!0};if("t_date"===n){o=v.is_spaceless_lang(window.DATEIST_LANG);var l=h.split_text(t,window.DATEIST_LANG),s=0,c=!0,f=!1,p=void 0;try{for(var m,_=l[Symbol.iterator]();!(c=(m=_.next()).done);c=!0){var y=(m.value,""),g=!0,w=!1,E=void 0;try{for(var j,O=l.slice(s)[Symbol.iterator]();!(g=(j=O.next()).done);g=!0){var S=j.value;o?y+=S:y=y+" "+S,y=v.trim(y),i(y)}}catch(e){w=!0,E=e}finally{try{g||null==O.return||O.return()}finally{if(w)throw E}}s+=1}}catch(e){f=!0,p=e}finally{try{c||null==_.return||_.return()}finally{if(f)throw p}}}else"t_project"===n?a.setCurrentProject(null):"t_person"===n&&a.setCurrentPerson(null);return i(t),b.hide(),u(),!1};e.ignore_match=i;var l=function(t){e.matches[t]&&delete e.matches[t],e.ignored[t]=!0},s=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&"));return o=v.is_spaceless_lang(window.DATEIST_LANG),t=o?"(^|\\s*)".concat(t):"(^|\\s+)".concat(t,"(?:$|(?=[\\s\\)\\]]+))"),new RegExp(t,"gi")},u=function(){var r,o,u,c,d,f,m,h={},_=e.proxyGetValue();_=_.replace(/\n/g," ");var y=_.match(a.re_priority);if(y){y=_.match($last(y)),f=$strip(y[0]);var v=parseInt(f.match(/\d+/)[0]);e.ignored[f]||(a.highlight_priority=h[f]=["priority",s(f),parseInt(v),f])}if(a.highlight_labels){var g=_.match(a.re_labels);if(g){var w=null;b.current_input&&(w=b.current_input.istcomplete_word||null);var E=!0,j=!1,I=void 0;try{for(var k,T=g[Symbol.iterator]();!(E=(k=T.next()).done);E=!0){var C=k.value;if(C=$strip(C),w!==C){S.getByName(C.replace("@","").toLowerCase()).length>0&&(e.ignored[C]||(h[C]=["label",s(C),C,C.replace("$","$$$$")]))}}}catch(e){j=!0,I=e}finally{try{E||null==T.return||T.return()}finally{if(j)throw I}}}}var D=window.User;if(!(void 0!==D.features.dateist_inline_disabled?D.features.dateist_inline_disabled:D.dateist_inline_disabled)&&!e.dateist_disabled){var A=p.parse(_,null,!0,e.ignored);if(A&&A.due_date){var M=A.date_string_matched,x=A.pos[0];"@"===(0===x?null:_[x-1])||0===M.indexOf("@")||e.ignored[M]||(h[M]=["date",s(M),A,M])}}if(a.truncate_links){var R=_.match(a.re_links);if(R){var N=!0,L=!1,$=void 0;try{for(var U,B=R[Symbol.iterator]();!(N=(U=B.next()).done);N=!0){var V=U.value;e.ignored[V]||(h[V]=["link",s(V),V,V])}}catch(e){L=!0,$=e}finally{try{N||null==B.return||B.return()}finally{if(L)throw $}}}}if(a.re_project_matchers&&(a.highlight_project&&a.highlight_project[2]||_.match(/#[^\s]+/)&&(r=a.genericPersonProjectMatcher(e,_,a.re_project_matchers))&&(a.highlight_project=r)),a.highlight_project){var F=Array.from(a.highlight_project),H=n(F,3);c=H[0],u=H[1],H[2],h[u]=["project",s(u),c,u]}if(_.match(/\+[^\s]+/)){if(c=null,a.highlight_project)c=a.highlight_project[0];else{var q=O.getCurrentEditor();q&&(c=q.project_id)}if(c){var G=P.get(c);if(G&&G.shared){var z=a.generateUserMatcher(c);r=a.genericPersonProjectMatcher(e,_,z),r&&(a.highlight_person=r)}}}if(a.highlight_person){var W,Y=Array.from(a.highlight_person),K=n(Y,3);W=K[0],u=K[1],K[2],h[u]=["person",s(u),W,u]}if(t=e.initial_has_content){for(f in h)d=h[f],"date"===d[0]&&(m=d[4]||d[3],e.ignored[m]=!0,delete h[f]);e.initial_has_content=!1}var J=_;for(f in h){var Q;if(d=h[f],m=d[4]||d[3],"link"===d[0])Q="";else if(Q=a.getIcon(d[0]),"priority"===d[0]){var X=m.indexOf(d[2]);m="\u27e6i\u27e7".concat(m.substring(0,X),"\u27e6/i\u27e7").concat(m.substring(X))}else"date"!==d[0]&&(m="\u27e6i\u27e7".concat(m.substring(0,1),"\u27e6/i\u27e7").concat(m.substring(1)));o=d[3].replace(/'/g,"``").replace("$","$$$$"),o!==d[3]&&(h[o]=d,delete h[d[3]]),J=J.replace(d[1],"$1\u27e6b id='".concat(o,"' class='t_").concat(d[0],"'\u27e7").concat(Q,"\u27e6span\u27e7").concat(m,"\u27e6/span\u27e7\u27e6/b\u27e7"))}if(t){"\u27e7"===J.charAt(J.length-1)&&(J+=" ")}e.proxySetValue(J,!1);var Z=!0,ee=!1,te=void 0;try{for(var re,ne=$all("b",null,e)[Symbol.iterator]();!(Z=(re=ne.next()).done);Z=!0){var oe=re.value;oe.onclick=oe.ignore_match=$p(i,oe.id,oe.className),oe.match_deleted=$p(l,oe.id),oe.json=h[oe.id]}}catch(e){ee=!0,te=e}finally{try{Z||null==ne.return||ne.return()}finally{if(ee)throw te}}return e.matches=h};return e.onchanged=u,e.cancelInput=function(e){var t;if(!window.getSelection)return!1;var r=window.getSelection(),n=d.getSelectedNodes();if(8===e.keyAscii&&n.length>0){n=d.getSelectedNodes();var o=function(){var e=[],r=!0,o=!1,a=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)t=i.value,"b"===$nodeName(t)&&t.match_deleted&&e.push(t)}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return e}(),a=!0,i=!1,l=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)t=s.value,t.match_deleted()}catch(e){i=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}var c=$first(n);if(c){var f=c.parentNode;f&&f.match_deleted&&f.match_deleted()}return!1}if(8===e.keyAscii){r=window.getSelection();var p=r.focusNode;if(p&&"#text"===$nodeName(p)){var m=p.parentElement;if(m){var h=m.parentElement;if(h&&"b"===$nodeName(h))return h.ignore_match&&h.ignore_match(),!0}}if(p&&27===e.keyAscii){var _=$gp(p,"div"),y=$all("b",null,_),v=$last(y);if(v&&v.ignore_match&&$hasClass(v,"t_date"))return v.ignore_match(),!0}}return!1},$AEV(e,"keydown",function(e){return!e.ctrl||66!==e.key&&73!==e.key&&85!==e.key||(e.preventDefault(),!1)})}},{key:"getIcon",value:function(e){var t;switch(e){case"project":t="sm1/quick_add_project.svg";break;case"label":t="sm1/quick_add_label.svg";break;case"person":t="sm1/quick_add_assignee.svg";break;case"priority":t="sm1/quick_add_priority.svg";break;case"date":t="sm1/quick_add_calendar.svg"}return svgs.getString(t).replace(/</g,"\u27e6").replace(/>/g,"\u27e7")}},{key:"setCurrentProject",value:function(e,t){var r=O.current_form;if(t&&r&&this.highlight_project){this.highlight_project[2]&&$remove($all("b","t_project",r))}if(t?(this.highlight_person&&this.setCurrentPerson(null),this.highlight_project=[e,t,!0]):(e=null,this.highlight_project=null),r){var n=r.people_assigner;n&&n.onProjectUpdated(e)}E.sendSignal("natural_language_project_updated",e)}},{key:"setCurrentPerson",value:function(e,t){var r=O.current_form;if(t&&r&&this.highlight_person){this.highlight_person[2]&&$remove($all("b","t_person",r))}this.highlight_person=t?[e,t,!0]:null}},{key:"deselectPriority",value:function(e){e&&(this.highlight_priority=null,$remove($all("b","t_priority",e)))}},{key:"generateUserMatcher",value:function(e){var t=window.User.id;if(!this.user_matcher_cache[e]){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=I.getAll(e)[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value,u=s.full_name||s.email;if(u=$strip(u.replace(this.re_special_chars,"\\$1")),0!==u.length){var c=[];c.push(u);var d=u.split(" ")[0],f=u.split(" "),p="";if(f.length>1){p=d+"\\s"+f[1][0]+"\\.?"}p!==u&&p.length>0&&c.push(p),d!==u&&d.length>0&&c.push(d),s.id===t&&c.push(_x("task_assignment","me")),c.length>0&&r.push([s.id,new RegExp("(?:^|\\s)\\+(?:".concat(c.join("|"),")"),"i"),u])}}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}this.user_matcher_cache[e]=r}return this.user_matcher_cache[e]}},{key:"generateProjectMatcher",value:function(){this.re_project_matchers=[];var e=!0,t=!1,r=void 0;try{for(var n,o=P.getAll()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value,i=a.name;i=$strip(i.replace(this.re_special_chars,"\\$1")),this.re_project_matchers.push([a.id,new RegExp("(?:^|\\s)#".concat(i),"i"),i])}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},{key:"genericPersonProjectMatcher",value:function(e,t,r){var o=[],a={},i={},l=!0,s=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value,p=Array.from(f),m=n(p,3),h=m[0],_=m[1],y=(m[2],t.match(_));if(y){var v=$strip(y[0]);e.ignored[v]||(o.push([y.index+v.length,h,v]),a[y.index]&&a[y.index]!==h?i[y.index]=!0:a[y.index]=h)}}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}for(var g=[],b=0,w=o;b<w.length;b++){var E=w[b];i[E[0]]||g.push(E)}if(o.length>1)return null;var j=$first(g);return j?[j[1],j[2],!1]:null}}]),e}();T.initClass(),window.NatrualLanguageParsing=new T,t.exports=window.NatrualLanguageParsing},{"../../models/Collaborators":148,"../../models/DateExt":152,"../../models/LabelsModel":156,"../../models/ProjectsModel":159,"../project_editor/ProjectEditorManager":62}],86:[function(e,t,r){"use strict";var n,o=window,a=o.LibEdit,i=window,l=i.IstComplete,s=e("../../utils/addDeferCompositionEndListener").default,u=e("../../models/Storage"),c=u.$storage,d=function(e){e.className="richtext_editor sel_richtext_editor";var t=DIV(e);if(e.generatePlaceholder){var r=m.genereate();r&&(t.placeholderText=r)}e.placeholder&&(t.placeholderText=e.placeholder),t.contentEditable=!0,t.proxyFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];setTimeout(function(){t.focus(),e&&a.setCaretPositionWithin(t,t.proxyGetValue().length)},50)};var o=null;if(t.proxySelect=function(){var e=document.createRange();e.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(e)},t.placeholderText){var i=function(){""===(t.textContent||t.innerText)?t.placeholder||(t.placeholder=SPAN({c:"rich_text_placeholder"},t.placeholderText),$AEV(t.placeholder,"contextmenu",function(e){if(e.shift)return!0;$remove(t.placeholder),t.proxyFocus()}),$addBefore(t.placeholder,t),setTimeout(function(){t.offsetWidth&&$setWidth(t.placeholder,t.offsetWidth)},50)):t.placeholder&&($remove(t.placeholder),t.placeholder=null)};o=function(){t.placeholder_ta&&clearTimeout(t.placeholder_ta),t.placeholder_ta=setTimeout(i,0)},$AEV(t,"keyup",o)}return t.proxyGetValue=function(){var e=t.textContent||t.innerText;return e=e.replace(new RegExp(l.CHAR_FORCED_WHITESPACE,"g")," "),e=e.replace(/\u00A0/g," ")},t.proxyPlaceCursor=function(){a.placeCursor(t,t.proxyGetValue().length)},$AEV(t,["keydown"],function(e){if(window.getSelection)try{if(!window.getSelection().getRangeAt(0).collapsed){var r=t.proxyGetValue().length;return window.getSelection().toString().length===r&&46===e.keyCode&&(t.proxySetValue(""),t.proxyFocus(),e.preventDefault()),!0}}catch(e){}}),$AEV(t,["keypress","paste"],function(e){if(e.clipboardData){e.preventDefault();var r=a.normalzieClipboardData(e.clipboardData.getData("text/plain"));return!(-1!==r.indexOf("\n")&&t.onMultilinePaste&&!t.onMultilinePaste(t,r))&&(document.execCommand("insertHTML",!1,r),t.onchanged&&t.onchanged(),!1)}if(e.ctrl&&e.key||e.shift)return!0;if(n&&clearTimeout(n),window.getSelection)try{if(!window.getSelection().getRangeAt(0).collapsed)return!0}catch(e){}return n=setTimeout(t.onchanged,0),!0}),s(t,function(){n&&clearTimeout(n),n=setTimeout(t.onchanged,0)}),t.proxySetValue=function(e){var r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a.getSelectedNode(),void 0===t.save_position&&(t.save_position=!0),t.save_position&&(r=a.getCaretOffsetWithin(t)),e=e.replace(/&/g,"&amp;"),e=e.replace(/(?:^\s)|(?:\s$)/g,"&nbsp;"),e=e.replace(/\s\s/g," &nbsp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/\u27e6/g,"<"),e=e.replace(/\u27e7/g,">"),t.innerHTML=e,t.placeholderText&&o&&o(),i&&t.save_position&&a.setCaretPositionWithin(t,r.start),n&&t.onchanged&&setTimeout(t.onchanged,0)},$AEV(t,"focus",function(){t.save_position=!0}),t},f=[_("Get pastries sun at 9")+" "+_("#Family"),_("Renew gym every May 1st")+" "+_("#Health"),_("Design meeting at 11am p1")+" "+_("#Meeting"),_("Learn Portuguese every 2 days")+" "+_("#Learning"),_("Buy gift tomorrow at 6pm p1")+" "+_("#Errands"),_("Read every day p3 @goals")+" "+_("#Learning"),_("Conference Wednesday at 15")+" "+_("#Meeting"),_("Family lunch on Sunday at 11am")+" "+_("#Personal")],p="WR_PlaceholderCount",m={genereate:function(){if(this.increaseCount()>=100)return null;var e=Math.floor(Math.random()*f.length);return _("e.g.")+" "+f[e]},increaseCount:function(){var e=c(p).get();if(null===e)return this.restoreCountFromServer(),100;var t=parseInt(e||0);return t+=1,c(p).set("".concat(t)),100===t&&this.markAsSeenGlobally(),t},restoreCountFromServer:function(){var e=$requestJSON("/sync/v8/tooltips/is_seen");return e.addCallback(function(e){e.result?c(p).set(100):c(p).set("0")}),e.sendReq({name:"web_ph_natrual_text",token:window.User.token})},markAsSeenGlobally:function(){$request("/sync/v8/tooltips/mark_as_seen").sendReq({name:"web_ph_natrual_text",token:window.User.token})}};t.exports=d},{"../../models/Storage":167,"../../utils/addDeferCompositionEndListener":1148}],87:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var l=n(e("react")),s=n(e("react-dom")),u=e("../../react_components/emptyState"),c=e("../../react_components/confirm_dialog"),d=window,f=d.Signals,p=window,m=p.GB_showHTML,h=window,y=h.GB_hide,v=window,g=v.IstComplete,b=window,w=b.IstButton,E=window,j=E.IstTooltip,O=window,S=O.Indicator,I=window,k=I.TooptipWin,T=e("../avatars/Avatars"),C=e("../project_editor/ProjectEditorManager"),D=e("../../containers/premium_promo/PremiumOnlyModal"),M=e("../formatter/Formatter.js"),x=e("../../models/ProjectsModel"),R=e("../projects_list/ProjectListUtils"),N=e("../../models/Collaborators"),L=e("../../reducers/tooltip"),U=L.hasSeen,V=L.markSeen,F=L.TOOLTIP_SHARING,H=e("../../stores/store").default,q=e("../themes/Themes"),G=function(){function e(){o(this,e),this.refresh=this.refresh.bind(this),this.show=this.show.bind(this),this.renderView=this.renderView.bind(this),this.switchTab=this.switchTab.bind(this),this.renderProjectTabBody=this.renderProjectTabBody.bind(this),this.renderCollaboratorSelector=this.renderCollaboratorSelector.bind(this),this.renderCollaboratorTabBody=this.renderCollaboratorTabBody.bind(this),this.renderUserRow=this.renderUserRow.bind(this),this._renderAdder=this._renderAdder.bind(this),this.render_intro_text=this.render_intro_text.bind(this),this._checkEmpty=this._checkEmpty.bind(this),this.promoCheck=this.promoCheck.bind(this),this._promoShow=this._promoShow.bind(this),this.promoRemove=this.promoRemove.bind(this),this.holder=null,this.view_data=null,this.current_project=null,this.current_tab=null,this.selected_collaborators=[],f.connect("collaborators_states_updated",this.refresh),f.connect("show_sharing_manager",this.show)}return i(e,[{key:"refresh",value:function(){if(this.current_project&&this.holder){if(""!==this.adder_input.value)return void setTimeout(this.refresh,500);this.renderView(this.current_project)}}},{key:"show",value:function(e){var t=this;this.holder=DIV({c:"sharing_manager"}),this.view_data=DIV(),this.current_tab="tab_collaborator",$add(this.holder,this.view_data),$add(this.view_data,S.cssSpinner()),m(_("Share options"),this.holder,400,400,{callback_fn:function(){g.hide(),t.current_project=null,t.holder=null},close_validator_fn:function(){return t.empty_state_holder&&(s.default.unmountComponentAtNode(t.empty_state_holder),t.empty_state_holder=null),!0}});var r=x.get(e);return r.team_inbox&&$addClass(this.holder,"team_inbox_view"),r.inbox_project?(alert(_("It's not possible to share the inbox project. Please share a regular project."),y),!1):(this.current_project=r,this.renderView(),!1)}},{key:"renderView",value:function(){var e=this;if(!this.current_project||!this.current_tab)throw Error("State @current_project, @current_tab must be set beforing rendering");var t=UL({c:"tab_nav"}),r=LI({"data-track":"share_project|collaborators"},_("Collaborators")),n=LI({"data-track":"share_project|invite_from_project"},_("Invite From Project"));$AEV(r,"click",function(){e.switchTab("tab_collaborator")}),$AEV(n,"click",function(){e.switchTab("tab_project")}),$add(t,r,n),"tab_collaborator"===this.current_tab?($addClass(r,"active"),this.renderCollaboratorTabBody()):($addClass(n,"active"),this.renderProjectTabBody()),0===x.getAll().filter(function(t){return N.isProjectShared(t.id)&&e.current_project.id!==t.id}).length&&$addClass(t,"hidden");var o=DIV(t,this.tab_body);return $swap(this.view_data,o),this.view_data=o,this.adder_input.focus()}},{key:"switchTab",value:function(e){this.current_tab=e,this.renderView()}},{key:"renderProjectTabBody",value:function(){var e=this,t=x.getAll().filter(function(t){return N.isProjectShared(t.id)&&e.current_project.id!==t.id});if(0===t.length)return void(this.tab_body=DIV({c:"blank_screen"},_("You have no other shared projects.")));var r=UL({c:"projects_list"}),n=!0,o=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s,u=i.value,c=u.name.replace(/\*\s*/,"");c=M.formatSimple(c,{only_text:!0,as_html:!1}),s=0!==u.id?R.createColor(u):SPAN({c:"blank_color"});var d=LI(s,SPAN({c:"project_name"},c));!function(t){$AEV(d,"click",function(){var r=e.renderCollaboratorSelector(t);return $swap(e.tab_body,r),e.tab_body=r})}(u),$add(r,d)}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}this.tab_body=r}},{key:"renderCollaboratorSelector",value:function(e){var t,r,n,o=this,a=DIV({c:"collaborator_selector"}),i=e.name.replace(/\*\s*/,"");i=M.formatSimple(i,{only_text:!0,as_html:!1}),r=0!==e.id?R.createColor(e):SPAN({c:"blank_color"});var l=DIV({c:"back_to_list_link"},t=svgs.get("sm1/caret.svg"),SPAN({c:"project_name"},r,i));$AEV(t,"click",function(){o.switchTab("tab_project")}),$add(a,l);var s=UL({c:"collaborator_list selectable"}),u=[],c=function(){var e=[],t=!0,r=!1,a=void 0;try{for(var i,l=N.getInvitedUsers(o.current_project.id)[Symbol.iterator]();!(t=(i=l.next()).done);t=!0)n=i.value,e.push(n.id)}catch(e){r=!0,a=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw a}}return e}(),d=function(){var e=[],t=!0,r=!1,a=void 0;try{for(var i,l=N.getActiveUsers(o.current_project.id)[Symbol.iterator]();!(t=(i=l.next()).done);t=!0)n=i.value,e.push(n.id)}catch(e){r=!0,a=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw a}}return e}(),f=!0,p=!1,m=void 0;try{for(var h,y=N.getAll(e.id)[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var v=h.value;if(v.id!==window.User.id){var g=T.renderAvatar(v,"small",q.theme),b=SPAN({c:"user_info"},B(v.full_name));c.includes(v.id)&&$add(b,SPAN({c:"status pending"},_("Pending"))),d.includes(v.id)&&$add(b,SPAN({c:"status pending"},_("Collaborator"))),$add(b,BR(),v.email);var E=SPAN({c:"check_box"},svgs.get("sm1/check_mark_big.svg")),j=LI({c:"collaborator_list_item"},E,g,b);j.collaborator=v,c.includes(v.id)||d.includes(v.id)?$addClass(j,"is_unselectable"):(u.push(j),function(e){$AEV(e,"click",function(){$hasClass(e,"is_selected")?$removeClass(e,"is_selected"):$addClass(e,"is_selected"),I()})}(j)),$add(s,j)}}}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}if($add(a,s),u.length>0){var O=function(){return u.filter(function(e){return $hasClass(e,"is_selected")}).length===u.length},S=LI({c:"batch_selector"},SPAN({c:"check_box"},svgs.get("sm1/check_mark_big.svg")),P({c:"select_all"},_("Select All")));$AEV(S,"click",function(){var e;if(O())for(var t=0,r=u;t<r.length;t++)e=r[t],$removeClass(e,"is_selected");else for(var n=0,o=u;n<o.length;n++)e=o[n],$addClass(e,"is_selected");I()});var I=function(){O()?$addClass(S,"has_all_selected"):$removeClass(S,"has_all_selected")};$addToTop(s,S);var k=w.createButton(_("Invite"),null,null,{"data-track":"share_project|collaborators_invite"});$addClass(k,"ist_button_red"),$AEV(k,"click",function(){var e=!0,t=!1,r=void 0;try{for(var n,a=$$(".collaborator_list_item.is_selected")[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var i=n.value;N.addInvite(o.current_project.id,i.collaborator.email)}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}return o.switchTab("tab_collaborator")}),$add(a,k)}return a}},{key:"renderCollaboratorTabBody",value:function(){var e;this.tab_body=DIV({c:"collaborator_tab_body"});var t=N.getActiveUsers(this.current_project.id),r=N.getInvitedUsers(this.current_project.id);if(0===t.length&&0===r.length){var n=this.render_intro_text();return e=this._renderAdder(),void $add(this.tab_body,e,n)}var o=UL({c:"collaborator_list"}),a=!0,i=!1,l=void 0;try{for(var s,u=this._sort(r)[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value,d={};$update(d,c),d.state="pending",$add(o,this.renderUserRow(d))}}catch(e){i=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}$add(o,this.renderUserRow(window.User));var f=!0,p=!1,m=void 0;try{for(var h,_=this._sort(t)[Symbol.iterator]();!(f=(h=_.next()).done);f=!0)c=h.value,c.id!==window.User.id&&$add(o,this.renderUserRow(c))}catch(e){p=!0,m=e}finally{try{f||null==_.return||_.return()}finally{if(p)throw m}}e=this._renderAdder(),$add(this.tab_body,e,o)}},{key:"renderUserRow",value:function(e){var t,r=this,n=LI({c:"collaborator_list_item"}),o=SPAN({c:"user_info"});$ATT(n,T.renderAvatar(e,"small",q.theme)),$ATT(n,o);var a=e.full_name||e.user_full_name;if(e.id===window.User.id&&(a=_x("collaborator_list","Me")),a?$add(o,SPAN(t=B(a),BR(),e.email)):$add(o,SPAN(t=B(e.email))),"pending"===e.state&&$add(t,SPAN({c:"status pending"},_("Pending"))),e.id!==window.User.id&&!this.current_project.team_inbox){var i;$add(n,i=A({href:"#",c:"delete"},svgs.get("sm1/trash.svg"))),j.showSimpleText(i,_("Remove collaborator")),$AEV(i,"click",function(){return(0,c.showConfirmDialog)({message:_('Are you sure you want to remove "%s"?').replace("%s",a||e.email),confirmLabel:_("OK"),onConfirm:function(){$remove(n),N.deleteFromProject(r.current_project.id,e)}}),!1})}if(e.id===window.User.id&&!this.current_project.team_inbox){var l;$add(n,l=A({href:"#",c:"leave_channel"},svgs.get("sm1/leave.svg"))),j.showSimpleText(l,_("Leave this project")),$AEV(l,"click",function(){var e=_("Are you sure you want to leave this project?")+" "+_("This will delete it from your account.");return(0,c.showConfirmDialog)({message:e,confirmLabel:_("OK"),onConfirm:function(){N.deleteFromProject(r.current_project.id,window.User),x.deleteMany([r.current_project.id]),y(),C.reset()}}),!1})}return n}},{key:"_renderAdder",value:function(){var e,t,r=this,n=w.createButton(_("Invite"),null,null,{"data-track":"share_project|invite_from_project_invite"});$addClass(n,"ist_button_red"),this.adder_input=e=INPUT({type:"text",placeholder:_("Email or Name"),c:"input_email text_box"});var o=DIV({c:"invite_adder"},e,n),a=function(){var n=e.value;n=$trim(n),-1!==n.indexOf(" ")&&-1===n.indexOf("<")&&(n=n.replace(/\s+/g,","));var o=!0,a=!1,i=void 0;try{for(var l,s=n.split(/[,;]/)[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){t=l.value;var u;if(t=$trim(t),0!==t.length){if(-1===t.indexOf("@"))return alert(_("Email isn't valid")+": "+$escape(t)),!1;var c=N.getAll(r.current_project.id),d=!0,f=!1,p=void 0;try{for(var m,h=c[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){if(m.value.email===t)return alert(_("User %s is already part of the project").replace("%s",$escape(t))),!1}}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}if(window.User.is_premium){if(u=window.User.share_limit||26,c.length>=u)return alert(DIV(B(_("Collaboration limit reached")),P(_("Unfortunately, you've reached the limit of 25 collaborators per project.")),P(_("Need more? Get in touch")," ",A({href:"mailto:support@todoist.com"},"support@todoist.com")))),!1}else if(u=6,c.length>=u)return D.showCollaboratorLimit(),!1;N.addInvite(r.current_project.id,t)}}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return r.renderView(),e.value="",!1};$AEV(n,"click",a);var i={collection:function(){var e={},t=[],r=!0,n=!1,o=void 0;try{for(var a,i=$values(N.collaborators)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;if(l.id!==window.User.id&&!e[l.email]){e[l.email]=!0;var s=l.full_name+" "+l.email,u={name:s,email:l.email,avatar_small:l.avatar_small};t.push(u)}}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t},filterItem:function(e,t){var r=$setHTML(SPAN({c:"name_email"}),t),n=T.renderAvatar(e,"small",q.theme);return DIV(DIV({c:"ist_complete_icon"},n),DIV({c:"ist_complete_content"},r))},onSelect:function(e){return e.email},onNoMatches:function(){return g.hide(),!1},onPreProcess:function(e,t){return 0===e.length?[]:t},wildcard_match:!0,require_trigger:!1,whole_input_match:!0,extra_width:1};return g.attach(e,i),$AEV(e,"keydown",function(e){return 13!==e.keyAscii||!g.isShown()&&a()}),o}},{key:"render_intro_text",value:function(){return this.empty_state_holder=DIV(),s.default.render(l.default.createElement(u.EmptyStateSharing,null),this.empty_state_holder),this.empty_state_holder}},{key:"_checkEmpty",value:function(e){var t=this,r=null;return"owner"!==e.user_role&&(r=A({href:"#"},_("Leave this project")),$AEV(r,"click",function(){var e=_("Are you sure you want to leave this project?")+" "+_("This will delete it from your account.");return(0,c.showConfirmDialog)({message:e,confirmLabel:_("OK"),onConfirm:function(){N.deleteFromProject(t.current_project.id,window.User),x.deleteMany([t.current_project.id]),y(),C.reset()}}),!1})),$add(this.holder,DIV({c:"desc"},r))}},{key:"_sort",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;i.full_name?i.name=i.full_name.toLowerCase():i.name=i.email.toLowerCase()}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e=e.sort(function(e,t){return e.name.localeCompare(t.name)})}},{key:"promoCheck",value:function(){window.User.karma<200||!U(F,H.getState())&&$isShown($("app_holder"))&&this._promoShow()}},{key:"_promoShow",value:function(){if(!$("blank_state_sharing")){this.promo_shown=!0;var e=DIV({id:"blank_state_sharing"},_("Share projects, assign tasks, discuss in real-time, and get notified when changes are made. Todoist lets you collaborate from any web-enabled device.")),t={},r=$all("a","share_icon",null,!0);r&&(t={fn_left_offset:function(e,t){return $position(r).x-t.width+40},fn_arrow_left:function(){return $position(r).x+5},fn_top_offset:function(){return $position(r).y+30},fixed_pos:!0},this.tipwin=k.show(_("Collaborate with others"),e,300,350,t),$fx.fadeIn(e),H.dispatch(V(F)))}}},{key:"promoRemove",value:function(){return this.promo_shown=!1,this.tipwin&&this.tipwin.hide(),!1}}]),e}();window.SharingManager=new G,t.exports=window.SharingManager},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/Collaborators":148,"../../models/ProjectsModel":159,"../../react_components/confirm_dialog":680,"../../react_components/emptyState":731,"../../reducers/tooltip":1133,"../../stores/store":1140,"../avatars/Avatars":17,"../formatter/Formatter.js":22,"../project_editor/ProjectEditorManager":62,"../projects_list/ProjectListUtils":72,"../themes/Themes":95,react:"react","react-dom":"react-dom"}],88:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../../utils"),l=e("../../models/ProjectsModel"),s=e("../../models/Colors"),u=e("../../filterist"),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=DIV({c:"project_viz"}),n=e.color;return void 0!==n?$setStyle(r,{backgroundColor:s.getHex("project",e.color),width:t}):$setStyle(r,{backgroundColor:"#dddddd",width:t}),r.color=n||0,r},d=function(){function e(){n(this,e),this.show=this.show.bind(this),this.hide=this.hide.bind(this)}return a(e,[{key:"renderHolder",value:function(){return DIV({id:"quick_day_show"})}},{key:"show",value:function(e){var t,r,n=u.getByDate(e);r=0===n.length?_("No tasks due"):(0,i.format)(_n("{count} task due","{count} tasks due",n.length),{count:n.length});var o=DIV({c:"project_bar"}),a=[],s=!0,d=!1,f=void 0;try{for(var p,m=n[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){
var h=p.value,y=l.get(h.project_id);y&&(t=c(y,8),a.push([y.color,t]))}}catch(e){d=!0,f=e}finally{try{s||null==m.return||m.return()}finally{if(d)throw f}}a.sort(function(e,t){return e[0]-t[0]});for(var v=0,g=a;v<g.length;v++)t=g[v],$add(o,t[1]);return DIV({c:"project_bar_holder"},r,CENTER(o))}},{key:"hide",value:function(){$replace($("quick_day_show"),null)}}]),e}();t.exports=new d},{"../../filterist":121,"../../models/Colors":149,"../../models/ProjectsModel":159,"../../utils":1176}],89:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var d=n(e("../postpone/Postpone")),f=n(e("../../react_components/scheduler/SchedulerWrapper")),p=window,m=p.IstTooltip,h=window,y=h.Dateist,v=window,g=v.DateistDateHelpers,b=window,w=b.DateUtils,E=window,j=E.Signals,O=e("../../models/SmartSchedule"),S=e("../../stores/SystemStatusStore"),P=function(){function e(){s(this,e),this.create=this.create.bind(this),this.genIcon=this.genIcon.bind(this),this.genDate=this.genDate.bind(this),this.getPostponeIcon=this.getPostponeIcon.bind(this),this.genAISchedulerIcon=this.genAISchedulerIcon.bind(this),this.daysToAdd=this.daysToAdd.bind(this)}return c(e,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!0===t.with_help_text,n=!0===t.with_smart_schedule,o=!0===t.with_today,a=!0===t.with_tomorrow,i=!0===t.with_next_week,l=!0===t.with_postpone,s=!0===t.with_month,u=!0===t.with_no_date,c=!0===t.with_more,d=DIV({c:"scheduler_holder"});r&&$add(d,SPAN({c:"desc"},_("Schedule")));var f=DIV({c:"icon_list"});if($add(d,f),!n||!t.items||t.items instanceof Array||$add(f,this.genAISchedulerIcon(t.items,e,t.onHover)),o&&$add(f,this.genIcon("today",e,t.onHover,_("Today"),"scheduler|today")),a&&$add(f,this.genIcon("tomorrow",e,t.onHover,_("Tomorrow"),"scheduler|tomorrow")),l&&t.items){t.items instanceof Array&&1===t.items.length&&(t.items=t.items[0]);var p=t.items instanceof Array?t.on_postpone_click:e;$add(f,this.getPostponeIcon(t.items,p,t.onHover,"scheduler|postpone_to"))}return i&&$add(f,this.genIcon("next_week",e,t.onHover,_("Next week"),"scheduler|next_week")),s&&$add(f,this.genIcon("month",e,t.onHover,_("In 1 month"),"scheduler|next_month")),u&&$add(f,this.genIcon("no_date",e,t.onHover,_("No due date"),"scheduler|no_due_date")),c&&$add(f,this.genIcon("more",$p(this.moreClick,e,t.items),t.onHover,_("More"),"scheduler|more")),d}},{key:"moreClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(arguments.length>2&&arguments[2],arguments.length>3?arguments[3]:void 0);return m.hide(),t=t instanceof Array?t:[t],f.default.show({anchor:r,selectedItems:t,selectedDate:t[0].due,dialogClassName:"scheduler-editor-menu",hideMenus:!1,holder:DIV({c:"scheduler_holder"}),onDateSelect:e}),!1}},{key:"genIcon",value:function(e,t,r,n,o){var a,i=this;switch(e){case"today":a="sm1/scheduler_today.svg";break;case"tomorrow":a="sm1/scheduler_tomorrow.svg";break;case"next_week":a="sm1/scheduler_next_week.svg";break;case"month":a="sm1/scheduler_month.svg";break;case"no_date":a="sm1/scheduler_no_date.svg";break;case"more":a="sm1/more.svg"}var l=A({href:"#",c:"icon_scheduler","data-track":o},svgs.get(a));if("today"===e){var s="".concat((new Date).getDate());l.querySelector("tspan").textContent=s}return"more"===e?$addClass(l,"icon_more"):"next_week"===e&&$addClass(l,"icon_next_week"),$AEV(l,["click","touchstart"],function(){return"more"!==e&&j.sendSignal("hide_editor_menu"),m.hide(),t(i.genDate(e),l),!1}),r&&$AEV(l,"mouseover",function(){if("more"!==e)return r(i.genDate(e)),!1}),m.showSimpleText(l,n,null,3,12),l}},{key:"genDate",value:function(e){if("today"===e)return y.parse("today").due_date;if("tomorrow"===e)return y.parse("tomorrow").due_date;if("next_week"===e){var t=this.daysToAdd();return y.parse("+".concat(t," days")).due_date}return"month"===e?y.parse("+1 month").due_date:"no_date"===e?null:void 0}},{key:"getPostponeIcon",value:function(e,t,r,n){var a,i=A({href:"#",c:"icon_scheduler icon_postpone","data-track":n},svgs.get("sm1/scheduler_postpone.svg")),l=function(e){var t=d.default.getPostponeDate(e),r=t.new_due,n=t.formated_due;if("END_REACHED"===r){var o=y.parse("tomorrow").due_date,a=g.day_diff(new Date,o);return[o,w.humanizeDayDiff(a,o)]}return[r,n]};if(e instanceof Array){var s=e.map(function(e){return l(e)[0]});return $AEV(i,["click","touchstart"],function(){return m.hide(),j.sendSignal("hide_editor_menu"),t(s),!1}),r&&$AEV(i,"mouseover",function(){r(s)}),a=SPAN(_("Postpone")),m.showSimpleText(i,a,null,3,12),i}var u=Array.from(l(e)),c=o(u,2),f=c[0],p=c[1];return $AEV(i,["click","touchstart"],function(){return m.hide(),j.sendSignal("hide_editor_menu"),t(f),!1}),r&&$AEV(i,"mouseover",function(){r(f)}),a=SPAN(_("Postpone to")," ",B(p)),m.showSimpleText(i,a,null,3,12),i}},{key:"genAISchedulerIcon",value:function(e,t,r){var n,o,a,i,l=Indicator.ringSpinner(),s=A({c:"icon_ai_scheduler","data-track":"scheduler|ai"},SPAN({c:"spin_loader"},l),o=SPAN({c:"predicted_date"},svgs.get("sm1/scheduler_smart_date.svg")),n=SPAN({c:"error_icon"},svgs.get("sm1/scheduler_error.svg")));return S.isOffline()?(i=_("Smart Schedule requires an Internet connection"),m.showSimpleText(s,i,null,3,12),$addClass(s,"has_error"),r&&$AEV(s,["mouseover"],function(){r(null)}),s):(O.predictItemDuedate(e,function(e,n){if(n)return i=_("No suggestions available"),m.showSimpleText(s,i,null,3,12),$addClass(s,"has_error"),void(r&&$AEV(s,["mouseover"],function(){r(null)}));e=g.date_max(e);var o=g.day_diff(new Date,e),l=w.humanizeDayDiff(o,e);i=DIV(_("Suggested date: "),B(l)),m.showSimpleText(s,i,null,3,12),a=s.querySelector(".predicted_date tspan"),a.textContent=e.getDate(),$addClass(s,"has_result"),$AEV(s,["click","touchstart"],function(){m.hide(),t(e)}),r&&$AEV(s,["mouseover"],function(){r(e)})}),s)}},{key:"daysToAdd",value:function(){var e=new Date,t=g.iso_day(e),r=window.Settings.START_DAY,n=window.Settings.NEXT_WEEK,o=r-t;o<=0&&(o+=7);var a=n-r;return a<0&&(a+=7),o+a}}]),e}();t.exports=new P},{"../../models/SmartSchedule":164,"../../react_components/scheduler/SchedulerWrapper":1009,"../../stores/SystemStatusStore":1137,"../postpone/Postpone":58}],90:[function(e,t,r){"use strict";var n=e("../generic_manager/GenericManagerUtils.js"),o=Class({current_replacer:null,init:function(e,t){this.li_items=e,this.controller=t,this.set_indent=!0,this.start_x=0,this.current_indent=1,this.indent_level="ProjectList"==t.name&&22||28,this.max_indent="ProjectList"==t.name&&4||5,$bindMethods(this)},onStart:function(){var e=ICE.$dnd.current_root,t=e.getBoundingClientRect().top,r=this.current_replacer=LI();ICE.$dnd.current_replacer=r,this.start_indent_x=(e.json.indent-1)*this.indent_level,this.set_indent&&($setStyle(r,"marginLeft",this.start_indent_x+"px"),this.current_indent=e.json.indent,this.cur_child=n.getChildren(e)),this.cur_child=this.cur_child||[],ICE.$dnd.cur_child=this.cur_child,$map(this.cur_child,function(e){$hide(e)}),$setClass(r,e.className),$addClass(r,"drop_item"),$removeClass(r,"current"),$addClass(e,"on_drag");var o=0;$hasClass(e,"task_item")||(o=1),$setHeight(r,e.offsetHeight-o),$setOpacity(e,1),$setTop(e,t),e.style.position="fixed",$addAfter(r,e),$setWidth(e,r.offsetWidth)},onDrag:function(){var e=ICE.$dnd.current_root,t=this.current_replacer,r=e.getBoundingClientRect().top,n=r+e.offsetHeight;if(this.li_items.forEach(function(o){if(o!==e){var a=o.getBoundingClientRect().top,i=a+o.offsetHeight/2,l=a+o.offsetHeight;if($hasClass(o,"reorder_item")&&r<i&&n>i)return void $addAfter(t,o);if(n>i&&n<l){for(;o.nextSibling&&"none"==o.nextSibling.style.display;)o=o.nextSibling;$addAfter(t,o)}else r<i&&r>a&&$addBefore(t,o)}}),this.set_indent){0===this.start_x&&(this.start_x=$position(e).x-this.start_indent_x);var o=$position(e).x-this.start_x,a=this.current_indent,i=this.indent_level;o<=10?a=1:o>=1*i-10&&o<=1*i+10?a=2:o>=2*i-10&&o<=2*i+10?a=3:o>=3*i-10&&o<=3*i+10?a=4:o>=4*i-10&&o<=4*i+10?a=5:o>=5*i-10&&o<=5*i+10&&(a=6),a>this.max_indent&&(a=this.max_indent);for(var l=t.previousSibling;;){if(!l)break;{if(l.json&&l!=e&&!$isHidden(l)&&!$hasClass(l,"manager")&&!$hasClass(l,"reorder_item"))break;l=l.previousSibling}}l?a>l.json.indent&&(a=Math.min(l.json.indent+1,this.max_indent)):a=1;var s=t.nextSibling;if(s){var u=s.json.indent;a<u&&(a=u)}$setStyle(t,"marginLeft",(a-1)*this.indent_level+"px"),this.current_indent=a}},onEnd:function(){var e=this,t=ICE.$dnd.current_root,r=this.current_replacer;if($removeClass(t,"on_drag"),t.style.position="",t.style.left="",t.style.top="",t.style.width="",t.style.opacity=1,this.set_indent){var o=this.current_indent;if(o>5&&(o=5),o!=t.json.indent){var a=o-t.json.indent;n.setIndent(t,o),$map(this.cur_child,function(t){var r=t.json.indent+a;r>e.max_indent&&(r=e.max_indent),n.setIndent(t,r)})}}try{$addBefore(t,r)}catch(e){}$remove($$("li.drop_item"));var i=this.controller.name||this.controller.list_class;if(("ProjectList"==i||"ProjectEditor"==i)&&n.normalizeIndent(t,t),ICE.$dnd.removeDragAble(t),this.current_replacer=null,ICE.$dnd.current_replacer=null,this.cur_child)return $rmap(this.cur_child,function(e){$addAfter(e,t)}),n.showHideChildren(this.cur_child,t),ICE.$dnd.cur_child=this.cur_child=null,!1}});t.exports=o},{"../generic_manager/GenericManagerUtils.js":26}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.parseStartPage=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../../stores/store")),o=e("../../reducers/mainView"),a=e("../../utils"),i=e("../../reducers/filters"),l=e("../agenda/AgendaUtils"),s=e("../loading/Loading.js"),u=e("../projects_list/ProjectListUtils"),c=e("../location_manager/LocationManager.js"),d=function(e){var t=/project\?id=(\d+)/,r=t.exec(e);return r?{type:"project",id:parseInt(r[1])}:r},f=function(e){var t=/project:(\d+)/,r=t.exec(e);return r?{type:"project",id:parseInt(r[1])}:r},p=function(e){var t=/_project_(\d+)/,r=t.exec(e);return r?{type:"project",id:parseInt(r[1])}:r},m=function(e){var t=/filter\?id=(\d+)/,r=t.exec(e);return r?{type:"filter",id:parseInt(r[1])}:r},h=function(e){var t=/filter:(\d+)/,r=t.exec(e);return r?{type:"filter",id:parseInt(r[1])}:r},_=function(e){var t=/label\?name=(.+)/,r=t.exec(e);return r?{type:"label",name:r[1]}:r},y=function(e){var t=/label:(\d+)/,r=t.exec(e);return r?{type:"label",id:parseInt(r[1])}:r},v=function(e){return"inbox"===e?{type:"inbox"}:null},g=function(e){return"teaminbox"===e?{type:"teaminbox"}:null},b=function(e){return"today"===e?{type:"today"}:null},w=function(e){return"next7days"===e?{type:"next7days"}:null},E=function(e){return"overdue, today"===e?{type:"today"}:null},j=function(e){return"overdue, 7 days"===e?{type:"next7days"}:null},O=function(e){return"_blank"===e||"blank"===e?{type:"blank"}:null},S=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){try{for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}}catch(e){}return{type:"invalid"}}}(b,E,w,j,v,g,O,d,f,p,_,y,m,h);r.parseStartPage=S;var P=!0,I={show:function(){var e=c.getHash();return e&&P&&"start"!=e&&-1==e.indexOf("utm_source")?(c.updateView(e,!0),P=!1,s.hide(),!0):(I.queryStart(),c.updateLocation("start"),s.hide(),!1)},queryStart:function(){var e=window.Settings&&window.Settings.START_PAGE||"today";u.deselectCurrent();var t=n.default.getState(),r=S(e),s=!1;switch(!r.id||"filter"===r.type&&(0,i.isDefaultFilter)(r.id)||(r.id=(0,a.toUniqueID)(t,r.id)),r.type){case"today":n.default.dispatch((0,o.showTodayView)());break;case"next7days":n.default.dispatch((0,o.show7DaysView)());break;case"inbox":var c=t.user.inbox_project;n.default.dispatch((0,o.showProjectView)([c]));break;case"teaminbox":var d=t.user.team_inbox;n.default.dispatch((0,o.showProjectView)([d]));break;case"project":var f=r.id;t.projects[f]?n.default.dispatch((0,o.showProjectView)([f],{bottomListSelected:!0})):s=!0;break;case"label":var p=r.name;p?n.default.dispatch((0,o.showLabelView)(p,{bottomListSelected:!0})):s=!0;break;case"filter":var m=r.id;(0,i.filterGetByID)(t,m)?n.default.dispatch((0,o.showFilterView)(m,{bottomListSelected:!0})):s=!0;break;case"blank":l.reset(),$replace($("editor"),null);break;case"invalid":n.default.dispatch((0,o.showQueryView)(e))}s&&n.default.dispatch((0,o.showTodayView)())}},k=I;r.default=k},{"../../reducers/filters":1095,"../../reducers/mainView":1109,"../../stores/store":1140,"../../utils":1176,"../agenda/AgendaUtils":8,"../loading/Loading.js":38,"../location_manager/LocationManager.js":41,"../projects_list/ProjectListUtils":72}],92:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var l=n(e("clipboard")),s=e("../../react_components/confirm_dialog"),u=n(e("../../stores/store")),c=e("../../reducers/undo"),d=window,f=d.Signals,p=window,m=p.IstButton,h=window,y=h.Indicator,v=window,g=v.GB_showHTML,b=e("../../models/SyncEngine"),w=e("../../models/ItemsModel"),E=e("../../models/ProjectsModel"),j=e("../../models/LabelsModel"),O=e("../../models/FiltersModel"),S=function(){function e(){var t=this;o(this,e),f.connect("sync_state_changed",function(){if(t.ul){b.getSyncState()===b.sync_states.syncing?($replace(t.ul,LI("...")),$setVisibility(t.btn_retry,!1),$show(t.indicator)):(t.generateListReport(t.ul),$setVisibility(t.btn_retry,!0),$hide(t.indicator))}})}return i(e,[{key:"show",value:function(){var e=this;this.btn_retry=m.createButton(_("Try to sync again"),null,"red");var t=m.createButton(_("Discard failed updates"),null),r=DIV({c:"sync_report"},DIV(_("Your updates couldn't be synced with Todoist's servers. Please wait a few minutes and try again."),DIV({c:"small_separator"}),this.indicator=y.cssSpinner(),this.btn_retry,DIV({c:"separator"}),_("Detailed log"),":",DIV({c:"small_separator"}),this.ul=UL({c:"sync_error_text",name:"body"})),DIV({c:"separator"}),DIV(SPAN({c:"desc"},_("Discarding will restore your sync, but your updates mentioned above will be lost")),DIV({c:"small_separator"}),t),DIV({c:"separator"}));$hide(this.indicator),this.generateListReport(this.ul),$AEV(this.btn_retry,"click",function(){return b.sync(null,!0,!0),!1}),$AEV(t,"click",function(){return(0,s.showConfirmDialog)({confirmLabel:_("Yes"),cancelLabel:_("No"),message:_("Are you sure you want to discard your sync updates?"),onConfirm:function(){b.sync_queue.clear(),f.sendSignal("clear_local_data"),window.location.reload()}}),!1});var n=DIV({c:"sync_error_handler"},r);g(_("Sync issues"),n,300,550,function(){e.ul=null})}},{key:"generateListReport",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$replace(e,null);var n=function(e){var t=E.get(e.id),r=(null!=t?t.name:void 0)||e.name;if(r)return $trim(r,75)},o=0,a={};if(!r){var i;$add(e,LI({c:"log_action"},i=BUTTON({c:"full_log_action"},_("Show full log")))),$AEV(i,"click",function(){return t.generateListReport(e,!0),!1})}var s=b.sync_queue.get(),d=!0,f=!1,p=void 0;try{for(var m,h=s[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var y=m.value;if(y.last_error){var v;o++;var g="".concat(y.type,"-").concat(y.args.id,"-").concat(y.last_error.error_code);if(a[g])continue;a[g]=!0;var S=null;try{-1!==y.type.indexOf("item_")?S=function(e){var t=w.getById(e.id),r=(null!=t?t.content:void 0)||e.content;if(r)return $trim(r,75)}(y.args):-1!==y.type.indexOf("project_")?S=n(y.args):-1!==y.type.indexOf("share_")?S=n(y.args):-1!==y.type.indexOf("label_")?S=function(e){var t=j.getById(e.id),r=(null!=t?t.name:void 0)||e.name;if(r)return $trim(r,75)}(y.args):-1!==y.type.indexOf("filter_")&&(S=function(e){var t=O.get(e.id),r=(null!=t?t.name:void 0)||t.name;if(r)return $trim(r,75)}(y.args))}catch(e){}S=S?B(S,": "):"",v=r?LI(B(S),$serialize(y)):LI(B(S),this.humanCommandType(y.type),". ",this.getErrorIfAvailable(y)),$add(e,v)}}}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}if(0===o)$add(e,LI(_("All updates processed successfully!")));else if(l.default.isSupported()){var P=function(){var e=document.createElement("div");new l.default(e,{text:function(){return JSON.stringify(s,null,2)}}).on("success",function(e){u.default.dispatch((0,c.undoPushMessage)(_("Sync log copied!"))),e.clearSelection()}),e.click()},I=BUTTON({c:"copy_log_action"},_("Copy full log to clipboard"));$AEV(I,"click",P),$add(e,LI({c:"log_action"},I))}}},{key:"getJson",value:function(){var e=[window.User.id,navigator.appVersion,window.LANG,$queryArgument("v")],t=!0,r=!1,n=void 0;try{for(var o,a=b.sync_queue.get()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(i.last_error){var l=$update({},i);l.args=$update({},i.args),l.args&&(l.args.content&&(l.args.content="..."),l.args.name&&(l.args.name="...")),e.push(l)}}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return $serialize(e)}},{key:"humanCommandType",value:function(e){switch(e){case"item_add":return _("Task add failed");case"item_delete":return _("Task delete failed");case"item_update":case"item_update_date_complete":return _("Task update failed");case"item_move":return _("Task move failed");case"item_complete":return _("Task complete failed");case"item_uncomplete":return _("Task uncomplete failed");case"item_update_orders_indents":case"item_update_day_orders":return _("Task order update failed");case"note_add":return _("Comment add failed");case"note_update":return _("Comment update failed");case"note_delete":return _("Comment delete failed");case"project_add":return _("Project add failed");case"project_update":return _("Project update failed");case"project_delete":return _("Project delete failed");case"project_archive":return _("Project archive failed");case"project_unarchive":return _("Project unarchive failed");case"project_update_orders_indents":return _("Project order update failed");case"label_add":return _("Label add failed");case"label_delete":return _("Label delete failed");case"label_update":return _("Label update failed");case"label_update_orders":return _("Label order update failed");case"filter_add":return _("Filter add failed");case"filter_delete":return _("Filter delete failed");case"filter_update":return _("Filter update failed");case"filter_update_orders":return _("Filter order update failed");case"share_project":return _("Share project failed");case"delete_collaborator":return _("Remove collaborator failed");case"accept_invitation":return _("Accept invitation failed");case"reject_invitation":return _("Reject invitation failed");case"delete_invitation":return _("Delete invitation failed")}return _("%s failed").replace("%s",e)}},{key:"getErrorIfAvailable",value:function(e){return e&&e.last_error&&e.last_error.error?e.last_error.error:""}}]),e}();t.exports=new S},{"../../models/FiltersModel":154,"../../models/ItemsModel":155,"../../models/LabelsModel":156,"../../models/ProjectsModel":159,"../../models/SyncEngine":169,"../../react_components/confirm_dialog":680,"../../reducers/undo":1134,"../../stores/store":1140,clipboard:"clipboard"}],93:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Signals,s=window,u=s.Indicator,c=window,d=c.IstTooltip,f=e("../../models/SyncEngine"),p=e("../../models/LoadEngine"),m=e("../../components/sync_error_handler/SyncErrorHandler"),h=function(){function e(){var t=this;n(this,e),this.render=this.render.bind(this),this.syncStateChanged=this.syncStateChanged.bind(this),this._syncStateChanged=this._syncStateChanged.bind(this),this.showOfflineInfo=this.showOfflineInfo.bind(this),this.forceSync=this.forceSync.bind(this),this.showSyncErrorHandler=this.showSyncErrorHandler.bind(this),this.current_state=null,l.connect("sync_state_changed",this.syncStateChanged),$AEV(window,"online",this.syncStateChanged),$AEV(window,"offline",this.syncStateChanged),$AEV(window,"load",function(){t.render(),!1===navigator.onLine&&t.syncStateChanged()})}return a(e,[{key:"render",value:function(){return this.holder?this.holder:(this.holder=SPAN({id:"sync_state_icon"}),this.holder)}},{key:"syncStateChanged",value:function(){this.holder&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this._syncStateChanged,100))}},{key:"_syncStateChanged",value:function(){var e=f.getSyncState(),t=f.sync_states,r=null;r=e===t.syncing?"syncing":f.global_error?"offline":f.getQueueErrorLength()?"offline":p.fetched_data_from_server?"none":"offline";var n=navigator.onLine;if("none"==r&&void 0!==n&&(n||(r="offline")),this.current_state!==r&&(this.current_state=r,r))if($replace(this.holder,null),"syncing"===r)$add(this.holder,u.cssSpinner("small"));else if("offline"===r){var o;this.offline_link=o=SPAN({href:"#",c:"fixed_pos"},svgs.get("sm1/warning.svg",{className:"sync_alert"})),$AEV(o,"mouseover",$p(this.showOfflineInfo,o)),$AEV(o,"mouseout",d.hide),!f.global_error&&f.getQueueErrorLength()>0&&$addClass(o,"sync_error_blinking"),o.onclick=this.forceSync,$add(this.holder,o)}}},{key:"showOfflineInfo",value:function(e){var t;f.getSyncState();var r=_("Offline mode is on");if(this.offline_link.onclick=this.forceSync,!1===navigator.onLine)t=DIV({c:"sync_error_tooltip"},_("Looks like you're not connected to the Internet. Changes you make in offline mode will be synced when you reconnect."));else if(f.global_error){var n=f.timeout/1e3||10;t=DIV({c:"sync_error_tooltip"},P(_("We're having trouble reaching the Todoist servers. Changes you make in offline mode will be synced once we're able to reconnect.")),P(_("Click on this icon to force a sync.")),P(_("Trying again in %s seconds...").replace("%s",n)))}else f.getQueueErrorLength()>0?(r=_("Sync issues"),t=DIV({c:"sync_error_tooltip"},_("We could not sync some updates"),BR(),_("Click here for more details")),this.offline_link.onclick=this.showSyncErrorHandler):t=null;d.show(e,DIV({c:"ist_tooltip_content"},B(r),t),null,5,5)}},{key:"forceSync",value:function(){return d.hide(),this.current_state="syncing",f.sync(null,!0,!0),$replace(this.holder,u.cssSpinner("small")),!1}},{key:"showSyncErrorHandler",value:function(){return m.show(),!1}}]),e}();t.exports=new h},{"../../components/sync_error_handler/SyncErrorHandler":92,"../../models/LoadEngine":157,"../../models/SyncEngine":169}],94:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Signals,s=window,u=s.GB_hide,c=window,d=c.Indicator,f=window,p=f.IstButton,m=window,h=m.GB_showYouTube,y=window,v=y.GB_showHTML,g=window,b=g.GHtml5Uploader,w=e("../../models/ProjectsModel"),E=e("../../models/TemporaryIds"),j=e("../copy_to_clipboard/CopyForm"),O=e("../../containers/premium_promo/PremiumOnlyModal"),S=e("../../models/SyncEngine"),P=function(){function e(){n(this,e),this.showExportTemplate=this.showExportTemplate.bind(this),this.exportAsFile=this.exportAsFile.bind(this),this.exportAsUrl=this.exportAsUrl.bind(this)}return a(e,[{key:"showExportTemplate",value:function(e){var t,r;if(!this.checkPremiumForTemplates())return!1;var n=DIV({c:"template_exporter"},DIV(_("Please pick the template type:")),DIV(t=p.createButton(_("Export as file"),svgs.get("sm1/file.svg"))),DIV(r=p.createButton(_("Export as shareable URL"),svgs.get("sm1/link.svg"))),DIV({c:"template_relative"},LABEL(this.input_relative=INPUT({type:"checkbox"}),_("Use relative dates")),BR(),SPAN({c:"desc"},_("Relative means \u201cTomorrow\u201d will get turned into \u201c+1 day\u201d"))));this.input_relative.checked=!0,$AEV(t,"click",$p(this.exportAsFile,e)),$AEV(r,"click",$p(this.exportAsUrl,e,n)),v(_("Export as a template"),n,300,400)}},{key:"exportAsFile",value:function(e){var t=this,r=function(e){var r=t.input_relative.checked&&1||0,n=$encode({project_id:e,use_relative_dates:r}),o="/API/".concat(S.api_version,"/templates/export_as_file?").concat(n);return window.open(o),u(),!1};this.customShowGb(e,r)}},{key:"exportAsUrl",value:function(e,t){var r=this,n=function(e){var r=$encode({t_url:e.file_url}),n=j.genereate();n.input.value="https://todoist.com/API/".concat(S.api_version,"/import/project_from_url?").concat(r),$replace(t,DIV(_("Copy the URL"),":",BR(),n.form))},o=function(){$replace(t,d.cssSpinner());var o=$requestJSON("/API/".concat(S.api_version,"/templates/export_as_url"));o.addCallback(n);var a=r.input_relative.checked&&1||0;o.sendReq({project_id:e,use_relative_dates:a})};return this.customShowGb(e,o),!1}},{key:"showImport",value:function(e){var t,r;if(!this.checkPremiumForTemplates())return!1;var n=DIV({c:"template_importer"},t=DIV({c:"upload_holder"}),DIV({c:"template_help"},_("Import tasks from a template, use this to create a new project by duplicating an existing one."),BR(),r=A({href:"https://www.youtube.com/watch?v=_Rl_CLGY_3o"},"\u25b6 ",_("Show a help video"))));$AEV(r,"click",function(){return h("","https://www.youtube.com/watch?v=_Rl_CLGY_3o",387,640),!1});var o=function(){var t={onSuccess:function(){w.get(e)&&l.sendSignal("instant_refresh_interface"),setTimeout(u,200)}};top.SyncEngine.sync(t,!0)},a=new b(t,"/API/".concat(S.api_version,"/templates/import_into_project?project_id=").concat(e),!1,{allFilesUploaded:o,fileUploaded:o});return v(_("Import from template"),n,300,400,{close_validator_fn:function(){return a.remove(),!0}}),!1}},{key:"checkPremiumForTemplates",value:function(){return!!window.User.is_premium||(O.showTemplate(),!1)}},{key:"customShowGb",value:function(e,t){E.waitToResolve(e,function(e){t(e)})}}]),e}();t.exports=new P},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/ProjectsModel":159,"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../copy_to_clipboard/CopyForm":19}],95:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var l=n(e("../../stores/store")),s=n(e("../../stores/subscribeSelected")),u=e("../../reducers/settings"),c=e("../../reducers/selectors"),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../logger/Logger")),f=window,p=f.Signals,m={amethyst:"https://d3ptyyxy2at9ui.cloudfront.net/theme_amethyst.svgs-b9500c.js",blueberry:"https://d3ptyyxy2at9ui.cloudfront.net/theme_blueberry.svgs-053f9a.js",clover:"https://d3ptyyxy2at9ui.cloudfront.net/theme_clover.svgs-7731f9.js",dark:"https://d3ptyyxy2at9ui.cloudfront.net/theme_dark.svgs-d861cc.js",graphite:"https://d3ptyyxy2at9ui.cloudfront.net/theme_graphite.svgs-6d1683.js",gold:"https://d3ptyyxy2at9ui.cloudfront.net/theme_gold.svgs-2f5770.js",neutral:"https://d3ptyyxy2at9ui.cloudfront.net/theme_neutral.svgs-6bdfeb.js",noir:"https://d3ptyyxy2at9ui.cloudfront.net/theme_noir.svgs-057c69.js",sky:"https://d3ptyyxy2at9ui.cloudfront.net/theme_sky.svgs-85fe43.js",sunflower:"https://d3ptyyxy2at9ui.cloudfront.net/theme_sunflower.svgs-bf5aee.js",tangerine:"https://d3ptyyxy2at9ui.cloudfront.net/theme_tangerine.svgs-a92f7e.js",todoist:"https://d3ptyyxy2at9ui.cloudfront.net/theme_todoist.svgs-eba74f.js"},h=function(){function e(){var t=this;o(this,e),this.theme="theme_todoist",this.theme_name="todoist",this.theme_number=15,this.theme_id_to_name={1:"noir",2:"neutral",3:"tangerine",4:"sunflower",5:"clover",6:"blueberry",7:"sky",8:"amethyst",9:"graphite",10:"gold",11:"dark"},this.loading_svg_bundles={},this.switchThemes=this.switchThemes.bind(this),this.loadSvgBundle=this.loadSvgBundle.bind(this),(0,s.default)(l.default,u.getTheme,c.dataLoaded,function(e,r){$html()&&void 0!==e&&r&&t.theme_number!==e&&t.switchThemes(e)})}return i(e,[{key:"changeThemeClass",value:function(e){var t="theme_".concat(this.theme_id_to_name[e])||"theme_todoist",r=$html().className;r=r.replace(/theme_\S+/g,""),r+=" ".concat(t),$html().className=r}},{key:"switchThemes",value:function(e){var t=this;$("top_bar")&&(this.theme_number=e,this.theme_name=this.theme_id_to_name[e]||"todoist",this.theme="theme_".concat(this.theme_name),this.loadSvgBundle().then(function(){return t.changeThemeClass(e),p.sendSignal("theme_changed")}))}},{key:"loadSvgBundle",value:function(){var e=this;return this.loading_svg_bundles[this.theme_name]instanceof Promise?this.loading_svg_bundles[this.theme_name]:($remove($("theme-loader")),this.loading_svg_bundles[this.theme_name]=new Promise(function(t){var r=SCRIPT({id:"theme-loader",src:m[e.theme_name]||m.todoist,async:!0});r.onload=function(){e.loading_svg_bundles[e.theme_name]=!1,t()},r.onerror=function(r){e.loading_svg_bundles[e.theme_name]=!1,d.captureError(r,{tags:{where:"ThemesSVGLoader"}}),t()},$add(document.body,r)}),this.loading_svg_bundles[this.theme_name])}}]),e}();window.Themes=new h,t.exports=window.Themes},{"../../logger/Logger":129,"../../reducers/selectors":1128,"../../reducers/settings":1129,"../../stores/store":1140,"../../stores/subscribeSelected":1141}],96:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.GB_showHTML,s=window,u=s.GB_hideIfNeeded,c=window,d=c.format,f=e("../../models/Storage"),p=f.$storage,m=e("../opener/WindowOpener.js"),h=function(){function e(){n(this,e),this.getValidTimezone=this.getValidTimezone.bind(this),this.setValidTimezone=this.setValidTimezone.bind(this),this.checkTimezone=this.checkTimezone.bind(this),this.guessTimezone=this.guessTimezone.bind(this),this.showTimezoneHint=this.showTimezoneHint.bind(this),this.showTimezoneHintNormal=this.showTimezoneHintNormal.bind(this),this.createHintLink=this.createHintLink.bind(this),this.changeTimezoneToCurrent=this.changeTimezoneToCurrent.bind(this),this.hideTimezoneHint=this.hideTimezoneHint.bind(this),this.showSettings=this.showSettings.bind(this)}return a(e,[{key:"getValidTimezone",value:function(){return p("valid_timezone").get()}},{key:"setValidTimezone",value:function(e){p("valid_timezone").set(e)}},{key:"checkTimezone",value:function(){var e,t,r,n=window,o=n.User
;if(o&&(o.tz_offset||o.tz_info)&&!window.PRINT_MODE){if(o.tz_info)e=o.tz_info.timezone,t=o.tz_info.hours,r=o.tz_info.minutes;else{e=o.timezone;var a=o.tz_offset;t=a[1],r=a[2]}if(this.getValidTimezone()!==e){var i=60*t+r,l=-(new Date).getTimezoneOffset();if(i!==l){var s;try{s=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){s=null}this.guessTimezone(l,s)}}}}},{key:"guessTimezone",value:function(e,t){var r=$requestJSON("/sync/v8/guess_timezone");r.addCallback(this.showTimezoneHint),r.sendReq({mm_offset:e,timezone_name:t})}},{key:"showTimezoneHint",value:function(e){this.showTimezoneHintNormal(e)}},{key:"showTimezoneHintNormal",value:function(e){if(e!==(window.User.timezone||window.User.tz_info.timezone)){var t=DIV({c:"timezone_alert"});"UNKNOWN_TIMEZONE"!==e?(this.current_timezone=e,$add(t,d(_("Change time zone to %s?"),e),BR(),this.createHintLink(_("Yes, update my settings"),this.changeTimezoneToCurrent,"ist_button ist_button_red ist_button_big timezone_button"),BR(),this.createHintLink(_("Don't update settings"),this.hideTimezoneHint,"timezone_link timezone_link_block"),this.createHintLink(_("View my settings"),this.showSettings,"timezone_link timezone_link_block"))):$add(t,DIV({c:"timezone_alert_message"},_("Your system timezone doesn't match your Todoist settings. Fix it now?")),this.createHintLink(_("Yes, show my settings"),this.showSettings,"ist_button ist_button_red ist_button_big timezone_button"),BR(),this.createHintLink(_("Don't update settings"),this.hideTimezoneHint,"timezone_link timezone_link_block")),l(_("Time zone settings"),DIV(t),200,400)}}},{key:"createHintLink",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"timezone_link",n=A({c:r,href:"#"},e);return $AEV(n,"click",t),n}},{key:"changeTimezoneToCurrent",value:function(){var e=this;this.hideTimezoneHint();var t=$request("/prefs/general/update_timezone");return t.addCallback(function(){return window.tz_info?window.User.tz_info.timezone=e.current_timezone:window.User.timezone=e.current_timezone,p("User").set(window.User),window.location.reload()}),t.sendReq({value:this.current_timezone}),!1}},{key:"hideTimezoneHint",value:function(){return u(),!1}},{key:"showSettings",value:function(){return this.hideTimezoneHint(),m.showPrefs("general"),!1}}]),e}();t.exports=new h},{"../../models/Storage":167,"../opener/WindowOpener.js":53}],97:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Signals,s=window,u=s.IstTooltip,c=e("../sync_state_icon/SyncStateIcon"),d=e("../notifications/Notifications"),f=e("../quick_add/QuickAdd"),p=e("../start_page/StartPage.js").default,m=e("../../menus/MenuUser.js"),h=function(){function e(){n(this,e)}return a(e,[{key:"renderTopLogo",value:function(){var e=A({href:"#"},svgs.get("sm1/todoist_logo.svg"));e.onclick=function(){return p.queryStart(),!1},$replace($("logo"),e)}},{key:"render",value:function(){var e,t;this.renderTopLogo();var r=$("top_icons");$addBefore(e=SPAN({"data-track":"navigation|quick_add"},this.createIcon(SPAN(svgs.get("sm1/plus_m.svg")),SPAN(B(_("Quick Add Task")),BR(),_("Open by typing %s").replace("%s","q")))),$("before_pie")),e.id="quick_add_task_holder",$AEV(e,"click",function(){f.toggle()}),$add(r,d.renderIcon()),$add(r,t=SPAN({id:"gear_holder",c:"menu_icon fixed_pos","data-track":"navigation|gear"},svgs.get("sm1/gear.svg",{className:"gear_normal"}),svgs.get("sm1/gear_alert.svg",{className:"gear_alerted"}))),$AEV(t,"click",function(){return m.open(t),!1}),$ATT($("top_icons"),c.render()),l.connect("new_version_available",function(){$addClass(t,"is_alerted")})}},{key:"createIcon",value:function(e,t,r){var n=e;return $isTouchDeviceOnly()||t&&u.showSimpleText(n,t,null,2,4),r&&$AEV(n,"click",r),n}}]),e}();t.exports=new h},{"../../menus/MenuUser.js":145,"../notifications/Notifications":51,"../quick_add/QuickAdd":73,"../start_page/StartPage.js":91,"../sync_state_icon/SyncStateIcon":93}],98:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DragTypes=r.DEFAULT_QUERY_7_DAYS=r.DEFAULT_QUERY_TODAY=r.MAIN_VIEW_TYPE_7_DAYS=r.MAIN_VIEW_TYPE_TODAY=r.MAIN_VIEW_TYPE_FILTER=r.MAIN_VIEW_TYPE_LABEL=r.MAIN_VIEW_TYPE_ACTIVITY_LOG=r.MAIN_VIEW_TYPE_PROJECT=r.MAIN_VIEW_TYPE_QUERY=r.MAX_SECTION_PER_PERJECT=r.MAX_ITEMS_PER_PROJECT_PREMIUM=r.MAX_ITEMS_PER_PROJECT_FREE=r.MAX_NUMBER_OF_FILTERS=void 0;r.MAX_NUMBER_OF_FILTERS=150;r.MAX_ITEMS_PER_PROJECT_FREE=150;r.MAX_ITEMS_PER_PROJECT_PREMIUM=300;r.MAX_SECTION_PER_PERJECT=20;r.MAIN_VIEW_TYPE_QUERY="query";r.MAIN_VIEW_TYPE_PROJECT="project";r.MAIN_VIEW_TYPE_ACTIVITY_LOG="activity_log";r.MAIN_VIEW_TYPE_LABEL="label";r.MAIN_VIEW_TYPE_FILTER="filter";r.MAIN_VIEW_TYPE_TODAY="today";r.MAIN_VIEW_TYPE_7_DAYS="7_days";r.DEFAULT_QUERY_TODAY="overdue & !assigned to: other, today & !assigned to: other";r.DEFAULT_QUERY_7_DAYS="overdue & !assigned to: other, 7 days & !assigned to: other";var n={Item:"Item",FilterListItemSortable:"FilterListItemSortable",PostponeBox:"PostponeBox"};r.DragTypes=n},{}],99:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.topIconColor=r.colorInHex=r.DARK_THEME_BG_LIGHTER=r.DARK_THEME_ICON_COLOR_DARKER=r.DARK_THEME_ICON_COLOR=r.HEX_DARK=r.HEX_GOLD=r.HEX_GRAPHITE=r.HEX_AMETHYST=r.HEX_SKY=r.HEX_BLUEBERRY=r.HEX_CLOVER=r.HEX_SUNFLOWER=r.HEX_TANGERINE=r.HEX_NEUTRAL=r.HEX_NOIR=r.HEX_TODOIST=r.THEME_DARK=r.THEME_GOLD=r.THEME_GRAPHITE=r.THEME_AMETHYST=r.THEME_SKY=r.THEME_BLUEBERRY=r.THEME_CLOVER=r.THEME_SUNFLOWER=r.THEME_TANGERINE=r.THEME_NEUTRAL=r.THEME_NOIR=r.THEME_TODOIST=void 0;r.THEME_TODOIST=0;r.THEME_NOIR=1;r.THEME_NEUTRAL=2;r.THEME_TANGERINE=3;r.THEME_SUNFLOWER=4;r.THEME_CLOVER=5;r.THEME_BLUEBERRY=6;r.THEME_SKY=7;r.THEME_AMETHYST=8;r.THEME_GRAPHITE=9;r.THEME_GOLD=10;r.THEME_DARK=11;r.HEX_TODOIST="#db4c3f";r.HEX_NOIR="#3d3d3d";r.HEX_NEUTRAL="#f7f7f7";r.HEX_TANGERINE="#ff9000";r.HEX_SUNFLOWER="#fecf05";r.HEX_CLOVER="#3c9b0d";r.HEX_BLUEBERRY="#316fea";r.HEX_SKY="#4dc1e6";r.HEX_AMETHYST="#8e24aa";r.HEX_GRAPHITE="#506578";r.HEX_GOLD="#e0b53f";r.HEX_DARK="#f55547";r.DARK_THEME_ICON_COLOR="#d4d4d4";r.DARK_THEME_ICON_COLOR_DARKER="#3e3e3e";r.DARK_THEME_BG_LIGHTER="#282828";var n=["#db4c3f","#3d3d3d","#f7f7f7","#ff9000","#fecf05","#3c9b0d","#316fea","#4dc1e6","#8e24aa","#506578","#e0b53f","#f55547"],o=function(e){return n[e]?n[e]:(console.log("[warning] unsupported theme value",e),"#db4c3f")};r.colorInHex=o;var a=function(e){return 2==e?"#484B4C":4==e?"#484B4C":11==e?"rgba(255, 255, 255, 0.8)":"#ffffff"};r.topIconColor=a},{}],100:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../logger/Logger")),v=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{hasError:!1,eventID:null}),r}return d(t,e),l(t,[{key:"componentDidCatch",value:function(e,t){console.error("Error",e,t);var r=y.captureError(e,{extra:{info:t},tags:{react:1}});this.setState({hasError:!0,eventID:r}),this.props.onErrorCaught&&this.props.onErrorCaught(e,t)}},{key:"render",value:function(){var e=this.props,t=e.showErrorMsg,r=e.children,n=this.state,o=n.hasError,a=n.eventID;return o?t?m.default.createElement("div",{style:{color:"#999999"}},m.default.createElement("p",null,_("An unknown error happened while loading data... Please try reloading Todoist.")),m.default.createElement("p",null,null!=a?_("Contact Todoist Support (support@todoist.com) and supply the error ID below if this problem persists."):_("Contact Todoist Support (support@todoist.com) if this problem persists.")),null!=a&&m.default.createElement("p",null,"Error ID: ",a)):null:r}}]),t}(m.default.Component);r.default=v,p(v,"propTypes",{showErrorMsg:h.default.bool,children:h.default.node,onErrorCaught:h.default.func}),p(v,"defaultProps",{showErrorMsg:!1})},{"../logger/Logger":129,"prop-types":"prop-types",react:"react"}],101:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=e("../reducers/notes"),a=e("../reducers/drafts"),i=e("../reducers/user"),l=e("../reducers/collaborators"),s=function(e){return e&&e.__esModule?e:{default:e}}(e("../react_components/notes/Notes")),u=function(e,t){var r=t.parentId,n=t.type,s=t.projectId,u=(0,i.getUser)(e),c=n===o.TYPE_PROJECT_NOTE?o.noteGetByProjectSorted:o.noteGetByItemSorted,d=c(e,r),f=(0,a.draftGet)(e,{type:n,id:r}),p=(0,l.getAllProjectCollaborators)(e,s),m=(0,l.getAllCollaborators)(e);return{draft:f,user:u,notes:d,hasMore:(0,o.hasMoreNotes)(e,r,n),collaborators:p,allCollaborators:m,isPremium:(0,i.isPremium)(e)}},c={onAddReaction:o.noteAddReaction,onRemoveReaction:o.noteRemoveReaction,onAddNote:o.noteAddWithFiles,onRemoveNote:o.noteRemove,onUpdateNote:o.noteUpdate,onFetchMoreNotes:o.noteFetch,onCloseWithoutSubmit:a.draftAdd},d=(0,n.connect)(u,c)(s.default);r.default=d},{"../react_components/notes/Notes":922,"../reducers/collaborators":1086,"../reducers/drafts":1093,"../reducers/notes":1114,"../reducers/user":1135,"react-redux":"react-redux"}],102:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.show=r.attach=void 0;var m=e("../utils/fp"),h=o(e("../stores/store")),y=o(e("react")),v=o(e("react-dom")),g=o(e("prop-types")),b=o(e("../components/Constants")),w=o(e("../react_components/productivity_stat/ProductivityStat")),E=e("../react_components/spinners"),j=o(e("../components/opener/WindowOpener.js")),O=n(e("../logger/Logger")),S=e("../reducers/user"),P=e("../reducers/stats"),I=e("../reducers/settings"),k=n(e("./premium_promo/PremiumOnlyModal")),T=e("../react_components/emptyState"),C=e("../reducers/mainView"),D=window,A=D.GB_hide,M=function(e){$AEV(e,"click",x)};r.attach=M;var x=function(){if(!($$(".completed_quick_viz").length>0)){var e=DIV({c:"completed_quick_viz"}),t={fn_left_offset:function(e,t){var r=$position($("top_completed_holder")).x;return window.MINI_VERSION?r-200:r-t.width/2},fn_top_offset:function(){return window.MINI_VERSION?b.default.top_bar.top_offset_mini:b.default.top_bar.top_offset_full},fn_arrow_left:function(){return $position($("top_completed_holder")).x+7},fixed_pos:!0,close_validator_fn:function(){return v.default.unmountComponentAtNode(e),!0}},r=h.default.dispatch((0,P.fetchStats)()),n=h.default.getState();v.default.render(y.default.createElement(R,{width:280,user:n.user,isPremium:(0,S.isPremium)(n),stats:r,theme:(0,I.getTheme)(n)}),e);var o=TooptipWin.show(_("Your Productivity"),e,300,310,t);o&&o.g_window&&$addClass(o.g_window,"productivity-stat")}};r.show=x;var R=function(e){function t(e){var r;return i(this,t),r=u(this,d(t).call(this,e)),r.state={stats:null,error:null},r.props.stats.then(function(e){return r.setState({stats:e})}).catch(function(e){return r.setState({error:e})}),r}return f(t,e),s(t,[{key:"componentDidCatch",value:function(e,t){O.captureError(e,{extra:{info:t},tags:{react:1}}),this.setState({error:e})}},{key:"render",value:function(){var e=this.props,t=e.user,r=e.width,n=e.theme,o=e.isPremium;if(!this.state.stats&&!this.state.error)return y.default.createElement("div",{className:"status_loading"},y.default.createElement(E.RingSpinner,{theme:n}));if(this.state.error)return y.default.createElement("div",{className:"status_error"},y.default.createElement("h6",null,_("Productivity report requires an Internet connection")),y.default.createElement("p",null,_("Please check your connection and try again")));if(0===(0,m.getOr)(0,"stats.completed_count",this.state))return y.default.createElement(T.EmptyStateProductivity,{onButtonClick:function(){return j.default.showPrefs("karma")}});var a=(0,m.getOr)(0,"stats.days_items[0].total_completed",this.state),i=(0,m.getOr)(0,"stats.week_items[0].total_completed",this.state),l={theme:n,isPremium:o,hideKarma:!!t.karma_disabled,stat:this.state.stats,width:r,userName:t.full_name,completedToday:a,completedThisWeek:i,onSettingEditClick:function(){return j.default.showPrefs("karma")},onKarmaInfoClick:j.default.showKarmaInfo,onViewAllCompletedClick:function(){A(),o?h.default.dispatch((0,C.showActivityView)({eventFilter:"item:completed"})):k.showCompletedTasksView()}};return y.default.createElement(w.default,l)}}]),t}(y.default.Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(R,"propTypes",{width:g.default.number.isRequired,theme:g.default.number.isRequired,user:g.default.object.isRequired,isPremium:g.default.bool.isRequired,stats:g.default.object.isRequired})},{"../components/Constants":1,"../components/opener/WindowOpener.js":53,"../logger/Logger":129,"../react_components/emptyState":731,"../react_components/productivity_stat/ProductivityStat":944,"../react_components/spinners":1067,"../reducers/mainView":1109,"../reducers/settings":1129,"../reducers/stats":1130,"../reducers/user":1135,"../stores/store":1140,"../utils/fp":1166,"./premium_promo/PremiumOnlyModal":108,"prop-types":"prop-types",react:"react","react-dom":"react-dom"}],103:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function w(e,t){if(null==e)return{};var r,n,o=E(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function E(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function j(e,t){if(!(0,H.hasSeen)(H.TOOLTIP_SMART_SCHEDULE,V.default.getState())){var r=function(){V.default.dispatch((0,H.markSeen)(H.TOOLTIP_SMART_SCHEDULE))},n=function(){V.default.dispatch((0,H.markSeen)(H.TOOLTIP_SMART_SCHEDULE)),j(e,t)};return void x.show(n,r)}if(M.isOffline()){var o=function(){j(e,t)};return void R.show(o)}var a=DIV(),i=GB_showHTML(_("Suggested dates"),a,500,600,{close_validator_fn:function(){return S.default.unmountComponentAtNode(a),!0}}),l=function(){t&&t.onSubmitted&&t.onSubmitted(),GB_hide()},s=V.default.getState();S.default.render(O.default.createElement(W,{theme:(0,F.getTheme)(s),items:e,onUpdateSubmit:l,onCancel:function(){return i.hide()}}),a)}Object.defineProperty(r,"__esModule",{value:!0}),r.openSmartSchedule=j;var O=o(e("react")),S=o(e("react-dom")),P=o(e("prop-types")),I=e("react-transition-group"),k=n(e("../models/Colors")),T=n(e("../models/ProjectsModel")),C=n(e("../filterist")),D=n(e("../models/SmartSchedule")),A=o(e("../components/formatter/Formatter.js")),M=n(e("../stores/SystemStatusStore")),x=n(e("./SmartScheduleTip")),R=n(e("./SmartScheduleOffline")),N=o(e("../models/ItemsModel")),L=e("../react_components/spinners"),$=e("../react_components/icons"),U=o(e("./TasksDueBar")),B=o(e("../react_components/scheduler/SchedulerWrapper")),V=o(e("../stores/store")),F=e("../reducers/settings"),H=e("../reducers/tooltip"),q=function(e){var t=e.children,r=w(e,["children"]);return O.default.createElement(I.CSSTransition,b({},r,{timeout:{enter:300,exit:0},classNames:"fade"}),t)},G=function(e){function t(e){var r;return c(this,t),r=p(this,m(t).call(this,e)),r.rescheduleClicked=r.rescheduleClicked.bind(h(r)),r.removeClicked=r.removeClicked.bind(h(r)),r}return y(t,e),f(t,[{key:"componentDidMount",value:function(){IstTooltip.showSimpleText(this.rescheduleBtnDom,_("Re-schedule"),null,10,3),IstTooltip.showSimpleText(this.removeBtnDom,_("Remove task from Smart Scheduling"))}},{key:"componentWillUnmount",value:function(){IstTooltip.hide()}},{key:"rescheduleClicked",value:function(e){var t=this,r=this.props.item;IstTooltip.hide(),this.listItemDom.classList.add("on_rescheduling"),B.default.show({anchor:e.target,dialogClassName:"scheduler-smart-schedule",holder:DIV({c:"scheduler_holder"}),selectedDate:r.due,selectedItems:[r],onDateSelect:function(e){t.props.rescheduleFn(r,e?e.toDate():null)},onHide:function(){t.listItemDom&&t.listItemDom.classList.remove("on_rescheduling")}})}},{key:"removeClicked",value:function(){this.props.removeFn(this.props.item),IstTooltip.hide()}},{key:"render",value:function(){var e=this,t=this.props.item,r=T.get(t.project_id),n={backgroundColor:k.getHex("project",r.color)},o=A.default.format(t.content),a=A.default.format(r.name),i=null;if(this.props.item.due){var l=_("Current: {item_due_date}").replace("{item_due_date}",DateUtils.formatView(this.props.item.due,!1));i=O.default.createElement("span",{className:"current_due"},l)}return O.default.createElement("li",{ref:function(t){return e.listItemDom=t}},O.default.createElement("div",{className:"task_block"},O.default.createElement("span",{className:"task_content",dangerouslySetInnerHTML:{__html:o}}),i),O.default.createElement("div",{className:"project_label"},O.default.createElement("span",{className:"project_label_name",dangerouslySetInnerHTML:{__html:a}}),O.default.createElement("span",{className:"project_label_color",style:n})),O.default.createElement("div",{className:"control"},O.default.createElement("span",{className:"control-reschedule",ref:function(t){return e.rescheduleBtnDom=t},onClick:this.rescheduleClicked},O.default.createElement($.CalendarIcon,null)),O.default.createElement("span",{ref:function(t){return e.removeBtnDom=t},onClick:this.removeClicked},O.default.createElement($.SmartScheduleStrikeIcon,null))))}}]),t}(O.default.Component);g(G,"propTypes",{item:P.default.object.isRequired,rescheduleFn:P.default.func.isRequired,removeFn:P.default.func.isRequired});var z=function(e){function t(e){return c(this,t),p(this,m(t).call(this,e))}return y(t,e),f(t,[{key:"render",value:function(){var e,t,r,n,o=this;if(this.props.newDueDate){var a=new Date;switch(DateistDateHelpers.day_diff(a,this.props.newDueDate)){case 0:e=_("Today"),t=DateUtils.formatView(this.props.newDueDate,!0);break;case 1:e=_("Tomorrow"),t=DateUtils.formatView(this.props.newDueDate,!0);break;default:e=DateUtils.getWeekDay(this.props.newDueDate.getDay()),t=DateUtils.formatView(this.props.newDueDate,!1)}r=C.getByDate(this.props.newDueDate),n=r.length>0?O.default.createElement(U.default,{withTooltip:!0,className:"day_section__item_bar",items:r,blockHeigth:11}):null}else e=_("No due date");return O.default.createElement("div",{className:"day_section"},O.default.createElement("h2",null,e,O.default.createElement("small",null,t),n),O.default.createElement("ul",null,O.default.createElement(I.TransitionGroup,null,this.props.items.map(function(e){return O.default.createElement(I.CSSTransition,{key:e.id,timeout:{enter:300,exit:0},classNames:"list_item"},O.default.createElement(G,{key:e.id,item:e,rescheduleFn:o.props.rescheduleFn,removeFn:o.props.removeFn}))}))))}}]),t}(O.default.Component);g(z,"propTypes",{items:P.default.array.isRequired,newDueDate:P.default.object,rescheduleFn:P.default.func.isRequired,removeFn:P.default.func.isRequired});var W=function(e){function t(e){var r;return c(this,t),r=p(this,m(t).call(this,e)),r.state={items:r.props.items,newDueDates:null,error:null},r.reschedule=r.reschedule.bind(h(r)),r.removeFromSmartSchedule=r.removeFromSmartSchedule.bind(h(r)),r.submitSuggestion=r.submitSuggestion.bind(h(r)),r}return y(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this;D.predictItemDuedate(this.state.items,function(t,r){if(r)return e.setState({error:r}),void console.log("SmartSchedule error: ",r);e.setState({newDueDates:t})})}},{key:"reschedule",value:function(e,t){var r=this.state.items.indexOf(e),n=Array.from(this.state.newDueDates);n[r]=t,this.setState({newDueDates:n})}},{key:"removeFromSmartSchedule",value:function(e){var t=this.state.items.indexOf(e),r=Array.from(this.state.items),n=Array.from(this.state.newDueDates);r.splice(t,1),n.splice(t,1),0==r.length&&this.props.onCancel&&this.props.onCancel(),this.setState({items:r,newDueDates:n})}},{key:"submitSuggestion",value:function(){var e=this,t=this.state.items.reduce(function(t,r,n){return t[r.id]=e.state.newDueDates[n],t},{});N.default.updateDue(t),this.props.onUpdateSubmit()}},{key:"render",value:function(){var e=this;if(this.state.error)return O.default.createElement("div",{className:"SmartSchedule"},O.default.createElement("div",{className:"error_display"},O.default.createElement("p",null,"Opps...Something went wrong with our service. Please try again later.")));if(!this.state.newDueDates)return O.default.createElement("div",{className:"SmartSchedule"},O.default.createElement("div",{className:"smart_schedule_loader"},O.default.createElement(L.RingSpinner,{theme:this.props.theme})));var t=[],r=!0,n=!1,o=void 0;try{for(var i,l=this.state.newDueDates.entries()[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=a(i.value,2),u=s[0],c=s[1];c||t.push(this.state.items[u])}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}var d;t.length>0&&(d=O.default.createElement(q,{key:"no_date"},O.default.createElement(z,{key:"no_date",items:t,newDueDate:null,rescheduleFn:this.reschedule,removeFn:this.removeFromSmartSchedule})));var f=new Map,p=!0,m=!1,h=void 0;try{for(var y,v=this.state.newDueDates.entries()[Symbol.iterator]();!(p=(y=v.next()).done);p=!0){var g=a(y.value,2),u=g[0],c=g[1];if(c){var b=this.state.items[u],w=D.isoDateStr(c);f.has(w)?f.get(w).push(b):f.set(w,[b])}}}catch(e){m=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(m)throw h}}var E=Array.from(f).sort().map(function(t){var r=a(t,2),n=r[0],o=r[1],i=D.isoDateStrToDate(n);return i.setHours(23),i.setMinutes(59),i.setSeconds(59),O.default.createElement(q,{key:n},O.default.createElement(z,{key:n,items:o,newDueDate:i,rescheduleFn:e.reschedule,removeFn:e.removeFromSmartSchedule}))});return O.default.createElement("div",{className:"SmartSchedule"},O.default.createElement("div",{className:"day_sections_holder"},O.default.createElement(I.TransitionGroup,null,O.default.createElement("div",{className:"desc"},_("Smart Schedule is an AI that helps you schedule tasks."),"\xa0",O.default.createElement("a",{href:"https://todoist.com/smartSchedule",target:"_blank",rel:"noopener noreferrer"},_("Learn more"))),d,E)),O.default.createElement("div",{className:"action_holder"},O.default.createElement("a",{onClick:this.props.onCancel,className:"cancel_btn"},_("Cancel")),O.default.createElement("a",{onClick:this.submitSuggestion,className:"ist_button ist_button_red submit_btn"},_("Update"))))}}]),t}(O.default.Component);g(W,"propTypes",{theme:P.default.number.isRequired,items:P.default.array.isRequired,onUpdateSubmit:P.default.func,onCancel:P.default.func})},{"../components/formatter/Formatter.js":22,"../filterist":121,"../models/Colors":149,"../models/ItemsModel":155,"../models/ProjectsModel":159,"../models/SmartSchedule":164,"../react_components/icons":842,"../react_components/scheduler/SchedulerWrapper":1009,"../react_components/spinners":1067,"../reducers/settings":1129,"../reducers/tooltip":1133,"../stores/SystemStatusStore":1137,"../stores/store":1140,"./SmartScheduleOffline":104,"./SmartScheduleTip":105,"./TasksDueBar":106,"prop-types":"prop-types",react:"react","react-dom":"react-dom","react-transition-group":"react-transition-group"}],104:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=DIV(),r=GB_showHTML(_("Smart Schedule"),t,500,500,{close_validator_fn:function(){return i.default.unmountComponentAtNode(t),!0}}),n=function(t){r.hide(),e&&e(),t.preventDefault()};i.default.render(a.default.createElement(s,{onTryClick:n}),t)}Object.defineProperty(r,"__esModule",{value:!0}),r.show=o;var a=n(e("react")),i=n(e("react-dom")),l=n(e("prop-types")),s=function(e){return a.default.createElement("div",{className:"smart_schedule_offline"},a.default.createElement("h1",null,_("Smart Schedule requires an Internet connection")),a.default.createElement("p",null,_("Please check your connection and try again")),a.default.createElement("div",{className:"action_holder"},a.default.createElement("a",{className:"ist_button ist_button_red try_btn",onClick:e.onTryClick},_("Try Again"))))};s.propTypes={onTryClick:l.default.func}},{"prop-types":"prop-types",react:"react","react-dom":"react-dom"}],105:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=DIV(),n=GB_showHTML(_("Smart Schedule"),r,500,500,{close_validator_fn:function(){return i.default.unmountComponentAtNode(r),t&&t(),!0}}),o=function(t){n.hide(),e&&e(),t.preventDefault()};i.default.render(a.default.createElement(s,{onTryClick:o}),r)}Object.defineProperty(r,"__esModule",{value:!0}),r.show=o;var a=n(e("react")),i=n(e("react-dom")),l=n(e("prop-types")),s=function(e){return a.default.createElement("div",{className:"smart_schedule_tip"},a.default.createElement("div",{className:"banner_img_wrap"},a.default.createElement("img",{src:"https://d3ptyyxy2at9ui.cloudfront.net/smart_schedule_illustration-4e9395.png",alt:""})),a.default.createElement("h1",null,_("Manage your workload faster than ever!")),a.default.createElement("p",null,_("The AI-powered Smart Schedule suggests the best due dates for your tasks based on:")),a.default.createElement("ul",null,a.default.createElement("li",null,_("Task urgency")),a.default.createElement("li",null,_("Your current task load")),a.default.createElement("li",null,_("Your productivity habits"))),a.default.createElement("p",null,_("And more...")),a.default.createElement("div",{className:"action_holder"},a.default.createElement("a",{className:"menu_item_more",href:"https://todoist.com/smartSchedule",target:"_blank",rel:"noopener noreferrer"},_("Learn more")),a.default.createElement("a",{className:"ist_button ist_button_red try_btn",onClick:e.onTryClick},_("Try it"))))};s.propTypes={onTryClick:l.default.func}},{"prop-types":"prop-types",react:"react","react-dom":"react-dom"}],106:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){
return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=o(e("react")),h=o(e("prop-types")),_=o(e("classnames")),y=o(e("../utils/format")),v=n(e("../models/ProjectsModel")),g=n(e("../models/Colors")),b=function(e){function t(){return i(this,t),u(this,d(t).apply(this,arguments))}return f(t,e),s(t,[{key:"componentDidMount",value:function(){if(this.props.withTooltip){var e=(0,y.default)(_n("{count} task due","{count} tasks due",this.props.items.length),{count:this.props.items.length});IstTooltip.showSimpleText(this.ref,e)}}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.blockHeight,o=r.blockWidth,a=r.className,i=r.items;try{var l=i.map(function(e){var t=v.get(e.project_id);return g.getHex("project",t.color)}).sort();e=l.map(function(e,t){var r={backgroundColor:e,display:"inline-block",width:o,height:n};return m.default.createElement("span",{key:t,className:"tasks-due-bar-unit",style:r})})}catch(t){e=[]}var s=(0,_.default)("tasks-due-bar",a);return m.default.createElement("div",{ref:function(e){return t.ref=e},className:s},e)}}]),t}(m.default.Component);b.propTypes={blockHeight:h.default.number,blockWidth:h.default.number,items:h.default.array.isRequired,height:h.default.number,withTooltip:h.default.bool,className:h.default.string},b.defaultProps={blockHeight:8,blockWidth:8,withTooltip:!1};var w=b;r.default=w},{"../models/Colors":149,"../models/ProjectsModel":159,"../utils/format":1162,classnames:"classnames","prop-types":"prop-types",react:"react"}],107:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){try{return ICE.annotateAjaxData.push(function(e){window.CLIENT_ID&&e instanceof Object&&(e._client_id=window.CLIENT_ID)}),I.default.init(),P.default.loadData().then(K.default.loadSvgBundle).then(function(){Signals.sendSignal("app_data_loaded"),m(),J.default.inIDB("notes")&&J.default.loadStatus.notes.then(function(){Signals.sendSignal("instant_refresh_interface")}),z.start(),setTimeout(function(){$addClass($html(),"todoist_loaded")},50),j.default.onIntialized&&j.default.onIntialized()}).catch(function(e){(0,W.default)(e,{message:_("Could not load Todoist local data. Could be because you are using a private window. Please try login again.")})}),(0,S.postMessageToWindow)(top,"TODOIST_INITED:true")}catch(e){(0,W.default)(e,{message:_("Could not load Todoist local data. Could be because you are using a private window. Please try login again.")})}}function m(){var e=$("left_menu");return $hide($("app_holder"),e,$("content")),e&&O.default.render(),window.PageAddTask=V.default,IstTooltip.init(),x.default.init(),C.default.init(),k.default.init(),T.default.init(),R.default.init(),C.default.init(),M.default.init(),U.ProjectEditorGeneric.init(),A.default.init(),L.default.render(),F.default.init(A.default.get()),H.default.init(),q.default.init(),G.default.init(),N.default.current_list=$("projects_list"),e&&$AEV(window,"load",function(){return N.default.arrows.updateArrows()}),setTimeout(h,10),D.default.checkTimezone(),Signals.sendSignal("instant_refresh_interface"),document.addEventListener("click",function(e){(0,Y.default)(e.target)}),Signals.sendSignal("data_fully_loaded")}function h(){try{y(),IstComplete.init(),j.default.loadStartPage&&B.default.show(),$AEV([$("editor")],"contextmenu",function(e){if(e.shift)return!0;var t,r;return!(!(t=$eventElm(e))||"textarea"!==(r=$nodeName(t))&&"input"!==r)||!e.ctrl}),$AEV(window,"resize",function(){Signals.sendSignal("hide_menus")}),$AEV($("left_menu"),"scroll",function(){var e=$("left_menu").scrollTop;e!==window.LEFT_MENU_ST&&Signals.sendSignal("hide_menus"),window.LEFT_MENU_ST=e}),$show($("app_holder"),$("top_bar"),$("left_menu"),$("content"))}catch(e){(0,W.default)(e)}}function y(){if(window.location.host.match(/firefox|gmail/)){var e=function(){return!1};FilesManager.isDropboxEnabled=e,FilesManager.isDriveEnabled=e,FilesManager.isSelectFilesEnabled=e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var v=n(e("react")),g=e("react-redux"),b=e("react-dnd"),w=n(e("@doist/react-dnd-html5-backend")),E=n(e("../stores/store")),j=n(e("../models/Config")),O=n(e("../components/left_menu/LeftMenu")),S=e("../components/misc/Util.js"),P=n(e("../models/LoadEngine")),I=n(e("../plugin_version/MessageHandler")),k=n(e("../plugin_version/PluginVersion.js")),T=n(e("../plugin_version/LinkRedirecter.js")),C=n(e("../components/location_manager/LocationManager.js")),D=n(e("../components/timezone_checker/TimezoneChecker")),A=n(e("../components/agenda/Agenda.js")),M=n(e("../components/notes/Notes.js")),x=n(e("../components/item_selecter/ItemSelecter.js")),R=n(e("../components/keyboard_shortcuts/KeyboardShortcuts.js")),N=n(e("../components/projects_list/ProjectList")),L=n(e("../components/projects_list/ProjectArchive")),U=e("../components/project_editor/ProjectEditor.js"),B=n(e("../components/start_page/StartPage.js")),V=n(e("../components/page_add_task/PageAddTask")),F=n(e("../menus/MenuAgendaEdit.js")),H=n(e("../menus/MenuUser.js")),q=n(e("../menus/MenuItemEditMore")),G=n(e("../menus/MenuReschedule")),z=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../models/Cron")),W=n(e("../init/showInitError")),Y=n(e("../utils/traverseTracking")),K=n(e("../components/themes/Themes")),J=n(e("../models/StatePersistence")),Q=n(e("../react_components/app_content"));e("../mini/MiniVersion");var X=function(e){function t(e){return a(this,t),s(this,c(t).call(this,e))}return d(t,e),l(t,[{key:"componentDidMount",value:function(){p()}},{key:"render",value:function(){return v.default.createElement(g.Provider,{store:E.default},v.default.createElement(Q.default,null))}}]),t}(v.default.Component),Z=(0,b.DragDropContext)(w.default)(X);r.default=Z},{"../components/agenda/Agenda.js":5,"../components/item_selecter/ItemSelecter.js":27,"../components/keyboard_shortcuts/KeyboardShortcuts.js":35,"../components/left_menu/LeftMenu":37,"../components/location_manager/LocationManager.js":41,"../components/misc/Util.js":43,"../components/notes/Notes.js":46,"../components/page_add_task/PageAddTask":54,"../components/project_editor/ProjectEditor.js":60,"../components/projects_list/ProjectArchive":70,"../components/projects_list/ProjectList":71,"../components/start_page/StartPage.js":91,"../components/themes/Themes":95,"../components/timezone_checker/TimezoneChecker":96,"../init/showInitError":128,"../menus/MenuAgendaEdit.js":134,"../menus/MenuItemEditMore":135,"../menus/MenuReschedule":143,"../menus/MenuUser.js":145,"../mini/MiniVersion":146,"../models/Config":150,"../models/Cron":151,"../models/LoadEngine":157,"../models/StatePersistence":166,"../plugin_version/LinkRedirecter.js":643,"../plugin_version/MessageHandler":644,"../plugin_version/PluginVersion.js":645,"../react_components/app_content":673,"../stores/store":1140,"../utils/traverseTracking":1209,"@doist/react-dnd-html5-backend":"@doist/react-dnd-html5-backend",react:"react","react-dnd":"react-dnd","react-redux":"react-redux"}],108:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=DIV(),r=GB_showHTML(_("Premium"),t,500,500,{no_side_padding:!0,close_validator_fn:function(){return T.default.unmountComponentAtNode(t),!0}}),n=function(){r.hide()},a=o(Z[e],3),i=a[0],l=a[1],s=a[2];T.default.render(k.default.createElement(re,{isEligibleForTrial:!1,feature:e,header:i,headerImg:l,body:s,onLinkClick:n}),t)}function u(e){var t=e.onClose,r=e.feature,n=e.isEligibleForTrial,a=o(Z[r],3),i=a[0],l=a[1],s=a[2];return k.default.createElement(re,{isEligibleForTrial:n,header:i,headerImg:l,body:s,onLinkClick:t})}function c(){s(R)}function d(){s(N)}function f(){s($)}function p(){var e=x.store.getState().user;s((e.features.restriction||e.restriction||0)>0?B:U)}function m(){s(V)}function h(){s(F)}function y(){s(H)}function v(){s(q)}function g(){s(G)}function b(){s(z)}function w(){s(W)}function E(){s(Y)}function j(){s(K)}function O(){s(J)}function S(){s(Q)}function P(){s(X)}function I(){s(L)}Object.defineProperty(r,"__esModule",{value:!0}),r.showLabel=c,r.showTaskComment=d,r.showProjectComment=f,r.showReminder=p,r.showFilter=m,r.showTemplate=h,r.showEmailForwarding=y,r.showProjectCalendarFeed=v,r.showCollaboratorLimit=g,r.showTaskActivityLog=b,r.showProjectActivityLog=w,r.showTaskDuplication=E,r.showSharedProjectFileUpload=j,r.showAudioRecording=O,r.showCompletedTasksView=S,r.showCompletedTasksSearch=P,r.showTaskLimit=I,r.PremiumModal=r.MODAL_CONTENT=void 0;var k=n(e("react")),T=n(e("react-dom")),C=n(e("prop-types")),D=e("react-redux"),A=e("../../utils"),M=e("../../utils/deps"),x=(0,M.defineDeps)("PremiumOnlyModal",["store"]),R="FEATURE_LABEL",N="FEATURE_TASK_COMMENT",L="FEATURE_TASK_LIMIT",$="FEATURE_PROJECT_COMMENT",U="FEATURE_REMINDER",B="FEATURE_UNLIMITED_REMINDER",V="FEATURE_FILTER",F="FEATURE_TEMPLATE",H="FEATURE_EMAIL_FORWARDING",q="FEATURE_PROJECT_CALENDAR_FEED",G="FEATURE_COLLABORATOR_LIMIT",z="FEATURE_TASK_ACTIVITY_LOG",W="FEATURE_PROJECT_ACTIVITY_LOG",Y="FEATURE_TASK_DUPLICATION",K="FEATURE_SHARED_PROJECT_FILE_UPLOAD",J="FEATURE_AUDIO_RECORDING",Q="FEATURE_COMPLETED_TASKS_VIEW",X="FEATURE_COMPLETED_TASKS_SEARCH",Z={FEATURE_LABEL:[_("Labels are a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_labels%402x-410488.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Save time by batching your tasks together with custom labels like @email, @waiting, or @5_min.")))],FEATURE_TASK_COMMENT:[_("Comments & File Uploads are Premium features"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_comments%402x-d3258f.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Save time by keeping all the information you need organized right with your tasks. Upload any file \u2013 documents, photos, spreadsheets, PDFs \u2013 and add additional notes to your tasks.")))],FEATURE_PROJECT_COMMENT:[_("Project Comments and Uploads are Premium features"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_comments%402x-d3258f.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Keep all the project-level information you need neatly organized in one place. Upload relevant files and save important project details in additional notes.")))],FEATURE_REMINDER:[_("Reminders are a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_reminders%402x-7bdea4.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Never forget a task again. Send yourself a reminder by email or push notification at a specific date & time or location.")))],FEATURE_UNLIMITED_REMINDER:[_("Get unlimited Reminders!"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_reminders%402x-7bdea4.png",k.default.createElement("div",null,k.default.createElement("p",null,_("You\u2019ve reached your limit of 5 task reminders. Upgrade to Premium to get unlimited reminders \u2013 via email or push notification \u2013 for any task.")))],FEATURE_FILTER:[_("Custom Filters are a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_filters%402x-395a6c.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Customize your Todoist with saved searches for your most important task views. For example, all the tasks due in the next 7 days in a specific project.")))],FEATURE_TEMPLATE:[_("Templates are a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_templates%402x-382f11.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Save time by copying and recreating any project. Create checklists for repetitive work like writing blog posts, preparing for trade shows, or onboarding new clients.")))],FEATURE_EMAIL_FORWARDING:[_("Email Forwarding is a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_mail%402x-808a60.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Organize your inbox by forwarding emails as tasks to any Todoist project. Or keep all the relevant information organized in one place by forward emails as task and project comments.")))],FEATURE_PROJECT_CALENDAR_FEED:[_("Project Calendar Feeds is a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_calendar%402x-c7fb72.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Stay on top of your deadlines by viewing any project inside your calendar. Stay on the same page by sharing project calendar feeds with clients, coworkers, or loved ones.")))],FEATURE_COLLABORATOR_LIMIT:[_("Share projects with up to 25 people!"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_collaborators%402x-88bb0b.png",k.default.createElement("div",null,k.default.createElement("p",null,(0,A.format)(_n("You\u2019ve reached your limit of 1 collaborator per project.","You\u2019ve reached your limit of {n} collaborators per project.",5),{n:5})),k.default.createElement("p",null,_("Upgrade to Premium and share your projects with up to 25 people.")))],FEATURE_TASK_ACTIVITY_LOG:[_("Task Activity Log is a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_activity%402x-e4d8d7.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Get a quick overview of who did what and when for any task. See who created or completed it, changed the due date, added comments or file uploads, and more.")))],FEATURE_PROJECT_ACTIVITY_LOG:[_("Project Activity Log is a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_activity%402x-e4d8d7.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Get a quick overview of who did what and when in any project. See who created or completed tasks, changed due dates, added comments or file uploads, and more.")))],FEATURE_TASK_DUPLICATION:[_("Duplicate Tasks is a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_tasks%402x-c53209.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Save time by easily creating copies of one or more tasks inside any project.")))],FEATURE_SHARED_PROJECT_FILE_UPLOAD:[_("File Uploads are a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_files%402x-4bc19a.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Share any file - documents, photos, spreadsheets, PDFs, and more - with anyone. Uploads stay neatly organized right with your tasks.")))],FEATURE_AUDIO_RECORDING:[_("Audio Recording is a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_audio%402x-223119.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Quickly share more details in an audio recording. Audio recordings stay neatly organized with your task and easily accessible to everyone in your shared project.")))],FEATURE_COMPLETED_TASKS_VIEW:[_("The Completed Tasks Overview is a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_tasks%402x-c53209.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Get an overview of all completed tasks across all projects. Review your own progress \u2013 or create reports for your team. Free users can still view completed tasks inside any project.")))],FEATURE_COMPLETED_TASKS_SEARCH:[_("Completed tasks search is a Premium feature"),"https://d3ptyyxy2at9ui.cloudfront.net/premium_tasks%402x-c53209.png",k.default.createElement("div",null,k.default.createElement("p",null,_("Expand your search to all your completed tasks.")))],FEATURE_TASK_LIMIT:[(0,A.format)(_n("You can add a maximum of 1 task per project with your current plan","You can add a maximum of {n} tasks per project with your current plan"),{n:300}),"https://d3ptyyxy2at9ui.cloudfront.net/premium_tasks%402x-c53209.png",k.default.createElement("div",null,k.default.createElement("p",null,_("An upgraded subscription plan will increase the number of tasks that each project can hold.")))]};r.MODAL_CONTENT=Z,u.propTypes={onClose:C.default.func,feature:C.default.string.isRequired,isEligibleForTrial:C.default.bool};var ee=function(e){var t=e.user;return{isEligibleForTrial:!(t.free_trail_expires||t.is_premium||!t.magic_num_reached)}},te=(0,D.connect)(ee)(u);r.PremiumModal=te;var re=function(e){var t;return t=e.isEligibleForTrial?k.default.createElement("a",{className:"ist_button ist_button_red link_cta",href:"/premium/free_trial",target:"_blank",onClick:e.onLinkClick},_("Start Your Free Trial")):k.default.createElement("a",{className:"ist_button ist_button_red link_cta",href:"/premium/upgrade",target:"_blank",onClick:e.onLinkClick},_("Upgrade Now")),k.default.createElement("div",{className:"PremiumOnlyModal"},k.default.createElement("h1",null,e.header,k.default.createElement("img",{src:e.headerImg,alt:""})),k.default.createElement("div",{className:"main_content"},e.body,k.default.createElement("div",{className:"action_holder"},t,k.default.createElement("a",{className:"link_more action",href:"https://todoist.com/premium",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},_("Learn more about Premium")))))};window.showPremiumModel=s,re.propTypes={isEligibleForTrial:C.default.bool.isRequired,onLinkClick:C.default.func,header:C.default.node,headerImg:C.default.string,body:C.default.node};_("Monthly Summary is a Premium feature"),_("Audio Recording is a Premium feature"),_("Photo Uploads are a Premium feature"),_("Premium Themes are a Premium feature"),_("The Activity Log is a Premium feature"),_("See any changes that have been made in your account, by you or your collaborators. Free users can still view their completed tasks inside any project."),_("Learn more")},{"../../utils":1176,"../../utils/deps":1154,"prop-types":"prop-types",react:"react","react-dom":"react-dom","react-redux":"react-redux"}],109:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){h(e,t,r[t])})}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var y=n(e("react")),v=n(e("../../react_components/reactist/Notifier")),g=e("../../reducers/tooltip"),b=n(e("../../stores/store")),w={transition:"all ".concat(300,"ms ease-out"),bottom:"-10px",opacity:0},E={entering:{bottom:"-10px",opacity:0},entered:{bottom:"10px",opacity:1}},j=function(e){function t(e){var r;return l(this,t),r=c(this,d(t).call(this,e)),h(f(r),"handleLearnMoreClick",function(){r.markSeen()}),h(f(r),"handleGotItClick",function(){r.markSeen()}),h(f(r),"handleOnClose",function(){r.markSeen()}),r.handleLearnMoreClick=r.handleLearnMoreClick.bind(f(r)),r}return p(t,e),u(t,[{key:"markSeen",value:function(){b.default.dispatch((0,g.markSeen)(g.TOOLTIP_GOOGLE_ASSISTANT))}},{key:"render",value:function(){var e=this;return y.default.createElement(v.default,{opened:!0,autoHideDurationMs:8e3,resumeHideDurationMs:8e3,transitionDurationMs:300,onClose:this.handleOnClose},function(t,r){return y.default.createElement("div",a({className:"promo_banner",style:i({},w,E[t])},r),y.default.createElement("div",{className:"banner is-shown"},y.default.createElement("div",{className:"main-section-full"},y.default.createElement("h1",null,_("Your Google Assistant lists are now synced with Todoist projects. Any synced tasks will have the \u201cAssistant\u201d label.")),y.default.createElement("a",{className:"ist_button ist_button_red",onClick:e.handleGotItClick},_("Got it")),y.default.createElement("a",{className:"link",onClick:e.handleLearnMoreClick,href:"https://get.todoist.help/hc/en-us/articles/360003357900",target:"_blank",rel:"noopener noreferrer"},_("Learn more")))))})}}]),t}(y.default.Component);r.default=j},{"../../react_components/reactist/Notifier":965,"../../reducers/tooltip":1133,"../../stores/store":1140,react:"react"}],110:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.shouldShowPremiumTrialBanner=r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=e("react-redux"),y=e("../../reducers/tooltip"),v=n(e("../../stores/store")),g=n(e("../../utils/format")),b=function(e){function t(e){var r;return a(this,t),r=s(this,u(t).call(this,e)),r.onAcceptClick=r.onAcceptClick.bind(c(r)),r.onRejectClick=r.onRejectClick.bind(c(r)),r}return d(t,e),l(t,[{key:"onAcceptClick",value:function(){v.default.dispatch((0,y.acceptPremiumTrial)()).then(function(){window.location="/premium/free_trial"})}},{key:"onRejectClick",value:function(){v.default.dispatch((0,y.rejectPremiumTrial)())}},{key:"render",value:function(){return p.default.createElement("div",{className:"promo_banner"},p.default.createElement("div",{className:"banner is-shown"},p.default.createElement("img",{className:"banner-img",src:"https://d3ptyyxy2at9ui.cloudfront.net/laptop_premium-76e0a8.png",alt:""}),p.default.createElement("div",{className:"main-section"},p.default.createElement("div",null,p.default.createElement("h1",null,(0,g.default)(_("{user_name}, want to try Premium for free? It\u2019s this way\u2026"),{user_name:this.props.user?this.props.user.full_name:""})),p.default.createElement("a",{className:"ist_button ist_button_red",onClick:this.onAcceptClick},_("Start Free Trial")),p.default.createElement("a",{className:"not-now-btn",onClick:this.onRejectClick},_("Not Now"))))))}}]),t}(p.default.Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(b,"propTypes",{user:m.default.object});var w=function(e){return{user:e.user}},E=(0,h.connect)(w)(b);r.default=E;var j=function(e){return e.user&&!e.user.free_trail_expires&&!e.user.is_premium&&(0,y.isScheduled)(y.TOOLTIP_PREMIUM_TRIAL,e)};r.shouldShowPremiumTrialBanner=j},{"../../reducers/tooltip":1133,"../../stores/store":1140,"../../utils/format":1162,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],111:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.shouldShowPremiumWillExpireBanner=r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=e("react-redux"),y=e("../../reducers/tooltip"),v=n(e("../../stores/store")),g=n(e("../../utils/format")),b=function(e){function t(e){var r;return a(this,t),r=s(this,u(t).call(this,e)),r.onUpgradeClick=r.onUpgradeClick.bind(c(r)),r.onNotNowClick=r.onNotNowClick.bind(c(r)),r}return d(t,e),l(t,[{key:"onUpgradeClick",value:function(){v.default.dispatch((0,y.markSeen)(y.TOOLTIP_PREMIUM_EXPIRING,y.EVENT_PREMIUM_EXPIRING_FOLLOW))}},{key:"onNotNowClick",value:function(){v.default.dispatch((0,y.markSeen)(y.TOOLTIP_PREMIUM_EXPIRING,y.EVENT_PREMIUM_EXPIRING_CLOSE))}},{key:"render",value:function(){var e,t=this.props.user.full_name.split(" ")[0];return e=this.props.isPremiumTrial?(0,g.default)(_("{user_first_name}, just a reminder - your Premium trial ends in {day_num} days. Want to stay Premium? Click here."),{user_first_name:t,day_num:this.props.expireDayCount}):(0,g.default)(_("{user_first_name}, just a reminder - your Premium expires in {day_num} days. Want to keep your Premium access? Click here."),{user_first_name:t,day_num:this.props.expireDayCount}),p.default.createElement("div",{className:"promo_banner"},p.default.createElement("div",{className:"banner is-shown"},p.default.createElement("img",{className:"banner-img",src:"https://d3ptyyxy2at9ui.cloudfront.net/laptop_premium-76e0a8.png",alt:""}),p.default.createElement("div",{className:"main-section"},p.default.createElement("h1",null,e),p.default.createElement("a",{className:"ist_button ist_button_red",onClick:this.onUpgradeClick,href:"https://todoist.com/premium",target:"_blank",rel:"noopener noreferrer"},this.props.isPremiumTrial?_("Upgrade"):_("Renew")),p.default.createElement("a",{className:"not-now-btn",onClick:this.onNotNowClick},_("Not Now")))))}}]),t}(p.default.Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(b,"propTypes",{user:m.default.object,isPremiumTrial:m.default.bool,expireDayCount:m.default.number});var w=function(e){var t=!1,r=null;e.user.free_trail_expires&&(r=new Date(e.user.free_trail_expires),t=r>new Date),t||(r=new Date(e.user.premium_until));var n=DateistDateHelpers.day_diff(new Date,r);return{user:e.user,isPremiumTrial:t,expireDayCount:n}},E=(0,h.connect)(w)(b);r.default=E;var j=function(e){if(!e.user||!e.user.premium_until&&!e.user.free_trail_expires||!(0,y.isScheduled)(y.TOOLTIP_PREMIUM_EXPIRING,e))return!1;var t=!1,r=null;e.user.free_trail_expires&&(r=new Date(e.user.free_trail_expires),t=r>new Date),t||(r=new Date(e.user.premium_until));var n=DateistDateHelpers.day_diff(new Date,r);return!(n>40||n<0)};r.shouldShowPremiumWillExpireBanner=j},{"../../reducers/tooltip":1133,"../../stores/store":1140,"../../utils/format":1162,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],112:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){
var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=o(e("react")),h=o(e("prop-types")),_=e("react-redux"),y=e("reselect"),v=o(e("./GoogleAssistant")),g=n(e("./PremiumTrialBanner")),b=n(e("./PremiumWillExpireBanner")),w=e("../../reducers/tooltip"),E=e("../../utils/fp"),j=function(e){function t(e){return i(this,t),u(this,d(t).call(this,e))}return f(t,e),s(t,[{key:"render",value:function(){var e=this.props.state;return e.undo?null:(0,w.isScheduled)(w.TOOLTIP_GOOGLE_ASSISTANT,e)?m.default.createElement(v.default,null):(0,g.shouldShowPremiumTrialBanner)(e)?m.default.createElement(g.default,null):(0,b.shouldShowPremiumWillExpireBanner)(e)?m.default.createElement(b.default,null):null}}]),t}(m.default.Component);j.propTypes={state:h.default.shape({tooltip:h.default.shape({scheduled:h.default.any,seen:h.default.any})})};var O=(0,y.createSelector)((0,E.pick)(["undo","tooltip.scheduled","tooltip.seen","user"]),function(e){return{state:e}}),S=(0,_.connect)(O)(j),P=S;r.default=P},{"../../reducers/tooltip":1133,"../../utils/fp":1166,"./GoogleAssistant":109,"./PremiumTrialBanner":110,"./PremiumWillExpireBanner":111,"prop-types":"prop-types",react:"react","react-redux":"react-redux",reselect:"reselect"}],113:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("../../react_components/topbar/DailyGoalPie")),a=e("../../reducers/stats"),i=e("../../reducers/settings"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../ProductivityStat")),s=function(e){var t=e.stats,r=e.user;return t&&r?{vocationMode:r.features.karma_vacation,goal:(0,a.dailyGoal)(e),completed:(0,a.completedToday)(e),counter:r.karma_disabled?t.completed_count:r.karma,theme:(0,i.getTheme)(e),onClick:l.show}:{}},u=(0,n.connect)(s)(o.default);r.default=u},{"../../react_components/topbar/DailyGoalPie":1076,"../../reducers/settings":1129,"../../reducers/stats":1130,"../ProductivityStat":102,"react-redux":"react-redux"}],114:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=e("react-redux"),_=n(e("./DailyGoalPie")),y=n(e("../ErrorBoundary")),v=n(e("../../components/top_icons/TopIcons")),g=n(e("../../components/quick_find/QuickFind")),b=n(e("../../components/themes/Themes")),w=e("../../reducers/selectors"),E=e("../../reducers/settings"),j=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"componentDidMount",value:function(){v.default.render(),g.default.render(),b.default.switchThemes(this.props.theme)}},{key:"render",value:function(){return p.default.createElement("div",{id:"top_bar",style:{display:"none"}},p.default.createElement("div",{id:"top_bar_inner"},p.default.createElement("div",{id:"logo","data-track":"navigation|todoist_logo"}),p.default.createElement("div",{id:"top_icons"},p.default.createElement("span",{id:"before_pie",style:{display:"none"}}),p.default.createElement(y.default,null,p.default.createElement(_.default,null))),p.default.createElement("div",{id:"quick_find"})))}}]),t}(p.default.Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(j,"propTypes",{theme:m.default.number});var O=function(e){return{dataLoaded:(0,w.dataLoaded)(e),theme:(0,E.getTheme)(e)}},S=function(e){return e.dataLoaded?p.default.createElement(j,e):null},P=(0,h.connect)(O)(S);r.default=P},{"../../components/quick_find/QuickFind":76,"../../components/themes/Themes":95,"../../components/top_icons/TopIcons":97,"../../reducers/selectors":1128,"../../reducers/settings":1129,"../ErrorBoundary":100,"./DailyGoalPie":113,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],115:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=n(e("../stores/subscribeSelected")),d=n(e("../stores/store")),f=e("../reducers/counts"),p=e("reselect"),m=e("../reducers/settings"),h=e("../reducers/notes"),y=e("../reducers/user"),v=e("../reducers/detailView"),g=e("../reducers/items"),b=window,w=b.DateistDateHelpers,E=window,j=E.DateUtils,O=window,S=O.Signals,P=e("../components/misc/Misc.js"),I=P.isMacApp,k=P.getMacAppVersion,T=e("../components/projects_list/ProjectListUtils"),C=e("../components/notes/Notes.js"),D=e("../components/local_notifications/LocalNotifications"),A=e("../components/local_reminders/LocalReminders"),M=e("../components/postpone/Postpone"),x=e("../components/quick_add/SmartPrefilling"),R=e("../components/agenda/AgendaCurrentDays"),N=e("../models/ItemsModel"),L=e("../models/LabelsModel"),$=e("../models/ProjectsModel"),U=e("../models/SyncEngine"),B=e("../models/Collaborators"),V=e("../models/Reminders"),F=V.RemindersModel,H=e("../filterist"),q=e("../models/UtilModels"),G=e("../models/Colors"),z=e("../plugin_version/ContentTransformers"),W=z.GContentTransformers,Y=e("../models/DateExt").default,K="local.todoist.com"===window.location.host,J="beta.todoist.com"===window.location.host,Q="macstore.todoist.com"===window.location.host,X=(0,p.createSelector)(function(e){return e.user},m.getTheme,function(e,t){return s({},e,{theme:t})}),Z=function(){return X(d.default.getState())};if(I()||K||J||Q){var ee;window.MacBridge=ee={bridge:null,handleRequest:function(e,t){var r,n,a,i={status:"ok"},l=k(),s=function(e,t){var r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;null===s.color&&(s.color=7),l&&l<7.1&&(s.color=G.normalizeToOld(e,s.color))}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}},u=function(){i.projects=[];var e=!0,t=!1,r=void 0;try{for(var n,o=$.getAll({with_indent:!0})[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value,l=$update({},a);B.isProjectShared(a.id)?(l.collaborators=B.getAll(l.id),i.projects.push(l)):i.projects.push(l)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}s("project",i.projects)},c=function(){i.labels=[];var e=!0,t=!1,r=void 0;try{for(var n,o=L.getAll(!0)[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value,l=$update({},a);i.labels.push(l)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}s("label",i.labels)},f=function(){var e=Array.from(H.getOverdueAndToday(d.default.getState())),t=o(e,2),r=t[0],n=t[1];i.items_today=ee.handleDayResult(r),i.items_overdue=ee.handleDayResult(n)},p=function(){i.user=Z(),i.user.lang=window.LANG,i.user.dateist_lang=window.DATEIST_LANG||"en"};if("sync"===e.action)U.sync(null,!0);else if("logout"===e.action)S.sendSignal("logout");else if("getData"===e.action)u(),c(),f(),p();else if("getProjects"===e.action)u();else if("getLabels"===e.action)c();else if("getTodayItems"===e.action)f();else if("getUser"===e.action)p();else if("parseDate"===e.action)ee.parseDate(e,i);else if("formatDate"===e.action)ee.formatDate(e,i);else if("getCollaborators"===e.action)i.collaborators=B.collaborators;else if("getProjectMembersWithID"===e.action){var m;m=B.isProjectShared(e.id)?B.getAll(e.id):[],i.members=m,i.length=m.length}else if("completeItem"===e.action)(r=N.getById(e.itemId))&&N.complete(r);else if("uncompleteItem"===e.action)(r=N.getById(e.itemId))&&N.uncomplete(r.id,r.in_history);else if("genericAction"===e.action){var _=!0,b=!1,w=void 0;try{for(var E,O=e.actions[Symbol.iterator]();!(_=(E=O.next()).done);_=!0){r=E.value;var P;if("complete"===r.action)(P=N.getById(r.id))&&N.complete(P);else if("postpone"===r.action)(P=N.getById(r.id))&&M.postPoneModel(P);else if("view_project"===r.action)T.setCurrentById(r.project_id);else if("view_task"===r.action){var I=d.default.getState(),D=(0,g.itemGetBySyncID)(r.sync_id,I);D||(D=(0,g.itemGetByID)(I,r.item_id)),(0,y.isDoistUser)(I)&&D?d.default.dispatch((0,v.detailViewShowItem)(D)):C.showItemNotes(r.item_id,r.note_id,r.sync_id)}else if("view_project_note"===r.action)(0,y.isDoistUser)(d.default.getState())?d.default.dispatch((0,v.detailViewShowProject)(r.project_id,{activeTab:"comments",highlightedNoteId:r.note_id})):C.showProjectNotes(r.project_id,r.note_id);else if("view_business_users"===r.action)window.open("/business/users");else if("view_business_billing"===r.action)window.open("/business/accountAndBilling");else if("note_add"===r.action){var A=!!r.project_id;A?d.default.dispatch((0,h.noteAdd)({parentId:r.project_id,content:r.text,type:h.TYPE_PROJECT_NOTE})):d.default.dispatch((0,h.noteAdd)({parentId:r.item_id,content:r.text,type:h.TYPE_ITEM_NOTE}))}}}catch(e){b=!0,w=e}finally{try{_||null==O.return||O.return()}finally{if(b)throw w}}S.sendSignal("refresh_interface",!0)}else if("addItem"===e.action){var x;a=$.get(e.projectId),a||(a=$.getInbox());var R=null;if(e.dueDate){if(x=j.parse(e.dueDate),!x.due_date)return i.status="error",i.reason="INVALID_DATE",t(i),i;R=Y.fromDateist(x)}if(!e.content||0===e.content.length)return i.status="error",i.reason="CONTENT_IS_EMPTY",t(i),i;var V={content:e.content,due:R,project_id:a.id,priority:e.priority||1,responsible_uid:e.responsible_uid||null};if(e.dismissedLabels){var q={},z=!0,W=!1,K=void 0;try{for(var J,Q=e.dismissedLabels[Symbol.iterator]();!(z=(J=Q.next()).done);z=!0)n=J.value,q[n]=!0}catch(e){W=!0,K=e}finally{try{z||null==Q.return||Q.return()}finally{if(W)throw K}}V.labels_to_ignore=q}if(e.labels&&(V.labels=e.labels),r=N.add(V,{return_as_error:!0}),r.error)i.status="error",i.reason="LIMIT_REACHED";else{if(i.item=r,e.reminders){var X=!0,te=!1,re=void 0;try{for(var ne,oe=e.reminders[Symbol.iterator]();!(X=(ne=oe.next()).done);X=!0){var ae=ne.value;x=j.parse(ae),x.due_date&&F.add({item_id:r.id,type:"absolute",due:Y.fromDateist(x)})}}catch(e){te=!0,re=e}finally{try{X||null==oe.return||oe.return()}finally{if(te)throw re}}}e.note&&e.note.length>0&&d.default.dispatch((0,h.noteAdd)({parentId:r.id,content:e.note,type:h.TYPE_ITEM_NOTE})),S.sendSignal("instant_refresh_interface")}}else if("addLabel"===e.action)(n=L.add({name:e.name,color:e.color}))||(i.status="error",i.reason="NOT_ADDED");else if("addProject"===e.action){var ie={name:e.name,color:e.color,indent:e.indent||1};a=$.add(ie),a||(i.status="error",i.reason="NOT_ADDED")}else"shareProject"===e.action&&((a=B.addInvite(e.projectId,e.email))||(i.status="error",i.reason="NOT_SHARED"));return $isFunction(t)&&t(i),i},parseDate:function(e,t){var r=e.dueDate,n=j.parse(r);return n.due_date?(t.date_string=n.date_string,t.date_lang=n.date_lang,t.date=n.due_date.getTime()):(t.status="error",t.reason="INVALID_DATE"),t},formatDate:function(e,t){var r=e.date_string.split("-"),n=new Date(parseInt(r[0]),parseInt(r[1])-1,parseInt(r[2]));return t.date_string=j.format(n),t},handleDayResult:function(e){var t=new Date,r=new W,n=[],o=!0,a=!1,i=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,c={};$update(c,u),r.setupByContent(u.content),"outlook"===r.type?c.content="Outlook: ".concat(r.title):"thunderbird"===r.type?c.content="Thunderbird: ".concat(r.title):r.type&&(c.content="Gmail: ".concat(r.title)),c.is_recurring=c.due.is_recurring;var d=c.due.toDate();if(c.due_date=d,c.date_string=c.due.string,w.is_overdue(t,d)){var f=w.day_diff(new Date,d);c.diff_human=j.humanizeDayDiff(f,d)}c.indent=1,c.item_order=1,n.push(c),r.reset()}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n.sort(q.daySort),n}},function(e){if(window.WebViewJavascriptBridge)e(window.WebViewJavascriptBridge);else{var t=function(){e(window.WebViewJavascriptBridge)};document.addEventListener("WebViewJavascriptBridgeReady",t,!1)}}(function(e){e.init(function(){return null}),ee.bridge=e,D.connect(),A.connect(),e.registerHandler("nativeAppBridge",function(e,t){return ee.handleRequest(e,t)});(0,c.default)(d.default,f.countToday,f.countOverdue,function(t,r){e&&e.callHandler("jsAppBridge",{action:5,count:t+r},function(){return null})}),S.connect("data_fully_loaded",function(){e&&e.callHandler("jsAppBridge",{action:7},function(){return null})}),S.connect("mac_remind",function(t){if(e){var r={action:6};r.title=t.content,r.body="",r.type="reminder";var n=[{text:_("Complete"),action:"complete",id:t.id,put_in_focus:!1}];t.due&&n.push({text:_("Postpone"),action:"postpone",id:t.id,put_in_focus:!1}),r.actions=n,e.callHandler("jsAppBridge",r,function(){return null})}}),S.connect("mac_notify",function(t,r,n){if(e){var o={action:6};o.title=t,o.body=r||"",o.type="notification";var a=[];n&&a.push(n),o.actions=a,e.callHandler("jsAppBridge",o,function(){return null})}});var t=function(){if(e){var t={action:8};t.user=Z(),e.callHandler("jsAppBridge",t,function(){return null})}},r=function(){if(e){var t={action:9};t.color="#f6f6f6",e.callHandler("jsAppBridge",t,function(){return null})}},n=function(){if(e){var t={action:10},r=x.prefillProject(!1);r&&(t.projectId=r);var n=x.prefillLabel();n&&(t.content="@".concat(n," "));var o=R.getNonOverdue();if(o.length>0){var a=o[0],i=j.dateistResultFromDate(a);t.dueDate=i.date_string}e.callHandler("jsAppBridge",t,function(){return null})}};return(0,c.default)(d.default,X,function(){t(),r()}),S.connect("show_quick_add",function(){n()})})}},{"../components/agenda/AgendaCurrentDays":6,"../components/local_notifications/LocalNotifications":39,"../components/local_reminders/LocalReminders":40,"../components/misc/Misc.js":42,"../components/notes/Notes.js":46,"../components/postpone/Postpone":58,"../components/projects_list/ProjectListUtils":72,"../components/quick_add/SmartPrefilling":74,"../filterist":121,"../models/Collaborators":148,"../models/Colors":149,"../models/DateExt":152,"../models/ItemsModel":155,"../models/LabelsModel":156,"../models/ProjectsModel":159,"../models/Reminders":161,"../models/SyncEngine":169,"../models/UtilModels":173,"../plugin_version/ContentTransformers":641,"../reducers/counts":1090,"../reducers/detailView":1092,"../reducers/items":1100,"../reducers/notes":1114,"../reducers/settings":1129,"../reducers/user":1135,"../stores/store":1140,"../stores/subscribeSelected":1141,reselect:"reselect"}],116:[function(e,t,r){"use strict";function n(e){$isString(e)&&(e=$eval(e)),s.setCurrentEmail(e),s.trackIfNeeded()}function o(e){$isString(e)&&(e=$eval(e)),s.setCurrentEmail(e),i.sendSignal("PluginVersion.addToGenericController")}var a=window.LibEdit,i=window.Signals,l=e("../plugin_version/ContentTransformers").ContentTransformers,s={current_email_obj:null,addToTextArea:function(e){var t=s.current_email_obj;return!!t&&(l.type="outlook",l.link_id=t.id,l.title=t.subject,e.insertText?e.insertText(l.onContentSave(t.subject)):(l.annotateWithIcon(e),a.insertAtCursor(e,t.subject,!0)),!1)},setCurrentEmail:function(e){if(e){var t=s.current_email_obj={};$update(t,e)}else s.current_email_obj=null;i.sendSignal("PluginVersion.notifyExternalServices")},openEmail:function(e){try{return window.external.openmail(e),!1}catch(e){}return!0},tracked:!1,trackIfNeeded:function(){s.tracked||(s.tracked=!0)}};window.OutlookIntegration=s,window.setOutlookEmail=n,window.addOutlookEmail=o,t.exports=s},{"../plugin_version/ContentTransformers":641}],117:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("../utils/deps"),o=(0,n.defineDeps)("filterist",["ItemsModel","createProjectPickBySelector","projectGetChildren","createCollaboratorPickBySelector","isShared","store"]);r.default=o},{"../utils/deps":1154}],118:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.GrammarError=r.UnrecognizedSymbolError=r.ProgrammingError=void 0;var o=function e(t){n(this,e),this.messages=t,Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this)};r.ProgrammingError=o;var a=function e(t,r,o){n(this,e),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this),this.queryString=t,this.index=r,this.badSymbol=o,this.message="UnrecognizedSymbolError: "+o};r.UnrecognizedSymbolError=a;var i=function e(t){n(this,e),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this);var r=t.map(function(e){return"".concat(e.constructor.name,'("').concat(e.matchedStr,'")')}).join(" ");this.message="GrammarError (tokens: "+r+")"};r.GrammarError=i},{}],119:[function(e,t,r){(function(t){"use strict";function n(e){var n;return n=void 0!==r&&null!==r?t.todoist.filteri18n:window.todoist.filteri18n,e=e?e.toLowerCase():"en",n[e]?n[e]:(console.log('[warn] filterist.i18n cannot load pattern for lang "'+e+'". English is loaded instead.'),n.en)}Object.defineProperty(r,"__esModule",{value:!0}),r.load=n,e("./i18n/en")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./i18n/en":120}],120:[function(e,t,r){(function(e){"use strict";!function(){var t,n={ALL:[/^\s*:all:\s*/i,/^\s*all\s*/i],AND:[/^\s*&\s*/i],ASSIGNED:[/^\s*assigned\s*/i],ASSIGNED_BY:[/^\s*assigned by\s*:\s*([^()|&!,]+)\s*/i],ASSIGNED_TO:[/^\s*assigned to\s*:\s*([^()|&!,]+)\s*/i,/^\s*\+\s*([^()|&!,]+)\s*/i],CREATED:[/^\s*created\s*:\s*([^()|&!,]+)\s*/i,/^\s*added\s*:\s*([^()|&!,]+)\s*/i],CREATED_AFTER:[/^\s*created after\s*:\s*([^()|&!,]+)\s*/i,/^\s*added after\s*:\s*([^()|&!,]+)\s*/i],CREATED_BEFORE:[/^\s*created before\s*:\s*([^()|&!,]+)\s*/i,/^\s*added before\s*:\s*([^()|&!,]+)\s*/i],DUE:[/^\s*due\s*:\s*([^()|&!,]+)\s*/i],DUE_AFTER:[/^\s*due after\s*:\s*([^()|&!,]+)\s*/i],DUE_BEFORE:[/^\s*due before\s*:\s*([^()|&!,]+)\s*/i],DUE_RECURRING:[/^\s*recurring\s*/i],LABEL:[/^\s*label\s*:\s*([^\s()|&!,]+)\s*/i,/^\s*@\s*([^\s()|&!,]+)\s*/i],LEFT:[/^\s*\(\s*/i],NOT:[/^\s*!\s*/i],NO_DUE_DATE:[/^\s*no due date\s*/i,/^\s*no date\s*/i],NO_LABELS:[/^\s*no labels\s*/i,/^\s*no label\s*/i],NO_PRIORITY:[/^\s*no priority\s*/i],OR:[/^\s*\|\s*/i],OVERDUE:[/^\s*over due\s*/i,/^\s*overdue\s*/i,/^\s*od\s*/i],PRIORITY:[/^\s*priority\s*:\s*([1-4])\s*\s*/i,/^\s*priority\s*([1-4])\s*\s*/i,/^\s*p\s*([1-4])\s*\s*/i],PROJECT:[/^\s*p\s*:\s*([^()|&!,]+)\s*/i,/^\s*##\s*([^()|&!,]+)\s*/i],PROJECT_SINGLE:[/^\s*project\s*:\s*([^()|&!,]+)\s*/i,/^\s*#\s*([^()|&!,]+)\s*/i],RIGHT:[/^\s*\)\s*/i],SEARCH:[/^\s*search\s*:\s*([^()|&!,]+)\s*/i,/^\s*q\s*:\s*([^()|&!,]+)\s*/i],SHARED:[/^\s*shared\s*/i],TO_ME:[/^\s*:to me:\s*/i,/^\s*:to_me:\s*/i,/^\s*to me\s*/i],TO_OTHERS:[/^\s*:to others:\s*/i,/^\s*:to_others:\s*/i,/^\s*to others\s*/i],VIEW_ALL:[/^\s*view all\s*/i],WITHIN_DAYS:[/^\s*within\s*(-?[1-9]+\d*)\s*days\s*/i,/^\s*next\s*(-?[1-9]+\d*)\s*days\s*/i,/^\s*\s*(-?[1-9]+\d*)\s*days\s*/i]},o={ALL:[":all:","all"],ASSIGNED:["assigned"],ASSIGNED_BY:["assigned by:$COLLABORATOR"],ASSIGNED_TO:["assigned to:$COLLABORATOR","+$COLLABORATOR"],CREATED:["created:$DATE","added:$DATE"],CREATED_AFTER:["created after:$DATE","added after:$DATE"],CREATED_BEFORE:["created before:$DATE","added before:$DATE"],DUE:["due:$DATE"],DUE_AFTER:["due after:$DATE"],DUE_BEFORE:["due before:$DATE"],DUE_RECURRING:["recurring"],LABEL:["label:$LABEL_NAME","@$LABEL_NAME"],NO_DUE_DATE:["no due date","no date"],NO_LABELS:["no labels","no label"],NO_PRIORITY:["no priority"],OVERDUE:["over due","overdue","od"],PRIORITY:["priority $PRIORITY_LEVEL","priority:$PRIORITY_LEVEL","p$PRIORITY_LEVEL"],PROJECT:["##$PROJECT_NAME","p:$PROJECT_NAME"],PROJECT_SINGLE:["project:$PROJECT_NAME","#$PROJECT_NAME"],SEARCH:["search:$SEARCH_STR","q:$SEARCH_STR"],SHARED:["shared"],TO_ME:[":to me:",":to_me:","to me"],TO_OTHERS:[":to others:",":to_others:","to others"],VIEW_ALL:["view all"],WITHIN_DAYS:["within $DAYS_NUM days","next $DAYS_NUM days","$DAYS_NUM days"]},a={WITHIN_DAYS:"Due within $DAYS_NUM days",ASSIGNED:"Assigned",SEARCH:"Search for $SEARCH_STR",NO_PRIORITY:"No priority",SHARED:"Shared",CREATED:"Added on $DATE",ASSIGNED_TO:"Assigned to $NAME",DUE:"Due on $DATE",DUE_BEFORE:"Due before $DATE",PRIORITY:"Priority $PRIORITY_LEVEL",NO_DUE_DATE:"No due date",VIEW_ALL:"All tasks",NO_LABELS:"No labels",CREATED_AFTER:"Added after $DATE",DUE_RECURRING:"Recurring",ASSIGNED_BY:"Assigned by $NAME",DUE_AFTER:"Due after $DATE",TO_OTHERS:"Assigned to others",CREATED_BEFORE:"Added before $DATE",TO_ME:"Assigned to me",OVERDUE:"Overdue"},i={ME:["me"],OTHERS:["others","other"]};t=void 0!==r&&null!==r?e:window,void 0===t.todoist&&(t.todoist={}),void 0===t.todoist.filteri18n&&(t.todoist.filteri18n={}),t.todoist.filteri18n.en={query:o,queryRex:n,resultTitle:a,specialCollaboratorVal:i}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],121:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return u(e)||s(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function u(e){if(Array.isArray(e))return e}function c(e,t){for(var r=window.LANG?window.LANG:"en",n=j(t),o=w.default.itemGetUncompleted(t),l=e.split(","),s=[],u=0;u<l.length;u++){var c=function(a){var u=void 0,c=void 0;try{var d=P(l[a],n),f=i(d,2);u=f[0],c=f[1]}catch(t){if(!(t instanceof b.UnrecognizedSymbolError))throw t;var p=l.map(function(e){return e.length}).slice(0,a).reduce(function(e,t){return e+t},t.index);throw new b.UnrecognizedSymbolError(e,p,t.badSymbol)}if(1===u.length&&u[0]instanceof v.Search)return{v:[g.createSearchSection(u[0],r)]};var m=o.filter(function(e){return!e.in_history&&!e.checked&&c.eval(e,t)}),h=g.create(u,c,m,r);s=s.concat(h)}(u);if("object"===a(c))return c.v}return s}function d(e){var t=c("overdue & !assigned to: other, today & !assigned to: other",e),r=i(t,2),n=r[0];return[r[1].items,n.items]}function f(e){var t=new Date(e.getTime());return t.setHours(23),t.setMinutes(59),t.setSeconds(59),t.setMilliseconds(999),w.default.ItemsModel.getAllOwn().filter(function(e){return!!e.due&&((0,h.hasTime)(t)?!e.due.with_time&&(0,h.hasSameDateAndTime)(e.due,t):(0,h.isOnSameDate)(e.due,t))})}function p(e){var t=w.default.store.getState(),r=j(t),n=e.split(",");try{for(var o=0;o<n.length;o++)S(n[o],r)}catch(e){return!1}return!0}Object.defineProperty(r,"__esModule",{value:!0}),r.filter=c,r.getOverdueAndToday=d,r.getByDate=f,r.isValidQuery=p,r.default=r.createFilterFunc=r.getFilteristConfig=void 0;var m=e("reselect"),h=e("../utils"),_=e("./lexer"),y=o(e("./parser")),v=e("./token"),g=o(e("./section")),b=e("./errors"),w=n(e("./Deps")),E=n(e("../logger/Logger")),j=(0,m.createSelector)(function(e){return e.user},function(e){var t=e||{},r=t.date_format,n=t.time_format;return{lang:window.LANG,isUSDate:r,isAMPM:n}});r.getFilteristConfig=j;var O=(0,h.memoize)(function(e,t,r,n){return new _.Lexer({lang:e,isUSDate:t,isAMPM:r,now:n})}),S=function(e,t){var r=t.lang,n=t.isUSDate,o=t.isAMPM,a=t.now;if(void 0===r||void 0===n||void 0===o)throw new Error("Required configuration missing");var i=O(r,n,o,a),l=i.tokenize(e),s=l.filter(function(e){return e instanceof v.UnrecognizedSymbol});if(s.length>0){var u=s[0];throw new b.UnrecognizedSymbolError(e,u.index,u.matchedStr)}return[l,y.buildQueryTree(l)]},P=(0,h.LMemoize)(S,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.lang,n=t.isUSDate,o=t.isAMPM;return"".concat(r,"-").concat(n,"-").concat(o,"-").concat(e)});P.cache=new h.LRU(100);var I=function(e,t){try{var r=e.split(","),n=r.map(function(e){var r=P(e,t),n=i(r,2),o=n[1];return function(e,t){return o.eval(e,t)}});return function(t,r){try{var o=!0,a=!1,i=void 0;try{for(var l,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){if((0,l.value)(t,r))return!0}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return!1}catch(r){return E.default.captureError(r,{tags:{where:"_createFilterFunc"},extra:{item:t,query:e}}),!1}}}catch(e){if(e instanceof b.UnrecognizedSymbolError||e instanceof b.GrammarError)return function(){return!1};throw e}},k=(0,h.LMemoize)(I,function(e,t){var r=t.lang,n=t.isUSDate,o=t.isAMPM,a=t.now;return a?"".concat(r,"-").concat(n,"-").concat(o,"-").concat(e,"-").concat(a.getTime()):"".concat(r,"-").concat(n,"-").concat(o,"-").concat(e)});r.createFilterFunc=k,k.cache=new h.LRU(100);var T={createFilterFunc:k,getFilteristConfig:j,filter:c,isValidQuery:p,getOverdueAndToday:d,getByDate:f};r.default=T},{"../logger/Logger":129,"../utils":1176,"./Deps":117,"./errors":118,"./lexer":122,"./parser":123,"./section":124,"./token":125,reselect:"reselect"}],122:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.DateistMatcher=r.Lexer=r.RexMatcher=void 0;var p=n(e("./token")),m=n(e("./i18n")),h=e("./errors"),_=[!1,null,null],y=function(){function e(t,r){c(this,e),this.rex=t,this.tokenFn=r}return f(e,[{key:"match",value:function(e,t){var r=e.substring(t),n=this.rex.exec(r);if(null===n)return _;if(0!==n.index)throw new h.ProgrammingError("Programming Error: matcher should only match the beginning of string. (Rex: ".concat(this.rex,")"));return t+=n[0].length,[!0,this.tokenFn(n),t]}}]),e}();r.RexMatcher=y;var v=function(){function e(t,r,n,o){c(this,e),this.rex=t,this.tokenCls=o,this.dateistLangs=r,this.dateistOpt=n}return f(e,[{key:"match",value:function(e,t){var r=e.substring(t),n=this.rex.exec(r);if(null===n)return _;if(0!==n.index)throw new h.ProgrammingError("Programming Error: matcher should only match the beginning of string. (Rex: ".concat(this.rex,")"));var o,a,i=n[1];try{var l=Dateist.parse_multiple(i,this.dateistLangs,this.dateistOpt);l.due_date&&!l.is_recurring&&(o=l.due_date,a=l.date_lang)}catch(e){}return o?(t+=n[0].length,i=i.trim(),[!0,new this.tokenCls(i,a,this.dateistOpt),t]):_}}]),e}(),g=function(){function e(t){c(this,e),this.opt=t||{},this.opt=s({isUSDate:1,isAMPM:0},this.opt),this.initMatchers()}return f(e,[{key:"tokenize",value:function(e){for(var t=[],r=0;r<e.length;){var n=this.nextToken(e,r),a=o(n,2),i=a[0],l=a[1];t.push(i),r=l}return t}},{key:"nextToken",value:function(e,t){var r=!0,n=!1,a=void 0;try{for(var i,l=this.matchers[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=i.value,u=s.match(e,t),c=o(u,3),d=c[0],f=c[1],m=c[2];if(d)return f.index=t,
f.matchedStr=e.substring(t,m),[f,m]}}catch(e){n=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw a}}var h=t;t+=1;e:for(;t<e.length;){var _=!0,y=!1,v=void 0;try{for(var g,b=this.matchers[Symbol.iterator]();!(_=(g=b.next()).done);_=!0){var w=g.value,E=w.match(e,t),j=o(E,1),d=j[0];if(d)break e}}catch(e){y=!0,v=e}finally{try{_||null==b.return||b.return()}finally{if(y)throw v}}t+=1}var O=e.substring(h,t),S=new p.UnrecognizedSymbol(O);return S.index=h,S.matchedStr=O,[S,t]}},{key:"initMatchers",value:function(){var e,t=m.load(this.opt.lang).queryRex;e=window.DATEIST_LANG?"en"==window.DATEIST_LANG?["en"]:[window.DATEIST_LANG,"en"]:"all_lang"===this.opt.lang?b:this.opt.lang?[this.opt.lang.slice(0,2),"en"]:["en"];var r={us_dates:this.opt.isUSDate,am_pm:this.opt.isAMPM,now_date:this.opt.now},n=m.load(this.opt.lang).specialCollaboratorVal,o=this;this.matchers=[].concat(t.LEFT.map(function(e){return new y(e,function(){return new p.Left})}),t.RIGHT.map(function(e){return new y(e,function(){return new p.Right})}),t.AND.map(function(e){return new y(e,function(){return new p.And})}),t.OR.map(function(e){return new y(e,function(){return new p.Or})}),t.NOT.map(function(e){return new y(e,function(){return new p.Not})}),t.VIEW_ALL.map(function(e){return new y(e,function(){return new p.ViewAll})}),t.NO_PRIORITY.map(function(e){return new y(e,function(){return new p.NoPriority})}),t.ALL.map(function(e){return new y(e,function(){return new p.All})}),t.TO_OTHERS.map(function(e){return new y(e,function(){return new p.ToOthers})}),t.TO_ME.map(function(e){return new y(e,function(){return new p.ToMe})}),t.NO_DUE_DATE.map(function(e){return new y(e,function(){return new p.NoDueDate})}),t.NO_LABELS.map(function(e){return new y(e,function(){return new p.NoLabels})}),t.ASSIGNED.map(function(e){return new y(e,function(){return new p.Assigned})}),t.SHARED.map(function(e){return new y(e,function(){return new p.Shared})}),t.DUE_RECURRING.map(function(e){return new y(e,function(){return new p.DueRecurring})}),t.LABEL.map(function(e){return new y(e,function(e){return new p.Label(e[1])})}),t.OVERDUE.map(function(e){return new y(e,function(){return o.opt.now?new p.Overdue(o.opt.now):new p.Overdue})}),t.PROJECT.map(function(e){return new y(e,function(e){var t=e[1].trim();return new p.Project(t)})}),t.PROJECT_SINGLE.map(function(e){return new y(e,function(e){var t=e[1].trim();return new p.ProjectSingle(t)})}),t.SEARCH.map(function(e){return new y(e,function(e){var t=e[1].trim();return new p.Search(t)})}),t.PRIORITY.map(function(e){return new y(e,function(e){var t=parseInt(e[1],10);return new p.Priority(t)})}),t.WITHIN_DAYS.map(function(e){return new y(e,function(e){var t=parseInt(e[1],10);return o.opt.now?new p.WithinDays(t,o.opt.now):new p.WithinDays(t)})}),t.ASSIGNED_TO.map(function(e){return new y(e,function(e){var t=e[1].trim().toLowerCase();return-1!=n.ME.indexOf(t)?new p.AssignedTo(p.COLLABORATOR_ME):-1!=n.OTHERS.indexOf(t)?new p.AssignedTo(p.COLLABORATOR_OTHERS):new p.AssignedTo(t)})}),t.ASSIGNED_BY.map(function(e){return new y(e,function(e){var t=e[1].trim().toLowerCase();return-1!=n.ME.indexOf(t)?new p.AssignedBy(p.COLLABORATOR_ME):-1!=n.OTHERS.indexOf(t)?new p.AssignedBy(p.COLLABORATOR_OTHERS):new p.AssignedBy(t)})}),t.CREATED.map(function(t){return new v(t,e,r,p.Created)}),t.CREATED_BEFORE.map(function(t){return new v(t,e,r,p.CreatedBefore)}),t.CREATED_AFTER.map(function(t){return new v(t,e,r,p.CreatedAfter)}),t.DUE.map(function(t){return new v(t,e,r,p.Due)}),t.DUE_BEFORE.map(function(t){return new v(t,e,r,p.DueBefore)}),t.DUE_AFTER.map(function(t){return new v(t,e,r,p.DueAfter)})),this.matchers.push(new w(e,r)),this.sortMatchers()}},{key:"sortMatchers",value:function(){this.matchers.sort(function(e,t){return e instanceof w?1:t instanceof w?-1:t.rex.source.length-e.rex.source.length||t.rex.source-e.rex.source})}}]),e}();r.Lexer=g;var b=["en","da","pl","zh","ko","ja","de","pt","it","es","nl","ru","sv","fr"],w=function(){function e(t,r){c(this,e),this.dateistLangs=t,this.dateistOpt=r}return f(e,[{key:"match",value:function(e,t){for(var r,n,o,a=e.substring(t),i=1;i<=a.length&&i<30&&-1===[",",")","|","&"].indexOf(a[i-1]);i++){var l=a.slice(0,i);try{var s=Dateist.parse_multiple(l,this.dateistLangs,this.dateistOpt);s.due_date&&!s.is_recurring&&(r=s,n=l,o=i)}catch(e){}}return r?(t+=o,n=n.trim(),[!0,new p.Due(n,r.date_lang,this.dateistOpt),t]):_}}]),e}();r.DateistMatcher=w},{"./errors":118,"./i18n":119,"./token":125}],123:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e){return new c(e).buildQueryTree()}Object.defineProperty(r,"__esModule",{value:!0}),r.buildQueryTree=i,r.Parser=r.CURSOR_END=r.QueryTree=void 0;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./token")),s=e("./errors"),u=function(){function e(t){n(this,e),this.token=t}return a(e,[{key:"setLeft",value:function(e){if(this.token.type!==l.TOKEN_TYPE_BINARY_OPERATOR&&this.token.type!==l.TOKEN_TYPE_UNARY_OPEATOR)throw new s.ProgrammingError("Cannot attach children for token (type: ".concat(this.token.type,")"));this.left=e,this.left.parent=this}},{key:"setRight",value:function(e){if(this.token.type!==l.TOKEN_TYPE_BINARY_OPERATOR)throw new s.ProgrammingError("Cannot attach children for token (type: ".concat(this.token.type,")"));this.right=e,this.right.parent=this}},{key:"hasChild",value:function(){return"left"in this||"right"in this}},{key:"isLeaf",value:function(){return!this.hasChild()}},{key:"toString",value:function(){return this.hasChild()?this.right?"(".concat(this.left," ").concat(this.token," ").concat(this.right,")"):"".concat(this.token.toString(),"(").concat(this.left.toString(),")"):this.token.toString()}},{key:"eval",value:function(e,t){if(!this.hasChild())return this.token.eval(e,t);if(this.token instanceof l.And)return this.left.eval(e,t)&&this.right.eval(e,t);if(this.token instanceof l.Or)return this.right.eval(e,t)||this.left.eval(e,t);if(this.token instanceof l.Not)return!this.left.eval(e,t);throw new s.ProgrammingError("Unrecognized operand token type")}},{key:"traverseUp",value:function(e){this.parent&&(e(this.parent),this.parent.traverseUp(e))}},{key:"traverseLeafs",value:function(e){if(this.isLeaf())return void e(this);this.left&&this.left.traverseLeafs(e),this.right&&this.right.traverseLeafs(e)}},{key:"leafNodes",value:function(){var e=[];return this.traverseLeafs(function(t){return e.push(t)}),e}},{key:"parentNodes",value:function(){var e=[];return this.traverseUp(function(t){return e.push(t)}),e}},{key:"find",value:function(e){var t=[];return e(this)&&t.push(this),this.left&&(t=t.concat(this.left.find(e))),this.right&&(t=t.concat(this.right.find(e))),t}},{key:"exist",value:function(e){return this.find(e).length>0}},{key:"clone",value:function(){var t=new e(this.token);if(this.isLeaf())return t;if(this.left){var r=this.left.clone();t.setLeft(r)}if(this.right){var n=this.right.clone();t.setRight(n)}return t}}]),e}();r.QueryTree=u;r.CURSOR_END=null;var c=function(){function e(t){n(this,e),this.tokens=t,this.cursor=0,this.root=null}return a(e,[{key:"next",value:function(){if(this.cursor>=this.tokens.length)return null;var e=this.tokens[this.cursor];return this.cursor=this.cursor+1,e}},{key:"peak",value:function(){return this.cursor>=this.tokens.length?null:this.tokens[this.cursor]}},{key:"buildQueryTree",value:function(){var e=this.expr();if(null!==this.next())throw new s.GrammarError(this.tokens);return e}},{key:"expr",value:function(){return this.expr4()}},{key:"expr4",value:function(){var e=this.expr3(),t=this.peak();if(t instanceof l.Or){t=this.next();var r=new u(t);return r.setLeft(e),r.setRight(this.expr4()),r}return e}},{key:"expr3",value:function(){var e=this.expr2(),t=this.peak();if(t instanceof l.And){t=this.next();var r=new u(t);return r.setLeft(e),r.setRight(this.expr3()),r}return e}},{key:"expr2",value:function(){if(this.peak()instanceof l.Not){var e=this.next(),t=new u(e);return t.setLeft(this.expr2()),t}return this.expr1()}},{key:"expr1",value:function(){var e=this.next();if(null===e)throw new s.GrammarError(this.tokens);if(e.type===l.TOKEN_TYPE_OPERAND)return new u(e);if(e instanceof l.Left){var t=this.expr();if(!((e=this.next())instanceof l.Right))throw new s.GrammarError(this.tokens);return t}throw new s.GrammarError(this.tokens)}}]),e}();r.Parser=c},{"./errors":118,"./token":125}],124:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}function c(e,t){return[e.filter(t),e.filter(function(e){return!t(e)})]}function d(e,t,r,n){var a=m(e,r,t),i=o(a,2),l=i[0],s=i[1];if(l)return s;var u=b.load(n).resultTitle,c=y(u,e);if(_(t)){var d=e.filter(function(e){return e instanceof g.Search})[0],f=new I(r,O,{name:c});return f.query=d.searchStr,[f]}return[new I(r,j,{name:c})]}function f(e,t){var r=b.load(t).resultTitle,n=y(r,[e]),o=new I([],O,{name:n});return o.query=e.searchStr,o}function p(e,t){return t.find(function(t){return t.token==e})[0].parentNodes().filter(function(e){return e.token instanceof g.Not}).length%2==1}function m(e,t,r){e=e.filter(function(e){return r.exist(function(t){return t.token==e})});var n=h(e),a=e.filter(function(e){return e instanceof g.Overdue&&!p(e,r)}),i=e.filter(function(e){return e instanceof g.WithinDays&&Math.abs(e.days)<=7&&!p(e,r)}),l=e.filter(function(e){return e instanceof g.WithinDays&&Math.abs(e.days)>7&&!p(e,r)}),s=e.filter(function(e){return e instanceof g.Due&&!p(e,r)});if(0===a.length&&0===i.length&&0===l.length&&0===s.length)return[!1,null];i.length>0?(i.sort(function(e,t){return t.days-e.days}),i=i[0]):i=null;var d=t.slice(),f=[];if(a.length>0){var m,_=c(d,function(e){return a[0].eval(e)}),y=o(_,2);m=y[0],d=y[1],f.push(new I(m,E,{orderable:n}))}if(s.length>0||i){var b=s.map(function(e){return new I([],P,{day_date:e.dueDate,orderable:n})});if(i){var w=(0,v.range)(i.days).sort().map(function(e){var t=new Date;return t.setDate(t.getDate()+e),t}),j=!0,O=!1,k=void 0;try{for(var T,C=w[Symbol.iterator]();!(j=(T=C.next()).done);j=!0){var D=T.value;b.push(new I([],P,{day_date:D,orderable:n}))}}catch(e){O=!0,k=e}finally{try{j||null==C.return||C.return()}finally{if(O)throw k}}}for(var A=[],M=0;M<b.length;M++)!function(e){var t=b[e];0===A.filter(function(e){return u(e.day_date,t.day_date)}).length&&A.push(t)}(M);A.sort(function(e,t){return e.day_date-t.day_date});for(var x=0,R=A;x<R.length;x++)!function(){var e=R[x],t=void 0,r=c(d,function(t){return t.due&&u(t.due,e.day_date)}),n=o(r,2);t=n[0],d=n[1],e.items=t}();f=f.concat(A)}if(l.length>0){var N=new I([],S,{orderable:n}),L=!0,$=!1,U=void 0;try{for(var B,V=l[Symbol.iterator]();!(L=(B=V.next()).done);L=!0)!function(){var e=B.value,t=void 0,r=c(d,function(t){return e.eval(t)}),n=o(r,2);t=n[0],d=n[1],N.items=N.items.concat(t)}()}catch(e){$=!0,U=e}finally{try{L||null==V.return||V.return()}finally{if($)throw U}}N.items.length>0&&(f=f.concat(N))}return d.length>0?[!1,null]:[!0,f]}function h(e){return 1===e.length&&(e[0]instanceof g.WithinDays||e[0]instanceof g.Due)||4===e.length&&((e[0]instanceof g.Due||e[0]instanceof g.Overdue||e[0]instanceof g.WithinDays)&&e[1]instanceof g.And&&e[2]instanceof g.Not&&e[3]instanceof g.AssignedTo)}function _(e){return e.isLeaf()&&e.token instanceof g.Search}function y(e,t){function r(t){return t instanceof g.Search?e.SEARCH.replace("$SEARCH_STR",'"'.concat(t.searchStr,'"')):t instanceof g.WithinDays?e.WITHIN_DAYS.replace("$DAYS_NUM",t.days):t instanceof g.Priority?e.PRIORITY.replace("$PRIORITY_LEVEL",t.level):t instanceof g.NoDueDate?e.NO_DUE_DATE:t instanceof g.ViewAll?e.VIEW_ALL:t instanceof g.NoLabels?e.NO_LABELS:t instanceof g.ToOthers?e.TO_OTHERS:t instanceof g.ToMe?e.TO_ME:t instanceof g.Overdue?e.OVERDUE:t instanceof g.Or|t instanceof g.And?" ".concat(t.matchedStr," "):t.matchedStr}var n=t.map(r).join("");return n.length<50?n:(n=t.map(function(e){return e.matchedStr}).join(""),n.length>50&&(n=n.slice(0,50)+" ..."),n)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=d,r.createSearchSection=f,r.Section=r.VIEW_TYPE_DAY_VIEW_FIXED=r.VIEW_TYPE_DAY_VIEW_SPAN=r.VIEW_TYPE_SEARCH=r.VIEW_TYPE_FLAT=r.VIEW_TYPE_OVERDUE=r.VIEW_TYPE_VIEW_ALL=void 0;var v=e("../utils"),g=n(e("./token")),b=n(e("./i18n")),w=e("./errors");r.VIEW_TYPE_VIEW_ALL="view_all";var E="overdue";r.VIEW_TYPE_OVERDUE=E;var j="flat_view";r.VIEW_TYPE_FLAT=j;var O="search";r.VIEW_TYPE_SEARCH=O;var S="day_view_span";r.VIEW_TYPE_DAY_VIEW_SPAN=S;var P="day_view_fixed";r.VIEW_TYPE_DAY_VIEW_FIXED=P;var I=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(s(this,e),r===P&&!n.day_date)throw new w.ProgrammingError("Fix day view required date");this.items=t,this.view=r,this.name=n.name,this.day_date=n.day_date,this.orderable=n.orderable};r.Section=I},{"../utils":1176,"./errors":118,"./i18n":119,"./token":125}],125:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.UnrecognizedSymbol=r.Shared=r.Assigned=r.AssignedBy=r.AssignedTo=r.Search=r.All=r.ViewAll=r.ToOthers=r.ToMe=r.WithinDays=r.Overdue=r.CreatedAfter=r.CreatedBefore=r.Created=r.DueRecurring=r.DueAfter=r.DueBefore=r.Due=r.NoDueDate=r.ProjectSingle=r.Project=r.NoLabels=r.Label=r.NoPriority=r.Priority=r.Or=r.And=r.Right=r.Left=r.Not=r.DateToken=r.Token=r.createCollaboratorQuerySelector=r.createQueryValueMatcher=r.COLLABORATOR_OTHERS=r.COLLABORATOR_ME=r.TOKEN_TYPE_PARATHESIS=r.TOKEN_TYPE_OPERAND=r.TOKEN_TYPE_UNARY_OPEATOR=r.TOKEN_TYPE_BINARY_OPERATOR=void 0;var g=e("../utils"),b=e("../utils/fp"),w=n(e("./errors")),E=e("reselect"),j=e("redux"),O=n(e("./Deps")),S=0;r.TOKEN_TYPE_BINARY_OPERATOR=S;var P=1;r.TOKEN_TYPE_UNARY_OPEATOR=P;var I=2;r.TOKEN_TYPE_OPERAND=I;var k=3;r.TOKEN_TYPE_PARATHESIS=k;r.COLLABORATOR_ME="COLLABORATOR_ME";r.COLLABORATOR_OTHERS="COLLABORATOR_OTHERS";var T=function(e){var t=e;return t=(0,g.normalizeMatchStr)(t),t=t.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&"),t=t.replace(/\*/g,".*"),t="^".concat(t,"$"),t=RegExp(t),function(e){return e=(0,g.normalizeMatchStr)(e),t.test(e)}};r.createQueryValueMatcher=T;var C=function(e){switch(e){case"COLLABORATOR_ME":return(0,E.createSelector)(function(e){return e.user},function(e){return function(t){return t&&t===e.id}});case"COLLABORATOR_OTHERS":return(0,E.createSelector)(function(e){return e.user},function(e){return function(t){return t&&t!==e.id}});default:var t=T(e),r=O.default.createCollaboratorPickBySelector(function(e){return t(e.full_name)||t(e.email)});return(0,E.createSelector)(r,function(e){return function(t){return Boolean(e[t])}})}};r.createCollaboratorQuerySelector=C;var D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;_(this,e),this.type=t,this.matchedStr=r,this.index=n}return v(e,[{key:"toString",value:function(){return"".concat(this.constructor.name)}},{key:"eval",value:function(e,t){throw new w.default("".concat(this.class," did not implement eval"))}}]),e}();r.Token=D;var A=function(e){function t(e,r,n){var o;return _(this,t),o=d(this,p(t).call(this,I)),o.dateStr=e,o.dateLang=r,o.dateistOpt=n,o.parse=(0,g.createMemoizedDateParser)(),o}return m(t,e),v(t,[{key:"getDate",value:function(){return this.parse(this.dateStr,this.dateLang,this.dateistOpt)}}]),t}(D);r.DateToken=A;var M=function(e){function t(){return _(this,t),d(this,p(t).call(this,P))}return m(t,e),v(t,[{key:"operatorEval",value:function(e){return!e}}]),t}(D);r.Not=M;var x=function(e){function t(){return _(this,t),d(this,p(t).call(this,k))}return m(t,e),t}(D);r.Left=x;var R=function(e){function t(){return _(this,t),d(this,p(t).call(this,k))}return m(t,e),t}(D);r.Right=R;var N=function(e){function t(){return _(this,t),d(this,p(t).call(this,S))}return m(t,e),v(t,[{key:"operatorEval",value:function(e,t){return e&&t}}]),t}(D);r.And=N;var L=function(e){function t(){return _(this,t),d(this,p(t).call(this,S))}return m(t,e),v(t,[{key:"operatorEval",value:function(e,t){return e||t}}]),t}(D);r.Or=L;var $=function(e){function t(e){var r;return _(this,t),r=d(this,p(t).call(this,I)),r.level=e,r}return m(t,e),v(t,[{key:"toString",value:function(){return"Priority(".concat(this.level,")")}},{key:"eval",value:function(e){return 5-e.priority===this.level}}]),t}(D);r.Priority=$;var U=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"No Priority"}},{key:"eval",value:function(e){return-1*e.priority+5==4}}]),t}(D);r.NoPriority=U;var B=function(e){function t(e){var r;return _(this,t),r=d(this,p(t).call(this,I)),r.name=e,r.matchQuery=T(e),r}return m(t,e),v(t,[{key:"toString",value:function(){return"Label(".concat(this.name,")")}},{key:"eval",value:function(e){return!!e.labels&&e.labels.some(this.matchQuery)}}]),t}(D);r.Label=B;var V=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"NoLabels(".concat(this.name,")")}},{key:"eval",value:function(e){return!e.labels||0===e.labels.length}}]),t}(D);r.NoLabels=V;var F=function(e){function t(e){var r;_(this,t),r=d(this,p(t).call(this,I)),r.name=e;var n=T(e),o=O.default.createProjectPickBySelector(function(e){return n(e.name)});return r.isMatch=(0,E.createSelector)(function(e){return e.projects},function(e){var t=o({projects:e}),r=(0,j.compose)(b.byID,g.flatten,(0,b.map)(function(t){return O.default.projectGetChildren(t.id,{projects:e})}),b.values)(t),n=u({},t,r);return function(e){return Boolean(n[e])}}),r}return m(t,e),v(t,[{key:"toString",value:function(){return"Project(".concat(this.name,")")}},{key:"eval",value:function(e,t){return this.isMatch(t)(e.project_id)}}]),t}(D);r.Project=F;var H=function(e){function t(e){var r;_(this,t),r=d(this,p(t).call(this,I)),r.name=e;var n=T(e),o=O.default.createProjectPickBySelector(function(e){return n(e.name)});return r.isMatch=(0,E.createSelector)(o,function(e){return function(t){return Boolean(e[t])}}),r}return m(t,e),v(t,[{key:"toString",value:function(){return"ProjectSingle(".concat(this.name,")")}},{key:"eval",value:function(e,t){return this.isMatch(t)(e.project_id)}}]),t}(D);r.ProjectSingle=H;var q=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"NoDueDate"}},{key:"eval",value:function(e){return!e.due}}]),t}(D);r.NoDueDate=q;var G=function(e){function t(){return _(this,t),d(this,p(t).apply(this,arguments))}return m(t,e),v(t,[{key:"toString",value:function(){return"Due(".concat(this.dateStr,")")}},{key:"eval",value:function(e){return!!this.dueDate&&(!!e.due&&((0,g.hasTime)(this.dueDate)?!!e.due.with_time&&(0,g.hasSameDateAndTime)(e.due,this.dueDate):(0,g.isOnSameDate)(e.due,this.dueDate)))}},{key:"dueDate",get:function(){return this.getDate()}}]),t}(A);r.Due=G;var z=function(e){function t(){return _(this,t),d(this,p(t).apply(this,arguments))}return m(t,e),v(t,[{key:"toString",value:function(){return"DueBefore"}},{key:"eval",value:function(e){var t=this.getDate();return!!t&&(!!e.due&&((0,g.hasTime)(t)?e.due.isLessThan(t):e.due.isLessThan((0,g.dayMin)(t))))}}]),t}(A);r.DueBefore=z;var W=function(e){function t(){return _(this,t),d(this,p(t).apply(this,arguments))}return m(t,e),v(t,[{key:"toString",value:function(){return"DueAfter"}},{key:"eval",value:function(e){var t=this.getDate();return!!t&&(!!e.due&&((0,g.hasTime)(t)?e.due.isGreaterThan(t):e.due.isGreaterThan((0,g.dayMax)(t))))}}]),t}(A);r.DueAfter=W;var Y=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"DueRecurring"}},{key:"eval",value:function(e){return e.due&&e.due.is_recurring}}]),t}(D);r.DueRecurring=Y;var K=function(e){function t(){return _(this,t),d(this,p(t).apply(this,arguments))}return m(t,e),v(t,[{key:"toString",value:function(){return"Created"}},{key:"eval",value:function(e){var t=this.getDate();return!!t&&((0,g.hasTime)(t)?(0,g.hasSameDateAndTime)(e.date_added,t):(0,g.isOnSameDate)(e.date_added,t))}}]),t}(A);r.Created=K;var J=function(e){function t(){return _(this,t),d(this,p(t).apply(this,arguments))}return m(t,e),v(t,[{key:"toString",value:function(){return"CreatedBefore"}},{key:"eval",value:function(e){var t=this.getDate();return!!t&&((0,g.hasTime)(t)?e.date_added<t:e.date_added<(0,g.dayMin)(t))}}]),t}(A);r.CreatedBefore=J;var Q=function(e){function t(){return _(this,t),d(this,p(t).apply(this,arguments))}return m(t,e),v(t,[{key:"toString",value:function(){return"CreatedAfter"}},{key:"eval",value:function(e){var t=this.getDate();return!!t&&((0,g.hasTime)(t)?e.date_added>t:e.date_added>(0,g.dayMax)(t))}}]),t}(A);r.CreatedAfter=Q;var X=function(e){function t(e){var r;return _(this,t),r=d(this,p(t).call(this,I)),r.now=e,r}return m(t,e),v(t,[{key:"toString",value:function(){return"Overdue"}},{key:"eval",value:function(e){var t=this.now||new Date;return e.due&&!(0,g.isOnSameDate)(t,e.due)&&e.due.getTime()<t.getTime()}}]),t}(D);r.Overdue=X;var Z=function(e){function t(e,r){var n;return _(this,t),n=d(this,p(t).call(this,I)),c(f(n),"_getInterval",(0,g.memoize)(function(e,t){var r=n.now||new Date,o=new Date(r.getTime()),a=new Date(r.getTime());return n.days>0?a.setDate(r.getDate()+n.days-1):o.setDate(r.getDate()+n.days+1),o=(0,g.dayMin)(o),a=(0,g.dayMax)(a),[o,a]})),n.days=e,n.now=r,n}return m(t,e),v(t,[{key:"getInterval",value:function(){var e=this.now||new Date;return this._getInterval(e.getMonth(),e.getDate())}},{key:"toString",value:function(){return"WithinDays(".concat(this.days,")")}},{key:"eval",value:function(e){var t=this.getInterval(),r=a(t,2),n=r[0],o=r[1];return!!e.due&&(e.due.isGreaterThanOrEqual(n)&&e.due.isLessThanOrEqual(o))}}]),t}(D);r.WithinDays=Z;var ee=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"ToMe"}},{key:"eval",value:function(e,t){return O.default.isShared(t,e.project_id)&&e.responsible_uid===t.user.id}}]),t}(D);r.ToMe=ee;var te=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"ToOthers"}},{key:"eval",value:function(e,t){var r=t.user.id;return e.responsible_uid&&e.responsible_uid!==r&&e.assigned_by_uid===r}}]),t}(D);r.ToOthers=te;var re=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"ViewAll"}},{key:"eval",value:function(){return!0}}]),t}(D);r.ViewAll=re;var ne=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"All"}},{key:"eval",value:function(){return!0}}]),t}(D);r.All=ne;var oe=function(e){function t(e){var r;return _(this,t),r=d(this,p(t).call(this,I)),r.searchStr=e,r.matchFn=(0,g.looseMatch)(e),r}return m(t,e),v(t,[{key:"toString",value:function(){return"Search(".concat(this.searchStr,")")}},{key:"eval",value:function(e){return this.matchFn(e.content)}}]),t}(D);r.Search=oe;var ae=function(e){function t(e){var r;return _(this,t),r=d(this,p(t).call(this,I)),r.query=e,r.hasMatch=C(e),r}return m(t,e),v(t,[{key:"toString",value:function(){return"AssignedTo(".concat(this.query,")")}},{key:"eval",value:function(e,t){return!!O.default.isShared(t,e.project_id)&&this.hasMatch(t)(e.responsible_uid)}}]),t}(D);r.AssignedTo=ae;var ie=function(e){function t(e){var r;return _(this,t),r=d(this,p(t).call(this,I)),r.query=e,r.hasMatch=C(e),r}return m(t,e),v(t,[{key:"toString",value:function(){return"AssignedBy(".concat(this.query,")")}},{key:"eval",value:function(e,t){return!(!O.default.isShared(t,e.project_id)||!e.responsible_uid)&&this.hasMatch(t)(e.assigned_by_uid)}}]),t}(D);r.AssignedBy=ie;var le=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"Assigned"}},{key:"eval",value:function(e,t){return O.default.isShared(t,e.project_id)&&e.responsible_uid}}]),t}(D);r.Assigned=le;var se=function(e){function t(){return _(this,t),d(this,p(t).call(this,I))}return m(t,e),v(t,[{key:"toString",value:function(){return"Shared"}},{key:"eval",value:function(e,t){return O.default.isShared(t,e.project_id)}}]),t}(D);r.Shared=se;var ue=function(e){function t(e){var r;return _(this,t),r=d(this,p(t).call(this,I)),r.symbol=e,r}return m(t,e),v(t,[{key:"toString",value:function(){return"UnrecognizedSymbol(".concat(this.symbol,")")}},{key:"eval",value:function(){return!1}}]),t}(D);r.UnrecognizedSymbol=ue},{"../utils":1176,"../utils/fp":1166,"./Deps":117,"./errors":118,redux:"redux",reselect:"reselect"}],126:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e("core-js/modules/es6.array.copy-within"),e("core-js/modules/es6.array.fill"),e("core-js/modules/es6.array.find"),e("core-js/modules/es6.array.find-index"),e("core-js/modules/es7.array.flat-map"),e("core-js/modules/es6.array.from"),e("core-js/modules/es7.array.includes"),e("core-js/modules/es6.array.iterator"),e("core-js/modules/es6.array.of"),e("core-js/modules/es6.array.sort"),e("core-js/modules/es6.array.species"),e("core-js/modules/es6.date.to-json"),e("core-js/modules/es6.date.to-primitive"),e("core-js/modules/es6.function.has-instance"),e("core-js/modules/es6.function.name"),e("core-js/modules/es6.map"),e("core-js/modules/es6.math.acosh"),e("core-js/modules/es6.math.asinh"),e("core-js/modules/es6.math.atanh"),e("core-js/modules/es6.math.cbrt"),e("core-js/modules/es6.math.clz32"),e("core-js/modules/es6.math.cosh"),e("core-js/modules/es6.math.expm1"),e("core-js/modules/es6.math.fround"),e("core-js/modules/es6.math.hypot"),e("core-js/modules/es6.math.imul"),e("core-js/modules/es6.math.log1p"),e("core-js/modules/es6.math.log10"),e("core-js/modules/es6.math.log2"),e("core-js/modules/es6.math.sign"),e("core-js/modules/es6.math.sinh"),e("core-js/modules/es6.math.tanh"),e("core-js/modules/es6.math.trunc"),e("core-js/modules/es6.number.constructor"),e("core-js/modules/es6.number.epsilon"),e("core-js/modules/es6.number.is-finite"),e("core-js/modules/es6.number.is-integer"),e("core-js/modules/es6.number.is-nan"),e("core-js/modules/es6.number.is-safe-integer"),e("core-js/modules/es6.number.max-safe-integer"),e("core-js/modules/es6.number.min-safe-integer"),e("core-js/modules/es6.number.parse-float"),e("core-js/modules/es6.number.parse-int"),e("core-js/modules/es6.object.assign"),e("core-js/modules/es7.object.define-getter"),e("core-js/modules/es7.object.define-setter"),e("core-js/modules/es7.object.entries"),e("core-js/modules/es6.object.freeze"),e("core-js/modules/es6.object.get-own-property-descriptor"),e("core-js/modules/es7.object.get-own-property-descriptors"),e("core-js/modules/es6.object.get-own-property-names"),e("core-js/modules/es6.object.get-prototype-of"),e("core-js/modules/es7.object.lookup-getter"),e("core-js/modules/es7.object.lookup-setter"),e("core-js/modules/es6.object.prevent-extensions"),e("core-js/modules/es6.object.to-string"),e("core-js/modules/es6.object.is"),e("core-js/modules/es6.object.is-frozen"),e("core-js/modules/es6.object.is-sealed"),e("core-js/modules/es6.object.is-extensible"),e("core-js/modules/es6.object.keys"),e("core-js/modules/es6.object.seal"),e("core-js/modules/es6.object.set-prototype-of"),e("core-js/modules/es7.object.values"),e("core-js/modules/es6.promise"),e("core-js/modules/es7.promise.finally"),e("core-js/modules/es6.reflect.apply"),e("core-js/modules/es6.reflect.construct"),e("core-js/modules/es6.reflect.define-property"),e("core-js/modules/es6.reflect.delete-property"),e("core-js/modules/es6.reflect.get"),e("core-js/modules/es6.reflect.get-own-property-descriptor"),e("core-js/modules/es6.reflect.get-prototype-of"),e("core-js/modules/es6.reflect.has"),e("core-js/modules/es6.reflect.is-extensible"),e("core-js/modules/es6.reflect.own-keys"),e("core-js/modules/es6.reflect.prevent-extensions"),e("core-js/modules/es6.reflect.set"),e("core-js/modules/es6.reflect.set-prototype-of"),e("core-js/modules/es6.regexp.constructor"),e("core-js/modules/es6.regexp.flags"),e("core-js/modules/es6.regexp.match"),e("core-js/modules/es6.regexp.replace"),e("core-js/modules/es6.regexp.split"),
e("core-js/modules/es6.regexp.search"),e("core-js/modules/es6.regexp.to-string"),e("core-js/modules/es6.set"),e("core-js/modules/es6.symbol"),e("core-js/modules/es7.symbol.async-iterator"),e("core-js/modules/es6.string.anchor"),e("core-js/modules/es6.string.big"),e("core-js/modules/es6.string.blink"),e("core-js/modules/es6.string.bold"),e("core-js/modules/es6.string.code-point-at"),e("core-js/modules/es6.string.ends-with"),e("core-js/modules/es6.string.fixed"),e("core-js/modules/es6.string.fontcolor"),e("core-js/modules/es6.string.fontsize"),e("core-js/modules/es6.string.from-code-point"),e("core-js/modules/es6.string.includes"),e("core-js/modules/es6.string.italics"),e("core-js/modules/es6.string.iterator"),e("core-js/modules/es6.string.link"),e("core-js/modules/es7.string.pad-start"),e("core-js/modules/es7.string.pad-end"),e("core-js/modules/es6.string.raw"),e("core-js/modules/es6.string.repeat"),e("core-js/modules/es6.string.small"),e("core-js/modules/es6.string.starts-with"),e("core-js/modules/es6.string.strike"),e("core-js/modules/es6.string.sub"),e("core-js/modules/es6.string.sup"),e("core-js/modules/es7.string.trim-left"),e("core-js/modules/es7.string.trim-right"),e("core-js/modules/es6.typed.array-buffer"),e("core-js/modules/es6.typed.int8-array"),e("core-js/modules/es6.typed.uint8-array"),e("core-js/modules/es6.typed.uint8-clamped-array"),e("core-js/modules/es6.typed.int16-array"),e("core-js/modules/es6.typed.uint16-array"),e("core-js/modules/es6.typed.int32-array"),e("core-js/modules/es6.typed.uint32-array"),e("core-js/modules/es6.typed.float32-array"),e("core-js/modules/es6.typed.float64-array"),e("core-js/modules/es6.weak-map"),e("core-js/modules/es6.weak-set"),e("core-js/modules/web.timers"),e("core-js/modules/web.immediate"),e("core-js/modules/web.dom.iterable"),e("regenerator-runtime/runtime"),e("whatwg-fetch"),e("../utils/dom/polyfill"),e("what-input");var a=e("react"),i=e("react-dom"),l=e("../components/misc/Util.js").postMessageToWindow,s=e("../models/Storage").GlobalStorage,u=e("../components/notes/Notes.js"),c=e("../components/notes/NotesBuffer"),d=e("./ResolveDeps"),f=e("../containers/TodoistApp").default,p=e("../models/VersionUpdater"),m=e("../models/Config").default,h=e("./showInitError").default,y=e("../models/SyncEngine");e("../models/SyncData"),e("../external_services/MacAppBridge"),e("../components/refresh_interface/RefreshInterface"),e("../models/window"),e("../react_components/sync_debug_console"),e("../models/WebSocketManager.js"),e("../components/comet/Comet"),window.initTodoist=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{d.resolve(),e=n({loadStartPage:!0,disablePromotion:!1},e),m.init(e);if(p.reloadIfVersionUpdated())return;var t=document.getElementById("todoist_app");i.render(a.createElement(f,null),t)}catch(e){h(e)}},window!==top&&top.postMessage&&setInterval(function(){return l(top,window.location.toString())},200),window.onbeforeunload=function(e){s.commitAll();var t=c.getNoteUploads();if(t.length>0)return t[0].item_id?u.showItemNotes(t[0].item_id):u.showProjectNotes(t[0].project_id),_("You have uploads that are not completed.");if(0!==y.getQueueSuccessLength()&&!y.global_error){setTimeout(function(){y.sync(null,!0)},10);var r=_("Some changes you've made have not been synced. Exit anyway?");return e.returnValue=r,r}}},{"../components/comet/Comet":18,"../components/misc/Util.js":43,"../components/notes/Notes.js":46,"../components/notes/NotesBuffer":48,"../components/refresh_interface/RefreshInterface":77,"../containers/TodoistApp":107,"../external_services/MacAppBridge":115,"../models/Config":150,"../models/Storage":167,"../models/SyncData":168,"../models/SyncEngine":169,"../models/VersionUpdater":174,"../models/WebSocketManager.js":175,"../models/window":176,"../react_components/sync_debug_console":1071,"../utils/dom/polyfill":1157,"./ResolveDeps":127,"./showInitError":128,"core-js/modules/es6.array.copy-within":297,"core-js/modules/es6.array.fill":298,"core-js/modules/es6.array.find":300,"core-js/modules/es6.array.find-index":299,"core-js/modules/es6.array.from":301,"core-js/modules/es6.array.iterator":302,"core-js/modules/es6.array.of":303,"core-js/modules/es6.array.sort":304,"core-js/modules/es6.array.species":305,"core-js/modules/es6.date.to-json":306,"core-js/modules/es6.date.to-primitive":307,"core-js/modules/es6.function.has-instance":308,"core-js/modules/es6.function.name":309,"core-js/modules/es6.map":310,"core-js/modules/es6.math.acosh":311,"core-js/modules/es6.math.asinh":312,"core-js/modules/es6.math.atanh":313,"core-js/modules/es6.math.cbrt":314,"core-js/modules/es6.math.clz32":315,"core-js/modules/es6.math.cosh":316,"core-js/modules/es6.math.expm1":317,"core-js/modules/es6.math.fround":318,"core-js/modules/es6.math.hypot":319,"core-js/modules/es6.math.imul":320,"core-js/modules/es6.math.log10":321,"core-js/modules/es6.math.log1p":322,"core-js/modules/es6.math.log2":323,"core-js/modules/es6.math.sign":324,"core-js/modules/es6.math.sinh":325,"core-js/modules/es6.math.tanh":326,"core-js/modules/es6.math.trunc":327,"core-js/modules/es6.number.constructor":328,"core-js/modules/es6.number.epsilon":329,"core-js/modules/es6.number.is-finite":330,"core-js/modules/es6.number.is-integer":331,"core-js/modules/es6.number.is-nan":332,"core-js/modules/es6.number.is-safe-integer":333,"core-js/modules/es6.number.max-safe-integer":334,"core-js/modules/es6.number.min-safe-integer":335,"core-js/modules/es6.number.parse-float":336,"core-js/modules/es6.number.parse-int":337,"core-js/modules/es6.object.assign":338,"core-js/modules/es6.object.freeze":339,"core-js/modules/es6.object.get-own-property-descriptor":340,"core-js/modules/es6.object.get-own-property-names":341,"core-js/modules/es6.object.get-prototype-of":342,"core-js/modules/es6.object.is":346,"core-js/modules/es6.object.is-extensible":343,"core-js/modules/es6.object.is-frozen":344,"core-js/modules/es6.object.is-sealed":345,"core-js/modules/es6.object.keys":347,"core-js/modules/es6.object.prevent-extensions":348,"core-js/modules/es6.object.seal":349,"core-js/modules/es6.object.set-prototype-of":350,"core-js/modules/es6.object.to-string":351,"core-js/modules/es6.promise":352,"core-js/modules/es6.reflect.apply":353,"core-js/modules/es6.reflect.construct":354,"core-js/modules/es6.reflect.define-property":355,"core-js/modules/es6.reflect.delete-property":356,"core-js/modules/es6.reflect.get":359,"core-js/modules/es6.reflect.get-own-property-descriptor":357,"core-js/modules/es6.reflect.get-prototype-of":358,"core-js/modules/es6.reflect.has":360,"core-js/modules/es6.reflect.is-extensible":361,"core-js/modules/es6.reflect.own-keys":362,"core-js/modules/es6.reflect.prevent-extensions":363,"core-js/modules/es6.reflect.set":365,"core-js/modules/es6.reflect.set-prototype-of":364,"core-js/modules/es6.regexp.constructor":366,"core-js/modules/es6.regexp.flags":368,"core-js/modules/es6.regexp.match":369,"core-js/modules/es6.regexp.replace":370,"core-js/modules/es6.regexp.search":371,"core-js/modules/es6.regexp.split":372,"core-js/modules/es6.regexp.to-string":373,"core-js/modules/es6.set":374,"core-js/modules/es6.string.anchor":375,"core-js/modules/es6.string.big":376,"core-js/modules/es6.string.blink":377,"core-js/modules/es6.string.bold":378,"core-js/modules/es6.string.code-point-at":379,"core-js/modules/es6.string.ends-with":380,"core-js/modules/es6.string.fixed":381,"core-js/modules/es6.string.fontcolor":382,"core-js/modules/es6.string.fontsize":383,"core-js/modules/es6.string.from-code-point":384,"core-js/modules/es6.string.includes":385,"core-js/modules/es6.string.italics":386,"core-js/modules/es6.string.iterator":387,"core-js/modules/es6.string.link":388,"core-js/modules/es6.string.raw":389,"core-js/modules/es6.string.repeat":390,"core-js/modules/es6.string.small":391,"core-js/modules/es6.string.starts-with":392,"core-js/modules/es6.string.strike":393,"core-js/modules/es6.string.sub":394,"core-js/modules/es6.string.sup":395,"core-js/modules/es6.symbol":396,"core-js/modules/es6.typed.array-buffer":397,"core-js/modules/es6.typed.float32-array":398,"core-js/modules/es6.typed.float64-array":399,"core-js/modules/es6.typed.int16-array":400,"core-js/modules/es6.typed.int32-array":401,"core-js/modules/es6.typed.int8-array":402,"core-js/modules/es6.typed.uint16-array":403,"core-js/modules/es6.typed.uint32-array":404,"core-js/modules/es6.typed.uint8-array":405,"core-js/modules/es6.typed.uint8-clamped-array":406,"core-js/modules/es6.weak-map":407,"core-js/modules/es6.weak-set":408,"core-js/modules/es7.array.flat-map":409,"core-js/modules/es7.array.includes":410,"core-js/modules/es7.object.define-getter":411,"core-js/modules/es7.object.define-setter":412,"core-js/modules/es7.object.entries":413,"core-js/modules/es7.object.get-own-property-descriptors":414,"core-js/modules/es7.object.lookup-getter":415,"core-js/modules/es7.object.lookup-setter":416,"core-js/modules/es7.object.values":417,"core-js/modules/es7.promise.finally":418,"core-js/modules/es7.string.pad-end":419,"core-js/modules/es7.string.pad-start":420,"core-js/modules/es7.string.trim-left":421,"core-js/modules/es7.string.trim-right":422,"core-js/modules/es7.symbol.async-iterator":423,"core-js/modules/web.dom.iterable":424,"core-js/modules/web.immediate":425,"core-js/modules/web.timers":426,react:"react","react-dom":"react-dom","regenerator-runtime/runtime":640,"what-input":"what-input","whatwg-fetch":"whatwg-fetch"}],127:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=o(e("../components/agenda/Agenda.js")),l=e("../components/project_editor/ProjectEditor.js"),s=o(e("../components/projects_list/ProjectList")),u=o(e("../components/notes/Notes.js")),c=e("../reducers/projects"),d=e("../reducers/collaborators"),f=o(e("../models/ItemsModel")),p=o(e("../models/ProjectsModel")),m=e("../models/Reminders"),h=o(e("../models/SyncEngine")),_=e("../utils/deps"),y=n(e("../containers/SmartSchedule")),v=o(e("../components/item_selecter/ItemSelecter")),g=o(e("../stores/store")),b=n(e("../reducers/notes/actions")),w=e("../reducers/items"),E=o(e("../models/DateExt"));e("../utils/formatDate"),r.resolve=function(){var e;(0,_.inject)((e={UtilModels:{SyncEngine:h.default},Collaborators:{ItemsModel:f.default,ProjectsModel:p.default,RemindersModel:m.RemindersModel},ProjectListUtils:{ProjectList:s.default},NotesUtils:{Notes:u.default},AgendaUtils:{Agenda:i.default,ItemsModel:f.default,store:g.default},Notes:{Agenda:i.default},ProjectEditorManager:{ProjectEditor:l.ProjectEditor},ProjectsArchive:{ProjectList:s.default},filterist:{ItemsModel:f.default,itemGetUncompleted:w.itemGetUncompleted,createProjectPickBySelector:c.createProjectPickBySelector,projectGetChildren:c.projectGetChildren,createCollaboratorPickBySelector:d.createCollaboratorPickBySelector,isShared:d.isShared,store:g.default},MenuProjectEditor:{ItemSelecter:v.default},DragAndDrop:{Agenda:i.default,ProjectList:s.default},Logger:{store:g.default,ProjectsModel:p.default},LoadEngine:{SyncEngine:h.default},Scheduler:{SmartSchedule:y},detailView:{Notes:u.default}},a(e,"reducers/items/actions",{notesActions:b}),a(e,"reducers/labels/selectors",{itemGetVisible:w.itemGetVisible}),a(e,"utils/formatDate",{DateExt:E.default}),a(e,"PremiumOnlyModal",{store:g.default}),a(e,"PeopleAutoComplete",{Agenda:i.default}),e)),(0,_.checkIfAllInjected)()}},{"../components/agenda/Agenda.js":5,"../components/item_selecter/ItemSelecter":27,"../components/notes/Notes.js":46,"../components/project_editor/ProjectEditor.js":60,"../components/projects_list/ProjectList":71,"../containers/SmartSchedule":103,"../models/DateExt":152,"../models/ItemsModel":155,"../models/ProjectsModel":159,"../models/Reminders":161,"../models/SyncEngine":169,"../reducers/collaborators":1086,"../reducers/items":1100,"../reducers/notes/actions":1112,"../reducers/projects":1119,"../stores/store":1140,"../utils/deps":1154,"../utils/formatDate":1163}],128:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("../stores/store")),a=n(e("../models/ProjectsModel")),i=e("../logger/Logger"),l=function(e){try{if(-1!==e.message.indexOf("window.User")&&-1!==e.message.indexOf("undefined")){var t=o.default.getState().user,r=localStorage.getItem("User"),n=a.default.getAll().length;i.captureError(e,{tags:{where:"undefined_user"},extra:{store_user:t,ls_user:r,projectCounts:n}})}}catch(e){}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.message,n=t.extra,o=t.showErrorLog,a=void 0===o||o,s=t.captureError,c=void 0===s||s;console.log(e);var d;c&&(l(e),d=i.captureError(e,{tags:{where:"init"}}));var f;if(a){var p=e instanceof window.DOMError?"(".concat(e.name,") ").concat(e):"".concat(e);e.message&&-1===p.indexOf(e.message)&&(p+=": ".concat(e.message)),n&&(p+="\n"+n),d&&(p+="\nEvent ID: "+d),f=TEXTAREA({readonly:"readonly"},p)}var m=A({c:"ist_button ist_button_red"},_("Ok"));r||(r=_("An unknown error happened while loading data\u2026We will try to reload Todoist."));var h=DIV({c:"init_error_popup"},P(r),P(a?_("Please contact Todoist Support (support@todoist.com) and supply the error log below if this problem persists."):_("Please contact Todoist Support (support@todoist.com) if this problem persists.")),f,m);$("app_holder")&&($("app_holder").style.display="block");var y=GB_showHTML(_("Error"),h,500,500,{close_validator_fn:function(){return u(),!0}});$AEV(m,"click",function(){u(),y.hide()})},u=function(){try{window.applicationCache.update()}catch(e){}e("../models/LoadEngine").logout()},c=s;r.default=c},{"../logger/Logger":129,"../models/LoadEngine":157,"../models/ProjectsModel":159,"../stores/store":1140}],129:[function(e,t,r){"use strict";function n(){return"undefined"!=typeof Raven&&Raven.isSetup()}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.error(e),n()){if(t.extra=t.extra?t.extra:{},t.extra.error_message=e.message,d(e)){var r=Raven.lastEventId();return console.log(e,"\n"+"event_id: ".concat(r)),r}Raven.captureException(e,t);return Raven.lastEventId()}}function a(e,t){if(n())try{throw new Error(e)}catch(e){o(e,t)}console.log(e)}function i(e,t){n()&&Raven.captureMessage(e,t),console.log(e)}function l(e){n()&&Raven.captureBreadcrumb(e)}function s(e){n()&&Raven.setTagsContext(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.captureError=o,r.captureMessageWithTrace=a,r.captureMessage=i,r.captureBreadcrumb=l,r.setTagsContext=s,r.default=void 0;var u=e("../utils/deps"),c=(0,u.defineDeps)("Logger",["store","ProjectsModel"]),d=function(e){try{if(-1!==e.message.indexOf("window.User")&&-1!==e.message.indexOf("undefined")){return o(e,{tags:{where:"undefined_user_2"},extra:{store_user:c.store.getState().user,ls_user:localStorage.getItem("User"),projectCounts:c.ProjectsModel.getAll().length}}),!0}}catch(e){}return!1},f={captureError:o,captureMessageWithTrace:a,captureMessage:i,captureBreadcrumb:l,setTagsContext:s};r.default=f},{"../utils/deps":1154}],130:[function(e,t,r){"use strict";function n(e,t){var r=UL({class:"menu_buttons priorities"});$add(r,LI({class:"lbl"},_("Priority")));var n=LI({class:"priorities"});return $map([4,3,2,1],function(r){var o=5-r,a=[svgs.get("sm1/priority_1.svg"),svgs.get("sm1/priority_2.svg"),svgs.get("sm1/priority_3.svg"),svgs.get("sm1/priority_4.svg")],i=a[r-1],l=A({c:"a_priority icon_priority_"+r,"data-track":"task|more_priority_"+r},i);l.priority=o;var u=B(_("Priority %s").replace("%s",r));t&&(u=SPAN(u,BR(),"p"+r)),s.showSimpleText(l,u,null,0,5),$AEV(l,["click","touchstart"],function(t){return $preventDefault(t),e(o,l),!1}),$add(n,l)}),$add(r,n),{type:"item",view:r,extra_class:"no_hover"}}function o(e,t){var r=$all("li","colors",e.colors.view)[0];$map($AF(r.childNodes),function(e){parseInt(e.getAttribute("data-index"))==t?$addClass(e,"selected_color"):$removeClass(e,"selected_color")})}function a(e,t){var r=UL({class:"menu_buttons colors"}),n=LI({class:"colors"});return $map(e,function(e,r){var o=r+l.START_INDEX,a=A({c:"object_color","data-index":o},svgs.get("sm1/check_mark_big.svg"));a.style.backgroundColor=e.hex,a.onclick=$p(t,o,a,null),s.showSimpleText(a,e.name,null,1,9),$add(n,a)}),$add(r,n),{type:"item",view:r,extra_class:"no_hover"}}function i(e,t){var r=UL({class:"menu_buttons reactions"}),n=LI({class:"reactions"});return $map(e,function(e,r){var o=$setHTML(A({c:"object_reaction"}),u.formatSimple(e,{as_html:!0}));o.onclick=$p(t,r,o,null),$add(n,o)}),$add(r,n),{type:"item",view:r,extra_class:"no_hover"}}var l=e("../models/Colors"),s=window.IstTooltip,u=window.DoistFormat;t.exports={createPriorities:n,selectColor:o,createColor:a,createReactions:i}},{"../models/Colors":149}],131:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){l(t,e.json.priority);var r=t.current_holder.json,n={with_help_text:!0,with_smart_schedule:!0,with_today:!0,with_postpone:!!r.due,with_tomorrow:!r.due,with_next_week:!0,with_more:!0,items:r},a=function(e){var n;n=t.saveCurrentItem?t.saveCurrentItem:function(e){e()},e instanceof Date&&(e=r.due?r.due.inheritDate({year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()},{withTime:59!==e.getSeconds(),timezone:r.due.timezone}):u.default.fromDate(e)),n(function(){d.default.updateDue(o({},r.id,e)),t.hide(),f.default.refresh()})},i=c.default.create(a,n);$replace(t.scheduler_holder.view,i)}function i(e){$AEV(document,"click",function(t){var r=$eventElm(t);return!!($parent(r,"div","scheduler")||$parent(r,"div","dialog-content")||$parent(r,"div","dialog-timepicker")||$parent(r,"div","dialog-timezone"))||e.hide(t)})}function l(e,t){var r=$all("li","priorities",e.menu_holder)[0];s(),$map($AF(r.childNodes),function(e){e.priority==t&&$addClass(e,"priority_selected")})}function s(){$map($all("a","a_priority"),function(e){$removeClass(e,"priority_selected")})}var u=n(e("../models/DateExt")),c=n(e("../components/smart_scheduler/SmartScheduler")),d=n(e("../models/ItemsModel")),f=n(e("../components/agenda/AgendaUtils"));window.Signals.connect("update_priority",s),t.exports={annotateItemEditMenu:a,schedulerClose:i,selectPriority:l}},{"../components/agenda/AgendaUtils":8,"../components/smart_scheduler/SmartScheduler":89,"../models/DateExt":152,"../models/ItemsModel":155}],132:[function(e,t,r){"use strict";function n(e,t){return function(){var r=e.current_form;r&&""!==$gc(r,null,"richtext_editor").proxyGetValue()?"edit"==e.current_mode?e.saveItem(r,function(){e.showAddItem(!0,t)}):e.addItem(r,function(){e.showAddItem(!0,t)}):e.showAddItem(!0,t)}}function o(e,t){if(!e)return null;var r=e.current_holder;return e.current_holder=null,!1!==t&&e.hide(),r}t.exports={menuSaveAndAdd:n,getAndResetCurrent:o}},{}],133:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var l=e("../utils"),s={_createSection:function(e,t){return TABLE(TR(TH({colspan:"2"},e)),t)},_createItem:function(e,t){return TR(TD({c:"ks-dialog__label"},e),TD({c:"ks-dialog__shortcut"},t))},_platformIsMac:$isMac(),_getKeySymbol:function(e){switch(e){case"command":return this._platformIsMac?"\u2318":"Ctrl";case"alt":return this._platformIsMac?"\u2325":"Alt";case"control":return this._platformIsMac?"\u2303":"Ctrl";case"enter":return this._platformIsMac?"\u21a9\ufe0e":"Enter"}},_getTable:function(){return TABLE({c:"ks-dialog__wrapper-table"},TR(TD(this._createSection(_x("shortcuts","Task Quick Add shortcuts"),TBODY(this._createItem(_x("shortcuts","Add a label"),PRE("@")),this._createItem(_x("shortcuts","Pick a project"),PRE("#")),this._createItem(_x("shortcuts","Add an assignee"),PRE("+")),this._createItem(_x("shortcuts","Set a priority level"),DIV(PRE("p1")," , ",PRE("p2")," , ",PRE("p3")," , ",PRE("p4"))),this._createItem(_x("shortcuts","Add a quick comment"),DIV(PRE(this._getKeySymbol("control"))," + ",PRE("m"))))),this._createSection(_x("shortcuts","Used anywhere"),TBODY(this._createItem(_x("shortcuts","Select and change multiple tasks at once"),DIV.apply(void 0,n((0,l.formatToDOM)(_x("shortcuts","{shortcut1} or {shortcut2}"),{shortcut1:SPAN(PRE(this._getKeySymbol("control"))," + ",PRE("Click")),shortcut2:SPAN(PRE("\u21e7")," + ",PRE("Click"))})))),this._createItem(_x("shortcuts","Add task"),PRE("q")),this._createItem(_x("shortcuts","Add new task at the bottom of the list"),PRE("a")),this._createItem(_x("shortcuts","Add new task at the top of the list"),PRE("A")),this._createItem(_x("shortcuts","Open search"),DIV.apply(void 0,n((0,l.formatToDOM)(_x("shortcuts","{shortcut1} or {shortcut2}"),{shortcut1:PRE("/"),shortcut2:PRE("f")})))))),this._createSection(_x("shortcuts","Adding or editing tasks"),TBODY(this._createItem(_x("shortcuts","Cancel current changes"),PRE("Esc")),this._createItem(_x("shortcuts","Save a newly created task and create a new one below it"),PRE(this._getKeySymbol("enter"))),this._createItem(_x("shortcuts","Save changes to an existing task and create a new task below it"),DIV(PRE("\u21e7")," + ",PRE(this._getKeySymbol("enter")))),this._createItem(_x("shortcuts","Save a new task or save changes to an existing one and create a new task above it"),DIV(PRE(this._getKeySymbol("control"))," + ",PRE(this._getKeySymbol("enter")))),this._createItem(_x("shortcuts","Move to the task above the task currently being edited"),DIV(PRE(this._getKeySymbol("control"))," + ",PRE("\u2191"))),this._createItem(_x("shortcuts","Move to the task below the task currently being edited"),DIV(PRE(this._getKeySymbol("control"))," + ",PRE("\u2193"))))),this._createSection(_x("shortcuts","Creating and completing sub-tasks"),TBODY(this._createItem(_x("shortcuts","Increase task indent (Works only inside projects)"),DIV(PRE(this._getKeySymbol("command"))," + ",PRE("\u2192"))),this._createItem(_x("shortcuts","Decrease task indent (Works only inside projects)"),DIV(PRE(this._getKeySymbol("command"))," + ",PRE("\u2190"))),this._createItem(_x("shortcuts","Complete a sub-task or recurring task and archive it"),DIV(PRE("\u21e7")," + ",PRE("Click")," ",_x("shortcuts","(hold down \u21e7)"))))),this._createSection(_x("shortcuts","Sorting tasks inside a project"),TBODY(this._createItem(_x("shortcuts","Sort by date"),PRE("d")),this._createItem(_x("shortcuts","Sort by priority"),PRE("p")),this._createItem(_x("shortcuts","Sort by name"),PRE("n")),this._createItem(_x("shortcuts","Sort by assignee"),PRE("r")))))))},_getHolder:function(){return DIV({c:"ks-dialog"},P({c:"ks-dialog__caption"},_x("shortcuts","Shortcuts can save you time! Some can be used anywhere in the app, while others only work when adding or editing tasks.")," ",A({c:"ks-dialog__link",href:"https://get.todoist.help/hc/articles/205063212",target:"_blank"},_x("shortcuts","Learn more"))),this._getTable())},show:function(){this._holder=this._holder||this._getHolder(),GB_showHTML(_x("shortcuts","Keyboard Shortcuts"),this._holder,580,580)}};window.KeyboardShortcutsDialog=t.exports=s},{"../utils":1176}],134:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}var a,i=n(e("react")),l=n(e("react-dom")),s=e("react-redux"),u=n(e("../stores/store")),c=n(e("../react_components/project_picker")),d=e("../react_components/icons"),f=e("../reducers/items"),p=window.IstMenu,m=window.Signals,h=window.GB_getLast,y=window.GB_hide,v=e("./HelpersMenuGeneral.js"),g=e("./HelperMenuAnnotations.js"),b=e("./HelperColorsPriorities.js"),w=e("../components/items_utils/ItemCommonEdits"),E=e("../components/items_utils/ItemUniqueLink.js"),j=e("../components/generic_manager/GenericManagerUtils.js"),O=e("../components/reminders/Reminders.js"),S=e("./../components/agenda/AgendaUtils"),P=e("../components/item_selecter/ItemSelecter.js"),I={init:function(e){a=new p,a.saveCurrentItem=e.saveCurrentItem,a.addItems(p.createItem(_("Edit task"),function(){e.editCurrentItem({},v.getAndResetCurrent(a))},{extra_class:"menu_item_edit",icon:svgs.get("sm1/edit.svg"),attr:{"data-track":"task|more_edit"}}),p.createSeparator(),a.scheduler_holder={type:"item",view:DIV(),extra_class:"no_hover"},function(){var t=b.createPriorities(function(t){e.saveCurrentItem(function(){I.updatePriority(e,t)})},!1);return t.extra_class+=" sel_f_priorities",t}()),a.addItems(p.createSeparator(),p.createItem(_("Reminders"),function(){var e=v.getAndResetCurrent(a);return e&&O.show(e),!1},{extra_class:"menu_item_reminders",icon:svgs.get("sm1/reminder.svg"),attr:{"data-track":"task|more_reminders"}}));_("Move to project");return a.moveToProjectItem=TR({c:"sel_move_task menu_item_move menu_item"}),a.addItems(p.createSeparator(),p.createItem(_("Archive task"),$p(e.saveCurrentItem,$p(I.forceComplete,e)),{extra_class:"menu_item_archive",icon:svgs.get("sm1/archive.svg"),attr:{"data-track":"task|more_archive"}}),a.moveToProjectItem,p.createItem(_("Duplicate"),function(){return e.saveCurrentItem(function(){var e=v.getAndResetCurrent(a);w.duplicate([e.json.id])}),!1},{extra_class:"menu_item_duplicate",icon:svgs.get("sm1/add_integration.svg"),attr:{"data-track":"task|more_duplicate"}}),p.createItem(_("Copy link to task"),function(){var e=v.getAndResetCurrent(a);return e&&E.show(e.json),!1},{extra_class:"menu_item_link",icon:svgs.get("sm1/link.svg"),attr:{"data-track":"task|more_link_to_task"}}),p.createSeparator(),p.createItem(_("Delete task"),I.deleteCurrentItem,{extra_class:"sel_delete_task danger",icon:svgs.get("sm1/trash.svg"),attr:{"data-track":"task|more_delete"}})),a.hide_callbacks.push(function(){$removeClass($all("li","on_menu_show"),"on_menu_show"),l.default.unmountComponentAtNode(a.moveToProjectItem)}),a.hide_menu_icon=!0,g.schedulerClose(a),m.connect("hide_editor_menu",function(){a.hide()}),a},get:function(){return a},toggle:function(e,t,r,n){return!e.disabled&&(P.deselectAll(),$removeClass($all("li","on_menu_show"),"on_menu_show"),$addClass(e,"on_menu_show"),a.current_holder=e,g.annotateItemEditMenu(e,a),l.default.render(i.default.createElement(s.Provider,{store:u.default},i.default.createElement(c.default,{onSelect:function(t){var r=t.project_id,n=t.section_id;u.default.dispatch((0,f.itemMoveAndReorder)({id:e.json.id,project_id:r,section_id:n})),a.hide(),m.sendSignal("instant_refresh_interface")},selectedProjectId:e.json.project_id,selectedSectionId:e.json.section_id,withSectionSelection:!0},function(e){var t=e.toggle,r=e.buttonProps;return i.default.createElement("td",o({onClick:t,"data-track":"task|more_move_to_project"},r),i.default.createElement("div",{className:"menu_wrapper"},i.default.createElement("span",{className:"menu_icon"},i.default.createElement(d.MoveIcon,null)),i.default.createElement("div",{className:"menu_label"},_("Move to project"))))})),a.moveToProjectItem),a.toggle(t,e,n),!1)},updatePriority:function(e,t){var r=v.getAndResetCurrent(a);if(r){var n=r.json.priority;w.updatePriority(r,t),e.refresh(r.json,{priority:n,due:r.json.due})}},forceComplete:function(e){var t=v.getAndResetCurrent(a);return t&&(e.completeItem(t,{shift:!0},!0),h()&&y()),!1},deleteCurrentItem:function(){var e=v.getAndResetCurrent(a);if(e){var t=$child(e,"img","arrow");if(t)try{S.fetchChildren(t)}catch(e){}j.getChildren(e,!0),w.deleteItems([e],function(e){e&&h()&&y()})}}};t.exports=I},{"../components/generic_manager/GenericManagerUtils.js":26,"../components/item_selecter/ItemSelecter.js":27,"../components/items_utils/ItemCommonEdits":30,"../components/items_utils/ItemUniqueLink.js":32,"../components/reminders/Reminders.js":78,"../react_components/icons":842,"../react_components/project_picker":955,"../reducers/items":1100,"../stores/store":1140,"./../components/agenda/AgendaUtils":8,"./HelperColorsPriorities.js":130,"./HelperMenuAnnotations.js":131,"./HelpersMenuGeneral.js":132,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],135:[function(e,t,r){"use strict";var n=window,o=n.Signals,a=window,i=a.IstMenu,l={};r.get=function(){return l.Menu},r.init=function(){var e;l.Menu=e=new i,e.with_arrow=!0,e.pos_y_offset=6,e.arrow_y_offset=10,e.arrow_x_offset=5;var t=function(e){return SPAN({c:"keyboard_key"},e)},r=DIV({c:"indent_menu","data-track":"task_form|more_indent_left"},DIV({c:"indent_desc"},SPAN(_("Parent task")),BR(),SPAN({c:"small_text"},_("Indent Left"))),DIV({c:"indent_shortcut"},t($isMac()?"\u2318":"CTRL"),SPAN({c:"plus"},"+"),t("\u2190"))),n=DIV({c:"indent_menu","data-track":"task_form|more_indent_right"},DIV({c:"indent_desc"},SPAN(_("Sub-task")),BR(),SPAN({c:"small_text"},_("Indent Right"))),DIV({c:"indent_shortcut"},t($isMac()?"\u2318":"CTRL"),SPAN({c:"plus"},"+"),t("\u2192")));return e.addItems(i.createItem(n,function(){return o.sendSignal("menu_indent_right"),!1},{extra_class:"menu_indent"}),i.createItem(r,function(){return o.sendSignal("menu_indent_left"),!1},{extra_class:"menu_indent"})),$AEV(document,"click",e.hide),e}},{}],136:[function(e,t,r){"use strict";var n=window,o=n.Signals,a=window,i=a.IstMenu,l=e("./HelperColorsPriorities.js"),s={};r.get=function(){return s.Menu},r.init=function(){var e;return s.Menu=e=new i,$addClass(e.menu_holder,"priority_menu"),e.with_arrow=!0,e.pos_y_offset=7,e.arrow_y_offset=15,e.arrow_x_offset=4,e.addItems(l.createPriorities(function(e){return o.sendSignal("menu_priority_changed",e),!1},!0)),$AEV(document,"click",e.hide),e}},{"./HelperColorsPriorities.js":130}],137:[function(e,t,r){"use strict";var n=window,o=n.Signals,a=window,i=a.IstMenu,l=e("../models/Colors"),s=e("./HelperColorsPriorities.js"),u={};r.get=function(){return u.Menu},r.init=function(){var e;return u.Menu=e=new i,$addClass(e.menu_holder,"color_picker"),e.pos_y_offset=-3,e.pos_x_offset=4,e.addItems(e.colors=s.createColor(l.get(),function(t){return o.sendSignal("color_selected",t),e.hide(),!1})),$addClass(e.colors.view,"projects_list_colors"),$AEV(document,"click",e.hide),e}},{"../models/Colors":149,"./HelperColorsPriorities.js":130}],138:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}var a,i=e("../utils/deps"),l=n(e("react")),s=n(e("react-dom")),u=e("react-redux"),c=n(e("../stores/store")),d=n(e("../react_components/project_picker")),f=e("../react_components/icons"),p=e("../reducers/items"),m=window.IstMenu,h=window.Signals,y=e("./HelpersMenuGeneral.js"),v=e("./HelperMenuAnnotations.js"),g=e("./HelperColorsPriorities.js"),b=e("../components/reminders/Reminders.js"),w=e("../components/items_utils/ItemUniqueLink.js"),E=e("../components/items_utils/ItemCommonEdits"),j=(0,i.defineDeps)("MenuProjectEditor",["ItemSelecter"]),O={init:function(e){return a=new m,a.addItems(m.createItem(_("Add task above"),function(t){return y.menuSaveAndAdd(e.getCurrentSectionList(),!0)(t)},{extra_class:"menu_item_add_above",icon:svgs.get("sm1/add_above.svg"),attr:{
"data-track":"task|more_add_task_above"}}),m.createItem(_("Add task below"),function(t){y.menuSaveAndAdd(e.getCurrentSectionList(),!1)(t)},{extra_class:"menu_item_add_below",icon:svgs.get("sm1/add_below.svg"),attr:{"data-track":"task|more_add_task_below"}}),m.createItem(_("Edit task"),function(){var t=e.getCurrentSectionList();t.saveCurrentItem(t.editCurrentItem)},{extra_class:"menu_item_edit",icon:svgs.get("sm1/edit.svg"),attr:{"data-track":"task|more_edit"}}),m.createSeparator(),a.scheduler_holder={type:"item",view:DIV(),extra_class:"no_hover"},function(){var e=g.createPriorities(function(e){var t=y.getAndResetCurrent(a);t&&E.updatePriority(t,e)},!1);return e.extra_class+=" sel_priorities",e}()),a.addItems(m.createSeparator(),m.createItem(_("Reminders"),function(){var e=y.getAndResetCurrent(a);return b.show(e),!1},{extra_class:"menu_item_reminders",icon:svgs.get("sm1/reminder.svg"),attr:{"data-track":"task|more_reminders"}})),a.addItems(m.createSeparator()),a.moveToProjectItem=TR({c:"sel_move_task menu_item_move menu_item"}),a.addItems(m.createItem(_("Archive task"),function(){var t=e.getCurrentSectionList(),r=y.getAndResetCurrent(a);t&&r&&t.archiveItem(r)},{extra_class:"menu_item_archive",icon:svgs.get("sm1/archive.svg"),attr:{"data-track":"task|more_archive"}}),a.moveToProjectItem,m.createItem(_("Duplicate"),function(){var e=y.getAndResetCurrent(a);return E.duplicate([e.json.id]),!1},{extra_class:"menu_item_duplicate",icon:svgs.get("sm1/add_integration.svg"),attr:{"data-track":"task|more_duplicate"}}),m.createItem(_("Copy link to task"),function(){var e=y.getAndResetCurrent(a);return w.show(e.json),!1},{extra_class:"menu_item_link",icon:svgs.get("sm1/link.svg"),attr:{"data-track":"task|more_link_to_task"}}),m.createSeparator(),m.createItem(_("Delete task"),function(){var t=y.getAndResetCurrent(a);return e.getCurrentSectionList().deleteCurrentItem(t),!1},{extra_class:"sel_delete_task danger",icon:svgs.get("sm1/trash.svg"),attr:{"data-track":"task|more_delete"}})),a.hide_menu_icon=!0,v.schedulerClose(a),a.hide_callbacks.push(function(){$removeClass($all("li","on_menu_show"),"on_menu_show"),s.default.unmountComponentAtNode(a.moveToProjectItem)}),h.connect("hide_editor_menu",function(){a.hide()}),a},get:function(){return a},toggle:function(e,t,r,n){return!e.disabled&&(j.ItemSelecter.deselectAll(),$removeClass($all("li","on_menu_show"),"on_menu_show"),$addClass(e,"on_menu_show"),a.current_holder=e,v.annotateItemEditMenu(e,a),s.default.render(l.default.createElement(u.Provider,{store:c.default},l.default.createElement(d.default,{onSelect:function(t){var r=t.project_id,n=t.section_id;c.default.dispatch((0,p.itemMoveAndReorder)({id:e.json.id,project_id:r,section_id:n})),a.hide(),h.sendSignal("instant_refresh_interface")},selectedProjectId:e.json.project_id,selectedSectionId:e.json.section_id,withSectionSelection:!0},function(e){var t=e.toggle,r=e.buttonProps;return l.default.createElement("td",o({onClick:t,"data-track":"task|more_move_to_project"},r),l.default.createElement("div",{className:"menu_wrapper"},l.default.createElement("span",{className:"menu_icon"},l.default.createElement(f.MoveIcon,null)),l.default.createElement("div",{className:"menu_label"},_("Move to project"))))})),a.moveToProjectItem),a.toggle(t,e,n),!1)}};t.exports=O},{"../components/items_utils/ItemCommonEdits":30,"../components/items_utils/ItemUniqueLink.js":32,"../components/reminders/Reminders.js":78,"../react_components/icons":842,"../react_components/project_picker":955,"../reducers/items":1100,"../stores/store":1140,"../utils/deps":1154,"./HelperColorsPriorities.js":130,"./HelperMenuAnnotations.js":131,"./HelpersMenuGeneral.js":132,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],139:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var l,s=function(e){return e&&e.__esModule?e:{default:e}}(e("../stores/store")),u=e("../reducers/user"),c=window.Signals,d=window.IstMenu,f=e("../components/items_utils/ItemsSortBy.js"),p=e("../components/project_editor/ProjectExtraActions"),m=e("../components/templates/Templates");r.get=function(){return l},r.init=function(e){var t;l=new d;var r=[];return(0,u.isDoistUser)(s.default.getState())&&(r=[d.createItem(_("Add section"),function(){e.getCurrentEditor().showSectionAddForm(),l.hide()},{icon:svgs.get("sm1/add_section.svg")}),d.createSeparator()]),(t=l).addItems.apply(t,n(r).concat([d.createItem(_("Sort by date"),function(){f.sortByDate()},{icon:svgs.get("sm1/calendar.svg"),attr:{"data-track":"project|actions_sort_by_date"}}),d.createItem(_("Sort by priority"),function(){f.sortByPriority()},{icon:svgs.get("sm1/priority_flag.svg"),attr:{"data-track":"project|actions_sort_by_priority"}}),d.createItem(_("Sort by name"),function(){f.sortByName()},{icon:svgs.get("sm1/name.svg"),attr:{"data-track":"project|actions_sort_by_name"}}),d.createItem(_("Sort by responsible"),function(){f.sortByResponsible()},{extra_class:"sort_responsible",icon:svgs.get("sm1/member_big.svg"),attr:{"data-track":"project|actions_sort_by_responsible"}}),d.createSeparator()])),l.addItems(d.createItem(_("Import from template"),function(){return m.showImport(e.getCurrentProjectId()),l.hide(),!1},{icon:svgs.get("sm1/download.svg"),attr:{"data-track":"project|actions_import_from_template"}}),d.createItem(_("Export as a template"),function(){return m.showExportTemplate(e.getCurrentProjectId()),l.hide(),!1},{icon:svgs.get("sm1/upload.svg"),attr:{"data-track":"project|actions_export_as_template"}}),d.createSeparator(),d.createItem(_("Email tasks to this project"),function(){return p.showProjectEmail(e.getCurrentProjectId()),!1},{icon:svgs.get("sm1/mail.svg"),attr:{"data-track":"project|actions_email_tasks"}}),d.createItem(_("Project calendar feed"),function(){return p.showCalFeed(e.getCurrentProjectId()),!1},{icon:svgs.get("sm1/list.svg"),attr:{"data-track":"project|actions_project_calendar_feed"}}),d.createSeparator(),d.createItem(_("Show completed tasks"),function(){return l.hide(),e.getCurrentEditor().showHistory(),!1},{icon:svgs.get("sm1/checkbox_checked.svg"),attr:{"data-track":"project|action_show_completed"}})),$AEV(document,"click",l.hide),c.connect("sort_by_done",function(){l.hide()}),l}},{"../components/items_utils/ItemsSortBy.js":34,"../components/project_editor/ProjectExtraActions":64,"../components/templates/Templates":94,"../reducers/user":1135,"../stores/store":1140}],140:[function(e,t,r){"use strict";var n,o=window.IstMenu,a=e("./HelpersMenuGeneral.js"),i=e("../components/projects_list/ProjectArchive"),l=e("../components/project_editor/ProjectExtraActions"),s=e("../components/sharing/SharingManager"),u=e("../models/ProjectsModel");r.get=function(){return n},r.init=function(e){return n=new o,n.addItems(o.createItem(_("Add project above"),a.menuSaveAndAdd(e,!0),{extra_class:"project_archive_action project_inbox_action",icon:svgs.get("sm1/add_above.svg"),attr:{"data-track":"projects|menu_add_project_above"}}),o.createItem(_("Add project below"),a.menuSaveAndAdd(e,!1),{extra_class:"project_archive_action",icon:svgs.get("sm1/add_below.svg"),attr:{"data-track":"projects|menu_add_project_below"}}),o.createSeparator("project_archive_action"),o.createItem(_("Edit project"),$p(e.saveCurrentItem,e.editCurrentItem),{extra_class:"project_archive_action project_inbox_action",icon:svgs.get("sm1/edit.svg"),attr:{"data-track":"projects|menu_edit"}}),o.createItem(_x("project_menu","Share project"),function(){var e=a.getAndResetCurrent(n);return e&&s.show(e.json.id),!1},{extra_class:"project_archive_action",icon:svgs.get("sm1/add_member.svg"),attr:{"data-track":"projects|menu_share_project"}}),o.createItem(_("Add to favorites"),function(){var e=a.getAndResetCurrent(n);e&&u.update(e.json.id,{is_favorite:1})},{extra_class:"project_add_favorite_action",icon:svgs.get("sm1/heart.svg"),attr:{"data-track":"projects|menu_add_to_favorites"}}),o.createSeparator("project_archive_action project_inbox_action"),o.createItem(_("Email tasks to this project"),function(){var e=a.getAndResetCurrent(n);return l.showProjectEmail(e.json.id)},{extra_class:"project_archive_action",icon:svgs.get("sm1/mail.svg"),attr:{"data-track":"projects|menu_email_tasks"}}),o.createItem(_("Project calendar feed"),function(){var e=a.getAndResetCurrent(n);return l.showCalFeed(e.json.id)},{extra_class:"project_archive_action",icon:svgs.get("sm1/list.svg"),attr:{"data-track":"projects|menu_project_calendar_feed"}}),o.createSeparator("project_archive_action project_inbox_action"),o.createItem(SPAN({id:"menu_archive_text",class:"menu_label"},_("Archive project")),function(){var e=a.getAndResetCurrent(n);if(e){e.json.is_archived?i.unarchive(e):i.archive(e)}return!1},{extra_class:"project_inbox_action",icon:svgs.get("sm1/archive.svg"),attr:{"data-track":"projects|menu_archive"}}),o.createItem(SPAN({id:"menu_delete_text",class:"menu_label"},_("Delete project")),function(){var t=a.getAndResetCurrent(n);return e.deleteCurrentItem(t)},{extra_class:"project_inbox_action danger",icon:svgs.get("sm1/trash.svg"),attr:{"data-track":"projects|menu_delete"}})),n.hide_menu_icon=!0,$AEV(document,"click",n.hide),n}},{"../components/project_editor/ProjectExtraActions":64,"../components/projects_list/ProjectArchive":70,"../components/sharing/SharingManager":87,"../models/ProjectsModel":159,"./HelpersMenuGeneral.js":132}],141:[function(e,t,r){"use strict";var n=window,o=n.Signals,a=window,i=a.IstMenu,l=e("./HelperColorsPriorities.js"),s=["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f","\ud83d\ude04","\ud83d\ude02","\ud83d\ude2e","\ud83d\ude22","\ud83d\ude21","\ud83d\udc4f","\ud83c\udf89"],u={};r.get=function(){return u.Menu},r.getReactions=function(){return s},r.init=function(){var e;return u.Menu=e=new i,$addClass(e.menu_holder,"reactions_menu"),e.with_arrow=!0,e.arrow_fixed=!1,e.pos_y_offset=7,e.arrow_y_offset=15,e.arrow_x_offset=0,e.addItems(l.createReactions(s,function(e){return o.sendSignal("reaction_added",e),!1})),$AEV(document,"click",e.hide),e.hide_callbacks.push(function(){return $removeClass($$(".reactions_sticky"),"reactions_sticky"),!1}),e}},{"./HelperColorsPriorities.js":130}],142:[function(e,t,r){"use strict";var n=window,o=n.IstMenu,a=null;r.get=function(){return a},r.init=function(e){var t;return a=new o,a.pos_x_offset=-12,$addClass(a.menu_holder,"reminders_menu"),a.addItems(o.createItem(_("Date and time"),function(){return e.adder.onChangeInterface("absolute")},{attr:{"data-track":"task_form|reminders_date"},icon:svgs.get("sm1/history.svg")}),t=o.createItem(_("Before task"),function(){return e.adder.onChangeInterface("relative")},{icon:svgs.get("sm1/clock.svg")}),o.createItem(_("Location"),function(){return e.adder.onChangeInterface("location")},{attr:{"data-track":"task_form|reminders_location"},icon:svgs.get("sm1/location_mark.svg")})),a.setRelativePossible=function(e){return e?$show(t.view.parentNode):$hide(t.view.parentNode)},$AEV(document,"click",a.hide),a}},{}],143:[function(e,t,r){"use strict";var n=window,o=n.IstMenu,a=window,i=a.Signals,l={};r.get=function(){return l.Menu},r.init=function(){var e;l.Menu=e=new o;var t=svgs.get("sm1/scheduler_today.svg",{width:20,height:20}),r="".concat((new Date).getDate());return t.querySelector("tspan").textContent=r,e.addItems(o.createItem(_("Move to Today"),function(){i.sendSignal("menu_move_to_today")},{attr:{"data-track":"reschedule|move_to_today"},icon:t}),o.createItem(_("Open Smart Schedule"),function(){i.sendSignal("menu_open_smart_schedule")},{attr:{"data-track":"reschedule|open_smart_schedule"},icon:svgs.get("sm1/smart_schedule.svg")})),e.hide_callbacks.push(function(){i.sendSignal("menu_reschedule_hide")}),$AEV(document,"click",e.hide),e}},{}],144:[function(e,t,r){"use strict";var n=window,o=n.IstMenu,a=window,i=a.Signals,l={};r.get=function(){return l.Menu},r.show=function(e,t,r){var n=r&&!!r.show_assign,o=$$(".menu_item_assign",l.Menu.menu);return n?$addClass(o,"show"):$removeClass(o,"show"),l.Menu.show(e,t,r)},r.hide=function(){return l.Menu.hide()},r.init=function(){var e;return l.Menu=e=new o,$addClass(e.menu_holder,"menu_selecter_more"),e.with_arrow=!0,e.pos_y_offset=3,e.arrow_y_offset=15,e.arrow_x_offset=4,e.addItems(o.createItem(_("Priority"),function(){var e=$$("#item_selecter .menu_item_more")[0];return window.ItemSelecter.showChangePriority(e),!1},{extra_class:"menu_item_priority",icon:svgs.get("sm1/priority_flag.svg")}),o.createItem(_("Assign to someone"),function(){return i.sendSignal("menu_item_assign"),!1},{extra_class:"menu_item_assign",icon:svgs.get("sm1/add_member.svg")}),o.createItem(_("Archive"),function(){return i.sendSignal("menu_selecter_to_history"),!1},{extra_class:"menu_indent menu_item_archive",icon:svgs.get("sm1/archive.svg")}),o.createItem(_("Duplicate"),function(){return i.sendSignal("menu_selecter_duplicate"),!1},{extra_class:"menu_indent menu_item_duplicate",icon:svgs.get("sm1/add_integration.svg")}),o.createItem(_("Delete"),function(){return i.sendSignal("menu_selecter_delete"),!1},{extra_class:"menu_indent menu_item_delete danger",icon:svgs.get("sm1/trash.svg")})),$AEV(document,"click",e.hide),e}},{}],145:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){window.MINI_VERSION?(l.pos_y_offset=0,l.pos_x_offset=5,l.arrow_y_offset=24,l.arrow_x_offset=5):(l.pos_y_offset=0,l.pos_x_offset=10,l.arrow_y_offset=30,l.arrow_x_offset=7)}function i(){var e=UL({class:"menu_buttons priorities"});$add(e,LI({class:"lbl"},_("Apps")));var t=LI({class:"priorities"}),r=function(e,r,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=svgs.get(e+".svg"),l=n({c:"a_priority app_icon fixed_pos",href:o,target:"_blank"},a),s=A(l,i);d.showSimpleText(s,r,null,null,5),$add(t,s)};return s.isMacApp||r("sm1/platform_android",_("Android"),"https://play.google.com/store/apps/details?id=com.todoist",{"data-track":"navigation|gear_android_app"}),r("sm1/platform_apple",_("iPhone"),"https://geo.itunes.apple.com/us/app/todoist-to-do-list-task-manager/id572688855",{"data-track":"navigation|gear_ios_app"}),r("sm1/platform_macos",_("macOS"),"https://geo.itunes.apple.com/us/app/todoist-to-do-list-task-manager/id585829637?mt=12",{"data-track":"navigation|gear_mac_app"}),s.isMacApp||(r("sm1/platform_windows",_("Windows"),"/windows",{"data-track":"navigation|gear_windows_app"}),r("sm1/more",_("More")+"...","/downloads",{"data-track":"navigation|gear_more_apps"})),$add(e,t),e}var l,s=e("../utils/Env"),u=e("../reducers/user"),c=window.Signals,d=window.IstTooltip,f=window.IstMenu,p=window.DateUtils,m=e("../components/opener/WindowOpener.js"),h=e("../models/Config").default,y=e("../mini/Popout"),v=e("../models/SyncEngine"),g=e("../models/VersionUpdater"),b=e("../models/LoadEngine"),w=e("./KeyboardShortcutsDialog"),E=e("../stores/store").default,j=e("../reducers/mainView"),O=j.showActivityView;r.get=function(){return l},r.open=function(e){l.toggle(e),window.MINI_VERSION||window.HAS_MINI_ARGUMENT?$show($all("tr","menu_mini_only")):$hide($all("tr","menu_mini_only")),window.MINI_VERSION||window.HAS_MINI_ARGUMENT?$hide($all("tr","menu_hide_in_mini")):$show($all("tr","menu_hide_in_mini")),window.User.is_biz_admin?$show($all("tr","menu_biz_admin")):$hide($all("tr","menu_biz_admin")),s.isMacApp||(window.User.business_account_id?$hide($all("tr","menu_no_biz_user")):$show($all("tr","menu_no_biz_user"))),(0,u.isPremium)(E.getState())?$hide($all("tr","menu_no_premium_user")):$show($all("tr","menu_no_premium_user"));var t=function(){var e=$("last_synced");if(!e)return void clearTimeout(r);$replace(e,SPAN(BR(),_("Last successful sync:")+" "+p.prettyDate(v.last_synced.getTime(),!0)))},r=setInterval(t,1e3);return t(),!1};var S={en:"https://get.todoist.help/hc/en-us",de:"https://get.todoist.help/hc/de",es:"https://get.todoist.help/hc/es",fr:"https://get.todoist.help/hc/fr",it:"https://get.todoist.help/hc/it",ja:"https://get.todoist.help/hc/ja",ko:"https://get.todoist.help/hc/ko",pl:"https://get.todoist.help/hc/pl",pt_BR:"https://get.todoist.help/hc/pt-br",pt_PT:"https://get.todoist.help/hc/pt-br",ru:"https://get.todoist.help/hc/ru",zh_TW:"https://get.todoist.help/hc/zh-tw",zh_CN:"https://get.todoist.help/hc/zh-cn"};r.init=function(){l=new f,l.with_arrow=!0,l.arrow_fixed=!0,l.show_callbacks.push(a);var e,t;l.addItems(f.createItem(_("Sync"),function(){return v.sync(null,!0,!0),l.hide(),!1},{icon:svgs.get("sm1/sync.svg"),attr:{"data-track":"navigation|gear_sync"}}),t=f.createItem(_("Popout in a window"),function(){return y.launch(),l.hide(),!1},{icon:svgs.get("sm1/popout.svg")}),f.createSeparator("menu_mini_only"),f.createItem(_("Todoist Business Admin"),function(){return window.open("/business/users"),!1},{extra_class:"menu_biz_admin",icon:svgs.get("sm1/job.svg")}),f.createSeparator("menu_biz_admin"),f.createItem(_("Settings"),function(){l.hide(),m.showPrefs()},{icon:svgs.get("sm1/settings.svg"),attr:{"data-track":"navigation|gear_settings"}}),f.createItem(_("Theme"),function(){l.hide(),m.showPrefs("theme")},{extra_class:"menu_theme menu_hide_in_mini",icon:svgs.get("sm1/theme.svg"),attr:{"data-track":"navigation|gear_theme"}}),f.createItem(_("View activity log"),function(){return E.dispatch(O()),l.hide(null,!0),!1},{icon:svgs.get("sm1/activity_log.svg"),attr:{"data-track":"navigation|gear_view_activity_log"}}),f.createItem(_("Print"),function(){return c.sendSignal("open_print_mode"),l.hide(null,!0),!1},{icon:svgs.get("sm1/print.svg"),attr:{"data-track":"navigation|actions_print"}}),f.createSeparator(),f.createItem(_("Todoist Premium"),function(){return window.open("/premium"),!1},{extra_class:"menu_no_biz_user menu_no_premium_user",small_text:_("Reminders, Comments and more\u2026"),icon:svgs.get("sm1/starred.svg")}),f.createItem(_("Todoist Business"),function(){return window.open("/business"),!1},{extra_class:"menu_no_biz_user",icon:svgs.get("sm1/job.svg")}),f.createSeparator("menu_no_biz_user"),f.createItem(_("Support"),function(){return window.open(S[window.LANG]||"https://get.todoist.help"),!1},{icon:svgs.get("sm1/question.svg"),attr:{"data-track":"navigation|gear_support"}}),f.createItem(_("Templates"),function(){return window.open("https://todoist.com/templates/"),!1},{icon:svgs.get("sm1/template.svg"),extra_class:"menu_hide_in_mini",attr:{"data-track":"navigation|gear_templates"}}),f.createItem(_("Blog"),function(){return window.open("https://blog.doist.com/"),!1},{icon:svgs.get("sm1/edit.svg"),attr:{"data-track":"navigation|gear_blog"}}),f.createItem(_("Keyboard shortcuts"),function(){return w.show(),!1},{icon:$isHighDensity()?svgs.get("sm1/keyboard_retina.svg"):svgs.get("sm1/keyboard_non_retina.svg"),attr:{"data-track":"navigation|gear_shortcuts"}}),f.createSeparator(),f.createItem(_("Log out"),function(){b.logout()},{extra_class:"danger",icon:svgs.get("sm1/leave.svg"),attr:{"data-track":"navigation|logout"}}),f.createSeparator(),{type:"item",view:i(),extra_class:"no_hover"},f.createSeparator(),f.createItem(SPAN(_("New version available"),e=SPAN()),g.loadNewVersion,{extra_class:"menu_new_version"}),f.createSeparator("menu_new_version_separator"),{type:"item",view:SPAN(_("Version ")+" "+h.version,". ",A({href:h.isBeta?"https://get.todoist.help/hc/en-us/articles/360008804540":"/changelog",target:"_blank","data-track":"navigation|gear_view_changelog"},_("View changelog")),SPAN({id:"last_synced"})),extra_class:"no_hover version"}),y.isSupported()||$hide(t.view.parentNode),$AEV(document,"click",l.hide),$hide($all("tr","menu_new_version")),$hide($all("tr","menu_new_version_separator")),c.connect("new_version_available",function(t){$show($all("tr","menu_new_version")),$show($all("tr","menu_new_version_separator")),$setHTML(e," ("+t+")")})}},{"../components/opener/WindowOpener.js":53,"../mini/Popout":147,"../models/Config":150,"../models/LoadEngine":157,"../models/SyncEngine":169,"../models/VersionUpdater":174,"../reducers/mainView":1109,"../reducers/user":1135,"../stores/store":1140,"../utils/Env":1144,"./KeyboardShortcutsDialog":133}],146:[function(e,t,r){"use strict";Object.defineProperty(window,"MINI_VERSION",{get:function(){return window.innerWidth<750}})},{}],147:[function(e,t,r){"use strict";e("./MiniVersion");var n={isSupported:function(){var e=window.location.host;return"chrome.todoist.com"===e||"firefox.todoist.com"===e||top!=window},launch:function(){return n._popout("".concat(window.location),"Todoist",500,560),!1},_popout:function(e,t,r,n){var o=screen.width/2-r/2,a=screen.height/2-n/2;return window.open("/app?mini=2",t,"toolbar=no, scrollbars=yes, width=".concat(r,", height=").concat(n,", top=").concat(a,", left=").concat(o))}};window.Popout=t.exports=n},{"./MiniVersion":146}],148:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){return e&&e.__esModule?e:{default:e}}(e("../stores/store")),s=e("../reducers/collaborators"),u=e("../utils/deps"),c=window,d=c.Signals,f=e("./Storage"),p=f.$storage,m=e("./TemporaryIds"),h=e("./SyncEngine"),_=e("../utils/partialMatchName").default,y=(0,u.defineDeps)("Collaborators",["ItemsModel","RemindersModel","ProjectsModel"]),v=function(){function e(){var t=this;n(this,e),i(this,"receiveBridgeUpdate",function(e){var r=e.collaborators;r&&(t.collaborators=r.all,t.projects_active=r.byPID,t.projects_invited=r.invitedByPID,t.syncCachedData({bridgeUpdate:!1}))}),this.initState=this.initState.bind(this),this.syncLocalModel=this.syncLocalModel.bind(this),this.searchByName=this.searchByName.bind(this),this.getByEmail=this.getByEmail.bind(this),this.resolveTempId=this.resolveTempId.bind(this),this.addInvite=this.addInvite.bind(this),this._addToInvitedList=this._addToInvitedList.bind(this),this.cleanProjectState=this.cleanProjectState.bind(this),this.deleteFromProject=this.deleteFromProject.bind(this),this.getUserById=this.getUserById.bind(this),this.isProjectShared=this.isProjectShared.bind(this),this.getAll=this.getAll.bind(this),this.getCount=this.getCount.bind(this),this.getInvitedUsers=this.getInvitedUsers.bind(this),this.getActiveUsers=this.getActiveUsers.bind(this),this.clearCache=this.clearCache.bind(this),this.syncCachedData=this.syncCachedData.bind(this),this.sendBridgeUpdate=this.sendBridgeUpdate.bind(this),this.loadData=this.loadData.bind(this),this.loadCachedData=this.loadCachedData.bind(this),this._genericGet=this._genericGet.bind(this),this.initState(),d.connect("load_cached_data",function(){return t.loadCachedData()}),d.connect("resolve_temp.collaborator",function(e,r){return t.resolveTempId(e,r)}),d.connect("clear_local_data",this.initState),d.connect("bridge:redux_update",this.receiveBridgeUpdate)}return a(e,[{key:"initState",value:function(){this.get_all_cache={},this.collaborators={},this.projects_active={},this.projects_invited={}}}]),a(e,[{key:"syncLocalModel",value:function(e,t){var r=this.collaborators,n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;r[s.id]=s}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}var u=this.projects_active,c=this.projects_invited,f=!0,p=!1,h=void 0;try{for(var _,v=t[Symbol.iterator]();!(f=(_=v.next()).done);f=!0){var g,b=_.value,w=b.user_id,E=b.project_id,j=b.state,O=!1,S=!1;if("active"===j?(g=u[E],g||(g=u[E]={}),g[w]=1,O=!0):"invited"===j?(this._addToInvitedList(E,w),S=!0):"deleted"!==j&&"inactive"!==j||(S=!0,O=!0),S&&(g=u[E])&&g[w]&&delete g[w],O){var P=c[E];P&&P[w]&&delete P[w]}}}catch(e){p=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}if(t.length>0){var I;for(var k in c){var T=c[k],C=$keys(T);if(0!==C.length){var D=!0,A=!1,M=void 0;try{for(var x,R=C[Symbol.iterator]();!(D=(x=R.next()).done);D=!0){var N=x.value;"string"==typeof N&&0===N.indexOf("_")&&(delete T[N],(I=m.getRealId(N))&&(T[I]=1))}}catch(e){A=!0,M=e}finally{try{D||null==R.return||R.return()}finally{if(A)throw M}}}else delete c[k]}var L=!0,$=!1,U=void 0;try{for(var B,V=y.ItemsModel.getAll()[Symbol.iterator]();!(L=(B=V.next()).done);L=!0){var F=B.value,H=F.responsible_uid;"string"==typeof H&&0===H.indexOf("_")&&(I=m.getRealId(H),F.responsible_uid=I||null)}}catch(e){$=!0,U=e}finally{try{L||null==V.return||V.return()}finally{if($)throw U}}d.sendSignal("collaborators_states_updated"),this.clearCache()}this.syncCachedData()}},{key:"searchByName",value:function(e){var t=this;return function(){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=$values(t.collaborators)[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;_(e,s.full_name)&&r.push(s)}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}()}},{key:"getByEmail",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=$values(this.collaborators)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(i.email===e)return i}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return null}},{key:"resolveTempId",value:function(e,t){var r=this.collaborators,n=r[e];if(n){var o;delete r[e],n.id=t;var a=this.getByEmail(n.email);a&&(a.id=t);var i=!0,l=!1,s=void 0;try{for(var u,c=$values(y.RemindersModel.model_data)[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value;o=!1,d.notify_uid===e&&(d.notify_uid=t,o=!0),o&&y.RemindersModel.syncCachedData()}}catch(e){l=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}this.syncCachedData()}}},{key:"addInvite",value:function(e,t){var r,n=this.getByEmail(t);n?(r=null,this._addToInvitedList(e,n.id)):(n={email:t,full_name:t.split("@")[0]},r=n.id=m.generate("collaborator"),this.collaborators[n.id]=n,r=n.id,this._addToInvitedList(e,r));var o=y.ProjectsModel.get(e);o&&(h.queueUpdate({type:"share_project",temp_id:r,args:{project_id:e,email:t,name:o.name}}),d.sendSignal("project_shared",e,t),d.sendSignal("instant_refresh_interface"))}},{key:"_addToInvitedList",value:function(e,t){if(window.User.id!==t){var r=this.projects_invited,n=r[e];n||(n=r[e]={}),n[t]=1;var o=y.ProjectsModel.get(e);o&&!o.shared&&y.ProjectsModel.updateLocalFields(i({},o.id,{shared:!0})),this.clearCache()}}},{key:"cleanProjectState",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!1;this.projects_invited[e]&&(delete this.projects_invited[e],r=!0),this.projects_active[e]&&(delete this.projects_active[e],r=!0),r&&t&&(this.clearCache(),this.syncCachedData())}},{key:"deleteFromProject",value:function(e,t){var r=y.ProjectsModel.get(e),n=t.id;n=m.getRealId(n);var o=this.projects_invited[e];o&&o[n]&&delete o[n];var a=this.projects_active[e];a&&a[n]&&delete a[n],$keys(a).length+$keys(o).length<=1&&(this.cleanProjectState(e,!1),(r=y.ProjectsModel.get(e))&&r.shared&&y.ProjectsModel.updateLocalFields(i({},r.id,{shared:!1}))),h.queueUpdate({type:"delete_collaborator",args:{project_id:e,email:t.email}}),this.clearCache(),d.sendSignal("instant_refresh_interface")}},{key:"getUserById",value:function(e){return this.collaborators[e]}},{key:"isProjectShared",value:function(e){return(0,s.isShared)(l.default.getState(),e)}},{key:"getAll",value:function(e){if(this.get_all_cache[e])return this.get_all_cache[e];var t=this.getInvitedUsers(e),r=this.getActiveUsers(e),n=t.concat(r),o={},a=[];o[window.User.email]=!0;var i=!0,l=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value;o[d.email]||(a.push(d),o[d.email]=!0)}}catch(e){l=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}return a=this.sort(a),a.splice(0,0,window.User),this.get_all_cache[e]=a,a}},{key:"getCount",value:function(){return $keys(this.collaborators).length}},{key:"getInvitedUsers",value:function(e){return this._genericGet(e,this.projects_invited)}},{key:"getActiveUsers",value:function(e){return this._genericGet(e,this.projects_active)}},{key:"clearCache",value:function(){this.get_all_cache={}}},{key:"syncCachedData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bridgeUpdate,r=void 0===t||t;p("CollaboratorsU").set(this.collaborators),p("CollaboratorsA").set(this.projects_active),p("CollaboratorsI").set(this.projects_invited),r&&this.sendBridgeUpdate()}},{key:"sendBridgeUpdate",value:function(){d.sendSignal("bridge:model_update",{collaborators:{all:this.collaborators,byPID:this.projects_active,invitedByPID:this.projects_invited}})}},{key:"loadData",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.collaborators[i.id]=i}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}this.syncCachedData()}},{key:"loadCachedData",value:function(){var e=p("CollaboratorsU").get();e&&(this.collaborators=e);var t=p("CollaboratorsA").get();t&&(this.projects_active=t);var r=p("CollaboratorsI").get();r&&(this.projects_invited=r),this.sendBridgeUpdate()}},{key:"_genericGet",value:function(e,t){var r=this.collaborators,n=[];if(t[e]){var o=!0,a=!1,i=void 0;try{for(var l,s=$keys(t[e])[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,c=r[u];c&&!c.is_deleted&&n.push(c)}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}}return n=this.sort(n)}},{key:"sort",value:function(e){return e.sort(function(e,t){var r=e.full_name.toLowerCase(),n=t.full_name.toLowerCase();return r.localeCompare(n)})}}]),e}();window.Collaborators=new v,t.exports=window.Collaborators},{"../reducers/collaborators":1086,"../stores/store":1140,"../utils/deps":1154,"../utils/partialMatchName":1195,"./Storage":167,"./SyncEngine":169,"./TemporaryIds":172}],149:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.START_INDEX=r.DEFAULT_COLOR=r.getHex=r.normalizeToOld=r.normalizeToNew=r.get=r.PRIORITY_COLORS=void 0;r.DEFAULT_COLOR=47;r.START_INDEX=30;var n={4:"#DE4C4A",3:"#F49C18",2:"#4073d6",1:"#808080"};r.PRIORITY_COLORS=n;var o=(_("Berry Red"),_("Red"),_("Orange"),_("Yellow"),_("Olive Green"),_("Lime Green"),_("Green"),_("Mint Green"),_("Teal"),_("Sky Blue"),_("Light Blue"),_("Blue"),_("Grape"),_("Violet"),_("Lavender"),_("Magenta"),_("Salmon"),_("Charcoal"),_("Grey"),_("Taupe"),[{name:"Berry Red",hex:"#b8255f"},{name:"Red",hex:"#db4035"},{name:"Orange",hex:"#ff9933"},{name:"Yellow",hex:"#fad000"},{name:"Olive Green",hex:"#afb83b"},{name:"Lime Green",hex:"#7ecc49"},{name:"Green",hex:"#299438"},{name:"Mint Green",hex:"#6accbc"},{name:"Teal",hex:"#158fad"},{name:"Sky Blue",hex:"#14aaf5"},{name:"Light Blue",hex:"#96c3eb"},{name:"Blue",hex:"#4073ff"},{name:"Grape",hex:"#884dff"},{name:"Violet",hex:"#af38eb"},{name:"Lavender",hex:"#eb96eb"},{name:"Magenta",hex:"#e05194"},{name:"Salmon",hex:"#ff8d85"},{name:"Charcoal",hex:"#808080"},{name:"Grey",hex:"#b8b8b8"},{name:"Taupe",hex:"#ccac93"}]),a={0:35,1:46,2:32,3:33,4:40,5:49,6:44,7:48,8:46,9:32,10:37,11:39,12:45,13:30,14:31,15:36,16:37,17:38,18:39,19:41,20:47,21:47},i={};for(var l in a)i[a[l]]=l;var s={0:36,1:34,2:31,3:45,4:43,5:41,6:38,7:47,8:38,9:37,10:30,11:35,12:47},u={}
;for(var c in s)u[s[c]]=c;var d=function(){return o};r.get=d;var f=function(e,t){var r;return r="project"==e?a:s,t>=30&&t<=49?t:void 0!=r[t]?parseInt(r[t]):47};r.normalizeToNew=f;var p=function(e,t){var r;return r="project"==e?i:u,"project"==e&&0<=t&&t<=21?t:("label"==e||"filter"==e)&&0<=t&&t<=12?t:void 0!=r[t]?parseInt(r[t]):7};r.normalizeToOld=p;var m=function(e,t){return t=f(e,t),t-=30,o[t].hex};r.getHex=m;var h={PRIORITY_COLORS:n,get:d,normalizeToNew:f,normalizeToOld:p,getHex:m,DEFAULT_COLOR:47,START_INDEX:30};r.default=h},{}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.version=e.version,this.isBeta=e.isBeta,this.smartScheduleDomain=e.smartScheduleDomain,this.loadStartPage=e.loadStartPage,this.disablePromotion=e.disablePromotion,this.onIntialized=e.onIntialized}},o=n;r.default=o},{}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.start=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../stores/store")),o=e("../reducers/tooltip"),a=e("../reducers/clock"),i=e("../utils"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../logger/Logger.js")),s=function(){try{fetch("/sync/v8/tooltips/get_scheduled?token=".concat(window.User.token)).then(function(e){if(200!=e.status){var t=new Error(e.statusText);throw t.jsonRes=e,t}return e.json()}).then(function(e){e.result&&e.result instanceof Array&&n.default.dispatch((0,o.scheduledUpdated)(Array.from(e.result)))}).catch(function(){})}catch(e){throw l.captureError(e),e}},u=function(){try{fetch("/sync/v8/tooltips/get_seen_list?token=".concat(window.User.token)).then(function(e){if(200!=e.status){var t=new Error(e.statusText);throw t.jsonRes=e,t}return e.json()}).then(function(e){e.result&&e.result instanceof Array&&n.default.dispatch((0,o.seenUpdated)(e.result))}).catch(function(){})}catch(e){throw l.captureError(e),e}},c=function e(){s(),u(),setTimeout(e,864e5)},d=function(){var e=(0,i.todayISO)();setInterval(function(){var t=(0,i.todayISO)();e!==t&&(e=t,n.default.dispatch((0,a.tick)()))},3e3)},f=function(){c(),d()};r.start=f},{"../logger/Logger.js":129,"../reducers/clock":1085,"../reducers/tooltip":1133,"../stores/store":1140,"../utils":1176}],152:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.getOffsetDate=void 0;var d=e("../utils"),f=e("../logger/Logger"),p=n(e("moment-timezone")),m=n(e("../utils/toISODateString")),h=e("../utils/timezones"),_=window.DateUtils,y=function(e){var t=new Date(e);return t.setSeconds(59),t},v=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,g=/^(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)Z*/,b=function(e,t,r){return e instanceof Date&&(0,d.isNumber)(t)&&(0,d.isNumber)(r)?new Date(e.getTime()+60*r*1e3-60*t*1e3):null};r.getOffsetDate=b;var w=function(){function e(t){var r=t.date,n=t.timezone,a=t.is_recurring,i=t.string,l=t.lang;s(this,e),this.date=r,this.timezone=n||null,this.is_recurring=!!a,this.string=i,this.lang=l;var u=v.exec(r);if(u){var c=u.slice(1,4).map(function(e){return parseInt(e)}),d=o(c,3),f=d[0],p=d[1],m=d[2];return this._date=new Date(f,p-1,m,23,59,59,0),this.with_time=!1,this.timezone_offset=null,Object.freeze(this)}var _=g.exec(r);if(!_)throw new Error("Unsupported date string format: "+r);this.with_time=!0;var y=_.slice(1,7).map(function(e){return parseInt(e)}),b=o(y,6),w=b[0],E=b[1],j=b[2],O=b[3],S=b[4],P=b[5];return n?(this._date=new Date(Date.UTC(w,E-1,j,O,S,P)),this.timezone_offset=(0,h.getTimezoneOffset)(n,this._date,{useUTC:!0})):(this._date=new Date(w,E-1,j,O,S,P),this.timezone_offset=null),Object.freeze(this)}return c(e,[{key:"inheritDate",value:function(e){var t=e.year,r=e.month,n=e.day,o=e.hours,a=e.minutes,i=e.seconds,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=l.withTime,u=l.timezone,c=void 0===u?null:u,f=this._createWritableClone();return(0,d.isNumber)(t)&&(0,d.isNumber)(r)&&(0,d.isNumber)(n)&&(!s||(0,d.isNumber)(o)&&(0,d.isNumber)(a)&&(0,d.isNumber)(i))?(f._date=f._toTimezoneDate(),f._date.setDate(1),f._date.setFullYear(t),f._date.setMonth(r),f._date.setDate(n),s&&(f.timezone=c,f._date.setHours(o,a,i),f.with_time=59!==i),f.with_time&&f.timezone?(f._date=p.default.tz((0,m.default)(f._date),(0,h.getTimezoneName)(f.timezone)),f.timezone_offset=-f._date.utcOffset(),f._date=f._date.toDate()):f.timezone_offset=null,f.is_recurring||(f.string=_.format(f._toTimezoneDate()),f.lang=window.DATEIST_LANG||"en"),f.date=(0,m.default)(f._date,{toUTC:!!f.timezone,dateOnly:!f.with_time}),Object.freeze(f)):Object.freeze(f)}},{key:"changeTime",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.timezone;if(!(0,d.isNumber)(e)||!(0,d.isNumber)(t)||!(0,d.isNumber)(r))return Object.freeze(this._createWritableClone());var a=this._toTimezoneDate();return this.inheritDate({year:a.getFullYear(),month:a.getMonth(),day:a.getDate(),hours:e,minutes:t,seconds:r},{withTime:!0,timezone:o})}},{key:"changeTimezone",value:function(e){var t=this._toTimezoneDate();return this.inheritDate({year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds()},{withTime:!0,timezone:e})}},{key:"nextRecurrence",value:function(){if(!this.is_recurring)throw new Error("nextRecurrence() can only be called on a recurring DateExt");var t={us_dates:_.isUsDates()&&1||0,am_pm:_.isAmPm()&&1||0,start_day:_.startDay(),next_week:_.nextWeek(),task_date:this._toTimezoneDate()},r="en"==this.lang?["en"]:[this.lang,"en"],n=Dateist.parse_multiple(this.string,r,t);return n.end_reached?[this,!0]:(n.error&&(n=Dateist.parse("tomorrow")),[e.fromDateist(n,{timezone:this.timezone}),!1])}},{key:"postpone",value:function(){if(this.is_recurring){var e=this.nextRecurrence(),t=o(e,2),r=t[0];return t[1]?"END_REACHED":r}var n,a=new Date;return this.isGreaterThanOrEqual(a)?(n=new Date(this.getTime()),n.setDate(n.getDate()+1)):(n=new Date(a),n.setDate(n.getDate()+1)),this.inheritDate({year:n.getFullYear(),month:n.getMonth(),day:n.getDate()},{timezone:this.timezone})}},{key:"toAPIFormat",value:function(){var e=Object.assign({},this);return delete e.with_time,delete e._date,delete e.timezone_offset,e.date.match(/^(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):(\d\d):59Z*/)&&(0,f.captureMessageWithTrace)("warning (DateExt): deprecated YYYY-MM-DDTHH:MM:59Z in use",{extra:{date:e}}),e}},{key:"format",value:function(e){var t=e.inTimezoneTime,r=e.onlyTime,n=t?this._toTimezoneDate():this._date;return r?$strip(_.getHourAndMin(n)):_.format(n)}},{key:"relativeFormat",value:function(){var e=DateistDateHelpers.day_diff(new Date,this);return _.humanizeDayDiff(e,this)}},{key:"isSameDate",value:function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()}},{key:"isGreaterThan",value:function(t){return e.compare(this,t)>0}},{key:"isGreaterThanOrEqual",value:function(t){var r=e.compare(this,t);return r>0||0==r}},{key:"isLessThan",value:function(t){return e.compare(this,t)<0}},{key:"isLessThanOrEqual",value:function(t){var r=e.compare(this,t);return r<0||0==r}},{key:"toDate",value:function(){return new Date(this._date)}},{key:"_toTimezoneDate",value:function(){return this.timezone&&(0,d.isNumber)(this.timezone_offset)?b(this._date,-this._date.getTimezoneOffset(),-this.timezone_offset):this.toDate()}},{key:"dateMin",value:function(){var e=new Date(this._date);return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e}},{key:"_createWritableClone",value:function(){var t=Object.getOwnPropertyDescriptors(this);return t=(0,d.mapValues)(t,function(e){if(e.value instanceof Date){var t=new Date(e.value);return Object.assign({},e,{value:t,writable:!0,configurable:!0})}return Object.assign({},e,{writable:!0,configurable:!0})}),Object.create(e.prototype,t)}},{key:"getFullYear",value:function(){return Date.prototype.getFullYear.call(this._date)}},{key:"getYear",value:function(){return Date.prototype.getYear.call(this._date)}},{key:"getMonth",value:function(){return Date.prototype.getMonth.call(this._date)}},{key:"getDate",value:function(){return Date.prototype.getDate.call(this._date)}},{key:"getDay",value:function(){return Date.prototype.getDay.call(this._date)}},{key:"getHours",value:function(){return Date.prototype.getHours.call(this._date)}},{key:"getMinutes",value:function(){return Date.prototype.getMinutes.call(this._date)}},{key:"getSeconds",value:function(){return Date.prototype.getSeconds.call(this._date)}},{key:"getMilliseconds",value:function(){return Date.prototype.getMilliseconds.call(this._date)}},{key:"getUTCFullYear",value:function(){return Date.prototype.getUTCFullYear.call(this._date)}},{key:"getUTCMonth",value:function(){return Date.prototype.getUTCMonth.call(this._date)}},{key:"getUTCDate",value:function(){return Date.prototype.getUTCDate.call(this._date)}},{key:"getUTCDay",value:function(){return Date.prototype.getUTCDay.call(this._date)}},{key:"getUTCHours",value:function(){return Date.prototype.getUTCHours.call(this._date)}},{key:"getUTCMinutes",value:function(){return Date.prototype.getUTCMinutes.call(this._date)}},{key:"getUTCSeconds",value:function(){return Date.prototype.getUTCSeconds.call(this._date)}},{key:"getUTCMilliseconds",value:function(){return Date.prototype.getUTCMilliseconds.call(this._date)}},{key:"getTimezoneFullYear",value:function(){return Date.prototype.getFullYear.call(this._toTimezoneDate())}},{key:"getTimezoneYear",value:function(){return Date.prototype.getYear.call(this._toTimezoneDate())}},{key:"getTimezoneMonth",value:function(){return Date.prototype.getMonth.call(this._toTimezoneDate())}},{key:"getTimezoneDate",value:function(){return Date.prototype.getDate.call(this._toTimezoneDate())}},{key:"getTimezoneDay",value:function(){return Date.prototype.getDay.call(this._toTimezoneDate())}},{key:"getTimezoneHours",value:function(){return Date.prototype.getHours.call(this._toTimezoneDate())}},{key:"getTimezoneMinutes",value:function(){return Date.prototype.getMinutes.call(this._toTimezoneDate())}},{key:"getTimezoneSeconds",value:function(){return Date.prototype.getSeconds.call(this._toTimezoneDate())}},{key:"getTimezoneMilliseconds",value:function(){return Date.prototype.getMilliseconds.call(this._toTimezoneDate())}},{key:"getTime",value:function(){return Date.prototype.getTime.call(this._date)}},{key:"getTimezoneOffset",value:function(){return Date.prototype.getTimezoneOffset.call(this._date)}},{key:"isInPast",get:function(){var e=new Date;return this.isLessThan(e)}},{key:"isInFuture",get:function(){var e=new Date;return this.isGreaterThan(e)}}],[{key:"fromDateist",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.timezone,o=void 0===n?null:n;if(!t.due_date)throw new Error("Cannot create DateExt with invalid dateist result");var a=t.due_date,i=59!==a.getSeconds(),l=null;i&&o&&(a=p.default.tz((0,m.default)(a),(0,h.getTimezoneName)(o)),l=-a.utcOffset(),a=a.toDate());var s=(0,m.default)(a,{toUTC:!!o,dateOnly:!i}),u={_date:{value:a,enumerable:!0},lang:{value:t.date_lang,enumerable:!0},with_time:{value:i,enumerable:!0},is_recurring:{value:t.is_recurring,enumerable:!0},string:{value:t.date_string,enumerable:!0},date:{value:s,enumerable:!0},timezone:{value:o,enumerable:!0},timezone_offset:{value:l,enumerable:!0}};return u=Object.create(e.prototype,u),Object.freeze(u)}},{key:"fromDate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.timezone,o=void 0===n?null:n,a=r.withTime,i=void 0!==a&&a;if(isNaN(t.getTime()))throw new Error("Cannot create DateExt from an invalid Date",t);i||(t=y(t),o=null);var l=_.format(t),s=_.getDateistLang(),u=null;o&&(t=p.default.tz((0,m.default)(t),(0,h.getTimezoneName)(o)),u=-t.utcOffset(),t=t.toDate());var c=(0,m.default)(t,{toUTC:!!o,dateOnly:!i}),d={_date:{value:t,enumerable:!0},lang:{value:s,enumerable:!0},with_time:{value:i,enumerable:!0},is_recurring:{value:!1,enumerable:!0},string:{value:l,enumerable:!0},date:{value:c,enumerable:!0},timezone:{value:o,enumerable:!0},timezone_offset:{value:u,enumerable:!0}};return d=Object.create(e.prototype,d),Object.freeze(d)}},{key:"compare",value:function(t,r){var n=t instanceof e?t._date:t,o=r instanceof e?r._date:r;return n.getTime()-o.getTime()}}]),e}();r.default=w},{"../logger/Logger":129,"../utils":1176,"../utils/timezones":1204,"../utils/toISODateString":1206,"moment-timezone":"moment-timezone"}],153:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../stores/subscribeSelected")),l=window.Signals,s=window.Dateist,u=function(e){return e.toLowerCase().substring(0,2)},c={da:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsDA-89be2e.js",de:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsDE-4461e9.js",en:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsEN-b50420.js",es:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsES-8d9fac.js",fi:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsFI-a4ea96.js",fr:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsFR-6f873e.js",it:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsIT-4c39c9.js",ja:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsJA-2a152c.js",ko:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsKO-da4713.js",nl:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsNL-ef95ab.js",pl:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsPL-bd8233.js",pt:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsPT-1777ed.js",ru:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsRU-9d5e29.js",sv:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsSV-243268.js",zh:"https://d3ptyyxy2at9ui.cloudfront.net/DateistDefsZH-806181.js"},d=function(){function e(){n(this,e),this.loadStatus={en:Promise.resolve()},window.DATEIST_LANG&&(this.loadStatus[window.DATEIST_LANG]=Promise.resolve())}return a(e,[{key:"init",value:function(e){var t=this;(0,i.default)(e,function(e){return e.dateistLangs},function(e){for(var r in e)e.hasOwnProperty(r)&&t.loadLang(r)})}},{key:"loadLang",value:function(e){if(e=u(e),!c[e])return Promise.reject(new Error("Unable to load unknown lange: ".concat(e)));if(this.loadStatus[e])return this.loadStatus[e];var t=new Promise(function(t,r){var n=SCRIPT({src:c[e],async:!0});n.onload=function(){t(),s.cache={},l.sendSignal("refresh_interface")},n.onerror=function(e){r(e)},$add($body(),n)});return this.loadStatus[e]=t,t}}]),e}(),f=new d;r.default=f},{"../stores/subscribeSelected":1141}],154:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../reducers/filters"),l=e("../stores/store").default,s=function(){function e(){n(this,e),this.getById=this.getById.bind(this),this.get=this.get.bind(this),this.getAll=this.getAll.bind(this),this.getByName=this.getByName.bind(this)}return a(e,[{key:"getById",value:function(e){return this.get(e)}},{key:"get",value:function(e){return(0,i.filterGetByID)(l.getState(),e)}},{key:"getAll",value:function(){return(0,i.filterGetAll)(l.getState())}},{key:"getByName",value:function(e){return(0,i.filterGetByName)(l.getState(),e)}}]),e}();t.exports=new s},{"../reducers/filters":1095,"../stores/store":1140}],155:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var f=e("../reducers/items"),p=window,m=p.Signals,h=function(){function e(){u(this,e),this.getAll=this.getAll.bind(this),this.getAllOwn=this.getAllOwn.bind(this),this.getById=this.getById.bind(this),this.getBySyncId=this.getBySyncId.bind(this),this.getChildren=this.getChildren.bind(this),this.getByName=this.getByName.bind(this),this.add=this.add.bind(this),this.deleteItem=this.deleteItem.bind(this),this.update=this.update.bind(this),this.updateDayOrders=this.updateDayOrders.bind(this),this.moveMultiple=this.moveMultiple.bind(this),this.complete=this.complete.bind(this),this.uncomplete=this.uncomplete.bind(this),this.addLabel=this.addLabel.bind(this),this.removeLabel=this.removeLabel.bind(this)}return d(e,null,[{key:"initClass",value:function(){this.prototype.max_indent=5,this.prototype.max_chars_for_content=2048}}]),d(e,[{key:"getAll",value:function(){return(0,f.itemGetUncompleted)(_().getState())}},{key:"getAllOwn",value:function(){return(0,f.itemGetOwn)(_().getState())}},{key:"getById",value:function(e){return(0,f.itemGetByID)(_().getState(),e)}},{key:"getBySyncId",value:function(e){return(0,f.itemGetBySyncID)(e,_().getState())}},{key:"getChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.with_parent,n=void 0!==r&&r,o=t.sorted,i=void 0!==o&&o,l=_().getState(),s=(0,f.itemGetChildren)(e.id,l,{sorted:i});return n?[e].concat(a(s)):s}},{key:"getByName",value:function(e,t){return(0,f.itemGetByName)(e,_().getState(),t)}},{key:"itemGetSectionGroups",value:function(e){return(0,f.itemGetSectionGroups)(e,_().getState())}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _().dispatch((0,f.itemAdd)(e,t))}},{key:"itemGetMaxTopLevelChildOrder",value:function(e){return(0,f.itemGetMaxTopLevelChildOrder)(e,_().getState())}},{key:"deleteItem",value:function(e){return _().dispatch((0,f.itemDelete)(e))}},{key:"update",value:function(e,t){var r=this.getById(e),o=_().dispatch((0,f.itemUpdate)(n({},t,{id:e}))),a=r!==o;return a&&m.sendSignal("item_updated",o),[o,a]}},{key:"updateDayOrders",value:function(e){_().dispatch((0,f.itemUpdateDayOrder)(e))}},{key:"updateDue",value:function(e){return _().dispatch((0,f.itemUpdateDue)(e))}},{key:"moveMultiple",value:function(e,t,r){return _().dispatch((0,f.itemMoveMultiple)(e,t,r))}},{key:"complete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _().dispatch((0,f.itemComplete)(e.id,{force_history:t}))}},{key:"uncomplete",value:function(e){return _().dispatch((0,f.itemUncomplete)(e.id)),this.getById(e.id)}},{key:"archive",value:function(e){return _().dispatch((0,f.itemArchive)(e))}},{key:"unarchive",value:function(e){return _().dispatch((0,f.itemUnarchive)(e))}},{key:"addLabel",value:function(e,t){if(!e.labels.includes(t.name)){var r=[].concat(a(e.labels),[t.name]);return this.update(e.id,{labels:r})}}},{key:"removeLabel",value:function(e,t){if(e.labels.includes(t.name)){var r=e.labels.filter(function(e){return e!==t.name});return this.update(e.id,{labels:r})}}},{key:"getTotalCompletedCount",value:function(){return _().getState().stats.completed_count}},{key:"moveAndReorder",value:function(e,t,r){_().dispatch((0,f.itemMoveAndReorder)(e,t,r))}}]),e}();h.initClass();var _=function(){return e("../stores/store").default};window.ItemsModel=new h,t.exports=window.ItemsModel},{"../reducers/items":1100,"../stores/store":1140}],156:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../reducers/labels"),l=e("../utils"),s=window,u=s.Signals,c=e("./UtilModels"),d=e("../stores/store").default,f=function(){function e(){n(this,e),this.syncLocalModel=this.syncLocalModel.bind(this),this.getOrAdd=this.getOrAdd.bind(this),this.getAll=this.getAll.bind(this),this.getById=this.getById.bind(this),this.getDataLabels=this.getDataLabels.bind(this),this.getByName=this.getByName.bind(this),this.add=this.add.bind(this),this.get=this.get.bind(this),this.update=this.update.bind(this),this.deleteLabel=this.deleteLabel.bind(this),this.deleteMany=this.deleteMany.bind(this),this.getLabels=this.getLabels.bind(this),this.updateOrders=this.updateOrders.bind(this)}return a(e,null,[{key:"initClass",value:function(){this.prototype.re_labels=/(^|\s+)@([^\s,]+)/g,this.prototype.max_limit=500}}]),a(e,[{key:"syncLocalModel",value:function(e){e.length>0&&u.sendSignal("labels_updated",e)}},{key:"getOrAdd",value:function(e){e=this.normalizeName(e);var t=this.get(e);if(!t){var r=(0,i.labelGetMaxOrder)(d.getState())+1;t=d.dispatch((0,i.labelAdd)({name:e,item_order:r}))}return t}},{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=$values(d.getState().labels);return e&&(t=t.sort(c.sortByItemOrder)),t}},{key:"getById",value:function(e){return(0,i.labelGetByID)(d.getState(),e)}},{key:"getDataLabels",value:function(e){if(!e.labels)return[];var t=[],r=!0,n=!1,o=void 0;try{for(var a,i=e.labels[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,s=this.getById(l);s&&t.push("@".concat(s.name))}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}},{key:"getByName",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]){var t=(0,i.labelGetByName)(e,{caseSensitive:!1},d.getState());return t?[t]:[]}return(0,i.labelGetBySearch)(d.getState(),e)}},{key:"normalizeName",value:function(e){return e=e.replace(/[<>"=#+\s%!?~:@,()&]+/g,"_")}},{key:"add",value:function(e){return(0,i.labelGetCount)(d.getState())>=this.max_limit?void alert((0,l.format)(_n("For performance reasons you can add at most one label.","For performance reasons you can add at most {n} labels.",this.max_limit),{n:this.max_limit})):(e.item_order||(e.item_order=(0,i.labelGetMaxOrder)(d.getState())+1),d.dispatch((0,i.labelAdd)(e)))}},{key:"get",value:function(e){return(0,i.labelGetByName)(e,{caseSensitive:!1},d.getState())}},{key:"update",value:function(e,t){t.name&&(t.name=this.normalizeName(t.name));var r=this.getById(e);if(r)return d.dispatch((0,i.labelUpdate)(e,t)),r=this.getById(e)}},{key:"deleteLabel",value:function(e){this.getById(e)&&d.dispatch((0,i.labelRemove)(e))}},{key:"deleteMany",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.deleteLabel(i)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"getLabels",value:function(e){var t=this,r=e.content,n=[],o=function(r,o,a){return e.labels_to_ignore&&e.labels_to_ignore[a]?r:(a=t.normalizeName(a.toLowerCase()),t.get(a)?(n.push(a),""):r)};return r=r.replace(this.re_labels,o),[r,n]}},{key:"updateOrders",value:function(e){d.dispatch((0,i.labelUpdateOrders)(e))}}]),e}();f.initClass(),window.LabelsModel=new f,t.exports=window.LabelsModel},{"../reducers/labels":1105,"../stores/store":1140,"../utils":1176,"./UtilModels":173}],157:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=e("../utils/CellStorage"),s=e("../utils/deps"),u=function(e){return e&&e.__esModule?e:{default:e}}(e("./StatePersistence")),c=e("../react_components/confirm_dialog"),d=window,f=d.Signals,p=e("../models/Storage"),m=p.GlobalStorage,h=(0,s.defineDeps)("LoadEngine",["SyncEngine"]),y=function(){function e(){var t=this;n(this,e),i(this,"cleanReload",function(){return t.clearAllCachedData().then(function(){window.location.reload()})}),this.loadData=this.loadData.bind(this),this.clearAllCachedData=this.clearAllCachedData.bind(this),this.logout=this.logout.bind(this),f.connect("logout",function(){t.logout()}),f.connect("logout",function(){t.logout()}),f.connect("clean_reload",function(){t.cleanReload()}),f.connect("syncing_data",function(){t.fetched_data_from_server=!0})}return a(e,null,[{key:"initClass",value:function(){this.prototype.fetched_data_from_server=!1}}]),a(e,[{key:"loadData",value:function(){if(h.SyncEngine.loadCachedData(),this.shouldCleanReload())return this.cleanReload().then(function(){return new Promise(function(){})});f.sendSignal("load_cached_data");var e=u.default.load(),t=e.notes;return e.items.then(function(){return h.SyncEngine.isInitialSync()?h.SyncEngine.sync():(t.then(function(){return h.SyncEngine.sync(null,!0,!0)}),u.default.inIDB("notes")?Promise.resolve():t)})}},{key:"shouldCleanReload",value:function(){var e=$storage("lastCleanReloadID").get();return e?"2"!==e:!h.SyncEngine.isInitialSync()||($storage("lastCleanReloadID").set("2"),!1)}},{key:"clearAllCachedData",value:function(){return m.clear_all_cached_and_delayed(),window.localStorage.clear(),f.sendSignal("clear_local_data"),l.idbs.deleteDatabase().catch(function(){})}},{key:"logout",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=function(){e.clearAllCachedData().then(function(){if(t){var e="/Users/logout?csrf=".concat($cookie.get("csrf"));(window.HAS_MINI_ARGUMENT||window.MINI_VERSION)&&(e+="&mini=1"),window.location=e}})};0===h.SyncEngine.getQueueAllLength()?r():(0,c.showConfirmDialog)({message:_("You're in offline mode. Some changes you've made won't be saved. Log out anyway?"),confirmLabel:_("Log out"),cancelLabel:_("Go back"),onConfirm:function(){r()}})}}]),e}();y.initClass();var v=new y;window.logoutTodoist=function(){v.logout()},t.exports=v},{"../models/Storage":167,"../react_components/confirm_dialog":680,"../utils/CellStorage":1143,"../utils/deps":1154,"./StatePersistence":166}],158:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Signals,s=e("./Storage"),u=s.$storage,c=e("./SyncEngine"),d=function(){function e(){var t=this;n(this,e),this.initState=this.initState.bind(this),this.syncLocalModel=this.syncLocalModel.bind(this),this.getNotifications=this.getNotifications.bind(this),this.getUnreadCount=this.getUnreadCount.bind(this),this.markNotesAsRead=this.markNotesAsRead.bind(this),this.syncLastRead=this.syncLastRead.bind(this),this.getLastRead=this.getLastRead.bind(this),this.markAsRead=this.markAsRead.bind(this),this.markRead=this.markRead.bind(this),this.markReadAll=this.markReadAll.bind(this),this.markUnread=this.markUnread.bind(this),this.acceptInvitationBiz=this.acceptInvitationBiz.bind(this),this.rejectInvitationBiz=this.rejectInvitationBiz.bind(this),this.doInvitationGenericBiz=this.doInvitationGenericBiz.bind(this),this.acceptInvitation=this.acceptInvitation.bind(this),this.rejectInvitation=this.rejectInvitation.bind(this),this.doInvitationGeneric=this.doInvitationGeneric.bind(this),this.syncCachedData=this.syncCachedData.bind(this),this.loadCachedData=this.loadCachedData.bind(this),this.initState(),l.connect("clear_local_data",this.initState),l.connect("load_cached_data",function(){t.loadCachedData()})}return a(e,[{key:"initState",value:function(){this.noti_model={},this.last_read_id=0,this.initial_sync=!0}}]),a(e,[{key:"deserializeFields",value:function(e){e.created=new Date(e.created).getTime()}},{key:"syncLocalModel",value:function(e){var t=this.noti_model,r=!0;this.initial_sync?r=!1:c.isInitialSync()&&(r=!1);var n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;this.deserializeFields(u);var d;if(void 0===t[u.notification_key]&&(d=!0),t[u.notification_key]=u,u.is_deleted){t[u.notification_key]&&delete t[u.notification_key]}else r&&d&&l.sendSignal("notify",u)}}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}var f=this.getNotifications();if(f.length>120){var p=!0,m=!1,h=void 0;try{for(var _,y=f.slice(120)[Symbol.iterator]();!(p=(_=y.next()).done);p=!0){var v=_.value;t[v.notification_key]&&delete t[v.notification_key]}}catch(e){m=!0,h=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw h}}}this.syncCachedData(),this.initial_sync=!1}},{key:"getNotifications",value:function(){var e=$values(this.noti_model);return e=e.sort(function(e,t){return t.id-e.id})}},{key:"getUnreadCount",value:function(){var e=this.last_read_id,t=0,r=!0,n=!1,o=void 0;try{for(var a,i=this.getNotifications()[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){a.value.id>e&&(t+=1)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}},{key:"markNotesAsRead",value:function(e){var t={},r=!0,n=!1,o=void 0;try{for(var a,i=this.getNotifications()[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;s.note_id&&(t[s.note_id]=s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}var u=[],c=!0,d=!1,f=void 0;try{for(var p,m=e[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=p.value,_=t[h.id];_&&1===_.is_unread&&(_.is_unread=0,u.push(_.id),l.sendSignal("noti_updated",_))}}catch(e){d=!0,f=e}finally{try{c||null==m.return||m.return()}finally{if(d)throw f}}u.length>0&&(this.markRead(u),l.sendSignal("notifications_updated")),t=null}},{key:"syncLastRead",value:function(e){this.last_read_id=e,this.syncCachedData(),l.sendSignal("notifications_updated")}},{key:"getLastRead",value:function(){return this.last_read_id}},{key:"markAsRead",
value:function(e){e.id!==this.last_read_id&&(this.last_read_id=e.id,this.last_read_id&&(this.syncCachedData(),c.queueUpdate({type:"live_notifications_set_last_read",args:{id:this.last_read_id}})))}},{key:"markRead",value:function(e){this.syncCachedData(),c.queueUpdate({type:"live_notifications_mark_read",args:{ids:e}})}},{key:"markReadAll",value:function(){this.syncCachedData(),c.queueUpdate({type:"live_notifications_mark_read_all"})}},{key:"markUnread",value:function(e){this.syncCachedData(),c.queueUpdate({type:"live_notifications_mark_unread",args:{ids:e}})}},{key:"acceptInvitationBiz",value:function(e,t,r){this.doInvitationGenericBiz("biz_accept_invitation",e,t,r)}},{key:"rejectInvitationBiz",value:function(e,t,r){this.doInvitationGenericBiz("biz_reject_invitation",e,t,r)}},{key:"doInvitationGenericBiz",value:function(e,t,r,n){var o=function(){r&&r()},a={onSuccess:o,onError:n};c.queueUpdate({type:e,args:{invitation_id:t.invitation_id,invitation_secret:t.invitation_secret}}),c.sync(a,!0),this.noti_model[t.notification_key]&&(delete this.noti_model[t.notification_key],this.syncCachedData())}},{key:"acceptInvitation",value:function(e,t,r){this.doInvitationGeneric("accept_invitation",e,t,r)}},{key:"rejectInvitation",value:function(e,t,r){this.doInvitationGeneric("reject_invitation",e,t,r),this.noti_model[e.notification_key]&&(delete this.noti_model[e.notification_key],this.syncCachedData())}},{key:"doInvitationGeneric",value:function(e,t,r,n){var o=function(){r&&r()},a={onSuccess:o,onError:n};c.queueUpdate({type:e,args:{invitation_id:t.invitation_id,invitation_secret:t.invitation_secret}}),c.sync(a,!0)}},{key:"syncCachedData",value:function(){u("Notifications").set(this.noti_model),u("NotificationsLastReadId").set(this.last_read_id)}},{key:"loadCachedData",value:function(){var e=u("Notifications").get();this.noti_model=e||{},$values(this.noti_model).forEach(this.deserializeFields);var t=u("NotificationsLastReadId").get();this.last_read_id=t||0}}]),e}();window.NotificationsModel=new d,t.exports=window.NotificationsModel},{"./Storage":167,"./SyncEngine":169}],159:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var f=e("../utils"),p=window,m=p.Signals,h=e("../reducers/projects"),_=h.projectGetByID,y=h.projectGetInbox,v=h.projectGetTeamInbox,g=h.projectGetActiveSorted,b=h.projectGetActiveWithIndent,w=h.projectGetChildren,E=h.projectGetParent,j=h.projectGetByNameSearch,O=h.projectAdd,S=h.projectArchive,P=h.projectArchivedFeteched,I=h.projectFetchArchived,k=h.projectMoveAndReorder,T=h.projectRemove,C=h.projectUnarchive,D=h.projectUpdate,A=h.projectUpdateLocalFields,M=function(){return e("../stores/store").default},x=function(){function e(){u(this,e),this.syncLocalModel=this.syncLocalModel.bind(this),this.get=this.get.bind(this),this.getInbox=this.getInbox.bind(this),this.getTeamInbox=this.getTeamInbox.bind(this),this.getIds=this.getIds.bind(this),this.getAll=this.getAll.bind(this),this.getChildren=this.getChildren.bind(this),this.getParent=this.getParent.bind(this),this.getByName=this.getByName.bind(this),this.add=this.add.bind(this),this.deleteMany=this.deleteMany.bind(this),this.update=this.update.bind(this),this.archive=this.archive.bind(this),this.unarchive=this.unarchive.bind(this)}return d(e,[{key:"model_data",get:function(){return M().getState().projects}}],[{key:"initClass",value:function(){this.prototype.max_indent=4}}]),d(e,[{key:"syncLocalModel",value:function(e,t){}},{key:"get",value:function(e){return _(M().getState(),e)}},{key:"getInbox",value:function(){return y(M().getState())}},{key:"getTeamInbox",value:function(){return v(M().getState())}},{key:"getIds",value:function(){return $keys(M().getState().projects)}},{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.with_indent;return void 0!==t&&t?b(M().getState()):g(M().getState())}},{key:"getChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=w(e.id,M().getState());if(t){var n=this.get(e.id);return n?[n].concat(a(r)):[]}return r}},{key:"getParent",value:function(e){return E(M().getState(),e.id)}},{key:"getByName",value:function(e){return j(e.trim(),M().getState())}},{key:"add",value:function(e){var t,r=this.getAll();return t=window.User.is_premium&&window.User.business_account_id?501:window.User.is_premium?301:81,r.length>=t?void alert((0,f.format)(_n("For performance reasons you can add at most one project. Please archive or delete some of your finished projects.","For performance reasons you can add at most {n} projects. Please archive or delete some of your finished projects.",t),{n:t})):M().dispatch(O(e))}},{key:"moveAndReorder",value:function(e,t){var r=t.noUndo;M().dispatch(k(e,{noUndo:r}))}},{key:"deleteMany",value:function(e){M().dispatch(T.apply(void 0,a(e)))}},{key:"update",value:function(e,t){var r=this.get(e);if(r)return(t.indent||t.item_order||t.parent_id)&&(t=(0,f.omit)(t,["indent","item_order","parent_id"])),M().dispatch(D(e,t)),t.name&&m.sendSignal("project.name.changed",r),n({},r,t)}},{key:"updateLocalFields",value:function(e){e=n({},e);var t=!0,r=!1,o=void 0;try{for(var a,i=(0,f.keys)(e)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value;this.get(l)||delete e[l]}}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}M().dispatch(A(e))}},{key:"archive",value:function(e){M().dispatch(S(e))}},{key:"unarchive",value:function(e){M().dispatch(C(e))}},{key:"fetchArchivedProject",value:function(e){return M().dispatch(I(e))}},{key:"archivedFeteched",value:function(e){M().dispatch(P(e))}}]),e}();x.initClass(),window.ProjectsModel=new x,t.exports=window.ProjectsModel},{"../reducers/projects":1119,"../stores/store":1140,"../utils":1176}],160:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e){return c(e)||u(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){f(e,t,r[t])})}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return function(){try{return e.apply(null,arguments)}catch(e){throw _.captureError(e,{tags:{where:"hierachy"},extra:{args:arguments}}),e}}}Object.defineProperty(r,"__esModule",{value:!0}),r.deriveProjectIndentItemOrder=r.deriveProjectParentChildOrder=r.deriveTaskParentChild=r._deriveIndentItemOrder=r.deriveIndentItemOrder=r.deriveParentChildOrder=void 0;var m=e("redux"),h=e("../utils/fp"),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../logger/Logger")),y=(0,h.sortBy)(["item_order","id"]),v=function e(t,r,n){for(var o=t.reduce(function(e,t,r){return t.indent==n+1&&e.push(r),e},[]),a=0;a<o.length;a++){var i=o[a],s=t[i];s=d({},s,{parent_id:r,child_order:a+1}),t[i]=s}o.push(t.length);for(var u=1;u<o.length;u++){var c=o[u],f=o[u-1],p=t[f],m=t.slice(f+1,c);0!=m.length&&(m=e(m,p.id,p.indent),t.splice.apply(t,[f+1,m.length].concat(l(m))))}return t},g=p(function(e){return e=y(e),e=I(e),v(e,null,0)});r.deriveParentChildOrder=g;var b=p(function(e){var t=O(e);return w(t,null,0)});r.deriveIndentItemOrder=b;var w=function e(t,r,n){var o=t[r];if(!o)return[];for(var a=[],i=0;i<o.length;i++){var l=d({},o[i],{indent:n+1});a.push(l);var s=t[l.id];s&&(s=e(t,l.id,l.indent),a=a.concat(s))}return a=a.map(function(e,t){return d({},e,{item_order:t+1})})};r._deriveIndentItemOrder=w;var E=(0,m.compose)((0,h.mapValues)(h.head),(0,h.groupBy)("id")),j=function(e){return(0,m.compose)(function(e){return v(e,null,0)},I,y)(e)};r.deriveTaskParentChild=j;var O=(0,m.compose)((0,h.mapValues)((0,h.sortBy)(["child_order"])),(0,h.groupBy)("parent_id")),S=function(e){var t=(0,m.compose)((0,h.partition)(function(e){return e.inbox_project||e.team_inbox}),h.values)(e),r=n(t,2),o=r[0],a=r[1];return a=(0,m.compose)(E,g)(a),o=E(o),d({},a,o)};r.deriveProjectParentChildOrder=S;var P=function(e){var t=(0,m.compose)((0,h.partition)(function(e){return e.inbox_project||e.team_inbox}),h.values)(e),r=n(t,2),o=r[0],a=r[1];return a=(0,m.compose)(E,b)(a),o=E(o),d({},a,o)};r.deriveProjectIndentItemOrder=P;var I=function(e){if(0===e.length)return e;var t=0,r=!1,n=e.map(function(e){return e.indent<t?(t=e.indent,e):e.indent===t?e:e.indent===t+1?(t=e.indent,e):e.indent>t+1?(e=d({},e,{indent:t+1}),r=!0,e):void 0});return r?n:e}},{"../logger/Logger":129,"../utils/fp":1166,redux:"redux"}],161:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=window,s=l.Signals,u=window,c=u.DateUtils,d=e("./Storage"),f=d.$storage,p=e("./TemporaryIds"),m=e("./SyncEngine"),h=e("./UtilModels"),_=e("../models/DateExt").default,y=function(){function e(){var t=this;n(this,e),i(this,"receiveBridgeUpdate",function(e){var r=e.reminders;r&&(t.model_data=r,t.syncCachedData({bridgeUpdate:!1}))}),this.initState=this.initState.bind(this),this.syncLocalModel=this.syncLocalModel.bind(this),this.getAllReminders=this.getAllReminders.bind(this),this.hasReminders=this.hasReminders.bind(this),this.getRemindersByItemId=this.getRemindersByItemId.bind(this),this.resolveTempId=this.resolveTempId.bind(this),this.hasExceededMaxLimit=this.hasExceededMaxLimit.bind(this),this.add=this.add.bind(this),this.addLocation=this.addLocation.bind(this),this._addToModel=this._addToModel.bind(this),this.remove=this.remove.bind(this),this.removeRelative=this.removeRelative.bind(this),this.syncCachedData=this.syncCachedData.bind(this),this.convertDueToDateExt=this.convertDueToDateExt.bind(this),this.removeMissingDueReminder=this.removeMissingDueReminder.bind(this),this.loadCachedData=this.loadCachedData.bind(this),this.handleItemArchive=this.handleItemArchive.bind(this),this.initState(),s.connect("clear_local_data",this.initState),s.connect("load_cached_data",function(){t.loadCachedData()}),s.connect("resolve_temp.reminder",function(e,r){t.resolveTempId(e,r)}),s.connect("bridge:redux_update",this.receiveBridgeUpdate)}return a(e,[{key:"initState",value:function(){this.model_data={},this.cache_has_reminders={}}}],[{key:"initClass",value:function(){this.prototype.loaded=!1}}]),a(e,[{key:"syncLocalModel",value:function(e){var t=this;e.length>0&&(e.forEach(function(e){return e&&t.convertDueToDateExt(e)}),h.syncLocalModel(e,this.model_data),this.syncCachedData())}},{key:"getAllReminders",value:function(){return $values(this.model_data)}},{key:"hasReminders",value:function(e){if(void 0===this.cache_has_reminders[e]){this.getRemindersByItemId(e).length>0?this.cache_has_reminders[e]=!0:this.cache_has_reminders[e]=!1}return this.cache_has_reminders[e]}},{key:"getRemindersByItemId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=p.getRealId(e);var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=$values(this.model_data)[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;if(s.item_id===e){if(null!==t&&s.type!==t)continue;r.push(s)}}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}},{key:"resolveTempId",value:function(e,t){var r=this.model_data[e];r&&(r.id=t,delete this.model_data[e],this.model_data[t]=r,p.isTemporary(r.notify_uid)&&(r.notify_uid=p.getRealId(r.notify_uid)),p.isTemporary(r.item_id)&&(r.item_id=p.getRealId(r.item_id)),this.syncCachedData())}},{key:"hasExceededMaxLimit",value:function(){return $values(this.model_data).length>700}},{key:"hasExceededMaxLimitForLocRmd",value:function(){return $values(this.model_data).filter(function(e){return"location"===e.type}).length>=300}},{key:"hasExceededMaxLimitForTimeRmd",value:function(){return $values(this.model_data).filter(function(e){return"location"!==e.type}).length>=700}},{key:"add",value:function(e){var t="relative"!==e.type&&"absolute"!==e.type;if(!this.hasExceededMaxLimit()&&!t){var r={},n=r.id=p.generate("reminder");void 0!==e.minute_offset?r.type="relative":r.type="absolute",e.type=r.type,e.notify_uid&&(r.notify_uid=e.notify_uid),e.service?r.service=e.service:(e.service="default",r.service="default"),this.model_data[n]=r,$update(r,e);var o=Object.assign({},e,{due:e.due?e.due.toAPIFormat():null});return m.queueUpdate({type:"reminder_add",args:o,temp_id:n}),this.syncCachedData(),r}}},{key:"addLocation",value:function(e){var t,r={};return t=r.id?r.id:r.id=p.generate("reminder"),this.model_data[t]=r,$update(r,e),m.queueUpdate({type:"reminder_add",args:e,temp_id:t}),this.syncCachedData(),r}},{key:"_addToModel",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.model_data[e.id]=e,t&&this.syncCachedData()}},{key:"featureEnabled",value:function(){return!!window.User.is_premium||(window.User.features.restriction||window.User.restriction||0)>0}},{key:"remove",value:function(e){e=p.getRealId(e),this.model_data[e]&&delete this.model_data[e],m.queueUpdate({type:"reminder_delete",args:{id:e}}),this.syncCachedData()}},{key:"removeRelative",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=this.getRemindersByItemId(e,"relative")[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.remove(i.id)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"syncCachedData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bridgeUpdate,r=void 0===t||t;this.removeMissingDueReminder(),f("Reminders").set(this.model_data),this.cache_has_reminders={},r&&this.sendBridgeUpdate()}},{key:"sendBridgeUpdate",value:function(){s.sendSignal("bridge:model_update",{reminders:this.model_data})}},{key:"convertDueToDateExt",value:function(e){return!e.due||e.due instanceof _?e:(e.due instanceof Object&&(e.due=new _(e.due)),e)}},{key:"removeMissingDueReminder",value:function(){var e=[];for(var t in this.model_data){var r=this.model_data[t];"absolute"===r.type&&!r.due&&e.push(r)}for(var n=0,o=e;n<o.length;n++){var a=o[n];delete this.model_data[a.id]}return e.length>0}},{key:"loadCachedData",value:function(){var e=f("Reminders").get();this.model_data=e||{};for(var t in this.model_data){var r=this.model_data[t];this.convertDueToDateExt(r)}this.removeMissingDueReminder()&&this.syncCachedData(),this.sendBridgeUpdate(),this.loaded=!0}},{key:"handleItemArchive",value:function(e){var t=$values(this.model_data).filter(function(t){return e.includes(t.item_id)}).map(function(e){return e.id}),r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;delete this.model_data[l]}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t.length>0&&this.syncCachedData(),t}}]),e}();y.initClass();var v=function(){function e(){n(this,e),this.getCurItem=this.getCurItem.bind(this),this.commitBuffered=this.commitBuffered.bind(this),this.getCurrentReminders=this.getCurrentReminders.bind(this)}return a(e,[{key:"getCurItem",value:function(){var e={};this.cur_item?$update(e,this.cur_item):(e.id="_buf_rem",e.project_id=this.current_project_id);var t=$all("input","input_due_date");if(t.length>0){var r=t[0].value;try{var n=c.parse(r);n.due_date&&(e.due=_.fromDateist(n))}catch(t){e.due=null}}return e}},{key:"commitBuffered",value:function(e){if(this.reminders.length>0){var t=!0,r=!1,n=void 0;try{for(var o,a=this.reminders[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;i.item_id=e.id,"location"===i.type?g.addLocation(i):g.add(i)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}}},{key:"getCurrentReminders",value:function(){try{return this.getRemindersByItemId(this.getCurItem().id)}catch(e){return[]}}},{key:"getRemindersByItemId",value:function(e){return this.use_buffered?this.reminders:g.getRemindersByItemId(e)}},{key:"add",value:function(e){return this.use_buffered?(e.id=p.generate("reminder"),this.reminders.push(e)):e="location"===e.type?g.addLocation(e):g.add(e),e}},{key:"remove",value:function(e){if(this.use_buffered){var t=[],r=!0,n=!1,o=void 0;try{for(var a,i=this.reminders[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;l.id!==e&&t.push(l)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}this.reminders=t}else g.remove(e)}},{key:"reset",value:function(){this.reminders=[],this.cur_item=null,this.use_buffered=!1}}],[{key:"initClass",value:function(){this.prototype.use_buffered=!1,this.prototype.cur_item=null,this.prototype.current_project_id=null,this.prototype.reminders=[]}}]),e}();v.initClass();var g=new y;t.exports={RemindersModel:g,BufferedRemindersModel:new v},window.RemindersModel=g},{"../models/DateExt":152,"./Storage":167,"./SyncEngine":169,"./TemporaryIds":172,"./UtilModels":173}],162:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Signals,s=e("./Storage"),u=s.$storage,c=function(){function e(){var t=this;n(this,e),this.initState=this.initState.bind(this),this.syncLocalModel=this.syncLocalModel.bind(this),this.getLastLocations=this.getLastLocations.bind(this),this.syncCachedData=this.syncCachedData.bind(this),this.loadCachedData=this.loadCachedData.bind(this),this.initState(),l.connect("clear_local_data",this.initState),l.connect("load_cached_data",function(){t.loadCachedData()})}return a(e,[{key:"initState",value:function(){this.model_data=[]}}]),a(e,[{key:"syncLocalModel",value:function(e){this.model_data=e,this.syncCachedData()}},{key:"getLastLocations",value:function(){return this.model_data}},{key:"syncCachedData",value:function(){u("RemindersLocation").set(this.model_data)}},{key:"loadCachedData",value:function(){var e=u("RemindersLocation").get();this.model_data=e||[]}}]),e}();t.exports=new c},{"./Storage":167}],163:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../stores/store")),l=e("../reducers/sections"),s=function(){function e(){n(this,e)}return a(e,[{key:"getByID",value:function(e){return i.default.getState().sections[e]}},{key:"add",value:function(e){return i.default.dispatch((0,l.sectionAdd)(e))}},{key:"remove",value:function(e){return i.default.dispatch((0,l.sectionRemove)(e))}},{key:"archive",value:function(e){return i.default.dispatch((0,l.sectionArchive)(e))}},{key:"update",value:function(e){return i.default.dispatch((0,l.sectionUpdate)(e))}},{key:"move",value:function(e){return i.default.dispatch((0,l.sectionMove)(e))}},{key:"reorder",value:function(e,t){return i.default.dispatch((0,l.sectionReorder)(e,t))}},{key:"getByPID",value:function(e){return(0,l.sectionGetByPID)(e)(i.default.getState())}}]),e}(),u=new s;r.default=u},{"../reducers/sections":1125,"../stores/store":1140}],164:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e,t){try{var r=e instanceof Array;e=r?e:[e];var n="/predict_date";w.default.smartScheduleDomain&&(n="https://".concat(w.default.smartScheduleDomain,"/v2/predict_date"));var o=$requestJSON(n,"POST"),i=e.map(h),l=new Map,s=!0,u=!1,d=void 0;try{for(var f,_=i.entries()[Symbol.iterator]();!(s=(f=_.next()).done);s=!0){var v=a(f.value,2),g=v[0],b=v[1];b.item_id||(b.item_id=-1*(g+1)),l.set(b.item_id,g)}}catch(e){u=!0,d=e}finally{try{s||null==_.return||_.return()}finally{if(u)throw d}}var E=m(new Date),j={access_token:window.User.token,user_id:window.User.id,items:i,weekly_items:c(),user_time:E,user_lang:window.LANG,client_info:"web app"};o.addCallback(function(n){n.predictions.sort(function(e,t){return l.get(e.item_id)-l.get(t.item_id)});var o=n.predictions.map(function(e){return p(e.due_date)}),i=!0,s=!1,u=void 0;try{for(var c,d=e.entries()[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var f=a(c.value,2),m=f[0],h=f[1];if(h.due&&h.due.is_recurring&&h.due.isInFuture){var _=h.due.nextRecurrence(),v=a(_,1),g=v[0];o[m]=g.toDate()}}}catch(e){s=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(s)throw u}}y(e,o),r?t(o,null):t(o[0],null)}),o.addErrback(function(e){t(null,new Error(e))}),o.sendReq($serialize(j),!0,"application/json")}catch(e){t(null,e)}}function c(){return v.filter("7 days",E.default.getState()).map(function(e){return e.items}).reduce(function(e,t){return e.concat(t)},[]).map(h)}function d(e){return e<10?"0"+e:e}function f(e){return"".concat(e.getFullYear(),"-").concat(d(e.getMonth()+1),"-").concat(d(e.getDate()))}function p(e){var t=j.exec(e);if(!t)return new Date;try{var r=[parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3])],n=r[0],o=r[1],a=r[2];return new Date(n,o,a)}catch(e){return new Date}}function m(e){var t=e.getFullYear(),r=d(e.getMonth()+1),n=d(e.getDate()),o=d(e.getHours()),a=d(e.getMinutes()),i=d(e.getSeconds()),l=e.getTimezoneOffset(),s=d(Math.abs(Math.floor(l/60))),u=d(Math.abs(l%60)),c=l>0?"-":"+",f="".concat(c).concat(s,":").concat(u);return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(o,":").concat(a,":").concat(i).concat(f)}function h(e){var t=null,r=null;e.due&&(t=e.due.with_time?m(e.due):f(e.due),r=e.due.string);var n=e.date_added?new Date(e.date_added):new Date,o=m(n),a=g.get(e.project_id),i=a&&a.name||_("Undefined"),l=e.labels.map(function(e){var t=b.getById(e);return t?t.name:null}).filter(function(e){return e});return{item_id:e.id?e.id:null,content:e.content,due_date:t,date_string:r,date_added:o,postpone_count:0,priority:e.priority,label_names:l,project_name:i}}function y(e,t){O.clear();var r=!0,n=!1,o=void 0;try{for(var i,l=e.entries()[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=a(i.value,2),u=s[0],c=s[1];O.set(c.id,t[u])}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}}Object.defineProperty(r,"__esModule",{value:!0}),r.predictItemDuedate=u,r.isoDateStr=f,r.isoDateStrToDate=p;var v=o(e("../filterist")),g=o(e("./ProjectsModel")),b=o(e("./LabelsModel")),w=n(e("../models/Config")),E=n(e("../stores/store")),j=/\s*(\d\d\d\d)-(\d\d)-(\d\d)\s*/i,O=new Map;Signals.connect("item_updated",function(e){try{if(!O.has(e.id))return;var t=O.get(e.id);if(!e.due||e.due.isSameDate(t))return void O.delete(e.id);var r=e.due.with_time?m(e.due):f(e.due),n={access_token:window.User.token,user_id:window.User.id,user_result:[{item_id:e.id,due_date:r}]};fetch("https://".concat(w.default.smartScheduleDomain,"/v2/predict_date/accuracy_log"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).catch(function(){})}catch(e){}})},{"../filterist":121,"../models/Config":150,"../stores/store":1140,"./LabelsModel":156,"./ProjectsModel":159}],165:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i={waiting:1,reordering:2},l=function(){function e(){n(this,e),this.set=this.set.bind(this),this.get=this.get.bind(this),this.DragMode=i,this.model_data={drag_and_drop_mode:i.waiting}}return a(e,[{key:"set",value:function(e,t){this.model_data[e]=t}},{key:"get",value:function(e){return this.model_data[e]}}]),e}();t.exports=new l},{}],166:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.attachChangePersister=void 0;var d=e("../utils"),f=e("../utils/fp"),p=e("../reducers/load"),m=function(e){return e&&e.__esModule?e:{default:e}}(e("../stores/store")),h=function(){function e(){var t;s(this,e),this.storages=(t={},l(t,"settings.theme",$storage("LocalSettings.theme")),l(t,"tooltip.scheduled",$storage("TooltipStore.scheduledTipList")),l(t,"tooltip.seen",$storage("TooltipStore.seenList")),l(t,"filters",$storage("Filters")),l(t,"labels",$storage("Labels")),l(t,"projects",$storage("Projects")),l(t,"sections",$storage("sections")),l(t,"stats",$storage("stats")),l(t,"user",$storage("User")),l(t,"moreNotes",$storage("moreNotes")),l(t,"completed",$storage("completed")),t),this.cellStorages={notes:new d.CellStorage("notes"),items:new d.CellStorage("items"),drafts:new d.CellStorage("drafts")}}return c(e,[{key:"inIDB",value:function(e){return this.cellStorages[e]&&this.cellStorages[e].usingIndexedDB}},{key:"load",value:function(){var e=(0,d.mapValues)(this.storages,function(e){return e.get()});return m.default.dispatch((0,p.loadLocalData)(e)),this.loadStatus=(0,d.mapValues)(this.cellStorages,function(e,t){return e.get().then(function(e){m.default.dispatch((0,p.loadLocalData)(l({},t,e)))})}),this.attachStorePersister(),this.loadStatus}},{key:"attachStorePersister",value:function(){var e=this;[].concat(n((0,d.keys)(this.storages)),n((0,d.keys)(this.cellStorages))).forEach(function(t){var r=e.storages[t]||e.cellStorages[t];_(m.default,(0,f.get)(t),r)})}}]),e}(),_=function(e,t,r){var n=t(e.getState());return e.subscribe(function(){var o=t(e.getState());n!==o&&(void 0===o||null===o?r.clear():r.set(o),n=o)})};r.attachChangePersister=_;var y=new h;r.default=y},{"../reducers/load":1108,"../stores/store":1140,"../utils":1176,"../utils/fp":1166}],167:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i;try{i=e("../logger/Logger")}catch(e){i=null}var l=function(){function e(){n(this,e),this.set_delayed=this.set_delayed.bind(this),this.get=this.get.bind(this),this.remove=this.remove.bind(this),this._clear_delayed_set=this._clear_delayed_set.bind(this),this.commitAllDelayed=this.commitAllDelayed.bind(this),this.commitAll=this.commitAll.bind(this),this._commit=this._commit.bind(this),this.clear_all_cached_and_delayed=this.clear_all_cached_and_delayed.bind(this),this.cache={},this.delayed_set={},this.manual_commit=!1}return a(e,[{key:"set_delayed",value:function(e,t){var r=this;if(void 0===t)return void this.remove(e);if(this.cache[e]=t,this._clear_delayed_set(e),!0!==this.manual_commit){var n=function(){r._commit(e,r.cache[e]),r.delayed_set[e]&&delete r.delayed_set[e]};this.delayed_set[e]=setTimeout(n,.5)}return t}},{key:"get",value:function(e){var t;if(void 0!==this.cache[e])return this.cache[e];var r=localStorage.getItem(e);if(null===r)return null;if("undefined"===r)return this.remove(e),null;try{t=window.JSON.parse(r)}catch(r){throw i&&i.captureError(new Error("$storage deserialize error"),{extra:{storage_key:e,value:t,error:r.message}}),r}return this.cache[e]=t,t}},{key:"remove",value:function(e){localStorage.removeItem(e),this.cache[e]&&delete this.cache[e],this._clear_delayed_set(e)}},{key:"_clear_delayed_set",value:function(e){this.delayed_set[e]&&(clearTimeout(this.delayed_set[e]),delete this.delayed_set[e])}},{key:"commitAllDelayed",value:function(){for(var e in this.cache){var t=this.cache[e];this.set_delayed(e,t)}}},{key:"commitAll",value:function(){for(var e in this.cache){var t=this.cache[e];this._commit(e,t)}}},{key:"_commit",value:function(e,t){var r=JSON.stringify(t);r!==localStorage.getItem(e)&&localStorage.setItem(e,r)}},{key:"clear_all_cached_and_delayed",value:function(e){for(e in this.cache)this._clear_delayed_set(e);this.cache={},this.delayed_set={}}}]),e}(),s=new l,u=function(e){return{set:function(t){return s.set_delayed(e,t)},get:function(){return s.get(e)},clear:function(){s.remove(e)}
}};window.$storage=u,window.GlobalStorage=s,void 0!==r&&null!==r&&(r.$storage=u,r.GlobalStorage=s)},{"../logger/Logger":129}],168:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./SyncLogs")),l=e("../reducers/sync"),s=window,u=s.Signals,c=e("./Storage"),d=c.$storage,f=e("./Storage"),p=f.GlobalStorage,m=e("./Collaborators"),h=e("./LabelsModel"),_=e("./Reminders"),y=_.RemindersModel,v=e("./RemindersLocationModel"),g=e("./NotificationsModel"),b=e("../stores/store").default,w=e("../logger/Logger"),E=function(e){try{e()}catch(e){var t=w.captureError(e,{tags:{where:"SyncData"}});i.default.log(i.LOG_PIPE_ERR,{eventID:t,error:e.message})}},j=function(){function e(){var t=this;n(this,e),this.syncLocalData=this.syncLocalData.bind(this),u.connect("sync_local_data",function(e){t.syncLocalData(e)})}return a(e,[{key:"syncLocalData",value:function(e){try{p.manual_commit=!0,u.sendSignal("syncing_data",e),E(function(){e.full_sync?b.dispatch((0,l.receiveFullSyncUpdate)(e)):b.dispatch((0,l.receiveSyncUpdate)(e))}),e.day_orders_timestamp&&d("DayOrdersTimestamp").set(e.day_orders_timestamp),e.collaborators&&e.collaborators.length>0&&E(function(){return m.syncLocalModel(e.collaborators,e.collaborator_states)}),e.labels&&E(function(){return h.syncLocalModel(e.labels)}),e.reminders&&E(function(){return y.syncLocalModel(e.reminders)}),e.locations&&E(function(){return v.syncLocalModel(e.locations)}),e.live_notifications&&E(function(){return g.syncLocalModel(e.live_notifications)}),void 0!==e.live_notifications_last_read_id&&E(function(){return g.syncLastRead(e.live_notifications_last_read_id)}),u.sendSignal("refresh_interface"),p.manual_commit=!1,p.commitAllDelayed()}catch(e){w.captureError(e,{tags:{critical:"sync"}})}}}]),e}();t.exports=new j},{"../logger/Logger":129,"../reducers/sync":1131,"../stores/store":1140,"./Collaborators":148,"./LabelsModel":156,"./NotificationsModel":158,"./Reminders":161,"./RemindersLocationModel":162,"./Storage":167,"./SyncLogs":170}],169:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../utils"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./SyncLogs")),s=function(e){return e&&e.__esModule?e:{default:e}}(e("../logger/Logger")),u=window,c=u.Signals,d=e("./Storage"),f=d.$storage,p=e("./TemporaryIds"),m=e("./VersionUpdater"),h=e("./SyncQueue"),_=e("./UtilModels"),y=e("../models/Config").default,v=function(){function e(){var t=this;n(this,e),this.queueUpdate=this.queueUpdate.bind(this),this.scheduleSync=this.scheduleSync.bind(this),this.getSyncState=this.getSyncState.bind(this),this.getQueueAllLength=this.getQueueAllLength.bind(this),this.getQueueSuccessLength=this.getQueueSuccessLength.bind(this),this.getQueueErrorLength=this.getQueueErrorLength.bind(this),this.queueIncludesErrors=this.queueIncludesErrors.bind(this),this.sync=this.sync.bind(this),this._setSyncingState=this._setSyncingState.bind(this),this._setGlobalError=this._setGlobalError.bind(this),this._processSyncQueue=this._processSyncQueue.bind(this),this._queueWithoutErrorMeta=this._queueWithoutErrorMeta.bind(this),this.sync_queue=new h,this.number_of_errors=0,this.max_notes=5,this.sync_states={idle:1,syncing:2},this.sync_timeouts={mini:400,full:1500},this.last_synced=new Date,this.client_id=(0,i.GUID)(),this.sync_token=null,this.api_version="v8.3",s.default.setTagsContext({api_version:this.api_version}),c.connect("clear_local_data",function(){f("TimestampS2").clear(),t.sync_token="*"})}return a(e,[{key:"isInitialSync",value:function(){if(void 0===this.sync_token)throw new Error("SyncEngine.isInitialSync() error: cached data should be loaded prior to the call");return"*"===this.sync_token}},{key:"loadCachedData",value:function(){var e=f("TimestampS2").get();this.sync_token=e||"*"}},{key:"updateSyncToken",value:function(e){e.sync_token&&(this.sync_token=e.sync_token,f("TimestampS2").set(this.sync_token))}},{key:"queueUpdate",value:function(e){this.sync_queue.add(e),this.scheduleSync()}},{key:"scheduleSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=window.MINI_VERSION?this.sync_timeouts.mini:this.sync_timeouts.full);var t=Date.now()+e;this.scheduled_sync_time&&this.scheduled_sync_time>t||(this.scheduled_sync_timeout&&clearTimeout(this.scheduled_sync_timeout),this.scheduled_sync_timeout=setTimeout(this.sync,e),this.scheduled_sync_time=t)}},{key:"getSyncState",value:function(){return this.sync_state}},{key:"getQueueAllLength",value:function(){return this.sync_queue.get().length}},{key:"getQueueSuccessLength",value:function(){var e=0,t=!0,r=!1,n=void 0;try{for(var o,a=this.sync_queue.get()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.last_error||e++}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"getQueueErrorLength",value:function(){var e=0,t=!0,r=!1,n=void 0;try{for(var o,a=this.sync_queue.get()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.last_error&&e++}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e}},{key:"queueIncludesErrors",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.sync_queue.get()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){if(n.value.last_error)return!0}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return!1}},{key:"sync",value:function(){var e,t,r=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]);if(this.sync_timeout&&(clearTimeout(this.sync_timeout),this.sync_timeout=null),this.current_req)return void(this.sync_timeout=setTimeout($p(this.sync,n,!1),this.sync_timeouts.full));!0===o&&this._setSyncingState(this.sync_states.syncing);var a=this.sync_queue.get();a=a.slice(0,20),this.sync_queue.assignUnqiueIds(a);var i=$arrayCopy(a),l="/API/".concat(this.api_version,"/sync");this.current_req=e=$requestJSON(l,"POST",{headers:{"X-Todoist-Webapp-Version":y.version,"X-Todoist-Client-ID":this.client_id}});var s,u,d=new Promise(function(e,t){s=e,u=t});e.addCallback(function(e,t){if(r.current_req=null,r._setGlobalError(null),!_.checkIfAPIDeprecated(t)){var o=e.temp_id_mapping;o&&p.setRealIds(o);var a=e.user&&e.user.id;if(a&&window.User&&a!==window.User.id)return _.checkIfErrorIsLogout("Not logged in");if(e.full_sync&&c.sendSignal("clear_local_data"),m.check(e),r._processSyncQueue(i,e),r._setSyncingState(r.sync_states.idle),r.number_of_errors=0,0===r.getQueueSuccessLength()?(c.sendSignal("sync_local_data",e),r.updateSyncToken(e),c.sendSignal("sync_engine_synced")):(c.sendSignal("sync_local_data",{temp_id_mapping:e.temp_id_mapping}),r.scheduleSync()),o){0===r.getQueueAllLength()-i.length&&p.clearOld()}n&&n.onSuccess&&n.onSuccess(e),0===r.getQueueErrorLength()&&(r.last_synced=new Date),s()}}),e.addErrback(function(e,t){if(r.current_req=null,!_.checkIfErrorIsLogout(e,t)&&!_.checkIfAPIDeprecated(t)){r._setGlobalError([e,t]),r._setSyncingState(r.sync_states.idle),r.number_of_errors++;var o=r.number_of_errors*(1e3+1e3*Math.floor(11*Math.random()));o>6e4&&(o=6e4),r.timeout=o,r.scheduleSync(o),n&&n.onError&&n.onError(e),u(e)}});var f=!0,h=!1,v=void 0;try{for(var g,b=i[Symbol.iterator]();!(f=(g=b.next()).done);f=!0){var w=g.value;this._setRealIds(w)}}catch(e){h=!0,v=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw v}}return t="add.todoist.com"===window.location.host?["labels","projects","locations","user","collaborators","notification_settings"]:["all"],e.sendReq({resource_types:t,commands:this._queueWithoutErrorMeta(i),day_orders_timestamp:this._getDayOrdersTimestamp(),collaborators_timestamp:this._getCollaboratorsTimestamp(),sync_token:this.sync_token||"*",with_web_static_version:!0,limit_notes:1,max_notes:this.max_notes,with_dateist_version:1},void 0,"application/json"),d}},{key:"_setSyncingState",value:function(e){this.sync_state=e,c.sendSignal("sync_state_changed")}},{key:"_setGlobalError",value:function(e){this.global_error=e,c.sendSignal("sync_state_changed")}},{key:"_setRealIds",value:function(e){var t=p.getRealId;e.temp_id&&(e.temp_id=t(e.temp_id));for(var r in e.args)switch(r){case"id":e.args.id=t(e.args.id);break;case"ids":e.args.ids=e.args.ids.map(function(e){return t(e)});break;case"project_id":e.project_id=t(e.project_id)}}},{key:"_getDayOrdersTimestamp",value:function(){return f("DayOrdersTimestamp").get()||""}},{key:"_getCollaboratorsTimestamp",value:function(){return f("CollaboratorsTimestamp").get()||""}},{key:"_processSyncQueue",value:function(e,t){var r,n=[],o=t.sync_status;if(o){var a=!0,s=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){r=c.value;var f=o[r.uuid];if(f&&f.error_tag){if("ALREADY_PROCESSED"===f.error_tag)continue;r.last_error||(r.last_error=f),r.retry_count?r.retry_count++:r.retry_count=1,r.retry_count<100&&n.push(r)}}}catch(e){s=!0,u=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw u}}}this.sync_queue.deleteItems(e);for(var p=0,m=n;p<m.length;p++)r=m[p],this.sync_queue.add(r);try{if(n.length>0){var h=(0,i.uniq)(n.map(function(e){return e.type}));l.default.log(l.LOG_CMD_ERR,{cmds:h})}}catch(e){}}},{key:"_queueWithoutErrorMeta",value:function(e){var t=[],r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,s=$update({},l);s.last_error&&delete s.last_error,t.push(s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}}]),e}();window.SyncEngine=new v,t.exports=window.SyncEngine},{"../logger/Logger":129,"../models/Config":150,"../utils":1176,"./Storage":167,"./SyncLogs":170,"./SyncQueue":171,"./TemporaryIds":172,"./UtilModels":173,"./VersionUpdater":174}],170:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.LOG_CMD_ERR=r.LOG_PIPE_DEFER=r.LOG_PIPE_ERR=r.LOG_RESP_ERR=void 0;var s,u=e("../utils/fp"),c=window,d=c.Signals;r.LOG_RESP_ERR="re";r.LOG_PIPE_ERR="pe";r.LOG_PIPE_DEFER="pd";r.LOG_CMD_ERR="ce";var f=(s={},l(s,"re","Error HTTP response received"),l(s,"pe","Data pipeline error"),l(s,"pd","Data pipeline process deferred due to unsync commands"),l(s,"ce","Commands error"),s),p=function(){function t(){var e=this;o(this,t),this.logs=[],d.connect("load_cached_data",function(){return e.loadCachedData()})}return i(t,[{key:"loadCachedData",value:function(){try{var e=$storage("synclogs/errors").get();if(!e)return;this.logs=e.map(function(e){var t={code:e.c,timestamp:e.t};return e.e&&(t.extra=e.e),t}),this.logs=this.logs.filter(function(e){return"pd"!==e.code}),this.logs=this.logs.filter(function(e){return"re"!==e.code}),this.logs=this.logs.map(function(e){return"re"===e.code&&(0,u.get)("extra.error",e)&&(e=n({},e),delete e.extra),e})}catch(e){}}},{key:"syncCachedData",value:function(){var e=this.logs.map(function(e){var t={c:e.code,t:e.timestamp};return e.extra&&(t.e=e.extra),t});$storage("synclogs/errors").set(e)}},{key:"log",value:function(e,t){var r=Date.now(),n={code:e,timestamp:r,extra:t};n.extra||delete n.extra,this.logs.push(n),this.logs=this.logs.slice(0,50),this.syncCachedData(),d.sendSignal("synclogs_updated",n)}},{key:"get",value:function(){return this.logs}},{key:"getReport",value:function(){var t=e("./SyncEngine"),r=t.sync_queue.get(),o=r.filter(function(e){return e.last_error}),a=r.filter(function(e){return!e.last_error}).length,i=o.length,l=this.logs.map(function(e){return e=n({},e),e.msg=f[e.code],e.isoTime=new Date(e.timestamp).toISOString(),delete e.code,e}),s=t.last_synced;return{reportCreatedAt:(new Date).toISOString(),logs:l,queueLength:r.length,firstRunCmdCount:a,failedCmdCount:i,lastSyncAt:s,failedCmds:o}}},{key:"errorLogTest",value:function(){try{throw new Error("SyncLogs error log test")}catch(e){this.log("pe",{error:e})}}}]),t}(),m=new p;window.SyncLogs=m;var h=m;r.default=h},{"../utils/fp":1166,"./SyncEngine":169}],171:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("./Storage"),l=i.$storage,s=function(){function e(){n(this,e),this.get=this.get.bind(this),this.add=this.add.bind(this),this.assignUnqiueIds=this.assignUnqiueIds.bind(this),this.save=this.save.bind(this),this.deleteItems=this.deleteItems.bind(this),this.clear=this.clear.bind(this),this.get()||this.clear()}return a(e,[{key:"get",value:function(){var e=l("Queue").get();return null===e&&(e=[],l("Queue").set(e)),e}},{key:"add",value:function(e){var t=this.get();e.uuid||(e.uuid=this.guid()),t.push(e),this.save(t)}},{key:"assignUnqiueIds",value:function(e){var t=!1,r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;l.uuid||(l.uuid=this.guid(),t=!0)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}t&&this.save(e)}},{key:"save",value:function(e){l("Queue").set(e)}},{key:"deleteItems",value:function(e){var t=this.get(),r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,s=function(e){return e.uuid===l.uuid};$arrayRemove(t,l,s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}this.save(t)}},{key:"clear",value:function(){l("Queue").set([])}},{key:"guid",value:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}]),e}();t.exports=s},{"./Storage":167}],172:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=window,l=i.Signals,s=e("./Storage"),u=s.$storage,c=function(){function e(){var t=this;n(this,e),this.generate=this.generate.bind(this),this.getRealId=this.getRealId.bind(this),this.getRealIds=this.getRealIds.bind(this),this.setRealIds=this.setRealIds.bind(this),this.clearOld=this.clearOld.bind(this),this.listenAll=this.listenAll.bind(this),this.waitToResolve=this.waitToResolve.bind(this),this.syncCachedData=this.syncCachedData.bind(this),this.loadCachedData=this.loadCachedData.bind(this),this.temp_counter=(new Date).getTime(),l.connect("load_cached_data",function(){t.loadCachedData()})}return a(e,null,[{key:"initClass",value:function(){this.prototype.listeners_all=[]}}]),a(e,[{key:"generate",value:function(e){var t="_".concat(this.temp_counter++);return this.cur_temp_ids[t]=e,this.syncCachedData(),t}},{key:"isTemporary",value:function(e){if($isString(e)){if(0===e.indexOf("_"))return!0;if(0===e.indexOf("$"))return!0}return!1}},{key:"getRealId",value:function(e){this.real_id_mapping||this.loadCachedData();var t=this.real_id_mapping[e];return t&&t||e}},{key:"getRealIds",value:function(e){this.real_id_mapping||this.loadCachedData();var t=[],r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;t.push(this.real_id_mapping[l]||l)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return t}},{key:"setRealIds",value:function(e){var t;if(0!==$keys(e).length){for(var r in e)t=e[r],this.real_id_mapping[r]=t,this.real_id_list.push(r);for(r in e){t=e[r];var n=this.cur_temp_ids[r];if(l.sendSignal("resolve_temp.".concat(n),r,t),this.listeners_all.length>0){var o=!0,a=!1,i=void 0;try{for(var s,u=this.listeners_all[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){(0,s.value)(r,t)}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}}}for(;this.real_id_list.length>250;){var c=this.real_id_list.shift();this.real_id_mapping[c]&&delete this.real_id_mapping[c]}this.syncCachedData()}}},{key:"clearOld",value:function(){this.cur_temp_ids={},this.syncCachedData()}},{key:"listenAll",value:function(e){this.listeners_all.push(e)}},{key:"waitToResolve",value:function(e,t){var r=this.getRealId(e);return this.isTemporary(r)?setTimeout($p(this.waitForResolve,e,t),500):t(r),!1}},{key:"syncCachedData",value:function(){u("RealIdMapping").set(this.real_id_mapping),u("RealIdList").set(this.real_id_list),u("CurTempIds").set(this.cur_temp_ids)}},{key:"sendBridgeUpdate",value:function(){l.sendSignal("bridge:model_update",{tempIds:this.real_id_mapping})}},{key:"loadCachedData",value:function(){var e=u("RealIdMapping").get();this.real_id_mapping=e||{};var t=u("RealIdList").get();this.real_id_list=t||[];var r=u("CurTempIds").get();this.cur_temp_ids=r||{},this.sendBridgeUpdate()}}]),e}();c.initClass(),window.TemporaryIds=new c,t.exports=window.TemporaryIds;var d=window.TemporaryIds;r.default=d},{"./Storage":167}],173:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=e("../utils/deps"),l=window,s=l.Signals,u=(0,i.defineDeps)("UtilModels",["SyncEngine"]),c=function(){function e(){n(this,e),this.daySort=this.daySort.bind(this),this.gSortByGeneric=this.gSortByGeneric.bind(this),this.checkIfAPIDeprecated=this.checkIfAPIDeprecated.bind(this),this.checkIfErrorIsLogout=this.checkIfErrorIsLogout.bind(this),this.normalizeIndent=this.normalizeIndent.bind(this),this.sortByDate=$p(this.gSortByGeneric,"time"),this.sortByPriority=$p(this.gSortByGeneric,"priority"),this.sortByResponsible=$p(this.gSortByGeneric,"assigned_by_uid")}return a(e,[{key:"getChildren",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];r&&n.push(t);var o=$index(t,e,function(e){return e.id===t.id});if(-1!==o){var a=e.slice(o+1,+e.length+1||void 0),i=!0,l=!1,s=void 0;try{for(var u,c=a[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value;if(d.indent<=t.indent)break;n.push(d)}}catch(e){l=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}}return n}},{key:"getParent",value:function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;if(s.id===t.id)break;r.push(s)}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}r.reverse();for(var u=0,c=r;u<c.length;u++){var d=c[u];if(d.indent<t.indent)return d}return null}},{key:"daySort",value:function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:-1!==e.day_order&&-1!==t.day_order?this.gSortByGeneric("day_order",t,e):e.project_id!==t.project_id?this.gSortByGeneric("project_id",t,e):this.sortByItemOrder(e,t)}},{key:"sortByItemOrder",value:function(e,t){return e.item_order<t.item_order?-1:e.item_order===t.item_order?0:1}},{key:"gSortByGeneric",value:function(e,t,r){if(!t[e]||!r[e])return 1;var n=t[e],o=r[e];return n===o?this.sortByItemOrder(t,r):n>o?-1:1}},{key:"syncLocalModel",value:function(e,t){var r,n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;s&&(r=t[s.id],r?$update(r,s):r=s,t[s.id]=r)}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}var c=!0;if(u.SyncEngine.queueIncludesErrors()&&(c=!1),c){var d=!0,f=!1,p=void 0;try{for(var m,h=$keys(t)[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var _=m.value;r=t[_];var y=!1;_.indexOf&&-1!==_.indexOf("_")&&(y=!0),r.is_deleted&&(y=!0),y&&delete t[_]}}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}}}},{key:"checkIfAPIDeprecated",value:function(e){try{if(e&&410===e.status)return alert(_("You're using an old version of Todoist. To make sure the app keeps working, update to the latest version.")),!0;var t=e.getResponseHeader("warning");if(t){var r=t.match(/119.+([\d]{4}-[\d]{2}-[\d]{2})/),n=r?r[1]:(new Date).toLocaleString(),o=_("Just a reminder that you're using an old version of Todoist that will stop working on {date}. To continue using Todoist, update to the latest version.").replace("{date}",n);return alert(o),!0}}catch(e){}return!1}},{key:"checkIfErrorIsLogout",value:function(e,t){var r=!1;if(-1!==e.indexOf("Not logged in")&&(r=!0),-1!==e.indexOf("Token not correct")&&(r=!0),-1!==e.indexOf("403 Forbidden")&&(r=!0),t&&403===t.status&&(r=!0),r&&!window.ACCOUNT_DELETED)return alert(_("It seems like our session has expired. Please re-login."),function(){return s.sendSignal("logout")}),!0}},{key:"normalizeIndent",value:function(e,t){e.indent>=t&&(e.indent=t),e.indent<1&&(e.indent=1)}}]),e}();window.UtilModels=t.exports=new c},{"../utils/deps":1154}],174:[function(e,t,r){"use strict";var n=window,o=n.Signals,a=e("../models/Config").default,i=e("../logger/Logger");r.check=function(e){try{var t=a.version,r=a.isBeta?e.web_static_beta_version:e.web_static_version;if(t>=r)return;if(!window.applicationCache)return;if(applicationCache.status===applicationCache.UNCACHED)return o.sendSignal("new_version_available",r),void localStorage.setItem("LastVersionUpdate",r);if([applicationCache.CHECKING,applicationCache.DOWNLOADING].includes(applicationCache.status))return;if(applicationCache.status===applicationCache.UPDATEREADY)return o.sendSignal("new_version_available",r),void localStorage.setItem("LastVersionUpdate",r);var n=function e(){o.sendSignal("new_version_available",r),localStorage.setItem("LastVersionUpdate",r);try{applicationCache.swapCache()}catch(e){}applicationCache.removeEventListener(e)};applicationCache.addEventListener("updateready",n);try{applicationCache.update()}catch(e){}}catch(e){i.captureError(e)}},r.reloadIfVersionUpdated=function(){try{var e=localStorage.getItem("LastVersionUpdate");return!!e&&(localStorage.removeItem("LastVersionUpdate"),(e=JSON.parse(e))!==a.version&&(l(),!0))}catch(e){i.captureError(e)}};var l=function(){localStorage.removeItem("LastVersionUpdate"),window.location.reload(!0)};r.loadNewVersion=l},{"../logger/Logger":129,"../models/Config":150}],175:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("../stores/store")),l=n(e("../stores/subscribeSelected")),s=e("../utils/fp"),u=e("../utils"),c=n(e("../models/SyncEngine")),d=n(e("../logger/Logger")),f=function e(){var t=this;o(this,e),a(this,"connect",function(e){try{if(!e)throw new Error("WebSocketManager: cannot connect() with invalid url: ".concat(t.url));if(t.url===e&&t.socket&&(0===t.socket.readyState||1===t.socket.readyState))return;t.socket&&t.disconnectExisting(),t.url=e,t.socket=new WebSocket(t.url),t.socket.addEventListener("message",t.handleMessage),t.socket.addEventListener("close",t.handleClose),t.socket.addEventListener("error",t.handleError)}catch(e){d.default.captureError(e,{tags:{where:"websockert"}})}}),a(this,"disconnectExisting",function(){try{t.socket.removeEventListener("message",t.handleMessage),t.socket.removeEventListener("close",t.handleClose),t.socket.removeEventListener("error",t.handleError),t.socket.close(),t.socket=null}catch(e){}}),a(this,"handleMessage",function(e){var r=JSON.parse(e.data);switch(r.type){case"token_reset":t.debouncedSync();break;case"sync_needed":r.client_id!==c.default.client_id&&t.debouncedSync()}}),a(this,"scheduleReconnect",function(){t.url&&!t.reconnectTimeout&&(t.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,t.connect(t.url)},5e3))}),a(this,"handleClose",function(){return t.scheduleReconnect()}),a(this,"handleError",function(){return t.scheduleReconnect()}),a(this,"healthCheck",function(){t.socket&&3!==t.socket.readyState||t.scheduleReconnect()}),a(this,"debouncedSync",(0,u.debounce)(function(){c.default.scheduleSync()},1e3)),(0,l.default)(i.default,(0,s.get)("user.websocket_url"),function(e){e&&t.connect(e)}),setInterval(this.healthCheck,3e5)},p=new f;r.default=p},{"../logger/Logger":129,"../models/SyncEngine":169,"../stores/store":1140,"../stores/subscribeSelected":1141,"../utils":1176,"../utils/fp":1166}],176:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return l(e)||i(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(){var e=d;(d=E.getState().user)&&d!=e&&(window.User=d,window.Settings={AMPM:1==d.time_format,US_DATES:1==d.date_format,START_PAGE:d.start_page,START_DAY:d.start_day?d.start_day:1,NEXT_WEEK:d.next_week?d.next_week:1},(0,f.isAsianLang)()&&(window.Settings.US_DATES=!0))}Object.defineProperty(r,"__esModule",{value:!0}),r.printProjectTasks=void 0;var d,f=e("../components/misc/Misc.js"),p=n(e("../components/opener/WindowOpener.js")),m=n(e("../logger/Logger")),h=e("../reducers/tooltip"),_=e("../reducers/stats"),y=e("../reducers/user"),v=e("../reducers/selectors"),g=e("../reducers/items"),b=e("../utils/fp"),w=window.Signals,E=e("../stores/store").default;E.subscribe(c),void 0===window.todoist&&(window.todoist={}),window.todoist.updateUser=function(e){E.dispatch((0,y.receivedUserUpdate)(e))},window.todoist.markTooltipUnseen=function(e){E.dispatch((0,h.markUnseen)(e))},window.todoist.openSettingWindow=function(e){p.showPrefs(e)},window.todoist.testSentry=function(){try{throw new Error("Sentry setup test")}catch(e){m.captureError(e)}},window.todoist.showTrialTooltip=function(){var e=s({},window.User,{is_premium:!1,free_trail_expires:void 0});E.dispatch((0,y.receivedUserUpdate)(e)),E.dispatch((0,h.scheduledUpdated)([].concat(o(E.getState().tooltip.scheduled),[h.TOOLTIP_PREMIUM_TRIAL])))},window.todoist.showPremiumWillExpireTooltip=function(){E.dispatch((0,h.scheduledUpdated)([].concat(o(E.getState().tooltip.scheduled),[h.TOOLTIP_PREMIUM_EXPIRING])))},window.todoist.showCompleteFirstTaskTooltip=function(){var e=new Date;e.setDate(e.getDate()-1),E.dispatch((0,y.receivedUserUpdate)({join_date:e})),E.dispatch((0,h.markUnseen)(h.TOOLTIP_COMPLETE_FIRST_TASK)),w.sendSignal("refresh_interface")},window.todoist.scheduleTooltip=function(e){E.dispatch((0,h.scheduledUpdated)([].concat(o(E.getState().tooltip.scheduled),[e])))},window.todoist.resetTodayCompletedCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;E.dispatch((0,_.resetTodayCount)(e))},window.todoist.resetThisWeekCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;E.dispatch((0,_.resetThisWeekCount)(e))},window.todoist.markTooltipUnseen=function(e){E.dispatch((0,h.markUnseen)(e))},window.todoist.store=E,window.todoist.printProjectList=function(){var e=$values(E.getState().projects);e.sort(function(e,t){return e.item_order-t.item_order}),console.table(e,["id","name","item_order","indent","parent_id","child_order"])};var j=function(e){var t=(0,g.itemGetSectionGroups)(e,E.getState()),r=(0,b.compose)(b.flatten,(0,b.map)(function(e){return[].concat(o(t[e]),[{}])}),function(e){return[null].concat(o(e))},(0,b.map)(function(e){return e.id}),(0,b.sortBy)("child_order"),(0,b.filter)(function(t){return t.project_id===e}),(0,b.get)("sections"))(E.getState());console.table(r,["id","content","project_id","section_id","item_order","indent","parent_id","child_order"])};r.printProjectTasks=j,window.todoist.printProjectTasks=j,window.todoist.printInbox=function(){window.todoist.printProjectTasks(E.getState().user.inbox_project)},window.todoist.printSortedProjectList=function(){var e=(0,v.sortedProjects)(E.getState());console.table(e,["id","name","item_order","indent","parent_id","child_order"])}},{"../components/misc/Misc.js":42,"../components/opener/WindowOpener.js":53,"../logger/Logger":129,"../reducers/items":1100,"../reducers/selectors":1128,"../reducers/stats":1130,"../reducers/tooltip":1133,"../reducers/user":1135,"../stores/store":1140,"../utils/fp":1166}],177:[function(e,t,r){!function(n,o){"object"==typeof r&&"object"==typeof t?t.exports=o(e("prop-types"),e("react"),e("classnames")):"function"==typeof define&&define.amd?define("reactist",["prop-types","react","classnames"],o):"object"==typeof r?r.reactist=o(e("prop-types"),e("react"),e("classnames")):n.reactist=o(n["prop-types"],n.React,n.classnames)}(window,function(e,t,r){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e
;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");return[r].concat(n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"})).concat([o]).join("\n")}var a;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(n[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&n[i[0]]||(r&&!i[2]?i[2]=r:r&&(i[2]="("+i[2]+") and ("+r+")"),t.push(i))}},t}},function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=p[n.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](n.parts[a]);for(;a<n.parts.length;a++)o.parts.push(u(n.parts[a],t))}else{var i=[];for(a=0;a<n.parts.length;a++)i.push(u(n.parts[a],t));p[n.id]={id:n.id,refs:1,parts:i}}}}function o(e,t){for(var r=[],n={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],l={css:a[1],media:a[2],sourceMap:a[3]};n[i]?n[i].parts.push(l):r.push(n[i]={id:i,parts:[l]})}return r}function a(e,t){var r=h(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=v[v.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),v.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=h(e.insertAt.before,r);r.insertBefore(t,o)}}function i(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=v.indexOf(e);t>=0&&v.splice(t,1)}function l(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){return r.nc}();n&&(e.attrs.nonce=n)}return s(t,e.attrs),a(e,t),t}function s(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function u(e,t){var r,n,o,u;if(t.transform&&e.css){if(!(u="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=u}if(t.singleton){var d=y++;r=_||(_=l(t)),n=c.bind(null,r,d,!1),o=c.bind(null,r,d,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",s(t,e.attrs),a(e,t),t}(t),n=function(e,t,r){var n=r.css,o=r.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(n=g(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([n],{type:"text/css"}),l=e.href;e.href=URL.createObjectURL(i),l&&URL.revokeObjectURL(l)}.bind(null,r,t),o=function(){i(r),r.href&&URL.revokeObjectURL(r.href)}):(r=l(t),n=function(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),o=function(){i(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function c(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}var d,f,p={},m=(d=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===f&&(f=d.apply(this,arguments)),f}),h=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),_=null,y=0,v=[],g=r(5);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=m()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=o(e,t);return n(r,t),function(e){for(var a=[],i=0;i<r.length;i++){var l=r[i];(s=p[l.id]).refs--,a.push(s)}for(e&&n(o(e,t),t),i=0;i<a.length;i++){var s;if(0===(s=a[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete p[s.id]}}}};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")})},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?r+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},,function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r(10);var u=r(1),c=r.n(u),d=r(0),f=r.n(d),p=r(2),m=r.n(p),h=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=e.height,l=e.width,s=t.height,u=t.width,c=r.height,d=r.width,f=n.x,p=n.y,m=_(n,r,t),h=y(n,r,t),v=m>=0&&m+u<=l,g=h>=0&&h+s<=i;return"top"===o?v&&p-s-a>=0:"right"===o?g&&f+d+u+a<=l:"left"===o?g&&f-u-a>=0:"bottom"===o&&v&&p+c+s+a<=i},_=function(e,t,r){return e.x+(t.width-r.width)/2},y=function(e,t,r){return e.y+(t.height-r.height)/2},v=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return"top"===e?function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:_(t,e,r),y:t.y-r.height-n}}(t,r,n,o):"right"===e?function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:t.x+e.width+n,y:y(t,e,r)}}(t,r,n,o):"bottom"===e?function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:_(t,e,r),y:t.y+e.height+n}}(t,r,n,o):"left"===e?function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:t.x-r.width-n,y:y(t,e,r)}}(t,r,n,o):r},g=function(e){function t(){var e,r,o,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return o=this,l=(e=a(t)).call.apply(e,[this].concat(c)),r=!l||"object"!==n(l)&&"function"!=typeof l?i(o):l,s(i(r),"_updatePopoverPosition",function(){for(var e=r.props,t=e.position,n=e.allowVaguePositioning,o=e.gapSize,a=r.wrapper.getBoundingClientRect(),i=r.popover.getBoundingClientRect(),l=document.documentElement,s=r.wrapper,u=!1;!u;)"absolute"!==getComputedStyle(s).getPropertyValue("position")&&s!==l&&s.parentElement?s=s.parentElement:u=!0;for(var c=s.getBoundingClientRect(),d={height:c.height,width:c.width},f={height:i.height,width:i.width},p={height:a.height,width:a.width},m={x:a.left-c.left,y:a.top-c.top},_={x:a.left,y:a.top},y="auto"===t?["top","right","bottom","left","top"]:"vertical"===t?["top","bottom"]:"horizontal"===t?["left","right"]:[t],g=0;g<y.length;g++){var b=y[g];if(h(d,f,p,m,b,o)||g===y.length-1){var w=v(b,p,_,f,o);r.popover.style.top="".concat(w.y,"px"),r.popover.style.left="".concat(w.x,"px"),n&&(w.x<0&&(r.popover.style.left="".concat(2*o,"px")),w.y+f.height>d.height&&(r.popover.style.top="".concat(d.height-f.height-2*o,"px"))),b!==t&&(r.popover.className=r._getClassNameForPosition(b));break}}}),s(i(r),"_getClassNameForPosition",function(e){var t=r.props,n=t.visible,o=t.withArrow,a=t.arrowClassName,i=m()("reactist popover",{visible:n});return n&&o?m()(i,a,{arrow_top:"bottom"===e,arrow_right:"left"===e,arrow_bottom:"auto"===e||"top"===e,arrow_left:"right"===e}):i}),s(i(r),"_updatePopoverRef",function(e){r.popover=e,"function"==typeof r.props.popoverRef&&r.props.popoverRef(e)}),s(i(r),"_updateWrapperRef",function(e){r.wrapper=e,"function"==typeof r.props.wrapperRef&&r.props.wrapperRef(e)}),r}var r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,c.a.Component),r=t,(u=[{key:"componentDidMount",value:function(){this.props.visible&&this._updatePopoverPosition()}},{key:"componentDidUpdate",value:function(e){if(this.wrapper&&this.props.visible){var t=e.position!==this.props.position,r=e.allowVaguePositioning!==this.props.allowVaguePositioning,n=e.visible!==this.props.visible,o=e.withArrow!==this.props.withArrow,a=e.gapSize!==this.props.gapSize,i=e.content!==this.props.content;(t||r||n||o||a||i)&&this._updatePopoverPosition()}}},{key:"render",value:function(){var e=this.props,t=e.position,r=e.wrapperClassName,n=e.popoverClassName,o=e.onMouseEnter,a=e.onMouseLeave,i=e.onClick,l=e.trigger,s=e.content,u=this._getClassNameForPosition(t),d=m()("reactist popover__content",n),f=m()("reactist popover__wrapper",r);return c.a.createElement("span",{className:f,onMouseEnter:o,onMouseLeave:a,onClick:i,ref:this._updateWrapperRef},l,c.a.createElement("span",{className:u,ref:this._updatePopoverRef},this.props.visible?c.a.createElement("span",{className:d},"function"==typeof s?s():s):null))}}])&&o(r.prototype,u),t}();g.displayName="Popover",g.defaultProps={position:"auto",gapSize:5},g.propTypes={position:f.a.oneOf(["auto","top","right","bottom","left","horizontal","vertical"]),allowVaguePositioning:f.a.bool,visible:f.a.bool.isRequired,content:f.a.oneOfType([f.a.string,f.a.arrayOf(f.a.node),f.a.func,f.a.node]).isRequired,trigger:f.a.oneOfType([f.a.string,f.a.arrayOf(f.a.node),f.a.node]),onClick:f.a.func,onMouseEnter:f.a.func,onMouseLeave:f.a.func,wrapperClassName:f.a.string,popoverClassName:f.a.string,arrowClassName:f.a.string,withArrow:f.a.bool,gapSize:f.a.number,wrapperRef:f.a.func,popoverRef:f.a.func},t.default=g},,function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r(12);var u=r(1),c=r.n(u),d=r(0),f=r.n(d),p=r(2),m=r.n(p),h=r(7),_=function(e){function t(){var e,r,o,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return o=this,l=(e=a(t)).call.apply(e,[this].concat(c)),r=!l||"object"!==n(l)&&"function"!=typeof l?i(o):l,s(i(r),"state",{visible:!1}),s(i(r),"_show",function(){r._delayAction(function(){r.setState(function(){return{visible:!0}}),r.props.hideOnScroll&&r._initScrollListener()},r.props.delayShow)}),s(i(r),"_hide",function(){r._delayAction(function(){r._clearDelayTimeout(),r.setState(function(){return{visible:!1}}),r.props.hideOnScroll&&r._removeScrollListener()},r.props.delayHide)}),s(i(r),"_updateTooltipRef",function(e){r.tooltip=e}),s(i(r),"_updateWrapperRef",function(e){r.wrapper=e}),r}var r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,c.a.Component),r=t,(u=[{key:"shouldComponentUpdate",value:function(e,t){return this.state.visible!==t.visible||this.props.position!==e.position||this.props.text!==e.text||this.props.hideOnScroll!==e.hideOnScroll||this.props.delayShow!==e.delayShow||this.props.delayHide!==e.delayHide||this.props.gapSize!==e.gapSize||this.props.children!==e.children}},{key:"componentWillUnmount",value:function(){this._clearDelayTimeout(),this._removeScrollListener()}},{key:"_initScrollListener",value:function(){document.addEventListener("scroll",this._hide,!0)}},{key:"_removeScrollListener",value:function(){document.removeEventListener("scroll",this._hide,!0)}},{key:"_clearDelayTimeout",value:function(){this.delayTimeout&&clearTimeout(this.delayTimeout)}},{key:"_delayAction",value:function(e,t){this._clearDelayTimeout(),this.delayTimeout=setTimeout(e,t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.position,n=t.allowVaguePositioning,o=t.wrapperClassName,a=t.tooltipClassName,i=t.text,l=t.children,s=t.gapSize,u=t.inverted,d=t.withArrow,f=m()("reactist tooltip__wrapper",o),p=m()("reactist tooltip__text",a,{inverted:u}),_=m()("reactist tooltip__arrow",{inverted:u});if(!i)return c.a.createElement("div",{className:f},l);var y=c.a.Children.map(l,function(t){return c.a.isValidElement(t)?c.a.cloneElement(t,{onClick:function(r){e._hide(),"function"==typeof t.props.onClick&&t.props.onClick(r)}}):t});return c.a.createElement(h.default,{position:r,visible:this.state.visible,trigger:y,content:i,popoverClassName:p,wrapperClassName:f,arrowClassName:_,onMouseEnter:this._show,onMouseLeave:this._hide,allowVaguePositioning:n,gapSize:s,popoverRef:this._updateTooltipRef,wrapperRef:this._updateWrapperRef,withArrow:d})}}])&&o(r.prototype,u),t}();_.displayName="Tooltip",_.defaultProps={position:"auto",hideOnScroll:!0,delayShow:500,delayHide:0,allowVaguePositioning:!1,inverted:!1,withArrow:!0,gapSize:5},_.propTypes={position:f.a.oneOf(["auto","top","right","bottom","left","horizontal","vertical"]),allowVaguePositioning:f.a.bool,text:f.a.oneOfType([f.a.string,f.a.arrayOf(f.a.node),f.a.func,f.a.node]).isRequired,hideOnScroll:f.a.bool,delayShow:f.a.number,delayHide:f.a.number,children:f.a.oneOfType([f.a.string,f.a.arrayOf(f.a.node),f.a.node]),wrapperClassName:f.a.string,tooltipClassName:f.a.string,inverted:f.a.bool,gapSize:f.a.number,withArrow:f.a.bool},t.default=_},function(e,t,r){var n=r(11);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,o),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(3)(!1)).push([e.i,".reactist.popover {\n  white-space: normal;\n  z-index: 1000;\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: none;\n  visibility: hidden;\n  opacity: 0;\n  transition: opacity 0.1s linear;\n}\n.reactist.popover__wrapper {\n  display: inline-block;\n  max-width: 100%;\n  cursor: unset;\n}\n.reactist.popover .popover__content {\n  max-width: 100%;\n  display: inline-flex;\n  border-radius: 3px;\n  color: #202020;\n  background-color: white;\n  border: 1px solid #dcdcdc;\n  box-shadow: 0 1px 8px 0 rgba(0, 0, 0, 0.08);\n}\n.reactist.popover.visible {\n  display: inline-block;\n  display: initial;\n  visibility: visible;\n  opacity: 1;\n}\n.reactist.popover.arrow_top:before {\n  position: absolute;\n  content: '';\n  height: 0;\n  width: 0;\n  top: -5px;\n  left: calc(50% - 5px);\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-bottom: 5px solid #dcdcdc;\n}\n.reactist.popover.arrow_top:after {\n  position: absolute;\n  content: '';\n  height: 0;\n  width: 0;\n  top: -4px;\n  left: calc(50% - 5px);\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-bottom: 5px solid white;\n}\n.reactist.popover.arrow_right:before {\n  position: absolute;\n  content: '';\n  height: 0;\n  width: 0;\n  bottom: calc(50% - 5px);\n  right: -5px;\n  border-left: 5px solid #dcdcdc;\n  border-bottom: 5px solid transparent;\n  border-top: 5px solid transparent;\n}\n.reactist.popover.arrow_right:after {\n  position: absolute;\n  content: '';\n  height: 0;\n  width: 0;\n  bottom: calc(50% - 5px);\n  right: -4px;\n  border-left: 5px solid white;\n  border-bottom: 5px solid transparent;\n  border-top: 5px solid transparent;\n}\n.reactist.popover.arrow_bottom:before {\n  position: absolute;\n  content: '';\n  height: 0;\n  width: 0;\n  bottom: -5px;\n  left: calc(50% - 5px);\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid #dcdcdc;\n}\n.reactist.popover.arrow_bottom:after {\n  position: absolute;\n  content: '';\n  height: 0;\n  width: 0;\n  bottom: -4px;\n  left: calc(50% - 5px);\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid white;\n}\n.reactist.popover.arrow_left:before {\n  position: absolute;\n  content: '';\n  height: 0;\n  width: 0;\n  bottom: calc(50% - 5px);\n  left: -5px;\n  border-right: 5px solid #dcdcdc;\n  border-bottom: 5px solid transparent;\n  border-top: 5px solid transparent;\n}\n.reactist.popover.arrow_left:after {\n  position: absolute;\n  content: '';\n  height: 0;\n  width: 0;\n  bottom: calc(50% - 5px);\n  left: -4px;\n  border-right: 5px solid white;\n  border-bottom: 5px solid transparent;\n  border-top: 5px solid transparent;\n}\n",""])},function(e,t,r){var n=r(13);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,o),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(3)(!1)).push([e.i,".reactist.tooltip__wrapper {\n  display: inline-block;\n  max-width: 100%;\n  cursor: unset;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__text {\n  font-size: 0.81rem;\n  color: #202020;\n  font-weight: 400;\n  line-height: 1.6;\n  text-align: center;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n  padding: 5px 10px;\n  max-width: 250px;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__text:not(.inverted) {\n  background-color: #333333;\n  color: white;\n  border: none;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__arrow:not(.inverted).arrow_top:before {\n  border-bottom-color: #333333;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__arrow:not(.inverted).arrow_top:after {\n  display: none;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__arrow:not(.inverted).arrow_right:before {\n  border-left-color: #333333;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__arrow:not(.inverted).arrow_right:after {\n  display: none;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__arrow:not(.inverted).arrow_bottom:before {\n  border-top-color: #333333;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__arrow:not(.inverted).arrow_bottom:after {\n  display: none;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__arrow:not(.inverted).arrow_left:before {\n  border-right-color: #333333;\n}\n.reactist.tooltip__wrapper .reactist.tooltip__arrow:not(.inverted).arrow_left:after {\n  display: none;\n}\n",""])}])})},{classnames:"classnames","prop-types":"prop-types",react:"react"}],178:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],179:[function(e,t,r){var n=e("./_wks")("unscopables"),o=Array.prototype;void 0==o[n]&&e("./_hide")(o,n,{}),t.exports=function(e){o[n][e]=!0}},{"./_hide":214,"./_wks":295}],180:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);t.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},{"./_string-at":272}],181:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],182:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":223}],183:[function(e,t,r){"use strict";var n=e("./_to-object"),o=e("./_to-absolute-index"),a=e("./_to-length");t.exports=[].copyWithin||function(e,t){var r=n(this),i=a(r.length),l=o(e,i),s=o(t,i),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?i:o(u,i))-s,i-l),d=1;for(s<l&&l<s+c&&(d=-1,s+=c-1,l+=c-1);c-- >0;)s in r?r[l]=r[s]:delete r[l],l+=d,s+=d;return r}},{"./_to-absolute-index":280,"./_to-length":284,"./_to-object":285}],184:[function(e,t,r){"use strict";var n=e("./_to-object"),o=e("./_to-absolute-index"),a=e("./_to-length");t.exports=function(e){for(var t=n(this),r=a(t.length),i=arguments.length,l=o(i>1?arguments[1]:void 0,r),s=i>2?arguments[2]:void 0,u=void 0===s?r:o(s,r);u>l;)t[l++]=e;return t}},{"./_to-absolute-index":280,"./_to-length":284,"./_to-object":285}],185:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),a=e("./_to-absolute-index");t.exports=function(e){return function(t,r,i){var l,s=n(t),u=o(s.length),c=a(i,u);if(e&&r!=r){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((e||c in s)&&s[c]===r)return e||c||0;return!e&&-1}}},{"./_to-absolute-index":280,"./_to-iobject":283,"./_to-length":284}],186:[function(e,t,r){var n=e("./_ctx"),o=e("./_iobject"),a=e("./_to-object"),i=e("./_to-length"),l=e("./_array-species-create");t.exports=function(e,t){var r=1==e,s=2==e,u=3==e,c=4==e,d=6==e,f=5==e||d,p=t||l;return function(t,l,m){for(var h,_,y=a(t),v=o(y),g=n(l,m,3),b=i(v.length),w=0,E=r?p(t,b):s?p(t,0):void 0;b>w;w++)if((f||w in v)&&(h=v[w],_=g(h,w,y),e))if(r)E[w]=_;else if(_)switch(e){case 3:return!0;case 5:return h;case 6:return w;case 2:E.push(h)}else if(c)return!1;return d?-1:u||c?c:E}}},{"./_array-species-create":188,"./_ctx":197,"./_iobject":219,"./_to-length":284,"./_to-object":285}],187:[function(e,t,r){var n=e("./_is-object"),o=e("./_is-array"),a=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":221,"./_is-object":223,"./_wks":295}],188:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":187}],189:[function(e,t,r){"use strict";var n=e("./_a-function"),o=e("./_is-object"),a=e("./_invoke"),i=[].slice,l={},s=function(e,t,r){if(!(t in l)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";l[t]=Function("F,a","return new F("+n.join(",")+")")}return l[t](e,r)};t.exports=Function.bind||function(e){var t=n(this),r=i.call(arguments,1),l=function(){var n=r.concat(i.call(arguments));return this instanceof l?s(t,n.length,n):a(t,n,e)};return o(t.prototype)&&(l.prototype=t.prototype),l}},{"./_a-function":178,"./_invoke":218,"./_is-object":223}],190:[function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),a="Arguments"==n(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=i(t=Object(e),o))?r:a?n(t):"Object"==(l=n(t))&&"function"==typeof t.callee?"Arguments":l}},{"./_cof":191,"./_wks":295}],191:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],192:[function(e,t,r){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),a=e("./_redefine-all"),i=e("./_ctx"),l=e("./_an-instance"),s=e("./_for-of"),u=e("./_iter-define"),c=e("./_iter-step"),d=e("./_set-species"),f=e("./_descriptors"),p=e("./_meta").fastKey,m=e("./_validate-collection"),h=f?"_s":"size",_=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,u){var c=e(function(e,n){l(e,c,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=n&&s(n,r,e[u],e)});return a(c.prototype,{clear:function(){for(var e=m(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var r=m(this,t),n=_(r,e);if(n){var o=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=o),o&&(o.p=a),r._f==n&&(r._f=o),r._l==n&&(r._l=a),r[h]--}return!!n},forEach:function(e){m(this,t);for(var r,n=i(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!_(m(this,t),e)}}),f&&n(c.prototype,"size",{get:function(){return m(this,t)[h]}}),c},def:function(e,t,r){var n,o,a=_(e,t);return a?a.v=r:(e._l=a={i:o=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[h]++,"F"!==o&&(e._i[o]=a)),e},getEntry:_,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=m(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?c(0,r.k):"values"==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?"entries":"values",!r,!0),d(t)}}},{"./_an-instance":181,"./_ctx":197,"./_descriptors":200,"./_for-of":210,"./_iter-define":227,"./_iter-step":229,"./_meta":236,"./_object-create":240,"./_object-dp":241,"./_redefine-all":260,"./_set-species":266,"./_validate-collection":292}],193:[function(e,t,r){"use strict";var n=e("./_redefine-all"),o=e("./_meta").getWeak,a=e("./_an-object"),i=e("./_is-object"),l=e("./_an-instance"),s=e("./_for-of"),u=e("./_array-methods"),c=e("./_has"),d=e("./_validate-collection"),f=u(5),p=u(6),m=0,h=function(e){return e._l||(e._l=new _)},_=function(){this.a=[]},y=function(e,t){return f(e.a,function(e){return e[0]===t})};_.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var r=y(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,a){var u=e(function(e,n){l(e,u,t,"_i"),e._t=t,e._i=m++,e._l=void 0,void 0!=n&&s(n,r,e[a],e)});return n(u.prototype,{delete:function(e){if(!i(e))return!1;var r=o(e);return!0===r?h(d(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!i(e))return!1;var r=o(e);return!0===r?h(d(this,t)).has(e):r&&c(r,this._i)}}),u},def:function(e,t,r){var n=o(a(t),!0);return!0===n?h(e).set(t,r):n[e._i]=r,e},ufstore:h}},{"./_an-instance":181,"./_an-object":182,"./_array-methods":186,"./_for-of":210,"./_has":213,"./_is-object":223,"./_meta":236,"./_redefine-all":260,"./_validate-collection":292}],194:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_export"),a=e("./_redefine"),i=e("./_redefine-all"),l=e("./_meta"),s=e("./_for-of"),u=e("./_an-instance"),c=e("./_is-object"),d=e("./_fails"),f=e("./_iter-detect"),p=e("./_set-to-string-tag"),m=e("./_inherit-if-required");t.exports=function(e,t,r,h,_,y){var v=n[e],g=v,b=_?"set":"add",w=g&&g.prototype,E={},j=function(e){var t=w[e];a(w,e,"delete"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof g&&(y||w.forEach&&!d(function(){(new g).entries().next()}))){var O=new g,S=O[b](y?{}:-0,1)!=O,P=d(function(){O.has(1)}),I=f(function(e){new g(e)}),k=!y&&d(function(){for(var e=new g,t=5;t--;)e[b](t,t);return!e.has(-0)});I||(g=t(function(t,r){u(t,g,e);var n=m(new v,t,g);return void 0!=r&&s(r,_,n[b],n),n}),g.prototype=w,w.constructor=g),(P||k)&&(j("delete"),j("has"),_&&j("get")),(k||S)&&j(b),y&&w.clear&&delete w.clear}else g=h.getConstructor(t,e,_,b),i(g.prototype,r),l.NEED=!0;return p(g,e),E[e]=g,o(o.G+o.W+o.F*(g!=v),E),y||h.setStrong(g,e,_),g}},{"./_an-instance":181,"./_export":204,"./_fails":206,"./_for-of":210,"./_global":212,"./_inherit-if-required":217,"./_is-object":223,"./_iter-detect":228,"./_meta":236,"./_redefine":261,"./_redefine-all":260,"./_set-to-string-tag":267}],195:[function(e,t,r){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},{}],196:[function(e,t,r){"use strict";var n=e("./_object-dp"),o=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},{"./_object-dp":241,"./_property-desc":259}],197:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":178}],198:[function(e,t,r){"use strict";var n=e("./_an-object"),o=e("./_to-primitive");t.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return o(n(this),"number"!=e)}},{"./_an-object":182,"./_to-primitive":286}],199:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],200:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":206}],201:[function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,a=n(o)&&n(o.createElement);t.exports=function(e){return a?o.createElement(e):{}}},{"./_global":212,"./_is-object":223}],202:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],203:[function(e,t,r){var n=e("./_object-keys"),o=e("./_object-gops"),a=e("./_object-pie");t.exports=function(e){var t=n(e),r=o.f;if(r)for(var i,l=r(e),s=a.f,u=0;l.length>u;)s.call(e,i=l[u++])&&t.push(i);return t}},{"./_object-gops":247,"./_object-keys":250,"./_object-pie":251}],204:[function(e,t,r){var n=e("./_global"),o=e("./_core"),a=e("./_hide"),i=e("./_redefine"),l=e("./_ctx"),s=function(e,t,r){var u,c,d,f,p=e&s.F,m=e&s.G,h=e&s.S,_=e&s.P,y=e&s.B,v=m?n:h?n[t]||(n[t]={}):(n[t]||{}).prototype,g=m?o:o[t]||(o[t]={}),b=g.prototype||(g.prototype={});m&&(r=t);for(u in r)c=!p&&v&&void 0!==v[u],d=(c?v:r)[u],f=y&&c?l(d,n):_&&"function"==typeof d?l(Function.call,d):d,v&&i(v,u,d,e&s.U),g[u]!=d&&a(g,u,f),_&&b[u]!=d&&(b[u]=d)};n.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},{"./_core":195,
"./_ctx":197,"./_global":212,"./_hide":214,"./_redefine":261}],205:[function(e,t,r){var n=e("./_wks")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},{"./_wks":295}],206:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],207:[function(e,t,r){"use strict";e("./es6.regexp.exec");var n=e("./_redefine"),o=e("./_hide"),a=e("./_fails"),i=e("./_defined"),l=e("./_wks"),s=e("./_regexp-exec"),u=l("species"),c=!a(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(e,t,r){var f=l(e),p=!a(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),m=p?!a(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[f](""),!t}):void 0;if(!p||!m||"replace"===e&&!c||"split"===e&&!d){var h=/./[f],_=r(i,f,""[e],function(e,t,r,n,o){return t.exec===s?p&&!o?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),y=_[0],v=_[1];n(String.prototype,e,y),o(RegExp.prototype,f,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},{"./_defined":199,"./_fails":206,"./_hide":214,"./_redefine":261,"./_regexp-exec":263,"./_wks":295,"./es6.regexp.exec":367}],208:[function(e,t,r){"use strict";var n=e("./_an-object");t.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":182}],209:[function(e,t,r){"use strict";function n(e,t,r,u,c,d,f,p){for(var m,h,_=c,y=0,v=!!f&&l(f,p,3);y<u;){if(y in r){if(m=v?v(r[y],y,t):r[y],h=!1,a(m)&&(h=m[s],h=void 0!==h?!!h:o(m)),h&&d>0)_=n(e,t,m,i(m.length),_,d-1)-1;else{if(_>=9007199254740991)throw TypeError();e[_]=m}_++}y++}return _}var o=e("./_is-array"),a=e("./_is-object"),i=e("./_to-length"),l=e("./_ctx"),s=e("./_wks")("isConcatSpreadable");t.exports=n},{"./_ctx":197,"./_is-array":221,"./_is-object":223,"./_to-length":284,"./_wks":295}],210:[function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),a=e("./_is-array-iter"),i=e("./_an-object"),l=e("./_to-length"),s=e("./core.get-iterator-method"),u={},c={},r=t.exports=function(e,t,r,d,f){var p,m,h,_,y=f?function(){return e}:s(e),v=n(r,d,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(p=l(e.length);p>g;g++)if((_=t?v(i(m=e[g])[0],m[1]):v(e[g]))===u||_===c)return _}else for(h=y.call(e);!(m=h.next()).done;)if((_=o(h,v,m.value,t))===u||_===c)return _};r.BREAK=u,r.RETURN=c},{"./_an-object":182,"./_ctx":197,"./_is-array-iter":220,"./_iter-call":225,"./_to-length":284,"./core.get-iterator-method":296}],211:[function(e,t,r){t.exports=e("./_shared")("native-function-to-string",Function.toString)},{"./_shared":269}],212:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],213:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],214:[function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":200,"./_object-dp":241,"./_property-desc":259}],215:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":212}],216:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":200,"./_dom-create":201,"./_fails":206}],217:[function(e,t,r){var n=e("./_is-object"),o=e("./_set-proto").set;t.exports=function(e,t,r){var a,i=t.constructor;return i!==r&&"function"==typeof i&&(a=i.prototype)!==r.prototype&&n(a)&&o&&o(e,a),e}},{"./_is-object":223,"./_set-proto":265}],218:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],219:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":191}],220:[function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||a[o]===e)}},{"./_iterators":230,"./_wks":295}],221:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":191}],222:[function(e,t,r){var n=e("./_is-object"),o=Math.floor;t.exports=function(e){return!n(e)&&isFinite(e)&&o(e)===e}},{"./_is-object":223}],223:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],224:[function(e,t,r){var n=e("./_is-object"),o=e("./_cof"),a=e("./_wks")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},{"./_cof":191,"./_is-object":223,"./_wks":295}],225:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},{"./_an-object":182}],226:[function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),a=e("./_set-to-string-tag"),i={};e("./_hide")(i,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(i,{next:o(1,r)}),a(e,t+" Iterator")}},{"./_hide":214,"./_object-create":240,"./_property-desc":259,"./_set-to-string-tag":267,"./_wks":295}],227:[function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),a=e("./_redefine"),i=e("./_hide"),l=e("./_iterators"),s=e("./_iter-create"),u=e("./_set-to-string-tag"),c=e("./_object-gpo"),d=e("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(e,t,r,m,h,_,y){s(r,t,m);var v,g,b,w=function(e){if(!f&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},E=t+" Iterator",j="values"==h,O=!1,S=e.prototype,P=S[d]||S["@@iterator"]||h&&S[h],I=P||w(h),k=h?j?w("entries"):I:void 0,T="Array"==t?S.entries||P:P;if(T&&(b=c(T.call(new e)))!==Object.prototype&&b.next&&(u(b,E,!0),n||"function"==typeof b[d]||i(b,d,p)),j&&P&&"values"!==P.name&&(O=!0,I=function(){return P.call(this)}),n&&!y||!f&&!O&&S[d]||i(S,d,I),l[t]=I,l[E]=p,h)if(v={values:j?I:w("values"),keys:_?I:w("keys"),entries:k},y)for(g in v)g in S||a(S,g,v[g]);else o(o.P+o.F*(f||O),t,v);return v}},{"./_export":204,"./_hide":214,"./_iter-create":226,"./_iterators":230,"./_library":231,"./_object-gpo":248,"./_redefine":261,"./_set-to-string-tag":267,"./_wks":295}],228:[function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var a=[7][n]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var a=[7],i=a[n]();i.next=function(){return{done:r=!0}},a[n]=function(){return i},e(a)}catch(e){}return r}},{"./_wks":295}],229:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],230:[function(e,t,r){t.exports={}},{}],231:[function(e,t,r){t.exports=!1},{}],232:[function(e,t,r){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},{}],233:[function(e,t,r){var n=e("./_math-sign"),o=Math.pow,a=o(2,-52),i=o(2,-23),l=o(2,127)*(2-i),s=o(2,-126),u=function(e){return e+1/a-1/a};t.exports=Math.fround||function(e){var t,r,o=Math.abs(e),c=n(e);return o<s?c*u(o/s/i)*s*i:(t=(1+i/a)*o,r=t-(t-o),r>l||r!=r?c*(1/0):c*r)}},{"./_math-sign":235}],234:[function(e,t,r){t.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],235:[function(e,t,r){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],236:[function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),a=e("./_has"),i=e("./_object-dp").f,l=0,s=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return s(Object.preventExtensions({}))}),c=function(e){i(e,n,{value:{i:"O"+ ++l,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!s(e))return"F";if(!t)return"E";c(e)}return e[n].i},f=function(e,t){if(!a(e,n)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[n].w},p=function(e){return u&&m.NEED&&s(e)&&!a(e,n)&&c(e),e},m=t.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},{"./_fails":206,"./_has":213,"./_is-object":223,"./_object-dp":241,"./_uid":290}],237:[function(e,t,r){var n=e("./_global"),o=e("./_task").set,a=n.MutationObserver||n.WebKitMutationObserver,i=n.process,l=n.Promise,s="process"==e("./_cof")(i);t.exports=function(){var e,t,r,u=function(){var n,o;for(s&&(n=i.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(s)r=function(){i.nextTick(u)};else if(!a||n.navigator&&n.navigator.standalone)if(l&&l.resolve){var c=l.resolve(void 0);r=function(){c.then(u)}}else r=function(){o.call(n,u)};else{var d=!0,f=document.createTextNode("");new a(u).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},{"./_cof":191,"./_global":212,"./_task":279}],238:[function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=o(t),this.reject=o(r)}var o=e("./_a-function");t.exports.f=function(e){return new n(e)}},{"./_a-function":178}],239:[function(e,t,r){"use strict";var n=e("./_descriptors"),o=e("./_object-keys"),a=e("./_object-gops"),i=e("./_object-pie"),l=e("./_to-object"),s=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=l(e),u=arguments.length,c=1,d=a.f,f=i.f;u>c;)for(var p,m=s(arguments[c++]),h=d?o(m).concat(d(m)):o(m),_=h.length,y=0;_>y;)p=h[y++],n&&!f.call(m,p)||(r[p]=m[p]);return r}:u},{"./_descriptors":200,"./_fails":206,"./_iobject":219,"./_object-gops":247,"./_object-keys":250,"./_object-pie":251,"./_to-object":285}],240:[function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),a=e("./_enum-bug-keys"),i=e("./_shared-key")("IE_PROTO"),l=function(){},s=function(){var t,r=e("./_dom-create")("iframe"),n=a.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;n--;)delete s.prototype[a[n]];return s()};t.exports=Object.create||function(e,t){var r;return null!==e?(l.prototype=n(e),r=new l,l.prototype=null,r[i]=e):r=s(),void 0===t?r:o(r,t)}},{"./_an-object":182,"./_dom-create":201,"./_enum-bug-keys":202,"./_html":215,"./_object-dps":242,"./_shared-key":268}],241:[function(e,t,r){var n=e("./_an-object"),o=e("./_ie8-dom-define"),a=e("./_to-primitive"),i=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),o)try{return i(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":182,"./_descriptors":200,"./_ie8-dom-define":216,"./_to-primitive":286}],242:[function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),a=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var r,i=a(t),l=i.length,s=0;l>s;)n.f(e,r=i[s++],t[r]);return e}},{"./_an-object":182,"./_descriptors":200,"./_object-dp":241,"./_object-keys":250}],243:[function(e,t,r){"use strict";t.exports=e("./_library")||!e("./_fails")(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete e("./_global")[t]})},{"./_fails":206,"./_global":212,"./_library":231}],244:[function(e,t,r){var n=e("./_object-pie"),o=e("./_property-desc"),a=e("./_to-iobject"),i=e("./_to-primitive"),l=e("./_has"),s=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?u:function(e,t){if(e=a(e),t=i(t,!0),s)try{return u(e,t)}catch(e){}if(l(e,t))return o(!n.f.call(e,t),e[t])}},{"./_descriptors":200,"./_has":213,"./_ie8-dom-define":216,"./_object-pie":251,"./_property-desc":259,"./_to-iobject":283,"./_to-primitive":286}],245:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopn").f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(e){return i.slice()}};t.exports.f=function(e){return i&&"[object Window]"==a.call(e)?l(e):o(n(e))}},{"./_object-gopn":246,"./_to-iobject":283}],246:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"./_enum-bug-keys":202,"./_object-keys-internal":249}],247:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],248:[function(e,t,r){var n=e("./_has"),o=e("./_to-object"),a=e("./_shared-key")("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},{"./_has":213,"./_shared-key":268,"./_to-object":285}],249:[function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),a=e("./_array-includes")(!1),i=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,l=o(e),s=0,u=[];for(r in l)r!=i&&n(l,r)&&u.push(r);for(;t.length>s;)n(l,r=t[s++])&&(~a(u,r)||u.push(r));return u}},{"./_array-includes":185,"./_has":213,"./_shared-key":268,"./_to-iobject":283}],250:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":202,"./_object-keys-internal":249}],251:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],252:[function(e,t,r){var n=e("./_export"),o=e("./_core"),a=e("./_fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",i)}},{"./_core":195,"./_export":204,"./_fails":206}],253:[function(e,t,r){var n=e("./_descriptors"),o=e("./_object-keys"),a=e("./_to-iobject"),i=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r,l=a(t),s=o(l),u=s.length,c=0,d=[];u>c;)r=s[c++],n&&!i.call(l,r)||d.push(e?[r,l[r]]:l[r]);return d}}},{"./_descriptors":200,"./_object-keys":250,"./_object-pie":251,"./_to-iobject":283}],254:[function(e,t,r){var n=e("./_object-gopn"),o=e("./_object-gops"),a=e("./_an-object"),i=e("./_global").Reflect;t.exports=i&&i.ownKeys||function(e){var t=n.f(a(e)),r=o.f;return r?t.concat(r(e)):t}},{"./_an-object":182,"./_global":212,"./_object-gopn":246,"./_object-gops":247}],255:[function(e,t,r){var n=e("./_global").parseFloat,o=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!=-1/0?function(e){var t=o(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},{"./_global":212,"./_string-trim":277,"./_string-ws":278}],256:[function(e,t,r){var n=e("./_global").parseInt,o=e("./_string-trim").trim,a=e("./_string-ws"),i=/^[-+]?0[xX]/;t.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(e,t){var r=o(String(e),3);return n(r,t>>>0||(i.test(r)?16:10))}:n},{"./_global":212,"./_string-trim":277,"./_string-ws":278}],257:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],258:[function(e,t,r){var n=e("./_an-object"),o=e("./_is-object"),a=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},{"./_an-object":182,"./_is-object":223,"./_new-promise-capability":238}],259:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],260:[function(e,t,r){var n=e("./_redefine");t.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},{"./_redefine":261}],261:[function(e,t,r){var n=e("./_global"),o=e("./_hide"),a=e("./_has"),i=e("./_uid")("src"),l=e("./_function-to-string"),s=(""+l).split("toString");e("./_core").inspectSource=function(e){return l.call(e)},(t.exports=function(e,t,r,l){var u="function"==typeof r;u&&(a(r,"name")||o(r,"name",t)),e[t]!==r&&(u&&(a(r,i)||o(r,i,e[t]?""+e[t]:s.join(String(t)))),e===n?e[t]=r:l?e[t]?e[t]=r:o(e,t,r):(delete e[t],o(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||l.call(this)})},{"./_core":195,"./_function-to-string":211,"./_global":212,"./_has":213,"./_hide":214,"./_uid":290}],262:[function(e,t,r){"use strict";var n=e("./_classof"),o=RegExp.prototype.exec;t.exports=function(e,t){var r=e.exec;if("function"==typeof r){var a=r.call(e,t);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},{"./_classof":190}],263:[function(e,t,r){"use strict";var n=e("./_flags"),o=RegExp.prototype.exec,a=String.prototype.replace,i=o,l=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),s=void 0!==/()??/.exec("")[1];(l||s)&&(i=function(e){var t,r,i,u,c=this;return s&&(r=new RegExp("^"+c.source+"$(?!\\s)",n.call(c))),l&&(t=c.lastIndex),i=o.call(c,e),l&&i&&(c.lastIndex=c.global?i.index+i[0].length:t),s&&i&&i.length>1&&a.call(i[0],r,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(i[u]=void 0)}),i}),t.exports=i},{"./_flags":208}],264:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],265:[function(e,t,r){var n=e("./_is-object"),o=e("./_an-object"),a=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return a(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:a}},{"./_an-object":182,"./_ctx":197,"./_is-object":223,"./_object-gopd":244}],266:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_object-dp"),a=e("./_descriptors"),i=e("./_wks")("species");t.exports=function(e){var t=n[e];a&&t&&!t[i]&&o.f(t,i,{configurable:!0,get:function(){return this}})}},{"./_descriptors":200,"./_global":212,"./_object-dp":241,"./_wks":295}],267:[function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),a=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},{"./_has":213,"./_object-dp":241,"./_wks":295}],268:[function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":269,"./_uid":290}],269:[function(e,t,r){var n=e("./_core"),o=e("./_global"),a=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},{"./_core":195,"./_global":212,"./_library":231}],270:[function(e,t,r){var n=e("./_an-object"),o=e("./_a-function"),a=e("./_wks")("species");t.exports=function(e,t){var r,i=n(e).constructor;return void 0===i||void 0==(r=n(i)[a])?t:o(r)}},{"./_a-function":178,"./_an-object":182,"./_wks":295}],271:[function(e,t,r){"use strict";var n=e("./_fails");t.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},{"./_fails":206}],272:[function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var a,i,l=String(o(t)),s=n(r),u=l.length;return s<0||s>=u?e?"":void 0:(a=l.charCodeAt(s),a<55296||a>56319||s+1===u||(i=l.charCodeAt(s+1))<56320||i>57343?e?l.charAt(s):a:e?l.slice(s,s+2):i-56320+(a-55296<<10)+65536)}}},{"./_defined":199,"./_to-integer":282}],273:[function(e,t,r){var n=e("./_is-regexp"),o=e("./_defined");t.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(e))}},{"./_defined":199,"./_is-regexp":224}],274:[function(e,t,r){var n=e("./_export"),o=e("./_fails"),a=e("./_defined"),i=/"/g,l=function(e,t,r,n){var o=String(a(e)),l="<"+t;return""!==r&&(l+=" "+r+'="'+String(n).replace(i,"&quot;")+'"'),l+">"+o+"</"+t+">"};t.exports=function(e,t){var r={};r[e]=t(l),n(n.P+n.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},{"./_defined":199,"./_export":204,"./_fails":206}],275:[function(e,t,r){var n=e("./_to-length"),o=e("./_string-repeat"),a=e("./_defined");t.exports=function(e,t,r,i){var l=String(a(e)),s=l.length,u=void 0===r?" ":String(r),c=n(t);if(c<=s||""==u)return l;var d=c-s,f=o.call(u,Math.ceil(d/u.length));return f.length>d&&(f=f.slice(0,d)),i?f+l:l+f}},{"./_defined":199,"./_string-repeat":276,"./_to-length":284}],276:[function(e,t,r){"use strict";var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){var t=String(o(this)),r="",a=n(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},{"./_defined":199,"./_to-integer":282}],277:[function(e,t,r){var n=e("./_export"),o=e("./_defined"),a=e("./_fails"),i=e("./_string-ws"),l="["+i+"]",s="\u200b\x85",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(e,t,r){var o={},l=a(function(){return!!i[e]()||s[e]()!=s}),u=o[e]=l?t(f):i[e];r&&(o[r]=u),n(n.P+n.F*l,"String",o)},f=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};t.exports=d},{"./_defined":199,"./_export":204,"./_fails":206,"./_string-ws":278}],278:[function(e,t,r){t.exports="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],279:[function(e,t,r){var n,o,a,i=e("./_ctx"),l=e("./_invoke"),s=e("./_html"),u=e("./_dom-create"),c=e("./_global"),d=c.process,f=c.setImmediate,p=c.clearImmediate,m=c.MessageChannel,h=c.Dispatch,_=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){v.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++_]=function(){l("function"==typeof e?e:Function(e),t)},n(_),_},p=function(e){delete y[e]},"process"==e("./_cof")(d)?n=function(e){d.nextTick(i(v,e,1))}:h&&h.now?n=function(e){h.now(i(v,e,1))}:m?(o=new m,a=o.port2,o.port1.onmessage=g,n=i(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",g,!1)):n="onreadystatechange"in u("script")?function(e){s.appendChild(u("script")).onreadystatechange=function(){s.removeChild(this),v.call(e)}}:function(e){setTimeout(i(v,e,1),0)}),t.exports={set:f,clear:p}},{"./_cof":191,"./_ctx":197,"./_dom-create":201,"./_global":212,"./_html":215,"./_invoke":218}],280:[function(e,t,r){var n=e("./_to-integer"),o=Math.max,a=Math.min;t.exports=function(e,t){return e=n(e),e<0?o(e+t,0):a(e,t)}},{"./_to-integer":282}],281:[function(e,t,r){var n=e("./_to-integer"),o=e("./_to-length");t.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw RangeError("Wrong length!");return r}},{"./_to-integer":282,"./_to-length":284}],282:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],283:[function(e,t,r){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":199,"./_iobject":219}],284:[function(e,t,r){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":282}],285:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":199}],286:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":223}],287:[function(e,t,r){"use strict";if(e("./_descriptors")){var n=e("./_library"),o=e("./_global"),a=e("./_fails"),i=e("./_export"),l=e("./_typed"),s=e("./_typed-buffer"),u=e("./_ctx"),c=e("./_an-instance"),d=e("./_property-desc"),f=e("./_hide"),p=e("./_redefine-all"),m=e("./_to-integer"),h=e("./_to-length"),_=e("./_to-index"),y=e("./_to-absolute-index"),v=e("./_to-primitive"),g=e("./_has"),b=e("./_classof"),w=e("./_is-object"),E=e("./_to-object"),j=e("./_is-array-iter"),O=e("./_object-create"),S=e("./_object-gpo"),P=e("./_object-gopn").f,I=e("./core.get-iterator-method"),k=e("./_uid"),T=e("./_wks"),C=e("./_array-methods"),D=e("./_array-includes"),A=e("./_species-constructor"),M=e("./es6.array.iterator"),x=e("./_iterators"),R=e("./_iter-detect"),N=e("./_set-species"),L=e("./_array-fill"),$=e("./_array-copy-within"),U=e("./_object-dp"),B=e("./_object-gopd"),V=U.f,F=B.f,H=o.RangeError,q=o.TypeError,G=o.Uint8Array,z=Array.prototype,W=s.ArrayBuffer,Y=s.DataView,K=C(0),J=C(2),Q=C(3),X=C(4),Z=C(5),ee=C(6),te=D(!0),re=D(!1),ne=M.values,oe=M.keys,ae=M.entries,ie=z.lastIndexOf,le=z.reduce,se=z.reduceRight,ue=z.join,ce=z.sort,de=z.slice,fe=z.toString,pe=z.toLocaleString,me=T("iterator"),he=T("toStringTag"),_e=k("typed_constructor"),ye=k("def_constructor"),ve=l.CONSTR,ge=l.TYPED,be=l.VIEW,we=C(1,function(e,t){return Pe(A(e,e[ye]),t)}),Ee=a(function(){return 1===new G(new Uint16Array([1]).buffer)[0]}),je=!!G&&!!G.prototype.set&&a(function(){new G(1).set({})}),Oe=function(e,t){var r=m(e);if(r<0||r%t)throw H("Wrong offset!");return r},Se=function(e){if(w(e)&&ge in e)return e;throw q(e+" is not a typed array!")},Pe=function(e,t){if(!(w(e)&&_e in e))throw q("It is not a typed array constructor!");return new e(t)},Ie=function(e,t){return ke(A(e,e[ye]),t)},ke=function(e,t){for(var r=0,n=t.length,o=Pe(e,n);n>r;)o[r]=t[r++];return o},Te=function(e,t,r){V(e,t,{get:function(){return this._d[r]}})},Ce=function(e){var t,r,n,o,a,i,l=E(e),s=arguments.length,c=s>1?arguments[1]:void 0,d=void 0!==c,f=I(l);if(void 0!=f&&!j(f)){for(i=f.call(l),n=[],t=0;!(a=i.next()).done;t++)n.push(a.value);l=n}for(d&&s>2&&(c=u(c,arguments[2],2)),t=0,r=h(l.length),o=Pe(this,r);r>t;t++)o[t]=d?c(l[t],t):l[t];return o},De=function(){for(var e=0,t=arguments.length,r=Pe(this,t);t>e;)r[e]=arguments[e++];return r},Ae=!!G&&a(function(){pe.call(new G(1))}),Me=function(){return pe.apply(Ae?de.call(Se(this)):Se(this),arguments)},xe={copyWithin:function(e,t){return $.call(Se(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return X(Se(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return L.apply(Se(this),arguments)},filter:function(e){return Ie(this,J(Se(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Se(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Se(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){K(Se(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(Se(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Se(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Se(this),arguments)},lastIndexOf:function(e){return ie.apply(Se(this),arguments)},map:function(e){return we(Se(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return le.apply(Se(this),arguments)},reduceRight:function(e){return se.apply(Se(this),arguments)},reverse:function(){for(var e,t=this,r=Se(t).length,n=Math.floor(r/2),o=0;o<n;)e=t[o],t[o++]=t[--r],t[r]=e;return t},some:function(e){return Q(Se(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ce.call(Se(this),e)},subarray:function(e,t){var r=Se(this),n=r.length,o=y(e,n);return new(A(r,r[ye]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,h((void 0===t?n:y(t,n))-o))}},Re=function(e,t){return Ie(this,de.call(Se(this),e,t))},Ne=function(e){Se(this);var t=Oe(arguments[1],1),r=this.length,n=E(e),o=h(n.length),a=0;if(o+t>r)throw H("Wrong length!");for(;a<o;)this[t+a]=n[a++]},Le={entries:function(){return ae.call(Se(this))},keys:function(){return oe.call(Se(this))},values:function(){return ne.call(Se(this))}},$e=function(e,t){return w(e)&&e[ge]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ue=function(e,t){return $e(e,t=v(t,!0))?d(2,e[t]):F(e,t)},Be=function(e,t,r){return!($e(e,t=v(t,!0))&&w(r)&&g(r,"value"))||g(r,"get")||g(r,"set")||r.configurable||g(r,"writable")&&!r.writable||g(r,"enumerable")&&!r.enumerable?V(e,t,r):(e[t]=r.value,e)};ve||(B.f=Ue,U.f=Be),i(i.S+i.F*!ve,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:Be}),a(function(){fe.call({})})&&(fe=pe=function(){return ue.call(this)});var Ve=p({},xe);p(Ve,Le),f(Ve,me,Le.values),p(Ve,{slice:Re,set:Ne,constructor:function(){},toString:fe,toLocaleString:Me}),Te(Ve,"buffer","b"),Te(Ve,"byteOffset","o"),Te(Ve,"byteLength","l"),Te(Ve,"length","e"),V(Ve,he,{get:function(){return this[ge]}}),t.exports=function(e,t,r,s){s=!!s;var u=e+(s?"Clamped":"")+"Array",d="get"+e,p="set"+e,m=o[u],y=m||{},v=m&&S(m),g=!m||!l.ABV,E={},j=m&&m.prototype,I=function(e,r){var n=e._d;return n.v[d](r*t+n.o,Ee)},k=function(e,r,n){var o=e._d;s&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),o.v[p](r*t+o.o,n,Ee)},T=function(e,t){V(e,t,{get:function(){return I(this,t)},set:function(e){return k(this,t,e)},enumerable:!0})};g?(m=r(function(e,r,n,o){c(e,m,u,"_d");var a,i,l,s,d=0,p=0;if(w(r)){if(!(r instanceof W||"ArrayBuffer"==(s=b(r))||"SharedArrayBuffer"==s))return ge in r?ke(m,r):Ce.call(m,r);a=r,p=Oe(n,t);var y=r.byteLength;if(void 0===o){if(y%t)throw H("Wrong length!");if((i=y-p)<0)throw H("Wrong length!")}else if((i=h(o)*t)+p>y)throw H("Wrong length!");l=i/t}else l=_(r),i=l*t,a=new W(i);for(f(e,"_d",{b:a,o:p,l:i,e:l,v:new Y(a)});d<l;)T(e,d++)}),j=m.prototype=O(Ve),f(j,"constructor",m)):a(function(){m(1)})&&a(function(){new m(-1)})&&R(function(e){new m,new m(null),new m(1.5),new m(e)},!0)||(m=r(function(e,r,n,o){c(e,m,u);var a;return w(r)?r instanceof W||"ArrayBuffer"==(a=b(r))||"SharedArrayBuffer"==a?void 0!==o?new y(r,Oe(n,t),o):void 0!==n?new y(r,Oe(n,t)):new y(r):ge in r?ke(m,r):Ce.call(m,r):new y(_(r))}),K(v!==Function.prototype?P(y).concat(P(v)):P(y),function(e){e in m||f(m,e,y[e])}),m.prototype=j,n||(j.constructor=m));var C=j[me],D=!!C&&("values"==C.name||void 0==C.name),A=Le.values;f(m,_e,!0),f(j,ge,u),f(j,be,!0),f(j,ye,m),(s?new m(1)[he]==u:he in j)||V(j,he,{get:function(){return u}}),E[u]=m,i(i.G+i.W+i.F*(m!=y),E),i(i.S,u,{BYTES_PER_ELEMENT:t}),i(i.S+i.F*a(function(){y.of.call(m,1)}),u,{from:Ce,of:De}),"BYTES_PER_ELEMENT"in j||f(j,"BYTES_PER_ELEMENT",t),i(i.P,u,xe),N(u),i(i.P+i.F*je,u,{set:Ne}),i(i.P+i.F*!D,u,Le),n||j.toString==fe||(j.toString=fe),i(i.P+i.F*a(function(){new m(1).slice()}),u,{slice:Re}),i(i.P+i.F*(a(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!a(function(){j.toLocaleString.call([1,2])})),u,{toLocaleString:Me}),x[u]=D?C:A,n||D||f(j,me,A)}}else t.exports=function(){}},{"./_an-instance":181,"./_array-copy-within":183,"./_array-fill":184,"./_array-includes":185,"./_array-methods":186,"./_classof":190,"./_ctx":197,"./_descriptors":200,"./_export":204,"./_fails":206,"./_global":212,"./_has":213,"./_hide":214,"./_is-array-iter":220,"./_is-object":223,
"./_iter-detect":228,"./_iterators":230,"./_library":231,"./_object-create":240,"./_object-dp":241,"./_object-gopd":244,"./_object-gopn":246,"./_object-gpo":248,"./_property-desc":259,"./_redefine-all":260,"./_set-species":266,"./_species-constructor":270,"./_to-absolute-index":280,"./_to-index":281,"./_to-integer":282,"./_to-length":284,"./_to-object":285,"./_to-primitive":286,"./_typed":289,"./_typed-buffer":288,"./_uid":290,"./_wks":295,"./core.get-iterator-method":296,"./es6.array.iterator":302}],288:[function(e,t,r){"use strict";function n(e,t,r){var n,o,a,i=new Array(r),l=8*r-t-1,s=(1<<l)-1,u=s>>1,c=23===t?$(2,-24)-$(2,-77):0,d=0,f=e<0||0===e&&1/e<0?1:0;for(e=L(e),e!=e||e===R?(o=e!=e?1:0,n=s):(n=U(B(e)/V),e*(a=$(2,-n))<1&&(n--,a*=2),e+=n+u>=1?c/a:c*$(2,1-u),e*a>=2&&(n++,a/=2),n+u>=s?(o=0,n=s):n+u>=1?(o=(e*a-1)*$(2,t),n+=u):(o=e*$(2,u-1)*$(2,t),n=0));t>=8;i[d++]=255&o,o/=256,t-=8);for(n=n<<t|o,l+=t;l>0;i[d++]=255&n,n/=256,l-=8);return i[--d]|=128*f,i}function o(e,t,r){var n,o=8*r-t-1,a=(1<<o)-1,i=a>>1,l=o-7,s=r-1,u=e[s--],c=127&u;for(u>>=7;l>0;c=256*c+e[s],s--,l-=8);for(n=c&(1<<-l)-1,c>>=-l,l+=t;l>0;n=256*n+e[s],s--,l-=8);if(0===c)c=1-i;else{if(c===a)return n?NaN:u?-R:R;n+=$(2,t),c-=i}return(u?-1:1)*n*$(2,c-t)}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function i(e){return[255&e]}function l(e){return[255&e,e>>8&255]}function s(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function u(e){return n(e,52,8)}function c(e){return n(e,23,4)}function d(e,t,r){P(e[T],t,{get:function(){return this[r]}})}function f(e,t,r,n){var o=+r,a=O(o);if(a+t>e[H])throw x(C);var i=e[F]._b,l=a+e[q],s=i.slice(l,l+t);return n?s:s.reverse()}function p(e,t,r,n,o,a){var i=+r,l=O(i);if(l+t>e[H])throw x(C);for(var s=e[F]._b,u=l+e[q],c=n(+o),d=0;d<t;d++)s[u+d]=c[a?d:t-d-1]}var m=e("./_global"),h=e("./_descriptors"),_=e("./_library"),y=e("./_typed"),v=e("./_hide"),g=e("./_redefine-all"),b=e("./_fails"),w=e("./_an-instance"),E=e("./_to-integer"),j=e("./_to-length"),O=e("./_to-index"),S=e("./_object-gopn").f,P=e("./_object-dp").f,I=e("./_array-fill"),k=e("./_set-to-string-tag"),T="prototype",C="Wrong index!",D=m.ArrayBuffer,A=m.DataView,M=m.Math,x=m.RangeError,R=m.Infinity,N=D,L=M.abs,$=M.pow,U=M.floor,B=M.log,V=M.LN2,F=h?"_b":"buffer",H=h?"_l":"byteLength",q=h?"_o":"byteOffset";if(y.ABV){if(!b(function(){D(1)})||!b(function(){new D(-1)})||b(function(){return new D,new D(1.5),new D(NaN),"ArrayBuffer"!=D.name})){D=function(e){return w(this,D),new N(O(e))};for(var G,z=D[T]=N[T],W=S(N),Y=0;W.length>Y;)(G=W[Y++])in D||v(D,G,N[G]);_||(z.constructor=D)}var K=new A(new D(2)),J=A[T].setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||g(A[T],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else D=function(e){w(this,D,"ArrayBuffer");var t=O(e);this._b=I.call(new Array(t),0),this[H]=t},A=function(e,t,r){w(this,A,"DataView"),w(e,D,"DataView");var n=e[H],o=E(t);if(o<0||o>n)throw x("Wrong offset!");if(r=void 0===r?n-o:j(r),o+r>n)throw x("Wrong length!");this[F]=e,this[q]=o,this[H]=r},h&&(d(D,"byteLength","_l"),d(A,"buffer","_b"),d(A,"byteLength","_l"),d(A,"byteOffset","_o")),g(A[T],{getInt8:function(e){return f(this,1,e)[0]<<24>>24},getUint8:function(e){return f(this,1,e)[0]},getInt16:function(e){var t=f(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=f(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return a(f(this,4,e,arguments[1]))},getUint32:function(e){return a(f(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return o(f(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return o(f(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){p(this,1,e,i,t)},setUint8:function(e,t){p(this,1,e,i,t)},setInt16:function(e,t){p(this,2,e,l,t,arguments[2])},setUint16:function(e,t){p(this,2,e,l,t,arguments[2])},setInt32:function(e,t){p(this,4,e,s,t,arguments[2])},setUint32:function(e,t){p(this,4,e,s,t,arguments[2])},setFloat32:function(e,t){p(this,4,e,c,t,arguments[2])},setFloat64:function(e,t){p(this,8,e,u,t,arguments[2])}});k(D,"ArrayBuffer"),k(A,"DataView"),v(A[T],y.VIEW,!0),r.ArrayBuffer=D,r.DataView=A},{"./_an-instance":181,"./_array-fill":184,"./_descriptors":200,"./_fails":206,"./_global":212,"./_hide":214,"./_library":231,"./_object-dp":241,"./_object-gopn":246,"./_redefine-all":260,"./_set-to-string-tag":267,"./_to-index":281,"./_to-integer":282,"./_to-length":284,"./_typed":289}],289:[function(e,t,r){for(var n,o=e("./_global"),a=e("./_hide"),i=e("./_uid"),l=i("typed_array"),s=i("view"),u=!(!o.ArrayBuffer||!o.DataView),c=u,d=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(n=o[f[d++]])?(a(n.prototype,l,!0),a(n.prototype,s,!0)):c=!1;t.exports={ABV:u,CONSTR:c,TYPED:l,VIEW:s}},{"./_global":212,"./_hide":214,"./_uid":290}],290:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],291:[function(e,t,r){var n=e("./_global"),o=n.navigator;t.exports=o&&o.userAgent||""},{"./_global":212}],292:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":223}],293:[function(e,t,r){var n=e("./_global"),o=e("./_core"),a=e("./_library"),i=e("./_wks-ext"),l=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:i.f(e)})}},{"./_core":195,"./_global":212,"./_library":231,"./_object-dp":241,"./_wks-ext":294}],294:[function(e,t,r){r.f=e("./_wks")},{"./_wks":295}],295:[function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),a=e("./_global").Symbol,i="function"==typeof a;(t.exports=function(e){return n[e]||(n[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=n},{"./_global":212,"./_shared":269,"./_uid":290}],296:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[n(e)]}},{"./_classof":190,"./_core":195,"./_iterators":230,"./_wks":295}],297:[function(e,t,r){var n=e("./_export");n(n.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":179,"./_array-copy-within":183,"./_export":204}],298:[function(e,t,r){var n=e("./_export");n(n.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":179,"./_array-fill":184,"./_export":204}],299:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_array-methods")(6),a="findIndex",i=!0;a in[]&&Array(1)[a](function(){i=!1}),n(n.P+n.F*i,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")(a)},{"./_add-to-unscopables":179,"./_array-methods":186,"./_export":204}],300:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_array-methods")(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("find")},{"./_add-to-unscopables":179,"./_array-methods":186,"./_export":204}],301:[function(e,t,r){"use strict";var n=e("./_ctx"),o=e("./_export"),a=e("./_to-object"),i=e("./_iter-call"),l=e("./_is-array-iter"),s=e("./_to-length"),u=e("./_create-property"),c=e("./core.get-iterator-method");o(o.S+o.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,d,f=a(e),p="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,_=void 0!==h,y=0,v=c(f);if(_&&(h=n(h,m>2?arguments[2]:void 0,2)),void 0==v||p==Array&&l(v))for(t=s(f.length),r=new p(t);t>y;y++)u(r,y,_?h(f[y],y):f[y]);else for(d=v.call(f),r=new p;!(o=d.next()).done;y++)u(r,y,_?i(d,h,[o.value,y],!0):o.value);return r.length=y,r}})},{"./_create-property":196,"./_ctx":197,"./_export":204,"./_is-array-iter":220,"./_iter-call":225,"./_iter-detect":228,"./_to-length":284,"./_to-object":285,"./core.get-iterator-method":296}],302:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),a=e("./_iterators"),i=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":179,"./_iter-define":227,"./_iter-step":229,"./_iterators":230,"./_to-iobject":283}],303:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_create-property");n(n.S+n.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)o(r,e,arguments[e++]);return r.length=t,r}})},{"./_create-property":196,"./_export":204,"./_fails":206}],304:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_a-function"),a=e("./_to-object"),i=e("./_fails"),l=[].sort,s=[1,2,3];n(n.P+n.F*(i(function(){s.sort(void 0)})||!i(function(){s.sort(null)})||!e("./_strict-method")(l)),"Array",{sort:function(e){return void 0===e?l.call(a(this)):l.call(a(this),o(e))}})},{"./_a-function":178,"./_export":204,"./_fails":206,"./_strict-method":271,"./_to-object":285}],305:[function(e,t,r){e("./_set-species")("Array")},{"./_set-species":266}],306:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_to-object"),a=e("./_to-primitive");n(n.P+n.F*e("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=o(this),r=a(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},{"./_export":204,"./_fails":206,"./_to-object":285,"./_to-primitive":286}],307:[function(e,t,r){var n=e("./_wks")("toPrimitive"),o=Date.prototype;n in o||e("./_hide")(o,n,e("./_date-to-primitive"))},{"./_date-to-primitive":198,"./_hide":214,"./_wks":295}],308:[function(e,t,r){"use strict";var n=e("./_is-object"),o=e("./_object-gpo"),a=e("./_wks")("hasInstance"),i=Function.prototype;a in i||e("./_object-dp").f(i,a,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":223,"./_object-dp":241,"./_object-gpo":248,"./_wks":295}],309:[function(e,t,r){var n=e("./_object-dp").f,o=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in o||e("./_descriptors")&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},{"./_descriptors":200,"./_object-dp":241}],310:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":194,"./_collection-strong":192,"./_validate-collection":292}],311:[function(e,t,r){var n=e("./_export"),o=e("./_math-log1p"),a=Math.sqrt,i=Math.acosh;n(n.S+n.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+a(e-1)*a(e+1))}})},{"./_export":204,"./_math-log1p":234}],312:[function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var o=e("./_export"),a=Math.asinh;o(o.S+o.F*!(a&&1/a(0)>0),"Math",{asinh:n})},{"./_export":204}],313:[function(e,t,r){var n=e("./_export"),o=Math.atanh;n(n.S+n.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":204}],314:[function(e,t,r){var n=e("./_export"),o=e("./_math-sign");n(n.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":204,"./_math-sign":235}],315:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":204}],316:[function(e,t,r){var n=e("./_export"),o=Math.exp;n(n.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},{"./_export":204}],317:[function(e,t,r){var n=e("./_export"),o=e("./_math-expm1");n(n.S+n.F*(o!=Math.expm1),"Math",{expm1:o})},{"./_export":204,"./_math-expm1":232}],318:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{fround:e("./_math-fround")})},{"./_export":204,"./_math-fround":233}],319:[function(e,t,r){var n=e("./_export"),o=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,a=0,i=0,l=arguments.length,s=0;i<l;)r=o(arguments[i++]),s<r?(n=s/r,a=a*n*n+1,s=r):r>0?(n=r/s,a+=n*n):a+=r;return s===1/0?1/0:s*Math.sqrt(a)}})},{"./_export":204}],320:[function(e,t,r){var n=e("./_export"),o=Math.imul;n(n.S+n.F*e("./_fails")(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(e,t){var r=+e,n=+t,o=65535&r,a=65535&n;return 0|o*a+((65535&r>>>16)*a+o*(65535&n>>>16)<<16>>>0)}})},{"./_export":204,"./_fails":206}],321:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{"./_export":204}],322:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":204,"./_math-log1p":234}],323:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":204}],324:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{sign:e("./_math-sign")})},{"./_export":204,"./_math-sign":235}],325:[function(e,t,r){var n=e("./_export"),o=e("./_math-expm1"),a=Math.exp;n(n.S+n.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},{"./_export":204,"./_fails":206,"./_math-expm1":232}],326:[function(e,t,r){var n=e("./_export"),o=e("./_math-expm1"),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=o(e=+e),r=o(-e);return t==1/0?1:r==1/0?-1:(t-r)/(a(e)+a(-e))}})},{"./_export":204,"./_math-expm1":232}],327:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},{"./_export":204}],328:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_has"),a=e("./_cof"),i=e("./_inherit-if-required"),l=e("./_to-primitive"),s=e("./_fails"),u=e("./_object-gopn").f,c=e("./_object-gopd").f,d=e("./_object-dp").f,f=e("./_string-trim").trim,p=n.Number,m=p,h=p.prototype,_="Number"==a(e("./_object-create")(h)),y="trim"in String.prototype,v=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():f(t,3);var r,n,o,a=t.charCodeAt(0);if(43===a||45===a){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+t}for(var i,s=t.slice(2),u=0,c=s.length;u<c;u++)if((i=s.charCodeAt(u))<48||i>o)return NaN;return parseInt(s,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof p&&(_?s(function(){h.valueOf.call(r)}):"Number"!=a(r))?i(new m(v(t)),r,p):v(t)};for(var g,b=e("./_descriptors")?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;b.length>w;w++)o(m,g=b[w])&&!o(p,g)&&d(p,g,c(m,g));p.prototype=h,h.constructor=p,e("./_redefine")(n,"Number",p)}},{"./_cof":191,"./_descriptors":200,"./_fails":206,"./_global":212,"./_has":213,"./_inherit-if-required":217,"./_object-create":240,"./_object-dp":241,"./_object-gopd":244,"./_object-gopn":246,"./_redefine":261,"./_string-trim":277,"./_to-primitive":286}],329:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":204}],330:[function(e,t,r){var n=e("./_export"),o=e("./_global").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},{"./_export":204,"./_global":212}],331:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":204,"./_is-integer":222}],332:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":204}],333:[function(e,t,r){var n=e("./_export"),o=e("./_is-integer"),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return o(e)&&a(e)<=9007199254740991}})},{"./_export":204,"./_is-integer":222}],334:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":204}],335:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":204}],336:[function(e,t,r){var n=e("./_export"),o=e("./_parse-float");n(n.S+n.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},{"./_export":204,"./_parse-float":255}],337:[function(e,t,r){var n=e("./_export"),o=e("./_parse-int");n(n.S+n.F*(Number.parseInt!=o),"Number",{parseInt:o})},{"./_export":204,"./_parse-int":256}],338:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":204,"./_object-assign":239}],339:[function(e,t,r){var n=e("./_is-object"),o=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(o(t)):t}})},{"./_is-object":223,"./_meta":236,"./_object-sap":252}],340:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},{"./_object-gopd":244,"./_object-sap":252,"./_to-iobject":283}],341:[function(e,t,r){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":245,"./_object-sap":252}],342:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(n(e))}})},{"./_object-gpo":248,"./_object-sap":252,"./_to-object":285}],343:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},{"./_is-object":223,"./_object-sap":252}],344:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},{"./_is-object":223,"./_object-sap":252}],345:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},{"./_is-object":223,"./_object-sap":252}],346:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{is:e("./_same-value")})},{"./_export":204,"./_same-value":264}],347:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return o(n(e))}})},{"./_object-keys":250,"./_object-sap":252,"./_to-object":285}],348:[function(e,t,r){var n=e("./_is-object"),o=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(e){return function(t){return e&&n(t)?e(o(t)):t}})},{"./_is-object":223,"./_meta":236,"./_object-sap":252}],349:[function(e,t,r){var n=e("./_is-object"),o=e("./_meta").onFreeze;e("./_object-sap")("seal",function(e){return function(t){return e&&n(t)?e(o(t)):t}})},{"./_is-object":223,"./_meta":236,"./_object-sap":252}],350:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":204,"./_set-proto":265}],351:[function(e,t,r){"use strict";var n=e("./_classof"),o={};o[e("./_wks")("toStringTag")]="z",o+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},{"./_classof":190,"./_redefine":261,"./_wks":295}],352:[function(e,t,r){"use strict";var n,o,a,i,l=e("./_library"),s=e("./_global"),u=e("./_ctx"),c=e("./_classof"),d=e("./_export"),f=e("./_is-object"),p=e("./_a-function"),m=e("./_an-instance"),h=e("./_for-of"),_=e("./_species-constructor"),y=e("./_task").set,v=e("./_microtask")(),g=e("./_new-promise-capability"),b=e("./_perform"),w=e("./_user-agent"),E=e("./_promise-resolve"),j=s.TypeError,O=s.process,S=O&&O.versions,P=S&&S.v8||"",I=s.Promise,k="process"==c(O),T=function(){},C=o=g.f,D=!!function(){try{var t=I.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(T,T)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof r&&0!==P.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),A=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var r=e._c;v(function(){for(var n=e._v,o=1==e._s,a=0;r.length>a;)!function(t){var r,a,i,l=o?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{l?(o||(2==e._h&&N(e),e._h=1),!0===l?r=n:(c&&c.enter(),r=l(n),c&&(c.exit(),i=!0)),r===t.promise?u(j("Promise-chain cycle")):(a=A(r))?a.call(r,s,u):s(r)):u(n)}catch(e){c&&!i&&c.exit(),u(e)}}(r[a++]);e._c=[],e._n=!1,t&&!e._h&&x(e)})}},x=function(e){y.call(s,function(){var t,r,n,o=e._v,a=R(e);if(a&&(t=b(function(){k?O.emit("unhandledRejection",o,e):(r=s.onunhandledrejection)?r({promise:e,reason:o}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=k||R(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){y.call(s,function(){var t;k?O.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},$=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw j("Promise can't be resolved itself");(t=A(e))?v(function(){var n={_w:r,_d:!1};try{t.call(e,u($,n,1),u(L,n,1))}catch(e){L.call(n,e)}}):(r._v=e,r._s=1,M(r,!1))}catch(e){L.call({_w:r,_d:!1},e)}}};D||(I=function(e){m(this,I,"Promise","_h"),p(e),n.call(this);try{e(u($,this,1),u(L,this,1))}catch(e){L.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=e("./_redefine-all")(I.prototype,{then:function(e,t){var r=C(_(this,I));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=k?O.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&M(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=u($,e,1),this.reject=u(L,e,1)},g.f=C=function(e){return e===I||e===i?new a(e):o(e)}),d(d.G+d.W+d.F*!D,{Promise:I}),e("./_set-to-string-tag")(I,"Promise"),e("./_set-species")("Promise"),i=e("./_core").Promise,d(d.S+d.F*!D,"Promise",{reject:function(e){var t=C(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(l||!D),"Promise",{resolve:function(e){return E(l&&this===i?I:this,e)}}),d(d.S+d.F*!(D&&e("./_iter-detect")(function(e){I.all(e).catch(T)})),"Promise",{all:function(e){var t=this,r=C(t),n=r.resolve,o=r.reject,a=b(function(){var r=[],a=0,i=1;h(e,!1,function(e){var l=a++,s=!1;r.push(void 0),i++,t.resolve(e).then(function(e){s||(s=!0,r[l]=e,--i||n(r))},o)}),--i||n(r)});return a.e&&o(a.v),r.promise},race:function(e){var t=this,r=C(t),n=r.reject,o=b(function(){h(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},{"./_a-function":178,"./_an-instance":181,"./_classof":190,"./_core":195,"./_ctx":197,"./_export":204,"./_for-of":210,"./_global":212,"./_is-object":223,"./_iter-detect":228,"./_library":231,"./_microtask":237,"./_new-promise-capability":238,"./_perform":257,"./_promise-resolve":258,"./_redefine-all":260,"./_set-species":266,"./_set-to-string-tag":267,"./_species-constructor":270,"./_task":279,"./_user-agent":291,"./_wks":295}],353:[function(e,t,r){var n=e("./_export"),o=e("./_a-function"),a=e("./_an-object"),i=(e("./_global").Reflect||{}).apply,l=Function.apply;n(n.S+n.F*!e("./_fails")(function(){i(function(){})}),"Reflect",{apply:function(e,t,r){var n=o(e),s=a(r);return i?i(n,t,s):l.call(n,t,s)}})},{"./_a-function":178,"./_an-object":182,"./_export":204,"./_fails":206,"./_global":212}],354:[function(e,t,r){var n=e("./_export"),o=e("./_object-create"),a=e("./_a-function"),i=e("./_an-object"),l=e("./_is-object"),s=e("./_fails"),u=e("./_bind"),c=(e("./_global").Reflect||{}).construct,d=s(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),f=!s(function(){c(function(){})});n(n.S+n.F*(d||f),"Reflect",{construct:function(e,t){a(e),i(t);var r=arguments.length<3?e:a(arguments[2]);if(f&&!d)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var s=r.prototype,p=o(l(s)?s:Object.prototype),m=Function.apply.call(e,p,t);return l(m)?m:p}})},{"./_a-function":178,"./_an-object":182,"./_bind":189,"./_export":204,"./_fails":206,"./_global":212,"./_is-object":223,"./_object-create":240}],355:[function(e,t,r){var n=e("./_object-dp"),o=e("./_export"),a=e("./_an-object"),i=e("./_to-primitive");o(o.S+o.F*e("./_fails")(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){a(e),t=i(t,!0),a(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},{"./_an-object":182,"./_export":204,"./_fails":206,"./_object-dp":241,"./_to-primitive":286}],356:[function(e,t,r){var n=e("./_export"),o=e("./_object-gopd").f,a=e("./_an-object");n(n.S,"Reflect",{deleteProperty:function(e,t){var r=o(a(e),t);return!(r&&!r.configurable)&&delete e[t]}})},{"./_an-object":182,"./_export":204,"./_object-gopd":244}],357:[function(e,t,r){var n=e("./_object-gopd"),o=e("./_export"),a=e("./_an-object");o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},{"./_an-object":182,"./_export":204,"./_object-gopd":244}],358:[function(e,t,r){var n=e("./_export"),o=e("./_object-gpo"),a=e("./_an-object");n(n.S,"Reflect",{getPrototypeOf:function(e){return o(a(e))}})},{"./_an-object":182,"./_export":204,"./_object-gpo":248}],359:[function(e,t,r){function n(e,t){var r,l,c=arguments.length<3?e:arguments[2];return u(e)===c?e[t]:(r=o.f(e,t))?i(r,"value")?r.value:void 0!==r.get?r.get.call(c):void 0:s(l=a(e))?n(l,t,c):void 0}var o=e("./_object-gopd"),a=e("./_object-gpo"),i=e("./_has"),l=e("./_export"),s=e("./_is-object"),u=e("./_an-object");l(l.S,"Reflect",{get:n})},{"./_an-object":182,"./_export":204,"./_has":213,"./_is-object":223,"./_object-gopd":244,"./_object-gpo":248}],360:[function(e,t,r){var n=e("./_export");n(n.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":204}],361:[function(e,t,r){var n=e("./_export"),o=e("./_an-object"),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return o(e),!a||a(e)}})},{"./_an-object":182,"./_export":204}],362:[function(e,t,r){var n=e("./_export");n(n.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":204,"./_own-keys":254}],363:[function(e,t,r){var n=e("./_export"),o=e("./_an-object"),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){o(e);try{return a&&a(e),!0}catch(e){return!1}}})},{"./_an-object":182,"./_export":204}],364:[function(e,t,r){var n=e("./_export"),o=e("./_set-proto");o&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},{"./_export":204,"./_set-proto":265}],365:[function(e,t,r){function n(e,t,r){var s,f,p=arguments.length<4?e:arguments[3],m=a.f(c(e),t);if(!m){if(d(f=i(e)))return n(f,t,r,p);m=u(0)}if(l(m,"value")){if(!1===m.writable||!d(p))return!1;if(s=a.f(p,t)){if(s.get||s.set||!1===s.writable)return!1;s.value=r,o.f(p,t,s)}else o.f(p,t,u(0,r));return!0}return void 0!==m.set&&(m.set.call(p,r),!0)}var o=e("./_object-dp"),a=e("./_object-gopd"),i=e("./_object-gpo"),l=e("./_has"),s=e("./_export"),u=e("./_property-desc"),c=e("./_an-object"),d=e("./_is-object");s(s.S,"Reflect",{set:n})},{"./_an-object":182,"./_export":204,"./_has":213,"./_is-object":223,"./_object-dp":241,"./_object-gopd":244,"./_object-gpo":248,"./_property-desc":259}],366:[function(e,t,r){var n=e("./_global"),o=e("./_inherit-if-required"),a=e("./_object-dp").f,i=e("./_object-gopn").f,l=e("./_is-regexp"),s=e("./_flags"),u=n.RegExp,c=u,d=u.prototype,f=/a/g,p=/a/g,m=new u(f)!==f;if(e("./_descriptors")&&(!m||e("./_fails")(function(){return p[e("./_wks")("match")]=!1,u(f)!=f||u(p)==p||"/a/i"!=u(f,"i")}))){u=function(e,t){var r=this instanceof u,n=l(e),a=void 0===t;return!r&&n&&e.constructor===u&&a?e:o(m?new c(n&&!a?e.source:e,t):c((n=e instanceof u)?e.source:e,n&&a?s.call(e):t),r?this:d,u)};for(var h=i(c),_=0;h.length>_;)!function(e){e in u||a(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})}(h[_++]);d.constructor=u,u.prototype=d,e("./_redefine")(n,"RegExp",u)}e("./_set-species")("RegExp")},{"./_descriptors":200,"./_fails":206,"./_flags":208,"./_global":212,"./_inherit-if-required":217,"./_is-regexp":224,"./_object-dp":241,"./_object-gopn":246,"./_redefine":261,"./_set-species":266,"./_wks":295}],367:[function(e,t,r){"use strict";var n=e("./_regexp-exec");e("./_export")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},{"./_export":204,"./_regexp-exec":263}],368:[function(e,t,r){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":200,"./_flags":208,"./_object-dp":241}],369:[function(e,t,r){"use strict";var n=e("./_an-object"),o=e("./_to-length"),a=e("./_advance-string-index"),i=e("./_regexp-exec-abstract");e("./_fix-re-wks")("match",1,function(e,t,r,l){return[function(r){var n=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=l(r,e,this);if(t.done)return t.value;var s=n(e),u=String(this);if(!s.global)return i(s,u);var c=s.unicode;s.lastIndex=0;for(var d,f=[],p=0;null!==(d=i(s,u));){var m=String(d[0]);f[p]=m,""===m&&(s.lastIndex=a(u,o(s.lastIndex),c)),p++}return 0===p?null:f}]})},{"./_advance-string-index":180,"./_an-object":182,"./_fix-re-wks":207,"./_regexp-exec-abstract":262,"./_to-length":284}],370:[function(e,t,r){"use strict";var n=e("./_an-object"),o=e("./_to-object"),a=e("./_to-length"),i=e("./_to-integer"),l=e("./_advance-string-index"),s=e("./_regexp-exec-abstract"),u=Math.max,c=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,m=function(e){return void 0===e?e:String(e)};e("./_fix-re-wks")("replace",2,function(e,t,r,h){function _(e,t,n,a,i,l){var s=n+e.length,u=a.length,c=p;return void 0!==i&&(i=o(i),c=f),r.call(l,c,function(r,o){var l;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":l=i[o.slice(1,-1)];break;default:var c=+o;if(0===c)return r;if(c>u){var f=d(c/10);return 0===f?r:f<=u?void 0===a[f-1]?o.charAt(1):a[f-1]+o.charAt(1):r}l=a[c-1]}return void 0===l?"":l})}return[function(n,o){var a=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a,o):r.call(String(a),n,o)},function(e,t){var o=h(r,e,this,t);if(o.done)return o.value;var d=n(e),f=String(this),p="function"==typeof t;p||(t=String(t));var y=d.global;if(y){var v=d.unicode;d.lastIndex=0}for(var g=[];;){var b=s(d,f);if(null===b)break;if(g.push(b),!y)break;""===String(b[0])&&(d.lastIndex=l(f,a(d.lastIndex),v))}for(var w="",E=0,j=0;j<g.length;j++){b=g[j];for(var O=String(b[0]),S=u(c(i(b.index),f.length),0),P=[],I=1;I<b.length;I++)P.push(m(b[I]));var k=b.groups;if(p){var T=[O].concat(P,S,f);void 0!==k&&T.push(k);var C=String(t.apply(void 0,T))}else C=_(O,f,S,P,k,t);S>=E&&(w+=f.slice(E,S)+C,E=S+O.length)}return w+f.slice(E)}]})},{"./_advance-string-index":180,"./_an-object":182,"./_fix-re-wks":207,"./_regexp-exec-abstract":262,"./_to-integer":282,"./_to-length":284,"./_to-object":285}],371:[function(e,t,r){"use strict";var n=e("./_an-object"),o=e("./_same-value"),a=e("./_regexp-exec-abstract");e("./_fix-re-wks")("search",1,function(e,t,r,i){return[function(r){var n=e(this),o=void 0==r?void 0:r[t]
;return void 0!==o?o.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=i(r,e,this);if(t.done)return t.value;var l=n(e),s=String(this),u=l.lastIndex;o(u,0)||(l.lastIndex=0);var c=a(l,s);return o(l.lastIndex,u)||(l.lastIndex=u),null===c?-1:c.index}]})},{"./_an-object":182,"./_fix-re-wks":207,"./_regexp-exec-abstract":262,"./_same-value":264}],372:[function(e,t,r){"use strict";var n=e("./_is-regexp"),o=e("./_an-object"),a=e("./_species-constructor"),i=e("./_advance-string-index"),l=e("./_to-length"),s=e("./_regexp-exec-abstract"),u=e("./_regexp-exec"),c=e("./_fails"),d=Math.min,f=[].push,p="length",m=!c(function(){RegExp(4294967295,"y")});e("./_fix-re-wks")("split",2,function(e,t,r,c){var h;return h="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(o,e,t);for(var a,i,l,s=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,m=void 0===t?4294967295:t>>>0,h=new RegExp(e.source,c+"g");(a=u.call(h,o))&&!((i=h.lastIndex)>d&&(s.push(o.slice(d,a.index)),a[p]>1&&a.index<o[p]&&f.apply(s,a.slice(1)),l=a[0][p],d=i,s[p]>=m));)h.lastIndex===a.index&&h.lastIndex++;return d===o[p]?!l&&h.test("")||s.push(""):s.push(o.slice(d)),s[p]>m?s.slice(0,m):s}:"0".split(void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,n):h.call(String(o),r,n)},function(e,t){var n=c(h,e,this,t,h!==r);if(n.done)return n.value;var u=o(e),f=String(this),p=a(u,RegExp),_=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),v=new p(m?u:"^(?:"+u.source+")",y),g=void 0===t?4294967295:t>>>0;if(0===g)return[];if(0===f.length)return null===s(v,f)?[f]:[];for(var b=0,w=0,E=[];w<f.length;){v.lastIndex=m?w:0;var j,O=s(v,m?f:f.slice(w));if(null===O||(j=d(l(v.lastIndex+(m?0:w)),f.length))===b)w=i(f,w,_);else{if(E.push(f.slice(b,w)),E.length===g)return E;for(var S=1;S<=O.length-1;S++)if(E.push(O[S]),E.length===g)return E;w=b=j}}return E.push(f.slice(b)),E}]})},{"./_advance-string-index":180,"./_an-object":182,"./_fails":206,"./_fix-re-wks":207,"./_is-regexp":224,"./_regexp-exec":263,"./_regexp-exec-abstract":262,"./_species-constructor":270,"./_to-length":284}],373:[function(e,t,r){"use strict";e("./es6.regexp.flags");var n=e("./_an-object"),o=e("./_flags"),a=e("./_descriptors"),i=/./.toString,l=function(t){e("./_redefine")(RegExp.prototype,"toString",t,!0)};e("./_fails")(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?l(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?o.call(e):void 0)}):"toString"!=i.name&&l(function(){return i.call(this)})},{"./_an-object":182,"./_descriptors":200,"./_fails":206,"./_flags":208,"./_redefine":261,"./es6.regexp.flags":368}],374:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":194,"./_collection-strong":192,"./_validate-collection":292}],375:[function(e,t,r){"use strict";e("./_string-html")("anchor",function(e){return function(t){return e(this,"a","name",t)}})},{"./_string-html":274}],376:[function(e,t,r){"use strict";e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":274}],377:[function(e,t,r){"use strict";e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":274}],378:[function(e,t,r){"use strict";e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":274}],379:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_string-at")(!1);n(n.P,"String",{codePointAt:function(e){return o(this,e)}})},{"./_export":204,"./_string-at":272}],380:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_to-length"),a=e("./_string-context"),i="".endsWith;n(n.P+n.F*e("./_fails-is-regexp")("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=o(t.length),l=void 0===r?n:Math.min(o(r),n),s=String(e);return i?i.call(t,s,l):t.slice(l-s.length,l)===s}})},{"./_export":204,"./_fails-is-regexp":205,"./_string-context":273,"./_to-length":284}],381:[function(e,t,r){"use strict";e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":274}],382:[function(e,t,r){"use strict";e("./_string-html")("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},{"./_string-html":274}],383:[function(e,t,r){"use strict";e("./_string-html")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},{"./_string-html":274}],384:[function(e,t,r){var n=e("./_export"),o=e("./_to-absolute-index"),a=String.fromCharCode,i=String.fromCodePoint;n(n.S+n.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,i=0;n>i;){if(t=+arguments[i++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},{"./_export":204,"./_to-absolute-index":280}],385:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_string-context");n(n.P+n.F*e("./_fails-is-regexp")("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},{"./_export":204,"./_fails-is-regexp":205,"./_string-context":273}],386:[function(e,t,r){"use strict";e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":274}],387:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":227,"./_string-at":272}],388:[function(e,t,r){"use strict";e("./_string-html")("link",function(e){return function(t){return e(this,"a","href",t)}})},{"./_string-html":274}],389:[function(e,t,r){var n=e("./_export"),o=e("./_to-iobject"),a=e("./_to-length");n(n.S,"String",{raw:function(e){for(var t=o(e.raw),r=a(t.length),n=arguments.length,i=[],l=0;r>l;)i.push(String(t[l++])),l<n&&i.push(String(arguments[l]));return i.join("")}})},{"./_export":204,"./_to-iobject":283,"./_to-length":284}],390:[function(e,t,r){var n=e("./_export");n(n.P,"String",{repeat:e("./_string-repeat")})},{"./_export":204,"./_string-repeat":276}],391:[function(e,t,r){"use strict";e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":274}],392:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_to-length"),a=e("./_string-context"),i="".startsWith;n(n.P+n.F*e("./_fails-is-regexp")("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),r=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return i?i.call(t,n,r):t.slice(r,r+n.length)===n}})},{"./_export":204,"./_fails-is-regexp":205,"./_string-context":273,"./_to-length":284}],393:[function(e,t,r){"use strict";e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":274}],394:[function(e,t,r){"use strict";e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":274}],395:[function(e,t,r){"use strict";e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":274}],396:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_has"),a=e("./_descriptors"),i=e("./_export"),l=e("./_redefine"),s=e("./_meta").KEY,u=e("./_fails"),c=e("./_shared"),d=e("./_set-to-string-tag"),f=e("./_uid"),p=e("./_wks"),m=e("./_wks-ext"),h=e("./_wks-define"),_=e("./_enum-keys"),y=e("./_is-array"),v=e("./_an-object"),g=e("./_is-object"),b=e("./_to-object"),w=e("./_to-iobject"),E=e("./_to-primitive"),j=e("./_property-desc"),O=e("./_object-create"),S=e("./_object-gopn-ext"),P=e("./_object-gopd"),I=e("./_object-gops"),k=e("./_object-dp"),T=e("./_object-keys"),C=P.f,D=k.f,A=S.f,M=n.Symbol,x=n.JSON,R=x&&x.stringify,N=p("_hidden"),L=p("toPrimitive"),$={}.propertyIsEnumerable,U=c("symbol-registry"),B=c("symbols"),V=c("op-symbols"),F=Object.prototype,H="function"==typeof M&&!!I.f,q=n.QObject,G=!q||!q.prototype||!q.prototype.findChild,z=a&&u(function(){return 7!=O(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=C(F,t);n&&delete F[t],D(e,t,r),n&&e!==F&&D(F,t,n)}:D,W=function(e){var t=B[e]=O(M.prototype);return t._k=e,t},Y=H&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},K=function(e,t,r){return e===F&&K(V,t,r),v(e),t=E(t,!0),v(r),o(B,t)?(r.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),r=O(r,{enumerable:j(0,!1)})):(o(e,N)||D(e,N,j(1,{})),e[N][t]=!0),z(e,t,r)):D(e,t,r)},J=function(e,t){v(e);for(var r,n=_(t=w(t)),o=0,a=n.length;a>o;)K(e,r=n[o++],t[r]);return e},Q=function(e,t){return void 0===t?O(e):J(O(e),t)},X=function(e){var t=$.call(this,e=E(e,!0));return!(this===F&&o(B,e)&&!o(V,e))&&(!(t||!o(this,e)||!o(B,e)||o(this,N)&&this[N][e])||t)},Z=function(e,t){if(e=w(e),t=E(t,!0),e!==F||!o(B,t)||o(V,t)){var r=C(e,t);return!r||!o(B,t)||o(e,N)&&e[N][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=A(w(e)),n=[],a=0;r.length>a;)o(B,t=r[a++])||t==N||t==s||n.push(t);return n},te=function(e){for(var t,r=e===F,n=A(r?V:w(e)),a=[],i=0;n.length>i;)!o(B,t=n[i++])||r&&!o(F,t)||a.push(B[t]);return a};H||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===F&&t.call(V,r),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),z(this,e,j(1,r))};return a&&G&&z(F,e,{configurable:!0,set:t}),W(e)},l(M.prototype,"toString",function(){return this._k}),P.f=Z,k.f=K,e("./_object-gopn").f=S.f=ee,e("./_object-pie").f=X,I.f=te,a&&!e("./_library")&&l(F,"propertyIsEnumerable",X,!0),m.f=function(e){return W(p(e))}),i(i.G+i.W+i.F*!H,{Symbol:M});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)p(re[ne++]);for(var oe=T(p.store),ae=0;oe.length>ae;)h(oe[ae++]);i(i.S+i.F*!H,"Symbol",{for:function(e){return o(U,e+="")?U[e]:U[e]=M(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!H,"Object",{create:Q,defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ie=u(function(){I.f(1)});i(i.S+i.F*ie,"Object",{getOwnPropertySymbols:function(e){return I.f(b(e))}}),x&&i(i.S+i.F*(!H||u(function(){var e=M();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(g(t)||void 0!==e)&&!Y(e))return y(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Y(t))return t}),n[1]=t,R.apply(x,n)}}),M.prototype[L]||e("./_hide")(M.prototype,L,M.prototype.valueOf),d(M,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},{"./_an-object":182,"./_descriptors":200,"./_enum-keys":203,"./_export":204,"./_fails":206,"./_global":212,"./_has":213,"./_hide":214,"./_is-array":221,"./_is-object":223,"./_library":231,"./_meta":236,"./_object-create":240,"./_object-dp":241,"./_object-gopd":244,"./_object-gopn":246,"./_object-gopn-ext":245,"./_object-gops":247,"./_object-keys":250,"./_object-pie":251,"./_property-desc":259,"./_redefine":261,"./_set-to-string-tag":267,"./_shared":269,"./_to-iobject":283,"./_to-object":285,"./_to-primitive":286,"./_uid":290,"./_wks":295,"./_wks-define":293,"./_wks-ext":294}],397:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_typed"),a=e("./_typed-buffer"),i=e("./_an-object"),l=e("./_to-absolute-index"),s=e("./_to-length"),u=e("./_is-object"),c=e("./_global").ArrayBuffer,d=e("./_species-constructor"),f=a.ArrayBuffer,p=a.DataView,m=o.ABV&&c.isView,h=f.prototype.slice,_=o.VIEW;n(n.G+n.W+n.F*(c!==f),{ArrayBuffer:f}),n(n.S+n.F*!o.CONSTR,"ArrayBuffer",{isView:function(e){return m&&m(e)||u(e)&&_ in e}}),n(n.P+n.U+n.F*e("./_fails")(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==h&&void 0===t)return h.call(i(this),e);for(var r=i(this).byteLength,n=l(e,r),o=l(void 0===t?r:t,r),a=new(d(this,f))(s(o-n)),u=new p(this),c=new p(a),m=0;n<o;)c.setUint8(m++,u.getUint8(n++));return a}}),e("./_set-species")("ArrayBuffer")},{"./_an-object":182,"./_export":204,"./_fails":206,"./_global":212,"./_is-object":223,"./_set-species":266,"./_species-constructor":270,"./_to-absolute-index":280,"./_to-length":284,"./_typed":289,"./_typed-buffer":288}],398:[function(e,t,r){e("./_typed-array")("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":287}],399:[function(e,t,r){e("./_typed-array")("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":287}],400:[function(e,t,r){e("./_typed-array")("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":287}],401:[function(e,t,r){e("./_typed-array")("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":287}],402:[function(e,t,r){e("./_typed-array")("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":287}],403:[function(e,t,r){e("./_typed-array")("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":287}],404:[function(e,t,r){e("./_typed-array")("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":287}],405:[function(e,t,r){e("./_typed-array")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":287}],406:[function(e,t,r){e("./_typed-array")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},{"./_typed-array":287}],407:[function(e,t,r){"use strict";var n,o=e("./_global"),a=e("./_array-methods")(0),i=e("./_redefine"),l=e("./_meta"),s=e("./_object-assign"),u=e("./_collection-weak"),c=e("./_is-object"),d=e("./_validate-collection"),f=e("./_validate-collection"),p=!o.ActiveXObject&&"ActiveXObject"in o,m=l.getWeak,h=Object.isExtensible,_=u.ufstore,y=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(c(e)){var t=m(e);return!0===t?_(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(d(this,"WeakMap"),e,t)}},g=t.exports=e("./_collection")("WeakMap",y,v,u,!0,!0);f&&p&&(n=u.getConstructor(y,"WeakMap"),s(n.prototype,v),l.NEED=!0,a(["delete","has","get","set"],function(e){var t=g.prototype,r=t[e];i(t,e,function(t,o){if(c(t)&&!h(t)){this._f||(this._f=new n);var a=this._f[e](t,o);return"set"==e?this:a}return r.call(this,t,o)})}))},{"./_array-methods":186,"./_collection":194,"./_collection-weak":193,"./_global":212,"./_is-object":223,"./_meta":236,"./_object-assign":239,"./_redefine":261,"./_validate-collection":292}],408:[function(e,t,r){"use strict";var n=e("./_collection-weak"),o=e("./_validate-collection");e("./_collection")("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"WeakSet"),e,!0)}},n,!1,!0)},{"./_collection":194,"./_collection-weak":193,"./_validate-collection":292}],409:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_flatten-into-array"),a=e("./_to-object"),i=e("./_to-length"),l=e("./_a-function"),s=e("./_array-species-create");n(n.P,"Array",{flatMap:function(e){var t,r,n=a(this);return l(e),t=i(n.length),r=s(n,0),o(r,n,n,t,0,1,e,arguments[1]),r}}),e("./_add-to-unscopables")("flatMap")},{"./_a-function":178,"./_add-to-unscopables":179,"./_array-species-create":188,"./_export":204,"./_flatten-into-array":209,"./_to-length":284,"./_to-object":285}],410:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_array-includes")(!0);n(n.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":179,"./_array-includes":185,"./_export":204}],411:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_to-object"),a=e("./_a-function"),i=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){i.f(o(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":178,"./_descriptors":200,"./_export":204,"./_object-dp":241,"./_object-forced-pam":243,"./_to-object":285}],412:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_to-object"),a=e("./_a-function"),i=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){i.f(o(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":178,"./_descriptors":200,"./_export":204,"./_object-dp":241,"./_object-forced-pam":243,"./_to-object":285}],413:[function(e,t,r){var n=e("./_export"),o=e("./_object-to-array")(!0);n(n.S,"Object",{entries:function(e){return o(e)}})},{"./_export":204,"./_object-to-array":253}],414:[function(e,t,r){var n=e("./_export"),o=e("./_own-keys"),a=e("./_to-iobject"),i=e("./_object-gopd"),l=e("./_create-property");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),s=i.f,u=o(n),c={},d=0;u.length>d;)void 0!==(r=s(n,t=u[d++]))&&l(c,t,r);return c}})},{"./_create-property":196,"./_export":204,"./_object-gopd":244,"./_own-keys":254,"./_to-iobject":283}],415:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_to-object"),a=e("./_to-primitive"),i=e("./_object-gpo"),l=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,r=o(this),n=a(e,!0);do{if(t=l(r,n))return t.get}while(r=i(r))}})},{"./_descriptors":200,"./_export":204,"./_object-forced-pam":243,"./_object-gopd":244,"./_object-gpo":248,"./_to-object":285,"./_to-primitive":286}],416:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_to-object"),a=e("./_to-primitive"),i=e("./_object-gpo"),l=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,r=o(this),n=a(e,!0);do{if(t=l(r,n))return t.set}while(r=i(r))}})},{"./_descriptors":200,"./_export":204,"./_object-forced-pam":243,"./_object-gopd":244,"./_object-gpo":248,"./_to-object":285,"./_to-primitive":286}],417:[function(e,t,r){var n=e("./_export"),o=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return o(e)}})},{"./_export":204,"./_object-to-array":253}],418:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_core"),a=e("./_global"),i=e("./_species-constructor"),l=e("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(e){var t=i(this,o.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return l(t,e()).then(function(){return r})}:e,r?function(r){return l(t,e()).then(function(){throw r})}:e)}})},{"./_core":195,"./_export":204,"./_global":212,"./_promise-resolve":258,"./_species-constructor":270}],419:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_string-pad"),a=e("./_user-agent"),i=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*i,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},{"./_export":204,"./_string-pad":275,"./_user-agent":291}],420:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_string-pad"),a=e("./_user-agent"),i=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*i,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},{"./_export":204,"./_string-pad":275,"./_user-agent":291}],421:[function(e,t,r){"use strict";e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":277}],422:[function(e,t,r){"use strict";e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":277}],423:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":293}],424:[function(e,t,r){for(var n=e("./es6.array.iterator"),o=e("./_object-keys"),a=e("./_redefine"),i=e("./_global"),l=e("./_hide"),s=e("./_iterators"),u=e("./_wks"),c=u("iterator"),d=u("toStringTag"),f=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=o(p),h=0;h<m.length;h++){var _,y=m[h],v=p[y],g=i[y],b=g&&g.prototype;if(b&&(b[c]||l(b,c,f),b[d]||l(b,d,y),s[y]=f,v))for(_ in n)b[_]||a(b,_,n[_],!0)}},{"./_global":212,"./_hide":214,"./_iterators":230,"./_object-keys":250,"./_redefine":261,"./_wks":295,"./es6.array.iterator":302}],425:[function(e,t,r){var n=e("./_export"),o=e("./_task");n(n.G+n.B,{setImmediate:o.set,clearImmediate:o.clear})},{"./_export":204,"./_task":279}],426:[function(e,t,r){var n=e("./_global"),o=e("./_export"),a=e("./_user-agent"),i=[].slice,l=/MSIE .\./.test(a),s=function(e){return function(t,r){var n=arguments.length>2,o=!!n&&i.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,r)}};o(o.G+o.B+o.F*l,{setTimeout:s(n.setTimeout),setInterval:s(n.setInterval)})},{"./_export":204,"./_global":212,"./_user-agent":291}],427:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),a=n(o,"DataView");t.exports=a},{"./_getNative":524,"./_root":575}],428:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_hashClear"),a=e("./_hashDelete"),i=e("./_hashGet"),l=e("./_hashHas"),s=e("./_hashSet");n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=i,n.prototype.has=l,n.prototype.set=s,t.exports=n},{"./_hashClear":533,"./_hashDelete":534,"./_hashGet":535,"./_hashHas":536,"./_hashSet":537}],429:[function(e,t,r){function n(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=i,this.__views__=[]}var o=e("./_baseCreate"),a=e("./_baseLodash"),i=4294967295;n.prototype=o(a.prototype),n.prototype.constructor=n,t.exports=n},{"./_baseCreate":456,"./_baseLodash":476}],430:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_listCacheClear"),a=e("./_listCacheDelete"),i=e("./_listCacheGet"),l=e("./_listCacheHas"),s=e("./_listCacheSet");n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=i,n.prototype.has=l,n.prototype.set=s,t.exports=n},{"./_listCacheClear":550,"./_listCacheDelete":551,"./_listCacheGet":552,"./_listCacheHas":553,"./_listCacheSet":554}],431:[function(e,t,r){function n(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var o=e("./_baseCreate"),a=e("./_baseLodash");n.prototype=o(a.prototype),n.prototype.constructor=n,t.exports=n},{"./_baseCreate":456,"./_baseLodash":476}],432:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),a=n(o,"Map");t.exports=a},{"./_getNative":524,"./_root":575}],433:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_mapCacheClear"),a=e("./_mapCacheDelete"),i=e("./_mapCacheGet"),l=e("./_mapCacheHas"),s=e("./_mapCacheSet");n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=i,n.prototype.has=l,n.prototype.set=s,t.exports=n},{"./_mapCacheClear":555,"./_mapCacheDelete":556,"./_mapCacheGet":557,"./_mapCacheHas":558,"./_mapCacheSet":559}],434:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),a=n(o,"Promise");t.exports=a},{"./_getNative":524,"./_root":575}],435:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),a=n(o,"Set");t.exports=a},{"./_getNative":524,"./_root":575}],436:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new o;++t<r;)this.add(e[t])}var o=e("./_MapCache"),a=e("./_setCacheAdd"),i=e("./_setCacheHas");n.prototype.add=n.prototype.push=a,n.prototype.has=i,t.exports=n},{"./_MapCache":433,"./_setCacheAdd":576,"./_setCacheHas":577}],437:[function(e,t,r){function n(e){var t=this.__data__=new o(e);this.size=t.size}var o=e("./_ListCache"),a=e("./_stackClear"),i=e("./_stackDelete"),l=e("./_stackGet"),s=e("./_stackHas"),u=e("./_stackSet");n.prototype.clear=a,n.prototype.delete=i,n.prototype.get=l,n.prototype.has=s,n.prototype.set=u,t.exports=n},{"./_ListCache":430,"./_stackClear":583,"./_stackDelete":584,"./_stackGet":585,"./_stackHas":586,"./_stackSet":587}],438:[function(e,t,r){var n=e("./_root"),o=n.Symbol;t.exports=o},{"./_root":575}],439:[function(e,t,r){var n=e("./_root"),o=n.Uint8Array;t.exports=o},{"./_root":575}],440:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),a=n(o,"WeakMap");t.exports=a},{"./_getNative":524,"./_root":575}],441:[function(e,t,r){function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}t.exports=n},{}],442:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}t.exports=n},{}],443:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}t.exports=n},{}],444:[function(e,t,r){function n(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=e("./_baseIndexOf");t.exports=n},{"./_baseIndexOf":463}],445:[function(e,t,r){function n(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}t.exports=n},{}],446:[function(e,t,r){function n(e,t){var r=i(e),n=!r&&a(e),c=!r&&!n&&l(e),f=!r&&!n&&!c&&u(e),p=r||n||c||f,m=p?o(e.length,String):[],h=m.length;for(var _ in e)!t&&!d.call(e,_)||p&&("length"==_||c&&("offset"==_||"parent"==_)||f&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||s(_,h))||m.push(_);return m}var o=e("./_baseTimes"),a=e("./isArguments"),i=e("./isArray"),l=e("./isBuffer"),s=e("./_isIndex"),u=e("./isTypedArray"),c=Object.prototype,d=c.hasOwnProperty;t.exports=n},{"./_baseTimes":483,"./_isIndex":543,"./isArguments":609,"./isArray":610,"./isBuffer":612,"./isTypedArray":622}],447:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}t.exports=n},{}],448:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}t.exports=n},{}],449:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}t.exports=n},{}],450:[function(e,t,r){function n(e,t,r){var n=e[t];l.call(e,t)&&a(n,r)&&(void 0!==r||t in e)||o(e,t,r)}var o=e("./_baseAssignValue"),a=e("./eq"),i=Object.prototype,l=i.hasOwnProperty;t.exports=n},{"./_baseAssignValue":454,"./eq":598}],451:[function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}var o=e("./eq");t.exports=n},{"./eq":598}],452:[function(e,t,r){function n(e,t){return e&&o(t,a(t),e)}var o=e("./_copyObject"),a=e("./keys");t.exports=n},{"./_copyObject":498,"./keys":625}],453:[function(e,t,r){function n(e,t){return e&&o(t,a(t),e)}var o=e("./_copyObject"),a=e("./keysIn");t.exports=n},{"./_copyObject":498,"./keysIn":626}],454:[function(e,t,r){function n(e,t,r){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var o=e("./_defineProperty");t.exports=n},{"./_defineProperty":511}],455:[function(e,t,r){function n(e,t,r,M,x,R){var N,L=t&S,$=t&P,U=t&I;if(r&&(N=x?r(e,M,x,R):r(e)),void 0!==N)return N;if(!E(e))return e;var B=g(e);if(B){if(N=_(e),!L)return c(e,N)}else{var V=h(e),F=V==T||V==C;if(b(e))return u(e,L);if(V==D||V==k||F&&!x){if(N=$||F?{}:v(e),!L)return $?f(e,s(N,e)):d(e,l(N,e))}else{if(!A[V])return x?e:{};N=y(e,V,L)}}R||(R=new o);var H=R.get(e);if(H)return H;if(R.set(e,N),j(e))return e.forEach(function(o){N.add(n(o,t,r,o,e,R))}),N;if(w(e))return e.forEach(function(o,a){N.set(a,n(o,t,r,a,e,R))}),N;var q=U?$?m:p:$?keysIn:O,G=B?void 0:q(e);return a(G||e,function(o,a){G&&(a=o,o=e[a]),i(N,a,n(o,t,r,a,e,R))}),N}var o=e("./_Stack"),a=e("./_arrayEach"),i=e("./_assignValue"),l=e("./_baseAssign"),s=e("./_baseAssignIn"),u=e("./_cloneBuffer"),c=e("./_copyArray"),d=e("./_copySymbols"),f=e("./_copySymbolsIn"),p=e("./_getAllKeys"),m=e("./_getAllKeysIn"),h=e("./_getTag"),_=e("./_initCloneArray"),y=e("./_initCloneByTag"),v=e("./_initCloneObject"),g=e("./isArray"),b=e("./isBuffer"),w=e("./isMap"),E=e("./isObject"),j=e("./isSet"),O=e("./keys"),S=1,P=2,I=4,k="[object Arguments]",T="[object Function]",C="[object GeneratorFunction]",D="[object Object]",A={};A[k]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[D]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[T]=A["[object WeakMap]"]=!1,t.exports=n},{"./_Stack":437,"./_arrayEach":442,"./_assignValue":450,"./_baseAssign":452,"./_baseAssignIn":453,"./_cloneBuffer":490,"./_copyArray":497,"./_copySymbols":499,"./_copySymbolsIn":500,"./_getAllKeys":517,"./_getAllKeysIn":518,"./_getTag":529,"./_initCloneArray":538,"./_initCloneByTag":539,"./_initCloneObject":540,"./isArray":610,"./isBuffer":612,"./isMap":616,"./isObject":617,"./isSet":620,"./keys":625}],456:[function(e,t,r){var n=e("./isObject"),o=Object.create,a=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();t.exports=a},{"./isObject":617}],457:[function(e,t,r){function n(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}t.exports=n},{}],458:[function(e,t,r){function n(e,t,r,i,l){var s=-1,u=e.length;for(r||(r=a),l||(l=[]);++s<u;){var c=e[s];t>0&&r(c)?t>1?n(c,t-1,r,i,l):o(l,c):i||(l[l.length]=c)}return l}var o=e("./_arrayPush"),a=e("./_isFlattenable");t.exports=n},{"./_arrayPush":448,"./_isFlattenable":542}],459:[function(e,t,r){function n(e,t){t=o(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[a(t[r++])];return r&&r==n?e:void 0}var o=e("./_castPath"),a=e("./_toKey");t.exports=n},{"./_castPath":488,"./_toKey":590}],460:[function(e,t,r){function n(e,t,r){var n=t(e);return a(e)?n:o(n,r(e))}var o=e("./_arrayPush"),a=e("./isArray");t.exports=n},{"./_arrayPush":448,"./isArray":610}],461:[function(e,t,r){function n(e){return null==e?void 0===e?s:l:u&&u in Object(e)?a(e):i(e)}var o=e("./_Symbol"),a=e("./_getRawTag"),i=e("./_objectToString"),l="[object Null]",s="[object Undefined]",u=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":438,"./_getRawTag":526,"./_objectToString":569}],462:[function(e,t,r){function n(e,t){return null!=e&&t in Object(e)}t.exports=n},{}],463:[function(e,t,r){function n(e,t,r){return t===t?i(e,t,r):o(e,a,r)}var o=e("./_baseFindIndex"),a=e("./_baseIsNaN"),i=e("./_strictIndexOf");t.exports=n},{"./_baseFindIndex":457,"./_baseIsNaN":469,
"./_strictIndexOf":588}],464:[function(e,t,r){function n(e){return a(e)&&o(e)==i}var o=e("./_baseGetTag"),a=e("./isObjectLike"),i="[object Arguments]";t.exports=n},{"./_baseGetTag":461,"./isObjectLike":618}],465:[function(e,t,r){function n(e,t,r,i,l){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!==e&&t!==t:o(e,t,r,i,n,l))}var o=e("./_baseIsEqualDeep"),a=e("./isObjectLike");t.exports=n},{"./_baseIsEqualDeep":466,"./isObjectLike":618}],466:[function(e,t,r){function n(e,t,r,n,_,v){var g=u(e),b=u(t),w=g?m:s(e),E=b?m:s(t);w=w==p?h:w,E=E==p?h:E;var j=w==h,O=E==h,S=w==E;if(S&&c(e)){if(!c(t))return!1;g=!0,j=!1}if(S&&!j)return v||(v=new o),g||d(e)?a(e,t,r,n,_,v):i(e,t,w,r,n,_,v);if(!(r&f)){var P=j&&y.call(e,"__wrapped__"),I=O&&y.call(t,"__wrapped__");if(P||I){var k=P?e.value():e,T=I?t.value():t;return v||(v=new o),_(k,T,r,n,v)}}return!!S&&(v||(v=new o),l(e,t,r,n,_,v))}var o=e("./_Stack"),a=e("./_equalArrays"),i=e("./_equalByTag"),l=e("./_equalObjects"),s=e("./_getTag"),u=e("./isArray"),c=e("./isBuffer"),d=e("./isTypedArray"),f=1,p="[object Arguments]",m="[object Array]",h="[object Object]",_=Object.prototype,y=_.hasOwnProperty;t.exports=n},{"./_Stack":437,"./_equalArrays":512,"./_equalByTag":513,"./_equalObjects":514,"./_getTag":529,"./isArray":610,"./isBuffer":612,"./isTypedArray":622}],467:[function(e,t,r){function n(e){return a(e)&&o(e)==i}var o=e("./_getTag"),a=e("./isObjectLike"),i="[object Map]";t.exports=n},{"./_getTag":529,"./isObjectLike":618}],468:[function(e,t,r){function n(e,t,r,n){var s=r.length,u=s,c=!n;if(null==e)return!u;for(e=Object(e);s--;){var d=r[s];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<u;){d=r[s];var f=d[0],p=e[f],m=d[1];if(c&&d[2]){if(void 0===p&&!(f in e))return!1}else{var h=new o;if(n)var _=n(p,m,f,e,t,h);if(!(void 0===_?a(m,p,i|l,n,h):_))return!1}}return!0}var o=e("./_Stack"),a=e("./_baseIsEqual"),i=1,l=2;t.exports=n},{"./_Stack":437,"./_baseIsEqual":465}],469:[function(e,t,r){function n(e){return e!==e}t.exports=n},{}],470:[function(e,t,r){function n(e){return!(!i(e)||a(e))&&(o(e)?m:u).test(l(e))}var o=e("./isFunction"),a=e("./_isMasked"),i=e("./isObject"),l=e("./_toSource"),s=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,f=c.toString,p=d.hasOwnProperty,m=RegExp("^"+f.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"./_isMasked":547,"./_toSource":591,"./isFunction":614,"./isObject":617}],471:[function(e,t,r){function n(e){return a(e)&&o(e)==i}var o=e("./_getTag"),a=e("./isObjectLike"),i="[object Set]";t.exports=n},{"./_getTag":529,"./isObjectLike":618}],472:[function(e,t,r){function n(e){return i(e)&&a(e.length)&&!!l[o(e)]}var o=e("./_baseGetTag"),a=e("./isLength"),i=e("./isObjectLike"),l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1,t.exports=n},{"./_baseGetTag":461,"./isLength":615,"./isObjectLike":618}],473:[function(e,t,r){function n(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?l(e)?a(e[0],e[1]):o(e):s(e)}var o=e("./_baseMatches"),a=e("./_baseMatchesProperty"),i=e("./identity"),l=e("./isArray"),s=e("./property");t.exports=n},{"./_baseMatches":477,"./_baseMatchesProperty":478,"./identity":608,"./isArray":610,"./property":629}],474:[function(e,t,r){function n(e){if(!o(e))return a(e);var t=[];for(var r in Object(e))l.call(e,r)&&"constructor"!=r&&t.push(r);return t}var o=e("./_isPrototype"),a=e("./_nativeKeys"),i=Object.prototype,l=i.hasOwnProperty;t.exports=n},{"./_isPrototype":548,"./_nativeKeys":566}],475:[function(e,t,r){function n(e){if(!o(e))return i(e);var t=a(e),r=[];for(var n in e)("constructor"!=n||!t&&s.call(e,n))&&r.push(n);return r}var o=e("./isObject"),a=e("./_isPrototype"),i=e("./_nativeKeysIn"),l=Object.prototype,s=l.hasOwnProperty;t.exports=n},{"./_isPrototype":548,"./_nativeKeysIn":567,"./isObject":617}],476:[function(e,t,r){function n(){}t.exports=n},{}],477:[function(e,t,r){function n(e){var t=a(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||o(r,e,t)}}var o=e("./_baseIsMatch"),a=e("./_getMatchData"),i=e("./_matchesStrictComparable");t.exports=n},{"./_baseIsMatch":468,"./_getMatchData":523,"./_matchesStrictComparable":561}],478:[function(e,t,r){function n(e,t){return l(e)&&s(t)?u(c(e),t):function(r){var n=a(r,e);return void 0===n&&n===t?i(r,e):o(t,n,d|f)}}var o=e("./_baseIsEqual"),a=e("./get"),i=e("./hasIn"),l=e("./_isKey"),s=e("./_isStrictComparable"),u=e("./_matchesStrictComparable"),c=e("./_toKey"),d=1,f=2;t.exports=n},{"./_baseIsEqual":465,"./_isKey":544,"./_isStrictComparable":549,"./_matchesStrictComparable":561,"./_toKey":590,"./get":606,"./hasIn":607}],479:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],480:[function(e,t,r){function n(e){return function(t){return o(t,e)}}var o=e("./_baseGet");t.exports=n},{"./_baseGet":459}],481:[function(e,t,r){var n=e("./identity"),o=e("./_metaMap"),a=o?function(e,t){return o.set(e,t),e}:n;t.exports=a},{"./_metaMap":564,"./identity":608}],482:[function(e,t,r){var n=e("./constant"),o=e("./_defineProperty"),a=e("./identity"),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a;t.exports=i},{"./_defineProperty":511,"./constant":596,"./identity":608}],483:[function(e,t,r){function n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}t.exports=n},{}],484:[function(e,t,r){function n(e){if("string"==typeof e)return e;if(i(e))return a(e,n)+"";if(l(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=e("./_Symbol"),a=e("./_arrayMap"),i=e("./isArray"),l=e("./isSymbol"),s=1/0,u=o?o.prototype:void 0,c=u?u.toString:void 0;t.exports=n},{"./_Symbol":438,"./_arrayMap":447,"./isArray":610,"./isSymbol":621}],485:[function(e,t,r){function n(e){return function(t){return e(t)}}t.exports=n},{}],486:[function(e,t,r){function n(e,t,r){var n=-1,d=a,f=e.length,p=!0,m=[],h=m;if(r)p=!1,d=i;else if(f>=c){var _=t?null:s(e);if(_)return u(_);p=!1,d=l,h=new o}else h=t?[]:m;e:for(;++n<f;){var y=e[n],v=t?t(y):y;if(y=r||0!==y?y:0,p&&v===v){for(var g=h.length;g--;)if(h[g]===v)continue e;t&&h.push(v),m.push(y)}else d(h,v,r)||(h!==m&&h.push(v),m.push(y))}return m}var o=e("./_SetCache"),a=e("./_arrayIncludes"),i=e("./_arrayIncludesWith"),l=e("./_cacheHas"),s=e("./_createSet"),u=e("./_setToArray"),c=200;t.exports=n},{"./_SetCache":436,"./_arrayIncludes":444,"./_arrayIncludesWith":445,"./_cacheHas":487,"./_createSet":509,"./_setToArray":579}],487:[function(e,t,r){function n(e,t){return e.has(t)}t.exports=n},{}],488:[function(e,t,r){function n(e,t){return o(e)?e:a(e,t)?[e]:i(l(e))}var o=e("./isArray"),a=e("./_isKey"),i=e("./_stringToPath"),l=e("./toString");t.exports=n},{"./_isKey":544,"./_stringToPath":589,"./isArray":610,"./toString":637}],489:[function(e,t,r){function n(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=e("./_Uint8Array");t.exports=n},{"./_Uint8Array":439}],490:[function(e,t,r){function n(e,t){if(t)return e.slice();var r=e.length,n=u?u(r):new e.constructor(r);return e.copy(n),n}var o=e("./_root"),a="object"==typeof r&&r&&!r.nodeType&&r,i=a&&"object"==typeof t&&t&&!t.nodeType&&t,l=i&&i.exports===a,s=l?o.Buffer:void 0,u=s?s.allocUnsafe:void 0;t.exports=n},{"./_root":575}],491:[function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var o=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":489}],492:[function(e,t,r){function n(e){var t=new e.constructor(e.source,o.exec(e));return t.lastIndex=e.lastIndex,t}var o=/\w*$/;t.exports=n},{}],493:[function(e,t,r){function n(e){return i?Object(i.call(e)):{}}var o=e("./_Symbol"),a=o?o.prototype:void 0,i=a?a.valueOf:void 0;t.exports=n},{"./_Symbol":438}],494:[function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var o=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":489}],495:[function(e,t,r){function n(e,t,r,n){for(var a=-1,i=e.length,l=r.length,s=-1,u=t.length,c=o(i-l,0),d=Array(u+c),f=!n;++s<u;)d[s]=t[s];for(;++a<l;)(f||a<i)&&(d[r[a]]=e[a]);for(;c--;)d[s++]=e[a++];return d}var o=Math.max;t.exports=n},{}],496:[function(e,t,r){function n(e,t,r,n){for(var a=-1,i=e.length,l=-1,s=r.length,u=-1,c=t.length,d=o(i-s,0),f=Array(d+c),p=!n;++a<d;)f[a]=e[a];for(var m=a;++u<c;)f[m+u]=t[u];for(;++l<s;)(p||a<i)&&(f[m+r[l]]=e[a++]);return f}var o=Math.max;t.exports=n},{}],497:[function(e,t,r){function n(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}t.exports=n},{}],498:[function(e,t,r){function n(e,t,r,n){var i=!r;r||(r={});for(var l=-1,s=t.length;++l<s;){var u=t[l],c=n?n(r[u],e[u],u,r,e):void 0;void 0===c&&(c=e[u]),i?a(r,u,c):o(r,u,c)}return r}var o=e("./_assignValue"),a=e("./_baseAssignValue");t.exports=n},{"./_assignValue":450,"./_baseAssignValue":454}],499:[function(e,t,r){function n(e,t){return o(e,a(e),t)}var o=e("./_copyObject"),a=e("./_getSymbols");t.exports=n},{"./_copyObject":498,"./_getSymbols":527}],500:[function(e,t,r){function n(e,t){return o(e,a(e),t)}var o=e("./_copyObject"),a=e("./_getSymbolsIn");t.exports=n},{"./_copyObject":498,"./_getSymbolsIn":528}],501:[function(e,t,r){var n=e("./_root"),o=n["__core-js_shared__"];t.exports=o},{"./_root":575}],502:[function(e,t,r){function n(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}t.exports=n},{}],503:[function(e,t,r){function n(e,t,r){function n(){return(this&&this!==a&&this instanceof n?s:e).apply(l?r:this,arguments)}var l=t&i,s=o(e);return n}var o=e("./_createCtor"),a=e("./_root"),i=1;t.exports=n},{"./_createCtor":504,"./_root":575}],504:[function(e,t,r){function n(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=o(e.prototype),n=e.apply(r,t);return a(n)?n:r}}var o=e("./_baseCreate"),a=e("./isObject");t.exports=n},{"./_baseCreate":456,"./isObject":617}],505:[function(e,t,r){function n(e,t,r){function n(){for(var a=arguments.length,f=Array(a),p=a,m=s(n);p--;)f[p]=arguments[p];var h=a<3&&f[0]!==m&&f[a-1]!==m?[]:u(f,m);return(a-=h.length)<r?l(e,t,i,n.placeholder,void 0,f,h,void 0,void 0,r-a):o(this&&this!==c&&this instanceof n?d:e,this,f)}var d=a(e);return n}var o=e("./_apply"),a=e("./_createCtor"),i=e("./_createHybrid"),l=e("./_createRecurry"),s=e("./_getHolder"),u=e("./_replaceHolders"),c=e("./_root");t.exports=n},{"./_apply":441,"./_createCtor":504,"./_createHybrid":506,"./_createRecurry":508,"./_getHolder":521,"./_replaceHolders":574,"./_root":575}],506:[function(e,t,r){function n(e,t,r,g,b,w,E,j,O,S){function P(){for(var p=arguments.length,m=Array(p),h=p;h--;)m[h]=arguments[h];if(C)var _=u(P),y=i(m,_);if(g&&(m=o(m,g,b,C)),w&&(m=a(m,w,E,C)),p-=y,C&&p<S){var v=d(m,_);return s(e,t,n,P.placeholder,r,m,v,j,O,S-p)}var M=k?r:this,x=T?M[e]:e;return p=m.length,j?m=c(m,j):D&&p>1&&m.reverse(),I&&O<p&&(m.length=O),this&&this!==f&&this instanceof P&&(x=A||l(x)),x.apply(M,m)}var I=t&y,k=t&p,T=t&m,C=t&(h|_),D=t&v,A=T?void 0:l(e);return P}var o=e("./_composeArgs"),a=e("./_composeArgsRight"),i=e("./_countHolders"),l=e("./_createCtor"),s=e("./_createRecurry"),u=e("./_getHolder"),c=e("./_reorder"),d=e("./_replaceHolders"),f=e("./_root"),p=1,m=2,h=8,_=16,y=128,v=512;t.exports=n},{"./_composeArgs":495,"./_composeArgsRight":496,"./_countHolders":502,"./_createCtor":504,"./_createRecurry":508,"./_getHolder":521,"./_reorder":573,"./_replaceHolders":574,"./_root":575}],507:[function(e,t,r){function n(e,t,r,n){function s(){for(var t=-1,a=arguments.length,l=-1,d=n.length,f=Array(d+a),p=this&&this!==i&&this instanceof s?c:e;++l<d;)f[l]=n[l];for(;a--;)f[l++]=arguments[++t];return o(p,u?r:this,f)}var u=t&l,c=a(e);return s}var o=e("./_apply"),a=e("./_createCtor"),i=e("./_root"),l=1;t.exports=n},{"./_apply":441,"./_createCtor":504,"./_root":575}],508:[function(e,t,r){function n(e,t,r,n,p,m,h,_,y,v){var g=t&c,b=g?h:void 0,w=g?void 0:h,E=g?m:void 0,j=g?void 0:m;t|=g?d:f,(t&=~(g?f:d))&u||(t&=~(l|s));var O=[e,t,p,E,b,j,w,_,y,v],S=r.apply(void 0,O);return o(e)&&a(S,O),S.placeholder=n,i(S,e,t)}var o=e("./_isLaziable"),a=e("./_setData"),i=e("./_setWrapToString"),l=1,s=2,u=4,c=8,d=32,f=64;t.exports=n},{"./_isLaziable":546,"./_setData":578,"./_setWrapToString":581}],509:[function(e,t,r){var n=e("./_Set"),o=e("./noop"),a=e("./_setToArray"),i=n&&1/a(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;t.exports=i},{"./_Set":435,"./_setToArray":579,"./noop":628}],510:[function(e,t,r){function n(e,t,r,n,E,j,O,S){var P=t&_;if(!P&&"function"!=typeof e)throw new TypeError(m);var I=n?n.length:0;if(I||(t&=~(g|b),n=E=void 0),O=void 0===O?O:w(p(O),0),S=void 0===S?S:p(S),I-=E?E.length:0,t&b){var k=n,T=E;n=E=void 0}var C=P?void 0:u(e),D=[e,t,r,n,E,k,T,j,O,S];if(C&&c(D,C),e=D[0],t=D[1],r=D[2],n=D[3],E=D[4],S=D[9]=void 0===D[9]?P?0:e.length:w(D[9]-I,0),!S&&t&(y|v)&&(t&=~(y|v)),t&&t!=h)A=t==y||t==v?i(e,t,S):t!=g&&t!=(h|g)||E.length?l.apply(void 0,D):s(e,t,r,n);else var A=a(e,t,r);return f((C?o:d)(A,D),e,t)}var o=e("./_baseSetData"),a=e("./_createBind"),i=e("./_createCurry"),l=e("./_createHybrid"),s=e("./_createPartial"),u=e("./_getData"),c=e("./_mergeData"),d=e("./_setData"),f=e("./_setWrapToString"),p=e("./toInteger"),m="Expected a function",h=1,_=2,y=8,v=16,g=32,b=64,w=Math.max;t.exports=n},{"./_baseSetData":481,"./_createBind":503,"./_createCurry":505,"./_createHybrid":506,"./_createPartial":507,"./_getData":519,"./_mergeData":563,"./_setData":578,"./_setWrapToString":581,"./toInteger":634}],511:[function(e,t,r){var n=e("./_getNative"),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=o},{"./_getNative":524}],512:[function(e,t,r){function n(e,t,r,n,u,c){var d=r&l,f=e.length,p=t.length;if(f!=p&&!(d&&p>f))return!1;var m=c.get(e);if(m&&c.get(t))return m==t;var h=-1,_=!0,y=r&s?new o:void 0;for(c.set(e,t),c.set(t,e);++h<f;){var v=e[h],g=t[h];if(n)var b=d?n(g,v,h,t,e,c):n(v,g,h,e,t,c);if(void 0!==b){if(b)continue;_=!1;break}if(y){if(!a(t,function(e,t){if(!i(y,t)&&(v===e||u(v,e,r,n,c)))return y.push(t)})){_=!1;break}}else if(v!==g&&!u(v,g,r,n,c)){_=!1;break}}return c.delete(e),c.delete(t),_}var o=e("./_SetCache"),a=e("./_arraySome"),i=e("./_cacheHas"),l=1,s=2;t.exports=n},{"./_SetCache":436,"./_arraySome":449,"./_cacheHas":487}],513:[function(e,t,r){function n(e,t,r,n,o,j,S){switch(r){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!j(new a(e),new a(t)));case f:case p:case _:return i(+e,+t);case m:return e.name==t.name&&e.message==t.message;case y:case g:return e==t+"";case h:var P=s;case v:var I=n&c;if(P||(P=u),e.size!=t.size&&!I)return!1;var k=S.get(e);if(k)return k==t;n|=d,S.set(e,t);var T=l(P(e),P(t),n,o,j,S);return S.delete(e),T;case b:if(O)return O.call(e)==O.call(t)}return!1}var o=e("./_Symbol"),a=e("./_Uint8Array"),i=e("./eq"),l=e("./_equalArrays"),s=e("./_mapToArray"),u=e("./_setToArray"),c=1,d=2,f="[object Boolean]",p="[object Date]",m="[object Error]",h="[object Map]",_="[object Number]",y="[object RegExp]",v="[object Set]",g="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",E="[object DataView]",j=o?o.prototype:void 0,O=j?j.valueOf:void 0;t.exports=n},{"./_Symbol":438,"./_Uint8Array":439,"./_equalArrays":512,"./_mapToArray":560,"./_setToArray":579,"./eq":598}],514:[function(e,t,r){function n(e,t,r,n,i,s){var u=r&a,c=o(e),d=c.length;if(d!=o(t).length&&!u)return!1;for(var f=d;f--;){var p=c[f];if(!(u?p in t:l.call(t,p)))return!1}var m=s.get(e);if(m&&s.get(t))return m==t;var h=!0;s.set(e,t),s.set(t,e);for(var _=u;++f<d;){p=c[f];var y=e[p],v=t[p];if(n)var g=u?n(v,y,p,t,e,s):n(y,v,p,e,t,s);if(!(void 0===g?y===v||i(y,v,r,n,s):g)){h=!1;break}_||(_="constructor"==p)}if(h&&!_){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(h=!1)}return s.delete(e),s.delete(t),h}var o=e("./_getAllKeys"),a=1,i=Object.prototype,l=i.hasOwnProperty;t.exports=n},{"./_getAllKeys":517}],515:[function(e,t,r){function n(e){return i(a(e,void 0,o),e+"")}var o=e("./flatten"),a=e("./_overRest"),i=e("./_setToString");t.exports=n},{"./_overRest":571,"./_setToString":580,"./flatten":599}],516:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],517:[function(e,t,r){function n(e){return o(e,i,a)}var o=e("./_baseGetAllKeys"),a=e("./_getSymbols"),i=e("./keys");t.exports=n},{"./_baseGetAllKeys":460,"./_getSymbols":527,"./keys":625}],518:[function(e,t,r){function n(e){return o(e,i,a)}var o=e("./_baseGetAllKeys"),a=e("./_getSymbolsIn"),i=e("./keysIn");t.exports=n},{"./_baseGetAllKeys":460,"./_getSymbolsIn":528,"./keysIn":626}],519:[function(e,t,r){var n=e("./_metaMap"),o=e("./noop"),a=n?function(e){return n.get(e)}:o;t.exports=a},{"./_metaMap":564,"./noop":628}],520:[function(e,t,r){function n(e){for(var t=e.name+"",r=o[t],n=i.call(o,t)?r.length:0;n--;){var a=r[n],l=a.func;if(null==l||l==e)return a.name}return t}var o=e("./_realNames"),a=Object.prototype,i=a.hasOwnProperty;t.exports=n},{"./_realNames":572}],521:[function(e,t,r){function n(e){return e.placeholder}t.exports=n},{}],522:[function(e,t,r){function n(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}var o=e("./_isKeyable");t.exports=n},{"./_isKeyable":545}],523:[function(e,t,r){function n(e){for(var t=a(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,o(i)]}return t}var o=e("./_isStrictComparable"),a=e("./keys");t.exports=n},{"./_isStrictComparable":549,"./keys":625}],524:[function(e,t,r){function n(e,t){var r=a(e,t);return o(r)?r:void 0}var o=e("./_baseIsNative"),a=e("./_getValue");t.exports=n},{"./_baseIsNative":470,"./_getValue":530}],525:[function(e,t,r){var n=e("./_overArg"),o=n(Object.getPrototypeOf,Object);t.exports=o},{"./_overArg":570}],526:[function(e,t,r){function n(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=l.call(e);return n&&(t?e[s]=r:delete e[s]),o}var o=e("./_Symbol"),a=Object.prototype,i=a.hasOwnProperty,l=a.toString,s=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":438}],527:[function(e,t,r){var n=e("./_arrayFilter"),o=e("./stubArray"),a=Object.prototype,i=a.propertyIsEnumerable,l=Object.getOwnPropertySymbols,s=l?function(e){return null==e?[]:(e=Object(e),n(l(e),function(t){return i.call(e,t)}))}:o;t.exports=s},{"./_arrayFilter":443,"./stubArray":631}],528:[function(e,t,r){var n=e("./_arrayPush"),o=e("./_getPrototype"),a=e("./_getSymbols"),i=e("./stubArray"),l=Object.getOwnPropertySymbols,s=l?function(e){for(var t=[];e;)n(t,a(e)),e=o(e);return t}:i;t.exports=s},{"./_arrayPush":448,"./_getPrototype":525,"./_getSymbols":527,"./stubArray":631}],529:[function(e,t,r){var n=e("./_DataView"),o=e("./_Map"),a=e("./_Promise"),i=e("./_Set"),l=e("./_WeakMap"),s=e("./_baseGetTag"),u=e("./_toSource"),c=u(n),d=u(o),f=u(a),p=u(i),m=u(l),h=s;(n&&"[object DataView]"!=h(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=h(new o)||a&&"[object Promise]"!=h(a.resolve())||i&&"[object Set]"!=h(new i)||l&&"[object WeakMap]"!=h(new l))&&(h=function(e){var t=s(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case c:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case m:return"[object WeakMap]"}return t}),t.exports=h},{"./_DataView":427,"./_Map":432,"./_Promise":434,"./_Set":435,"./_WeakMap":440,"./_baseGetTag":461,"./_toSource":591}],530:[function(e,t,r){function n(e,t){return null==e?void 0:e[t]}t.exports=n},{}],531:[function(e,t,r){function n(e){var t=e.match(o);return t?t[1].split(a):[]}var o=/\{\n\/\* \[wrapped with (.+)\] \*/,a=/,? & /;t.exports=n},{}],532:[function(e,t,r){function n(e,t,r){t=o(t,e);for(var n=-1,c=t.length,d=!1;++n<c;){var f=u(t[n]);if(!(d=null!=e&&r(e,f)))break;e=e[f]}return d||++n!=c?d:!!(c=null==e?0:e.length)&&s(c)&&l(f,c)&&(i(e)||a(e))}var o=e("./_castPath"),a=e("./isArguments"),i=e("./isArray"),l=e("./_isIndex"),s=e("./isLength"),u=e("./_toKey");t.exports=n},{"./_castPath":488,"./_isIndex":543,"./_toKey":590,"./isArguments":609,"./isArray":610,"./isLength":615}],533:[function(e,t,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=e("./_nativeCreate");t.exports=n},{"./_nativeCreate":565}],534:[function(e,t,r){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n},{}],535:[function(e,t,r){function n(e){var t=this.__data__;if(o){var r=t[e];return r===a?void 0:r}return l.call(t,e)?t[e]:void 0}var o=e("./_nativeCreate"),a="__lodash_hash_undefined__",i=Object.prototype,l=i.hasOwnProperty;t.exports=n},{"./_nativeCreate":565}],536:[function(e,t,r){function n(e){var t=this.__data__;return o?void 0!==t[e]:i.call(t,e)}var o=e("./_nativeCreate"),a=Object.prototype,i=a.hasOwnProperty;t.exports=n},{"./_nativeCreate":565}],537:[function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?a:t,this}var o=e("./_nativeCreate"),a="__lodash_hash_undefined__";t.exports=n},{"./_nativeCreate":565}],538:[function(e,t,r){function n(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&a.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var o=Object.prototype,a=o.hasOwnProperty;t.exports=n},{}],539:[function(e,t,r){function n(e,t,r){var n=e.constructor;switch(t){case y:return o(e);case u:case c:return new n(+e);case v:return a(e,r);case g:case b:case w:case E:case j:case O:case S:case P:case I:return s(e,r);case d:return new n;case f:case h:return new n(e);case p:return i(e);case m:return new n;case _:return l(e)}}var o=e("./_cloneArrayBuffer"),a=e("./_cloneDataView"),i=e("./_cloneRegExp"),l=e("./_cloneSymbol"),s=e("./_cloneTypedArray"),u="[object Boolean]",c="[object Date]",d="[object Map]",f="[object Number]",p="[object RegExp]",m="[object Set]",h="[object String]",_="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",E="[object Int16Array]",j="[object Int32Array]",O="[object Uint8Array]",S="[object Uint8ClampedArray]",P="[object Uint16Array]",I="[object Uint32Array]";t.exports=n},{"./_cloneArrayBuffer":489,"./_cloneDataView":491,"./_cloneRegExp":492,"./_cloneSymbol":493,"./_cloneTypedArray":494}],540:[function(e,t,r){function n(e){return"function"!=typeof e.constructor||i(e)?{}:o(a(e))}var o=e("./_baseCreate"),a=e("./_getPrototype"),i=e("./_isPrototype");t.exports=n},{"./_baseCreate":456,"./_getPrototype":525,"./_isPrototype":548}],541:[function(e,t,r){function n(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(o,"{\n/* [wrapped with "+t+"] */\n")}var o=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=n},{}],542:[function(e,t,r){function n(e){return i(e)||a(e)||!!(l&&e&&e[l])}var o=e("./_Symbol"),a=e("./isArguments"),i=e("./isArray"),l=o?o.isConcatSpreadable:void 0;t.exports=n},{"./_Symbol":438,"./isArguments":609,"./isArray":610}],543:[function(e,t,r){function n(e,t){var r=typeof e;return!!(t=null==t?o:t)&&("number"==r||"symbol"!=r&&a.test(e))&&e>-1&&e%1==0&&e<t}var o=9007199254740991,a=/^(?:0|[1-9]\d*)$/;t.exports=n},{}],544:[function(e,t,r){function n(e,t){if(o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!a(e))||(l.test(e)||!i.test(e)||null!=t&&e in Object(t))}var o=e("./isArray"),a=e("./isSymbol"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;t.exports=n},{"./isArray":610,"./isSymbol":621}],545:[function(e,t,r){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=n},{}],546:[function(e,t,r){function n(e){var t=i(e),r=l[t];if("function"!=typeof r||!(t in o.prototype))return!1;if(e===r)return!0;var n=a(r);return!!n&&e===n[0]}var o=e("./_LazyWrapper"),a=e("./_getData"),i=e("./_getFuncName"),l=e("./wrapperLodash");t.exports=n},{"./_LazyWrapper":429,"./_getData":519,"./_getFuncName":520,"./wrapperLodash":639}],547:[function(e,t,r){function n(e){return!!a&&a in e}var o=e("./_coreJsData"),a=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=n},{"./_coreJsData":501}],548:[function(e,t,r){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||o)}var o=Object.prototype;t.exports=n},{}],549:[function(e,t,r){function n(e){return e===e&&!o(e)}var o=e("./isObject");t.exports=n},{"./isObject":617}],550:[function(e,t,r){function n(){this.__data__=[],this.size=0}t.exports=n},{}],551:[function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}var o=e("./_assocIndexOf"),a=Array.prototype,i=a.splice;t.exports=n},{"./_assocIndexOf":451}],552:[function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return r<0?void 0:t[r][1]}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":451}],553:[function(e,t,r){function n(e){return o(this.__data__,e)>-1}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":451}],554:[function(e,t,r){function n(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":451}],555:[function(e,t,r){function n(){this.size=0,this.__data__={hash:new o,map:new(i||a),string:new o}}var o=e("./_Hash"),a=e("./_ListCache"),i=e("./_Map");t.exports=n},{"./_Hash":428,"./_ListCache":430,"./_Map":432}],556:[function(e,t,r){function n(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=e("./_getMapData");t.exports=n},{"./_getMapData":522}],557:[function(e,t,r){function n(e){return o(this,e).get(e)}var o=e("./_getMapData");t.exports=n},{"./_getMapData":522}],558:[function(e,t,r){function n(e){return o(this,e).has(e)}var o=e("./_getMapData");t.exports=n},{"./_getMapData":522}],559:[function(e,t,r){function n(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var o=e("./_getMapData");t.exports=n},{"./_getMapData":522}],560:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}t.exports=n},{}],561:[function(e,t,r){function n(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}t.exports=n},{}],562:[function(e,t,r){function n(e){var t=o(e,function(e){return r.size===a&&r.clear(),e}),r=t.cache;return t}var o=e("./memoize"),a=500;t.exports=n},{"./memoize":627}],563:[function(e,t,r){function n(e,t){var r=e[1],n=t[1],h=r|n,_=h<(s|u|f),y=n==f&&r==d||n==f&&r==p&&e[7].length<=t[8]||n==(f|p)&&t[7].length<=t[8]&&r==d;if(!_&&!y)return e;n&s&&(e[2]=t[2],h|=r&s?0:c);var v=t[3];if(v){var g=e[3];e[3]=g?o(g,v,t[4]):v,e[4]=g?i(e[3],l):t[4]}return v=t[5],v&&(g=e[5],e[5]=g?a(g,v,t[6]):v,e[6]=g?i(e[5],l):t[6]),v=t[7],v&&(e[7]=v),n&f&&(e[8]=null==e[8]?t[8]:m(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=h,e}var o=e("./_composeArgs"),a=e("./_composeArgsRight"),i=e("./_replaceHolders"),l="__lodash_placeholder__",s=1,u=2,c=4,d=8,f=128,p=256,m=Math.min;t.exports=n},{"./_composeArgs":495,"./_composeArgsRight":496,"./_replaceHolders":574}],564:[function(e,t,r){var n=e("./_WeakMap"),o=n&&new n;t.exports=o},{"./_WeakMap":440}],565:[function(e,t,r){var n=e("./_getNative"),o=n(Object,"create");t.exports=o},{"./_getNative":524}],566:[function(e,t,r){var n=e("./_overArg"),o=n(Object.keys,Object);t.exports=o},{"./_overArg":570}],567:[function(e,t,r){function n(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}t.exports=n},{}],568:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof r&&r&&!r.nodeType&&r,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,i=a&&a.exports===o,l=i&&n.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||l&&l.binding&&l.binding("util")}catch(e){}}();t.exports=s},{"./_freeGlobal":516}],569:[function(e,t,r){function n(e){return a.call(e)}var o=Object.prototype,a=o.toString;t.exports=n},{}],570:[function(e,t,r){function n(e,t){return function(r){return e(t(r))}}t.exports=n},{}],571:[function(e,t,r){function n(e,t,r){return t=a(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,l=a(n.length-t,0),s=Array(l);++i<l;)s[i]=n[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=n[i];return u[t]=r(s),o(e,this,u)}}var o=e("./_apply"),a=Math.max;t.exports=n},{"./_apply":441}],572:[function(e,t,r){var n={};t.exports=n},{}],573:[function(e,t,r){function n(e,t){for(var r=e.length,n=i(t.length,r),l=o(e);n--;){var s=t[n];e[n]=a(s,r)?l[s]:void 0}return e}var o=e("./_copyArray"),a=e("./_isIndex"),i=Math.min;t.exports=n},{"./_copyArray":497,"./_isIndex":543}],574:[function(e,t,r){function n(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var l=e[r];l!==t&&l!==o||(e[r]=o,i[a++]=r)}return i}var o="__lodash_placeholder__";t.exports=n},{}],575:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();t.exports=a},{"./_freeGlobal":516}],576:[function(e,t,r){function n(e){return this.__data__.set(e,o),this}var o="__lodash_hash_undefined__";t.exports=n},{}],577:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],578:[function(e,t,r){var n=e("./_baseSetData"),o=e("./_shortOut"),a=o(n);t.exports=a},{"./_baseSetData":481,"./_shortOut":582}],579:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}t.exports=n},{}],580:[function(e,t,r){var n=e("./_baseSetToString"),o=e("./_shortOut"),a=o(n);t.exports=a},{"./_baseSetToString":482,"./_shortOut":582}],581:[function(e,t,r){function n(e,t,r){var n=t+"";return i(e,a(n,l(o(n),r)))}var o=e("./_getWrapDetails"),a=e("./_insertWrapDetails"),i=e("./_setToString"),l=e("./_updateWrapDetails");t.exports=n},{"./_getWrapDetails":531,"./_insertWrapDetails":541,"./_setToString":580,"./_updateWrapDetails":592}],582:[function(e,t,r){function n(e){var t=0,r=0;return function(){var n=i(),l=a-(n-r);if(r=n,l>0){if(++t>=o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var o=800,a=16,i=Date.now;t.exports=n},{}],583:[function(e,t,r){function n(){this.__data__=new o,this.size=0}var o=e("./_ListCache");t.exports=n},{"./_ListCache":430}],584:[function(e,t,r){function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}t.exports=n},{}],585:[function(e,t,r){function n(e){return this.__data__.get(e)}t.exports=n},{}],586:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],587:[function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!a||n.length<l-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(n)}return r.set(e,t),this.size=r.size,this}var o=e("./_ListCache"),a=e("./_Map"),i=e("./_MapCache"),l=200;t.exports=n},{"./_ListCache":430,"./_Map":432,"./_MapCache":433}],588:[function(e,t,r){function n(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}t.exports=n},{}],589:[function(e,t,r){
var n=e("./_memoizeCapped"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,r,n,o){t.push(n?o.replace(a,"$1"):r||e)}),t});t.exports=i},{"./_memoizeCapped":562}],590:[function(e,t,r){function n(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}var o=e("./isSymbol"),a=1/0;t.exports=n},{"./isSymbol":621}],591:[function(e,t,r){function n(e){if(null!=e){try{return a.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var o=Function.prototype,a=o.toString;t.exports=n},{}],592:[function(e,t,r){function n(e,t){return o(i,function(r){var n="_."+r[0];t&r[1]&&!a(e,n)&&e.push(n)}),e.sort()}var o=e("./_arrayEach"),a=e("./_arrayIncludes"),i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=n},{"./_arrayEach":442,"./_arrayIncludes":444}],593:[function(e,t,r){function n(e){if(e instanceof o)return e.clone();var t=new a(e.__wrapped__,e.__chain__);return t.__actions__=i(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var o=e("./_LazyWrapper"),a=e("./_LodashWrapper"),i=e("./_copyArray");t.exports=n},{"./_LazyWrapper":429,"./_LodashWrapper":431,"./_copyArray":497}],594:[function(e,t,r){function n(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,o(e,a,void 0,void 0,void 0,void 0,t)}var o=e("./_createWrap"),a=128;t.exports=n},{"./_createWrap":510}],595:[function(e,t,r){function n(e){return o(e,a)}var o=e("./_baseClone"),a=4;t.exports=n},{"./_baseClone":455}],596:[function(e,t,r){function n(e){return function(){return e}}t.exports=n},{}],597:[function(e,t,r){function n(e,t,r){t=r?void 0:t;var i=o(e,a,void 0,void 0,void 0,void 0,void 0,t);return i.placeholder=n.placeholder,i}var o=e("./_createWrap"),a=8;n.placeholder={},t.exports=n},{"./_createWrap":510}],598:[function(e,t,r){function n(e,t){return e===t||e!==e&&t!==t}t.exports=n},{}],599:[function(e,t,r){function n(e){return(null==e?0:e.length)?o(e,1):[]}var o=e("./_baseFlatten");t.exports=n},{"./_baseFlatten":458}],600:[function(e,t,r){function n(e,t){return 2==t?function(t,r){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function o(e,t){return 2==t?function(t,r){return e(t,r)}:function(t){return e(t)}}function a(e){for(var t=e?e.length:0,r=Array(t);t--;)r[t]=e[t];return r}function i(e){return function(t){return e({},t)}}function l(e,t){return function(){for(var r=arguments.length,n=r-1,o=Array(r);r--;)o[r]=arguments[r];var a=o[t],i=o.slice(0,t);return a&&f.apply(i,a),t!=n&&f.apply(i,o.slice(t+1)),e.apply(this,i)}}function s(e,t){return function(){var r=arguments.length;if(r){for(var n=Array(r);r--;)n[r]=arguments[r];var o=n[0]=t.apply(void 0,n);return e.apply(void 0,n),o}}}function u(e,t,r,f){function p(e,t){if(P.cap){var r=c.iterateeRearg[e];if(r)return w(t,r);var n=!O&&c.iterateeAry[e];if(n)return b(t,n)}return t}function m(e,t,r){return k||P.curry&&r>1?N(t,r):t}function h(e,t,r){if(P.fixed&&(T||!c.skipFixed[e])){var n=c.methodSpread[e],o=n&&n.start;return void 0===o?M(t,r):l(t,o)}return t}function _(e,t,r){return P.rearg&&r>1&&(C||!c.skipRearg[e])?H(t,c.methodRearg[e]||c.aryRearg[r]):t}function y(e,t){t=G(t);for(var r=-1,n=t.length,o=n-1,a=R(Object(e)),i=a;null!=i&&++r<n;){var l=t[r],s=i[l];null==s||B(s)||U(s)||V(s)||(i[l]=R(r==o?s:Object(s))),i=i[l]}return a}function v(e){return Y.runInContext.convert(e)(void 0)}function g(e,t){var r=c.aliasToReal[e]||e,n=c.remap[r]||r,o=f;return function(e){var a=O?D:A,i=O?D[n]:t,l=x(x({},o),e);return u(a,r,i,l)}}function b(e,t){return E(e,function(e){return"function"==typeof e?o(e,t):e})}function w(e,t){return E(e,function(e){var r=t.length;return n(H(o(e,r),t),r)})}function E(e,t){return function(){var r=arguments.length;if(!r)return e();for(var n=Array(r);r--;)n[r]=arguments[r];var o=P.rearg?0:r-1;return n[o]=t(n[o]),e.apply(void 0,n)}}function j(e,t,r){var n,o=c.aliasToReal[e]||e,l=t,u=W[o];return u?l=u(t):P.immutable&&(c.mutate.array[o]?l=s(t,a):c.mutate.object[o]?l=s(t,i(t)):c.mutate.set[o]&&(l=s(t,y))),L(z,function(e){return L(c.aryMethod[e],function(t){if(o==t){var r=c.methodSpread[o],a=r&&r.afterRearg;return n=a?h(o,_(o,l,e),e):_(o,h(o,l,e),e),n=p(o,n),n=m(o,n,e),!1}}),!n}),n||(n=l),n==t&&(n=k?N(n,1):function(){return t.apply(this,arguments)}),n.convert=g(o,t),n.placeholder=t.placeholder=r,n}var O="function"==typeof t,S=t===Object(t);if(S&&(f=r,r=t,t=void 0),null==r)throw new TypeError;f||(f={});var P={cap:!("cap"in f)||f.cap,curry:!("curry"in f)||f.curry,fixed:!("fixed"in f)||f.fixed,immutable:!("immutable"in f)||f.immutable,rearg:!("rearg"in f)||f.rearg},I=O?r:d,k="curry"in f&&f.curry,T="fixed"in f&&f.fixed,C="rearg"in f&&f.rearg,D=O?r.runInContext():void 0,A=O?r:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},M=A.ary,x=A.assign,R=A.clone,N=A.curry,L=A.forEach,$=A.isArray,U=A.isError,B=A.isFunction,V=A.isWeakMap,F=A.keys,H=A.rearg,q=A.toInteger,G=A.toPath,z=F(c.aryMethod),W={castArray:function(e){return function(){var t=arguments[0];return $(t)?e(a(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],r=arguments[1],n=e(t,r),a=n.length;return P.cap&&"number"==typeof r?(r=r>2?r-2:1,a&&a<=r?n:o(n,r)):n}},mixin:function(e){return function(t){var r=this;if(!B(r))return e(r,Object(t));var n=[];return L(F(t),function(e){B(t[e])&&n.push([e,r.prototype[e]])}),e(r,Object(t)),L(n,function(e){var t=e[1];B(t)?r.prototype[e[0]]=t:delete r.prototype[e[0]]}),r}},nthArg:function(e){return function(t){var r=t<0?1:q(t)+1;return N(e(t),r)}},rearg:function(e){return function(t,r){var n=r?r.length:0;return N(e(t,r),n)}},runInContext:function(t){return function(r){return u(e,t(r),f)}}};if(!S)return j(t,r,I);var Y=r,K=[];return L(z,function(e){L(c.aryMethod[e],function(e){var t=Y[c.remap[e]||e];t&&K.push([e,j(e,t,Y)])})}),L(F(Y),function(e){var t=Y[e];if("function"==typeof t){for(var r=K.length;r--;)if(K[r][0]==e)return;t.convert=g(e,t),K.push([e,t])}}),L(K,function(e){Y[e[0]]=e[1]}),Y.convert=v,Y.placeholder=Y,L(F(Y),function(e){L(c.realToAlias[e]||[],function(t){Y[t]=Y[e]})}),Y}var c=e("./_mapping"),d=e("./placeholder"),f=Array.prototype.push;t.exports=u},{"./_mapping":601,"./placeholder":604}],601:[function(e,t,r){r.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},r.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},r.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},r.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},r.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},r.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},r.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},r.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},r.realToAlias=function(){var e=Object.prototype.hasOwnProperty,t=r.aliasToReal,n={};for(var o in t){var a=t[o];e.call(n,a)?n[a].push(o):n[a]=[o]}return n}(),r.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},r.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},r.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},{}],602:[function(e,t,r){t.exports={ary:e("../ary"),assign:e("../_baseAssign"),clone:e("../clone"),curry:e("../curry"),forEach:e("../_arrayEach"),isArray:e("../isArray"),isError:e("../isError"),isFunction:e("../isFunction"),isWeakMap:e("../isWeakMap"),iteratee:e("../iteratee"),keys:e("../_baseKeys"),rearg:e("../rearg"),toInteger:e("../toInteger"),toPath:e("../toPath")}},{"../_arrayEach":442,"../_baseAssign":452,"../_baseKeys":474,"../ary":594,"../clone":595,"../curry":597,"../isArray":610,"../isError":613,"../isFunction":614,"../isWeakMap":623,"../iteratee":624,"../rearg":630,"../toInteger":634,"../toPath":636}],603:[function(e,t,r){function n(e,t,r){return o(a,e,t,r)}var o=e("./_baseConvert"),a=e("./_util");t.exports=n},{"./_baseConvert":600,"./_util":602}],604:[function(e,t,r){t.exports={}},{}],605:[function(e,t,r){var n=e("./convert"),o=n("uniqBy",e("../uniqBy"));o.placeholder=e("./placeholder"),t.exports=o},{"../uniqBy":638,"./convert":603,"./placeholder":604}],606:[function(e,t,r){function n(e,t,r){var n=null==e?void 0:o(e,t);return void 0===n?r:n}var o=e("./_baseGet");t.exports=n},{"./_baseGet":459}],607:[function(e,t,r){function n(e,t){return null!=e&&a(e,t,o)}var o=e("./_baseHasIn"),a=e("./_hasPath");t.exports=n},{"./_baseHasIn":462,"./_hasPath":532}],608:[function(e,t,r){function n(e){return e}t.exports=n},{}],609:[function(e,t,r){var n=e("./_baseIsArguments"),o=e("./isObjectLike"),a=Object.prototype,i=a.hasOwnProperty,l=a.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return o(e)&&i.call(e,"callee")&&!l.call(e,"callee")};t.exports=s},{"./_baseIsArguments":464,"./isObjectLike":618}],610:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],611:[function(e,t,r){function n(e){return null!=e&&a(e.length)&&!o(e)}var o=e("./isFunction"),a=e("./isLength");t.exports=n},{"./isFunction":614,"./isLength":615}],612:[function(e,t,r){var n=e("./_root"),o=e("./stubFalse"),a="object"==typeof r&&r&&!r.nodeType&&r,i=a&&"object"==typeof t&&t&&!t.nodeType&&t,l=i&&i.exports===a,s=l?n.Buffer:void 0,u=s?s.isBuffer:void 0,c=u||o;t.exports=c},{"./_root":575,"./stubFalse":632}],613:[function(e,t,r){function n(e){if(!a(e))return!1;var t=o(e);return t==s||t==l||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}var o=e("./_baseGetTag"),a=e("./isObjectLike"),i=e("./isPlainObject"),l="[object DOMException]",s="[object Error]";t.exports=n},{"./_baseGetTag":461,"./isObjectLike":618,"./isPlainObject":619}],614:[function(e,t,r){function n(e){if(!a(e))return!1;var t=o(e);return t==l||t==s||t==i||t==u}var o=e("./_baseGetTag"),a=e("./isObject"),i="[object AsyncFunction]",l="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";t.exports=n},{"./_baseGetTag":461,"./isObject":617}],615:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}var o=9007199254740991;t.exports=n},{}],616:[function(e,t,r){var n=e("./_baseIsMap"),o=e("./_baseUnary"),a=e("./_nodeUtil"),i=a&&a.isMap,l=i?o(i):n;t.exports=l},{"./_baseIsMap":467,"./_baseUnary":485,"./_nodeUtil":568}],617:[function(e,t,r){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n},{}],618:[function(e,t,r){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],619:[function(e,t,r){function n(e){if(!i(e)||o(e)!=l)return!1;var t=a(e);if(null===t)return!0;var r=d.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==f}var o=e("./_baseGetTag"),a=e("./_getPrototype"),i=e("./isObjectLike"),l="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,d=u.hasOwnProperty,f=c.call(Object);t.exports=n},{"./_baseGetTag":461,"./_getPrototype":525,"./isObjectLike":618}],620:[function(e,t,r){var n=e("./_baseIsSet"),o=e("./_baseUnary"),a=e("./_nodeUtil"),i=a&&a.isSet,l=i?o(i):n;t.exports=l},{"./_baseIsSet":471,"./_baseUnary":485,"./_nodeUtil":568}],621:[function(e,t,r){function n(e){return"symbol"==typeof e||a(e)&&o(e)==i}var o=e("./_baseGetTag"),a=e("./isObjectLike"),i="[object Symbol]";t.exports=n},{"./_baseGetTag":461,"./isObjectLike":618}],622:[function(e,t,r){var n=e("./_baseIsTypedArray"),o=e("./_baseUnary"),a=e("./_nodeUtil"),i=a&&a.isTypedArray,l=i?o(i):n;t.exports=l},{"./_baseIsTypedArray":472,"./_baseUnary":485,"./_nodeUtil":568}],623:[function(e,t,r){function n(e){return a(e)&&o(e)==i}var o=e("./_getTag"),a=e("./isObjectLike"),i="[object WeakMap]";t.exports=n},{"./_getTag":529,"./isObjectLike":618}],624:[function(e,t,r){function n(e){return a("function"==typeof e?e:o(e,i))}var o=e("./_baseClone"),a=e("./_baseIteratee"),i=1;t.exports=n},{"./_baseClone":455,"./_baseIteratee":473}],625:[function(e,t,r){function n(e){return i(e)?o(e):a(e)}var o=e("./_arrayLikeKeys"),a=e("./_baseKeys"),i=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":446,"./_baseKeys":474,"./isArrayLike":611}],626:[function(e,t,r){function n(e){return i(e)?o(e,!0):a(e)}var o=e("./_arrayLikeKeys"),a=e("./_baseKeysIn"),i=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":446,"./_baseKeysIn":475,"./isArrayLike":611}],627:[function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(n.Cache||o),r}var o=e("./_MapCache"),a="Expected a function";n.Cache=o,t.exports=n},{"./_MapCache":433}],628:[function(e,t,r){function n(){}t.exports=n},{}],629:[function(e,t,r){function n(e){return i(e)?o(l(e)):a(e)}var o=e("./_baseProperty"),a=e("./_basePropertyDeep"),i=e("./_isKey"),l=e("./_toKey");t.exports=n},{"./_baseProperty":479,"./_basePropertyDeep":480,"./_isKey":544,"./_toKey":590}],630:[function(e,t,r){var n=e("./_createWrap"),o=e("./_flatRest"),a=o(function(e,t){return n(e,256,void 0,void 0,void 0,t)});t.exports=a},{"./_createWrap":510,"./_flatRest":515}],631:[function(e,t,r){function n(){return[]}t.exports=n},{}],632:[function(e,t,r){function n(){return!1}t.exports=n},{}],633:[function(e,t,r){function n(e){if(!e)return 0===e?e:0;if((e=o(e))===a||e===-a){return(e<0?-1:1)*i}return e===e?e:0}var o=e("./toNumber"),a=1/0,i=1.7976931348623157e308;t.exports=n},{"./toNumber":635}],634:[function(e,t,r){function n(e){var t=o(e),r=t%1;return t===t?r?t-r:t:0}var o=e("./toFinite");t.exports=n},{"./toFinite":633}],635:[function(e,t,r){function n(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var r=u.test(e);return r||c.test(e)?d(e.slice(2),r?2:8):s.test(e)?i:+e}var o=e("./isObject"),a=e("./isSymbol"),i=NaN,l=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;t.exports=n},{"./isObject":617,"./isSymbol":621}],636:[function(e,t,r){function n(e){return i(e)?o(e,u):l(e)?[e]:a(s(c(e)))}var o=e("./_arrayMap"),a=e("./_copyArray"),i=e("./isArray"),l=e("./isSymbol"),s=e("./_stringToPath"),u=e("./_toKey"),c=e("./toString");t.exports=n},{"./_arrayMap":447,"./_copyArray":497,"./_stringToPath":589,"./_toKey":590,"./isArray":610,"./isSymbol":621,"./toString":637}],637:[function(e,t,r){function n(e){return null==e?"":o(e)}var o=e("./_baseToString");t.exports=n},{"./_baseToString":484}],638:[function(e,t,r){function n(e,t){return e&&e.length?a(e,o(t,2)):[]}var o=e("./_baseIteratee"),a=e("./_baseUniq");t.exports=n},{"./_baseIteratee":473,"./_baseUniq":486}],639:[function(e,t,r){function n(e){if(s(e)&&!l(e)&&!(e instanceof o)){if(e instanceof a)return e;if(d.call(e,"__wrapped__"))return u(e)}return new a(e)}var o=e("./_LazyWrapper"),a=e("./_LodashWrapper"),i=e("./_baseLodash"),l=e("./isArray"),s=e("./isObjectLike"),u=e("./_wrapperClone"),c=Object.prototype,d=c.hasOwnProperty;n.prototype=i.prototype,n.prototype.constructor=n,t.exports=n},{"./_LazyWrapper":429,"./_LodashWrapper":431,"./_baseLodash":476,"./_wrapperClone":593,"./isArray":610,"./isObjectLike":618}],640:[function(e,t,r){var n=function(e){"use strict";function t(e,t,r,o){var a=t&&t.prototype instanceof n?t:n,i=Object.create(a.prototype),l=new f(o||[]);return i._invoke=s(e,r,l),i}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function n(){}function o(){}function a(){}function i(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function t(n,o,a,i){var l=r(e[n],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,a,i)},function(e){t("throw",e,a,i)}):Promise.resolve(u).then(function(e){s.value=e,a(s)},function(e){return t("throw",e,a,i)})}i(l.arg)}function n(e,r){function n(){return new Promise(function(n,o){t(e,r,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=n}function s(e,t,n){var o=E;return function(a,i){if(o===O)throw new Error("Generator is already running");if(o===S){if("throw"===a)throw i;return m()}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var s=u(l,n);if(s){if(s===P)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===E)throw o=S,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=O;var c=r(e,t,n);if("normal"===c.type){if(o=n.done?S:j,c.arg===P)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=S,n.method="throw",n.arg=c.arg)}}}function u(e,t){var n=e.iterator[t.method];if(n===h){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=h,u(e,t),"throw"===t.method))return P;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,P;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=h),t.delegate=null,P):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,P)}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function p(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=h,t.done=!0,t};return n.next=n}}return{next:m}}function m(){return{value:h,done:!0}}var h,_=Object.prototype,y=_.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},g=v.iterator||"@@iterator",b=v.asyncIterator||"@@asyncIterator",w=v.toStringTag||"@@toStringTag";e.wrap=t;var E="suspendedStart",j="suspendedYield",O="executing",S="completed",P={},I={};I[g]=function(){return this};var k=Object.getPrototypeOf,T=k&&k(k(p([])));T&&T!==_&&y.call(T,g)&&(I=T);var C=a.prototype=n.prototype=Object.create(I);return o.prototype=C.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},i(l.prototype),l.prototype[b]=function(){return this},e.AsyncIterator=l,e.async=function(r,n,o,a){var i=new l(t(r,n,o,a));return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},i(C),C[w]="Generator",C[g]=function(){return this},C.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=p,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=h)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=h),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var i=y.call(o,"catchLoc"),l=y.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),P},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),P}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;d(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=h),P}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},{}],641:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ContentTransformers=r.GContentTransformers=void 0;var i=function(){function e(){n(this,e),this.onContentSave=this.onContentSave.bind(this),this.onContollerHide=this.onContollerHide.bind(this),this.reset=this.reset.bind(this)}return a(e,[{key:"onContentSave",value:function(e){if(e=$strip(e),-1!==e.indexOf("@")&&(e=" ".concat(e," ")),"gmail"===this.type)return"[[gmail=".concat(this.link_id,", ").concat(e," ]]");if("thunderbird"===this.type){return"[[thunderbird\n ".concat(e.replace(/\n/g,""),"\n").concat(this.link_id.replace(/\n/g,"")," \n ]]")}if("outlook"===this.type)return"[[outlook=".concat(this.link_id,", ").concat(e," ]]");if("spark"===this.type)return"".concat(e," ").concat(this.link_id);if(this.type){var t=e;t=t.replace(/\[/g,"("),t=t.replace(/\]/g,")");var r=this.link_id;return r=r.replace(/\(/g,"["),r=r.replace(/\)/g,"]"),"[".concat(t,"](").concat(r,")")}return e}},{key:"onContentShow",value:function(){return this.title}},{key:"onContollerHide",value:function(){this.type=null,this.link_id="",this.title=""}},{key:"reset",value:function(){this.onContollerHide()}},{key:"setupByContent",value:function(e){var t,r=e.match(/mail.google.com\/mail/g);r&&1===r.length&&(t=e.match(/(https?:\/\/mail.google.com\/mail\/[^\s]+) \(([^\)]+)\)/),t&&t[0]===e&&(this.link_id=t[1],this.title=e.replace(t[0],t[2]),this.type="gmail_new"),t||(t=e.match(/\[([^\]]+)\]\((https?:\/\/mail.google.com\/mail\/[^\s]+)\)/))&&t[0]===e&&(this.link_id=t[2],this.title=t[1],this.type="gmail_new")),r=e.match(/twist(?:app)?.com\/a/g),r&&1===r.length&&(t=e.match(/(https?:\/\/[^\s]*twist(?:app)?.com\/a\/[^\s]+) \(([^\)]+)\)/),t&&t[0]===e&&(this.link_id=t[1],this.title=e.replace(t[0],t[2]),this.type="twist"),t||(t=e.match(/\[([^\]]+)\]\((https?:\/\/[^\s]*twist(?:app)?.com\/a\/[^\s]+)\)/))&&t[0]===e&&(this.link_id=t[2],this.title=t[1],this.type="twist")),-1!==e.indexOf("[[gmail=")&&(t=e.match(/\[\[gmail=(.+?),\s*(.+?)\]\]/))&&t[0]===e&&(this.link_id=t[1],this.title=t[2],this.type="gmail"),-1!==e.indexOf("[[thunderbird")&&(t=e.match(/\[\[thunderbird\n?([^\n]+)\n([^\n]+)\n\s*\]\]/))&&t[0]===e&&(this.link_id=t[2],this.title=t[1],this.type="thunderbird"),-1!==e.indexOf("[[outlook=")&&(t=e.match(/\[\[outlook=(.+?),\s*(.+?)\]\]/))&&t[0]===e&&(this.link_id=t[1],this.title=t[2],this.type="outlook"),(r=e.match(/readdle-spark:\/\//g))&&1===r.length&&(t=e.match(/\[\(.+\)\]\((readdle-spark:[^\s]+)\)/))&&(this.link_id=t[0],this.title=e.replace(t[0],""),this.type="spark")}},{key:"annotateWithIcon",value:function(e){var t=e.parentNode;if(t){var r;$addClass(t,"has_content_icon"),r="twist"===this.type?"sm1/twist.svg":"generic"===this.type?"sm1/attachment.svg":"sm1/email.svg";var n=svgs.get(r,{className:"content-icon",width:24,height:24});$ATT(t,n)}}}],[{key:"initClass",value:function(){this.prototype.type=null,this.prototype.link_id="",this.prototype.title=""}}]),e}();r.GContentTransformers=i,i.initClass();var l=new i;r.ContentTransformers=l;var s={GContentTransformers:i,ContentTransformers:l};r.default=s},{}],642:[function(e,t,r){"use strict";var n={isGmailDomain:function(e){return-1!=e.indexOf("mail.google.com")||-1!=e.indexOf("googlemail.com")},isCurHrefGmail:function(e){var t=n;if(!e)return!1;if(t.isGmailDomain(e)){if(t.getGmailRealId(e))return!0}return!1},getGmailRealId:function(e){if(!n.isGmailDomain(e))return null;try{var t=e.split("/"),r=t[t.length-1];if(-1==r.indexOf(".")&&-1==r.indexOf("#")&&-1==r.indexOf("/")&&r.length>=16)return r}catch(e){}return null},getThreadId:function(e){var t=e.match(/th=(.{16,})/);return t?t[1]:(t=e.match(/\/([^\/.]{16,})/),t?t[1]:null)}};window.GmailPlugin=n,t.exports=n},{}],643:[function(e,t,r){"use strict";var n=e("./GmailPlugin.js"),o=e("../components/misc/Util.js").postMessageToWindow,a={init:function(){window.linkRedirecter=function(e){$log(e);var t=e.getAttribute("thunder_id");if(t){var r=JSON.stringify({type:"switchEmail",id:t});return top.postMessage(r,"*")}if(window.CUR_HREF&&window.CUR_HREF.href){var a=n.getThreadId(e.href),i=window.CUR_HREF.href.match(/^(.+)#/);if(n.isGmailDomain(e.href)&&a&&i){
if("T_FIREFOX_MESSAGE"==window.CUR_HREF.type){var l=i[1]+"#inbox/"+a,s=JSON.stringify({type:"switchLocation",url:l});try{top.postMessage(s,"*")}catch(e){}return!1}return!top.postMessage||(o(top,"SWITCH_URL:"+e.href),!1)}}return!0}}};t.exports=a},{"../components/misc/Util.js":43,"./GmailPlugin.js":642}],644:[function(e,t,r){"use strict";var n=e("./PluginVersion.js"),o=e("./RatingsTooltip");window.CUR_HREF={};var a=function(e){if(e&&e.data&&e.data.indexOf){var t;if(-1!==e.data.indexOf("--/--")){var r=e.data.split("--/--");if(window.CUR_HREF.href===r[0])return;window.CUR_HREF={href:r[0],title:r[1]},n.notifyExternalServices()}if(-1!==e.data.indexOf("GCHROME_MESSAGE")){if(t=JSON.parse(e.data),window.CUR_HREF.href===t.href)return;window.CUR_HREF=t,n.notifyExternalServices()}-1!==e.data.indexOf("USER_TOOLTIP")&&(t=JSON.parse(e.data),o.show(t))}};r.init=function(){window.attachEvent?window.attachEvent("onmessage",a):window.addEventListener("message",a,!1)}},{"./PluginVersion.js":645,"./RatingsTooltip":646}],645:[function(e,t,r){"use strict";function n(e){window.CUR_HREF=e,p.notifyExternalServices()}function o(){return window.CUR_HREF?window.CUR_HREF.href:null}var a=window.LibEdit,i=window.Signals,l=e("../components/quick_add/QuickAdd"),s=e("../components/project_editor/ProjectEditorManager"),u=e("../components/richtext_editor/NatrualLanguageParsing"),c=e("../external_services/OutlookIntegration.js"),d=e("../plugin_version/ContentTransformers").ContentTransformers,f=e("./GmailPlugin.js");window.CURRENT_EXERNAL_SERVICE=null,window.CUR_HREF=null;var p={init:function(){try{window.addEventListener("message",function(e){if(e){var t=e.data;if(t&&$isString(t)){if("GB_hide"==t)return void GB_hide();-1==t.indexOf("SET_CURRENT_ADD")&&-1==t.indexOf("THUNDERBIRD_MESSAGE")&&-1==t.indexOf("T_FIREFOX_MESSAGE")||n(JSON.parse(t)),-1==t.indexOf("SHOW_QUICK_ADD")&&-1==t.indexOf("GMAIL_MESSAGE_ADD")||(window.CUR_HREF=JSON.parse(t),setTimeout(function(){p.addToGenericController(!0)},100))}}},!1)}catch(e){}i.connect("PluginVersion.notifyExternalServices",this.notifyExternalServices),i.connect("PluginVersion.addToGenericController",$p(this.addToGenericController,!0))},addToGenericController:function(e){void 0===e&&(e=!1);var t=s.current_section_list;return t&&!1===p.force_quick_add?t.addNewItem(!1,function(){p.addToTextArea(s.current_react_editor)}):l.shown||(l.support_annotation=!1,l.toggle(),c.current_email_obj?c.addToTextArea(l):p.addToTextArea(l)),!1},addToTextArea:function(e){if(u.truncate_links=!0,window.CUR_HREF&&window.CUR_HREF.unique_id){var t=window.CUR_HREF;return-1!=t.unique_id.indexOf("TODOIST_WARN_USER_MESSAGE_NOT_SELECTED")?(alert(_("Please select an email first before adding it as a task.")),!1):(d.type="thunderbird",d.link_id=t.unique_id,d.title=p.normalizeTitle(t.subject),e.insertText?e.insertText(d.onContentSave(t.subject.replace(/\n/g,""))):(d.annotateWithIcon(e),a.insertAtCursor(e,t.subject.replace(/\n/g,""),!0),e.onchanged&&e.onchanged()),!1)}if(!o())return!1;if(f.getGmailRealId(o())){var r=window.CUR_HREF.title;r=r.replace(/[-\s]+[^\s]+@[^\s]+ - [^-]+$/,"");try{r=p._stripTitle(r)}catch(e){}d.type="gmail_new",d.link_id=window.CUR_HREF.href,d.title=p.normalizeTitle(r),e.insertText?e.insertText(d.onContentSave(r)):(d.annotateWithIcon(e),a.insertAtCursor(e,r,!0))}else{var n=p.getTitleAndUrl(),i=n[0],l=n[1];l.match(/twist(?:app)?.com\/a/g)?d.type="twist":d.type="generic",d.link_id=l,d.title=i,e.insertText?e.insertText(d.onContentSave(i)):(d.annotateWithIcon(e),a.insertAtCursor(e,i,!0))}return!1},getTitleAndUrl:function(){var e=p._stripTitle(window.CUR_HREF.title);-1!=e.indexOf("(")&&(e=e.replace(/\(/g,"["),e=e.replace(/\)/g,"]"));var t=o();return-1!=t.indexOf("teamcom.io")&&(e=e.replace(/^\[\d+\]\s+/,""),e=e.replace(" | TeamCom","")),[p.normalizeTitle(e),t]},normalizeTitle:function(e){return e.length>140&&(e=e.substring(0,140)+"..."),e.replace(/\n/g," ")},notifyExternalServices:function(){var e,t=!1,r=!0,n=_("Add email as task"),a=null;if(c.current_email_obj?(t=!0,e=c.addToTextArea):window.CUR_HREF&&window.CUR_HREF.unique_id?(t=!0,e=p.addToTextArea):o()&&(t=!0,f.isCurHrefGmail(o())||(n=window.CUR_HREF.action_text||_("Add website as task"),r=!1),e=p.addToTextArea,a=window.CUR_HREF.attach_text),setTimeout(p.notifyExternalServices,500),t){var l=window.CURRENT_EXERNAL_SERVICE;if(l&&l.annotate_fn==e&&l.annotate_add_text==n)return;window.CURRENT_EXERNAL_SERVICE={annotate_fn:e,annotate_add_text:n,is_email:r},a&&(window.CURRENT_EXERNAL_SERVICE.annotate_attach_text=a)}else window.CURRENT_EXERNAL_SERVICE=null;i.sendSignal("external_service_annotation",window.CURRENT_EXERNAL_SERVICE)},_stripTitle:function(e){return e=e.replace(/\s\s+/g," ").replace(/"/g,""),e=e.replace(/\[/g,"(").replace(/\]/g,")"),$strip(e)}};window.PluginVersion=p,t.exports=p},{"../components/project_editor/ProjectEditorManager":62,"../components/quick_add/QuickAdd":73,"../components/richtext_editor/NatrualLanguageParsing":85,"../external_services/OutlookIntegration.js":116,"../plugin_version/ContentTransformers":641,"./GmailPlugin.js":642}],646:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=window,l=i.Alerts,s=window,u=s.IstButton,c=window,d=c.GB_showHTML,f=window,p=f.GB_hide,m=e("../components/misc/Util.js"),h=m.postMessageToWindow,y=function(){function e(){n(this,e),this.show=this.show.bind(this),this.tooltip_shown=!1}return a(e,[{key:"show",value:function(e){var t,r,n,o,a=this;if(!this.tooltip_shown&&!$queryArgument("print_mode")){var i=e.message||"rate_chrome_plugin";"rate_chrome_plugin"===i?r=_("If you enjoy using Todoist for Chrome, would you mind taking a moment and rate us?")+"<br /><br />"+_("It won't take more than a minute. Thanks for your support!"):"rate_firefox_plugin"===i&&(r=_("If you enjoy using Todoist for Firefox, would you mind taking a moment and rate us?")+"<br /><br />"+_("It won't take more than a minute. Thanks for your support!"));var s=l.renderHolder(r);$add(s.icon,svgs.get("sm1/todoist_logo.svg")),$add(s.buttons,BR(),t=u.createButton(_("Rate it now"),null,"red")),$AEV(t,"click",function(){return window.open(e.action_url),a.disableTooltip(i)}),$add(s.buttons,BR(),BR()),$add(s.buttons,o=A({href:"#",c:"cancel",s:"margin-right: 10px;"},_("Remind me later")),n=A({href:"#",c:"cancel"},_("No, Thanks"))),$AEV(o,"click",$p(this.reset,i)),$AEV(n,"click",$p(this.disableTooltip,i)),$AEV([t,o,n],"click",p),d("",s.frame,180,330,{callback_fn:function(){return null}}),this.tooltip_shown=!0}}},{key:"disableTooltip",value:function(e){e&&-1!==e.indexOf("firefox")?h(top,"DISABLE_TOOLTIP:firefox_rating"):h(top,"DISABLE_TOOLTIP:chrome_rating")}},{key:"reset",value:function(e){e&&-1!==e.indexOf("firefox")?h(top,"DISABLE_TOOLTIP:firefox_rating"):h(top,"RESET_TOOLTIP:chrome_rating")}}]),e}();t.exports=new y},{"../components/misc/Util.js":43}],647:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.user,r=e.size,n=e.darkTheme;if(t.image_id)return"".concat(y,"/").concat(t.image_id,"_").concat(r,".jpg");var o=$encode({fullName:t.full_name||t.email.split("@")[0],email:t.email,size:r==g?36:100,bg:n?E:w});return"".concat(v,"?").concat(o)}function u(e){var t=e.user,r=e.size,n=void 0===r?b:r,a=e.darkTheme,i=void 0!==a&&a,l=e.className,u=d.default.useState(!1),c=o(u,2),f=c[0],p=c[1],h=null==t||f,y=h?"https://d3ptyyxy2at9ui.cloudfront.net/circular_profile-1df5ac.svg":s({user:t,size:n,darkTheme:i});return d.default.createElement("img",{src:y,alt:null!=t?t.full_name:_("Anonymous user"),className:(0,m.default)("user_avatar",n,l),onError:function(){f||p(!0)}})}function c(e){return{darkTheme:e.user.theme===h.THEME_DARK}}Object.defineProperty(r,"__esModule",{value:!0}),r.Avatar=u,r.default=void 0;var d=n(e("react")),f=n(e("prop-types")),p=e("react-redux"),m=n(e("classnames")),h=e("../constants/themes"),y="https://dcff1xvirvpfp.cloudfront.net",v="https://avatars.doist.com",g="small",b="medium",w="ffffff",E="1f1f1f";u.propTypes={user:f.default.oneOfType([f.default.shape({image_id:f.default.string.isRequired}),f.default.shape({full_name:f.default.string.isRequired}),f.default.shape({email:f.default.string.isRequired})]),size:f.default.oneOf([g,b]),className:f.default.string,darkTheme:f.default.bool},u.SIZE_SMALL=g,u.SIZE_MEDIUM=b;var j=(0,p.connect)(c)(u);r.default=j},{"../constants/themes":99,classnames:"classnames","prop-types":"prop-types",react:"react","react-redux":"react-redux"}],648:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("prop-types")),u=n(e("@doist/reactist/lib/Tooltip")),c=l.default.forwardRef(function(e,t){var r=e.children,n=e.className,i=e.disabled,s=void 0!==i&&i,c=e.onClick,d=e.onMouseDown,f=e.title,p=e.type,m=void 0===p?"button":p,h=a(e,["children","className","disabled","onClick","onMouseDown","title","type"]);return l.default.createElement("button",o({},h,{onMouseDown:function(e){e.preventDefault(),document.activeElement&&document.activeElement.blur(),d&&d(e)},type:m,ref:t,onClick:c,className:n,disabled:s,"aria-disabled":s?"true":void 0}),null!=f?l.default.createElement(u.default,{text:f,delayShow:0,position:"bottom"},r):r)});c.displayName="Button",c.propTypes={children:s.default.node,className:s.default.string,disabled:s.default.bool,onClick:s.default.func,title:s.default.string,type:s.default.oneOf(["submit","button"])};var d=c;r.default=d},{"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],649:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){return e!==document&&(!("fixed"!==window.getComputedStyle(e).getPropertyValue("position").toLowerCase())||m(e.parentNode))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=n(e("react")),_=n(e("react-dom")),y=n(e("prop-types")),v=n(e("classnames")),g=e("../utils/escapeHandler"),b=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t===document)return r;var n=window.document.defaultView.getComputedStyle(t).getPropertyValue("z-index");return isNaN(n)?e(t.parentNode,r):e(t.parentNode,n>r?n:r)},w=function(e){function t(e){var r;return a(this,t),r=s(this,u(t).call(this,e)),p(c(r),"handleEscape",function(e){"function"==typeof r.props.onHide&&r.props.onHide(e)}),p(c(r),"handleOverlayClick",function(e){null!=e.target.closest("div.dialog-content")||(e.preventDefault(),e.stopPropagation(),r.props.onHide(e))}),r.el=document.createElement("div"),r.el.className=(0,v.default)("dialog",e.className),""!==e.tabIndex&&(r.el.tabIndex=e.tabIndex),document.body.appendChild(r.el),r.noseEl=h.default.createRef(),r.setUnderlaySize=r.setUnderlaySize.bind(c(r)),r.setPosition=r.setPosition.bind(c(r)),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){this.setUnderlaySize(),window.addEventListener("scroll",this.setUnderlaySize),this.setPosition(),window.addEventListener("resize",this.setPosition),this.removeEscapeHandler=(0,g.addEscapeHandler)(this.handleEscape),this.el.addEventListener("click",this.handleOverlayClick),this.props.autoFocus&&this.el.focus()}},{key:"componentWillUnmount",value:function(){this.el.parentNode&&document.body.removeChild(this.el),window.removeEventListener("scroll",this.setUnderlaySize,!1),window.removeEventListener("resize",this.setPosition,!1),this.el.removeEventListener("click",this.handleOverlayClick),this.removeEscapeHandler()}},{key:"setUnderlaySize",value:function(){this.el.style.width="100%",this.el.style.height="".concat($scrollTop()+$winSize().h,"px"),this.el.style.visibility="visible"}},{key:"setPosition",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.position,r=this.props,n=r.anchor,o=r.mouseEvent,a=r.anchorGap,i=r.align,l=r.isFixed,s=r.isPositionFluid,u=r.width,c=r.nose,d=document.body.scrollWidth,f=$scrollTop();e=this.content,e.style.position="fixed",u&&(e.style.width="".concat(u,"px"));var p,h,_,y=e.getBoundingClientRect(),v=y.height;if(o)h=o.pageY,_=o.pageX;else if(n)switch(p=n.getBoundingClientRect(),_=p.left+p.width/2-y.width/2,l||m(n)?(h=0,e.style.position="fixed"):(h=f,e.style.position="absolute"),t){case"top":"bottom"===i?h+=p.bottom-v:"top"===i&&(h+=p.top-v);break;case"right":h+=p.top,_+=p.width/2+y.width/2;break;case"bottom":default:"bottom"===i?h+=p.bottom+(c?10:0):"top"===i&&(h+=p.top+(c?10:0))}else switch(t){case"center":default:h=$winSize().h/2-v/2,_=$winSize().w/2-y.width/2}var g=$winSize().h+f,w=h+v,E=w>g;if(s&&E)switch(t){case"bottom":default:return this.setPosition("top")}_=Math.max(0,Math.min(_,d-y.width-12)),"top"===t?h-=a:"bottom"===t&&(h+=a),c&&n&&(this.noseEl.current.style.left="".concat(p.left+p.width/2-_-6,"px")),e.style.top="".concat(h,"px"),e.style.left="".concat(_,"px"),e.style.visibility="visible",E&&$fx.scrollToPos(w-window.innerHeight+20);var j=0,O=window.GB_getLast&&window.GB_getLast();if(O&&(j=O.cur_zindex+501),n){var S=b(n);S>=j&&(j=S+1)}this.el.style.zIndex=j}},{key:"render",value:function(){var e=this,t=this.props,r=t.contentClassName,n=t.children,o=t.nose,a=t.position,i=(0,v.default)("dialog-content",r);return _.default.createPortal(h.default.createElement("div",{ref:function(t){return e.content=t},className:i},o&&h.default.createElement("div",{ref:this.noseEl,className:"dialog_nose dialog_nose_".concat(a)}),n),this.el)}}]),t}(h.default.PureComponent);w.propTypes={autoFocus:y.default.bool,anchor:y.default.object,anchorGap:y.default.number,mouseEvent:y.default.shape({pageX:y.default.number.isRequired,pageY:y.default.number.isRequired}),align:y.default.oneOf(["top","bottom"]),className:y.default.string,contentClassName:y.default.string,position:y.default.oneOf(["center","top","bottom","right"]),width:y.default.number,isFixed:y.default.bool,isPositionFluid:y.default.bool,onHide:y.default.func,nose:y.default.bool,children:y.default.node,tabIndex:y.default.oneOfType([y.default.string,y.default.number])},w.defaultProps={autoFocus:!0,anchorGap:0,align:"bottom",position:"center",isFixed:!1,isPositionFluid:!1,onHide:function(){},nose:!1,tabIndex:-1};var E=w;r.default=E},{"../utils/escapeHandler":1159,classnames:"classnames","prop-types":"prop-types",react:"react","react-dom":"react-dom"}],650:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),_=e("react-dnd"),y=e("@doist/react-dnd-html5-backend"),v=y.NativeTypes.FILE,g=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{isDragging:!1,isHovering:!1}),r}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.canDrop,r=e.isOver,n=e.connectDropTarget,o=e.children,a=e.onDrop,i=e.wholeScreen,l=o({isDragging:t,isHovering:r});return m.default.createElement("div",null,i&&m.default.createElement(w,{onDrop:a}),n(l))}}]),t}(m.default.Component);p(g,"propTypes",{onDrop:h.default.func,dropTarget:h.default.object,children:h.default.func,wholeScreen:h.default.bool,connectDropTarget:h.default.func,isOver:h.default.bool,canDrop:h.default.bool}),p(g,"defaultProps",{wholeScreen:!0});var b=(0,_.DropTarget)(v,{drop:function(e,t){e.onDrop&&e.onDrop(t.getItem().files)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})(g);r.default=b;var w=(0,_.DropTarget)(v,{drop:function(e,t){e.onDrop&&e.onDrop(t.getItem().files)}},function(e,t){return{connectDropTarget:e.dropTarget(),canDrop:t.canDrop()}})(function(e){var t=e.connectDropTarget,r=e.canDrop,n=r?{position:"fixed",zIndex:0,top:0,left:0,right:0,bottom:0}:{};return t(m.default.createElement("div",{style:n}))})},{"@doist/react-dnd-html5-backend":"@doist/react-dnd-html5-backend","prop-types":"prop-types",react:"react","react-dnd":"react-dnd"}],651:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){for(var t=e.parentNode;;){if(!t){t=e.nextSibling;break}if(t.parentNode===document.body)break;t=t.parentNode}return t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=n(e("react")),_=n(e("prop-types")),y=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"uploadFiles",function(e){var t=r.props.onUpload,n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value,u=new GFile;u.file=s,u.temporaryId=Math.random(),u.upload(),t(u)}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}),p(c(r),"uploadFromGoogleDrive",function(){GoogleDrive.picker?GoogleDrive.show():(GoogleDrive.filesSelected=r.driveSelected,GoogleDrive.load())}),p(c(r),"uploadFromDropBox",function(){if(window.Dropbox)return void r.chooseFromDropbox();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.id="dropboxjs",e.setAttribute("data-app-key","o8lsvx1nvnswy6q"),e.src="https://www.dropbox.com/static/api/2/dropins.js",document.body.appendChild(e),e.addEventListener("load",r.chooseFromDropbox)}),p(c(r),"chooseFromDropbox",function(){var e=r.props.onUpload;window.Dropbox.choose({success:function(t){var r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,s=new GFile,u={file_url:l.link,file_name:l.name,file_size:l.bytes};l.thumbnailLink&&(u.image=l.thumbnailLink.replace("=96","=800"),u.image_width=800,u.image_height=800),s.setUploadContent(u),e(s)}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}},multiselect:!0,iframe:!0});var t=document.querySelector('iframe[src*="dropbox"]');if(t){m(t).style.zIndex=1e5}}),p(c(r),"driveSelected",function(e){var t=r.props.onUpload,n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value,u=new GFile,c={file_url:s.url,file_name:s.name,file_underlying_type:s.mimeType};u.setUploadContent(c),t(u)}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}),r}return d(t,e),l(t,[{key:"componentWillUnmount",value:function(){window.Dropbox&&window.Dropbox.cancelChooser&&window.Dropbox.cancelChooser()}},{key:"render",value:function(){return this.props.children({uploadFiles:this.uploadFiles,uploadFromGoogleDrive:this.uploadFromGoogleDrive,uploadFromDropBox:this.uploadFromDropBox})}}]),t}(h.default.Component);r.default=y,p(y,"propTypes",{onUpload:_.default.func,children:_.default.func})},{"prop-types":"prop-types",react:"react"}],652:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.date,r=e.withReminders,n=e.overrideClassName,o=t instanceof s.default?t:s.default.fromDate(new Date(t)),i=new Date,d=new Date;d.setDate(d.getDate()+1);var f=DateistDateHelpers.day_diff(i,o.toDate()),p=DateUtils.humanizeDayDiff(f,o.toDate()),m=n||(0,l.default)("date",{date_future:f<=7&&f>=-7,date_overdue:o.isLessThan(i),date_today:o.isSameDate(i),date_tom:o.isSameDate(d)});return a.default.createElement("span",{className:m},r?a.default.createElement(c.default,null):null,t.is_recurring?a.default.createElement(u.default,null):null,p)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("../models/DateExt")),u=n(e("./icons/RecurringIcon")),c=n(e("./icons/ReminderAlarmIcon"));o.propTypes={date:i.default.oneOfType([i.default.string,i.default.instanceOf(s.default)]).isRequired,withReminders:i.default.bool,overrideClassName:i.default.string};var d=o;r.default=d},{"../models/DateExt":152,"./icons/RecurringIcon":830,"./icons/ReminderAlarmIcon":831,classnames:"classnames","prop-types":"prop-types",react:"react"}],653:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.isSelected,r=e.className,n=e.onContextMenu,o=e.onMenuClick,i=e.children,u=e.leftIcon,c=e.color,d={color:l.getHex("filter",c)};return a.default.createElement("div",{className:"".concat(r||""," ").concat(t?"current":""),onContextMenu:n},a.default.createElement("table",{cellPadding:"0",cellSpacing:"0",className:"item_table"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{className:"td_color"},a.default.createElement("div",{className:"div_color counter_color",style:d},u)),a.default.createElement("td",{className:"name"},i),a.default.createElement("td",{className:"menu"},o?a.default.createElement("div",{onClick:o,className:"icon menu gear_menu"},a.default.createElement(s.MoreSmallIcon,null)):null)))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../models/Colors")),s=e("./icons");o.propTypes={isSelected:i.default.bool,className:i.default.string,onContextMenu:i.default.func,onMenuClick:i.default.func,children:i.default.node,leftIcon:i.default.element,color:i.default.number}},{"../models/Colors":149,"./icons":842,"prop-types":"prop-types",react:"react"}],654:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=l(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function d(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var y=n(e("react")),v=n(e("./reactist/Portal")),g=n(e("prop-types")),b=n(e("classnames")),w=e("react-transition-group"),E=e("../utils/escapeHandler"),j=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=d(this,(e=f(t)).call.apply(e,[this].concat(o))),_(p(r),"container",y.default.createRef()),_(p(r),"addClickListener",function(e){var t=r.props,n=t.onClickOutside;if(t.show){for(var o=e.target;o;){if(o===r.container.current)return;o=o.parentElement}n(e)}}),r}return m(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;this.props.show&&setTimeout(function(){window.addEventListener("click",e.addClickListener),e.addEscapeHandler()},0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.addClickListener),this.clean&&this.clean()}},{key:"componentDidUpdate",value:function(e){var t=this;!e.show&&this.props.show&&setTimeout(function(){window.addEventListener("click",t.addClickListener),t.addEscapeHandler()},0),e.show&&!this.props.show&&(window.removeEventListener("click",this.addClickListener),this.clean&&this.clean())}},{key:"addEscapeHandler",value:function(){this.clean=(0,E.addEscapeHandler)(this.props.onClickOutside)}},{key:"getWidth",value:function(){var e=this.props.width;if("number"==typeof e){return"".concat(e-60,"px")}return e}},{key:"render",value:function(){var e=this.props,t=e.show,r=e.children,n=e.basic,o=e.centered,l=e.containerClassName,s=(e.onClickOutside,i(e,["show","children","basic","centered","containerClassName","onClickOutside"])),u=(0,b.default)("modal_container",l,n&&"modal_container_basic",o&&"modal_container_centered");return y.default.createElement(v.default,{open:!0},y.default.createElement(w.CSSTransition,{unmountOnExit:!0,in:t,timeout:200,classNames:"modal_overlay"},y.default.createElement("div",{className:"modal_overlay ".concat(o?"modal_overlay_centered":"")},y.default.createElement("div",a({style:{width:this.getWidth()},ref:this.container,className:u,role:"dialog",tabIndex:-1},s),r))))}}]),t}(y.default.Component);r.default=j,_(j,"propTypes",{show:g.default.bool,containerClassName:g.default.string,centered:g.default.bool,children:g.default.node,onClickOutside:g.default.func,width:g.default.number,basic:g.default.bool}),_(j,"defaultProps",{basic:!1,centered:!1,width:285})},{"../utils/escapeHandler":1159,"./reactist/Portal":966,classnames:"classnames","prop-types":"prop-types",react:"react","react-transition-group":"react-transition-group"}],655:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){e===c.TYPE_ITEM_NOTE?d.default.showTaskComment():d.default.showProjectComment()}function a(e){function t(e){if(!e.ctrl)return n<=0&&(0,m.isPremium)(g)?(y(),void o(d)):void l(e,d,a)}var r=e.notesCount,n=void 0===r?0:r,a=e.noteParent,l=e.onClick,s=e.noteType,d=void 0===s?v:s,h=e.hasMore,_=void 0!==h&&h,g=e.user,b=(0,u.default)("clickable","note_icon",{note_icon_show_on_hover:0===n&&d===c.TYPE_ITEM_NOTE}),w=d===c.TYPE_PROJECT_NOTE?"project|comments":"task|comments";return i.default.createElement(p.default,{className:b,"data-track":w,"data-note-type":d,"data-note-parent-id":a.id,onClick:t
},i.default.createElement(f.default,null),n>0&&i.default.createElement("span",{className:"clickable note_count sel_note_count"},_?"".concat(n,"+"):n))}Object.defineProperty(r,"__esModule",{value:!0}),r.NotesButton=a,r.default=void 0;var i=n(e("react")),l=e("react-redux"),s=n(e("prop-types")),u=n(e("classnames")),c=e("../reducers/notes"),d=n(e("../containers/premium_promo/PremiumOnlyModal")),f=n(e("./icons/NotesIcon")),p=n(e("./Button")),m=e("../reducers/user"),h=e("../reducers/detailView"),_=window,y=_.GB_hide,v=c.TYPE_ITEM_NOTE;a.propTypes={noteParent:s.default.object.isRequired,noteType:s.default.oneOf([c.TYPE_ITEM_NOTE,c.TYPE_PROJECT_NOTE]),notesCount:s.default.number,hasMore:s.default.bool,user:s.default.object,onClick:s.default.func};var g=function(e){return{onClick:function(t,r,n){r===c.TYPE_ITEM_NOTE&&e((0,h.detailViewShowItem)(n.id,{activeTab:"comments"})),r===c.TYPE_PROJECT_NOTE&&e((0,h.detailViewShowProject)(n.id))}}},b=(0,l.connect)(null,g)(a);r.default=b},{"../containers/premium_promo/PremiumOnlyModal":108,"../reducers/detailView":1092,"../reducers/notes":1114,"../reducers/user":1135,"./Button":648,"./icons/NotesIcon":823,classnames:"classnames","prop-types":"prop-types",react:"react","react-redux":"react-redux"}],656:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=l(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function d(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var y=n(e("react")),v=n(e("prop-types")),g=function(e){function t(){var e,r;s(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=d(this,(e=f(t)).call.apply(e,[this].concat(o))),_(p(r),"onChange",function(e){(0,r.props.onChange)(e.target.value)}),r}return m(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.nodeRef,r=e.value;this.hiddenTextArea=document.createElement("textarea"),this.hiddenTextArea.style.position="absolute",this.hiddenTextArea.style.left="-9999px",document.body.appendChild(this.hiddenTextArea);var n=getComputedStyle(t.current).width;this.hiddenTextArea.style.width=n,this.hiddenTextArea.value=r,t.current.style.height="".concat(this.hiddenTextArea.scrollHeight,"px")}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.nodeRef,n=t.value;e.value!==this.props.value&&(this.hiddenTextArea.value=n,r.current.style.height="".concat(this.hiddenTextArea.scrollHeight,"px"))}},{key:"componentWillUnmount",value:function(){try{document.body.removeChild(this.hiddenTextArea)}catch(e){}}},{key:"render",value:function(){var e=this.props,t=(e.onChange,e.nodeRef),r=e.value,n=i(e,["onChange","nodeRef","value"]);return y.default.createElement("textarea",a({},n,{ref:t,value:r||"",onChange:this.onChange}))}}]),t}(y.default.Component);r.default=g,_(g,"propTypes",{value:v.default.string,onChange:v.default.func,nodeRef:v.default.object})},{"prop-types":"prop-types",react:"react"}],657:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.text,r=e.keyval,n=(0,d.compose)((0,d.map)(function(e){var t=o(e,2),r=t[0];return{name:r,value:t[1],re:new RegExp("\\{\\s*".concat(r,"\\s*\\}"),"g")}}),d.toPairs)(r),a=(0,d.compose)((0,d.sortBy)("startIndex"),(0,d.filter)(function(e){return e}),d.flatten,(0,d.map)(function(e){for(var r,n=e.name,o=e.value,a=e.re,i=[];null!==(r=a.exec(t));)i.push({name:n,value:o,re:a,startIndex:r.index,endIndex:r.index+r[0].length});return i}))(n),i=[],l=0,s=!0,c=!1,f=void 0;try{for(var p,m=a[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var h=p.value,_=h.startIndex,y=h.endIndex,v=h.value,g=t.slice(l,_);i.push(g),i.push(v),l=y}}catch(e){c=!0,f=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw f}}var b=t.slice(l,t.length);return i.push(b),u.default.createElement.apply(u.default,[u.default.Fragment,null].concat(i))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=n(e("react")),c=n(e("prop-types")),d=e("../utils/fp");s.propTypes={text:c.default.string,keyval:c.default.object}},{"../utils/fp":1166,"prop-types":"prop-types",react:"react"}],658:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.project,r=u.default.getHex("project",t.color),n=c.default.format(t.name);return i.default.createElement("div",{className:"project","data-track":"activity_log|select_project"},i.default.createElement("span",{className:"clickable project_item"},i.default.createElement("span",{className:"project_item__name",dangerouslySetInnerHTML:{__html:n}}),i.default.createElement("span",{className:"project_item__color",style:{backgroundColor:r,color:r}})))}function a(e){var t=e.activity,r=e.user,n=e.isUserPremium,a=t.project,l=t.initiator,u=t.extra_data,c="".concat(t.object_type,":").concat(t.event_type),p=y[c],h=m.getHourAndMin(new Date(t.event_date));return i.default.createElement("li",{className:"event"},i.default.createElement("div",{className:"avatar"},i.default.createElement(d.default,{user:l,size:d.default.SIZE_MEDIUM}),null!=p&&i.default.createElement("div",{className:"avatar_event_icon",dangerouslySetInnerHTML:{__html:p}})),i.default.createElement("div",{className:"text"},i.default.createElement(f.default,{activity:t,user:r,isUserPremium:n}),i.default.createElement(s.default,{text:u.client,position:"bottom"},i.default.createElement("span",{className:"activity_time"},h)),null!=a&&i.default.createElement(o,{project:a})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=n(e("@doist/reactist/lib/Tooltip")),u=n(e("../../models/Colors")),c=n(e("../../components/formatter/Formatter")),d=n(e("../Avatar")),f=n(e("./ActivityEventContent")),p=window,m=p.DateUtils,h=["added","updated","deleted","completed","uncompleted","archived","unarchived","shared","left"],_=l.default.shape({id:l.default.number.isRequired,object_type:l.default.oneOf(["item","note","project"]).isRequired,event_type:l.default.oneOf(h).isRequired,event_date:l.default.string.isRequired,initiator_id:l.default.number,parent_item_id:l.default.number,parent_project_id:l.default.number,extra_data:l.default.object.isRequired}),y={"item:added":svgs.getString("sm1/notification_assigned.svg"),"item:updated":svgs.getString("sm1/notification_updated.svg"),"item:completed":svgs.getString("sm1/notification_completed.svg"),"item:uncompleted":svgs.getString("sm1/notification_uncompleted.svg"),"item:deleted":svgs.getString("sm1/notification_deleted.svg"),"note:added":svgs.getString("sm1/notification_commented.svg")};a.propTypes={activity:_.isRequired,user:l.default.object.isRequired,isUserPremium:l.default.bool.isRequired};var v=a;r.default=v},{"../../components/formatter/Formatter":22,"../../models/Colors":149,"../Avatar":647,"./ActivityEventContent":659,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],659:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.activity,r=e.user,n=e.isUserPremium,o="".concat(t.object_type,":").concat(t.event_type),i=c[o];if(!i)return console.error("Unsupported activity kind '".concat(o,"'")),null;var l=null===t.initiator_id||t.initiator_id===r.id?"you":null!=t.initiator?"user":"someone";return a.default.createElement(i,{activity:t,user:r,userNoun:l,isUserPremium:n})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("./SimpleActivityEventContent")),s=n(e("./UpdatedActivityEventContent")),u=n(e("./CommentActivityEventContent")),c={"item:added":l.default,"item:deleted":l.default,"item:completed":l.default,"item:uncompleted":l.default,"item:updated":s.default,"note:added":u.default};o.propTypes={activity:i.default.object,user:i.default.object,isUserPremium:i.default.bool};var d=o;r.default=d},{"./CommentActivityEventContent":663,"./SimpleActivityEventContent":665,"./UpdatedActivityEventContent":666,"prop-types":"prop-types",react:"react"}],660:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(null==e)return{};var r,n,o=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=t.user,n=t.collaborators,o=void 0===n?{}:n,a=t.items,l=void 0===a?{}:a,s=t.projects,u=void 0===s?{}:s;return e.map(function(e){var t=e.initiator_id,n=e.parent_item_id,a=e.parent_project_id,s=e.extra_data.responsible_uid;return i({},e,{initiator:t?o[t]:r,target_user:s?o[s]:void 0,parent_item:n?l[n]:void 0,parent_project:a?u[a]:void 0})})}function u(e){var t=e.item,r=e.user,n=e.isUserPremium,a=void 0!==n&&n,i=e.activities,l=void 0===i?[]:i,s=e.status,u=void 0===s?w:s,d=e.weeksAgoPage,p=void 0===d?1:d,O=e.onLoadMore,P=o(e,["item","user","isUserPremium","activities","status","weeksAgoPage","onLoadMore"]),I=u===w&&0===l.length,k=!a||I,T=S(l,r,P.collaborators.all,P.items,P.projects),C=Object.keys(T);if(u===j)return c.default.createElement("div",{id:"activity_app"},_("You appear to be offline or Todoist is down. This action requires that you are online. Please try again later."));var D=1===p?_("No activity in the past week."):f.default.format(_("No activity in the past {count} weeks."),{count:p}),A=!k&&null!=O;return c.default.createElement(c.default.Fragment,null,P.creator?c.default.createElement("div",{className:"activity_created_by"},(0,h.default)(t.responsible_uid?_x("task_assigned_by","Assigned by {user_name}"):_x("task_added_by","Added by {user_name} on {date}"),{user_name:P.creator.full_name?(0,m.shortName)(P.creator.full_name):P.creator.email,date:DateUtils.format(new Date(t.date_added))})):null,c.default.createElement("div",{id:"activity_app"},c.default.createElement("div",{id:"activity_show"},k?c.default.createElement(b.default,{isUserPremium:a}):C.map(function(e){return c.default.createElement(c.Fragment,{key:e},c.default.createElement(y.AgendaDayHeader,{isSubsection:!0,dateStr:e}),c.default.createElement("ul",{className:"items",id:"day_ul_".concat(e)},T[e].map(function(e){return c.default.createElement(v.default,{key:e.id,activity:e,user:r,isUserPremium:a})})))}),I&&!k&&c.default.createElement("span",{className:"load_more no_results"},D),A&&c.default.createElement(g.default,{isLoading:u===E,activities:l,weeksAgoPage:p,onLoadMore:O}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.STATUS_ERROR=r.STATUS_LOADING=r.STATUS_LOADED=r.default=void 0;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),d=n(e("prop-types")),f=n(e("../../components/format_html/FormatHtml")),p=e("../../utils/fp"),m=e("../../utils"),h=n(e("../../utils/format")),y=e("../agenda"),v=n(e("./ActivityEvent")),g=n(e("./LoadMore")),b=n(e("./ActivityLogEmptyState")),w="LOADED";r.STATUS_LOADED=w;var E="LOADING";r.STATUS_LOADING=E;var j="ERROR";r.STATUS_ERROR=j;var O=(0,p.compose)((0,p.groupBy)(function(e){return(0,m.toISODateString)(new Date(e.event_date),{toUTC:!0,dateOnly:!0})}),function(e){return e.reverse()},(0,p.sortBy)(function(e){return e.event_date})),S=(0,m.memoize)(function(e,t,r,n,o){return O(s(e,{user:t,collaborators:r,items:n,projects:o}))});u.propTypes={user:d.default.object.isRequired,isUserPremium:d.default.bool,activities:d.default.array,status:d.default.oneOf([w,E,j]),weeksAgoPage:d.default.number,collaborators:d.default.object,items:d.default.object,item:d.default.object,creator:d.default.object,projects:d.default.object,onLoadMore:d.default.func};var P=u;r.default=P},{"../../components/format_html/FormatHtml":21,"../../utils":1176,"../../utils/format":1162,"../../utils/fp":1166,"../agenda":670,"./ActivityEvent":658,"./ActivityLogEmptyState":661,"./LoadMore":664,"prop-types":"prop-types",react:"react"}],661:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.isUserPremium,r=_("See all changes that have been made in your account, by you or your collaborators.{next_line}Free users can still view their completed tasks inside any project.").split("{next_line}"),n=o(r,2),a=n[0],i=n[1],l=_("<a>Upgrade to Todoist Premium</a> for instant access to this and a lot of other features.").replace("<a>",'<a href="/premium" target="_blank">');return u.default.createElement("div",{className:"blank_state_text"},u.default.createElement("b",null,t?_("You don't have any events"):_("The activity log is a premium feature")),u.default.createElement("div",null,a,u.default.createElement("br",null),i),!t&&u.default.createElement("div",{className:"text"},u.default.createElement("span",{dangerouslySetInnerHTML:{__html:l}})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("react")),c=n(e("prop-types"));s.propTypes={isUserPremium:c.default.bool.isRequired};var d=s;r.default=d},{"prop-types":"prop-types",react:"react"}],662:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t,r){var n=e.target_user;return null==n?"someone"===r?"to_someone_else":"to_someone":t.id===n.id?"you"===r?"to_yourself":"to_you":"to_user"}function i(e){var t,r=e.activity,n=e.user,i=e.userNoun,s=e.notesButton,p=r.extra_data,m=r.initiator,h=r.target_user,_=a(r,n,i),y=null===p.responsible_uid?f:null===r.extra_data.last_responsible_uid?c:d,v=(t={},o(t,i,(0,u.renderUser)({user:m,noun:i})),o(t,_,(0,u.renderUser)({key:"targetUser",user:h,noun:_})),o(t,"task",(0,u.renderTask)({activity:r})),t);return l.default.createElement("div",null,l.default.createElement(u.Phrase,{template:y[i][_],values:v}),s)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("prop-types")),u=e("./activityEventContentHelpers"),c={you:{to_you:_("{you} assigned {task} to {to_yourself}"),to_user:_("{you} assigned {task} to {to_user}"),to_someone:_("{you} assigned {task} to {to_someone}")},user:{to_you:_("{user} assigned {task} to {to_you}"),to_user:_("{user} assigned {task} to {to_user}"),to_someone:_("{user} assigned {task} to {to_someone}")},someone:{to_you:_("{someone} assigned {task} to {to_you}"),to_user:_("{someone} assigned {task} to {to_user}"),to_someone:_("{someone} assigned {task} to {to_someone_else}")}},d={you:{to_you:_("{you} re-assigned {task} to {to_yourself}"),to_user:_("{you} re-assigned {task} to {to_user}"),to_someone:_("{you} re-assigned {task} to {to_someone}")},user:{to_you:_("{user} re-assigned {task} to {to_you}"),to_user:_("{user} re-assigned {task} to {to_user}"),to_someone:_("{user} re-assigned {task} to {to_someone}")},someone:{to_you:_("{someone} re-assigned {task} to {to_you}"),to_user:_("{someone} re-assigned {task} to {to_user}"),to_someone:_("{someone} re-assigned {task} to {to_someone_else}")}},f={you:_("{you} unnassigned {task}"),user:_("{user} unassigned {task}"),someone:_("{someone} unassigned {task}")};i.propTypes={activity:s.default.object,user:s.default.object,userNoun:s.default.string,notesButton:s.default.node};var p=i;r.default=p},{"./activityEventContentHelpers":667,"prop-types":"prop-types",react:"react"}],663:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=e.activity,r=e.userNoun;if("added"!==t.event_type)return null;var n=t.initiator,a=t.extra_data,l=t.parent_item,p=t.parent_project,m=(0,s.renderHtml)($trim(a.content,160),{className:"object",tag:"div",key:"comment"});if(null!=t.parent_item_id){var h,_=l?u:c,y=l?(0,s.renderTask)({activity:l}):void 0,v=(h={},o(h,r,(0,s.renderUser)({user:n,noun:r})),o(h,"task",y),o(h,"comment",m),h);return i.default.createElement("div",null,i.default.createElement(s.Phrase,{template:_[r],values:v}))}if(null!=t.parent_project_id){var g,b=p?d:f,w=(g={},o(g,r,(0,s.renderUser)({user:n,noun:r})),o(g,"project",p?(0,s.renderHtml)(p.name,{className:"object",key:"project"}):void 0),o(g,"comment",m),g);return i.default.createElement("div",null,i.default.createElement(s.Phrase,{template:b[r],values:w}))}return null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=e("./activityEventContentHelpers"),u={you:_("{you} added a comment to {task}: {comment}"),user:_("{user} added a comment to {task}: {comment}"),someone:_("{someone} added a comment to {task}: {comment}")},c={you:_("{you} added a comment: {comment}"),user:_("{user} added a comment: {comment}"),someone:_("{someone} added a comment: {comment}")},d={you:_("{you} added a project comment to {project}: {comment}"),user:_("{user} added a project comment to {project}: {comment}"),someone:_("{someone} added a project comment to {project}: {comment}")},f={you:_("{you} added a project comment: {comment}"),user:_("{user} added a project comment: {comment}"),someone:_("{someone} added a project comment: {comment}")};a.propTypes={activity:l.default.object,userNoun:l.default.string};var p=a;r.default=p},{"./activityEventContentHelpers":667,"prop-types":"prop-types",react:"react"}],664:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.noMoreResults,r=e.weeksAgoPage;return t?_("That's it. No more history to load."):1===r?_("Load more history from last week..."):u.default.format(_("Load more history from {count} weeks ago..."),{count:r})}function a(e){var t=e.activities,r=e.weeksAgoPage,n=e.onLoadMore,a=e.isLoading;if(void 0!==a&&a)return i.default.createElement(c.DotsSpinner,null);var l=null==n&&t.length>0,u=o({noMoreResults:l,weeksAgoPage:r}),f=(0,s.default)("load_more",{no_more_results:l});return i.default.createElement(d.default,{className:f,onClick:n,"data-track":"activity_log|load_more"},u)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=n(e("classnames")),u=n(e("../../components/format_html/FormatHtml")),c=e("../spinners"),d=n(e("../Button"));a.propTypes={activities:l.default.array.isRequired,weeksAgoPage:l.default.number,isLoading:l.default.bool,onLoadMore:l.default.func};var f=a;r.default=f},{"../../components/format_html/FormatHtml":21,"../Button":648,"../spinners":1067,classnames:"classnames","prop-types":"prop-types",react:"react"}],665:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t,r=e.activity,n=e.userNoun,a=e.user,l=r.initiator,f=r.extra_data,p=d["".concat(r.event_type,"_task")];return i.default.createElement("div",null,i.default.createElement(u.Phrase,{template:p[n],values:(t={},o(t,n,(0,u.renderUser)({user:l,noun:n})),o(t,"task",(0,u.renderTask)({activity:r})),t)}),i.default.createElement(s.default,{noteParent:{id:r.object_id},noteType:c.TYPE_ITEM_NOTE,notesCount:f.note_count,user:a}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=n(e("../NotesButton")),u=e("./activityEventContentHelpers"),c=e("../../reducers/notes"),d={added_task:{you:_("{you} added a task: {task}"),user:_("{user} added a task: {task}"),someone:_("{someone} added a task: {task}")},deleted_task:{you:_("{you} deleted a task: {task}"),user:_("{user} deleted a task: {task}"),someone:_("{someone} deleted a task: {task}")},completed_task:{you:_("{you} completed a task: {task}"),user:_("{user} completed a task: {task}"),someone:_("{someone} completed a task: {task}")},uncompleted_task:{you:_("{you} uncompleted a task: {task}"),user:_("{user} uncompleted a task: {task}"),someone:_("{someone} uncompleted a task: {task}")}};a.propTypes={activity:l.default.object,userNoun:l.default.string,user:l.default.object};var f=a;r.default=f},{"../../reducers/notes":1114,"../NotesButton":655,"./activityEventContentHelpers":667,"prop-types":"prop-types",react:"react"}],666:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=e.activity,r=e.user,n=e.userNoun,a=t.extra_data,l=t.initiator,_=i.default.createElement(u.default,{noteParent:{id:t.object_id},notesCount:a.note_count,noteType:c.TYPE_ITEM_NOTE,user:r});if(void 0!==a.last_content){var v,g=(v={},o(v,n,(0,f.renderUser)({user:l,noun:n})),o(v,"task",(0,f.renderTask)({activity:t})),o(v,"old",(0,f.renderHtml)(a.last_content,{className:"through",key:"old"})),v);return i.default.createElement("div",null,i.default.createElement(f.Phrase,{template:p[n],values:g}),_)}if(void 0!==a.due_date){var b,w=null===a.due_date?h:null===a.last_due_date?m:y,E=(b={},o(b,n,(0,f.renderUser)({user:l,noun:n})),o(b,"task",(0,f.renderTask)({activity:t})),o(b,"due_date",null!==a.due_date&&i.default.createElement(s.default,{key:"due_date",date:a.due_date,overrideClassName:"bold"})),b);return i.default.createElement("div",null,i.default.createElement(f.Phrase,{template:w[n],values:E}),_)}return void 0!==a.responsible_uid?i.default.createElement(d.default,{activity:t,user:r,userNoun:n,notesButton:_}):null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=n(e("../ItemDueDate")),u=n(e("../NotesButton")),c=e("../../reducers/notes"),d=n(e("./AssignActivityEventContent")),f=e("./activityEventContentHelpers"),p={you:_("{you} changed the name of {old} to {task}"),user:_("{user} changed the name of {old} to {task}"),someone:_("{someone} changed the name of {old} to {task}")},m={you:_("{you} set the due date of {task} to {due_date}"),user:_("{user} set the due date of {task} to {due_date}"),someone:_("{someone} set the due date of {task} to {due_date}")},h={you:_("{you} removed the due date of {task}"),user:_("{user} removed the due date of {task}"),someone:_("{someone} removed the due date of {task}")},y={you:_("{you} changed the due date of {task} to {due_date}"),user:_("{user} changed the due date of {task} to {due_date}"),someone:_("{someone} changed the due date of {task} to {due_date}")};a.propTypes={activity:l.default.object,user:l.default.object,userNoun:l.default.string};var v=a;r.default=v},{"../../reducers/notes":1114,"../ItemDueDate":652,"../NotesButton":655,"./AssignActivityEventContent":662,"./activityEventContentHelpers":667,"prop-types":"prop-types",react:"react"}],667:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(null==e)return{};var r,n,o=l(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function s(e,t){var r=t.tag,n=void 0===r?"span":r,a=i(t,["tag"]),l=p.default.format(e).replace(/^\*\s+/g,"");return f.default.createElement(n,o({},a,{dangerouslySetInnerHTML:{__html:l}}))}function u(e){var t=e.activity;if(!t)return null;var r=t.event_type,n=t.extra_data;return s(t.content||n.content,{className:"deleted"===r||"completed"===r?"object through":"object",key:"task"})}function c(e){var t=e.user,r=e.noun,n=e.key,o=void 0===n?"user":n,a="user"===r||"to_user"===r?p.default.formatSimple(t.full_name.split(" ")[0]):h[r];return f.default.createElement("span",{key:o,className:"user"},a)}function d(e){var t=e.template,r=e.values;return f.default.createElement(f.Fragment,null,m.default.format(t,r))}Object.defineProperty(r,"__esModule",{value:!0}),r.renderHtml=s,r.renderTask=u,r.renderUser=c,r.Phrase=d;var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),p=n(e("../../components/formatter/Formatter")),m=n(e("../../components/format_html/FormatHtml")),h={you:_("You"),someone:_("Someone"),to_someone:_("someone"),to_someone_else:_("someone else"),to_yourself:_("yourself"),to_you:_("you")}},{"../../components/format_html/FormatHtml":21,"../../components/formatter/Formatter":22,react:"react"}],668:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,o=l(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function s(e){return d(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){w(e,t,r[t])})}return e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}function _(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?v(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return f({},(0,k.pick)(["user","items","projects","collaborators"],e),{isUserPremium:(0,P.isPremium)(e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.mapStateToProps=E,Object.defineProperty(r,"ActivityLog",{enumerable:!0,get:function(){return I.default}}),r.default=r.Container=void 0;var j=n(e("react")),O=function(e){return e&&e.__esModule?e:{default:e}}(e("prop-types")),S=e("react-redux"),P=e("../../reducers/user"),I=n(e("./ActivityLog")),k=e("../../utils/fp"),T=e("../../utils"),C=30,D=function(e){function t(){var e,r;p(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=_(this,(e=y(t)).call.apply(e,[this].concat(o))),w(v(r),"state",{status:I.STATUS_LOADED,
weeksAgoPage:1,offset:0,activities:void 0}),w(v(r),"getRequestParams",function(){var e=r.props,t=e.user,n=e.filterBy,o=r.state,a=o.offset,i=o.weeksAgoPage,l=i<2?void 0:{page:i};return f({},n,{object_event_types:null!=n.object_type&&null!=n.object_id||null!=n.event_type?void 0:["item:","note:added"],annotate_notes:!0,token:t.token,limit:C,offset:a},l)}),w(v(r),"onLoadMore",function(){var e=r.state.status,t=r.props,n=t.isUserPremium,o=t.filterBy;n&&e!==I.STATUS_LOADING&&((0,T.isTempID)(o.object_id)||(r.setState({status:I.STATUS_LOADING}),fetch("/sync/v8/activity/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.getRequestParams())}).then(function(e){if(200===e.status)return e.json();throw e}).then(r.processNewData,r.handleRequestError)))}),w(v(r),"handleRequestError",function(){r.setState({status:I.STATUS_ERROR})}),w(v(r),"processNewData",function(e){var t=e.count,n=e.events;r.setState(function(e){var r=e.offset+n.length===t;return{status:I.STATUS_LOADED,offset:r?0:e.offset+C,weeksAgoPage:e.weeksAgoPage+(r?1:0),activities:null!=e.activities?[].concat(s(e.activities),s(n)):n}})}),r}return g(t,e),h(t,[{key:"componentDidMount",value:function(){this.onLoadMore()}},{key:"render",value:function(){var e=this.props,t=e.filterBy,r=i(e,["filterBy"]),n=this.state,o=n.activities,l=n.weeksAgoPage,s=n.status,u=o&&o.length>0?o[o.length-1]:{},c="item"===t.object_type&&null!=t.object_id,d=c&&"item"===u.object_type&&"added"===u.event_type;return j.default.createElement(I.default,a({},r,{activities:o,status:s,weeksAgoPage:l,onLoadMore:d?void 0:this.onLoadMore}))}}]),t}(j.Component);r.Container=D,w(D,"propTypes",{user:O.default.object.isRequired,isUserPremium:O.default.bool,items:O.default.object,projects:O.default.object,collaborators:O.default.object,filterBy:O.default.shape({object_type:O.default.oneOf(["project","item","note"]),object_id:O.default.oneOfType([O.default.number,O.default.string]),event_type:O.default.string,parent_project_id:O.default.oneOfType([O.default.number,O.default.string])})}),w(D,"defaultProps",{isUserPremium:!1,items:{},projects:{},collaborators:{},filterBy:{}});var A=(0,S.connect)(E)(D);r.default=A},{"../../reducers/user":1135,"../../utils":1176,"../../utils/fp":1166,"./ActivityLog":660,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],669:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=f.day_diff(new Date,e),r=0===t?_("Today"):1===t?_("Tomorrow"):d.getWeekDay(e.getDay());try{s.default.query(r)}catch(t){console.error("Error opening the agenda"),window.oldAlert("Should open agenda for ".concat(e.toDateString()))}}function a(e){var t=e.dateStr,r=e.isSubsection,n=void 0!==r&&r,a=e.withWeekday,l=void 0===a||a,s=new Date(t);return i.default.createElement("h2",{className:n?"subsection_header":"section_header"},i.default.createElement(u.default,{onClick:function(){return o(s)}},d.prettyDate(t)),i.default.createElement("span",{className:"subsection_header__date"},d.formatView(s,l)))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=n(e("../../components/agenda/AgendaUtils")),u=n(e("../Button")),c=window,d=c.DateUtils,f=c.DateistDateHelpers;a.propTypes={dateStr:l.default.string.isRequired,isSubsection:l.default.bool,withWeekday:l.default.bool};var p=a;r.default=p},{"../../components/agenda/AgendaUtils":8,"../Button":648,"prop-types":"prop-types",react:"react"}],670:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AgendaDayHeader",{enumerable:!0,get:function(){return n.default}});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./AgendaDayHeader"))},{"./AgendaDayHeader":669}],671:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.isSidePanelShown;return(0,a.useEffect)(function(){t?document.documentElement.classList.add("side_panel_show"):document.documentElement.classList.remove("side_panel_show")},[t]),a.default.createElement("div",{id:"page_background"},a.default.createElement(s.default,null),a.default.createElement("div",{id:"app_holder"},a.default.createElement("a",{href:"/premium",className:"go_premium",target:"_blank",style:{display:"none"},id:"premium_promotion"},_("Upgrade and get more done")),a.default.createElement("div",{id:"notifier",style:{display:"none"}}),a.default.createElement("div",{id:"content_wrapper"},a.default.createElement(l.default,null),a.default.createElement("div",{id:"content",className:"main_content"},a.default.createElement(u.default,{showErrorMsg:!0},a.default.createElement(y.default,null)),a.default.createElement(u.default,null,a.default.createElement(m.default,null)),a.default.createElement(u.default,null,a.default.createElement(p.default,null)),a.default.createElement(u.default,null,a.default.createElement(d.default,null))))),a.default.createElement(u.default,null,a.default.createElement(f.default,null)),a.default.createElement(u.default,null,a.default.createElement(c.default,null)),a.default.createElement(u.default,null,a.default.createElement(h.default,null)))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),i=n(e("prop-types")),l=n(e("../left_menu/LeftMenu")),s=n(e("../../containers/topbar/TopBar")),u=n(e("../../containers/ErrorBoundary")),c=n(e("../goal_notifier/GoalNotifier")),d=n(e("../undo_toast/UndoToast")),f=n(e("../../containers/promo_toast/PromoToast")),p=n(e("../item_detail")),m=n(e("../project_detail")),h=n(e("../document_title")),y=n(e("./MainView"));o.propTypes={isSidePanelShown:i.default.bool.isRequired};var v=o;r.default=v},{"../../containers/ErrorBoundary":100,"../../containers/promo_toast/PromoToast":112,"../../containers/topbar/TopBar":114,"../document_title":688,"../goal_notifier/GoalNotifier":764,"../item_detail":853,"../left_menu/LeftMenu":901,"../project_detail":952,"../undo_toast/UndoToast":1077,"./MainView":672,"prop-types":"prop-types",react:"react"}],672:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return l(e)||i(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function s(e,t){return d(e)||c(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function d(e){if(Array.isArray(e))return e}function f(e){var t=(0,p.useRef)();return(0,p.useEffect)(function(){t.current=e},[e]),t.current}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),m=n(e("prop-types")),h=e("react-redux"),_=e("../../constants/constants"),y=n(e("../../components/agenda/AgendaUtils")),v=n(e("../../components/project_editor/ProjectEditorManager")),g=e("../../utils/fp"),b=e("../../utils"),w=e("../../reducers/filters"),E=e("../../reducers/projects"),j=n(e("../project_view")),O=n(e("../label_view")),S=n(e("../../containers/ErrorBoundary")),P=n(e("../../logger/Logger")),I=n(e("../../components/activity_log/ActivityLog")),k=n(e("../../components/generic_manager/GenericManagerUtils")),T=n(e("../../react_components/day_view/TodayView")),C=n(e("../filter_view")),D=function(){var e=(0,p.useState)(0),t=s(e,2),r=t[0],n=t[1];return[r,function(){var e=r+1;return n(e),e}]},A=function(e){var t=e.mainView,r=e.labels,n=e.filters,a=e.projects,i=e.user,l=(0,p.useState)(t),u=s(l,2),c=u[0],d=u[1],m=D(),h=s(m,2),w=h[0],A=h[1],M=f(w);(0,b.isEqual)(t,c)||(w=A(),d(t)),(0,p.useLayoutEffect)(function(){if(!t.reactView&&w!==M)try{var e=t.type,r=t.id;switch(e){case _.MAIN_VIEW_TYPE_LABEL:return y.default.query("@"+r),void window.scroll(0,0);case _.MAIN_VIEW_TYPE_FILTER:var i=(0,g.get)("".concat(r,".query"),n);return y.default.query(i,!1),void window.scroll(0,0);case _.MAIN_VIEW_TYPE_QUERY:return y.default.query(t.query,!0,!1),void window.scroll(0,0);case _.MAIN_VIEW_TYPE_TODAY:return y.default.query(_.DEFAULT_QUERY_TODAY),void window.scroll(0,0);case _.MAIN_VIEW_TYPE_7_DAYS:return y.default.query(_.DEFAULT_QUERY_7_DAYS),void window.scroll(0,0);case _.MAIN_VIEW_TYPE_PROJECT:var l=t.ids,s=t.withChildren,u=t.focusedItemId;if(1===l.length&&s){var c=(0,E.projectGetChildren)(l[0],{projects:a}).map(function(e){return e.id});v.default.showProjects([].concat(o(l),o(c)),null,{hideEmptyState:c.length>0})}else v.default.showProjects(l);if(1===l.length){var d=s?"project/".concat(l[0],"/full"):"project/".concat(l[0]);Signals.sendSignal("change_location",d)}if(u){var f=$("item_".concat(u));f&&(k.default.openParents(f),$isHidden(f)||($fx.highlight(f,{duration:1e3}),window.scrollTo(0,$position(f).y-200)))}else window.scroll(0,0);return;case _.MAIN_VIEW_TYPE_ACTIVITY_LOG:var p=t.projectId,m=t.itemId,h=t.eventFilter,b=t.userFilter;return I.default.showActivity(p,m,h,b),void window.scroll(0,0)}}catch(e){P.default.captureError(e,{tags:{where:"MainView"},extra:{mainView:t}})}},[t,n,r,a,i,M,w]);var x=t.type,R=t.reactView;if(x===_.MAIN_VIEW_TYPE_PROJECT&&R){var N=t.ids,L=N[0],U=a[L];return p.default.createElement("div",{id:"editor",key:w},p.default.createElement(S.default,{showErrorMsg:!0},p.default.createElement(j.default,{project:U})))}if(x===_.MAIN_VIEW_TYPE_LABEL&&R)return p.default.createElement("div",{id:"editor",key:w},p.default.createElement(S.default,{showErrorMsg:!0},p.default.createElement(O.default,{labelName:t.id})));if(x===_.MAIN_VIEW_TYPE_TODAY&&R)return p.default.createElement("div",{id:"editor",key:w},p.default.createElement(S.default,{showErrorMsg:!0},p.default.createElement(T.default,null)));if(x===_.MAIN_VIEW_TYPE_FILTER&&R){var B=n[t.id];return Signals.sendSignal("change_location","agenda/"+B.query),p.default.createElement("div",{id:"editor",key:w},p.default.createElement(S.default,{showErrorMsg:!0},p.default.createElement(C.default,{filterId:t.id})))}return p.default.createElement("div",{id:"editor",key:w})};A.propTypes={mainView:m.default.object,filters:m.default.object,projects:m.default.object,labels:m.default.object,user:m.default.object};var M=function(e){return{mainView:e.mainView,filters:(0,w.filterGetSource)(e),projects:e.projects,labels:e.labels,user:e.user}},x=(0,h.connect)(M)(A);r.default=x},{"../../components/activity_log/ActivityLog":4,"../../components/agenda/AgendaUtils":8,"../../components/generic_manager/GenericManagerUtils":26,"../../components/project_editor/ProjectEditorManager":62,"../../constants/constants":98,"../../containers/ErrorBoundary":100,"../../logger/Logger":129,"../../react_components/day_view/TodayView":685,"../../reducers/filters":1095,"../../reducers/projects":1119,"../../utils":1176,"../../utils/fp":1166,"../filter_view":759,"../label_view":900,"../project_view":964,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],673:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./AppContent")),a=function(e){return{isSidePanelShown:!!e.detailView}},i=(0,n.connect)(a)(o.default);r.default=i},{"./AppContent":671,"react-redux":"react-redux"}],674:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.children,r=a(e,["children"]);return s.default.createElement(c.default,o({className:"plus_add_button"},r),s.default.createElement("span",{className:"icon_add"},s.default.createElement(d.default,null)),t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var s=n(e("react")),u=n(e("prop-types")),c=n(e("../Button")),d=n(e("../icons/PlusIcon"));l.propTypes={children:u.default.node}},{"../Button":648,"../icons/PlusIcon":824,"prop-types":"prop-types",react:"react"}],675:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PlusAddButton",{enumerable:!0,get:function(){return n.default}});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./PlusAddButton"))},{"./PlusAddButton":674}],676:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(null==e)return{};var r,n,o=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function i(e){var t=e.label,r=e.checked,n=e.onChange,a=e.children,i=o(e,["label","checked","onChange","children"]),s="block_checkbox"+(i.className||"");return l.default.createElement("div",{className:s,role:"checkbox",tabIndex:"0","aria-checked":r,onClick:n,onKeyPress:function(e){"Enter"!==e.key&&" "!==e.key||n()},"aria-label":t},a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var l=n(e("react")),s=n(e("prop-types"));i.propTypes={children:s.default.node,className:s.default.string,label:s.default.string.isRequired,checked:s.default.bool.isRequired,onChange:s.default.func.isRequired}},{"prop-types":"prop-types",react:"react"}],677:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,n,o=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function u(e){var t=e.color,r=e.isSelected;return d.default.createElement(d.default.Fragment,null,d.default.createElement("span",{className:"color_dropdown_select__color",style:{backgroundColor:t.hex}}),d.default.createElement("span",{className:"color_dropdown_select__name"},t.label),r?d.default.createElement(y.CheckmarkIcon,{className:"color_dropdown_select__checkmark"}):null)}function c(e){function t(e){i(a({},e,{target:a({},e.target,{value:Number(e.target.value)})}))}var r=e.name,n=e.value,i=e.onChange,s=e.className,c=l(e,["name","value","onChange","className"]),f=v.find(function(e){return e.id===n});return d.default.createElement(h.Select,{name:r,value:String(n),onChange:t},d.default.createElement(h.Toggle,o({},c,{className:(0,p.default)("color_dropdown_toggle",s)}),f?d.default.createElement(u,{color:f}):_("Select a color")),d.default.createElement(h.Popup,{className:"color_dropdown_select",width:"toggle",nose:!1,align:"top"},d.default.createElement(h.Options,null,v.map(function(e){return d.default.createElement(h.Option,{key:e.id,value:String(e.id)},function(t){var r=t.isSelected;return d.default.createElement(u,{color:e,isSelected:r})})}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var d=n(e("react")),f=n(e("prop-types")),p=n(e("classnames")),m=e("../../models/Colors"),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../dropdown")),y=e("../icons"),v=(0,m.get)().map(function(e,t){var r=e.name,n=l(e,["name"]);return a({id:m.START_INDEX+t,label:r},n)});c.propTypes={name:f.default.string,value:f.default.number.isRequired,onChange:f.default.func.isRequired,className:f.default.string};var g=c;r.default=g},{"../../models/Colors":149,"../dropdown":700,"../icons":842,classnames:"classnames","prop-types":"prop-types",react:"react"}],678:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./ColorDropdownSelect")),o=n.default;r.default=o},{"./ColorDropdownSelect":677}],679:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.isOpen,r=e.confirmLabel,n=e.cancelLabel,o=void 0===n?_("Cancel"):n,i=e.onConfirm,d=e.onCancel,f=e.children;return a.default.createElement(l.default.Box,{style:c,overlayProps:{style:c},size:"small",isOpen:t,onDismiss:d,closeOnOverlayClick:!0},a.default.createElement(l.default.Body,null,a.default.createElement("div",{className:"alert_holder delete_confirmation"},a.default.createElement("div",{className:"icon_holder"},a.default.createElement(u.InfoIcon,{width:28,height:28})),a.default.createElement("div",{className:"text_holder"},f))),a.default.createElement(l.default.Actions,null,a.default.createElement(s.default,{className:"ist_button",onClick:d},o),a.default.createElement(s.default,{className:"ist_button ist_button_red",onClick:i,autoFocus:!0},r)))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../reactist/modal")),s=n(e("../Button")),u=e("../icons"),c={zIndex:11e3};o.propTypes={isOpen:i.default.bool.isRequired,confirmLabel:i.default.string.isRequired,cancelLabel:i.default.string,onConfirm:i.default.func.isRequired,onCancel:i.default.func.isRequired,children:i.default.node.isRequired}},{"../Button":648,"../icons":842,"../reactist/modal":971,"prop-types":"prop-types",react:"react"}],680:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){(0,i.default)(e)()}Object.defineProperty(r,"__esModule",{value:!0}),r.showConfirmDialog=o,Object.defineProperty(r,"useConfirmDialog",{enumerable:!0,get:function(){return i.default}}),r.default=void 0;var a=n(e("./ConfirmDialog")),i=n(e("./useConfirmDialog")),l=a.default;r.default=l},{"./ConfirmDialog":679,"./useConfirmDialog":681}],681:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){function t(){var e=d?s.default.createElement("span",{dangerouslySetInnerHTML:{__html:d}}):"function"==typeof l?l():l;(0,u.openModal)(function(t){return s.default.createElement(c.default,o({},f,{isOpen:!0,onCancel:function(e){i(e),t()},onConfirm:function(e){r(e),t()}}),e)})}var r=e.onConfirm,n=e.onCancel,i=void 0===n?function(){}:n,l=e.message,d=e.htmlMessage,f=a(e,["onConfirm","onCancel","message","htmlMessage"]);return t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("react")),u=e("../reactist/modal"),c=n(e("./ConfirmDialog")),d=l;r.default=d},{"../reactist/modal":971,"./ConfirmDialog":679,react:"react"}],682:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function u(e,t){if(null==e)return{};var r,n,o=c(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(e){var t=e.date,r=e.rootItems,n=e.withHeader,i=void 0===n||n,l=e.onEditorToggle,s=u(e,["date","rootItems","withHeader","onEditorToggle"]);r=a(r),r.sort(p.dayViewSortFn);var c,d=r.map(function(e){return e.id}),v=new Date,g=DateistDateHelpers.day_diff(v,t);g<-1?c=_("%s days ago").replace("%s",Math.abs(g)):-1===g?c=_("Yesterday"):0===g?c=_("Today"):1===g?c=_("Tomorrow"):g>1&&(c=DateUtils.getWeekDay(t));var b=DateUtils.formatView(t);return f.default.createElement("div",{className:"section_day"},i?f.default.createElement("h2",{className:"subsection_header"},f.default.createElement("a",{href:(0,y.dayViewLink)(t)},c),f.default.createElement("span",{className:"subsection_header__date"},b)):null,f.default.createElement(m.default,o({rootItemIds:d},s,{showDragHandle:!0,onEditorToggle:l,allowAdd:{defaultFields:{due:h.default.fromDate(t)}},showDue:!1})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var f=n(e("react")),p=e("../../components/agenda/sort"),m=n(e("../item_list/RootItemList")),h=n(e("../../models/DateExt")),y=e("../routing")},{"../../components/agenda/sort":16,"../../models/DateExt":152,"../item_list/RootItemList":868,"../routing":1005,react:"react"}],683:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function u(e,t){if(null==e)return{};var r,n,o=c(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(e){var t=e.rootItems,r=u(e,["rootItems"]),n=(0,p.createOverdueViewSort)(r);t=a(t),t.sort(n);var i=t.map(function(e){return e.id});return f.default.createElement("div",{className:"section_overdue"},f.default.createElement("h2",{className:"warning subsection_header"},_("Overdue")),f.default.createElement(m.default,o({rootItemIds:i,showDragHandle:!0},r)))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var f=n(e("react")),p=e("../../components/agenda/sort"),m=n(e("../item_list/RootItemList"))},{"../../components/agenda/sort":16,"../item_list/RootItemList":868,react:"react"}],684:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.due,r=a(e,["due"]);return s.default.createElement(c.Transition,{in:!0,appear:!0,timeout:225},function(e){var n=(0,u.default)("postpone_droparea",e);return s.default.createElement("div",o({className:n},r),s.default.createElement(f.default,null),s.default.createElement("span",null,s.default.createElement(d.default,{text:_("Drop to postpone: {new_due_date}"),keyval:{new_due_date:s.default.createElement("b",null,t.relativeFormat())}})))})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var s=n(e("react")),u=n(e("classnames")),c=e("react-transition-group"),d=n(e("../TemplateText")),f=n(e("../icons/PostponeIcon"))},{"../TemplateText":657,"../icons/PostponeIcon":825,classnames:"classnames",react:"react","react-transition-group":"react-transition-group"}],685:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function c(e){if(Array.isArray(e))return e}function d(){var e=(0,v.default)(),t=e,r=y.filter(h.DEFAULT_QUERY_TODAY,t),n=l(r,2),o=n[0],s=n[1],u=o.items.length>0,c=s.items.length>0,d=(0,C.toISODateString)(s.day_date,{dateOnly:!0}),p=(0,f.useState)(null),w=l(p,2),E=w[0],j=w[1],O=(0,f.useCallback)(function(e,t){j({listId:t,itemId:e})},[]),S=(0,m.useDispatch)(),P=(0,f.useCallback)(function(e){if(j(null),"postpone"===e.action){var r=t.items[e.itemId],n=r.due.postpone();return void S((0,D.itemUpdateDue)(i({},e.itemId,n)))}"reorder"===e.action&&(S((0,D.itemMoveDueToDate)(e.itemId,e.date)),S((0,D.itemUpdateDayOrder)(e.dayOrders)))},[S,t.items]);N(O,P);var I,k=(0,f.useState)(!1),T=l(k,2),R=T[0],L=T[1],$=function(){var e=document.querySelector(".section_day .plus_add_button");e&&e.click()};if(E){var U=t.items[E.itemId],B=U.due.postpone();I=f.default.createElement(A.default,{due:B})}return f.default.createElement("div",{id:"agenda_view"},f.default.createElement(M.ViewHeader,{header:_("Today"),subheader:u?null:(0,C.formatDate)(new Date,{withWeekday:!0,withTime:!1}),largeBottomMargin:u}),u?f.default.createElement(b.default,a({rootItems:o.items,"data-day-list-id":"overdue"},e)):null,E&&"overdue"===E.listId?I:null,f.default.createElement(g.default,a({rootItems:s.items,date:s.day_date,withHeader:u,onEditorToggle:L,"data-day-list-id":d},e)),E&&E.listId===d?I:null,u||c||R?null:f.default.createElement(x,{onAddClick:$}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var f=o(e("react")),p=n(e("prop-types")),m=e("react-redux"),h=e("../../constants/constants"),y=o(e("../../filterist")),v=n(e("../item_list/useRootItemListProps")),g=n(e("./DaySection")),b=n(e("./OverdueSection")),w=e("../../reducers/stats"),E=e("../../react_components/emptyState"),j=n(e("../emptyState/states/TodayZero/TodayZero")),O=e("../../reducers/user"),S=o(e("../../containers/ProductivityStat")),P=e("../../reducers/counts"),I=n(e("../../models/SyncEngine")),k=n(e("../drag_and_drop/useDraggable")),T=n(e("../drag_and_drop/sortable")),C=e("../../utils"),D=e("../../reducers/items"),A=n(e("./PostponeDropArea")),M=e("../view"),x=function(e){var t=e.onAddClick,r=(0,m.useSelector)(w.completedToday),n=(0,m.useSelector)(w.totalCompleted),o=(0,m.useSelector)(P.countSevenDays),a=(0,m.useSelector)(function(e){return e.user.features.karma_vacation}),i=(0,m.useSelector)(O.isDayOff),l=(0,m.useSelector)(function(e){return e.user.token}),s=f.default.createElement(E.EmptyStateTodayDefault,{onButtonClick:t});return r>0&&(s=f.default.createElement(j.default,{completedTodayCount:r,uncompletedSevenDaysCount:o,onFacebookClick:function(){R(l,function(e){e.facebook&&window.open(e.facebook)})},onProductivityClick:S.show,onTwitterClick:function(){R(l,function(e){e.twitter&&window.open(e.twitter)})}})),a&&(s=f.default.createElement(E.EmptyStateTodayVacation,{onButtonClick:t})),i&&(s=f.default.createElement(E.EmptyStateTodayDayOff,null)),0===r&&n<10&&(s=f.default.createElement(E.EmptyStateTodayNew,{onButtonClick:t})),f.default.createElement("div",{id:"completed_today_holder"},f.default.createElement("div",{id:"empty-state-holder",className:"completed_today"},s))};x.propTypes={onAddClick:p.default.func.isRequired};var R=function(e,t){var r=$requestJSON("/API/".concat(I.default.api_version,"/completed/get_tdzero_share_urls"));r.addCallback(t),r.addErrback(function(){return alert(_("Something went wrong sharing your productive day. We still think you're awesome though! Please try again!"))}),r.sendReq({token:e})},N=function(e,t){var r=(0,f.useRef)(),n=(0,f.useRef)(),o=(0,f.useRef)(),a=(0,f.useRef)();(0,k.default)({itemSelector:"[data-item-id]",handleSelector:".item_dnd_handle",onDragStart:(0,f.useCallback)(function(t){r.current=t,n.current=(0,T.default)({dragItem:t,listIdAttr:"data-day-list-id",itemIdAttr:"data-item-id",maxIndent:1});var a=(0,C.parseId)(t.getAttribute("data-item-id")),i=t.closest("[data-day-list-id]").getAttribute("data-day-list-id");n.current.handleDragStart(),e(a,i),o.current=document.querySelector(".postpone_droparea")},[e]),onDragging:(0,f.useCallback)(function(e){a.current=(0,C.isMouseOver)(e,o.current,{within:20}),a.current?o.current.classList.add("drop_background"):o.current.classList.remove("drop_background"),n.current.handleDragging()},[]),onDragEnd:(0,f.useCallback)(function(){var e=n.current.handleDragEnd(),r=e.dragItemId,o=e.orders,i=e.dropListId;if(r=(0,C.parseId)(r),
a.current)return void t({action:"postpone",itemId:r});if("overdue"===i)return void t({action:null});var l=new Date(i),s=o.reduce(function(e,t){var r=t.id,n=t.item_order;return e[(0,C.parseId)(r)]=n,e},{});t({action:"reorder",itemId:r,date:l,dayOrders:s})},[t])})}},{"../../constants/constants":98,"../../containers/ProductivityStat":102,"../../filterist":121,"../../models/SyncEngine":169,"../../react_components/emptyState":731,"../../reducers/counts":1090,"../../reducers/items":1100,"../../reducers/stats":1130,"../../reducers/user":1135,"../../utils":1176,"../drag_and_drop/sortable":691,"../drag_and_drop/useDraggable":692,"../emptyState/states/TodayZero/TodayZero":752,"../item_list/useRootItemListProps":872,"../view":1081,"./DaySection":682,"./OverdueSection":683,"./PostponeDropArea":684,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],686:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,s.getDocumentTitle)(e);return a.default.useEffect(function(){document.title=l.default.formatSimple(t,{only_text:!0,as_html:!1})},[t]),null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../../components/formatter/Formatter")),s=e("./helpers");o.propTypes={mainView:i.default.object,filters:i.default.object,items:i.default.object,labels:i.default.object,projects:i.default.object},o.defaultProps={mainView:{},filters:{},items:{},labels:{},projects:{}};var u=o;r.default=u},{"../../components/formatter/Formatter":22,"./helpers":687,"prop-types":"prop-types",react:"react"}],687:[function(e,t,r){"use strict";function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim()}function o(e){var t=e.detailView,r=e.mainView,o=e.items,s=e.filters,u=e.projects;if(t)return n(o[t.id].content)+l;switch(r.type){case a.MAIN_VIEW_TYPE_TODAY:return _("Today")+l;case a.MAIN_VIEW_TYPE_7_DAYS:return _("Next 7 days")+l;case a.MAIN_VIEW_TYPE_LABEL:return r.id?n(r.id)+l:i;case a.MAIN_VIEW_TYPE_FILTER:return s[r.id]?n(s[r.id].name)+l:i;case a.MAIN_VIEW_TYPE_PROJECT:if(r.ids&&1!==r.ids.length)return i;var c=r.ids[0],d=u[c];return d?n(d.name)+l:i;case a.MAIN_VIEW_TYPE_QUERY:return r.query+l;case a.MAIN_VIEW_TYPE_ACTIVITY_LOG:return _("Activity")+l;default:return i}}Object.defineProperty(r,"__esModule",{value:!0}),r.getDocumentTitle=o;var a=e("../../constants/constants.js"),i="Todoist",l=": Todoist"},{"../../constants/constants.js":98}],688:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=e("../../reducers/filters"),a=function(e){return e&&e.__esModule?e:{default:e}}(e("./DocumentTitle")),i=function(e){return{detailView:e.detailView,mainView:e.mainView,filters:(0,o.filterGetSource)(e),items:e.items,labels:e.labels,projects:e.projects}},l=(0,n.connect)(i)(a.default);r.default=l},{"../../reducers/filters":1095,"./DocumentTitle":686,"react-redux":"react-redux"}],689:[function(e,t,r){"use strict";function n(e){var t,r,n=e.element,a=e.handle,i=e.onDragStart,l=e.onDragging,s=e.onDragEnd,u=e.scrollElements,c=e.startDragging,d=!1,f=function(e){t=n.getAttribute("style"),n.style.position="fixed",n.style.zIndex=1e3,n.style.top="".concat(e.clientY,"px"),n.style.left="".concat(e.clientX,"px"),document.addEventListener("mousemove",p),document.addEventListener("mouseup",m),document.documentElement.classList.add("ice_dnd_active"),r=(0,o.default)(u||document.documentElement),i(e)},p=function(e){n.style.top="".concat(e.clientY,"px"),n.style.left="".concat(e.clientX,"px"),l(e)},m=function(e){h(),s(e)};c?f(c):a.addEventListener("mousedown",f);var h=function(){d||(t?n.setAttribute("style",t):n.removeAttribute("style"),r&&r(),document.documentElement.classList.remove("ice_dnd_active"),a.removeEventListener("mousedown",f),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m),d=!0)};return h}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("./scrollOnHover"))},{"./scrollOnHover":690}],690:[function(e,t,r){"use strict";function n(e){var t;Array.isArray(e)||(e=[e]);var r=function(r){t&&clearInterval(t);var n,a,i=!0,l=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){if((a=u.value)===document.documentElement){var d=r.pageY-a.scrollTop;d<o&&(n=-6),d>=a.clientHeight-o&&(n=6)}else{var f=a.getBoundingClientRect();if(r.clientX<f.left||r.clientX>f.right||r.clientY<f.top-o||r.clientY>f.bottom+o)continue;n=Math.abs(r.clientY-f.top)<o?-6:Math.abs(r.clientY-f.bottom)<o?6:0}if(void 0!==n)break}}catch(e){l=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}void 0!==n&&(t=setInterval(function(){a.scrollTop+=n},1))};return document.addEventListener("mousemove",r),function(){document.removeEventListener("mousemove",r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=70},{}],691:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(){var e,t,r,o,a,i,l,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=f.dragItem,m=f.listIdAttr,h=f.itemIdAttr,_=f.maxIndent,y=void 0===_?5:_,v=f.indentWidth,g=void 0===v?28:v,b=y>1,w="[".concat(m,"]"),E="".concat(w," [").concat(h,"]"),j=new WeakMap,O=function(){l=u(p),l.forEach(function(e){j.set(e,e.style.display),e.style.display="none"})},S=function(){l.forEach(function(e){e.style.display=j.get(e)})},P=function(e){return e.getAttribute(h)};return{handleDragStart:function(){e=Array.from(document.querySelectorAll(E)),t=Array.from(document.querySelectorAll(w)),r=LI(),o=(s(p)-1)*g,b&&(r.style.marginLeft=o+"px",a=s(p)),O(),r.className=p.className+" drop_item",r.classList.remove("current"),p.classList.add("on_drag"),r.style.height=p.offsetHeight+"px",$addAfter(r,p),p.style.width=r.offsetWidth+"px"},handleDragging:function(){i||(i=$position(p).x-o);var n=p.getBoundingClientRect().top,l=n+p.offsetHeight,u=!1,f=!0,m=!1,_=void 0;try{for(var v,w=e[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var E=v.value;if(E!==p){var j=E.getBoundingClientRect().top,O=j+E.offsetHeight/2,S=j+E.offsetHeight;if(l>O&&l<S){for(;E.nextSibling&&"none"==E.nextSibling.style.display;)E=E.nextSibling;$addAfter(r,E),u=!0;break}if(n<O&&n>j){$addBefore(r,E),u=!0;break}}}}catch(e){m=!0,_=e}finally{try{f||null==w.return||w.return()}finally{if(m)throw _}}if(!u){var P=t.find(function(e){return c(p,e)});if(P&&!P.contains(r)&&0===P.querySelectorAll("[".concat(h,"]")).length)return void $add(P,r)}if(b){var I=a,k=$position(p).x-i,T=g;k<=10?I=1:k>=1*T-10&&k<=1*T+10?I=2:k>=2*T-10&&k<=2*T+10?I=3:k>=3*T-10&&k<=3*T+10?I=4:k>=4*T-10&&k<=4*T+10?I=5:k>=5*T-10&&k<=5*T+10&&(I=6),I>y&&(I=y);for(var C=r.previousSibling;C&&(!s(C)||C==p||d(C));)C=C.previousSibling;if(C?I>s(C)&&(I=Math.min(s(C)+1,y)):I=1,r.nextSibling){var D=s(r.nextSibling);I<D&&(I=D)}r.style.marginLeft=(I-1)*g+"px",a=I}},handleDragEnd:function(){var e,t=p.getAttribute(h),o={};if(b){var i=s(p),u=a;if(o[t]=u,i!==u){var c=u-i;l.forEach(function(e){var t=P(e),r=Math.min(s(e)+c,y);o[t]=r})}}var d=r.closest(w),f=new Set([p].concat(n(l))),_=Array.from(d.querySelectorAll("[".concat(h,"], .drop_item")));_=_.filter(function(e){return!f.has(e)});var v=_.findIndex(function(e){return e===r});(e=_).splice.apply(e,[v,1,p].concat(n(l)));var g=_.map(function(e,t){var r=e.getAttribute(h);return{id:r,indent:b?o[r]||s(e):null,item_order:t+1}});return p.style.width="",p.classList.remove("on_drag"),$remove(r),S(),{dragItemId:t,orders:g,dropListId:d.getAttribute(m)}}}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var s=function(e){switch(e.getAttribute("data-item-indent")){case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5}},u=function(e){for(var t=s(e),r=[],n=e.nextSibling;n&&s(n)>t;)r.push(n),n=n.nextSibling;return r},c=function(e,t){return e=e.getBoundingClientRect(),t=t.getBoundingClientRect(),!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)},d=function(e){return"none"===e.style.display}},{}],692:[function(e,t,r){"use strict";function n(e){var t=e.itemSelector,r=e.handleSelector,n=e.scrollSelector,i=e.onDragStart,l=e.onDragging,s=e.onDragEnd,u=(0,o.useRef)();u.current={onDragStart:i,onDragging:l,onDragEnd:s};var c=(0,o.useRef)();(0,o.useEffect)(function(){var e,o=function(o){var i=o.target.closest(r);if(i){var l=o.target.closest(t);if(l){if(n)var s=Array.isArray(n)?n.map(function(e){return document.querySelector(e)}).filter(function(e){return null!=e}):document.querySelector(s);e=(0,a.default)({element:l,handle:i,startDragging:o,scrollElements:void 0,onDragStart:function(e){u.current.onDragStart&&u.current.onDragStart(l,e),c.current=!0},onDragging:function(e){u.current.onDragging&&u.current.onDragging(e)},onDragEnd:function(e){u.current.onDragEnd&&u.current.onDragEnd(e)}})}}};return document.addEventListener("mousedown",o),function(){!c.current&&e&&e(),document.removeEventListener("mousedown",o)}},[t,r,n,i,l,s])}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("react"),a=function(e){return e&&e.__esModule?e:{default:e}}(e("./draggable"))},{"./draggable":689,react:"react"}],693:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.listIdAttr,r=e.itemIdAttr,n=e.handleSelector,o=e.scrollSelector,s=e.maxIndent,u=e.onSort,c=(0,a.useRef)();(0,l.default)({itemSelector:"[".concat(t,"] [").concat(r,"]"),handleSelector:n,scrollSelector:o,maxIndent:s,onDragStart:(0,a.useCallback)(function(e){c.current=(0,i.default)({dragItem:e,listIdAttr:t,itemIdAttr:r,maxIndent:5}),c.current.handleDragStart()},[t,r]),onDragging:(0,a.useCallback)(function(){c.current.handleDragging()},[]),onDragEnd:(0,a.useCallback)(function(){var e=c.current.handleDragEnd();u(e)},[u])})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=e("react"),i=n(e("./sortable")),l=n(e("./useDraggable"))},{"./sortable":691,"./useDraggable":692,react:"react"}],694:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.children,r=a(e,["children"]),n=c.default.useContext(p.Context),i=n.id,l=n.highlightedOptionValue,s=n.multiple,u=n.dispatch,d=n.listBoxRef,f=n.listBoxId,h=n.searchText;c.default.useLayoutEffect(function(){if(d.current&&null==l){var e=(0,m.getEnabledOptionValues)(d.current);e.length>0&&u({type:p.ACTION.HIGHLIGHTED_OPTION_CHANGED,optionValue:e[0]})}},[h,d,l,u]);var _=(0,m.getOptionElementId)(i,l);return c.default.createElement("ul",o({},r,{role:"listbox","aria-multiselectable":s,id:f,ref:d,"aria-activedescendant":_}),"function"==typeof t?t(n):t)}function s(e){function t(e){e.stopPropagation(),b({type:p.ACTION.SELECT_OPTION,optionValue:n}),y.onClick&&y.onClick(e)}function r(){b({type:p.ACTION.HIGHLIGHTED_OPTION_CHANGED,optionValue:n,updateScroll:!1})}var n=e.value,i=e.label,l=void 0===i?n:i,s=e.children,u=void 0===s?l:s,d=e.disabled,h=void 0!==d&&d,_=e.className,y=a(e,["value","label","children","disabled","className"]),v=c.default.useContext(p.Context),g=v.id,b=v.dispatch,w=v.highlightedOptionValue,E=v.optionState,j=n===w,O=E[n]===p.OPTION_STATE.SELECTED,S=E[n]===p.OPTION_STATE.PARTIALLY_SELECTED,P=O?"true":S?"mixed":"false";return c.default.createElement("li",o({},y,{className:(0,f.default)(_,{"dropdown_select__option--highlighted":j}),id:(0,m.getOptionElementId)(g,n),role:"option","data-value":n,"aria-label":l,"aria-disabled":h,"aria-selected":O,"aria-checked":P,onClick:h?void 0:t,onMouseMove:j||h?void 0:r}),"function"==typeof u?u({isHighlighted:j,isSelected:O,isPartiallySelected:S,checkedStatus:P}):u)}function u(e){var t=e.children,r=a(e,["children"]),n=(0,f.default)(r.className,{dropdown_select_option_header:null!=t});return c.default.createElement("li",o({},r,{role:"separator",className:n}),null!=t?t:c.default.createElement("hr",null))}Object.defineProperty(r,"__esModule",{value:!0}),r.Options=l,r.Option=s,r.OptionSeparator=u;var c=n(e("react")),d=n(e("prop-types")),f=n(e("classnames")),p=e("./state"),m=e("./helpers");l.propTypes={children:d.default.oneOfType([d.default.node,d.default.func]).isRequired},(0,m.setDisplayName)(l),s.propTypes={value:d.default.string.isRequired,label:d.default.string,children:d.default.oneOfType([d.default.node,d.default.func]),disabled:d.default.bool,className:d.default.string},(0,m.setDisplayName)(s),u.propTypes={children:d.default.node.isRequired,className:d.default.string},(0,m.setDisplayName)(u)},{"./helpers":699,"./state":701,classnames:"classnames","prop-types":"prop-types",react:"react"}],695:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){var t=O.current,r=(0,c.getEnabledOptionValues)(t),n=r.findIndex(function(e){return e===w});switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation();var o=(n+1)%r.length;return void g({type:u.ACTION.HIGHLIGHTED_OPTION_CHANGED,optionValue:r[o],updateScroll:!0});case"ArrowUp":e.preventDefault(),e.stopPropagation();var a=n>0?n-1:r.length-1;return void g({type:u.ACTION.HIGHLIGHTED_OPTION_CHANGED,optionValue:r[a],updateScroll:!0});case"Enter":return e.preventDefault(),e.stopPropagation(),void(n>=0&&g({type:u.ACTION.SELECT_OPTION,optionValue:r[n]}));case"Escape":return e.stopPropagation(),void g({type:u.ACTION.CLOSE_DROPDOWN})}}var r=e.children,n=e.className,o=e.width,i=void 0===o?d:o,f=e.nose,p=void 0===f||f,m=e.align,h=void 0===m?"bottom":m,_=e.position,y=void 0===_?"bottom":_,v=a.default.useContext(u.Context),g=v.dispatch,b=v.isDropdownOpen,w=v.highlightedOptionValue,E=v.popupId,j=v.popupRef,O=v.listBoxRef,S=v.toggleButtonRef;if(!b)return null;var P="toggle"===i&&S.current?S.current.offsetWidth:i;return a.default.createElement(s.default,{width:P||d,anchor:S.current,onHide:function(){return g({type:u.ACTION.CLOSE_DROPDOWN})},nose:p,align:h,position:y},a.default.createElement("div",{id:E,ref:j,tabIndex:-1,onKeyDown:t,className:(0,l.default)("dropdown_select--popup",n)},r))}Object.defineProperty(r,"__esModule",{value:!0}),r.Popup=o;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("../Dialog")),u=e("./state"),c=e("./helpers"),d=275;o.propTypes={children:i.default.node,className:i.default.string,width:i.default.oneOfType([i.default.number,i.default.oneOf(["toggle"])]),nose:i.default.bool,align:i.default.oneOf(["top","bottom"]),position:i.default.oneOf(["center","top","bottom","right"])},(0,c.setDisplayName)(o)},{"../Dialog":649,"./helpers":699,"./state":701,classnames:"classnames","prop-types":"prop-types",react:"react"}],696:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){function t(e){f({type:c.ACTION.SEARCH_TEXT_CHANGED,searchText:e.target.value})}var r=e.label,n=a(e,["label"]),i=s.default.useContext(c.Context),l=i.id,u=i.searchText,f=i.dispatch,p=i.highlightedOptionValue,m=i.searchInputFieldRef,h=i.listBoxId,_="".concat(l,"-search"),y=(0,d.getOptionElementId)(l,p);return s.default.createElement("div",{className:"dropdown_select_input"},null!=r?s.default.createElement("label",{htmlFor:_},r):null,s.default.createElement("input",o({},n,{id:_,ref:m,type:"text",value:u,onChange:t,autoComplete:"off",spellCheck:"false",role:"combobox","aria-owns":h,"aria-activedescendant":y,"aria-autocomplete":"list","aria-controls":h})))}Object.defineProperty(r,"__esModule",{value:!0}),r.Search=l;var s=n(e("react")),u=n(e("prop-types")),c=e("./state"),d=e("./helpers");l.propTypes={label:u.default.string},(0,d.setDisplayName)(l)},{"./helpers":699,"./state":701,"prop-types":"prop-types",react:"react"}],697:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return u(e)||s(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function u(e){if(Array.isArray(e))return e}function c(e,t){if(null==e)return{};var r,n,o=d(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function f(e){var t=e.children,r=e.onClose,n=void 0===r?function(){}:r,a=e.multiple,l=void 0!==a&&a,s=c(e,["children","onClose","multiple"]),u=m.default.useMemo(function(){return p(s.value,l)},[s.value,l]),d=m.default.useMemo(function(){return l&&null!=s.partiallySelectedValues?s.partiallySelectedValues.filter(function(e){return!u.includes(e)}):b},[l,u,s.partiallySelectedValues]),f=m.default.useCallback((0,v.createReducer)({multiple:l,partiallySelectedValues:d}),[d]),h=m.default.useReducer(f,(0,v.getInitialState)({selectedValues:u,partiallySelectedValues:d,multiple:l})),w=i(h,2),E=w[0],j=w[1],O=E.isDropdownOpen,S=E.highlightedOptionValue;(0,y.useUpdateEffect)(function(){j({type:v.ACTION.SET_SELECTED_VALUES,selectedValues:u,partiallySelectedValues:d})},[u,d]);var P=m.default.useMemo(function(){return s.id||(0,_.generateElementId)("dropdown-select")},[s.id]),I=m.default.useRef(),k=m.default.useRef(),T=m.default.useRef(),C=m.default.useRef(),D=m.default.useRef(!0);m.default.useEffect(function(){var e=k.current,t=D.current;if(null!=S&&e&&t&&O){var r=e.querySelector('[data-value="'.concat(S,'"]'));null!=r&&(0,g.scrollList)(r,e),D.current=!1}},[S,O]),(0,y.useUpdateEffect)(function(){var e=O?C.current||I.current:T.current;e&&e.focus()},[O]),m.default.useEffect(function(){!O&&n&&n()},[O,n]);var A=s.name,M=s.onChange,x=m.default.useCallback(function(e){if(e.type===v.ACTION.HIGHLIGHTED_OPTION_CHANGED&&(D.current=Boolean(e.updateScroll)),e.type===v.ACTION.CLOSE_DROPDOWN&&l){var t=(0,v.getSelectionResults)(E.optionState),r=t.value,n=t.partiallySelectedValues;M({target:{name:A,value:r,partiallySelectedValues:n}})}e.type===v.ACTION.SELECT_OPTION&&(l||M({target:{name:A,value:e.optionValue}})),j(e)},[A,M,l,E.optionState]),R=m.default.useMemo(function(){return o({},s,E,{id:P,multiple:l,popupId:"".concat(P,"-popup"),listBoxId:"".concat(P,"-listbox"),popupRef:I,listBoxRef:k,toggleButtonRef:T,searchInputFieldRef:C,partiallySelectedValues:d,dispatch:x})},[s,E,P,l,x,d]);return m.default.createElement(v.Context.Provider,{value:R},t)}function p(e,t){var r=Array.isArray(e)?e:[e];return t||(r=[r[0]]),r.filter(function(e){return null!=e})}Object.defineProperty(r,"__esModule",{value:!0}),r.Select=f;var m=n(e("react")),h=n(e("prop-types")),_=e("../../utils"),y=e("../hooks"),v=e("./state"),g=e("./helpers"),b=[];f.propTypes={id:h.default.string,children:h.default.node,multiple:h.default.bool,name:h.default.string,value:h.default.oneOfType([h.default.string,h.default.arrayOf(h.default.string.isRequired)]).isRequired,partiallySelectedValues:h.default.arrayOf(h.default.string),onChange:h.default.func.isRequired,onClose:h.default.func},(0,g.setDisplayName)(f)},{"../../utils":1176,"../hooks":766,"./helpers":699,"./state":701,"prop-types":"prop-types",react:"react"}],698:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(null==e)return{};var r,n,o=l(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function s(e){function t(){s({type:c?f.ACTION.CLOSE_DROPDOWN:f.ACTION.OPEN_DROPDOWN})}var r=e.children,n=e.tooltip,a=i(e,["children","tooltip"]),l=u.default.useContext(f.Context),s=l.dispatch,c=l.isDropdownOpen,p=l.toggleButtonRef,m=l.popupId,h=o({},a,{title:n,ref:p,"aria-owns":m,"aria-controls":m,"aria-expanded":c,"aria-haspopup":"listbox",onKeyDown:function(e){"ArrowDown"!==e.key||c||t(),a.onKeyDown&&a.onKeyDown(e)},onClick:function(e){t(),a.onClick&&a.onClick(e)}});return"function"==typeof r?r({isDropdownOpen:c,toggleDropdown:t,buttonProps:h}):u.default.createElement(d.default,h,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.Toggle=s;var u=n(e("react")),c=n(e("prop-types")),d=n(e("../Button")),f=e("./state"),p=e("./helpers");s.propTypes={children:c.default.oneOfType([c.default.node,c.default.func]).isRequired,tooltip:c.default.string,onClick:c.default.func},(0,p.setDisplayName)(s)},{"../Button":648,"./helpers":699,"./state":701,"prop-types":"prop-types",react:"react"}],699:[function(e,t,r){"use strict";function n(e){var t=e.displayName||e.name;e.displayName="Dropdown.".concat(t)}function o(e){return!e.hasAttribute("aria-disabled")||"false"===e.getAttribute("aria-disabled")}function a(e){return e?Array.from(e.querySelectorAll('[role="option"]')).filter(o).map(function(e){return e.getAttribute("data-value")}):[]}function i(e,t){if(t){var r=String(t).toLowerCase().replace(/[\W_]+/g,"-");return"".concat(e,"-option-").concat(r)}}function l(e,t){var r=window.getComputedStyle(t,null),n=r.getPropertyValue("padding-top"),o=r.getPropertyValue("padding-bottom"),a=parseInt(n,10)+parseInt(o,10),i=t.offsetHeight-a,l=e.offsetTop;if(!i||!l)return!1;var s=t.querySelector("li:first-of-type").offsetHeight;t.scrollTop=l-(i-s)}Object.defineProperty(r,"__esModule",{value:!0}),r.setDisplayName=n,r.getEnabledOptionValues=a,r.getOptionElementId=i,r.scrollList=l},{}],700:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Context",{enumerable:!0,get:function(){return n.Context}}),Object.defineProperty(r,"ACTION",{enumerable:!0,get:function(){return n.ACTION}}),Object.defineProperty(r,"Select",{enumerable:!0,get:function(){return o.Select}}),Object.defineProperty(r,"Toggle",{enumerable:!0,get:function(){return a.Toggle}}),Object.defineProperty(r,"Popup",{enumerable:!0,get:function(){return i.Popup}}),Object.defineProperty(r,"Search",{enumerable:!0,get:function(){return l.Search}}),Object.defineProperty(r,"Options",{enumerable:!0,get:function(){return s.Options}}),Object.defineProperty(r,"Option",{enumerable:!0,get:function(){return s.Option}}),Object.defineProperty(r,"OptionSeparator",{enumerable:!0,get:function(){return s.OptionSeparator}});var n=e("./state"),o=e("./Select"),a=e("./Toggle"),i=e("./Popup"),l=e("./Search"),s=e("./Options")},{"./Options":694,"./Popup":695,"./Search":696,"./Select":697,"./Toggle":698,"./state":701}],701:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=e.selectedValues,r=e.partiallySelectedValues,n=void 0===r?[]:r,a=function(e){return function(t,r){return Object.assign(t,o({},r,e))}};return t.reduce(a(d.SELECTED),n.reduce(a(d.PARTIALLY_SELECTED),{}))}function i(e){var t=Object.keys(e),r=t.filter(function(t){return e[t]===d.SELECTED}),n=t.filter(function(t){return e[t]===d.PARTIALLY_SELECTED});return{value:r,partiallySelectedValues:0===n.length?void 0:n}}function l(e){var t=e.selectedValues,r=e.partiallySelectedValues,o=e.multiple;return n({},f,{highlightedOptionValue:o?void 0:t[0],optionState:a({selectedValues:t,partiallySelectedValues:r})})}function s(e,t,r){switch(t){case d.PARTIALLY_SELECTED:return d.SELECTED;case d.SELECTED:return;default:return r.includes(e)?d.PARTIALLY_SELECTED:d.SELECTED}}function u(e){var t=e.multiple,r=e.partiallySelectedValues;return function(e,i){switch(i.type){case p.SET_SELECTED_VALUES:return n({},e,{optionState:a(i)});case p.HIGHLIGHTED_OPTION_CHANGED:return n({},e,{highlightedOptionValue:i.optionValue});case p.SEARCH_TEXT_CHANGED:return n({},e,{searchText:i.searchText,highlightedOptionValue:void 0});case p.OPEN_DROPDOWN:case p.CLOSE_DROPDOWN:return n({},e,{isDropdownOpen:i.type===p.OPEN_DROPDOWN,searchText:""});case p.SELECT_OPTION:var l=i.optionValue,u=e.optionState[l];return t?n({},e,{optionState:n({},e.optionState,o({},l,s(l,u,r)))}):n({},e,{isDropdownOpen:!1,optionState:o({},l,d.SELECTED),searchText:""});default:return e}}}Object.defineProperty(r,"__esModule",{value:!0}),r.getSelectionResults=i,r.getInitialState=l,r.createReducer=u,r.Context=r.ACTION=r.initialState=r.OPTION_STATE=void 0;var c=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),d={SELECTED:"SELECTED",PARTIALLY_SELECTED:"PARTIALLY_SELECTED"};r.OPTION_STATE=d;var f={isDropdownOpen:!1,searchText:"",highlightedOptionValue:void 0,optionState:{}};r.initialState=f;var p={SEARCH_TEXT_CHANGED:"SEARCH_TEXT_CHANGED",HIGHLIGHTED_OPTION_CHANGED:"HIGHLIGHTED_OPTION_CHANGED",OPEN_DROPDOWN:"OPEN_DROPDOWN",CLOSE_DROPDOWN:"CLOSE_DROPDOWN",SET_SELECTED_VALUES:"SET_SELECTED_VALUES",SELECT_OPTION:"SELECT_OPTION"};r.ACTION=p;var m={multiple:!1,id:"",name:"",value:void 0,onChange:function(){}},h=c.default.createContext(n({},m,f,{popupId:"",listBoxId:"",popupRef:{current:null},listBoxRef:{current:null},toggleButtonRef:{current:null},searchInputFieldRef:{current:null},dispatch:function(){}}));r.Context=h},{react:"react"}],702:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function l(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function c(e){if(Array.isArray(e))return e}function d(e,t){if(null==e)return{};var r,n,o=f(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function f(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function p(e){function t(e){(13===e.keyCode||32===e.keyCode||40===e.keyCode)&&!E&&(j(!0),e.preventDefault())}var r=e.children,n=e.onSelect,a=e.width,s=e.isMultiSelect,u=e.closeAfterSelection,c=e.nose,f=e.onClose,p=e.closeTriggersDisabled,h=d(e,["children","onSelect","width","isMultiSelect","closeAfterSelection","nose","onClose","closeTriggersDisabled"]),b=(0,m.useState)(!1),w=l(b,2),E=w[0],j=w[1],O=(0,m.useRef)(null),S=(0,m.useRef)(!1),P=(0,m.useMemo)(function(){return(0,_.generateElementId)("dropdown-select")},[]),I="".concat(P,"-popup"),k={id:P,"aria-owns":I,"aria-controls":I,"aria-expanded":E,"aria-haspopup":"listbox",onKeyDown:t,ref:O},T=function(){S.current&&(O.current&&O.current.focus(),j(!1),f())};return(0,m.useEffect)(function(){return S.current=!0,function(){S.current=!1}},[]),m.default.createElement(m.default.Fragment,null,r({toggle:function(){E?T():j(!0)},buttonProps:k}),E&&m.default.createElement(y.default,{width:a,nose:c,anchor:O.current,onHide:p?null:T,position:"bottom"},s?m.default.createElement(v.default,i({id:I,onClose:p?null:T,onSelect:function(e,t){n(e,t),T()}},h)):m.default.createElement(g.default,i({id:I,onClose:p?null:T,onSelect:function(e,t){u?(n(e,t),T()):n(e,o({},t,{closeDropdown:T}))},keyListenersDisabled:p},h))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=p;var m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),h=n(e("prop-types")),_=e("../../utils"),y=n(e("../Dialog")),v=n(e("./MultiSelect")),g=n(e("./Select"));p.propTypes={children:h.default.func.isRequired,width:h.default.number,isMultiSelect:h.default.bool,closeAfterSelection:h.default.bool,onSelect:h.default.func.isRequired,closeTriggersDisabled:h.default.bool,nose:h.default.bool,onClose:h.default.func},p.defaultProps={width:275,closeTriggersDisabled:!1,nose:!0,closeAfterSelection:!0,onClose:function(){}}},{"../../utils":1176,"../Dialog":649,"./MultiSelect":703,"./Select":704,"prop-types":"prop-types",react:"react"}],703:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return l(e)||i(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){
for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function s(e,t){return d(e)||c(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function d(e){if(Array.isArray(e))return e}function f(e){var t=e.className,r=e.items,n=e.onSelect,a=e.onClose,i=e.filterItems,l=e.renderEmptyResult,u=e.inputPlaceholder,c=e.renderItem,d=e.selectedItemsIds,f=void 0===d?[]:d,m=e.label,E=e.id,j=(0,p.useState)(f),O=s(j,2),S=O[0],P=O[1],I=(0,p.useState)(""),k=s(I,2),T=k[0],C=k[1],D=(0,p.useRef)(T),A=(0,p.useRef)(r),M=(0,p.useState)((0,b.getSortedItems)(i({items:r,value:T}),S)),x=s(M,2),R=x[0],N=x[1],L=(0,g.useListHighlightScroll)();(0,p.useEffect)(function(){T===D.current&&r===A.current||N((0,b.getSortedItems)(i({items:r,value:T}),S)),D.current=T,A.current=r},[i,r,T,S]);var $=(0,y.isEqual)(S,f),U=(0,h.default)("dropdown_select_done",{"dropdown_select_done--disabled":$});return p.default.createElement("div",{id:E,tabIndex:-1,onKeyDown:function(e){(0,b.handleKeyDown)(e,R,L.index,{onClose:a,onEnter:function(e){var t=S.indexOf(e.id),r=t>-1,n=r?S.filter(function(e,r){return r!==t}):[].concat(o(S),[e.id]);P(n)},onItemHighlight:L.setIndex})},className:"dropdown_select--popup ".concat(t)},p.default.createElement(w.default,{label:m,items:R,highlightedList:L,inputPlaceholder:u,renderEmptyResult:l,renderItem:c,searchValue:T,selectedItemsIds:S,onItemSelect:function(e){var t=S.indexOf(e.id),r=t>-1?S.filter(function(e,r){return r!==t}):[].concat(o(S),[e.id]);P(r)},onSearchValueChange:function(e){C(e.target.value),L.setIndex(-1)}}),p.default.createElement("div",{className:"dropdown_select_actions"},p.default.createElement(v.default,{onClick:a},_("Cancel")),p.default.createElement(v.default,{className:U,disabled:$,onClick:function(e){$||n(S,{event:e})}},_("Done"))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=f;var p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),m=n(e("prop-types")),h=n(e("classnames")),y=e("../../utils"),v=n(e("../Button")),g=e("./hooks"),b=e("./helpers"),w=n(e("./SelectBody"));f.propTypes={className:m.default.string,items:m.default.oneOfType([m.default.arrayOf(m.default.shape({id:m.default.oneOfType([m.default.string,m.default.number]).isRequired})),m.default.objectOf(m.default.shape({id:m.default.oneOfType([m.default.string,m.default.number]).isRequired}))]).isRequired,selectedItemsIds:m.default.arrayOf(m.default.oneOfType([m.default.string,m.default.number])),onSelect:m.default.func.isRequired,onClose:m.default.func,filterItems:m.default.func.isRequired,renderItem:m.default.func.isRequired,renderEmptyResult:m.default.func,label:m.default.node,inputPlaceholder:m.default.string,id:m.default.string}},{"../../utils":1176,"../Button":648,"./SelectBody":705,"./helpers":706,"./hooks":707,classnames:"classnames","prop-types":"prop-types",react:"react"}],704:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.className,r=e.items,n=e.onSelect,a=e.onClose,i=e.filterItems,l=e.inputPlaceholder,s=e.renderEmptyResult,c=e.renderItem,m=e.selectedItemId,h=e.label,_=e.keyListenersDisabled,y=void 0!==_&&_,v=e.id,g=(0,u.useState)(""),b=o(g,2),w=b[0],E=b[1],j=i({items:r,value:w}),O=r.findIndex(function(e){return e.id===m}),S=(0,d.useListHighlightScroll)(O),P=function(e){(0,f.handleKeyDown)(e,j,S.index,{onClose:a,onEnter:n,onItemHighlight:S.setIndex})};return u.default.createElement("div",{id:v,tabIndex:-1,onKeyDown:y?null:P,className:"dropdown_select--popup ".concat(t)},u.default.createElement(p.default,{label:h,items:j,highlightedList:S,inputPlaceholder:l,renderEmptyResult:s,renderItem:c,searchValue:w,selectedItemsIds:[m],onItemSelect:n,onSearchValueChange:function(e){E(e.target.value),S.setIndex(-1)},keyListenersDisabled:y}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=e("./hooks"),f=e("./helpers"),p=n(e("./SelectBody"));s.propTypes={className:c.default.string,items:c.default.oneOfType([c.default.arrayOf(c.default.shape({id:c.default.oneOfType([c.default.string,c.default.number]).isRequired})),c.default.objectOf(c.default.shape({id:c.default.oneOfType([c.default.string,c.default.number]).isRequired}))]).isRequired,selectedItemId:c.default.oneOfType([c.default.string,c.default.number]),onSelect:c.default.func.isRequired,onClose:c.default.func,filterItems:c.default.func.isRequired,renderItem:c.default.func.isRequired,renderEmptyResult:c.default.func,label:c.default.node,inputPlaceholder:c.default.string,id:c.default.string,keyListenersDisabled:c.default.bool}},{"./SelectBody":705,"./helpers":706,"./hooks":707,"prop-types":"prop-types",react:"react"}],705:[function(e,t,r){"use strict";function n(e){var t=e.label,r=e.items,n=e.highlightedList,a=e.inputPlaceholder,s=e.renderEmptyResult,u=e.renderItem,c=e.searchValue,d=e.selectedItemsIds,f=void 0===d?[]:d,p=e.onItemSelect,m=e.onSearchValueChange,h=e.keyListenersDisabled,_=(0,o.useMemo)(function(){return(0,i.generateElementId)("select")},[]),y="".concat(_,"-listbox"),v="".concat(_,"-label"),g="".concat(_,"-search"),b=function(e){return e?"".concat(_,"-option-").concat(e.id):void 0},w=(0,l.getItemAt)(r,n.index),E=b(w),j=(0,o.useRef)();(0,o.useEffect)(function(){j.current&&!h&&j.current.focus()},[h]);var O=r.map(function(e,r){var a=b(e)===E,i=f.indexOf(e.id)>-1,l=function(t){return p(e,{isSelected:i,event:t})};return o.default.createElement(o.default.Fragment,{key:r},o.default.createElement("li",{onClick:l,role:"option","aria-label":null!=t?"".concat(t,": ").concat(e.id):null,"aria-selected":a,onMouseMove:a?void 0:function(){n.setIndex(r,!1)},onMouseLeave:function(){n.setIndex(-1)}},u({item:e,searchValue:c,isHighlighted:a,isSelected:i,onSelect:l})),e.followedBySeparator?o.default.createElement("li",{role:"separator",className:"dropdown_select_separator"},o.default.createElement("hr",null)):null)});return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"dropdown_select_input"},null!=t?o.default.createElement("label",{id:v,htmlFor:g},t):null,o.default.createElement("input",{id:g,ref:j,type:"text",value:c,onChange:m,autoComplete:"off",spellCheck:"false","aria-activedescendant":E,"aria-autocomplete":"list","aria-controls":y,placeholder:a})),0===r.length&&s?s({searchValue:c}):o.default.createElement("ul",{id:y,role:"listbox",ref:n.container,"aria-activedescendant":E},O))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),a=function(e){return e&&e.__esModule?e:{default:e}}(e("prop-types")),i=e("../../utils"),l=e("./helpers");n.propTypes={items:a.default.arrayOf(a.default.shape({id:a.default.oneOfType([a.default.string,a.default.number]),followedBySeparator:a.default.bool})).isRequired,selectedItemsIds:a.default.arrayOf(a.default.oneOfType([a.default.string,a.default.number])),renderItem:a.default.func.isRequired,renderEmptyResult:a.default.func,label:a.default.node,inputPlaceholder:a.default.string,highlightedList:a.default.object.isRequired,searchValue:a.default.string,onItemSelect:a.default.func.isRequired,onSearchValueChange:a.default.func.isRequired,keyListenersDisabled:a.default.bool};var s=n;r.default=s},{"../../utils":1176,"./helpers":706,"prop-types":"prop-types",react:"react"}],706:[function(e,t,r){"use strict";function n(e,t){return t>=0&&t<e.length?e[t]:void 0}function o(e,t){return(0,l.compose)(function(e){return(e[!0]||[]).concat(e[!1]||[])},(0,l.groupBy)(function(e){return t.indexOf(e.id)>-1}))(e)}function a(e,t){var r=window.getComputedStyle(t,null),n=r.getPropertyValue("padding-top"),o=r.getPropertyValue("padding-bottom"),a=parseInt(n,10)+parseInt(o,10),i=t.offsetHeight-a,l=e.offsetTop;if(!i||!l)return!1;var s=t.querySelector("li:first-of-type").offsetHeight;t.scrollTop=l-(i-s)}function i(e,t,r,o){var a=o.onEnter,i=o.onClose,l=o.onItemHighlight;switch((0,s.resolveKeyboardKey)(e.key)){case"ArrowDown":e.preventDefault(),l((r+1)%t.length,!0);break;case"ArrowUp":e.preventDefault(),l(r>0?r-1:t.length-1,!0);break;case"Enter":e.preventDefault();var u=n(t,r);u&&a(u);break;case"Escape":i&&(e.preventDefault(),e.stopPropagation(),i());break;case"Tab":e.preventDefault()}}Object.defineProperty(r,"__esModule",{value:!0}),r.getItemAt=n,r.getSortedItems=o,r.scrollList=a,r.handleKeyDown=i;var l=e("../../utils/fp"),s=e("../../utils")},{"../../utils":1176,"../../utils/fp":1166}],707:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(e),c.current=t}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=(0,s.useState)(t),o=n(r,2),a=o[0],i=o[1],l=(0,s.useRef)(),c=(0,s.useRef)(!1);return(0,s.useEffect)(function(){if(c.current){var e=l.current;if(e){var t=e.querySelector('[aria-selected="true"]');t&&(0,u.scrollList)(t,e)}}},[a]),{index:a,setIndex:e,container:l}}Object.defineProperty(r,"__esModule",{value:!0}),r.useListHighlightScroll=l;var s=e("react"),u=e("./helpers")},{"./helpers":706,react:"react"}],708:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./DropdownSelect")),o=n.default;r.default=o},{"./DropdownSelect":702}],709:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function c(e){if(Array.isArray(e))return e}function d(){return p.default.createElement("a",{href:"https://get.todoist.help/hc/articles/360000031059-How-to-best-use-filters",rel:"noopener noreferrer",target:"_blank"},p.default.createElement(h.default,{text:_("Click to find out about filters and how to use them."),position:"bottom"},p.default.createElement(w.HelpIcon,null)))}function f(e){function t(e){if(e.preventDefault(),D){var t={name:h.value,query:w.value,color:P.value,is_favorite:T};m?u(t):c(a({id:s.id},t)),f()}}var r=e.isOpen,n=void 0===r||r,i=e.filter,s=void 0===i?{}:i,u=e.onCreate,c=e.onUpdate,f=e.onClose,m=void 0===s.id,h=(0,E.useField)("name",s.name||""),w=(0,E.useField)("query",s.query||""),P=(0,E.useField)("color",s.color||y.DEFAULT_COLOR,Number),I=p.default.useState(s.is_favorite||!1),k=l(I,2),T=k[0],C=k[1],D=h.value.trim().length>0&&w.value.trim().length>0&&null!=P.value;return p.default.createElement(v.default.Box,{isOpen:n,onDismiss:f,size:"small"},p.default.createElement("form",{onSubmit:t},p.default.createElement(v.default.Header,{title:m?_("Add filter"):_("Edit filter"),button:p.default.createElement(d,null)}),p.default.createElement(v.default.Body,{className:"form_fields"},p.default.createElement("div",{className:"form_field"},p.default.createElement("label",{htmlFor:"edit_filter_modal_field_name"},_("Filter name")),p.default.createElement(E.CharacterLengthHint,{id:"edit_filter_modal_field_name_hint",length:h.value.length,maxLength:O}),p.default.createElement("input",o({id:"edit_filter_modal_field_name","aria-describedby":"edit_filter_modal_field_name_hint",className:"form_field_control",autoFocus:!0,maxLength:O},h))),p.default.createElement("div",{className:"form_field"},p.default.createElement("label",{htmlFor:"edit_filter_modal_field_query"},_("Filter query")),p.default.createElement(E.CharacterLengthHint,{id:"edit_filter_modal_field_query_hint",length:w.value.length,maxLength:S}),p.default.createElement("input",o({id:"edit_filter_modal_field_query","aria-describedby":"edit_filter_modal_field_query_hint",className:"form_field_control"},w))),p.default.createElement("div",{className:"form_field"},p.default.createElement("label",{htmlFor:"edit_filter_modal_field_color"},_("Filter color")),p.default.createElement(b.default,o({id:"edit_filter_modal_field_color",className:"form_field_control"},P))),p.default.createElement("div",{className:"form_field form_field_inline"},p.default.createElement("label",null,p.default.createElement(j.default,{name:"is_favorite",checked:T,onChange:function(e){return C(e.target.checked)}}),_("Add to favorites")))),p.default.createElement(v.default.Actions,null,p.default.createElement(g.default,{className:"ist_button",onClick:f},_("Cancel")),p.default.createElement(g.default,{type:"submit",disabled:!D,className:"ist_button ist_button_red"},m?_("Add"):_("Save")))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("@doist/reactist/lib/Tooltip")),y=e("../../models/Colors"),v=n(e("../reactist/modal")),g=n(e("../Button")),b=n(e("../color_dropdown_select")),w=e("../icons"),E=e("../form_helpers"),j=n(e("../switch")),O=60,S=1024;f.propTypes={filter:m.default.object,onCreate:m.default.func.isRequired,onUpdate:m.default.func.isRequired,onClose:m.default.func.isRequired};var P=f;r.default=P},{"../../models/Colors":149,"../Button":648,"../color_dropdown_select":678,"../form_helpers":760,"../icons":842,"../reactist/modal":971,"../switch":1069,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],710:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./EditFilterModal")),o=n.default;r.default=o},{"./EditFilterModal":709}],711:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function c(e){if(Array.isArray(e))return e}function d(){return p.default.createElement("a",{href:"https://get.todoist.help/hc/articles/360000029000-How-to-best-use-labels",rel:"noopener noreferrer",target:"_blank"},p.default.createElement(h.default,{text:_("Click to find out about labels and how to use them."),position:"bottom"},p.default.createElement(w.HelpIcon,null)))}function f(e){function t(e){if(e.preventDefault(),R){var t={name:k.value,color:T.value,is_favorite:A};switch(I){case"new":f(t);break;case"edit":m(a({id:s.id},t));break;case"rename":h({oldName:s.name,newName:k.value})}w()}}var r=e.isOpen,n=void 0===r||r,i=e.label,s=void 0===i?{}:i,u=e.labels,c=void 0===u?[]:u,f=e.onLabelCreate,m=e.onLabelUpdate,h=e.onLabelRename,w=e.onModalClose,I=void 0===s.id?null!=s.name&&s.name.trim().length>0?"rename":"new":"edit",k=(0,E.useField)("name",s.name||""),T=(0,E.useField)("color",s.color||y.DEFAULT_COLOR,Number),C=p.default.useState(s.is_favorite||!1),D=l(C,2),A=D[0],M=D[1],x=p.default.useMemo(function(){return k.value!==s.name&&c.indexOf((0,j.labelNormalizeName)(k.value))>=0},[c,s.name,k.value]),R=!x&&k.value.trim().length>0&&("rename"===I||null!=T.value);return p.default.createElement(v.default.Box,{isOpen:n,onDismiss:w,size:"small"},p.default.createElement("form",{onSubmit:t},p.default.createElement(v.default.Header,{title:P[I],button:p.default.createElement(d,null)}),p.default.createElement(v.default.Body,{className:"form_fields"},p.default.createElement("div",{className:"form_field"},p.default.createElement("label",{htmlFor:"edit_label_modal_field_name"},_("Label name")),x?p.default.createElement(E.FormFieldHint,{id:"edit_label_modal_field_name_hint"},_("Label already exists.")):p.default.createElement(E.CharacterLengthHint,{id:"edit_label_modal_field_name_hint",length:k.value.length,maxLength:S}),p.default.createElement("input",o({id:"edit_label_modal_field_name","aria-describedby":"edit_label_modal_field_name_hint",className:"form_field_control",autoFocus:!0,maxLength:S},k))),"rename"!==I&&p.default.createElement("div",{className:"form_field"},p.default.createElement("label",{id:"edit_label_modal_field_color_label"},_("Label color")),p.default.createElement(b.default,o({"aria-labelledby":"edit_label_modal_field_color_label",className:"form_field_control"},T))),"rename"!==I&&p.default.createElement("div",{className:"form_field form_field_inline"},p.default.createElement("label",null,p.default.createElement(O.default,{name:"is_favorite",checked:A,onChange:function(e){return M(e.target.checked)}}),_("Add to favorites")))),p.default.createElement(v.default.Actions,null,p.default.createElement(g.default,{className:"ist_button",onClick:w},_("Cancel")),p.default.createElement(g.default,{type:"submit",disabled:!R,className:"ist_button ist_button_red"},"new"===I?_("Add"):_("Save")))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("@doist/reactist/lib/Tooltip")),y=e("../../models/Colors"),v=n(e("../reactist/modal")),g=n(e("../Button")),b=n(e("../color_dropdown_select")),w=e("../icons"),E=e("../form_helpers"),j=e("../../reducers/labels"),O=n(e("../switch")),S=60,P={new:_("Add label"),edit:_("Edit label"),rename:_("Rename label")};f.propTypes={label:m.default.object,labels:m.default.array,onLabelCreate:m.default.func.isRequired,onLabelUpdate:m.default.func.isRequired,onLabelRename:m.default.func.isRequired,onModalClose:m.default.func.isRequired};var I=f;r.default=I},{"../../models/Colors":149,"../../reducers/labels":1105,"../Button":648,"../color_dropdown_select":678,"../form_helpers":760,"../icons":842,"../reactist/modal":971,"../switch":1069,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],712:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./EditLabelModal")),o=n.default;r.default=o},{"./EditLabelModal":711}],713:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function c(e){if(Array.isArray(e))return e}function d(){return p.default.createElement("a",{href:"https://get.todoist.help/hc/articles/360000031039-How-to-best-use-projects",rel:"noopener noreferrer",target:"_blank"},p.default.createElement(h.default,{text:_("Click to find out about projects and how to use them."),position:"bottom"},p.default.createElement(w.HelpIcon,null)))}function f(e){function t(e){if(e.preventDefault(),M){var t={name:I.value,color:k.value,is_favorite:D};P?m(a({},t,{parentId:u,childOrder:c})):w(a({id:s.id},t)),S()}}var r=e.isOpen,n=void 0===r||r,i=e.project,s=void 0===i?{}:i,u=e.parentId,c=e.childOrder,f=e.onProjectCreate,m=void 0===f?function(){}:f,h=e.onProjectUpdate,w=void 0===h?function(){}:h,S=e.onModalClose,P=void 0===s.id,I=(0,E.useField)("name",s.name||""),k=(0,E.useField)("color",s.color||y.DEFAULT_COLOR,Number),T=p.default.useState(s.is_favorite||!1),C=l(T,2),D=C[0],A=C[1],M=I.value.trim().length>0&&null!=k.value;return p.default.createElement(v.default.Box,{isOpen:n,onDismiss:S,size:"small"},p.default.createElement("form",{onSubmit:t},p.default.createElement(v.default.Header,{title:P?_("Add project"):_("Edit project"),button:p.default.createElement(d,null)}),p.default.createElement(v.default.Body,{className:"form_fields"},p.default.createElement("div",{className:"form_field"},p.default.createElement("label",{htmlFor:"edit_project_modal_field_name"},_("Project name")),p.default.createElement(E.CharacterLengthHint,{id:"edit_project_modal_field_name_hint",length:I.value.length,maxLength:O}),p.default.createElement("input",o({id:"edit_project_modal_field_name","aria-describedby":"edit_project_modal_field_name_hint",className:"form_field_control",autoFocus:!0,maxLength:O},I))),p.default.createElement("div",{className:"form_field"},p.default.createElement("label",{id:"edit_project_modal_field_color_label"},_("Project color")),p.default.createElement(b.default,o({"aria-labelledby":"edit_project_modal_field_color_label",className:"form_field_control"},k))),p.default.createElement("div",{className:"form_field form_field_inline"},p.default.createElement("label",null,p.default.createElement(j.default,{name:"is_favorite",checked:D,onChange:function(e){return A(e.target.checked)}}),_("Add to favorites")))),p.default.createElement(v.default.Actions,null,p.default.createElement(g.default,{className:"ist_button",onClick:S},_("Cancel")),p.default.createElement(g.default,{type:"submit",disabled:!M,className:"ist_button ist_button_red"},P?_("Add"):_("Save")))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("@doist/reactist/lib/Tooltip")),y=e("../../models/Colors"),v=n(e("../reactist/modal")),g=n(e("../Button")),b=n(e("../color_dropdown_select")),w=e("../icons"),E=e("../form_helpers"),j=n(e("../switch")),O=120;f.propTypes={project:m.default.object,parentId:m.default.number,childOrder:m.default.number,onProjectCreate:m.default.func,onProjectUpdate:m.default.func,onModalClose:m.default.func.isRequired};var S=f;r.default=S},{"../../models/Colors":149,"../Button":648,"../color_dropdown_select":678,"../form_helpers":760,"../icons":842,"../reactist/modal":971,"../switch":1069,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],714:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"showAddProjectModal",{enumerable:!0,get:function(){return n.showAddProjectModal}}),Object.defineProperty(r,"showEditProjectModal",{enumerable:!0,get:function(){return o.showEditProjectModal}});var n=e("./showAddProjectModal"),o=e("./showEditProjectModal")},{"./showAddProjectModal":715,"./showEditProjectModal":716}],715:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(null==e)return{};var r,n,o=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=t.anchorProjectId,n=t.addAbove,o=(0,m.projectGetByID)(e,r);if(!o){var a=n?(0,v.projectGetMinTopLevelChildOrder)(e):(0,v.projectGetMaxTopLevelChildOrder)(e)+1;return{project:b,parentId:void 0,childOrder:a}}var l=i({},b,{color:o.color}),s=(0,v.projectGetChildren)(r,e);return!n&&s.length>0?{project:l,parentId:r,childOrder:s[0].child_order}:{project:l,parentId:o.parent_id,childOrder:o.child_order+(n?0:1)}}function u(e){return{onProjectCreate:function(t){var r=t.parentId,n=t.childOrder,a=o(t,["parentId","childOrder"]),l=e((0,m.projectAdd)(i({parent_id:r,child_order:n},a)));Signals.sendSignal("refresh_interface"),e((0,g.showProjectView)([l.id],{bottomListSelected:!0}))}}}function c(e){var t=e.anchorProjectId,r=e.addAbove,n=void 0!==r&&r;(0,h.openModal)(function(e){return d.default.createElement(f.Provider,{store:p.default},d.default.createElement(w,{isOpen:!0,anchorProjectId:t,addAbove:n,onModalClose:e}))})}Object.defineProperty(r,"__esModule",{value:!0}),r.showAddProjectModal=c;var d=n(e("react")),f=e("react-redux"),p=n(e("../../stores/store")),m=e("../../reducers/projects"),h=e("../reactist/modal"),_=e("../../models/Colors"),y=n(e("./EditProjectModal")),v=e("../../reducers/projects/selectors"),g=e("../../reducers/mainView"),b={name:"",color:_.DEFAULT_COLOR},w=(0,f.connect)(s,u)(y.default)},{"../../models/Colors":149,"../../reducers/mainView":1109,"../../reducers/projects":1119,"../../reducers/projects/selectors":1121,"../../stores/store":1140,"../reactist/modal":971,"./EditProjectModal":713,react:"react","react-redux":"react-redux"}],716:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=t.projectId;return{project:(0,c.projectGetByID)(e,r)}}function a(e,t){var r=t.projectId;return{onProjectUpdate:function(t){e((0,c.projectUpdate)(r,t)),Signals.sendSignal("refresh_interface")}}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.projectId;(0,d.openModal)(function(e){return l.default.createElement(s.Provider,{store:u.default},l.default.createElement(p,{isOpen:!0,projectId:t,onModalClose:e}))})}Object.defineProperty(r,"__esModule",{value:!0}),r.showEditProjectModal=i;var l=n(e("react")),s=e("react-redux"),u=n(e("../../stores/store")),c=e("../../reducers/projects"),d=e("../reactist/modal"),f=n(e("./EditProjectModal")),p=(0,s.connect)(o,a)(f.default)},{"../../reducers/projects":1119,"../../stores/store":1140,"../reactist/modal":971,"./EditProjectModal":713,react:"react","react-redux":"react-redux"}],717:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=e("react-redux"),h=n(e("prop-types")),_=n(e("classnames")),y=n(e("../../stores/store")),v=n(e("./EmptyStateFooter")),g=function(e){function t(e){var r;return a(this,t),r=s(this,u(t).call(this,e)),r.emptyState=p.default.createRef(),r.footer=p.default.createRef(),r.state={offsetBottom:null,style:{opacity:e.shouldFadeIn?0:1}},r.setFooterPosition=r.setFooterPosition.bind(c(r)),r.setPosition=r.setPosition.bind(c(r)),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.positionTimeout=setTimeout(function(){var t=e.footer.current;e.props.isWindowCentered||e.props.isStickyFooterForced?t&&(t.style.position="absolute",e.props.isWindowCentered||(Signals.connect("refresh_interface",e.setFooterPosition),e.setFooterPosition())):t&&(t.style.visibility="visible"),e.props.isWindowCentered&&(Signals.connect("refresh_interface",e.setPosition),e.setPosition()),e.setState({style:{opacity:1}})},0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.positionTimeout),Signals.disconnect("refresh_interface",this.setPosition)}},{key:"setFooterPosition",value:function(){var e=this.footer.current;if(e){var t=$winSize().h-(this.emptyState.current.offsetTop+this.emptyState.current.offsetHeight)-24
;t<e.offsetHeight&&(t=e.offsetHeight+20),e.style.bottom="".concat(-t,"px"),e.style.marginLeft="".concat(-e.offsetWidth/2,"px"),e.style.left="50%",e.style.visibility="visible"}}},{key:"setPosition",value:function(){var e=this.emptyState.current,t=.4*$winSize().h-.4*e.offsetHeight;e.style.marginTop=0;var r=t-e.offsetTop;e.style.marginTop=r<0?0:"".concat(r,"px"),this.setFooterPosition()}},{key:"render",value:function(){var e=this,t=(0,_.default)("empty-state",this.props.className);return p.default.createElement(m.Provider,{store:y.default},p.default.createElement("div",{ref:this.emptyState,className:t,style:this.state.style},p.default.Children.map(this.props.children,function(t){return t&&t.type===v.default?p.default.cloneElement(t,{forwardRef:e.footer}):t})))}}]),t}(p.default.PureComponent);g.propTypes={className:h.default.string,isWindowCentered:h.default.bool,isStickyFooterForced:h.default.bool,shouldFadeIn:h.default.bool,children:h.default.node},g.defaultProps={isWindowCentered:!0,isStickyFooterForced:!1,shouldFadeIn:!0};var b=g;r.default=b},{"../../stores/store":1140,"./EmptyStateFooter":720,classnames:"classnames","prop-types":"prop-types",react:"react","react-redux":"react-redux"}],718:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"empty-state-body"},this.props.children)}}]),t}(p.default.PureComponent);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(h,"propTypes",{children:m.default.node});var _=h;r.default=_},{"prop-types":"prop-types",react:"react"}],719:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.onClick;return p.default.createElement("button",{className:"empty-state-button",onClick:r},t)}}]),t}(p.default.PureComponent);h.propTypes={onClick:m.default.func,children:m.default.node},h.defaultProps={onClick:function(){}};var _=h;r.default=_},{"prop-types":"prop-types",react:"react"}],720:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.children,r=e.forwardRef,n=e.link;return a.default.createElement("a",{className:"empty-state-footer",ref:r,href:n,rel:"noopener noreferrer",target:"_blank"},a.default.createElement(l.default,null),a.default.createElement("span",null,t))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("./icons/HelpIcon"));o.propTypes={forwardRef:i.default.object,link:i.default.string,children:i.default.node},o.propTypes={forwardRef:function(){}};var s=o;r.default=s},{"./icons/HelpIcon":729,"prop-types":"prop-types",react:"react"}],721:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"empty-state-header"},this.props.children)}}]),t}(p.default.PureComponent);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(h,"propTypes",{children:m.default.node});var _=h;r.default=_},{"prop-types":"prop-types",react:"react"}],722:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("../../../components/themes/Themes")),_=function(e){function t(e){var r;return a(this,t),r=s(this,u(t).call(this,e)),r.handleThemeChange=r.handleThemeChange.bind(c(r)),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){Signals.connect("theme_changed",this.handleThemeChange)}},{key:"componentWillUnmount",value:function(){Signals.disconnect("theme_changed",this.handleThemeChange)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"handleThemeChange",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=h.default.theme_id_to_name[this.props.theme]||"todoist";return p.default.createElement("div",{className:"empty-state-illustration",dangerouslySetInnerHTML:{__html:svgs.getString("theme_".concat(e,"/").concat(this.props.path))}})}}]),t}(p.default.Component);_.propTypes={path:m.default.string.isRequired,theme:m.default.number};var y=_;r.default=y},{"../../../components/themes/Themes":95,"prop-types":"prop-types",react:"react"}],723:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./EmptyStateIllustration")),a=function(e){return{theme:e.user.theme}},i=(0,n.connect)(a)(o.default);r.default=i},{"./EmptyStateIllustration":722,"react-redux":"react-redux"}],724:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./container")),o=n.default;r.default=o},{"./container":723}],725:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.link,n=e.onClick;return p.default.createElement("a",{href:r,className:"empty-state-link",onClick:n},t)}}]),t}(p.default.PureComponent);h.propTypes={link:m.default.string,onClick:m.default.func,children:m.default.node},h.defaultProps={link:"#",onClick:function(){}};var _=h;r.default=_},{"prop-types":"prop-types",react:"react"}],726:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("@doist/reactist/lib/Tooltip")),_=n(e("./icons/BulbIcon")),y=n(e("./EmptyStateTooltipContent")),v=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.tips;return p.default.createElement(h.default,{wrapperClassName:"empty-state-tooltip",tooltipClassName:"empty-state-tooltip-content",delayShow:0,position:"top",text:p.default.createElement(y.default,{label:t,tips:r}),gapSize:14},p.default.createElement("span",{className:"empty-state-tooltip-label"},p.default.createElement(_.default,null),p.default.createElement("span",null,t)))}}]),t}(p.default.PureComponent);v.propTypes={tips:m.default.arrayOf(m.default.string),children:m.default.node},y.default.defaultProps={tips:[]};var g=v;r.default=g},{"./EmptyStateTooltipContent":727,"./icons/BulbIcon":728,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],727:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("./icons/BulbIcon")),_=n(e("./icons/TickIcon")),y=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.label,r=e.tips;return p.default.createElement("div",null,p.default.createElement("span",{className:"empty-state-tooltip-header"},p.default.createElement(h.default,null),t),p.default.createElement("ul",{className:"empty-state-tooltip-tips"},r.map(function(e,t){return p.default.createElement("li",{key:t,className:"empty-state-tooltip-tip"},p.default.createElement(_.default,null),p.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}}))})))}}]),t}(p.default.PureComponent);y.propTypes={label:m.default.string.isRequired,tips:m.default.arrayOf(m.default.string)},y.defaultProps={tips:[]};var v=y;r.default=v},{"./icons/BulbIcon":728,"./icons/TickIcon":730,"prop-types":"prop-types",react:"react"}],728:[function(e,t,r){"use strict";function n(){var e=(0,a.UUID)(),t=(0,a.UUID)();return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("defs",null,o.default.createElement("path",{d:"M10.08 16h3.84c.85-2.15 2.58-3.17 2.58-5.5C16.5 8 14.5 6 12 6s-4.5 2-4.5 4.5c0 2.33 1.73 3.35 2.58 5.5zm3.57 1h-3.3l.37 1.84c.02.1.1.16.2.16h2.17a.2.2 0 0 0 .2-.16l.36-1.84zm-5.46-2.32l-.42-.62c-.88-1.29-1.27-2.24-1.27-3.56C6.5 7.45 8.95 5 12 5s5.5 2.45 5.5 5.5c0 1.32-.4 2.27-1.27 3.56l-.42.62c-.59.85-.9 1.4-1.08 2.02l-.47 2.34c-.1.56-.6.96-1.17.96H10.9a1.2 1.2 0 0 1-1.17-.96l-.46-2.3a7.23 7.23 0 0 0-1.09-2.06zm13.24-.82a.5.5 0 1 1-.38.93l-1.85-.77a.5.5 0 0 1 .38-.92l1.85.76zM19.58 7.9a.5.5 0 0 1-.38-.92l1.85-.77a.5.5 0 1 1 .38.93l-1.85.76zm-4.06-4.6a.5.5 0 0 1-.92-.38l.76-1.85a.5.5 0 1 1 .93.38l-.77 1.85zM9.4 2.92a.5.5 0 0 1-.92.38L7.7 1.45a.5.5 0 1 1 .93-.38l.76 1.85zM4.8 6.98a.5.5 0 0 1-.38.92l-1.85-.76a.5.5 0 1 1 .38-.93l1.85.77zm-1.85 7.8a.5.5 0 0 1-.38-.92l1.85-.76a.5.5 0 0 1 .38.92l-1.85.77z",id:e})),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{d:"M0 0h24v24H0z"}),o.default.createElement("mask",{id:t,fill:"#fff"},o.default.createElement("use",{xlinkHref:"#".concat(e)})),o.default.createElement("g",{mask:"url(#".concat(t,")"),fill:"#FF9233"},o.default.createElement("path",{d:"M0 0h24.12v24.12H0z"}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=e("../../../components/misc/Util")},{"../../../components/misc/Util":43,react:"react"}],729:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"17",height:"17"},o.default.createElement("path",{d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm-.1-2.5c-.46 0-.8-.35-.8-.85s.34-.86.8-.86c.48 0 .8.36.8.86s-.32.85-.8.85zM5.5 5.87c.06-1.32.9-2.37 2.53-2.37 1.47 0 2.47.95 2.47 2.21 0 .96-.47 1.64-1.22 2.11-.73.46-.94.8-.94 1.45v.4H7.32V9.1c0-.8.37-1.36 1.16-1.86.68-.43.94-.82.94-1.47 0-.76-.56-1.32-1.43-1.32-.87 0-1.43.55-1.5 1.42H5.5z",id:"tick-a"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],730:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("path",{d:"M7.35 12.15a.5.5 0 0 0-.7.7l3 3c.2.2.5.2.7 0l7-7a.5.5 0 1 0-.7-.7L10 14.79l-2.65-2.64z",fill:"#000",fillRule:"nonzero",fillOpacity:".54"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],731:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"EmptyStateFilterIncorrect",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"EmptyStateFilter",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"EmptyStateInboxNew",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"EmptyStateInboxZero",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"EmptyStateLabelNew",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"EmptyStateLabelZero",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"EmptyStateNext7Days",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"EmptyStateNotifications",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"EmptyStateProductivity",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"EmptyStateProjectCelebration",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"EmptyStateProjectComments",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"EmptyStateProjectNew",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"EmptyStateProjectZero",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"EmptyStateSearchResults",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"EmptyStateSharing",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"EmptyStateTaskComments",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"EmptyStateTodayDayOff",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"EmptyStateTodayDefault",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(r,"EmptyStateTodayNew",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"EmptyStateTodayVacation",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"EmptyStateTodayZero",{enumerable:!0,get:function(){return O.default}});var o=n(e("./states/FilterIncorrect")),a=n(e("./states/Filter")),i=n(e("./states/InboxNew")),l=n(e("./states/InboxZero")),s=n(e("./states/LabelNew")),u=n(e("./states/LabelZero")),c=n(e("./states/Next7Days")),d=n(e("./states/Notifications")),f=n(e("./states/Productivity")),p=n(e("./states/ProjectCelebration")),m=n(e("./states/ProjectComments")),h=n(e("./states/ProjectNew")),_=n(e("./states/ProjectZero")),y=n(e("./states/SearchResults")),v=n(e("./states/Sharing")),g=n(e("./states/TaskComments")),b=n(e("./states/TodayDayOff")),w=n(e("./states/TodayDefault")),E=n(e("./states/TodayNew")),j=n(e("./states/TodayVacation")),O=n(e("./states/TodayZero"))},{"./states/Filter":732,"./states/FilterIncorrect":733,"./states/InboxNew":734,"./states/InboxZero":735,"./states/LabelNew":736,"./states/LabelZero":737,"./states/Next7Days":738,"./states/Notifications":739,"./states/Productivity":740,"./states/ProjectCelebration":741,"./states/ProjectComments":742,"./states/ProjectNew":743,"./states/ProjectZero":744,"./states/SearchResults":745,"./states/Sharing":746,"./states/TaskComments":747,"./states/TodayDayOff":748,"./states/TodayDefault":749,"./states/TodayNew":750,"./states/TodayVacation":751,"./states/TodayZero":754}],732:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=(0,i.useSelector)(p.default);return a.default.createElement(l.default,null,a.default.createElement(d.default,{path:"filter.svg"}),a.default.createElement(c.default,null,_("No tasks in this filter at the moment")),e?a.default.createElement(a.default.Fragment,null,a.default.createElement(u.default,null,_("Create custom task views filtered by priority, label, due date, and more.")),a.default.createElement(f.default,{tips:m},_("How can I use filters?"))):null,a.default.createElement(s.default,{link:"https://support.todoist.com/hc/articles/360000031059"},_("How to best use filters")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=e("react-redux"),l=n(e("../EmptyState")),s=n(e("../EmptyStateFooter")),u=n(e("../EmptyStateBody")),c=n(e("../EmptyStateHeader")),d=n(e("../EmptyStateIllustration")),f=n(e("../EmptyStateTooltip")),p=n(e("./showOnboardingInfo")),m=[_("See today's highest priority tasks using <b>Today & P1</b>."),_("View unscheduled tasks using <b>No date</b>."),_("Preview the month ahead using <b>30 days</b>."),_("Review every task <b>Assigned to:me</b>.")]},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"../EmptyStateTooltip":726,"./showOnboardingInfo":755,react:"react","react-redux":"react-redux"}],733:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.query,r=e.symbol,n=e.onButtonClick,o=[_("See all your tasks for the month ahead (query: <b>30 days</b>)"),_("Focus on the most important things you need to do today (query: <b>today & p1</b>)"),_("View tasks that are waiting on something else for them to be completed (query: <b>@pending</b>)")],i=r?_("That filter query isn't quite right:"):_("Sorry, Todoist couldn't understand that filter query.");return a.default.createElement(s.default,null,a.default.createElement(p.default,{path:"incorrect_filter_query.svg"}),a.default.createElement(f.default,null,i),r&&a.default.createElement(u.default,null,(0,l.default)(_('Todoist didn\'t recognize "{string}" in "{query}".'),{query:t,string:r})),a.default.createElement(c.default,{onClick:n},_("Edit Query")),a.default.createElement(m.default,{tips:o},_("Filter examples")),a.default.createElement(d.default,{link:"https://support.todoist.com/hc/articles/205248842"},_("How to create filters")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../../../utils/format")),s=n(e("../EmptyState")),u=n(e("../EmptyStateBody")),c=n(e("../EmptyStateButton")),d=n(e("../EmptyStateFooter")),f=n(e("../EmptyStateHeader")),p=n(e("../EmptyStateIllustration")),m=n(e("../EmptyStateTooltip"));o.propTypes={query:i.default.string,symbol:i.default.string,onButtonClick:i.default.func},o.defaultProps={onButtonClick:function(){}};var h=o;r.default=h},{"../../../utils/format":1162,"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateButton":719,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"../EmptyStateTooltip":726,"prop-types":"prop-types",react:"react"}],734:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("../../../stores/store")),y=n(e("../EmptyState")),v=n(e("../EmptyStateBody")),g=n(e("../EmptyStateButton")),b=n(e("../EmptyStateFooter")),w=n(e("../EmptyStateHeader")),E=n(e("../EmptyStateIllustration")),j=e("../../../reducers/tooltip"),O=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"componentDidMount",value:function(){h.default.dispatch((0,j.markSeen)(j.TOOLTIP_EMPTY_STATE_INBOX))}},{key:"render",value:function(){return p.default.createElement(y.default,null,p.default.createElement(E.default,{path:"inbox_new.svg"}),p.default.createElement(w.default,null,_("Declutter your mind")),p.default.createElement(v.default,null,_("Not sure where to organize a new task? Add it to your Inbox and come back to it later.")),p.default.createElement(g.default,{onClick:this.props.onButtonClick},_("Add a task")),p.default.createElement(b.default,{link:"https://support.todoist.com/hc/articles/360000028960"},_("How to best use the Inbox")))}}]),t}(p.default.PureComponent);O.propTypes={onButtonClick:m.default.func},O.defaultProps={onButtonClick:function(){}};var S=O;r.default=S},{"../../../reducers/tooltip":1133,"../../../stores/store":1140,"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateButton":719,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"prop-types":"prop-types",react:"react"}],735:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.createElement(l.default,null,a.default.createElement(f.default,{path:"inbox_zero.svg"}),a.default.createElement(d.default,null,_("All clear")),a.default.createElement(s.default,null,_("Looks like everything's organized in the right place.")),a.default.createElement(u.default,{onClick:e.onButtonClick},_("Add a task")),a.default.createElement(c.default,{link:"https://support.todoist.com/hc/articles/360000028960"},_("How to best use the Inbox")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../EmptyState")),s=n(e("../EmptyStateBody")),u=n(e("../EmptyStateButton")),c=n(e("../EmptyStateFooter")),d=n(e("../EmptyStateHeader")),f=n(e("../EmptyStateIllustration"));o.propTypes={onButtonClick:i.default.func},o.defaultProps={onButtonClick:function(){}};var p=o;r.default=p},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateButton":719,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"prop-types":"prop-types",react:"react"}],736:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=[_("Focus on <b>@work</b> tasks only."),_("See your most <b>@important</b> tasks."),_("Find out what's <b>@in_progress</b>."),_("Get a quick view of your <b>@errand</b> tasks.")];return a.default.createElement(i.default,null,a.default.createElement(c.default,{path:"label.svg"}),a.default.createElement(u.default,null,_("No tasks with this label at the moment")),a.default.createElement(l.default,null,_("Categorize your tasks with labels so you can focus on the right tasks at the right time.")),a.default.createElement(d.default,{tips:e},_("How can I use labels?")),a.default.createElement(s.default,{link:"https://support.todoist.com/hc/articles/360000029000"},_("How to best use labels")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("../EmptyState")),l=n(e("../EmptyStateBody")),s=n(e("../EmptyStateFooter")),u=n(e("../EmptyStateHeader")),c=n(e("../EmptyStateIllustration")),d=n(e("../EmptyStateTooltip"))},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"../EmptyStateTooltip":726,react:"react"}],737:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return a.default.createElement(i.default,null,a.default.createElement(u.default,{path:"label.svg"}),a.default.createElement(s.default,null,_("No tasks with this label at the moment")),a.default.createElement(l.default,{link:"https://support.todoist.com/hc/articles/360000029000"},_("How to best use labels")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("../EmptyState")),l=n(e("../EmptyStateFooter")),s=n(e("../EmptyStateHeader")),u=n(e("../EmptyStateIllustration"))},{
"../EmptyState":717,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,react:"react"}],738:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("../../../stores/store")),h=n(e("../EmptyState")),y=n(e("../EmptyStateBody")),v=n(e("../EmptyStateFooter")),g=n(e("../EmptyStateHeader")),b=n(e("../EmptyStateIllustration")),w=e("../../../reducers/tooltip"),E=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"componentDidMount",value:function(){m.default.dispatch((0,w.markSeen)(w.TOOLTIP_EMPTY_STATE_NEXT_7DAYS))}},{key:"render",value:function(){return p.default.createElement(h.default,{className:"empty-state-7days",isWindowCentered:!1},p.default.createElement(b.default,{path:"next7_days.svg"}),p.default.createElement(g.default,null,_("Get a bird's eye view of your week")),p.default.createElement(y.default,null,_("This is your timeline for the next 7 days. You can drag and drop tasks between days to change their due date.")),p.default.createElement(v.default,{link:"https://support.todoist.com/hc/articles/360000031019"},_("How to plan your week")))}}]),t}(p.default.PureComponent);r.default=E},{"../../../reducers/tooltip":1133,"../../../stores/store":1140,"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,react:"react"}],739:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return a.default.createElement(i.default,{isWindowCentered:!1},a.default.createElement(c.default,{path:"notifications.svg"}),a.default.createElement(u.default,null,_("Stay up-to-date")),a.default.createElement(l.default,null,_("Get notified here about changes in your shared projects.")),a.default.createElement(s.default,{link:"https://support.todoist.com/hc/articles/360000269065"},_("Learn about notifications")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("../EmptyState")),l=n(e("../EmptyStateBody")),s=n(e("../EmptyStateFooter")),u=n(e("../EmptyStateHeader")),c=n(e("../EmptyStateIllustration"))},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,react:"react"}],740:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.createElement(l.default,{className:"empty-state-productivity",isWindowCentered:!1},a.default.createElement(f.default,{path:"productivity.svg"}),a.default.createElement(d.default,null,_("See tangible progress")),a.default.createElement(s.default,null,_("Set daily and weekly goals, review your productivity trends, and watch your Karma points grow.")),a.default.createElement(u.default,{onClick:e.onButtonClick},_("Set your goals")),a.default.createElement(c.default,{link:"https://support.todoist.com/hc/articles/206209959"},_("Learn about Karma")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../EmptyState")),s=n(e("../EmptyStateBody")),u=n(e("../EmptyStateButton")),c=n(e("../EmptyStateFooter")),d=n(e("../EmptyStateHeader")),f=n(e("../EmptyStateIllustration"));o.propTypes={onButtonClick:i.default.func},o.defaultProps={onButtonClick:function(){}};var p=o;r.default=p},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateButton":719,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"prop-types":"prop-types",react:"react"}],741:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.onButtonClick,r=e.onLinkClick;return a.default.createElement(l.default,null,a.default.createElement(d.default,{path:"project_celebration.svg"}),a.default.createElement(c.default,null,_("Nothing left to do in this project")),a.default.createElement(s.default,null,_("Nice work!")),a.default.createElement(u.default,{onClick:t},_("Add a task")),a.default.createElement(f.default,{onClick:r},_("Archive project")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../EmptyState")),s=n(e("../EmptyStateBody")),u=n(e("../EmptyStateButton")),c=n(e("../EmptyStateHeader")),d=n(e("../EmptyStateIllustration")),f=n(e("../EmptyStateLink"));o.propTypes={onButtonClick:i.default.func,onLinkClick:i.default.func},o.defaultProps={onButtonClick:function(){},onLinkClick:function(){}};var p=o;r.default=p},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateButton":719,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"../EmptyStateLink":725,"prop-types":"prop-types",react:"react"}],742:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return a.default.createElement(i.default,{isWindowCentered:!1},a.default.createElement(s.default,{path:"project_comments.svg"}),a.default.createElement(l.default,null,_("Keep high-level information organized in one place with project comments.")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("../EmptyState")),l=n(e("../EmptyStateBody")),s=n(e("../EmptyStateIllustration"))},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateIllustration":724,react:"react"}],743:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=[_("Separate work tasks from personal ones."),_("Create a step-by-step plan toward a goal."),_("Collaborate with teammates."),_("Share a to-do list with a loved one."),_("Save things to read or watch later.")];return a.default.createElement(i.default,{className:"empty-state-project-new"},a.default.createElement(c.default,{path:"project_new.svg"}),a.default.createElement(u.default,null,_("Keep your tasks organized in projects")),a.default.createElement(l.default,null,_("Group your tasks by goal or area of your life. Drag and drop to rearrange tasks or create sub-tasks.")),a.default.createElement(d.default,{tips:e},_("How can I use projects?")),a.default.createElement(s.default,{link:"https://support.todoist.com/hc/articles/360000031039"},_("How to best use projects")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("../EmptyState")),l=n(e("../EmptyStateBody")),s=n(e("../EmptyStateFooter")),u=n(e("../EmptyStateHeader")),c=n(e("../EmptyStateIllustration")),d=n(e("../EmptyStateTooltip"))},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"../EmptyStateTooltip":726,react:"react"}],744:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.createElement(l.default,null,a.default.createElement(d.default,{path:"project_zero.svg"}),a.default.createElement(c.default,null,_("What will you accomplish?")),a.default.createElement(s.default,{onClick:e.onButtonClick},_("Add a task")),a.default.createElement(u.default,{link:"https://support.todoist.com/hc/articles/360000031039"},_("How to best use projects")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../EmptyState")),s=n(e("../EmptyStateButton")),u=n(e("../EmptyStateFooter")),c=n(e("../EmptyStateHeader")),d=n(e("../EmptyStateIllustration/"));o.propTypes={onButtonClick:i.default.func},o.defaultProps={onButtonClick:function(){}};var f=o;r.default=f},{"../EmptyState":717,"../EmptyStateButton":719,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration/":724,"prop-types":"prop-types",react:"react"}],745:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.headerText,r=e.onButtonClick,n=e.shouldFadeIn,o=e.withAction,i=[_("<b>date</b> to find all tasks with that due date"),_("<b>p1</b> to find all tasks with priority 1"),_("<b>@label</b> to find all tasks with that label")];return a.default.createElement(l.default,{className:"empty-state-search",isWindowCentered:!1,shouldFadeIn:n,isStickyFooterForced:!0},a.default.createElement(d.default,{path:"search_results.svg"}),a.default.createElement(c.default,null,t),o&&a.default.createElement(s.default,{onClick:r},_("Search completed tasks")),a.default.createElement(f.default,{tips:i},_("Refine your search with queries")),a.default.createElement(u.default,{link:"https://support.todoist.com/hc/articles/360000394949"},_("How to best use search")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../EmptyState")),s=n(e("../EmptyStateButton")),u=n(e("../EmptyStateFooter")),c=n(e("../EmptyStateHeader")),d=n(e("../EmptyStateIllustration")),f=n(e("../EmptyStateTooltip"));o.propTypes={headerText:i.default.string.isRequired,withAction:i.default.bool,shouldFadeIn:i.default.bool,onButtonClick:i.default.func},o.defaultProps={withAction:!0,shouldFadeIn:!0,onButtonClick:function(){}};var p=o;r.default=p},{"../EmptyState":717,"../EmptyStateButton":719,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"../EmptyStateTooltip":726,"prop-types":"prop-types",react:"react"}],746:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return a.default.createElement(i.default,{isWindowCentered:!1},a.default.createElement(c.default,{path:"sharing.svg"}),a.default.createElement(u.default,null,_("Organize work together")),a.default.createElement(l.default,null,_("Assign tasks and due dates, discuss details in task comments, and keep everyone on the same page.")),a.default.createElement(s.default,{link:"https://support.todoist.com/hc/articles/360000031079"},_("How to collaborate with others")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("../EmptyState")),l=n(e("../EmptyStateBody")),s=n(e("../EmptyStateFooter")),u=n(e("../EmptyStateHeader")),c=n(e("../EmptyStateIllustration"))},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,react:"react"}],747:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return a.default.createElement(i.default,{isWindowCentered:!1},a.default.createElement(s.default,{path:"task_comments.svg"}),a.default.createElement(l.default,null,_("Add relevant notes, links, files, photos, or anything else here.")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("../EmptyState")),l=n(e("../EmptyStateBody")),s=n(e("../EmptyStateIllustration"))},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateIllustration":724,react:"react"}],748:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return a.default.createElement(i.default,null,a.default.createElement(u.default,{path:"today_off.svg"}),a.default.createElement(s.default,null,_("Enjoy your day off")),a.default.createElement(l.default,{link:"https://support.todoist.com/hc/articles/360000410829#Settings"},_("Learn more about Days Off")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("../EmptyState")),l=n(e("../EmptyStateFooter")),s=n(e("../EmptyStateHeader")),u=n(e("../EmptyStateIllustration"))},{"../EmptyState":717,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,react:"react"}],749:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.createElement(l.default,null,a.default.createElement(d.default,{path:"today.svg"}),a.default.createElement(c.default,null,_("What tasks are on your mind?")),a.default.createElement(s.default,{onClick:e.onButtonClick},_("Add a task")),a.default.createElement(u.default,{link:"https://support.todoist.com/hc/articles/360000030999"},_("How to plan your day")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../EmptyState")),s=n(e("../EmptyStateButton")),u=n(e("../EmptyStateFooter")),c=n(e("../EmptyStateHeader")),d=n(e("../EmptyStateIllustration"));o.propTypes={onButtonClick:i.default.func},o.defaultProps={onButtonClick:function(){}};var f=o;r.default=f},{"../EmptyState":717,"../EmptyStateButton":719,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"prop-types":"prop-types",react:"react"}],750:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=[_("Each morning, take a few minutes to clear your mind and plan your day."),_("Decide what you can do today and postpone the rest for later."),_("Set priorities and start with your most important task first.")];return a.default.createElement(l.default,null,a.default.createElement(f.default,{path:"today_new.svg"}),a.default.createElement(d.default,null,_("Get a clear view of the day ahead")),a.default.createElement(s.default,null,_("All your tasks that are due today will show up here.")),a.default.createElement(u.default,{onClick:e.onButtonClick},_("Add a task")),a.default.createElement(p.default,{tips:t},_("Establish a daily habit")),a.default.createElement(c.default,{link:"https://support.todoist.com/hc/articles/360000030999"},_("How to plan your day")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../EmptyState")),s=n(e("../EmptyStateBody")),u=n(e("../EmptyStateButton")),c=n(e("../EmptyStateFooter")),d=n(e("../EmptyStateHeader")),f=n(e("../EmptyStateIllustration")),p=n(e("../EmptyStateTooltip"));o.propTypes={onButtonClick:i.default.func},o.defaultProps={onButtonClick:function(){}};var m=o;r.default=m},{"../EmptyState":717,"../EmptyStateBody":718,"../EmptyStateButton":719,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"../EmptyStateTooltip":726,"prop-types":"prop-types",react:"react"}],751:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.createElement(l.default,null,a.default.createElement(c.default,{path:"today_vacation.svg"}),a.default.createElement(u.default,null,_("Enjoy your time away")),a.default.createElement(d.default,{onClick:e.onButtonClick},_("Turn off Vacation Mode")),a.default.createElement(s.default,{link:"https://support.todoist.com/hc/articles/208044525"},_("Learn more about Vacation Mode")))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../EmptyState")),s=n(e("../EmptyStateFooter")),u=n(e("../EmptyStateHeader")),c=n(e("../EmptyStateIllustration")),d=n(e("../EmptyStateLink"));o.propTypes={onButtonClick:i.default.func},o.defaultProps={onButtonClick:function(){}};var f=o;r.default=f},{"../EmptyState":717,"../EmptyStateFooter":720,"../EmptyStateHeader":721,"../EmptyStateIllustration":724,"../EmptyStateLink":725,"prop-types":"prop-types",react:"react"}],752:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t,r,n,o=e.completedTodayCount,i=e.uncompletedSevenDaysCount,d=e.onFacebookClick,f=e.onProductivityClick,p=e.onTwitterClick,m=new Date,h=m.getHours();return t=h>=4&&h<12?_("Enjoy your day."):h>=12&&h<20?_("Enjoy your afternoon."):_("Enjoy your night."),o>=5?(r=t,n=a.default.createElement("span",{onClick:f},_("Today you completed %s tasks and reached #TodoistZero!").replace("%s",o))):(r=0===i?_("You're all done for the week! #TodoistZero"):_("You're all done for today! #TodoistZero"),n=t),a.default.createElement(l.default,null,a.default.createElement(c.default,{path:"today_zero.svg"}),a.default.createElement(s.default,null,r),n&&a.default.createElement(u.default,null,n),a.default.createElement("div",{className:"sharing"},a.default.createElement("span",{className:"sharing-twitter",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/twitter.svg")},onClick:p}),a.default.createElement("span",{className:"sharing-facebook",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/facebook.svg")},onClick:d})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../../EmptyState")),s=n(e("../../EmptyStateHeader")),u=n(e("../../EmptyStateBody")),c=n(e("../../EmptyStateIllustration"));o.propTypes={completedTodayCount:i.default.number,uncompletedSevenDaysCount:i.default.number,onFacebookClick:i.default.func,onProductivityClick:i.default.func,onTwitterClick:i.default.func},o.defaultProps={completedTodayCount:0,uncompletedSevenDaysCount:0,onFacebookClick:function(){},onProductivityClick:function(){},onTwitterClick:function(){}};var d=o;r.default=d},{"../../EmptyState":717,"../../EmptyStateBody":718,"../../EmptyStateHeader":721,"../../EmptyStateIllustration":724,"prop-types":"prop-types",react:"react"}],753:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=e("../../../../reducers/counts"),a=e("../../../../reducers/stats"),i=function(e){return e&&e.__esModule?e:{default:e}}(e("./TodayZero")),l=function(e){return{completedTodayCount:(0,a.completedToday)(e),uncompletedSevenDaysCount:(0,o.countSevenDays)(e)}},s=(0,n.connect)(l)(i.default);r.default=s},{"../../../../reducers/counts":1090,"../../../../reducers/stats":1130,"./TodayZero":752,"react-redux":"react-redux"}],754:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./container")),o=n.default;r.default=o},{"./container":753}],755:[function(e,t,r){"use strict";function n(e){return(0,o.totalCompleted)(e)<20}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("../../../reducers/stats")},{"../../../reducers/stats":1130}],756:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function c(e){if(Array.isArray(e))return e}function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,r=p.default.useState(e),n=l(r,2),o=n[0],a=n[1];return void 0===t?[o,function(){return a(!o)}]:[e,t]}function f(e){var t=e.title,r=e.titleTooltip,n=e.className,i=e.children,s=e.animationProps,u=e.headerSideButton,c=e.track,f=e.initiallyExpanded,m=a(e,["title","titleTooltip","className","children","animationProps","headerSideButton","track","initiallyExpanded"]);void 0===f||void 0===m.isExpanded&&void 0===m.onToggleExpand||(console.warn("[ExpansionPanel]: cannot use initiallyExpanded in controlled mode"),f=void 0);var g=d(m.isExpanded||f,m.onToggleExpand),b=l(g,2),w=b[0],E=b[1],j=(0,h.default)(n,"expansion_panel",{"expansion_panel--expanded":w});return p.default.createElement("div",{className:j},p.default.createElement("header",{className:"expansion_panel__header"},p.default.createElement(_.default,{title:r,"data-track":c,onClick:E,"aria-expanded":w,className:"expansion_panel__toggle"},p.default.createElement("div",{"aria-hidden":"true",className:"expansion_panel__toggle_icon"},p.default.createElement(y.default,null)),t),null!=u?p.default.createElement("aside",null,u):null),p.default.createElement(v.default,o({timeout:"auto"},s,{in:w}),i))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("classnames")),_=n(e("../Button")),y=n(e("../reactist/icon/Arrow")),v=n(e("../reactist/transitions/Collapse"));f.propTypes={title:m.default.node.isRequired,titleTooltip:m.default.string,children:m.default.node.isRequired,className:m.default.string,initiallyExpanded:m.default.bool,isExpanded:m.default.bool,onToggleExpand:m.default.func,animationProps:m.default.object,headerSideButton:m.default.node,track:m.default.string};var g=f;r.default=g},{"../Button":648,"../reactist/icon/Arrow":968,"../reactist/transitions/Collapse":974,classnames:"classnames","prop-types":"prop-types",react:"react"}],757:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./ExpansionPanel")),o=n.default;r.default=o},{"./ExpansionPanel":756}],758:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function u(e,t){return f(e)||d(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function f(e){if(Array.isArray(e))return e}function p(e){var t=e.filterId,r=(0,v.default)(),n=(0,h.useSelector)(function(e){return e}),i=n.filters[t],l=(0,S.useFilterist)(i.query),s=u(l,2),c=s[0];if(s[1])return m.default.createElement("div",{className:"filter_view"},m.default.createElement(O.ViewHeader,{header:i.name}),m.default.createElement(E.EmptyStateFilterIncorrect,null));if(0===(0,j.flatten)(c.map(function(e){return e.items})).length)return m.default.createElement("div",{className:"filter_view"},m.default.createElement(O.ViewHeader,{header:i.name}),m.default.createElement(E.EmptyStateFilter,null));var d=(0,j.flatten)(c.map(function(e){if(e.view===b.VIEW_TYPE_DAY_VIEW_SPAN)return P(e,n);var t=a(e.items);t.sort(I(e,n));var r,o=t.map(function(e){return e.id});return r=e.view===b.VIEW_TYPE_OVERDUE?_("Overdue"):e.view===b.VIEW_TYPE_DAY_VIEW_FIXED?e.day_date:e.name,{header:r,itemIds:o}},[]));return m.default.createElement("div",{className:"filter_view"},m.default.createElement(O.ViewHeader,{header:i.name,largeBottomMargin:d.length>1}),1===d.length?m.default.createElement(g.default,o({},r,{rootItemIds:d[0].itemIds})):d.map(function(e,t){var n=e.header,a=e.itemIds;return m.default.createElement(O.Section,{key:t,header:n},m.default.createElement(g.default,o({},r,{rootItemIds:a})))}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=p;var m=n(e("react")),h=e("react-redux"),y=n(e("prop-types")),v=n(e("../item_list/useRootItemListProps")),g=n(e("../item_list/RootItemList")),b=e("../../filterist/section"),w=e("../../components/agenda/sort"),E=e("../emptyState"),j=e("../../utils"),O=e("../view"),S=e("../hooks");p.propTypes={filterId:y.default.number.isRequired};var P=function(e,t){var r=(0,j.groupBy)(e.items,function(e){return e.due.dateMin().getTime()});return(0,j.keys)(r).sort().map(function(n){var o=a(r[n]);return o.sort(I(e,t)),{header:o[0].due.toDate(),itemIds:o.map(function(e){return e.id})}})},I=function(e,t){switch(e.view){case b.VIEW_TYPE_OVERDUE:return(0,w.createOverdueViewSort)(t);case b.VIEW_TYPE_SEARCH:case b.VIEW_TYPE_FLAT:return(0,w.createFlatListSort)(t);case b.VIEW_TYPE_DAY_VIEW_FIXED:case b.VIEW_TYPE_DAY_VIEW_SPAN:return w.dayViewSortFn}}},{"../../components/agenda/sort":16,"../../filterist/section":124,"../../utils":1176,"../emptyState":731,"../hooks":766,"../item_list/RootItemList":868,"../item_list/useRootItemListProps":872,"../view":1081,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],759:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./FilterView")),o=n.default;r.default=o},{"./FilterView":758}],760:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.id,r=e.show,n=void 0===r||r,o=e.children;return n?d.default.createElement("div",{id:t,className:"form_field_hint"},o):null}function u(e){var t=e.id,r=e.length,n=e.maxLength;return d.default.createElement(s,{id:t,show:n-r<=10},(0,p.format)(_("Character limit: {length}/{maxLength}"),{length:r,maxLength:n}))}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String,n=function(e){return null==e?e:r(e)},a=d.default.useState(n(t)),i=o(a,2),l=i[0],s=i[1];return{name:e,value:l,onChange:function(e){s(n(e.target.value))}}}Object.defineProperty(r,"__esModule",{value:!0}),r.FormFieldHint=s,r.CharacterLengthHint=u,r.useField=c;var d=n(e("react")),f=n(e("prop-types")),p=e("../../utils");s.propTypes={id:f.default.string,show:f.default.bool,children:f.default.node.isRequired},u.propTypes={id:f.default.string,length:f.default.number.isRequired,maxLength:f.default.number.isRequired}},{"../../utils":1176,"prop-types":"prop-types",react:"react"}],761:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(null==e)return{};var r,n,o=l(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(e("react")),u=n(e("prop-types")),c=n(e("../../components/formatter/Formatter")),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,r=e.simple,n=e.opts,a=e.elementType,l=void 0===a?"span":a,u=i(e,["text","simple","opts","elementType"]),d=r?c.default.formatSimple(t,n):c.default.format(t,n),f=o({dangerouslySetInnerHTML:{__html:d}},u);return s.default.createElement(l,f)};d.propTypes={elementType:u.default.string,text:u.default.string};var f=d;r.default=f},{"../../components/formatter/Formatter":22,"prop-types":"prop-types",react:"react"}],762:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("prop-types")),u=n(e("../../components/formatter/Formatter")),c=function(e){var t=e.text,r=a(e,["text"]),n=u.default.formatSimple(t,{only_text:!0,as_html:!0,with_links:!1});return l.default.createElement("span",o({},r,{dangerouslySetInnerHTML:{__html:n}}))};c.propTypes={text:s.default.string};var d=c;r.default=d},{"../../components/formatter/Formatter":22,"prop-types":"prop-types",react:"react"}],763:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0
;var p=n(e("react")),m=n(e("prop-types")),h=n(e("../reactist/TopNotifier")),y=n(e("../productivity_stat/MedalIcon")),v=n(e("../../utils/format")),g=e("../../constants/themes"),b=[_("Well done, {user_name}!"),_("You conquered the day, {user_name}!"),_("Nice work, {user_name}!"),_("Mischief managed.")],w=function(e){var t=(new Date).getDate()%b.length;return(0,v.default)(b[t],{user_name:e})},E=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.open!==e.open}},{key:"header",value:function(){var e=this.props.goal,t=void 0===e?0:e,r=_n("Daily goal completed: {num_completed}/{num_goal} task","Daily goal completed: {num_completed}/{num_goal} tasks",t);return(0,v.default)(r,{num_completed:t,num_goal:t})}},{key:"render",value:function(){var e=this.props,t=e.open,r=void 0!==t&&t,n=e.theme,o=void 0===n?0:n,a=e.userName,i=void 0===a?"":a,l=e.onClick,s=e.onClose,u=(0,g.colorInHex)(o);return o!==g.THEME_SUNFLOWER&&o!==g.THEME_NEUTRAL||(u=(0,g.colorInHex)(g.THEME_NOIR)),o===g.THEME_DARK&&(u=g.DARK_THEME_ICON_COLOR),p.default.createElement(h.default,{open:r,onClose:s,autoHideDuration:6e3,onClick:l},r?p.default.createElement("div",{className:"goal_notifier"},p.default.createElement(y.default,{className:"icon",width:50,color:u}),p.default.createElement("div",{className:"content"},p.default.createElement("h1",null,this.header()),p.default.createElement("p",null,w(i)),p.default.createElement("a",{className:"cta"},_("View Detailed Stats")))):null)}}]),t}(p.default.Component);E.propTypes={theme:m.default.number,userName:m.default.string,goal:m.default.number,onClick:m.default.func,onClose:m.default.func,open:m.default.bool};var j=E;r.default=j},{"../../constants/themes":99,"../../utils/format":1162,"../productivity_stat/MedalIcon":942,"../reactist/TopNotifier":967,"prop-types":"prop-types",react:"react"}],764:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=e("../../utils/fp"),h=n(e("react")),_=n(e("prop-types")),y=e("react-redux"),v=n(e("./DailyGoalNotifier")),g=n(e("./WeeklyGoalNotifier")),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../containers/ProductivityStat")),w=e("../../reducers/stats"),E=e("../../reducers/settings"),j=function(e){return(0,m.get)("days_items.".concat((0,w.today)(),".goal_first_reached_at"),e)},O=function(e){return(0,m.get)("week_items.".concat((0,w.thisWeek)(),".goal_first_reached_at"),e)},S=function(e){function t(e){var r;return a(this,t),r=s(this,u(t).call(this,e)),p(c(r),"onClose",function(){r.setState({openDay:!1,openWeek:!1})}),p(c(r),"handleClick",function(){b.show(),r.setState({openDay:!1,openWeek:!1})}),r.state={openDay:!1,openWeek:!1},r}return d(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=j(e.stats);t&&Date.now()-t.getTime()<1e3&&this.setState({openDay:!0});var r=O(e.stats);r&&Date.now()-r.getTime()<1e3&&this.setState({openWeek:!0})}},{key:"render",value:function(){if(Math.max(document.documentElement.clientWidth,window.innerWidth||0)<700)return null;var e=this.props,t=e.userName,r=e.stats,n=e.theme,o={userName:t,theme:n,open:this.state.openDay,goal:(0,w.dailyGoal)({stats:r}),onClose:this.onClose,onClick:this.handleClick},a={userName:t,theme:n,open:this.state.openWeek,goal:(0,w.weekGoal)({stats:r}),onClose:this.onClose,onClick:this.handleClick};return h.default.createElement(h.default.Fragment,null,h.default.createElement(v.default,o),h.default.createElement(g.default,a))}}]),t}(h.default.Component);p(S,"propTypes",{userName:_.default.string,stats:_.default.object});var P=function(e){return{userName:(0,m.get)("user.full_name",e),theme:(0,E.getTheme)(e),stats:e.stats}},I=(0,y.connect)(P)(S);r.default=I},{"../../containers/ProductivityStat":102,"../../reducers/settings":1129,"../../reducers/stats":1130,"../../utils/fp":1166,"./DailyGoalNotifier":763,"./WeeklyGoalNotifier":765,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],765:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("../reactist/TopNotifier")),y=n(e("../productivity_stat/TrophyIcon")),v=n(e("../../utils/format")),g=e("../../constants/themes"),b=[_("You did it, {user_name}!"),_("Nice work, {user_name}!"),_("Nicely done, {user_name}!"),_("You conquered the week!"),_("Treat yourself. You deserve it, {user_name}!")],w=function(e){var t=(new Date).getDate()%b.length;return(0,v.default)(b[t],{user_name:e})},E=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.open!==e.open}},{key:"header",value:function(){var e=this.props.goal,t=void 0===e?0:e,r=_n("Weekly goal completed: {num_completed}/{num_goal} task","Weekly goal completed: {num_completed}/{num_goal} tasks",t);return(0,v.default)(r,{num_completed:t,num_goal:t})}},{key:"render",value:function(){var e=this.props,t=e.open,r=void 0!==t&&t,n=e.theme,o=void 0===n?0:n,a=e.userName,i=void 0===a?"":a,l=e.onClick,s=e.onClose,u=(0,g.colorInHex)(o);return o!==g.THEME_SUNFLOWER&&o!==g.THEME_NEUTRAL||(u=(0,g.colorInHex)(g.THEME_NOIR)),o===g.THEME_DARK&&(u=g.DARK_THEME_ICON_COLOR),p.default.createElement(h.default,{open:r,onClose:s,autoHideDuration:6e3,onClick:l},r?p.default.createElement("div",{className:"goal_notifier"},p.default.createElement(y.default,{className:"icon",width:50,color:u}),p.default.createElement("div",{className:"content"},p.default.createElement("h1",null,this.header()),p.default.createElement("p",null,w(i)),p.default.createElement("a",{className:"cta"},_("View Detailed Stats")))):null)}}]),t}(p.default.Component);E.propTypes={theme:m.default.number,userName:m.default.string,goal:m.default.number,open:m.default.bool,onClick:m.default.func,onClose:m.default.func};var j=E;r.default=j},{"../../constants/themes":99,"../../utils/format":1162,"../productivity_stat/TrophyIcon":946,"../reactist/TopNotifier":967,"prop-types":"prop-types",react:"react"}],766:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useCombinedRefs",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"usePrevious",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"useUpdateEffect",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"useLocalStorageState",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"useMenu",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"useFilterist",{enumerable:!0,get:function(){return u.default}});var o=n(e("./useCombinedRefs")),a=n(e("./usePrevious")),i=n(e("./useUpdateEffect")),l=n(e("./useLocalStorageState")),s=n(e("./useMenu")),u=n(e("./useFilterist"))},{"./useCombinedRefs":767,"./useFilterist":768,"./useLocalStorageState":769,"./useMenu":770,"./usePrevious":771,"./useUpdateEffect":772}],767:[function(e,t,r){"use strict";function n(e,t){t&&("function"==typeof t?t(e):t.current=e)}function o(e,t){return a.default.useCallback(function(r){n(r,e),n(r,t)},[e,t])}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),i=o;r.default=i},{react:"react"}],768:[function(e,t,r){"use strict";function n(e){var t=(0,a.useSelector)(function(e){return e});try{return[o.default.filter(e,t),null]}catch(e){return[null,e]}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../../filterist")),a=e("react-redux")},{"../../filterist":121,"react-redux":"react-redux"}],769:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e){var t=localStorage.getItem(e);try{return"string"==typeof t?JSON.parse(t):void 0}catch(e){return}}function s(e,t){var r=(0,u.useState)(l(e)||t),o=n(r,2),a=o[0],i=o[1];return(0,u.useEffect)(function(){void 0===a||a===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(a))},[e,a,t]),[a,i]}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=e("react"),c=s;r.default=c},{react:"react"}],770:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(){function e(){a(null),c(null)}var t=s.default.useState(null),r=n(t,2),o=r[0],a=r[1],i=s.default.useState(null),l=n(i,2),u=l[0],c=l[1];return{props:{anchor:o,mouseEvent:u,onHide:e},show:null!=o||null!=u,openOnAnchor:function(e){e.stopPropagation(),a(e.currentTarget),c(null)},openOnContext:function(e){if(e.shiftKey)return!0;e.preventDefault(),e.persist(),c(e),a(e.currentTarget)},hideOnAction:function(t){return function(){t.apply(void 0,arguments),e()}},hide:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),u=l;r.default=u},{react:"react"}],771:[function(e,t,r){"use strict";function n(e){var t=(0,o.useRef)();return(0,o.useEffect)(function(){t.current=e},[e]),t.current}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("react")},{react:"react"}],772:[function(e,t,r){"use strict";function n(e,t){null!=t&&0===t.length&&console.warn("useUpdateEffect running only on component mount will never be actually run. You should either add some meaningful dependencies to this effect or remove it altogether.");var r=o.default.useRef(!1);o.default.useEffect(function(){return r.current?e():void(r.current=!0)},t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],773:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("path",{fill:"currentColor",d:"M9 6.74L6.35 9.4a.5.5 0 0 1-.7-.7l3.53-3.54a.5.5 0 0 1 .7 0l3.55 3.53a.5.5 0 0 1-.71.7L10 6.69V18.5a.5.5 0 1 1-1 0V6.74zM17 15h2.5a.5.5 0 1 1 0 1H17v2.5a.5.5 0 1 1-1 0V16h-2.5a.5.5 0 1 1 0-1H16v-2.5a.5.5 0 1 1 1 0V15z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],774:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("path",{fill:"currentColor",d:"M9 17.26L6.35 14.6a.5.5 0 0 0-.7.7l3.53 3.54a.5.5 0 0 0 .7 0l3.55-3.53a.5.5 0 0 0-.71-.7L10 17.31V5.5a.5.5 0 1 0-1 0v11.76zM17 9h2.5a.5.5 0 1 0 0-1H17V5.5a.5.5 0 1 0-1 0V8h-2.5a.5.5 0 1 0 0 1H16v2.5a.5.5 0 1 0 1 0V9z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],775:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},o.default.createElement("path",{fill:"currentColor",d:"M9 11V9a.5.5 0 0 1 1 0v2h2a.5.5 0 1 1 0 1h-2v2a.5.5 0 1 1-1 0v-2H7a.5.5 0 1 1 0-1h2zM4.5 21a.5.5 0 1 1 0-1h15a.5.5 0 1 1 0 1h-15zM6 6h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H6zM4.5 4a.5.5 0 0 1 0-1h15a.5.5 0 1 1 0 1h-15z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],776:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("path",{fill:"currentColor",d:"M11.67 17l-1-2.82H6.76L5.76 17H4.47l3.64-9.86h1.22L12.96 17h-1.29zm-3-8.27l-1.55 4.4h3.2l-1.55-4.4h-.1zm7.97 7.37c1.21 0 2.1-.8 2.1-1.85v-.68l-1.97.13c-1.12.08-1.62.47-1.62 1.2 0 .76.64 1.2 1.5 1.2zm-.22 1.03c-1.42 0-2.48-.85-2.48-2.2 0-1.31.97-2.07 2.68-2.17l2.13-.14v-.67c0-.9-.57-1.4-1.67-1.4-.88 0-1.5.33-1.66.91h-1.2c.17-1.18 1.33-1.96 2.9-1.96 1.8 0 2.8.92 2.8 2.45V17H18.8v-1.09h-.1a2.55 2.55 0 0 1-2.28 1.22z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],777:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("g",{fill:"none"},o.default.createElement("path",{stroke:"currentColor",d:"M5.5 9.5V18A1.5 1.5 0 0 0 7 19.5h10a1.5 1.5 0 0 0 1.5-1.5V9.5h-13zm-1 0h15V7A1.5 1.5 0 0 0 18 5.5H6A1.5 1.5 0 0 0 4.5 7v2.5z"}),o.default.createElement("rect",{width:"6",height:"1",x:"9",y:"12",fill:"currentColor",rx:".5"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],778:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({viewBox:"0 0 24 24",width:"24",height:"24"},e),a.default.createElement("g",{fill:"none"},a.default.createElement("path",{fill:"currentColor",d:"M20 11v2a.5.5 0 1 1-1 0v-2h-2a.5.5 0 1 1 0-1h2V8a.5.5 0 1 1 1 0v2h2a.5.5 0 1 1 0 1h-2z"}),a.default.createElement("path",{stroke:"currentColor",d:"M12 5.5a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm-6.5 12v.2c0 .4.6.8 1.5.8h10c.9 0 1.5-.4 1.5-.8v-.2c0-2.1-2.9-4-6.5-4s-6.5 1.9-6.5 4z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],779:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:"24",height:"24",viewBox:"0 0 24 24"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{d:"M0 0h24v24H0z"}),o.default.createElement("path",{d:"M5.235 12.754l7.857-7.856a3.064 3.064 0 1 1 4.334 4.335l-7.495 7.495a1.916 1.916 0 0 1-2.709-2.71l6.953-6.953.813.813-6.953 6.953a.768.768 0 0 0 0 1.084.768.768 0 0 0 1.083 0l7.495-7.495a1.916 1.916 0 0 0-2.709-2.71l-7.856 7.857a3.064 3.064 0 1 0 4.335 4.335l7.314-7.315.813.813-7.315 7.314a4.212 4.212 0 0 1-5.96 0 4.212 4.212 0 0 1 0-5.96z",fill:"currentColor"})))}),i=a;r.default=i},{react:"react"}],780:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"24",height:"24"},e),a.default.createElement("path",{fill:"currentColor",d:"M11 12.5v-5a.5.5 0 0 1 1 0V12h4.5a.5.5 0 1 1 0 1H11v-.5zm1 7.5a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-1a7 7 0 1 0 0-14 7 7 0 0 0 0 14z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],781:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=function(e){return o.default.createElement("svg",n({width:"24",height:"24"},e),o.default.createElement("path",{fill:"currentColor",d:"M18.83 17a14.04 14.04 0 0 1-2.12-7.38C16.71 7.08 14.61 5 12 5S7.29 7.07 7.29 9.63c-.03 2.71-.69 4.9-2.13 7.37h13.68zM15 18a3 3 0 0 1-6 0H4v-1a13.41 13.41 0 0 0 2.29-7.38C6.29 6.53 8.85 4 12 4a5.67 5.67 0 0 1 5.71 5.63c.03 2.9.86 5.05 2.29 7.37v1h-5zm-1 0h-4a2 2 0 1 0 4 0z"}))},i=a;r.default=i},{react:"react"}],782:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.date;return a.default.createElement("svg",{viewBox:"0 0 28 28",width:"28",height:"28"},a.default.createElement("g",{fill:"none"},a.default.createElement("path",{d:"M0 0h28v28H0z"}),a.default.createElement("text",{fill:"currentColor",fontFamily:"-apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol",fontSize:"12",fontWeight:"500"},a.default.createElement("tspan",{x:"14",y:"19.5",textAnchor:"middle"},t)),a.default.createElement("path",{fill:"currentColor",d:"M22 3h.15c1.34 0 1.83.14 2.32.4.49.26.87.65 1.13 1.14.26.48.4.97.4 2.3v14.32c0 1.33-.14 1.82-.4 2.3a2.73 2.73 0 0 1-1.14 1.14c-.48.26-.97.4-2.3.4H5.84c-1.33 0-1.82-.14-2.3-.4a2.73 2.73 0 0 1-1.14-1.14c-.26-.49-.4-.97-.4-2.3V6.83c0-1.33.14-1.82.4-2.3A2.73 2.73 0 0 1 3.54 3.4c.48-.26.97-.4 2.3-.4H6V1.5a.5.5 0 0 1 1 0V3h14V1.5a.5.5 0 1 1 1 0V3zM4.28 7c-.44 0-.6.05-.77.13a.9.9 0 0 0-.38.38c-.08.17-.13.33-.13.77v13.16c0 .89.1 1.21.27 1.54.17.32.43.58.75.75.33.18.65.27 1.54.27h16.88c.89 0 1.21-.1 1.54-.27.32-.17.58-.43.75-.75.18-.33.27-.65.27-1.54V8.28c0-.44-.05-.6-.13-.77a.9.9 0 0 0-.38-.38c-.16-.08-.33-.13-.77-.13H4.28z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types"));o.propTypes={date:i.default.node}},{"prop-types":"prop-types",react:"react"}],783:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:"18",height:"18"},e),o.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15 6v7.077c0 .669-.07.911-.2 1.156a1.371 1.371 0 0 1-.567.567c-.245.13-.487.2-1.156.2H4.923c-.669 0-.911-.07-1.156-.2a1.363 1.363 0 0 1-.567-.567c-.13-.245-.2-.487-.2-1.156V4.5A1.5 1.5 0 0 1 4.5 3H5V1.5h1V3h6V1.5h1V3h.5A1.5 1.5 0 0 1 15 4.5V6zM5.117 6c-.473 0-.617.028-.764.108a.59.59 0 0 0-.247.252c-.078.15-.106.296-.106.777v5.726c0 .481.028.628.106.777a.59.59 0 0 0 .247.252c.147.08.291.108.764.108h7.766c.473 0 .617-.028.764-.108a.59.59 0 0 0 .247-.252c.078-.15.106-.296.106-.777V7.137c0-.481-.028-.628-.106-.777a.59.59 0 0 0-.247-.252C13.5 6.028 13.356 6 12.883 6H5.117z"}))}),i=a;r.default=i},{react:"react"}],784:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},o.default.createElement("path",{fill:"currentColor",d:"M16 5H8v1.5a.5.5 0 0 1-1 0V5h-.44c-.66 0-.86.04-1.07.15a.82.82 0 0 0-.34.34C5.04 5.7 5 5.9 5 6.57V9h14V6.56c0-.66-.04-.86-.15-1.07a.82.82 0 0 0-.35-.34c-.2-.11-.4-.15-1.06-.15H17v1.5a.5.5 0 1 1-1 0V5zm1-1h.44c.89 0 1.21.1 1.54.27.32.17.58.43.75.75.18.33.27.65.27 1.54v10.88c0 .89-.1 1.21-.27 1.54a1.8 1.8 0 0 1-.75.75c-.33.18-.65.27-1.54.27H6.56c-.89 0-1.21-.1-1.54-.27a1.82 1.82 0 0 1-.75-.75c-.18-.33-.27-.65-.27-1.54V6.56c0-.89.1-1.21.27-1.54.17-.32.43-.58.75-.75.33-.18.65-.27 1.54-.27H7V2.5a.5.5 0 0 1 1 0V4h8V2.5a.5.5 0 1 1 1 0V4zm2 6H5v7.44c0 .66.04.86.15 1.07a.82.82 0 0 0 .34.34c.21.11.41.15 1.07.15h10.88c.66 0 .86-.04 1.07-.15a.82.82 0 0 0 .34-.35c.11-.2.15-.4.15-1.06V10zm-3 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],785:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"28",height:"28"},o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{d:"M0 0h28v28H0z"}),o.default.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M12 15.51a.49.49 0 0 1 .49-.49l7.3-.02-2.64-2.65a.5.5 0 0 1 .7-.7l3.54 3.53a.5.5 0 0 1 0 .7l-3.54 3.54a.5.5 0 0 1-.7-.7L19.86 16H12.5a.49.49 0 0 1-.49-.49zM9.5 15h1a.5.5 0 1 1 0 1h-1a.5.5 0 1 1 0-1zm-3 0h1a.5.5 0 1 1 0 1h-1a.5.5 0 1 1 0-1z"}),o.default.createElement("path",{fill:"currentColor",d:"M22 3h.15c1.34 0 1.83.14 2.32.4.49.26.87.65 1.13 1.14.26.48.4.97.4 2.3v14.32c0 1.33-.14 1.82-.4 2.3a2.73 2.73 0 0 1-1.14 1.14c-.48.26-.97.4-2.3.4H5.84c-1.33 0-1.82-.14-2.3-.4a2.73 2.73 0 0 1-1.14-1.14c-.26-.49-.4-.97-.4-2.3V6.83c0-1.33.14-1.82.4-2.3A2.73 2.73 0 0 1 3.54 3.4c.48-.26.97-.4 2.3-.4H6V1.5a.5.5 0 0 1 1 0V3h14V1.5a.5.5 0 1 1 1 0V3zM4.28 7c-.44 0-.6.05-.77.13a.9.9 0 0 0-.38.38c-.08.17-.13.33-.13.77v13.16c0 .89.1 1.21.27 1.54.17.32.43.58.75.75.33.18.65.27 1.54.27h16.88c.89 0 1.21-.1 1.54-.27.32-.17.58-.43.75-.75.18-.33.27-.65.27-1.54V8.28c0-.44-.05-.6-.13-.77a.9.9 0 0 0-.38-.38c-.16-.08-.33-.13-.77-.13H4.28z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],786:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"28",height:"28"},o.default.createElement("g",{fill:"none"},o.default.createElement("path",{d:"M0 0h28v28H0z"}),o.default.createElement("path",{fill:"currentColor",d:"M11.705 19.542a5.998 5.998 0 1 1 4.59-11.084 5.998 5.998 0 0 1-4.59 11.084zM14 1a.5.5 0 0 1 .5.5v4a.5.5 0 1 1-1 0v-4A.5.5 0 0 1 14 1zm0 21a.5.5 0 0 1 .5.5v4a.5.5 0 1 1-1 0v-4a.5.5 0 0 1 .5-.5zm13-8a.5.5 0 0 1-.5.5h-4a.5.5 0 1 1 0-1h4a.5.5 0 0 1 .5.5zM6 14a.5.5 0 0 1-.5.5h-4a.5.5 0 1 1 0-1h4a.5.5 0 0 1 .5.5zm17.192 9.192a.5.5 0 0 1-.707 0l-2.828-2.828a.5.5 0 0 1 .707-.707l2.828 2.828a.5.5 0 0 1 0 .707zM8.343 8.343a.5.5 0 0 1-.707 0L4.808 5.515a.5.5 0 0 1 .707-.707l2.828 2.828a.5.5 0 0 1 0 .707zm-3.535 14.85a.5.5 0 0 1 0-.708l2.828-2.828a.5.5 0 0 1 .707.707l-2.828 2.828a.5.5 0 0 1-.707 0zm14.849-14.85a.5.5 0 0 1 0-.707l2.828-2.828a.5.5 0 0 1 .707.707l-2.828 2.828a.5.5 0 0 1-.707 0z",transform:"rotate(22.5 14 14)"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],787:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"24",height:"24"},e),a.default.createElement("path",{fill:"none",stroke:"currentColor",d:"M16 10l-4 4-4-4"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],788:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},o.default.createElement("path",{fill:"currentColor",d:"M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm3.9-11.4a.5.5 0 0 1 .7.8l-6 6a.5.5 0 0 1-.7 0l-2.5-2.5a.5.5 0 0 1 .7-.8l2.1 2.2L16 8.6z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],789:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12",width:"12",height:"12"},e),a.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.902 6.975l4.182-4.244a.74.74 0 0 1 1.06 0 .775.775 0 0 1 0 1.081L5.432 8.597a.74.74 0 0 1-1.06 0L1.78 5.975a.775.775 0 0 1 0-1.081.74.74 0 0 1 1.061 0l2.06 2.081z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],790:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"24",height:"24"},e),a.default.createElement("path",{fill:"currentColor",d:"M11 12.5v-5a.5.5 0 0 1 1 0V12h4.5a.5.5 0 1 1 0 1H11v-.5zm1 7.5a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-1a7 7 0 1 0 0-14 7 7 0 0 0 0 14z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],791:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),l=i.default.memo(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.small,r=o(e,["small"]),a=t?{width:"18",height:"18"}:{width:"24",height:"24"};return i.default.createElement("svg",n({viewBox:"0 0 24 24",className:"icon_close"},a,r),i.default.createElement("path",{fill:"currentColor",d:"M11.3 12L5 5.9A.5.5 0 1 1 6 5l6.1 6.2L18.1 5a.5.5 0 0 1 .8.8L12.7 12l6.2 6.1a.5.5 0 0 1-.8.8L12 12.7 5.9 19A.5.5 0 0 1 5 18l6.2-6.1z"}))}),s=l;r.default=s},{react:"react"}],792:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("path",{fill:"none",stroke:"currentColor",d:"M12 5.5a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm-6.5 12v.2c0 .4.6.8 1.5.8h10c.9 0 1.5-.4 1.5-.8v-.2c0-2.1-2.9-4-6.5-4s-6.5 1.9-6.5 4z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],793:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},o.default.createElement("g",{id:"add_label_project",fill:"none",fillRule:"evenodd"},o.default.createElement("g",{id:"Icon/24/Activity-Type/Added-Task-[Alt]"},o.default.createElement("circle",{id:"Circle",fill:"#FF9E13",cx:"12",cy:"12",r:"8"}),o.default.createElement("path",{d:"M11 11V8a1 1 0 0 1 2 0v3h3a1 1 0 0 1 0 2h-3v3a1 1 0 0 1-2 0v-3H8a1 1 0 0 1 0-2h3z",id:"Plus",fill:"#FFF"}),o.default.createElement("circle",{id:"Oval",fill:"#999",cx:"12",cy:"12",r:"9"}),o.default.createElement("rect",{id:"Rectangle",fill:"#FFF",fillRule:"nonzero",x:"11",y:"7.5",width:"2",height:"9",rx:"1"}),o.default.createElement("rect",{id:"Rectangle",fill:"#FFF",fillRule:"nonzero",x:"7.5",y:"11",width:"9",height:"2",rx:"1"}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=n;r.default=a},{react:"react"}],794:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{d:"M0 0h24v24H0z"}),o.default.createElement("rect",{width:"14",height:"1",x:"5",y:"6",fill:"currentColor",rx:".5"}),o.default.createElement("path",{fill:"currentColor",d:"M10 9h1v8h-1V9zm3 0h1v8h-1V9z"}),o.default.createElement("path",{stroke:"currentColor",
d:"M17.5 6.5h-11V18A1.5 1.5 0 0 0 8 19.5h8a1.5 1.5 0 0 0 1.5-1.5V6.5zm-9 0h7V5A1.5 1.5 0 0 0 14 3.5h-4A1.5 1.5 0 0 0 8.5 5v1.5z"})))}),i=a;r.default=i},{react:"react"}],795:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:"24",height:"24"},e),o.default.createElement("g",{fill:"currentColor",fillRule:"evenodd"},o.default.createElement("g",{transform:"translate(4 3)"},o.default.createElement("rect",{width:"17",height:"1",y:"14",rx:".5"}),o.default.createElement("path",{d:"M9 10.293l2.146-2.147a.5.5 0 0 1 .708.708L9.207 11.5a1 1 0 0 1-1.414 0L5.146 8.854a.5.5 0 0 1 .708-.708L8 10.293V1a.5.5 0 0 1 1 0v9.293z"}))))}),i=a;r.default=i},{react:"react"}],796:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("path",{d:"M9.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm-5-5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z",fill:"currentColor",fillRule:"evenodd"}))}),i=a;r.default=i},{react:"react"}],797:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"24",height:"24"},e),a.default.createElement("path",{d:"M9.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm-5-5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z",fill:"currentColor"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],798:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("g",{fill:"none"},o.default.createElement("path",{fill:"currentColor",d:"M11 13h2.5c.3 0 .5.2.5.5s-.2.5-.5.5H11v2.5a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V14H7.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5H10v-2.5c0-.3.2-.5.5-.5s.5.2.5.5V13z"}),o.default.createElement("rect",{width:"12",height:"12",x:"4.5",y:"7.5",stroke:"currentColor",rx:"2"}),o.default.createElement("path",{fill:"currentColor",d:"M19 16.7V6a1 1 0 0 0-1-1H7.3c.2-.3.4-.6.7-.7.3-.2.7-.3 1.6-.3h7.8c1 0 1.3 0 1.6.3.3.1.6.4.7.7.2.3.3.7.3 1.6v7.8c0 1 0 1.3-.3 1.6-.1.3-.4.5-.7.7zm-1.6.3H9.6h7.8z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],799:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:"24",height:"24"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"currentColor",d:"M9.5 19h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z"}),o.default.createElement("path",{stroke:"currentColor",d:"M4.42 16.03a1.5 1.5 0 0 0-.43.9l-.22 2.02a.5.5 0 0 0 .55.55l2.02-.21a1.5 1.5 0 0 0 .9-.44L18.7 7.4a1.5 1.5 0 0 0 0-2.12l-.7-.7a1.5 1.5 0 0 0-2.13 0L4.42 16.02z"})))}),i=a;r.default=i},{react:"react"}],800:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.default.createElement("path",{fill:"currentColor",d:"M6 6h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H6zm10.7 1.6a.5.5 0 0 1 .6.8L12 13.1 6.7 9.4a.5.5 0 1 1 .6-.8l4.7 3.3 4.7-3.3z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=n;r.default=a},{react:"react"}],801:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:"24",height:"24"},e),o.default.createElement("g",{fill:"currentColor"},o.default.createElement("path",{d:"M9.375 11.75a1.125 1.125 0 1 1 0-2.25 1.125 1.125 0 0 1 0 2.25zm5.25 0a1.125 1.125 0 1 1 0-2.25 1.125 1.125 0 0 1 0 2.25zm.603 1.75a3.335 3.335 0 0 1-6.456 0h6.456z"}),o.default.createElement("path",{d:"M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm0 1a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"})))}),i=a;r.default=i},{react:"react"}],802:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=function(e){return o.default.createElement("svg",n({width:"24",height:"24",viewBox:"0 0 24 24"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"currentColor",d:"M11 13h2.5c.3 0 .5.2.5.5s-.2.5-.5.5H11v2.5a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V14H7.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5H10v-2.5c0-.3.2-.5.5-.5s.5.2.5.5V13z"}),o.default.createElement("rect",{width:"12",height:"12",x:"4.5",y:"7.5",stroke:"currentColor",rx:"2"}),o.default.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M19 16.7V6a1 1 0 0 0-1-1H7.3c.2-.3.4-.6.7-.7.3-.2.7-.3 1.6-.3h7.8c1 0 1.3 0 1.6.3.3.1.6.4.7.7.2.3.3.7.3 1.6v7.8c0 1 0 1.3-.3 1.6-.1.3-.4.5-.7.7zm-1.6.3H9.6h7.8z"})))},i=a;r.default=i},{react:"react"}],803:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.12 20h-4.08v-6.2h2.08l.31-2.41h-2.39V9.85c0-.7.2-1.18 1.2-1.18h1.27V6.51c-.22-.03-.98-.1-1.86-.1-1.84 0-3.1 1.13-3.1 3.2v1.78h-2.09v2.41h2.09V20H4.88a.88.88 0 0 1-.88-.88V4.88c0-.49.4-.88.88-.88h14.24c.48 0 .88.4.88.88v14.24a.88.88 0 0 1-.88.88z"}))}),i=a;r.default=i},{react:"react"}],804:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),o=n.default.memo(function(){return n.default.createElement("svg",{width:24,height:24},n.default.createElement("path",{fill:"currentColor",d:"M12 4c1 5 5 5 5 9a5 5 0 0 1-5 5c-2.8 0-5-2-5-5 0-4 4-4 5-9z"}))}),a=o;r.default=a},{react:"react"}],805:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.35 11.21h6.1c.43 3.12-.85 7.79-6.1 7.79C4.85 19 2 16.09 2 12.5S4.84 6 8.35 6c1.65 0 3.15.64 4.28 1.7-1.33 1.28-1.29 1.35-1.81 1.89a3.56 3.56 0 0 0-2.47-.95 3.76 3.76 0 0 0-3.7 3.86 3.77 3.77 0 0 0 3.7 3.86c2.06 0 2.9-.9 3.44-2.58H8.35v-2.57zm11.45.13H22v1.61h-2.2v2.32h-1.57v-2.32h-2.27v-1.6h2.27V9.08h1.57v2.25z"}))}),i=a;r.default=i},{react:"react"}],806:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},o.default.createElement("path",{fill:"none",stroke:"currentColor",d:"M12 18.345c5.642-4.767 6.354-5.448 7.099-6.988a3.79 3.79 0 0 0 .401-1.69c0-2.307-1.772-4.167-3.944-4.167-1.252 0-2.407.62-3.15 1.657L12 7.725l-.407-.568C10.851 6.12 9.696 5.5 8.444 5.5 6.272 5.5 4.5 7.36 4.5 9.667c0 .582.13 1.13.401 1.69.745 1.54 1.457 2.221 7.099 6.988z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=n;r.default=a},{react:"react"}],807:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"currentColor",d:"M11.9 16.5c-.46 0-.8-.35-.8-.85s.34-.86.8-.86c.48 0 .8.36.8.86s-.32.85-.8.85zM9.5 9.87c.06-1.32.9-2.37 2.54-2.37 1.46 0 2.46.95 2.46 2.21 0 .96-.47 1.64-1.22 2.11-.73.46-.94.8-.94 1.45v.4h-1.02v-.57c0-.8.37-1.36 1.16-1.86.68-.43.94-.82.94-1.47 0-.76-.56-1.32-1.43-1.32-.87 0-1.43.55-1.5 1.42H9.5z"}),o.default.createElement("circle",{cx:12,cy:12,r:7.5,stroke:"currentColor"})))}),i=a;r.default=i},{react:"react"}],808:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"24",height:"24"},e),a.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 12h4v1h-5V8h1v4zm-7 0h2l-2.5 3L2 12h2a8 8 0 1 1 8 8v-1a7 7 0 1 0-7-7z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],809:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:"24",height:"24"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"currentColor",d:"M6 20h12a2 2 0 0 0 2-2v-4h-4.4l-.635 1.41a1 1 0 0 1-.912.59H9.947a1 1 0 0 1-.912-.59L8.4 14H4v4a2 2 0 0 0 2 2z"}),o.default.createElement("path",{stroke:"currentColor",d:"M4.526 13.004a.5.5 0 0 0-.026.158V18A1.5 1.5 0 0 0 6 19.5h12a1.5 1.5 0 0 0 1.5-1.5v-4.838a.5.5 0 0 0-.026-.158l-2.16-6.478A1.5 1.5 0 0 0 15.893 5.5H8.108a1.5 1.5 0 0 0-1.423 1.026l-2.16 6.478z"})))}),i=a;r.default=i},{react:"react"}],810:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){var t=Object.assign({},e);return a.default.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28"},t),a.default.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(.93 .93)"},a.default.createElement("path",{d:"M0 0h26.13v26.13H0z"}),a.default.createElement("path",{fill:"currentColor",d:"M13.07 25.2a12.13 12.13 0 1 1 0-24.27 12.13 12.13 0 0 1 0 24.27zm0-.94a11.2 11.2 0 1 0 0-22.4 11.2 11.2 0 0 0 0 22.4z"}),a.default.createElement("path",{fill:"currentColor",d:"M12.13 7.47H14V14h-1.87z"}),a.default.createElement("circle",{cx:"13.07",cy:"17.03",r:"1.17",fill:"currentColor"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],811:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},o.default.createElement("g",{fill:"currentColor"},o.default.createElement("path",{d:"M13.5 16.1H12c-1.2 0-1.8-.1-2.4-.4a3 3 0 0 1-1.2-1.2c-.3-.6-.5-1.2-.5-2.4v-1.7C7 10.3 6 9.4 6 8.2 6 7 7 6 8.3 6c1.2 0 2.3 1 2.3 2.2 0 1.1-.9 2-2 2.2v1.7c0 1.1.1 1.6.4 2 .2.5.5.8 1 1 .4.3.9.3 2 .3h1.5c.1-1 1-1.8 2.2-1.8 1.3 0 2.3 1 2.3 2.2 0 1.2-1 2.2-2.3 2.2-1.1 0-2-.8-2.2-1.9zm2.2 1.2c1 0 1.6-.7 1.6-1.5 0-.9-.7-1.6-1.6-1.6-.9 0-1.6.7-1.6 1.6 0 .8.7 1.5 1.6 1.5zM8.3 9.8c.9 0 1.6-.7 1.6-1.6 0-.8-.7-1.5-1.6-1.5-1 0-1.6.7-1.6 1.5 0 .9.7 1.6 1.6 1.6z",fill:"#666"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],812:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),o=n.default.memo(function(){return n.default.createElement("svg",{width:24,height:24},n.default.createElement("path",{fill:"currentColor",d:"M5 8.67C5 7.75 5.84 7 6.87 7h8.19c.52 0 1.18.3 1.48.67l2.92 3.66c.3.37.3.97 0 1.34l-2.92 3.66c-.3.37-.96.67-1.48.67h-8.2C5.85 17 5 16.25 5 15.33V8.67z"}))}),a=o;r.default=a},{react:"react"}],813:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},o.default.createElement("path",{fill:"none",stroke:"currentColor",d:"M4.5 8v8c0 .82.72 1.5 1.62 1.5h9.31c.44 0 1.04-.29 1.28-.61l3.32-4.38c.2-.27.2-.75 0-1.02L16.7 7.11a1.86 1.86 0 0 0-1.28-.61H6.12c-.9 0-1.62.69-1.62 1.5z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],814:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("path",{fill:"currentColor",d:"M7.39 12.339l.706.707-1.768 1.768a2 2 0 1 0 2.829 2.828l3.535-3.535a2 2 0 0 0 0-2.829l.707-.707a3 3 0 0 1 0 4.243l-3.535 3.535a3 3 0 0 1-4.243-4.242l1.768-1.768zm8.838-.354l-.707-.707 1.768-1.768a2 2 0 1 0-2.829-2.828l-3.535 3.536a2 2 0 0 0 0 2.828l-.707.707a3 3 0 0 1 0-4.243l3.535-3.535a3 3 0 0 1 4.243 4.243l-1.768 1.767z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],815:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("path",{fill:"currentColor",d:"M10 11.5c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5s-.2.5-.5.5h-7a.5.5 0 0 1-.5-.5zm0 4c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5s-.2.5-.5.5h-7a.5.5 0 0 1-.5-.5zm0-8c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5s-.2.5-.5.5h-7a.5.5 0 0 1-.5-.5zm-4 9a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-4a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],816:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"24",height:"24"},e),a.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 19c-3.3-4.2-5-7.2-5-9a5 5 0 1 1 10 0c0 1.8-1.7 4.8-5 9zm0-7a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],817:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M12 11.4l4.7-3.8a.5.5 0 1 1 .6.8L12 12.6 6.7 8.4a.5.5 0 0 1 .6-.8l4.7 3.8z"}),o.default.createElement("rect",{width:"15",height:"13",x:"4.5",y:"5.5",stroke:"currentColor",rx:"2"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],818:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:"24",height:"24"},e),o.default.createElement("path",{d:"M13 16.5V19h2.5a.5.5 0 1 1 0 1h-6a.5.5 0 1 1 0-1H12v-2.5c-.8 0-1.6-.3-2.2-.6-.7-.4-1.3-1-1.7-1.7-.4-.8-.6-1.6-.6-2.6V9a.5.5 0 0 1 1 0v2.6c0 .8.2 1.5.5 2.1.3.6.7 1 1.3 1.3.6.3 1.3.5 2.1.5h.2c.8 0 1.5-.2 2.1-.5.6-.3 1-.7 1.3-1.3.3-.6.5-1.3.5-2.1V9a.5.5 0 1 1 1 0v2.6c0 1-.2 1.8-.6 2.6-.4.7-1 1.3-1.7 1.7-.6.3-1.4.5-2.2.6zM12.5 3C13.9 3 15 4.1 15 5.5v6a2.5 2.5 0 1 1-5 0v-6C10 4.1 11.1 3 12.5 3z",fill:"currentColor",fillRule:"evenodd"}))}),i=a;r.default=i},{react:"react"}],819:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",transform:"translate(3 10)"},o.default.createElement("circle",{cx:"2",cy:"2",r:"2"}),o.default.createElement("circle",{cx:"9",cy:"2",r:"2"}),o.default.createElement("circle",{cx:"16",cy:"2",r:"2"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],820:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:15,height:3},e),o.default.createElement("path",{d:"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm6 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm6 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z",fill:"currentColor",fillRule:"evenodd"}))}),i=a;r.default=i},{react:"react"}],821:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("g",{fill:"none",transform:"translate(4 4)"},o.default.createElement("circle",{cx:"8",cy:"8",r:"7.5",stroke:"currentColor"}),o.default.createElement("path",{fill:"currentColor",d:"M10.11 7.82L8.15 5.85a.5.5 0 1 1 .7-.7l2.83 2.82a.5.5 0 0 1 0 .71l-2.83 2.83a.5.5 0 1 1-.7-.7l1.98-1.99H4.5a.5.5 0 1 1 0-1h5.61z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],822:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M20 8v9.436c0 .892-.093 1.215-.267 1.54a1.81 1.81 0 0 1-.756.757c-.326.174-.65.267-1.54.267H6.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54V6a2 2 0 0 1 2-2h1V2.5a.5.5 0 0 1 1 0V4h8V2.5a.5.5 0 1 1 1 0V4h1a2 2 0 0 1 2 2v2zM6.564 8c-.662 0-.864.039-1.07.149a.818.818 0 0 0-.345.346C5.039 8.7 5 8.902 5 9.564v7.872c0 .662.039.864.149 1.07a.818.818 0 0 0 .346.345c.205.11.407.149 1.069.149h10.872c.662 0 .864-.039 1.07-.149a.818.818 0 0 0 .345-.346c.11-.205.149-.407.149-1.069V9.564c0-.662-.039-.864-.149-1.07a.818.818 0 0 0-.346-.345C18.3 8.039 18.098 8 17.436 8H6.564zM8 13a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm-8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"}))}),i=a;r.default=i},{react:"react"}],823:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24","data-svgs-path":"sm1/comments.svg"},e),a.default.createElement("path",{fill:"none",stroke:"currentColor",d:"M16.5 18.58V16.5h.94c.73 0 1.01-.05 1.3-.2.24-.14.42-.32.55-.56.16-.29.21-.57.21-1.3V7.56c0-.73-.05-1.01-.2-1.3a1.32 1.32 0 0 0-.56-.55c-.29-.16-.57-.21-1.3-.21H6.56c-.73 0-1.01.05-1.3.2a1.32 1.32 0 0 0-.55.56c-.16.29-.21.57-.21 1.3v6.88c0 .73.05 1.01.2 1.3.14.24.32.42.56.55.29.16.57.21 1.3.21h5.6l3.55 2.49a.5.5 0 0 0 .79-.41z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),i=o;r.default=i},{react:"react"}],824:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:13,height:13},e),o.default.createElement("path",{d:"M6 6V.5a.5.5 0 0 1 1 0V6h5.5a.5.5 0 1 1 0 1H7v5.5a.5.5 0 1 1-1 0V7H.5a.5.5 0 0 1 0-1H6z",fill:"currentColor",fillRule:"evenodd"}))}),i=a;r.default=i},{react:"react"}],825:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"28",height:"28"},o.default.createElement("g",{fill:"none"},o.default.createElement("path",{d:"M0 0h28v28H0z"}),o.default.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M13.35 6.02A9 9 0 1 0 23 15h-1a8 8 0 1 1-8-8h6.86l-2.71 2.72a.5.5 0 0 0 .7.7L22.4 6.9a.5.5 0 0 0 0-.7l-3.54-3.54a.5.5 0 0 0-.7.7L20.79 6c-4.93 0-7.41.01-7.44.02z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],826:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.priority;if(1===t)return a.default.createElement("svg",{width:"24",height:"24"},a.default.createElement("g",{fill:"#808080"},a.default.createElement("path",{d:"M5 5.5L6 5v14.5a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5v-14z"}),a.default.createElement("path",{d:"M5 13.51V5.29l.26-.15c.17-.09.46-.21.88-.33 1.62-.47 3.65-.46 6.02.31a11.9 11.9 0 0 0 6.91.15l.21-.06.09-.02.1-.01c.18-.05.18-.05.51.5l.01 8.29-.32.12c-.2.08-.58.2-1.09.31a12.7 12.7 0 0 1-6.74-.33 9.2 9.2 0 0 0-5.43-.3 3.66 3.66 0 0 0-.67.25.5.5 0 0 1-.74-.47.5.5 0 0 1 0-.04zm1.14-.7a10.2 10.2 0 0 1 6.02.31 11.72 11.72 0 0 0 6.83.15V6.32a12.63 12.63 0 0 1-.47.11c-2.08.43-4.34.4-6.68-.36A9.2 9.2 0 0 0 6 5.91v6.94l.14-.04z"})));var r=l.PRIORITY_COLORS[t];return a.default.createElement("svg",{width:"24",height:"24"},a.default.createElement("g",{fill:r},a.default.createElement("path",{d:"M5 5.5L6 5v14.5a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5v-14z"}),a.default.createElement("path",{stroke:r,d:"M5.5 13.58s2.42-1.32 6.5.02 7.5.03 7.5.03l-.02-7.95c.01-.05-3.4 1.26-7.48-.08s-6.5-.02-6.5-.02v7.93"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=e("../../models/Colors");o.propTypes={priority:i.default.oneOf([1,2,3,4])}},{"../../models/Colors":149,"prop-types":"prop-types",react:"react"}],827:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-svgs-path":"sm1/priority_flag.svg"},o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{d:"M0 0h24v24H0z"}),o.default.createElement("g",{fill:"currentColor"},o.default.createElement("path",{d:"M5 5.5L6 5v14.5a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5v-14z"}),o.default.createElement("path",{fillRule:"nonzero",d:"M5 13.51V5.29l.26-.15c.17-.09.46-.21.88-.33 1.62-.47 3.65-.46 6.02.31a11.9 11.9 0 0 0 6.91.15l.21-.06.09-.02.1-.01c.18-.05.18-.05.51.5l.01 8.29-.32.12c-.2.08-.58.2-1.09.31a12.7 12.7 0 0 1-6.74-.33 9.2 9.2 0 0 0-5.43-.3 3.66 3.66 0 0 0-.67.25.5.5 0 0 1-.74-.47.5.5 0 0 1 0-.04zm1.14-.7a10.2 10.2 0 0 1 6.02.31 11.72 11.72 0 0 0 6.83.15V6.32a12.63 12.63 0 0 1-.47.11c-2.08.43-4.34.4-6.68-.36A9.2 9.2 0 0 0 6 5.91v6.94l.14-.04z"}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],828:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.default.createElement("svg",n({width:"24",height:"24"},e),i.default.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(5 5)"},i.default.createElement("mask",{id:"mask",fill:"#fff"},i.default.createElement("path",{d:"M0 12.3C0 9.8 3.2 8 7 8s7 1.8 7 4.3c0 1-.7 1.7-2 1.7H2c-1.3 0-2-.6-2-1.8zM7 0a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7z"})),i.default.createElement("g",{mask:"url(#mask)"},i.default.createElement("path",{fill:"currentColor",d:"M-5-5h24v24H-5z"}))))}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.default.createElement("svg",n({width:"24",height:"24"},e),i.default.createElement("path",{d:"M12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10z",fill:"currentColor",fillRule:"nonzero"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../models/Colors")),s=i.default.memo(function(e){var t=e.color,r=e.isShared,n=t?{color:l.getHex("project",t)}:{};return r?i.default.createElement(o,{style:n}):i.default.createElement(a,{style:n})}),u=s;r.default=u},{"../../models/Colors":149,react:"react"}],829:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},e),o.default.createElement("g",{fill:"currentColor"},o.default.createElement("path",{d:"M9.375 11.75a1.125 1.125 0 1 1 0-2.25 1.125 1.125 0 0 1 0 2.25zm5.25 0a1.125 1.125 0 1 1 0-2.25 1.125 1.125 0 0 1 0 2.25zm.603 1.75a3.335 3.335 0 0 1-6.456 0h6.456z"}),o.default.createElement("path",{d:"M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm0 1a8 8 0 1 1 0-16 8 8 0 0 1 0 16z"})))}),i=a;r.default=i},{react:"react"}],830:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"15",height:"9",viewBox:"0 0 15 9"},e),a.default.createElement("path",{d:"M12 3v4.4l1.3-1.3a.5.5 0 0 1 .7.8l-1.8 1.7a1 1 0 0 1-1.4 0L9 7a.5.5 0 0 1 .7-.8L11 7.4V3.1c0-.8 0-1-.2-1.3-.1-.3-.3-.5-.6-.6C10 1.1 9.7 1 9 1H7V0h2c.8 0 1.3 0 1.7.3.4.2.8.6 1 1 .2.4.3.9.3 1.7zM3 6V1.6L1.7 2.9A.5.5 0 0 1 1 2L2.8.4a1 1 0 0 1 1.4 0L6 2a.5.5 0 0 1-.7.8L4 1.6v4.3c0 .8 0 1 .2 1.3.1.3.3.5.6.6.2.1.5.2 1.3.2H8v1H6c-.8 0-1.3 0-1.7-.3-.4-.2-.8-.6-1-1C3.1 7.3 3 6.8 3 6z",fill:"currentColor"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],831:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"12",height:"11",viewBox:"0 0 12 11"},e),a.default.createElement("g",{fill:"currentColor",fillRule:"evenodd"},a.default.createElement("path",{d:"M2.3 9.3a5 5 0 1 1 7.4 0l.8.8a.5.5 0 1 1-.7.7L9 10a5 5 0 0 1-6 0l-.8.8c-.2.2-.5.2-.7 0a.5.5 0 0 1 0-.7l.8-.8zM6 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"}),a.default.createElement("path",{d:"M6 6h2v1H5V3h1v3zM2.6 0H4L0 4V2.6c0-1 0-1.3.3-1.6C.4.7.7.4 1 .3c.3-.2.7-.3 1.6-.3zm6.8 0c1 0 1.3 0 1.6.3.3.1.6.4.7.7.2.3.3.7.3 1.6V4L8 0h1.4z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],832:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("path",{fill:"currentColor",d:"M12 12h3.5a.5.5 0 1 1 0 1H11V9.5a.5.5 0 0 1 1 0V12zm4.58 6.29A6.97 6.97 0 0 1 12 20a6.97 6.97 0 0 1-4.58-1.71l-1.27 1.27a.5.5 0 0 1-.71-.7l1.27-1.28a7 7 0 1 1 10.58 0l1.27 1.27a.5.5 0 0 1-.7.71l-1.28-1.27zM12 19a6 6 0 1 0 0-12 6 6 0 0 0 0 12zM5.04 9.02l-.71.7-.42-.41a2.5 2.5 0 0 1 0-3.55l.7-.7a2.5 2.5 0 0 1 3.55 0l.36.37-.7.7-.37-.36a1.5 1.5 0 0 0-2.13 0l-.7.7a1.5 1.5 0 0 0 0 2.13l.42.42zm14.63.7l-.7-.7.41-.42a1.5 1.5 0 0 0 0-2.13l-.7-.7a1.5 1.5 0 0 0-2.13 0l-.36.37-.7-.71.36-.37a2.5 2.5 0 0 1 3.54 0l.7.7a2.5 2.5 0 0 1 0 3.55l-.42.41z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){
return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],833:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:"24",height:"24"},e),a.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 12h3.5a.5.5 0 1 1 0 1H11V9.5a.5.5 0 0 1 1 0V12zm4.58 6.29A6.97 6.97 0 0 1 12 20a6.97 6.97 0 0 1-4.58-1.71l-1.27 1.27a.5.5 0 0 1-.71-.7l1.27-1.28a7 7 0 1 1 10.58 0l1.27 1.27a.5.5 0 0 1-.7.71l-1.28-1.27zM12 19a6 6 0 1 0 0-12 6 6 0 0 0 0 12zM5.04 9.02l-.71.7-.42-.41a2.5 2.5 0 0 1 0-3.55l.7-.7a2.5 2.5 0 0 1 3.55 0l.36.37-.7.7-.37-.36a1.5 1.5 0 0 0-2.13 0l-.7.7a1.5 1.5 0 0 0 0 2.13l.42.42zm14.63.7l-.7-.7.41-.42a1.5 1.5 0 0 0 0-2.13l-.7-.7a1.5 1.5 0 0 0-2.13 0l-.36.37-.7-.71.36-.37a2.5 2.5 0 0 1 3.54 0l.7.7a2.5 2.5 0 0 1 0 3.55l-.42.41z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],834:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.date,r=a(e,["date"]);return s.default.createElement("svg",o({width:"28",height:"28"},r),s.default.createElement("g",{fill:"none"},s.default.createElement("path",{d:"M0 0h28v28H0z"}),s.default.createElement("path",{fill:"currentColor",d:"M21.5 3.4A13 13 0 0 1 27 13h-1a12 12 0 0 0-5-8.7l.5-1zm-1.7-1l-.5.8A12 12 0 0 0 15 2V1c1.7.2 3.3.6 4.8 1.4zM27 15A13 13 0 1 1 13 1v1a12 12 0 1 0 13 13h1z"}),s.default.createElement("text",{fill:"currentColor",fontFamily:"-apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol",fontSize:"12",fontWeight:"500"},s.default.createElement("tspan",{x:"14",y:"18",textAnchor:"middle"},t))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var s=n(e("react")),u=n(e("prop-types"));l.propTypes={date:u.default.number}},{"prop-types":"prop-types",react:"react"}],835:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("path",{d:"M15.724 13.603l-.707-.708L16.739 11h-3.618l-.5-.501.77-4.243-2.387 2.626-.708-.707L15 3l-1.09 6-.033.179-.15.821H19l-3.276 3.603zm-2.02 2.222L9 21l1.09-6 .033-.179.15-.821H5l3.276-3.603.707.708L7.261 13h3.618l.5.501-.77 4.243 2.387-2.626.708.707zm5.442 4.029a.5.5 0 0 0 .708-.708l-15-15a.5.5 0 0 0-.708.708l15 15z",fill:"currentColor"}))}),i=a;r.default=i},{react:"react"}],836:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"currentColor",d:"M6 20h12a2 2 0 0 0 2-2v-4h-4.4l-.635 1.41a1 1 0 0 1-.912.59H9.947a1 1 0 0 1-.912-.59L8.4 14H4v4a2 2 0 0 0 2 2z"}),o.default.createElement("path",{stroke:"currentColor",d:"M4.526 13.004a.5.5 0 0 0-.026.158V18A1.5 1.5 0 0 0 6 19.5h12a1.5 1.5 0 0 0 1.5-1.5v-4.838a.5.5 0 0 0-.026-.158l-2.16-6.478A1.5 1.5 0 0 0 15.893 5.5H8.108a1.5 1.5 0 0 0-1.423 1.026l-2.16 6.478z"}),o.default.createElement("path",{fill:"currentColor",d:"M13.766 9.75c0 .968-.792 1.75-1.766 1.75a1.758 1.758 0 0 1-1.766-1.75c0-.965.792-1.75 1.766-1.75a1.76 1.76 0 0 1 1.766 1.75zM12 12.608c.728 0 1.905.245 2.699.708l-.428 1.058a1 1 0 0 1-.927.626h-2.688a1 1 0 0 1-.927-.626L9.3 13.316c.794-.463 1.971-.708 2.699-.708z"})))}),i=a;r.default=i},{react:"react"}],837:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),o=n.default.memo(function(e){var t=e.dateString,r=t.split("-"),o=r[r.length-1];return n.default.createElement("svg",{width:24,height:24},n.default.createElement("g",{fill:"currentColor",fillRule:"evenodd"},n.default.createElement("path",{d:"M20 8v9.436c0 .892-.093 1.215-.267 1.54a1.81 1.81 0 0 1-.756.757c-.326.174-.65.267-1.54.267H6.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54V6a2 2 0 0 1 2-2h1V2.5a.5.5 0 0 1 1 0V4h8V2.5a.5.5 0 1 1 1 0V4h1a2 2 0 0 1 2 2v2zM6.564 8c-.662 0-.864.039-1.07.149a.818.818 0 0 0-.345.346C5.039 8.7 5 8.902 5 9.564v7.872c0 .662.039.864.149 1.07a.818.818 0 0 0 .346.345c.205.11.407.149 1.069.149h10.872c.662 0 .864-.039 1.07-.149a.818.818 0 0 0 .345-.346c.11-.205.149-.407.149-1.069V9.564c0-.662-.039-.864-.149-1.07a.818.818 0 0 0-.346-.345C18.3 8.039 18.098 8 17.436 8H6.564z"}),n.default.createElement("text",{fontFamily:"-apple-system, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'",fontSize:9,transform:"translate(4 2)"},n.default.createElement("tspan",{x:7.7,y:14.5,textAnchor:"middle"},o))))});r.default=o},{react:"react"}],838:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M20.92 4.3a7.85 7.85 0 0 1-2.54 1A3.94 3.94 0 0 0 15.47 4a4.04 4.04 0 0 0-3.89 5.02 11.23 11.23 0 0 1-8.23-4.27 4.17 4.17 0 0 0-.54 2.06c0 1.42.7 2.67 1.78 3.4a3.92 3.92 0 0 1-1.81-.5v.04a4.07 4.07 0 0 0 3.2 4.01 3.89 3.89 0 0 1-1.8.08 4 4 0 0 0 3.73 2.84A7.88 7.88 0 0 1 2 18.38a11.11 11.11 0 0 0 6.12 1.83c7.34 0 11.35-6.23 11.35-11.64v-.53a8.19 8.19 0 0 0 1.98-2.12 7.82 7.82 0 0 1-2.29.64 4.08 4.08 0 0 0 1.76-2.26"}))}),i=a;r.default=i},{react:"react"}],839:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24"},o.default.createElement("g",{fill:"none"},o.default.createElement("path",{fill:"currentColor",d:"M12 5.5L9.85 7.65a.5.5 0 1 1-.7-.71l2.64-2.65a1 1 0 0 1 1.42 0l2.64 2.65a.5.5 0 0 1-.7.7L13 5.5v9.3a.5.5 0 0 1-1 0V5.5z"}),o.default.createElement("path",{stroke:"currentColor",strokeLinecap:"round",d:"M20.5 11.5v4.44c0 .89-.1 1.21-.28 1.54a1.88 1.88 0 0 1-.81.75c-.35.18-.7.27-1.65.27H7.24c-.95 0-1.3-.1-1.64-.27a1.88 1.88 0 0 1-.8-.75c-.2-.33-.29-.65-.29-1.54V11.5"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],840:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:24,height:24},e),o.default.createElement("path",{fill:e.color,d:"M12.707 12.707l-1.414-1.414-2.117-2.117c3.646-3.484 7.75-4.978 9.188-3.54 1.438 1.438-.056 5.542-3.54 9.188l-2.117-2.117zM10.586 12L12 13.414l-4.95 4.95a1 1 0 0 1-1.414-1.414l4.95-4.95zm5.763-7.882c-2.254.192-5.208 1.79-7.88 4.35L5.635 5.636a9.004 9.004 0 0 1 10.713-1.518zm3.533 3.533a9.004 9.004 0 0 1-1.518 10.713l-2.832-2.832c2.56-2.673 4.158-5.627 4.35-7.88z"}))}),i=a;r.default=i},{react:"react"}],841:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=o.default.memo(function(e){return o.default.createElement("svg",n({width:"24",height:"24"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"#FF9801",d:"M13.77 4.8l7.3 12.17A2 2 0 0 1 19.36 20H4.75a2 2 0 0 1-1.72-3.03l7.3-12.17a2 2 0 0 1 3.44 0z"}),o.default.createElement("path",{fill:"#FFF",d:"M10.88 8.41h2.35l-.2 5.92h-1.95l-.2-5.92zm-.07 7.91c0-.7.45-1.11 1.24-1.11s1.26.4 1.26 1.11c0 .7-.47 1.11-1.26 1.11s-1.24-.4-1.24-1.1z"})))}),i=a;r.default=i},{react:"react"}],842:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AddAboveIcon",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"AddBelowIcon",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"AddSectionIcon",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"AlphabetIcon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"ArchiveIcon",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"AssigneeIcon",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"AttachmentIcon",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"BeforeIcon",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"BellIcon",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"CalendarDateIcon",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"CalendarIcon",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"CalendarIconB",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"CalendarNextWeekIcon",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"CalendarSunIcon",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"CaretIcon",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"CheckboxCheckedIcon",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"CheckmarkIcon",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"ClockIcon",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(r,"CloseIcon",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"CollaboratorIcon",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"CreateIcon",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"DeleteIcon",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"DownloadIcon",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(r,"DragAndDropIcon",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(r,"DragHandleIcon",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(r,"DuplicateIcon",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"EditIcon",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"EmailIcon",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(r,"EmojiIcon",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"ExternalAttachmentIcon",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(r,"FacebookIcon",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(r,"FilterIcon",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(r,"GooglePlusIcon",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(r,"HeartIcon",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(r,"HelpIcon",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(r,"HistoryIcon",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(r,"InboxIcon",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(r,"InfoIcon",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(r,"ItemHierachyIcon",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(r,"LabelIcon",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(r,"LabelOutlinedIcon",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(r,"LinkIcon",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(r,"ListIcon",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(r,"LocationIcon",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(r,"MailIcon",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(r,"MicrophoneIcon",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(r,"MoreIcon",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(r,"MoreSmallIcon",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(r,"MoveIcon",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(r,"Next7DaysIcon",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(r,"NotesIcon",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(r,"PlusIcon",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(r,"PostponeIcon",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(r,"PriorityIcon",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(r,"PriorityIconB",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(r,"ProjectIcon",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(r,"ReactionIcon",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(r,"RecurringIcon",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(r,"ReminderAlarmIcon",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(r,"ReminderIcon",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(r,"RemindersIcon",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(r,"SmartScheduleResultIcon",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(r,"SmartScheduleStrikeIcon",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(r,"TeamInboxIcon",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(r,"TodayIcon",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(r,"TwitterIcon",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(r,"UploadIcon",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(r,"VocationModeIcon",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(r,"WarningIcon",{enumerable:!0,get:function(){return ve.default}});var o=n(e("./AddAboveIcon")),a=n(e("./AddBelowIcon")),i=n(e("./AddSectionIcon")),l=n(e("./AlphabetIcon")),s=n(e("./ArchiveIcon")),u=n(e("./AssigneeIcon")),c=n(e("./AttachmentIcon")),d=n(e("./BeforeIcon")),f=n(e("./BellIcon")),p=n(e("./CalendarDateIcon")),m=n(e("./CalendarIcon")),h=n(e("./CalendarIconB")),_=n(e("./CalendarNextWeekIcon")),y=n(e("./CalendarSunIcon")),v=n(e("./CaretIcon")),g=n(e("./CheckboxCheckedIcon")),b=n(e("./CheckmarkIcon")),w=n(e("./ClockIcon")),E=n(e("./CloseIcon")),j=n(e("./CollaboratorIcon")),O=n(e("./CreateIcon")),S=n(e("./DeleteIcon")),P=n(e("./DownloadIcon")),I=n(e("./DragAndDropIcon")),k=n(e("./DragHandleIcon")),T=n(e("./DuplicateIcon")),C=n(e("./EditIcon")),D=n(e("./EmailIcon")),A=n(e("./EmojiIcon")),M=n(e("./ExternalAttachmentIcon")),x=n(e("./FacebookIcon")),R=n(e("./FilterIcon")),N=n(e("./GooglePlusIcon")),L=n(e("./HeartIcon")),$=n(e("./HelpIcon")),U=n(e("./HistoryIcon")),B=n(e("./InboxIcon")),V=n(e("./InfoIcon")),F=n(e("./ItemHierachyIcon")),H=n(e("./LabelIcon")),q=n(e("./LabelOutlinedIcon")),G=n(e("./LinkIcon")),z=n(e("./ListIcon")),W=n(e("./LocationIcon")),Y=n(e("./MailIcon")),K=n(e("./MicrophoneIcon")),J=n(e("./MoreIcon")),Q=n(e("./MoreSmallIcon")),X=n(e("./MoveIcon")),Z=n(e("./Next7DaysIcon")),ee=n(e("./NotesIcon")),te=n(e("./PlusIcon")),re=n(e("./PostponeIcon")),ne=n(e("./PriorityIcon")),oe=n(e("./PriorityIconB")),ae=n(e("./ProjectIcon")),ie=n(e("./ReactionIcon")),le=n(e("./RecurringIcon")),se=n(e("./ReminderAlarmIcon")),ue=n(e("./ReminderIcon")),ce=n(e("./RemindersIcon")),de=n(e("./SmartScheduleResultIcon")),fe=n(e("./SmartScheduleStrikeIcon")),pe=n(e("./TeamInboxIcon")),me=n(e("./TodayIcon")),he=n(e("./TwitterIcon")),_e=n(e("./UploadIcon")),ye=n(e("./VocationModeIcon")),ve=n(e("./WarningIcon"))},{"./AddAboveIcon":773,"./AddBelowIcon":774,"./AddSectionIcon":775,"./AlphabetIcon":776,"./ArchiveIcon":777,"./AssigneeIcon":778,"./AttachmentIcon":779,"./BeforeIcon":780,"./BellIcon":781,"./CalendarDateIcon":782,"./CalendarIcon":783,"./CalendarIconB":784,"./CalendarNextWeekIcon":785,"./CalendarSunIcon":786,"./CaretIcon":787,"./CheckboxCheckedIcon":788,"./CheckmarkIcon":789,"./ClockIcon":790,"./CloseIcon":791,"./CollaboratorIcon":792,"./CreateIcon":793,"./DeleteIcon":794,"./DownloadIcon":795,"./DragAndDropIcon":796,"./DragHandleIcon":797,"./DuplicateIcon":798,"./EditIcon":799,"./EmailIcon":800,"./EmojiIcon":801,"./ExternalAttachmentIcon":802,"./FacebookIcon":803,"./FilterIcon":804,"./GooglePlusIcon":805,"./HeartIcon":806,"./HelpIcon":807,"./HistoryIcon":808,"./InboxIcon":809,"./InfoIcon":810,"./ItemHierachyIcon":811,"./LabelIcon":812,"./LabelOutlinedIcon":813,"./LinkIcon":814,"./ListIcon":815,"./LocationIcon":816,"./MailIcon":817,"./MicrophoneIcon":818,"./MoreIcon":819,"./MoreSmallIcon":820,"./MoveIcon":821,"./Next7DaysIcon":822,"./NotesIcon":823,"./PlusIcon":824,"./PostponeIcon":825,"./PriorityIcon":826,"./PriorityIconB":827,"./ProjectIcon":828,"./ReactionIcon":829,"./RecurringIcon":830,"./ReminderAlarmIcon":831,"./ReminderIcon":832,"./RemindersIcon":833,"./SmartScheduleResultIcon":834,"./SmartScheduleStrikeIcon":835,"./TeamInboxIcon":836,"./TodayIcon":837,"./TwitterIcon":838,"./UploadIcon":839,"./VocationModeIcon":840,"./WarningIcon":841}],843:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.onIndentLeft,r=e.onIndentRight,n=e.onHide,o=void 0===n?function(){}:n;return i.default.createElement(u.MenuList,{className:"item_menu_list","aria-label":_x("a11y","task editor menu")},i.default.createElement(a,{content:_("Sub-task"),subcontent:_("Indent Right"),shortcut:i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{className:"keyboard_key"},$isMac()?"\u2318":"CTRL"),i.default.createElement("span",{className:"plus"},"+"),i.default.createElement("span",{className:"keyboard_key"},"\u2192")),track:"task_form|more_indent_right",onClick:function(){o(),r()}}),i.default.createElement(a,{content:_("Parent task"),subcontent:_("Indent Left"),shortcut:i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{className:"keyboard_key"},$isMac()?"\u2318":"CTRL"),i.default.createElement("span",{className:"plus"},"+"),i.default.createElement("span",{className:"keyboard_key"},"\u2190")),track:"task_form|more_indent_left",onClick:function(){o(),t()}}))}function a(e){var t=e.content,r=e.subcontent,n=e.shortcut,o=e.track,a=e.onClick;return i.default.createElement("li",{role:"menuitem",tabIndex:"0",onClick:a,onKeyDown:(0,s.createKeyboardClickHandler)(a),className:"menu_item indent_menu_item","data-track":o},i.default.createElement("div",{className:"indent_menu_desc"},i.default.createElement("span",null,t),i.default.createElement("br",null),i.default.createElement("span",{className:"indent_menu_sub"},r)),i.default.createElement("div",{className:"indent_menu_shortcut"},n))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=e("../../utils"),u=e("../../menu_list");o.propTypes={onIndentLeft:l.default.func.isRequired,onIndentRight:l.default.func.isRequired,onHide:l.default.func},a.propTypes={content:l.default.string.isRequired,subcontent:l.default.string.isRequired,shortcut:l.default.node.isRequired,track:l.default.string,onClick:l.default.func.isRequired};var c=o;r.default=c},{"../../menu_list":907,"../../utils":1078,"prop-types":"prop-types",react:"react"}],844:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.onIndentLeft,r=e.onIndentRight,n=(0,u.useState)(null),a=o(n,2),i=a[0],l=a[1],s=function(e){l(e.currentTarget)};return u.default.createElement(u.default.Fragment,null,u.default.createElement(p.default,{className:"item_action item_actions_indent","aria-label":_x("a11y","show indent menu"),onClick:s},u.default.createElement(d.default,null)),i?u.default.createElement(f.default,{align:"bottom",anchor:i,onHide:function(){return l(null)}},u.default.createElement(m.default,{onIndentLeft:t,onIndentRight:r,onHide:function(){return l(null)}})):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../../icons/MoreSmallIcon")),f=n(e("../../Dialog")),p=n(e("../../Button")),m=n(e("./IndentMenu"));s.propTypes={onIndentLeft:c.default.func,onIndentRight:c.default.func}},{"../../Button":648,"../../Dialog":649,"../../icons/MoreSmallIcon":820,"./IndentMenu":843,"prop-types":"prop-types",react:"react"}],845:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){switch(e){case 2:return svgs.getString("sm1/priority_3.svg");case 3:return svgs.getString("sm1/priority_2.svg");case 4:return svgs.getString("sm1/priority_1.svg");default:return svgs.getString("sm1/priority_flag.svg")}}function i(e){var t=e.user,r=e.labels,n=e.reminders,i=e.priority,s=e.item,g=e.sectionId,b=e.projectId,w=e.withMoreMenu,E=e.quickNote,j=e.withIndentMenu,O=e.withQuickNote,S=e.withSectionSelection,P=void 0!==S&&S,I=e.onLabelsSelect,k=void 0===I?function(){}:I,T=e.onProjectSelect,C=void 0===T?function(){}:T,D=e.onPrioritySelect,A=void 0===D?function(){}:D,M=e.onReminderAdd,x=e.onReminderDelete,R=e.onArchive,N=e.onDelete,L=e.onLinkCopy,$=e.onEmailComments,U=e.onIndentLeft,B=void 0===U?function(){}:U,V=e.onIndentRight,F=void 0===V?function(){}:V,H=e.onQuickNoteChange,q=l.default.createElement(l.default.Fragment,null,l.default.createElement("b",null,_("Priority")),l.default.createElement("span",null,_("Add by typing p1, p2, p3, p4")));return l.default.createElement("div",{className:"item_actions"},l.default.createElement(m.default,{selectedProjectId:b,selectedSectionId:g,onSelect:C,withSectionSelection:P},function(e){var t=e.toggle,r=e.buttonProps;return l.default.createElement(u.default,{text:_("Select a project"),delayShow:0,position:"bottom"},l.default.createElement(c.default,o({className:"item_action",onClick:t,dangerouslySetInnerHTML:{__html:svgs.getString("sm1/project.svg")}},r)))}),l.default.createElement(d.default,{value:r,onChange:function(e){var t=e.target;return k(t.value)}},l.default.createElement(u.default,{text:_("Select a label"),delayShow:0,position:"bottom"},l.default.createElement("span",{dangerouslySetInnerHTML:{__html:svgs.getString("sm1/label_outline.svg")}}))),l.default.createElement(f.default,{className:"item_action item_actions_priority",priority:i,onSelect:A},l.default.createElement(u.default,{delayShow:0,tooltipClassName:"priority_picker_toggle_tooltip",text:q,position:"bottom"},l.default.createElement("span",{dangerouslySetInnerHTML:{__html:a(i)}}))),l.default.createElement(p.default,{onReminderAdd:M,onReminderDelete:x,reminders:n,item:s},function(e){return l.default.createElement(u.default,{text:_("Add reminder"),delayShow:0,position:"bottom",wrapperClassName:"item_action"},l.default.createElement(c.default,o({},e,{className:"item_action",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/reminder.svg")}})))}),O?l.default.createElement(y.default,{value:E,onChange:H}):null,w?l.default.createElement(h.default,{item:s,user:t,onArchive:R,onDelete:N,onLinkCopy:L,onEmailComments:$}):null,j?l.default.createElement(v.default,{onIndentLeft:B,onIndentRight:F}):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("prop-types")),u=n(e("@doist/reactist/lib/Tooltip")),c=n(e("../Button")),d=n(e("../label_picker")),f=n(e("../priority_picker")),p=n(e("../reminders_picker")),m=n(e("../project_picker")),h=n(e("./MoreMenuButton")),y=n(e("./QuickNote")),v=n(e("./IndentMenu/IndentMenuButton"));i.propTypes={reminders:s.default.array,item:s.default.object.isRequired,labels:s.default.arrayOf(s.default.string.isRequired),priority:s.default.number,projectId:s.default.oneOfType([s.default.number,s.default.string]),withQuickNote:s.default.bool,quickNote:s.default.string,sectionId:s.default.number,withIndentMenu:s.default.bool,withMoreMenu:s.default.bool,withSectionSelection:s.default.bool,onLabelsSelect:s.default.func,onProjectSelect:s.default.func,onPrioritySelect:s.default.func,onReminderAdd:s.default.func,onReminderDelete:s.default.func,onArchive:s.default.func,onDelete:s.default.func,onLinkCopy:s.default.func,onEmailComments:s.default.func,onQuickNoteChange:s.default.func};var g=i;r.default=g},{"../Button":648,"../label_picker":898,"../priority_picker":936,"../project_picker":955,"../reminders_picker":987,"./IndentMenu/IndentMenuButton":844,"./MoreMenuButton":847,"./QuickNote":848,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],846:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.item,r=e.onArchive,n=e.onDelete,o=e.onLinkCopy,i=e.onEmailComments;return a.default.createElement(l.MenuList,{className:"item_menu_list","aria-label":_x("a11y","task edit menu")},a.default.createElement(l.IconMenuItem,{text:_("Archive task"),icon:a.default.createElement(s.default,null),onClick:function(){return r(t.id)}}),a.default.createElement(l.IconMenuItem,{text:_("Add comments via email"),icon:a.default.createElement(d.default,null),onClick:function(){return i(t.id)}}),a.default.createElement(l.IconMenuItem,{text:_("Copy link to task"),icon:a.default.createElement(u.default,null),onClick:function(){return o(t.id)}}),a.default.createElement(l.MenuSeparator,null),a.default.createElement(l.IconMenuItem,{className:"danger_menu",text:_("Delete task"),icon:a.default.createElement(c.default,null),onClick:function(){return n(t.id)}}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=e("../menu_list"),s=n(e("../icons/ArchiveIcon")),u=n(e("../icons/LinkIcon")),c=n(e("../icons/DeleteIcon")),d=n(e("../icons/EmailIcon"));o.propTypes={item:i.default.object.isRequired,onArchive:i.default.func,onDelete:i.default.func,onLinkCopy:i.default.func,onEmailComments:i.default.func}},{"../icons/ArchiveIcon":777,"../icons/DeleteIcon":794,"../icons/EmailIcon":800,"../icons/LinkIcon":814,"../menu_list":907,"prop-types":"prop-types",react:"react"}],847:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.item,r=e.user,n=e.onArchive,a=e.onDelete,i=e.onLinkCopy,l=e.onEmailComments,s=(0,u.useState)(null),c=o(s,2),h=c[0],_=c[1],y=function(e){_(e.currentTarget)},v=function(e){return function(){_(null);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(null,r)}};return u.default.createElement(u.default.Fragment,null,u.default.createElement(m.default,{className:"item_action item_actions_more",onClick:y},u.default.createElement(d.default,null)),h?u.default.createElement(f.default,{align:"bottom",anchor:h,onHide:function(){return _(null)}},u.default.createElement(p.default,{item:t,user:r,onArchive:v(n),onDelete:v(a),onLinkCopy:v(i),onEmailComments:v(l)})):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../icons/MoreSmallIcon")),f=n(e("../Dialog")),p=n(e("./MoreMenu")),m=n(e("../Button"));s.propTypes={item:c.default.object.isRequired,user:c.default.object.isRequired,onArchive:c.default.func,onDelete:c.default.func,onLinkCopy:c.default.func,onEmailComments:c.default.func}},{"../Button":648,"../Dialog":649,"../icons/MoreSmallIcon":820,"./MoreMenu":846,"prop-types":"prop-types",react:"react"}],848:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.onClose,r=e.value,n=e.onChange,o=(0,c.useRef)(null);(0,c.useEffect)(function(){o.current&&o.current.focus()},[o]);var a=function(e){e&&"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&t()};return c.default.createElement("div",{className:"quick_note popover_dialog"},c.default.createElement("div",{className:"head"},c.default.createElement("label",{htmlFor:"quick_comment_input"
},_("Quick Comment")),c.default.createElement(m.default,{className:"close_btn",onClick:t,"aria-label":_("Close")},c.default.createElement(y.CloseIcon,{small:!0}))),c.default.createElement(h.default,{onKeyDown:a,id:"quick_comment_input",placeholder:_("Write a comment"),nodeRef:o,value:r,onChange:n}))}function u(e){var t=e.value,r=e.onChange,n=(0,c.useState)(null),a=o(n,2),i=a[0],l=a[1],u=(0,c.useState)(t),d=o(u,2),h=d[0],y=d[1],v=function(e){l(e.currentTarget)},g=function(){l(null),r(h)},b="item_action quick_note_action"+(h?" is_active":"");return c.default.createElement(c.default.Fragment,null,c.default.createElement(m.default,{className:b,onClick:v,title:_("Quick Comment")},c.default.createElement(f.default,null)),i?c.default.createElement(p.default,{nose:!0,align:"bottom",anchor:i,onHide:g},c.default.createElement(s,{value:h,onChange:y,onClose:g})):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),d=n(e("prop-types")),f=n(e("../icons/NotesIcon")),p=n(e("../Dialog")),m=n(e("../Button")),h=n(e("../ResizableTextArea")),y=e("../icons");s.propTypes={value:d.default.string,onChange:d.default.func,onClose:d.default.func},u.propTypes={value:d.default.string,onChange:d.default.func}},{"../Button":648,"../Dialog":649,"../ResizableTextArea":656,"../icons":842,"../icons/NotesIcon":823,"prop-types":"prop-types",react:"react"}],849:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){function t(){i(!0),l.current&&clearTimeout(l.current),l.current=setTimeout(function(){i(!1)},e)}var r=(0,c.useState)(!1),n=o(r,2),a=n[0],i=n[1],l=(0,c.useRef)(null);return(0,c.useEffect)(function(){return function(){return clearTimeout(l.current)}},[]),[a,t]}function u(e){function t(e){m(),a(r?0:1,e)}var r=e.checked,n=e.priority,a=e.onChange,i=e.big,l=s(250),u=o(l,2),f=u[0],m=u[1],h=(0,d.default)("item_checkbox","priority_".concat(n),{checked:r,with_check_animation:f,item_checkbox__big:i});return c.default.createElement(p.default,{className:h,onClick:t,role:"checkbox","aria-checked":Boolean(r)},c.default.createElement("svg",{width:"24",height:"24"},c.default.createElement("path",{fill:"currentColor",d:"M11.23 13.7l-2.15-2a.55.55 0 0 0-.74-.01l.03-.03a.46.46 0 0 0 0 .68L11.24 15l5.4-5.01a.45.45 0 0 0 0-.68l.02.03a.55.55 0 0 0-.73 0l-4.7 4.35z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),d=n(e("classnames")),f=n(e("prop-types")),p=n(e("../Button"));u.propTypes={big:f.default.bool,checked:f.default.oneOf([0,1]).isRequired,priority:f.default.oneOf([1,2,3,4]).isRequired,onChange:f.default.func.isRequired};var m=u;r.default=m},{"../Button":648,classnames:"classnames","prop-types":"prop-types",react:"react"}],850:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./ItemCheckbox")),o=n.default;r.default=o},{"./ItemCheckbox":849}],851:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=n(e("react")),y=n(e("prop-types")),v=e("../../utils"),g=n(e("../side_panel/SidePanel")),b=e("../reactist/tabs"),w=n(e("../../containers/Notes")),E=e("../../reducers/notes"),j=n(e("../../containers/ErrorBoundary")),O=e("../item_list/containers"),S=n(e("./item_overview")),P=n(e("../item_editor")),I=n(e("../activity_log")),k=n(e("../tab_title")),T=n(e("./ItemDetailHeader")),C=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return r=u(this,(e=c(t)).call.apply(e,[this].concat(o))),m(d(r),"detailRef",h.default.createRef()),m(d(r),"state",{isEditing:!1,isSidePanelShown:!0}),m(d(r),"handleKeyPress",function(e){var t=(0,v.resolveKeyboardKey)(e.key);if(!("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"textbox"===e.target.getAttribute("role")||e.target.classList.contains("dialog")||e.target.closest(".dialog-content")||document.querySelector("#item_selecter"))&&("Escape"===t&&r.setState({isSidePanelShown:!1}),"a"===t||"A"===t||"\u0444"===t||"\u0424"===t)){if("comments"===r.state.tab){var n=r.detailRef.current.querySelector(".comments_editor_container button.comments_editor_img");n&&n.click()}if("subtasks"===r.state.tab){var o=r.detailRef.current.querySelector(".task_actions .plus_add_button");o&&o.click()}}}),m(d(r),"handleClose",function(){r.setState({isSidePanelShown:!1})}),m(d(r),"handleEditorCancel",function(){r.setState({isEditing:!1})}),m(d(r),"handleEditorSubmit",function(e){var t=r.props.item,n=(0,v.getObjectDifference)(e,t);(0,v.keys)(n).length>0&&(r.props.onItemUpdate(a({id:t.id},n)),(n.section_id||null===n.section_id)&&r.props.onItemMove({id:t.id,project_id:e.project_id,section_id:n.section_id})),r.setState({isEditing:!1})}),m(d(r),"handleContentClick",function(){r.setState({isEditing:!0})}),m(d(r),"handleOverviewSizeChange",function(e){r.setState({overviewHeight:e})}),m(d(r),"handleSidePanelExited",function(){r.props.onClosed()}),m(d(r),"handleTabChange",function(e){r.setState({tab:e})}),m(d(r),"handleError",function(){r.props.onClosed()}),r}return f(t,e),s(t,[{key:"componentDidMount",value:function(){this.detailRef.current&&this.detailRef.current.focus(),document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.state,t=e.overviewHeight,r=e.isEditing,n=e.isSidePanelShown,o=this.props,a=o.activeTab,i=o.assignedUser,l=o.creator,s=o.highlightedNoteId,u=o.labels,c=o.item,d=o.parentItem,f=o.project,p=o.collaboratorsByPID,m=o.user,y=o.isProjectShared,v=o.notesCount,C=o.hasMoreNotes,D=o.itemsCount,A=o.onItemComplete,M=o.onItemUncomplete,x=o.onItemUpdate,R=o.onItemMove,N=o.onLabelClick,L=o.onNoteHighlighted,$=o.onParentClick,U=o.onArchive,B=o.onDelete,V=o.onLinkCopy,F=o.reminders,H=o.onEmailComments;return h.default.createElement(g.default,{isShown:n,onClickOutside:this.handleClose,onExited:this.handleSidePanelExited},h.default.createElement("div",{className:"item_detail",ref:this.detailRef,tabIndex:"-1"},h.default.createElement(j.default,{onErrorCaught:this.handleError},h.default.createElement(T.default,{item:c,parentItem:d,project:f,isProjectShared:y,onClose:this.handleClose,onParentClick:$}),h.default.createElement(j.default,{showErrorMsg:!0},r?h.default.createElement("div",{className:"item_detail_editor",style:{minHeight:t}},h.default.createElement(P.default,{item:c,collaboratorsByPID:p,reminders:F,user:m,withQuickNote:!1,onSubmit:this.handleEditorSubmit,onCancel:this.handleEditorCancel})):h.default.createElement(S.default,{assignedUser:i,labels:u,reminders:F,item:c,projectCollaborators:p[c.project_id],user:m,isProjectShared:y,onContentClick:this.handleContentClick,onLabelClick:N,onSizeChange:this.handleOverviewSizeChange,onItemComplete:A,onItemUncomplete:M,onItemUpdate:x,onItemMove:R,onArchive:U,onDelete:B,onLinkCopy:V,onEmailComments:H})),h.default.createElement(b.Tabs,{onChange:this.handleTabChange,activeTab:a},c.in_history?null:h.default.createElement(b.Tab,{value:"subtasks",title:h.default.createElement(k.default,{label:_("Subtasks"),count:D}),className:"sub_items_tab_container"},h.default.createElement(j.default,{showErrorMsg:!0},h.default.createElement(O.SubItemList,{id:c.id}))),h.default.createElement(b.Tab,{prerender:!1,className:"notes_tab_container",value:"comments",title:h.default.createElement(k.default,{label:_("Comments"),count:v,hasMore:C})},h.default.createElement(j.default,{showErrorMsg:!0},h.default.createElement(w.default,{item:c,highlightedNoteId:s,type:E.TYPE_ITEM_NOTE,projectId:f.id,parentId:c.id,onNoteHighlighted:L}))),h.default.createElement(b.Tab,{value:"activity",title:_("Activity"),className:"activity_tab_container"},h.default.createElement(j.default,{showErrorMsg:!0},h.default.createElement(I.default,{item:c,creator:l,filterBy:{object_type:"item",object_id:c.id}})))))))}}]),t}(h.default.Component);r.default=C,m(C,"propTypes",{activeTab:y.default.oneOf(["subtasks","comments","activity"]),assignedUser:y.default.object,creator:y.default.object,highlightedNoteId:y.default.number,labels:y.default.object.isRequired,reminders:y.default.array,item:y.default.object.isRequired,parentItem:y.default.object,project:y.default.object.isRequired,collaboratorsByPID:y.default.object,user:y.default.object.isRequired,isProjectShared:y.default.bool.isRequired,notesCount:y.default.number.isRequired,hasMoreNotes:y.default.bool.isRequired,itemsCount:y.default.number.isRequired,onClosed:y.default.func.isRequired,onItemComplete:y.default.func.isRequired,onItemUncomplete:y.default.func.isRequired,onItemUpdate:y.default.func.isRequired,onItemMove:y.default.func.isRequired,onLabelClick:y.default.func.isRequired,onNoteHighlighted:y.default.func.isRequired,onParentClick:y.default.func.isRequired,onArchive:y.default.func.isRequired,onDelete:y.default.func.isRequired,onLinkCopy:y.default.func.isRequired,onEmailComments:y.default.func.isRequired})},{"../../containers/ErrorBoundary":100,"../../containers/Notes":101,"../../reducers/notes":1114,"../../utils":1176,"../activity_log":668,"../item_editor":865,"../item_list/containers":870,"../reactist/tabs":973,"../side_panel/SidePanel":1052,"../tab_title":1073,"./ItemDetailHeader":852,"./item_overview":856,"prop-types":"prop-types",react:"react"}],852:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t,r,n=e.item,o=e.parentItem,i=e.project,c=e.isProjectShared,d=e.onClose,f=e.onParentClick;return o?(t=a.default.createElement(u.ItemHierachyIcon,null),r=o.content):(t=a.default.createElement(u.ProjectIcon,{color:i.color,isShared:c}),r=i.name),a.default.createElement("div",{className:"item_detail_header"},a.default.createElement(s.default,{className:"item_detail_parent_info",onClick:function(){f(n)}},a.default.createElement("div",{className:"item_detail_parent_icon"},t),a.default.createElement(l.default,{className:"item_detail_parent_name",text:r})),a.default.createElement(s.default,{onClick:d,className:"item_detail_close","aria-label":_("Close")},a.default.createElement(u.CloseIcon,null)))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../formatter/PlainText")),s=n(e("../Button")),u=e("../icons");o.propTypes={item:i.default.object.isRequired,parentItem:i.default.object,project:i.default.object.isRequired,isProjectShared:i.default.bool.isRequired,onClose:i.default.func.isRequired,onParentClick:i.default.func.isRequired};var c=o;r.default=c},{"../Button":648,"../formatter/PlainText":762,"../icons":842,"prop-types":"prop-types",react:"react"}],853:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),a=e("react-redux"),i=e("reselect"),l=e("../../reducers/detailView"),s=e("../../reducers/items"),u=e("../../reducers/reminders"),c=e("../../reducers/labels"),d=e("../../reducers/mainView"),f=e("../../reducers/notes"),p=n(e("../../logger/Logger")),m=e("../../reducers/collaborators"),h=n(e("../../react_components/item_detail/ItemDetail")),_=n(e("../../components/project_editor/ProjectExtraActions")),y=function(e){return e.item?o.default.createElement(h.default,e):null},v=(0,i.createSelector)(function(e){return e.detailView},function(e){return e.items},function(e){return e.archived.items},function(e){return e.projects},c.labelGetAllByName,function(e){return e.reminders},function(e){return e.collaborators},function(e){return(0,m.getAllCollaboratorsGroupByPID)(e)},function(e){return e.user},function(e){return e.notes},function(e){return e.moreNotes},function(e,t,r,n,o,a,i,l,c,d,h){try{if(!e||"item"!==e.type)return{};var _=t[e.id]||r[e.id],y=n[_.project_id],v=_.responsible_uid,g=i.all[v];g||v!==c.id||(g=c),a=(0,u.getRemindersByItemID)(_.id,{reminders:a});var b=(0,f.noteGetByItem)({notes:d},_.id).length,w=(0,f.hasMoreItemNotes)({moreNotes:h},_.id),E=(0,s.itemGetChildren)(_.id,{items:t}).filter(function(e){return!e.in_history&&!e.checked}).length;return{activeTab:e.activeTab,assignedUser:g,collaboratorsByPID:l,item:_,labels:o,reminders:a,project:y,user:c,notesCount:b,hasMoreNotes:w,itemsCount:E,creator:i.all[_.assigned_by_uid||_.user_id],highlightedNoteId:e.highlightedNoteId,parentItem:t[_.parent_id],isProjectShared:(0,m.isShared)({collaborators:i},_.project_id)}}catch(e){return p.default.captureError(e,{tags:{detail_view:1}}),{}}}),g=function(e){return{onClosed:function(){return e((0,l.detailViewClose)())},onItemComplete:function(t){e((0,s.itemComplete)(t.id)),Signals.sendSignal("refresh_interface")},onItemUpdate:function(t){e((0,s.itemUpdate)(t)),t.reminders&&e((0,u.reminderUpdate)(t.id,t.reminders)),Signals.sendSignal("refresh_interface")},onItemMove:function(t){e((0,s.itemMoveAndReorder)(t)),e((0,d.showProjectView)([t.project_id],{withChildren:!0}))},onItemUncomplete:function(t){e(t.in_history?(0,s.itemUnarchive)(t):(0,s.itemUncomplete)(t.id)),Signals.sendSignal("refresh_interface")},onLabelClick:function(t){e((0,d.showLabelView)(t.name)),e((0,l.detailViewClose)())},onArchive:function(t){return e((0,s.itemArchive)(t))},onDelete:function(e){return Signals.sendSignal("show_item_delete_confirm",e)},onLinkCopy:function(e){return Signals.sendSignal("item_copy_link",e)},onEmailComments:function(e){return _.default.showItemEmail(e)},onNoteHighlighted:function(){return e((0,l.detailViewUnmarkNote)())},onParentClick:function(t){t.parent_id?e((0,l.detailViewShowItem)(t.parent_id)):(e((0,d.showProjectView)([t.project_id])),e((0,l.detailViewClose)()))}}},b=(0,a.connect)(v,g)(y);r.default=b},{"../../components/project_editor/ProjectExtraActions":64,"../../logger/Logger":129,"../../react_components/item_detail/ItemDetail":851,"../../reducers/collaborators":1086,"../../reducers/detailView":1092,"../../reducers/items":1100,"../../reducers/labels":1105,"../../reducers/mainView":1109,"../../reducers/notes":1114,"../../reducers/reminders":1122,react:"react","react-redux":"react-redux",reselect:"reselect"}],854:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){var t=e.target;I({id:r.id,responsible_uid:t.value})}var r=e.item,n=e.assignedUser,o=e.labels,i=e.reminders,w=void 0===i?[]:i,E=e.user,j=e.isProjectShared,O=e.onContentClick,S=e.onItemComplete,P=e.onItemUncomplete,I=e.onItemUpdate,k=e.onItemMove,T=e.onLabelClick,C=e.onArchive,D=e.onDelete,A=e.onLinkCopy,M=e.onEmailComments,x=e.onSizeChange,R=void 0===x?function(){}:x,N=(0,a.useRef)(null),L=function(e){e?S(r):P(r)},$=function(e){I({id:r.id,due:e})},U=function(e){I({id:r.id,labels:e})},B=function(e){I({id:r.id,priority:e})},V=function(e){var t=e.project_id,n=e.section_id;k({id:r.id,project_id:t,section_id:n})};(0,a.useEffect)(function(){requestAnimationFrame(function(){var e=N.current.getBoundingClientRect();R(e.height)})},[R]);var F=(0,l.default)("item_overview",{"item_overview--completed":!!r.in_history||r.checked});return a.default.createElement("div",{className:F},(0,u.isSection)(r.content)?null:a.default.createElement(p.default,{big:!0,checked:r.checked,priority:r.priority,onChange:L}),a.default.createElement("div",{ref:N,className:"item_overview_main"},a.default.createElement(d.default,{className:"item_overview_content",disabled:!!r.in_history,onClick:O},a.default.createElement(c.default,{text:r.content.replace(/^\*\s+/g,"")})),a.default.createElement("div",{className:"item_overview_sub"},a.default.createElement(m.default,{item:r,onSelect:$}),w.length>0?a.default.createElement("span",null,a.default.createElement(s.default,{tooltipClassName:"item_due_tooltip",delayShow:0,text:function(){return a.default.createElement(y.default,{item:r,reminders:w})},position:"bottom"},a.default.createElement(h.ReminderAlarmIcon,null))):null,j?a.default.createElement(g.PersonPicker,{projectId:r.project_id,onChange:t,value:n?n.id:null,tooltip:g.getAssigneeTooltip},n?a.default.createElement(b.Avatar,{user:n,size:"small"}):a.default.createElement(a.default.Fragment,null,a.default.createElement("span",{dangerouslySetInnerHTML:{__html:svgs.getString("sm1/add_member_small.svg")}}),a.default.createElement("span",null,r.responsible_uid?_("Someone"):_("Assign To")))):null,r.labels.sort().map(function(e){return a.default.createElement(v.default,{key:e,label:o[e],onClick:T})})),a.default.createElement("div",{className:"item_overview_footer"},a.default.createElement(f.default,{user:E,labels:r.labels,item:r,priority:r.priority,projectId:r.project_id,sectionId:r.section_id,withMoreMenu:!0,withSectionSelection:!0,onLabelsSelect:U,onPrioritySelect:B,onProjectSelect:V,onArchive:C,onDelete:D,onLinkCopy:A,onEmailComments:M}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("@doist/reactist/lib/Tooltip")),u=e("../../../utils"),c=n(e("../../formatter/FormattedText")),d=n(e("../../Button")),f=n(e("../../item_actions/ItemActions")),p=n(e("../../item_checkbox")),m=n(e("../../item_due_selector")),h=e("../../icons"),y=n(e("../../reminders_picker/RemindersList")),v=n(e("./ItemOverviewLabel")),g=e("../../person_picker"),b=e("../../Avatar");o.propTypes={assignedUser:i.default.object,item:i.default.object.isRequired,isProjectShared:i.default.bool.isRequired,labels:i.default.object.isRequired,reminders:i.default.array,user:i.default.object.isRequired,onContentClick:i.default.func,onArchive:i.default.func,onDelete:i.default.func,onLinkCopy:i.default.func,onItemComplete:i.default.func,onItemUncomplete:i.default.func,onItemUpdate:i.default.func,onItemMove:i.default.func,onLabelClick:i.default.func,onSizeChange:i.default.func,onEmailComments:i.default.func};var w=o;r.default=w},{"../../../utils":1176,"../../Avatar":647,"../../Button":648,"../../formatter/FormattedText":761,"../../icons":842,"../../item_actions/ItemActions":845,"../../item_checkbox":850,"../../item_due_selector":858,"../../person_picker":930,"../../reminders_picker/RemindersList":981,"./ItemOverviewLabel":855,"@doist/reactist/lib/Tooltip":177,classnames:"classnames","prop-types":"prop-types",react:"react"}],855:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e){var t=e.label,r=e.onClick,o=void 0===r?function(){}:r,a=(0,s.useState)(!1),i=n(a,2),l=i[0],u=i[1],f=(0,c.getHex)("label",t.color),p="app#"+encodeURIComponent("agenda/@".concat(t.name));return s.default.createElement("a",{href:p,className:"item_overview_label",onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},onClick:function(){return o(t)},style:{backgroundColor:(0,d.hexToRGB)(f,l?.5:.2)}},t.name)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),u=function(e){return e&&e.__esModule?e:{default:e}}(e("prop-types")),c=e("../../../models/Colors"),d=e("../../../utils");l.propTypes={label:u.default.object.isRequired,onClick:u.default.func};var f=l;r.default=f},{"../../../models/Colors":149,"../../../utils":1176,"prop-types":"prop-types",react:"react"}],856:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./ItemOverview")),o=n.default;r.default=o},{"./ItemOverview":854}],857:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.item,r=e.reminders,n=e.onSelect,a=void 0===n?function(){}:n,i=(0,u.useState)(null),l=o(i,2),s=l[0],c=l[1];return u.default.createElement(u.default.Fragment,null,u.default.createElement(d.default,{className:"item_due_selector",onClick:function(e){return c(s?null:e.currentTarget)}},u.default.createElement(m.default,{item:t},u.default.createElement("div",{className:"calendar_icon",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/calendar.svg")}}),t.due?u.default.createElement(p.default,{date:t.due,withReminders:r&&r.length>0}):u.default.createElement("span",null,_("Schedule")))),s?u.default.createElement(f.default,{selectedItems:[t],selectedDate:t.due,align:"bottom",anchor:s,width:250,onHide:function(){return c(null)},onDateSelect:function(e){a(e),c(null)}}):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../Button")),f=n(e("../scheduler/SchedulerDialog")),p=n(e("../ItemDueDate")),m=n(e("../item_due_tooltip"));s.propTypes={item:c.default.object.isRequired,reminders:c.default.array,onSelect:c.default.func};var h=s;r.default=h},{"../Button":648,"../ItemDueDate":652,"../item_due_tooltip":860,"../scheduler/SchedulerDialog":1008,"prop-types":"prop-types",react:"react"}],858:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./ItemDueSelector")),o=n.default;r.default=o},{"./ItemDueSelector":857}],859:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.children,r=e.item,n=e.reminders;return r.due||0!==n.length?l.default.createElement(c.default,{wrapperClassName:"item_due_tooltip_anchor",tooltipClassName:"item_due_tooltip",delayShow:0,text:function(){return l.default.createElement(a,{item:r,reminders:n})},position:"bottom"},t):t}function a(e){var t=e.item,r=e.reminders,n=(0,u.useSelector)(function(e){return t.due?(0,m.itemGetDueByDate)(t.due,e):null}),o=(0,u.useSelector)(function(e){return e.projects});if(!t.due&&0===r.length)return null;if(!t.due)return l.default.createElement("span",null,l.default.createElement(h.default,{item:t,reminders:r}));var a=(0,p.formatDate)(t.due,{withWeekday:!0,withTime:t.due.with_time}),s=(0,d.getDaysDifference)(t);return l.default.createElement("span",null,a,s?l.default.createElement(l.default.Fragment,null,l.default.createElement("br",null),l.default.createElement("small",null,s)):null,t.due.is_recurring?l.default.createElement(l.default.Fragment,null,l.default.createElement("br",null),l.default.createElement("small",null,t.due.string)):null,l.default.createElement(h.default,{item:t,reminders:r}),l.default.createElement(i,{items:n,projects:o}))}function i(e){var t=e.items,r=e.projects,n=0===t.length?_("No tasks due"):(0,p.format)(_n("{count} task due","{count} tasks due",t.length),{count:t.length});return l.default.createElement("div",{className:"project_bar_holder"},n,l.default.createElement(f.default,{items:t,projects:r,maxWidth:100}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var l=n(e("react")),s=n(e("prop-types")),u=e("react-redux"),c=n(e("@doist/reactist/lib/Tooltip")),d=e("./utils"),f=n(e("../item_stat_bar/ItemStatBar")),p=e("../../utils"),m=e("../../reducers/items"),h=n(e("../reminders_picker/RemindersList"));o.propTypes={children:s.default.node.isRequired,item:s.default.object.isRequired,reminders:s.default.array.isRequired},a.propTypes={item:s.default.object.isRequired,reminders:s.default.array.isRequired},i.propTypes={projects:s.default.object.isRequired,items:s.default.array.isRequired}},{"../../reducers/items":1100,"../../utils":1176,"../item_stat_bar/ItemStatBar":893,"../reminders_picker/RemindersList":981,"./utils":861,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],860:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=e("../../reducers/reminders"),a=e("../../reducers/user"),i=function(e){return e&&e.__esModule?e:{default:e}}(e("./ItemDueTooltip")),l=function(e,t){return{reminders:t.item?(0,o.getRemindersByItemID)(t.item.id,e):[],isPremium:(0,a.isPremium)(e)}},s=(0,n.connect)(l)(i.default);r.default=s},{"../../reducers/reminders":1122,"../../reducers/user":1135,"./ItemDueTooltip":859,"react-redux":"react-redux"}],861:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDaysDifference=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../../utils/format")),o=function(e){var t=DateistDateHelpers.day_diff(new Date,e.due);return 0===t?null:(t>0?t=(0,n.default)(_n("1 day left","{num} days left",t),{num:t}):t<0&&(t=Math.abs(t),t=(0,n.default)(_n("1 day ago","{num} days ago",t),{num:t})),t)};r.getDaysDifference=o},{"../../utils/format":1162}],862:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return l(e)||i(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return p(e)||f(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function p(e){if(Array.isArray(e))return e}function m(e){var t=e.item,r=void 0===t?{}:t,n=e.reminders,a=void 0===n?[]:n,i=e.collaboratorsByPID,l=void 0===i?{}:i,u=e.forwardedRef,d=e.user,f=e.onCancel,p=void 0===f?function(){}:f,m=e.onChange,y=e.onIndentLeft,P=e.onIndentRight,I=e.onKeyDown,k=void 0===I?function(){}:I,T=e.onMultilinePaste,C=e.onSubmit,D=void 0===C?function(){}:C,A=e.withQuickNote,M=void 0===A||A,x=e.withIndentMenu,R=void 0!==x&&x,N=e.withIgnoredInitialMatches,L=void 0===N||N,$=(0,h.useState)((0,v.getContentExtensionInfo)(r.content)),U=c($,2),B=U[0],V=U[1],F=(0,h.useState)(s({due:null,note:null,labels:[],priority:1,responsible_uid:null,project_id:d.inbox_project,section_id:null},r,{reminders:a,content:B.title})),H=c(F,2),q=H[0],G=H[1],z=(0,h.useState)(null),W=c(z,2),Y=W[0],K=W[1],J=(0,h.useState)(null),Q=c(J,2),X=Q[0],Z=Q[1],ee=(0,h.useState)(null),te=c(ee,2),re=te[0],ne=te[1],oe=(0,h.useRef)(null),ae=(0,h.useRef)(q),ie=X?q.due:r.due,le=function(){return s({},q,{content:(0,v.parseContentWithExtensionsInfo)(q.content,B)})},se=function(e){var t=e.target;K(!0),G(s({},q,{responsible_uid:t.value}))},ue=function(e){Z(!0),G(s({},q,{due:e}))},ce=function(e){var t=s({},q,e);null===t.project_id&&(t.project_id=r.project_id||d.inbox_project),!X&&null===t.due&&r.due&&(t.due=r.due),re||null!==t.priority||(t.priority=r.priority||1),!Y&&null===t.responsible_uid&&r.responsible_uid&&(t.responsible_uid=r.responsible_uid),ae.current=t,G(t)},de=function(e){if("Escape"===(0,S.resolveKeyboardKey)(e.key))return void p();M&&(e.ctrlKey||e.metaKey)&&77===e.keyCode&&(e.preventDefault(),document.querySelector(".item_editor .quick_note_action").click()),k(e,le)},fe=function(e){G(s({},q,{labels:e}))},pe=function(e){oe.current.focus(),ne(!0),G(s({},q,{priority:e}))},me=function(e){var t=e.project_id,r=e.section_id;G(s({},q,{project_id:t,section_id:r}))},he=function(e){e.preventDefault(),D(le(),e)},_e=function(e){oe.current.focus(),G(s({},q,{note:e}))},ye=function(){y(),oe.current.focus()},ve=function(){P(),oe.current.focus()};(0,
h.useEffect)(function(){m&&m(s({},q,{content:(0,v.parseContentWithExtensionsInfo)(q.content,B)}))},[B,q,m]),(0,h.useEffect)(function(){u&&(u.current.focusInput=function(){oe.current.focus()},u.current.insertText=function(e){var t=(0,v.getContentExtensionInfo)(e);V(t),oe.current.insertAtCursor(t.title)})},[u]);var ge=h.default.useMemo(function(){var e=Y?q.responsible_uid:r.responsible_uid;return(0,E.find)(function(t){return t.id===e},l[q.project_id])},[l,Y,q.project_id,r.responsible_uid,q.responsible_uid]),be=function(e){G(s({},q,{reminders:[].concat(o(q.reminders),[e])}))},we=function(e){G(s({},q,{reminders:q.reminders.filter(function(t){return t!==e})}))};return h.default.createElement("form",{ref:u,className:"item_editor",onKeyDown:de},h.default.createElement("div",{className:"item_editor_details"},B.type?h.default.createElement("div",{className:"item_editor_extension",dangerouslySetInnerHTML:{__html:svgs.getString("twist"===B.type?"sm1/twist.svg":"sm1/email.svg")}}):null,h.default.createElement(b.default,{autoFocus:!0,className:"item_editor_input",forwardRef:oe,item:q,isAssigneeDisabled:Y,isDateistDisabled:X,isPriorityDisabled:re,withIgnoredInitialMatches:L,onChange:ce,onEnter:function(e){m&&m(ae.current),he(e)},onEscape:p,onMultilinePaste:T}),h.default.createElement("div",{className:"item_editor_assign"},h.default.createElement(O.default,{item:r,schedulerDue:ie,onDateSelect:ue,onTextEditorFocus:function(){return oe.current.focus()}}),h.default.createElement(j.PersonPicker,{className:"item_editor_assign_people",projectId:q.project_id,value:ge?ge.id:null,onChange:se,tooltip:_("Assign a person")}))),h.default.createElement("div",{className:"item_editor_actions"},h.default.createElement(w.default,{labels:q.labels,item:r,reminders:q.reminders,priority:re?q.priority:r.priority,projectId:q.project_id,sectionId:q.section_id,withMoreMenu:!1,withSectionSelection:!0,withIndentMenu:R,withQuickNote:M,quickNote:q.note,onReminderAdd:be,onReminderDelete:we,onLabelsSelect:fe,onIndentLeft:ye,onIndentRight:ve,onPrioritySelect:pe,onProjectSelect:me,onQuickNoteChange:_e}),h.default.createElement(g.default,{className:"item_editor_submit ist_button ist_button_red",type:"submit",onClick:he},r&&r.id?_("Save"):_("Add Task")),h.default.createElement(g.default,{className:"cancel",onClick:p},_("Cancel"))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),y=n(e("prop-types")),v=e("./utils"),g=n(e("../Button")),b=n(e("../rich_text_input")),w=n(e("../item_actions/ItemActions")),E=e("../../utils/fp"),j=e("../person_picker"),O=n(e("./ItemEditorScheduler")),S=e("../../utils");m.propTypes={item:y.default.object,reminders:y.default.array,collaboratorsByPID:y.default.object,forwardedRef:y.default.object,user:y.default.object.isRequired,withIndentMenu:y.default.bool,withIgnoredInitialMatches:y.default.bool,withQuickNote:y.default.bool,onCancel:y.default.func,onChange:y.default.func,onIndentLeft:y.default.func,onIndentRight:y.default.func,onKeyDown:y.default.func,onMultilinePaste:y.default.func,onSubmit:y.default.func};var P=m;r.default=P},{"../../utils":1176,"../../utils/fp":1166,"../Button":648,"../item_actions/ItemActions":845,"../person_picker":930,"../rich_text_input":992,"./ItemEditorScheduler":864,"./utils":866,"prop-types":"prop-types",react:"react"}],863:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("react-dom")),u=e("react-redux"),c=n(e("../../stores/store")),d=n(e("./ItemEditor")),f=e("../../reducers/collaborators"),p=e("../../reducers/reminders"),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.opts=t,this.holder=t.holder,this.resultItem=null,this.editor=l.default.createRef()}return i(e,[{key:"show",value:function(){var e=this,t=this.opts,r=t.item,n=t.withIgnoredInitialMatches,o=t.withIndentMenu,a=t.withQuickNote,i=t.onCancel,m=void 0===i?function(){}:i,h=t.onSubmit,_=void 0===h?function(){}:h,y=t.onKeyDown,v=void 0===y?function(){}:y,g=t.onIndentLeft,b=void 0===g?function(){}:g,w=t.onIndentRight,E=void 0===w?function(){}:w,j=t.onMultilinePaste;if(this.holder){var O=c.default.getState(),S=(0,p.getRemindersByItemID)(r&&r.id,O);s.default.render(l.default.createElement(u.Provider,{store:c.default},l.default.createElement(d.default,{item:r,forwardedRef:this.editor,collaboratorsByPID:(0,f.getAllCollaboratorsGroupByPID)(O),reminders:S,user:O.user,withIgnoredInitialMatches:n,withIndentMenu:o,withQuickNote:a,onChange:function(t){e.resultItem=t},onSubmit:function(t){e.resultItem=t,_(t)},onCancel:m,onKeyDown:v,onIndentLeft:b,onIndentRight:E,onMultilinePaste:j})),this.holder)}}},{key:"insertText",value:function(e){this.editor.current.insertText(e)}},{key:"remove",value:function(){s.default.unmountComponentAtNode(this.holder),$remove(this.holder)}},{key:"focusInput",value:function(){this.editor.current.focusInput()}},{key:"getResultItem",value:function(){return this.resultItem}},{key:"getCurrentMode",value:function(){return this.resultItem.id?"edit":"add"}}]),e}(),h=m;r.default=h},{"../../reducers/collaborators":1086,"../../reducers/reminders":1122,"../../stores/store":1140,"./ItemEditor":862,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],864:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){function t(e){v(!1),i(e)}function r(e){switch((0,d.resolveKeyboardKey)(e.key)){case"Tab":return void(e.shiftKey&&(e.preventDefault(),e.stopPropagation(),l()));case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault(),e.stopPropagation(),v(!0)}}var n=e.item,a=e.schedulerDue,i=e.onDateSelect,l=e.onTextEditorFocus,s=u.default.useRef(null),m=u.default.useState(!1),h=o(m,2),y=h[0],v=h[1],g=!0===y||"string"==typeof y,b="string"==typeof y?y:void 0;u.default.useEffect(function(){!g&&s.current&&s.current.focus()},[g]);var w=(0,c.default)("item_editor_assign_due",{"item_editor_assign_due--has_date":null!=a});return u.default.createElement(u.default.Fragment,null,u.default.createElement("input",{type:"text",value:(0,p.formatDueDate)(a),onChange:function(e){return v(e.target.value)},placeholder:_("Schedule"),ref:s,className:w,onClick:function(){return v(!0)},onKeyDown:r,onFocus:function(e){return e.target.select()}}),g?u.default.createElement(f.default,{align:"top",anchor:s.current,selectedDate:a,selectedItems:[n],onHide:function(){return v(!1)},onDateSelect:t,initialInputValue:b}):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("react")),c=n(e("classnames")),d=e("../../utils"),f=n(e("../scheduler/SchedulerDialog")),p=e("./utils"),m=s;r.default=m},{"../../utils":1176,"../scheduler/SchedulerDialog":1008,"./utils":866,classnames:"classnames",react:"react"}],865:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./ItemEditor")),o=n.default;r.default=o},{"./ItemEditor":862}],866:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseContentWithExtensionsInfo=r.getContentExtensionInfo=r.formatDueDate=void 0;var n=function(e){return e?e.is_recurring?e.string:DateUtils.format(e):""};r.formatDueDate=n;var o=function(e){var t=null,r="",n=e;if(!e)return{type:t,linkId:r,title:n};var o=e.match(/mail.google.com\/mail/g);return o&&1===o.length&&(o=e.match(/(https?:\/\/mail.google.com\/mail\/[^\s]+) \(([^)]+)\)/),o&&o[0]===e?(r=o[1],n=e.replace(o[0],o[2]),t="gmail_new"):(o=e.match(/\[([^\]]+)\]\((https?:\/\/mail.google.com\/mail(?:\/|\?)[^\s]+)\)/))&&o[0]===e&&(r=o[2],n=o[1],t="gmail_new")),o=e.match(/twist(?:app)?.com\/a/g),o&&1===o.length&&(o=e.match(/(https?:\/\/[^\s]*twist(?:app)?.com\/a\/[^\s]+) \(([^)]+)\)/),o&&o[0]===e?(r=o[1],n=e.replace(o[0],o[2]),t="twist"):(o=e.match(/\[([^\]]+)\]\((https?:\/\/[^\s]*twist(?:app)?.com\/a\/[^\s]+)\)/))&&o[0]===e&&(r=o[2],n=o[1],t="twist")),-1!==e.indexOf("[[gmail=")&&(o=e.match(/\[\[gmail=(.+?),\s*(.+?)\]\]/))&&o[0]===e&&(r=o[1],n=o[2],t="gmail"),-1!==e.indexOf("[[thunderbird")&&(o=e.match(/\[\[thunderbird\n?([^\n]+)\n([^\n]+)\n\s*\]\]/))&&o[0]===e&&(r=o[2],n=o[1],t="thunderbird"),-1!==e.indexOf("[[outlook=")&&(o=e.match(/\[\[outlook=(.+?),\s*(.+?)\]\]/))&&o[0]===e&&(r=o[1],n=o[2],t="outlook"),o=e.match(/readdle-?spark:\/\//g),o&&1===o.length&&(o=e.match(/(.+)\s(\[\(.+\)\]\(readdle-?spark:[^\s]+\))/))&&(r=o[2],n=o[1],t="spark"),{type:t,linkId:r,title:n}};r.getContentExtensionInfo=o;var a=function(e,t){var r=t.type,n=t.linkId;return e=(e||"").trim(),-1!==e.indexOf("@")&&(e=" ".concat(e," ")),"gmail"===r?"[[gmail=".concat(n,", ").concat(e," ]]"):"thunderbird"===r?"[[thunderbird\n ".concat(e.replace(/\n/g,""),"\n").concat(n.replace(/\n/g,"")," \n ]]"):"outlook"===r?"[[outlook=".concat(n,", ").concat(e," ]]"):"spark"===r?"".concat(e," ").concat(n):r?(e=e.replace(/\[/g,"("),e=e.replace(/\]/g,")"),n=n.replace(/\(/g,"["),n=n.replace(/\)/g,"]"),"[".concat(e,"](").concat(n,")")):e};r.parseContentWithExtensionsInfo=a},{}],867:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return u(e)||s(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function u(e){if(Array.isArray(e))return e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e){var t=e.parentID,r=e.items,n=e.project,o=e.sectionID,a=e.labels,l=e.reminders,s=e.notes,u=e.moreNotes,d=e.user,m=e.collaborators,h=e.tempIds,O=e.addItemButton,I=e.listProps,k=void 0===I?{}:I,A=e.onUpdate,M=e.onAdd,R=e.onArchive,N=e.onDuplicate,L=e.onLinkCopy,$=e.onMoveToProject,U=e.onDelete,B=e.onCheckedChange,V=e.showProject,F=(0,f.useMemo)(function(){var e=(0,g.byID)(r),n=(0,y.groupBy)("parent_id",r),o=t?(0,j.itemGetChildren)(t,{items:e}):r,a=(0,E.deriveOrderIndent)(t,o);return o=(0,y.sortBy)(function(e){return a[e.id].order},o),{itemsSorted:o,itemByID:e,byParentID:n,orderIndent:a}},[r,t]),H=F.itemsSorted,q=F.itemByID,G=F.byParentID,z=F.orderIndent,W=5-x(t,q),Y=function e(r){var n=q[q[r].parent_id];return!!n&&(n.id!==t&&(!!n.collapsed||e(n.id)))},K=T(h,q),J=K.editorState,Q=K.setEditorState,X=K.handleEditClick,Z=K.handleBottomAddClick,ee=K.handleAddCancel,te=K.handleSelectAddAbove,re=K.handleSelectAddBelow;C(J,Q);var ne=H.map(function(e){if(J&&"edit"===J.mode&&J.id===e.id)return null;var t=Boolean(G[e.id]),r=(0,w.reminderGetGroupByItemID)({reminders:l})[e.id]||null,o={item:e,indent:z[e.id].indent,project:n,labels:a,user:d,collaborators:m,noteCount:(0,b.noteGetByItem)({notes:s},e.id).length,noteHasMore:(0,P.hasMoreItemNotes)({moreNotes:u},e.id),reminders:r,responsible:e.responsible_uid?m[e.responsible_uid]:null,inCollapsed:Y(e.id),showCollapser:t,showProject:V,onCheckedChange:B,onSelectAddAbove:te,onSelectAddBelow:re,onEditClick:X,onMoveToProject:$,onUpdate:A,onArchive:R,onDuplicate:N,onLinkCopy:L,onDelete:U};return f.default.createElement(v.default,c({key:e.id},o))});if(J){var oe=D(d,J,Q,H,l,z,q,G,W,t,o,n,A,M,ee,Y),ae=i(oe,2),ie=ae[0],le=ae[1];ne.splice(ie,0,le)}return f.default.createElement("div",{className:(0,p.default)("list_holder",{editor_on:J})},f.default.createElement("ul",c({className:"items"},k),ne),J&&"edit"!==J.mode?null:f.default.createElement("div",{className:"controller actions task_actions"},f.default.createElement(S.PlusAddButton,{onClick:Z},O||_("Add task"))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),p=n(e("classnames")),m=e("../hooks"),h=n(e("prop-types")),y=e("../../utils/fp"),v=n(e("../item_list_item")),g=e("../../utils"),b=e("../../reducers/notes/selectors"),w=e("../../reducers/reminders"),E=e("./utils"),j=e("../../reducers/items"),O=n(e("../item_editor")),S=e("../buttons"),P=e("../../reducers/moreNotes"),I=e("../../reducers/user"),k=function(){return(0,g.generateElementId)("editor")},T=function(e,t){var r=(0,f.useState)(null),n=i(r,2),a=n[0],l=n[1];a&&"add_bottom"!==a.mode&&!t[a.id]&&(l(e[a.id]?o({},a,{id:e[a.id]}):null),a=null);var s=(0,f.useCallback)(function(e){l({id:e,mode:"edit",key:k()})},[]),u=(0,f.useCallback)(function(){l({mode:"add_bottom",key:k()})},[]),c=(0,f.useCallback)(function(){l(null)},[]),d=(0,f.useCallback)(function(e){l({id:e,mode:"add_above",key:k()})},[]),p=(0,f.useCallback)(function(e){l({id:e,mode:"add_below",key:k()})},[]);return{editorState:a,setEditorState:l,handleEditClick:s,handleBottomAddClick:u,handleAddCancel:c,handleSelectAddAbove:d,handleSelectAddBelow:p}},C=function(e,t){var r=(0,m.usePrevious)(e);(0,f.useEffect)(function(){if(null===r&&e){var t=new Event("itemeditorshow",{bubbles:!0});t.editorState=e,document.dispatchEvent(t)}},[r,e]),(0,f.useEffect)(function(){var r=function(r){e&&r.editorState!==e&&t(null)};return document.addEventListener("itemeditorshow",r),function(){document.removeEventListener("itemeditorshow",r)}},[e,t])},D=function(e,t,r,n,a,l,s,u,c,d,p,m,h,_,v,b){var j,S,P,T=t.mode,C=t.key,D=t.id;switch(T){case"edit":j=n.findIndex(function(e){return e.id===D}),S=t.indent||l[D].indent,P=s[D];break;case"add_below":if(j=n.findIndex(function(e){return e.id===D})+1,t.indent)S=t.indent;else{var x=s[D],R=l[x.id].indent,N=Boolean(u[x.id]);S=N?Math.min(R+1,c):R}break;case"add_above":j=n.findIndex(function(e){return e.id===D}),S=t.indent||l[D].indent;break;case"add_bottom":j=n.length,S=t.indent||1}var L=function(e){var t=M(j,S,T,d,n,u,l),r=t.parent_id,a=t.child_order,i=t.reorder,s=(0,g.omitBy)(e,function(e){return void 0===e});return s=o({project_id:m.id,section_id:p},e,{child_order:a,parent_id:r}),P&&P.project_id!==s.project_id&&(s=o({},s,{parent_id:null,section_id:null}),s=(0,y.omit)("child_order",s),i=null),[s,i]},$=function(e){for(var t,r=e;r<n.length;r++){var o=n[r];if(!b(o.id)){t=o;break}}return t},U=function(e){for(var t,r=e;r>=0;r--){var o=n[r];if(!b(o.id)){t=o;break}}return t},B=function(e,a){var s=(0,g.resolveKeyboardKey)(e.key);if("ArrowRight"===s&&e.metaKey&&0!==j){var u=n[j-1];if(S>l[u.id].indent||S>=c)return;return void r(o({},t,{indent:S+1}))}if("ArrowLeft"===s&&e.metaKey){if(1===S)return;var d=n[j+1];if(d&&l[d.id].indent>=S)return;return void r(o({},t,{indent:S-1}))}if("ArrowDown"===s&&e.ctrlKey){var f=L(a()),p=i(f,2),m=p[0],y=p[1];if("edit"===T){if(""!==m&&h(m,y),j===n.length-1)return void r({mode:"add_below",id:D,key:k()});var v=$(j+1);return void r({mode:"edit",id:v.id,key:k()})}var b;if(""!==m.content&&(b=_(m,y)),j===n.length)return void r({mode:"add_below",id:b?b.id:D,key:k()});var w=$(j+1);return void r({mode:"edit",id:w.id,key:k()})}if("ArrowUp"===s&&e.ctrlKey){var E=L(a()),O=i(E,2),P=O[0],I=O[1];if("edit"===T){if(""!==P.content&&h(P,I),0===j)return void r({mode:"add_above",id:D,key:k()});var C=U(j-1);return void r({mode:"edit",id:C.id,key:k()})}var A;if(""!==P.content&&(A=_(P,I)),0===j)return void r({mode:"add_above",id:A?A.id:D,key:k()});var M=U(j-1);return void r({mode:"edit",id:M.id,key:k()})}},V=function(e,t){var o=L(e),a=i(o,2),l=a[0],s=a[1];if("edit"===T){(0,E.isSubmittable)(l)&&h(l,s);var u=A(t,T,D,j,n,b);r(u)}else{if(!(0,E.isSubmittable)(l))return;var c=_(l,s),d=A(t,T,c.id,j,n,b);r(d)}},F="edit"===T?P:{section_id:p,project_id:m.id},H="edit"===T?(0,w.reminderGetGroupByItemID)({reminders:a})[P.id]:[];return[j,f.default.createElement("li",{className:"manager indent_".concat(S),"data-item-indent":S,key:C},f.default.createElement(O.default,{user:e,item:F,reminders:H,withQuickNote:"edit"!==T&&(0,I.isPremium)({user:e}),onKeyDown:B,onCancel:v,onSubmit:V}))]},A=function(e,t,r){var n=(0,g.resolveKeyboardKey)(e.key);return"Enter"===n&&e.shiftKey?{mode:"add_below",id:r,key:k()}:"Enter"===n&&e.ctrlKey?{mode:"add_above",id:r,key:k()}:"edit"===t?null:{mode:"add_below",id:r,key:k()}},M=function(e,t,r,n,o,a,i){var l,s;if(0===e)0===o.length?(l=n,s=1):(l=o[0].parent_id,s=o[0].child_order);else{var u=o[e-1],c=i[u.id].indent;if(t>c)l=u.id,s=1;else if(t==c)l=u.parent_id,s=u.child_order+1;else if(t<c){var d=o.slice(0,e).reverse().find(function(e){return i[e.id].indent===t});l=d.parent_id,s=d.child_order+1}}var f,p="edit"===r?o[e]:null,m=a[l];return m&&(f=m.filter(function(e){return e.id!==p&&e.child_order>=s}).map(function(e){return{id:e.id,child_order:e.child_order+1}})),{parent_id:l,child_order:s,reorder:f}},x=function e(t,r){if(null===t)return 0;var n=r[t];if(null===n.parent_id)return 1;e(n.parent_id,r)};d.defaultProps={showProject:!1},d.propTypes={parentID:h.default.oneOfType([h.default.number,h.default.string]),sectionID:h.default.oneOfType([h.default.number,h.default.string]),items:h.default.array.isRequired,project:h.default.object.isRequired,labels:h.default.object.isRequired,reminders:h.default.object.isRequired,notes:h.default.object.isRequired,moreNotes:h.default.object.isRequired,collaborators:h.default.object.isRequired,tempIds:h.default.object.isRequired,user:h.default.object.isRequired,showProject:h.default.bool,addItemButton:h.default.string,onCheckboxClick:h.default.func,onComplete:h.default.func,onUncomplete:h.default.func,onUpdate:h.default.func,onAdd:h.default.func,onArchive:h.default.func,onDuplicate:h.default.func,onMoveToProject:h.default.func,onLinkCopy:h.default.func,onCheckedChange:h.default.func,onDelete:h.default.func}},{"../../reducers/items":1100,"../../reducers/moreNotes":1111,"../../reducers/notes/selectors":1116,"../../reducers/reminders":1122,"../../reducers/user":1135,"../../utils":1176,"../../utils/fp":1166,"../buttons":675,"../hooks":766,"../item_editor":865,"../item_list_item":877,"./utils":873,classnames:"classnames","prop-types":"prop-types",react:"react"}],868:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e,t){if(null==e)return{};var r,n,o=c(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(e){var t=e.rootItemIds,r=e.user,n=e.projects,i=e.labels,l=e.items,s=e.notes,c=e.reminders,d=e.moreNotes,p=e.collaborators,I=e.tempIds,C=e.allowAdd,D=e.showDue,A=void 0===D||D,M=e.showDragHandle,x=void 0!==M&&M,R=e.onUpdate,N=e.onEditorToggle,L=e.onAdd,$=e.onCheckedChange,U=e.onArchive,B=e.onDuplicate,V=e.onLinkCopy,F=e.onMoveToProject,H=e.onDelete,q=u(e,["rootItemIds","user","projects","labels","items","notes","reminders","moreNotes","collaborators","tempIds","allowAdd","showDue","showDragHandle","onUpdate","onEditorToggle","onAdd","onCheckedChange","onArchive","onDuplicate","onLinkCopy","onMoveToProject","onDelete"]),G=(0,f.useState)(null),z=a(G,2),W=z[0],Y=z[1],K=(0,f.useCallback)(function(e){Y(e),N&&N(Boolean(e))},[N]),J=[];t.forEach(function(e){var t=l[e],r=(0,m.itemGetChildren)(t.id,{items:l},{sorted:!0});J.push({item:t,key:S({id:t.id}),indent:1,showCollapser:r.length>0,inCollapsed:!1});var n=(0,m.itemGetIndent)(t.id,{items:l}),o=function e(r){var n=l[r],o=l[n.parent_id];return!!o&&(o.id===t.id?Boolean(t.collapsed):!!o.collapsed||e(o.id))};r.forEach(function(e,a){var i=r[a+1],s=i&&i.parent_id===e.id;J.push({key:S({rootId:t.id,id:e.id}),item:e,indent:1+(0,m.itemGetIndent)(e.id,{items:l})-n,showCollapser:s,inCollapsed:o(e.id)})})});var Q=J.reduce(function(e,t,r){return e[t.key]=r,e},{});if(W&&!T(W)){var X=P(W),Z=X.id,ee=X.rootId;Z=I[Z]||Z,ee=I[ee]||ee;var te=S({id:Z,rootId:ee});if(W!==te)return Y(te),null}var re;re=void 0!==Q[W]?Q[W]:T(W)?J.length:null;var ne=function(e,t){var r=(0,w.resolveKeyboardKey)(e.key),n=(0,w.invert)(Q),o=t(),a=(0,O.isSubmittable)(o);if("ArrowDown"===r&&(e.ctrlKey||e.metaKey))if(T(W)){if(!a)return;L(o),K(k())}else{a&&R(o);var i=Q[W],l=J.slice(i+1).find(function(e){return!e.inCollapsed});l?K(l.key):C&&K(k())}if("ArrowUp"===r&&(e.ctrlKey||e.metaKey))if(T(W)){a&&L(o);var s=J.length-1;K(n[s])}else{var u=Q[W];if(0===u)return;a&&R(o);var c=J.slice(0,u).reverse().find(function(e){return!e.inCollapsed});c&&K(c.key)}},oe=J.map(function(e,t){var o=e.key,a=e.item,l=e.indent,u=e.inCollapsed,m=e.showCollapser;return re===t?f.default.createElement("li",{className:"manager indent_".concat(l),"data-item-indent":l,key:"".concat(W,":editor")},f.default.createElement(b.default,{user:r,item:a,reminders:(0,y.getRemindersByItemID)(a.id,{reminders:c}),withQuickNote:!1,onKeyDown:ne,onCancel:function(){K(null)},onSubmit:function(e){K(null),R(e)}})):f.default.createElement(v.default,{key:o,componentKey:o,item:a,project:n[a.project_id],labels:i,reminders:(0,y.getRemindersByItemID)(a.id,{reminders:c}),collaborators:p,user:r,indent:l,showCollapser:m,noteCount:(0,h.noteGetByItem)({notes:s},a.id).length,noteHasMore:(0,g.hasMoreItemNotes)({moreNotes:d},a.id),showDue:A,showProject:!0,showDragHandle:1===l&&x,inCollapsed:u,onUpdate:R,onAdd:L,onCheckedChange:$,onEditClick:K,onArchive:U,onDuplicate:B,onLinkCopy:V,onMoveToProject:F,onDelete:H})}),ae=function(){K(k())};return C&&!T(W)&&oe.push(f.default.createElement("li",{className:"agenda_add_task",key:"add_item_button"},f.default.createElement(E.PlusAddButton,{onClick:ae},_("Add task")))),T(W)&&oe.push(f.default.createElement("li",{className:"manager",key:W,"data-item-indent":"1"},f.default.createElement(b.default,{user:r,item:C.defaultFields,withQuickNote:(0,j.isPremium)({user:r}),onKeyDown:ne,onCancel:function(){K(null)},onSubmit:function(e){L(e),K(k())}}))),f.default.createElement("ul",o({className:"items"},q),oe)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),p=n(e("prop-types")),m=e("../../reducers/items"),h=e("../../reducers/notes"),y=e("../../reducers/reminders"),v=n(e("../item_list_item")),g=e("../../reducers/moreNotes"),b=n(e("../item_editor/index")),w=e("../../utils"),E=e("../buttons"),j=e("../../reducers/user"),O=e("./utils"),S=function(e){var t=e.id,r=e.rootId;return r?"".concat(r,"/").concat(t):"".concat(t)},P=function(e){var t=e.split("/").map(w.parseId);return 1===t.length?{id:t[0]}:{rootId:t[0],id:t[1]}},I=-1,k=function(){return I--},T=function(e){return e<0};d.propTypes={rootItemIds:p.default.array.isRequired,projects:p.default.object.isRequired,items:p.default.object.isRequired,labels:p.default.object.isRequired,notes:p.default.object.isRequired,moreNotes:p.default.object.isRequired,reminders:p.default.object.isRequired,sections:p.default.object.isRequired,collaborators:p.default.object.isRequired,user:p.default.object.isRequired,tempIds:p.default.object.isRequired,listRef:p.default.object,showDue:p.default.bool,allowAdd:p.default.shape({defaultFields:p.default.object}),defaultAddFields:p.default.object,onUpdate:p.default.func.isRequired,onCheckedChange:p.default.func.isRequired,onAdd:p.default.func.isRequired,onArchive:p.default.func.isRequired,onDelete:p.default.func.isRequired,onDuplicate:p.default.func.isRequired,onLinkCopy:p.default.func.isRequired,onMoveToProject:p.default.func.isRequired,onEditorToggle:p.default.func}},{"../../reducers/items":1100,"../../reducers/moreNotes":1111,"../../reducers/notes":1114,"../../reducers/reminders":1122,"../../reducers/user":1135,"../../utils":1176,"../buttons":675,"../item_editor/index":865,"../item_list_item":877,"./utils":873,"prop-types":"prop-types",react:"react"}],869:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),l=n(e("prop-types")),s=e("../../utils"),u=n(e("./ItemTreeList")),c=n(e("../drag_and_drop/useSortable")),d=function(e){var t=e.onMoveAndReorder,r=e.parentID;return(0,c.default)({listIdAttr:"data-subitem-list-id",itemIdAttr:"data-item-id",handleSelector:".task_list_item__drag_handle",scrollSelector:".item_detail .tabs__body",maxIndent:5-f(e.parentID,(0,s.byID)(e.items)),onSort:(0,i.useCallback)(function(e){var n,o=e.dragItemId,a=e.orders,i=a.findIndex(function(e){return e.id===o}),l=a[i].indent;if(1===l)n={id:(0,s.parseId)(o),parent_id:(0,s.parseId)(r)};else for(var u=i;u>=0;u--)if(a[u].indent<l){n={id:(0,s.parseId)(o),parent_id:(0,s.parseId)(a[u].id)};break}a=a.map(function(e){return{id:(0,s.parseId)(e.id),child_order:e.item_order}}),t(n,a)},[t,r])}),i.default.createElement(u.default,a({},e,{listProps:{"data-subitem-list-id":e.parentID},addItemButton:_("Add subtask")}))},f=function e(t,r){var n=r[t];return null===n.parent_id?1:e(n.parent_id,r)+1};d.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}({},u.default.propTypes,{onMoveAndReorder:l.default.func});var p=d;r.default=p},{"../../utils":1176,"../drag_and_drop/useSortable":693,"./ItemTreeList":867,"prop-types":"prop-types",react:"react"}],870:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.SubItemList=void 0;var i=e("react-redux"),l=n(e("./SubItemList")),s=e("../../reducers/items"),u=e("../../reducers/labels"),c=e("../../reducers/user"),d=n(e("../item_list/mapDispatchToItemListItemProps")),f=function(e,t){var r=t.id,n=e.items[r],a=(0,s.itemGetByPID)(e)[n.project_id],i=e.projects[n.project_id];return o({parentID:r,sectionId:n.section_id,items:a,project:i,labels:(0,u.labelGetAllByName)(e),reminders:e.reminders,notes:e.notes,moreNotes:e.moreNotes,collaborators:e.collaborators,tempIds:e.tempIds,user:e.user,isPremium:(0,c.isPremium)(e)},t)},p=function(e){return o({},(0,d.default)(e),{onMoveAndReorder:function(t,r){e((0,s.itemMoveAndReorder)(t,r))}})},m=(0,i.connect)(f,p,null,{pure:!1})(l.default);r.SubItemList=m},{"../../reducers/items":1100,"../../reducers/labels":1105,"../../reducers/user":1135,"../item_list/mapDispatchToItemListItemProps":871,"./SubItemList":869,"react-redux":"react-redux"}],871:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,o=c(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(e){return{onAdd:function(t,r){var n=t.note,o=t.reminders,a=u(t,["note","reminders"]),i=e((0,f.itemAdd)(a));return r&&e((0,f.itemMoveAndReorder)(null,r,{allowUndo:!1})),n&&""!==n.trim()&&e((0,m.noteAdd)({parentId:i.id,content:n,type:m.TYPE_ITEM_NOTE})),o&&o.length>0&&o.forEach(function(e){e.type?h.RemindersModel.add(l({},e,{item_id:i.id})):h.RemindersModel.addLocation(l({},e,{item_id:i.id}))}),i},onUpdate:function(t,r){var o=(0,p.omit)(["parent_id","section_id","project_id","child_order"],t);e((0,f.itemUpdate)(o));var a,i=t.id,l=t.parent_id,s=t.section_id,u=t.project_id,c=t.child_order;void 0===l&&void 0===s&&void 0===u||(a={id:i,parent_id:l,
section_id:s,project_id:u}),c&&(r=r?[{id:i,child_order:c}].concat(n(r)):[{id:i,child_order:c}]),(r||a)&&e((0,f.itemMoveAndReorder)(a,r,{allowUndo:!1}))},onMoveToProject:function(t){return e((0,f.itemMoveAndReorder)(t))},onArchive:function(t){return e((0,f.itemArchive)(t))},onDuplicate:function(t){return e((0,f.itemDuplicate)([t]))},onDelete:function(e){return Signals.sendSignal("show_item_delete_confirm",e)},onLinkCopy:function(e){return Signals.sendSignal("item_copy_link",e)},onMoveAndReorder:function(t,r){e((0,f.itemMoveAndReorder)(t,r))},onCheckedChange:function(t,r,n){if(r){var o=n.shiftKey;e((0,f.itemComplete)(t,o))}else e((0,f.itemUncomplete)(t))}}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var f=e("../../reducers/items"),p=e("../../utils/fp"),m=e("../../reducers/notes"),h=e("../../models/Reminders")},{"../../models/Reminders":161,"../../reducers/items":1100,"../../reducers/notes":1114,"../../utils/fp":1166}],872:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,o=c(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(){var e=(0,p.useSelector)(function(e){return{items:e.items,tempIds:e.tempIds,labels:(0,m.labelGetAllByName)(e),notes:e.notes,projects:e.projects,reminders:e.reminders,sections:e.sections,user:e.user,moreNotes:e.moreNotes,collaborators:e.collaborators}}),t=(0,p.useDispatch)();return l({},e,(0,f.useMemo)(function(){return{onAdd:function(e,r){var n=e.note,o=e.reminders,a=u(e,["note","reminders"]),i=t((0,h.itemAdd)(a));return r&&t((0,h.itemMoveAndReorder)(null,r,{allowUndo:!1})),n&&""!==n.trim()&&t((0,y.noteAdd)({parentId:i.id,content:n,type:y.TYPE_ITEM_NOTE})),o&&o.length>0&&o.forEach(function(e){e.type?v.RemindersModel.add(l({},e,{item_id:i.id})):v.RemindersModel.addLocation(l({},e,{item_id:i.id}))}),i},onUpdate:function(e,r){var o=(0,_.omit)(["parent_id","section_id","project_id","child_order"],e);t((0,h.itemUpdate)(o));var a,i=e.id,l=e.parent_id,s=e.section_id,u=e.project_id,c=e.child_order;void 0===l&&void 0===s&&void 0===u||(a={id:i,parent_id:l,section_id:s,project_id:u}),c&&(r=r?[{id:i,child_order:c}].concat(n(r)):[{id:i,child_order:c}]),(r||a)&&t((0,h.itemMoveAndReorder)(a,r,{allowUndo:!1}))},onMoveToProject:function(e){return t((0,h.itemMoveAndReorder)(e))},onArchive:function(e){return t((0,h.itemArchive)(e))},onDuplicate:function(e){return t((0,h.itemDuplicate)([e]))},onDelete:function(e){return Signals.sendSignal("show_item_delete_confirm",e)},onLinkCopy:function(e){return Signals.sendSignal("item_copy_link",e)},onMoveAndReorder:function(e,r){t((0,h.itemMoveAndReorder)(e,r))},onCheckedChange:function(e,r,n){if(r){var o=n.shiftKey;t((0,h.itemComplete)(e,o))}else t((0,h.itemUncomplete)(e))}}},[t]))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=d;var f=e("react"),p=e("react-redux"),m=e("../../reducers/labels"),h=e("../../reducers/items"),_=e("../../utils/fp"),y=e("../../reducers/notes"),v=e("../../models/Reminders")},{"../../models/Reminders":161,"../../reducers/items":1100,"../../reducers/labels":1105,"../../reducers/notes":1114,"../../utils/fp":1166,react:"react","react-redux":"react-redux"}],873:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}Object.defineProperty(r,"__esModule",{value:!0}),r.isSubmittable=r.deriveOrderIndent=void 0;var l=e("../../utils/fp"),s=e("../../utils"),u=function(e,t){var r=(0,l.groupBy)("parent_id",t),o=(0,s.byID)(t),a=function t(r){var n=o[r],a=o[n.parent_id];return a&&a.id!==e?t(a.id)+1:1},i=function e(t){var o=r[t];return[t].concat(n((0,l.compose)(l.flatten,(0,l.map)(function(t){return e(t)}),(0,l.map)(function(e){return e.id}),(0,l.sortBy)("child_order"))(o)))}(e).slice(1),u=i.reduce(function(e,t,r){return e[t]=r+1,e},{});return(0,s.mapValues)(u,function(e,t){return{order:e,indent:a(t)}})};r.deriveOrderIndent=u;var c=function(e){return""!==e.content};r.isSubmittable=c},{"../../utils":1176,"../../utils/fp":1166}],874:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){function t(e){m(c?null:e.currentTarget)}var r=e.children,n=e.item,a=e.reminders,i=e.onDueUpdate,l=(0,u.useState)(null),s=o(l,2),c=s[0],m=s[1];return n.due&&a&&0!==a.length?u.default.createElement(u.default.Fragment,null,u.default.createElement(f.default,{className:"due_date_controls",onClick:t,"aria-expanded":Boolean(c)},u.default.createElement(p.default,{item:n,reminders:a},r)),c?u.default.createElement(d.default,{selectedItems:[n],selectedDate:n.due,align:"bottom",anchor:c,width:250,onHide:function(){return m(null)},onDateSelect:i}):null):u.default.createElement(f.default,{className:"due_date_controls xyz",onClick:t,"aria-expanded":Boolean(c)},r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../scheduler/SchedulerDialog")),f=n(e("../Button")),p=n(e("../item_due_tooltip"));s.propTypes={children:c.default.node.isRequired,item:c.default.object.isRequired,reminders:c.default.array,onDueUpdate:c.default.func.isRequired}},{"../Button":648,"../item_due_tooltip":860,"../scheduler/SchedulerDialog":1008,"prop-types":"prop-types",react:"react"}],875:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.label,r=(0,s.getHex)("label",t.color),n="app#"+encodeURIComponent("agenda/@".concat(t.name));return i.default.createElement("a",{href:n,style:{color:r}},t.name)}function a(e){var t=e.item,r=e.project,n=e.reminders,a=e.labels,l=e.isProjectShared,s=e.onOpenTaskDetails,h=e.onDueDateSelect,_=e.showProject,y=e.showDue,v=e.showNotes,g=e.noteCount,b=e.noteHasMore;return i.default.createElement("div",{className:"task_list_item__info_tags"},y&&t.due?i.default.createElement("span",null,i.default.createElement(m.default,{item:t,reminders:n,onDueUpdate:h},i.default.createElement(p.default,{date:t.due}))):null,n?i.default.createElement("span",null,i.default.createElement(f.default,{item:t,reminders:n},i.default.createElement(u.ReminderAlarmIcon,null))):null,v&&(g>0||b)?i.default.createElement("span",null,i.default.createElement(d.default,{onClick:function(){return s({activeTab:"comments"})}},i.default.createElement(u.NotesIcon,null),b?"".concat(g,"+"):g)):null,t.labels.map(function(e){return i.default.createElement("span",{key:e,className:"task_list_item__info_tags__label"},i.default.createElement(o,{label:a[e]}))}),_?i.default.createElement("span",{className:"task_list_item__info_tags__project"},i.default.createElement("a",{href:"app#project/".concat(r.id)},i.default.createElement(c.default,{text:r.name}),i.default.createElement(u.ProjectIcon,{color:r.color,isShared:l}))):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=e("../../models/Colors"),u=e("../icons"),c=n(e("../formatter/PlainText")),d=n(e("../Button")),f=n(e("../item_due_tooltip/ItemDueTooltip")),p=n(e("../ItemDueDate")),m=n(e("./ItemDue"));a.propTypes={item:l.default.object.isRequired,project:l.default.object.isRequired,reminders:l.default.array,labels:l.default.object.isRequired,isProjectShared:l.default.bool.isRequired,onOpenTaskDetails:l.default.func.isRequired,onDueDateSelect:l.default.func.isRequired,showProject:l.default.bool,showDue:l.default.bool.isRequired,showNotes:l.default.bool.isRequired,noteCount:l.default.number,noteHasMore:l.default.bool.isRequired};var h=a;r.default=h},{"../../models/Colors":149,"../Button":648,"../ItemDueDate":652,"../formatter/PlainText":762,"../icons":842,"../item_due_tooltip/ItemDueTooltip":859,"./ItemDue":874,"prop-types":"prop-types",react:"react"}],876:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){$isMac()&&e.metaKey||!$isMac()&&e.ctrlKey||e.shiftKey||(0,c.eventFrom)(["a"],e)||W(void 0!==Y?Y:i.id,e)}function r(e){var t=e.target;L({id:i.id,responsible_uid:t.value})}function n(e){L({id:i.id,due:e})}function o(){L({id:i.id,collapsed:i.collapsed?0:1})}var i=e.item,b=e.project,w=e.labels,E=e.reminders,j=e.collaborators,O=e.user,S=e.showCollapser,P=e.showProject,I=e.showNotes,k=void 0===I||I,T=e.showDragHandle,C=void 0===T||T,D=e.showDue,A=void 0===D||D,M=e.noteCount,x=e.noteHasMore,R=e.onOpenTaskDetails,N=e.onCheckedChange,L=e.onUpdate,$=e.onArchive,U=e.onDelete,B=e.onDuplicate,V=e.onLinkCopy,F=e.onMoveToProject,H=e.onSelectAddAbove,q=e.onSelectAddBelow,G=e.indent,z=e.inCollapsed,W=e.onEditClick,Y=e.componentKey,K=(0,m.usePopoverMenu)(),J=!(0,u.isSection)(i.content),Q=(0,s.isShared)({collaborators:j},b.id),X=(0,l.default)(["task_list_item",{"task_list_item--completed":i.checked,"task_list_item--with_subtasks":S,"task_list_item--with_menu_open":K.isOpen,"task_list_item--assigned":s.isSharedProject&&null!=i.responsible_uid}]),Z=s.isSharedProject?(0,l.default)("task_list_item__person_picker",{"task_list_item__person_picker--assigned":null!=i.responsible_uid}):void 0;return a.default.createElement(a.default.Fragment,null,a.default.createElement("li",{className:X,hidden:z,onContextMenu:K.openOnContext,"data-item-id":i.id,"data-item-indent":G},C?a.default.createElement("span",{className:"task_list_item__drag_handle item_dnd_handle"},a.default.createElement(f.DragHandleIcon,null)):null,S?a.default.createElement(h.default,{className:(0,l.default)(["arrow",i.collapsed?"right":"down"]),"aria-expanded":i.collapsed?"false":"true",onClick:o},a.default.createElement(f.CaretIcon,null)):null,J&&a.default.createElement(y.default,{checked:i.checked,priority:i.priority,onChange:function(e,t){N(i.id,e,t)}}),a.default.createElement("div",{className:"task_list_item__content"},a.default.createElement(h.default,{className:"task_list_item__edit_task",onClick:t},a.default.createElement(d.default,{text:i.content.replace(/^\*\s+/g,"")})),a.default.createElement(v.default,{item:i,labels:w,project:b,reminders:E,isProjectShared:Q,onDueDateSelect:n,showProject:P,showNotes:k,showDue:A,noteCount:M,noteHasMore:x,onOpenTaskDetails:R})),a.default.createElement("div",{className:"task_list_item__action_buttons"},a.default.createElement("span",null,a.default.createElement(h.default,{onClick:R,dangerouslySetInnerHTML:{__html:svgs.getString("sm1/info.svg")}})),a.default.createElement(g.default,{item:i,reminders:E,onDueUpdate:n},a.default.createElement(f.CalendarIcon,null)),s.isSharedProject?a.default.createElement(p.PersonPicker,{className:Z,projectId:i.project_id,value:i.responsible_uid,onChange:r,tooltip:p.getAssigneeTooltip}):null,a.default.createElement("span",null,a.default.createElement(h.default,{onClick:K.openOnAnchor,"aria-expanded":K.isOpen,"data-testid":"more_menu",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/more_small.svg")}})))),K.isOpen&&a.default.createElement(m.Popover,K.props,a.default.createElement(_.default,{item:i,user:O,onUpdate:K.close(L),onArchive:K.close($),onDelete:K.close(U),onDuplicate:K.close(B),onLinkCopy:K.close(V),onMoveToProject:K.close(F),onSelectEdit:K.close(W),onSelectAddAbove:K.close(H),onSelectAddBelow:K.close(q)})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=e("../../reducers/collaborators"),u=e("../../utils"),c=e("../../utils/dom"),d=n(e("../formatter/FormattedText")),f=e("../icons"),p=e("../person_picker"),m=e("../popover"),h=n(e("../Button")),_=n(e("../item_menu_list")),y=n(e("../item_checkbox")),v=n(e("./ItemInfoTags")),g=n(e("./ItemDue"));o.propTypes={item:i.default.object.isRequired,project:i.default.object.isRequired,reminders:i.default.array,indent:i.default.oneOf([1,2,3,4,5]).isRequired,collaborators:i.default.object.isRequired,labels:i.default.object.isRequired,user:i.default.object.isRequired,inCollapsed:i.default.bool.isRequired,showProject:i.default.bool,showDue:i.default.bool,showCollapser:i.default.bool,showNotes:i.default.bool,showDragHandle:i.default.bool,noteCount:i.default.number,noteHasMore:i.default.bool,onOpenTaskDetails:i.default.func.isRequired,onEditClick:i.default.func,onCheckedChange:i.default.func,onSelectAddAbove:i.default.func,onSelectAddBelow:i.default.func,onUpdate:i.default.func,onArchive:i.default.func,onDuplicate:i.default.func,onLinkCopy:i.default.func,onMoveToProject:i.default.func,onDelete:i.default.func};var b=a.default.memo(o);r.default=b},{"../../reducers/collaborators":1086,"../../utils":1176,"../../utils/dom":1156,"../Button":648,"../formatter/FormattedText":761,"../icons":842,"../item_checkbox":850,"../item_menu_list":892,"../person_picker":930,"../popover":933,"./ItemDue":874,"./ItemInfoTags":875,classnames:"classnames","prop-types":"prop-types",react:"react"}],877:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.isDoister,r=e.onOpenTaskDetails,n=a(e,["isDoister","onOpenTaskDetails"]);return t?f.default.createElement(h.default,o({},n,{onOpenTaskDetails:r})):f.default.createElement(m.default,o({},n,{onNoteClick:function(){r({activeTab:"comments"})}}))}function s(e){return{isDoister:(0,p.isDoistUser)(e)}}function u(e,t){var r=t.item;return{onOpenTaskDetails:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.activeTab,o=void 0===n?null:n;e((0,d.detailViewShowItem)(r.id,{activeTab:o}))}}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=e("react-redux"),d=e("../../reducers/detailView"),f=n(e("react")),p=e("../../reducers/user"),m=n(e("../item_list_item_legacy/ItemListItem")),h=n(e("./ItemListItem")),_=(0,c.connect)(s,u)(l);r.default=_},{"../../reducers/detailView":1092,"../../reducers/user":1135,"../item_list_item_legacy/ItemListItem":882,"./ItemListItem":876,react:"react","react-redux":"react-redux"}],878:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.ItemCollapser=void 0;var l=n(e("react")),s=n(e("prop-types")),u=n(e("../icons/CaretIcon")),c=n(e("../Button")),d=n(e("classnames")),f=function(e){var t=e.collapsed,r=a(e,["collapsed"]),n=(0,d.default)(["arrow",t?"right":"down",r.className]);return l.default.createElement(c.default,o({},r,{className:n}),l.default.createElement(u.default,null))};r.ItemCollapser=f,f.propTypes={collapsed:s.default.oneOf([0,1])}},{"../Button":648,"../icons/CaretIcon":787,classnames:"classnames","prop-types":"prop-types",react:"react"}],879:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.contextMenuEvent,r=e.onHide,n=e.item,o=e.user,i=e.onUpdate,u=e.onArchive,c=e.onDelete,d=e.onDuplicate,f=e.onLinkCopy,p=e.onMoveToProject,m=e.onSelectEdit,h=e.onSelectAddAbove,_=e.onSelectAddBelow,y=function(e){return function(){e.apply(void 0,arguments),r()}},v=document.documentElement,g={top:t.pageY-v.scrollTop,left:t.pageX-v.scrollLeft};return a.default.createElement(s.default,{anchorPosition:g,onClose:r},a.default.createElement(l.default,{item:n,user:o,onUpdate:y(i),onArchive:y(u),onDelete:y(c),onDuplicate:y(d),onLinkCopy:y(f),onMoveToProject:y(p),onSelectEdit:y(m),onSelectAddAbove:h?y(h):void 0,onSelectAddBelow:_?y(_):void 0}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../item_menu_list/ItemMenuList")),s=n(e("../popover/Popover"));o.propTypes={contextMenuEvent:i.default.shape({pageX:i.default.number.isRequired,pageY:i.default.number.isRequired}),item:i.default.object.isRequired,user:i.default.object.isRequired,onHide:i.default.func.isRequired,onUpdate:i.default.func.isRequired,onArchive:i.default.func.isRequired,onDelete:i.default.func.isRequired,onDuplicate:i.default.func.isRequired,onLinkCopy:i.default.func.isRequired,onMoveToProject:i.default.func.isRequired,onSelectEdit:i.default.func.isRequired,onSelectAddAbove:i.default.func,onSelectAddBelow:i.default.func}},{"../item_menu_list/ItemMenuList":885,"../popover/Popover":932,"prop-types":"prop-types",react:"react"}],880:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.item,r=e.reminders,n=e.onDueUpdate,a=(0,u.useState)(null),i=o(a,2),l=i[0],s=i[1],c=function(e){s(l?null:e.currentTarget)},y=t.due,v={selectedItems:[t],selectedDate:y,align:"bottom",anchor:l,width:250,onHide:function(){return s(null)},onDateSelect:function(e){n(e),s(null)}};if(!y){var g=r&&r.length?u.default.createElement("span",{className:"date empty"},u.default.createElement(h.default,{item:t},u.default.createElement(d.default,null))):null;return u.default.createElement(u.default.Fragment,null,l?u.default.createElement(p.default,v):null,u.default.createElement(m.default,{className:"due_date_controls","aria-label":_x("a11y","set task due date"),onClick:c},u.default.createElement(f.default,{className:"scheduler_action"}),g))}return u.default.createElement(u.default.Fragment,null,l?u.default.createElement(p.default,v):null,u.default.createElement(h.default,{item:t},u.default.createElement(m.default,{className:"due_date_controls",onClick:c},u.default.createElement(_.default,{date:t.due,withReminders:r&&r.length>0}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../icons/ReminderAlarmIcon")),f=n(e("../icons/CalendarIcon")),p=n(e("../scheduler/SchedulerDialog")),m=n(e("../../react_components/Button")),h=n(e("../item_due_tooltip")),_=n(e("../ItemDueDate"));s.propTypes={item:c.default.object.isRequired,reminders:c.default.array,onDueUpdate:c.default.func}},{"../../react_components/Button":648,"../ItemDueDate":652,"../icons/CalendarIcon":783,"../icons/ReminderAlarmIcon":831,"../item_due_tooltip":860,"../scheduler/SchedulerDialog":1008,"prop-types":"prop-types",react:"react"}],881:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.labels;return a.default.createElement("div",{className:"labels_holder"},t.map(function(e){var t=e.name,r=e.color,n={color:(0,i.getHex)("label",r)},o="app#"+encodeURIComponent("agenda/@".concat(e.name));return a.default.createElement("a",{href:o,key:t,className:"label",style:n},t)}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=e("../../models/Colors"),l=n(e("prop-types"));o.propTypes={labels:l.default.arrayOf(l.default.shape({name:l.default.string.isRequired,color:l.default.number}).isRequired).isRequired};var s=o;r.default=s},{"../../models/Colors":149,"prop-types":"prop-types",react:"react"}],882:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../item_checkbox")),f=n(e("../formatter/FormattedText")),p=n(e("./ItemLabels")),m=e("../NotesButton"),h=e("../../reducers/notes/constants"),_=n(e("./ItemDue")),y=n(e("./ItemProject")),v=n(e("../icons/DragHandleIcon")),g=n(e("./ItemMoreMenu")),b=n(e("classnames")),w=e("./ItemCollapser"),E=n(e("./ItemContextMenu")),j=e("../utils"),O=e("../../utils/dom"),S=e("../../reducers/collaborators"),P=e("../person_picker"),I=function(e){var t=e.item,r=e.project,n=e.labels,i=e.reminders,l=e.collaborators,s=e.user,c=e.showCollapser,I=e.showProject,k=e.showNotes,T=void 0===k||k,C=e.showDragHandle,D=void 0===C||C,A=e.showDue,M=void 0===A||A,x=e.noteCount,R=e.noteHasMore,N=e.onNoteClick,L=e.onCheckedChange,$=e.onUpdate,U=e.onArchive,B=e.onDelete,V=e.onDuplicate,F=e.onLinkCopy,H=e.onMoveToProject,q=e.onSelectAddAbove,G=e.onSelectAddBelow,z=e.indent,W=e.inCollapsed,Y=e.onEditClick,K=e.componentKey,J=t.labels.map(function(e){return n[e]}),Q={};W&&(Q.display="none");var X=(0,u.useCallback)(function(e){var r=e.target;$({id:t.id,responsible_uid:r.value})},[$,t.id]),Z=function(e){$isMac()&&e.metaKey||!$isMac()&&e.ctrlKey||e.shiftKey||(0,O.eventFrom)(["a",".note_icon"],e)||Y(void 0!==K?K:t.id,e)},ee=(0,u.useState)(null),te=a(ee,2),re=te[0],ne=te[1],oe=function(e){e.persist(),e.preventDefault(),ne(e)},ae=(0,u.useCallback)(function(e,t,r){return N(e,r)},[N]),ie=(0,u.useState)(!1),le=a(ie,2),se=le[0],ue=le[1],ce={item:t,user:s,onUpdate:$,onArchive:U,onDelete:B,onDuplicate:V,onLinkCopy:F,onMoveToProject:H,onSelectEdit:Y,onSelectAddAbove:q,onSelectAddBelow:G},de=(0,b.default)(["task_item","indent_".concat(z),c?"with_collapser":null,t.checked?"checked":null,se||re?"menu_showing":null]),fe=(0,S.isShared)({collaborators:l},r.id);return u.default.createElement(u.default.Fragment,null,re?u.default.createElement(E.default,o({contextMenuEvent:re,onHide:function(){return ne(null)}},ce)):null,u.default.createElement("li",{className:de,style:Q,onContextMenu:oe,"data-item-id":t.id,"data-item-indent":z},D?u.default.createElement("span",{className:"drag_and_drop_handler item_dnd_handle"},u.default.createElement(v.default,null)):null,c?u.default.createElement(w.ItemCollapser,{collapsed:t.collapsed,onClick:function(){$({id:t.id,collapsed:t.collapsed?0:1})}}):null,u.default.createElement("table",{cellPadding:"0",cellSpacing:"0"},u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",{className:"checker sel_checkbox_td"},u.default.createElement(d.default,{checked:t.checked,priority:t.priority,onChange:function(e,r){L(t.id,e,r)}})),u.default.createElement("td",{className:"text_cursor content task_content_item",onClick:Z,role:"button",onKeyDown:(0,j.createKeyboardClickHandler)(Z),tabIndex:"0"},u.default.createElement("span",{className:"text sel_item_content"},u.default.createElement(f.default,{text:t.content}),T?u.default.createElement(m.NotesButton,{notesCount:x,noteParent:t,hasMore:R,noteType:h.TYPE_ITEM_NOTE,onClick:ae,user:s}):null,u.default.createElement("div",null,J.length>0&&u.default.createElement(p.default,{labels:J})))),M?u.default.createElement("td",{className:"td_due_date",nowrap:"true"},u.default.createElement(_.default,{item:t,reminders:i,onDueUpdate:function(e){return $({id:t.id,due:e})}})):null,I?u.default.createElement("td",{className:"column_project td_project task_content_item"},u.default.createElement(y.default,{project:r,isShared:fe})):null,fe?u.default.createElement("td",{className:"assign_user task_content_item","data-track":"project|assign_person"},u.default.createElement(P.PersonPicker,{value:t.responsible_uid,onChange:X,projectId:t.project_id,tooltip:P.getAssigneeTooltip})):null,u.default.createElement("td",{className:"more_menu_cell"},u.default.createElement(g.default,o({},ce,{onShowChanged:ue}))))))))};I.propTypes={item:c.default.object.isRequired,project:c.default.object.isRequired,reminders:c.default.array,indent:c.default.oneOf([1,2,3,4,5]).isRequired,collaborators:c.default.object.isRequired,labels:c.default.object.isRequired,user:c.default.object.isRequired,inCollapsed:c.default.bool.isRequired,showProject:c.default.bool,showDue:c.default.bool,showDuetime:c.default.bool,showCollapser:c.default.bool,showNotes:c.default.bool,showDragHandle:c.default.bool,noteCount:c.default.number,noteHasMore:c.default.bool,onEditClick:c.default.func,onCheckedChange:c.default.func,onNoteClick:c.default.func,onSelectAddAbove:c.default.func,onSelectAddBelow:c.default.func,onUpdate:c.default.func,onArchive:c.default.func,onDuplicate:c.default.func,onLinkCopy:c.default.func,onMoveToProject:c.default.func,onDelete:c.default.func};var k=u.default.memo(I);r.default=k},{"../../reducers/collaborators":1086,"../../reducers/notes/constants":1113,"../../utils/dom":1156,"../NotesButton":655,"../formatter/FormattedText":761,"../icons/DragHandleIcon":797,"../item_checkbox":850,"../person_picker":930,"../utils":1078,"./ItemCollapser":878,"./ItemContextMenu":879,"./ItemDue":880,"./ItemLabels":881,"./ItemMoreMenu":883,"./ItemProject":884,classnames:"classnames","prop-types":"prop-types",react:"react"}],883:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.item,r=e.user,n=e.onShowChanged,a=e.onUpdate,i=e.onArchive,l=e.onDelete,s=e.onDuplicate,c=e.onLinkCopy,m=e.onMoveToProject,h=e.onSelectEdit,_=e.onSelectAddAbove,y=e.onSelectAddBelow,v=(0,u.useState)(null),g=o(v,2),b=g[0],w=g[1],E=function(e){w(e.currentTarget),n(!0)},j=function(){w(null),n(!1)},O=function(e){return function(){j();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(null,r)}};return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:"more_menu",onClick:E},u.default.createElement(d.default,null)),b?u.default.createElement(f.default,{anchorElement:b,onClose:j},u.default.createElement(p.default,{item:t,user:r,onUpdate:O(a),onArchive:O(i),onDelete:O(l),onDuplicate:O(s),onLinkCopy:O(c),onMoveToProject:O(m),onSelectEdit:O(h),onSelectAddAbove:_?O(_):void 0,onSelectAddBelow:y?O(y):void 0})):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../icons/MoreSmallIcon")),f=n(e("../popover/Popover")),p=n(e("../item_menu_list/ItemMenuList"));s.propTypes={item:c.default.object.isRequired,user:c.default.object.isRequired,onShowChanged:c.default.func,onUpdate:c.default.func.isRequired,onArchive:c.default.func.isRequired,onDelete:c.default.func.isRequired,onDuplicate:c.default.func.isRequired,onLinkCopy:c.default.func.isRequired,onMoveToProject:c.default.func.isRequired,onSelectEdit:c.default.func.isRequired,onSelectAddAbove:c.default.func,onSelectAddBelow:c.default.func}},{"../icons/MoreSmallIcon":820,"../item_menu_list/ItemMenuList":885,"../popover/Popover":932,"prop-types":"prop-types",react:"react"}],884:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.project,r=e.isShared,n=a(e,["project","isShared"]),i="app#project/".concat(t.id);return s.default.createElement("a",o({href:i,className:"project_item"},n),s.default.createElement(c.default,{className:"project_item__name",text:t.name}),s.default.createElement(d.default,{color:t.color,
isShared:r}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var s=n(e("react")),u=n(e("prop-types")),c=n(e("../formatter/PlainText")),d=n(e("../icons/ProjectIcon"));l.propTypes={project:u.default.object.isRequired}},{"../formatter/PlainText":762,"../icons/ProjectIcon":828,"prop-types":"prop-types",react:"react"}],885:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.item,r=e.user,n=e.onSelectAddAbove,o=e.onSelectAddBelow,i=e.onSelectEdit,b=e.onMoveToProject,w=e.onArchive,E=e.onDelete,j=e.onDuplicate,O=e.onLinkCopy,S=e.onUpdate;return a.default.createElement(l.MenuList,{className:"item_menu_list","aria-label":_x("a11y","task edit menu")},n?a.default.createElement(l.IconMenuItem,{text:_("Add task above"),icon:a.default.createElement(u.default,null),onClick:function(){return n(t.id)}}):null,o?a.default.createElement(l.IconMenuItem,{text:_("Add task below"),icon:a.default.createElement(c.default,null),onClick:function(){return o(t.id)}}):null,a.default.createElement(l.IconMenuItem,{text:_("Edit task"),icon:a.default.createElement(d.default,null),onClick:function(){return i(t.id)}}),a.default.createElement(l.MenuSeparator,null),a.default.createElement(f.default,{item:t,user:r,onSelect:function(e){return S({id:t.id,due:e})}}),a.default.createElement(s.default,{selected:t.priority,onSelect:function(e){return S({id:t.id,priority:e})}}),a.default.createElement(l.MenuSeparator,null),a.default.createElement(g.default,{item:t}),a.default.createElement(l.MenuSeparator,null),a.default.createElement(v.default,{onMoveToProject:b,item:t}),a.default.createElement(l.IconMenuItem,{text:_("Archive task"),icon:a.default.createElement(p.default,null),onClick:function(){return w(t.id)}}),a.default.createElement(l.IconMenuItem,{text:_("Duplicate"),icon:a.default.createElement(m.default,null),onClick:function(){return j(t.id)}}),a.default.createElement(l.IconMenuItem,{text:_("Copy link to task"),icon:a.default.createElement(h.default,null),onClick:function(){return O(t.id)}}),a.default.createElement(l.MenuSeparator,null),a.default.createElement(l.IconMenuItem,{className:"danger_menu",text:_("Delete task"),icon:a.default.createElement(y.default,null),onClick:function(){return E(t.id)}}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=e("../menu_list"),s=n(e("./PrioritySelectorMenu")),u=n(e("../icons/AddAboveIcon")),c=n(e("../icons/AddBelowIcon")),d=n(e("../icons/EditIcon")),f=n(e("./ScheduleMenu")),p=n(e("../icons/ArchiveIcon")),m=n(e("../icons/DuplicateIcon")),h=n(e("../icons/LinkIcon")),y=n(e("../icons/DeleteIcon")),v=n(e("./MoveToProjectMenu")),g=n(e("./RemindersMenu"));o.propTypes={item:i.default.object.isRequired,user:i.default.object.isRequired,onSelectAddAbove:i.default.func,onSelectAddBelow:i.default.func,onSelectEdit:i.default.func.isRequired,onArchive:i.default.func.isRequired,onMoveToProject:i.default.func.isRequired,onDelete:i.default.func.isRequired,onUpdate:i.default.func.isRequired,onLinkCopy:i.default.func.isRequired,onDuplicate:i.default.func.isRequired}},{"../icons/AddAboveIcon":773,"../icons/AddBelowIcon":774,"../icons/ArchiveIcon":777,"../icons/DeleteIcon":794,"../icons/DuplicateIcon":798,"../icons/EditIcon":799,"../icons/LinkIcon":814,"../menu_list":907,"./MoveToProjectMenu":886,"./PrioritySelectorMenu":887,"./RemindersMenu":888,"./ScheduleMenu":889,"prop-types":"prop-types",react:"react"}],886:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){var t=e.item,r=e.onMoveToProject;return i.default.createElement(c.default,{onSelect:function(e){var n=e.project_id,o=e.section_id;r({id:t.id,project_id:n,section_id:o})},selectedProjectId:t.project_id,selectedSectionId:t.section_id,withSectionSelection:!0},function(e){var t=e.toggle,r=e.buttonProps;return i.default.createElement(u.IconMenuItem,o({text:_("Move to project"),icon:i.default.createElement(s.MoveIcon,null)},r,{onClick:t}))})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var i=n(e("react")),l=n(e("prop-types")),s=e("../icons"),u=e("../menu_list"),c=n(e("../project_picker"));a.propTypes={item:l.default.object,onMoveToProject:l.default.func}},{"../icons":842,"../menu_list":907,"../project_picker":955,"prop-types":"prop-types",react:"react"}],887:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.selected,r=e.onSelect,n=function(e){return a.default.createElement(f,{key:e,priority:e,selected:t===e,onSelect:r})};return a.default.createElement(u.default,{title:_("Priority")},a.default.createElement("div",{className:"priority_list",role:"menu","aria-label":_("Priority")},[1,2,3,4].map(function(e){return n(e)})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("../icons/PriorityIcon")),u=n(e("../menu_list/SectionMenuItem")),c=n(e("@doist/reactist/lib/Tooltip")),d=e("../utils"),f=function(e){var t,r=e.priority,n=e.selected,o=e.onSelect,i=(0,l.default)(["priority_item","icon_priority_".concat(r),n?"is_selected":null]);switch(r){case 1:t=_("Priority 4");break;case 2:t=_("Priority 3");break;case 3:t=_("Priority 2");break;case 4:t=_("Priority 1")}var u=function(){return o(r)};return a.default.createElement(c.default,{delayShow:0,text:t,position:"bottom"},a.default.createElement("span",{className:i,role:"menuitemradio","aria-checked":n,"aria-label":t,tabIndex:"0",onKeyDown:(0,d.createKeyboardClickHandler)(u),onClick:u},a.default.createElement(s.default,{priority:r})))};f.propTypes={onSelect:i.default.func,priority:i.default.oneOf([1,2,3,4]),selected:i.default.bool},o.propTypes={onSelect:i.default.func.isRequired,selected:i.default.oneOf([1,2,3,4])}},{"../icons/PriorityIcon":826,"../menu_list/SectionMenuItem":906,"../utils":1078,"@doist/reactist/lib/Tooltip":177,classnames:"classnames","prop-types":"prop-types",react:"react"}],888:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){var t=e.item;return i.default.createElement(c.default,{item:t},function(e){return i.default.createElement(u.IconMenuItem,o({text:_("Reminders"),icon:i.default.createElement(s.default,null)},e))})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var i=n(e("react")),l=n(e("prop-types")),s=n(e("../icons/ReminderIcon")),u=e("../menu_list"),c=n(e("../reminders_picker"));a.propTypes={item:l.default.object}},{"../icons/ReminderIcon":832,"../menu_list":907,"../reminders_picker":987,"prop-types":"prop-types",react:"react"}],889:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t,r=e.user,n=e.item,o=e.onSelect,a=new Date,i=function(e){return function(){var t=b.default.fromDate(e,{with_time:!0});o(t)}};if(n&&n.due)t=u.default.createElement(S,{item:n,onSelect:o});else{var l=new Date;l.setDate(a.getDate()),t=u.default.createElement(j.default,{tip:_("Tomorrow"),icon:u.default.createElement(m.default,null),onClick:i(l)})}return u.default.createElement(d.default,{title:_("Schedule")},u.default.createElement("div",{className:"scheduler_holder"},u.default.createElement("div",{className:"icon_list",role:"menu","aria-label":_("Schedule")},u.default.createElement(g.default,{item:n,onSelect:o}),u.default.createElement(j.default,{tip:_("Today"),onClick:i(a),icon:u.default.createElement(f.default,{date:a.getDate()})}),t,u.default.createElement(j.default,{tip:_("Next week"),onClick:i((0,v.nextWeek)(r)),icon:u.default.createElement(p.default,null)}),u.default.createElement(O,{item:n,onSelect:o}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../menu_list/SectionMenuItem")),f=n(e("../icons/CalendarDateIcon")),p=n(e("../icons/CalendarNextWeekIcon")),m=n(e("../icons/CalendarSunIcon")),h=n(e("../icons/MoreIcon.jsx")),y=n(e("../icons/PostponeIcon")),v=e("../../utils"),g=n(e("./SmartScheduleMenuItem")),b=n(e("../../models/DateExt")),w=n(e("../scheduler/SchedulerDialog")),E=n(e("../TemplateText")),j=n(e("./ScheduleMenuItem"));s.propTypes={item:c.default.object.isRequired,user:c.default.object.isRequired,onSelect:c.default.func.isRequired};var O=function(e){var t=e.item,r=e.onSelect,n=(0,u.useState)(null),a=o(n,2),i=a[0],l=a[1],s=function(e){l(i?null:e.currentTarget)};return u.default.createElement(u.default.Fragment,null,u.default.createElement(j.default,{tip:_("More"),icon:u.default.createElement(h.default,null),onClick:s}),i?u.default.createElement(w.default,{anchor:i,selectedItems:[t],onHide:function(){return l(null)},onDateSelect:function(e){r(e),l(null)}}):null)};O.propTypes={item:c.default.object.isRequired,onSelect:c.default.func.isRequired};var S=function(e){var t=e.item,r=e.onSelect,n=t.due.postpone(),o=u.default.createElement(E.default,{text:_("Postpone to {date}"),keyval:{date:u.default.createElement("b",null,n.relativeFormat())}}),a=(0,v.format)(_("Postpone to {date}"),{date:n.relativeFormat()});return u.default.createElement(j.default,{tip:o,"aria-label":a,icon:u.default.createElement(y.default,null),onClick:function(){return r(n)}})};S.propTypes={item:c.default.object.isRequired,onSelect:c.default.func.isRequired}},{"../../models/DateExt":152,"../../utils":1176,"../TemplateText":657,"../icons/CalendarDateIcon":782,"../icons/CalendarNextWeekIcon":785,"../icons/CalendarSunIcon":786,"../icons/MoreIcon.jsx":819,"../icons/PostponeIcon":825,"../menu_list/SectionMenuItem":906,"../scheduler/SchedulerDialog":1008,"./ScheduleMenuItem":890,"./SmartScheduleMenuItem":891,"prop-types":"prop-types",react:"react"}],890:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.tip,r=e.icon,n=e.className,i=a(e,["tip","icon","className"]);return s.default.createElement(f.default,{text:t,delayShow:0,position:"bottom"},s.default.createElement(d.default,o({role:"menuitem","aria-label":i["aria-label"]||t,className:(0,c.default)("icon_scheduler",n)},i),r))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var s=n(e("react")),u=n(e("prop-types")),c=n(e("classnames")),d=n(e("../Button")),f=n(e("@doist/reactist/lib/Tooltip"));l.propTypes={tip:u.default.node.isRequired,icon:u.default.node.isRequired}},{"../Button":648,"@doist/reactist/lib/Tooltip":177,classnames:"classnames","prop-types":"prop-types",react:"react"}],891:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.item,r=e.onSelect,n=(0,u.useState)(null),a=o(n,2),i=a[0],l=a[1];if((0,u.useEffect)(function(){(0,h.predictItemDuedate)([t],function(e,t){if(e){var r=f.default.fromDate(e[0],{with_time:!0});l(r)}t&&l(t)})},[t]),!i)return u.default.createElement(y.default,{className:"smart_schedule_item_loading",icon:u.default.createElement(d.default,null)});if(i instanceof Error)return u.default.createElement(v.Transition,{in:!0,appear:!0,timeout:225},function(e){return u.default.createElement(y.default,{tip:_("No suggestions available"),className:"smart_schedule_item_error ".concat(e),icon:u.default.createElement(g.InfoIcon,null)})});var s=i.getDate();return u.default.createElement(v.Transition,{in:!0,appear:!0,timeout:225},function(e){return u.default.createElement(y.default,{onClick:function(){return r(i)},tip:u.default.createElement(p.default,{text:_("Suggested date: {date}"),keyval:{date:u.default.createElement("b",null,i.relativeFormat())}}),"aria-label":(0,m.format)(_("Suggested date: {date}"),{date:i.relativeFormat()}),className:"smart_schedule_item_result ".concat(e),icon:u.default.createElement(g.SmartScheduleResultIcon,{date:s})})})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../spinners/RingSpinner")),f=n(e("../../models/DateExt")),p=n(e("../TemplateText")),m=e("../../utils"),h=e("../../models/SmartSchedule"),y=n(e("./ScheduleMenuItem")),v=e("react-transition-group"),g=e("../icons");s.propTypes={item:c.default.object.isRequired,onSelect:c.default.func.isRequired}},{"../../models/DateExt":152,"../../models/SmartSchedule":164,"../../utils":1176,"../TemplateText":657,"../icons":842,"../spinners/RingSpinner":1066,"./ScheduleMenuItem":890,"prop-types":"prop-types",react:"react","react-transition-group":"react-transition-group"}],892:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./ItemMenuList")),o=n.default;r.default=o},{"./ItemMenuList":885}],893:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return l(e)||i(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function s(e){var t=e.projects,r=e.items,n=e.unitHeight,a=void 0===n?4:n,i=e.unitWidth,l=void 0===i?4:i,s=e.maxWidth,c=function(e){return t[e]?t[e].color:d.DEFAULT_COLOR},f=function(e,t){return c(e.project_id)-c(t.project_id)},p=o(r);return p.sort(f),s&&p.length*l>s&&(l=s/p.length),u.default.createElement("div",{className:"item_stat_bar"},p.map(function(e){var t={backgroundColor:(0,d.getHex)("project",c(e.project_id)),height:"".concat(a,"px"),width:"".concat(l,"px")};return u.default.createElement("div",{key:e.id,className:"color_block",style:t})}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=n(e("react")),c=n(e("prop-types")),d=e("../../models/Colors");s.propTypes={projects:c.default.object.isRequired,items:c.default.array.isRequired,unitHeight:c.default.number,unitWidth:c.default.number,maxWidth:c.default.number}},{"../../models/Colors":149,"prop-types":"prop-types",react:"react"}],894:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("react")),a=n(e("prop-types")),i=e("../icons"),l=function(e){var t=e.karmaLv,r=e.lang,n=s(e),a=n.title,i=n.subtitle,l=n.content,c=n.facebookText,d=n.twitterText;return o.default.createElement("div",{className:"karma_promo karma_cls_1 GB_iframe_html"},o.default.createElement("h1",null,a),o.default.createElement("h2",null,i),o.default.createElement("h3",null,l),o.default.createElement("div",{className:"bottom_holder"},o.default.createElement("div",{className:"share_icons"},u({facebook:!0,karmaLv:t,text:c,lang:r}),u({twitter:!0,karmaLv:t,lang:r,text:d}),u({googlePlus:!0,karmaLv:t,lang:r}))),o.default.createElement("a",{href:"/karma",className:"karma_help",target:"_blank"},_("Todoist Karma Help")))};l.propTypes={karmaLv:a.default.number,totalCompletedCount:a.default.number,lastMonthCompletedCount:a.default.number,topPercent:a.default.number,lang:a.default.string};var s=function(e){var t,r,n,o,a,i=e.karmaLv,l=e.totalCompletedCount,s=e.lastMonthCompletedCount,u=e.topPercent;return 1===i?(t=_("Novice Level"),r=_("You keep progressing- great work!"),n=_("With 500 points, you've reached the Novice Todoist Karma level."),o=_("My @Todoist Karma gets better everyday :) With 500 points, I'm now a Novice!"),a=_("My Todoist Karma gets better everyday :) With 500 points, I'm now a Novice. What about you?")):2===i?(t=_("Intermediate Level"),r=_("Congratulations, you completed a total of %s tasks!").replace("%s",l),n=_("Be proud, your productivity is increasing every day! Keep it up and achieve anything."),o=_("I've completed %s tasks to reach Intermediate @Todoist Karma!").replace("%s",l),a=_("I've completed %s tasks to reach Todoist Karma's Intermediate level! Try Todoist and become more productive.").replace("%s",l)):3===i?(t=_("Professional Level"),r=_("You completed %s tasks last month").replace("%s",s),n=_("Feeling more productive than ever? Don't quit now, you're nearly half way to Enlightened!"),o=_("In the last month, I completed %s tasks to reach @Todoist Karma's Professional level!").replace("%s",s),a=_("Last month, I completed %s tasks and reached Todoist Karma's Professional level. Don't stop me now!").replace("%s",s)):4===i?(t=_("Expert Level"),r=_("Your productivity truly has no bounds"),n=_("Stay focused, be productive and keep progressing. You'll be Enlightened in no time!"),o=_("I've completed %s tasks, and now I'm a productivity @Todoist Expert!").replace("%s",l),a=_("Last month, I completed %s tasks and reached Todoist Karma's Professional level. Don't stop me now!")):5===i?(t=_("Master Level"),r=_("We salute you, Master Todoist user!"),n=_("You've reached an important threshold\u2013 over 10,000 impressive karma points."),o=_("With more than 10,000 points, I'm now a @Todoist Karma Master! #ProductivityMaster"),a=_("With more than 10,000 points, I'm now a Todoist Karma Master! #ProductivityMaster")):6===i?(t=_("Grand Master Level"),r=_("You're just one level from Enlightenment"),n=_("Be proud- your Karma has skyrocketed to over 20,000 points after completing %s tasks.").replace("%s",l),o=_("I'm the #productivity Grand Master \u2013 with over 20k @Todoist Karma points!"),a=_("I'm the #productivity Grand Master \u2013 with over 20k Todoist Karma points and %s completed tasks!").replace("%s",l)):7===i&&(t=_("Enlightened Level"),r=_("You did it. You're now in the exclusive %s%% of Todoist users!").replace("%s",u).replace("%%","%"),n=_("You've completed an impressive total of %s tasks!").replace("%s",l),o=_("I have joined the exclusive %s of Todoist users! Reaching @Todoist Karma Enlightenment!").replace("%s",u),a=_("I have joined the exclusive %s of Todoist users! Reaching Todoist Karma Enlightenment!").replace("%s",u)),{title:t,subtitle:r,content:n,twitterText:o,facebookText:a}},u=function(e){var t,r,n,a=e.facebook,l=e.twitter,s=e.googlePlus,u=e.karmaLv,c=e.text,d=e.lang,f="https://".concat(location.host,"/karma/").concat(d,"/").concat(u,"/2?lang=").concat(d),p={FacebookIcon:i.FacebookIcon,TwitterIcon:i.TwitterIcon,GooglePlusIcon:i.GooglePlusIcon};return a&&(t="https://www.facebook.com/sharer.php?u=".concat(f),r="facebook",n=p.FacebookIcon),s&&(t="https://plus.google.com/share?url=".concat(f),r="gplus",n=p.GooglePlusIcon),l&&(t=c+" "+f,t=$urlencode(t),t="https://twitter.com/home?status=".concat(t),r="twitter",n=p.TwitterIcon),o.default.createElement("a",{href:t,className:r,target:"_blank",rel:"noopener noreferrer"},o.default.createElement(n,null))},c=l;r.default=c},{"../icons":842,"prop-types":"prop-types",react:"react"}],895:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s.default.getTotalCompletedCount(),n=DIV(),o={karmaLv:e,totalCompletedCount:r,lang:window.LANG,lastMonthCompletedCount:t.completed_last_month,topPercent:t.top_procent};GB_showHTML("",n,300,450,{close_validator_fn:function(){return i.default.unmountComponentAtNode(n),!0}}),i.default.render(a.default.createElement(l.default,o),n)}Object.defineProperty(r,"__esModule",{value:!0}),r.show=o;var a=n(e("react")),i=n(e("react-dom")),l=n(e("./KarmaPromotion")),s=n(e("../../models/ItemsModel.js"));window.showKarmaPromotion=function(e,t){o(e,t)}},{"../../models/ItemsModel.js":155,"./KarmaPromotion":894,react:"react","react-dom":"react-dom"}],896:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e,t){return u(e)||s(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function u(e){if(Array.isArray(e))return e}function c(e){var t=e.label;return p.default.createElement(g.Option,{value:t.name,label:t.name,className:"label_picker_option"},function(e){var r=e.checkedStatus;return p.default.createElement(p.default.Fragment,null,p.default.createElement("span",{"aria-hidden":"true",style:{color:(0,h.getHex)("label",t.color)}},p.default.createElement(E.LabelIcon,null)),p.default.createElement("span",{className:"label_picker_option_name"},t.name),p.default.createElement("span",{"aria-hidden":"true"},p.default.createElement(j.default,{checkedStatus:r})))})}function d(e){function t(e){e.stopPropagation();var t=o(i);l({type:g.ACTION.SELECT_OPTION,optionValue:t.name})}var r=e.personalLabels,n=e.sharedLabels,o=e.onLabelAdd,a=p.default.useContext(g.Context),i=a.searchText,l=a.dispatch,s=0===i.trim().length,u=s||0===r.length?r:(0,y.labelGetBySearch)({labels:r},i),d=s||0===n.length?n:(0,y.labelGetBySearch)({labels:n},i);return 0!==u.length||0!==d.length||s?p.default.createElement(g.Options,null,u.map(function(e){return p.default.createElement(c,{key:e.name,label:e})}),d.length>0&&p.default.createElement(g.OptionSeparator,null,_("Shared")),d.map(function(e){return p.default.createElement(c,{key:e.name,label:e})})):p.default.createElement(g.Options,{className:"label_picker_empty"},p.default.createElement(g.OptionSeparator,null,_("Label not found")),p.default.createElement("li",null,p.default.createElement(v.default,{onClick:t},p.default.createElement(E.CreateIcon,null),_('Create "{query}"').replace("{query}",i))))}function f(e){function t(e){if(!u)return void j(!0);e()}var r=e.children,n=e.personalLabels,o=e.sharedLabels,l=e.value,s=e.partiallySelectedValues,u=e.isPremium,c=e.onLabelAdd,f=void 0===c?function(){}:c,m=e.onChange,h=(0,p.useState)(!1),y=i(h,2),E=y[0],j=y[1],O=function(){j(!1)};return p.default.createElement(p.default.Fragment,null,p.default.createElement(g.Select,{multiple:!0,value:l,partiallySelectedValues:s,onChange:m},p.default.createElement(g.Toggle,null,function(e){var n=e.toggleDropdown,o=e.buttonProps;return p.default.createElement(v.default,a({},o,{className:"item_action",onClick:function(){return t(n)}}),r)}),p.default.createElement(g.Popup,{className:"label_picker"},p.default.createElement(g.Search,{placeholder:_("Type a label")}),p.default.createElement(d,{personalLabels:n,sharedLabels:o,onLabelAdd:f}))),p.default.createElement(b.default,{show:E,onClickOutside:O,width:450},p.default.createElement(w.PremiumModal,{feature:"FEATURE_LABEL",onClose:O})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=o(e("react")),m=n(e("prop-types")),h=e("../../models/Colors"),y=e("../../reducers/labels"),v=n(e("../Button")),g=o(e("../dropdown")),b=n(e("../Modal")),w=e("../../containers/premium_promo/PremiumOnlyModal"),E=e("../icons"),j=n(e("./OptionIcon"));c.propTypes={label:m.default.object.isRequired},d.propTypes={personalLabels:m.default.array.isRequired,sharedLabels:m.default.array.isRequired,onLabelAdd:m.default.func},f.propTypes={personalLabels:m.default.array.isRequired,sharedLabels:m.default.array.isRequired,value:m.default.arrayOf(m.default.string.isRequired).isRequired,partiallySelectedValues:m.default.arrayOf(m.default.string.isRequired),isPremium:m.default.bool,onLabelAdd:m.default.func,onChange:m.default.func.isRequired};var O=f;r.default=O},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/Colors":149,"../../reducers/labels":1105,"../Button":648,"../Modal":654,"../dropdown":700,"../icons":842,"./OptionIcon":897,"prop-types":"prop-types",react:"react"}],897:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.checkedStatus;return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.default.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:l[t]}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l={true:"M18 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h12zm-2.457 4.293l-5.293 5.293-1.793-1.793a1 1 0 1 0-1.414 1.414l2.5 2.5a1 1 0 0 0 1.414 0l6-6a1 1 0 1 0-1.414-1.414z",mixed:"M18 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h12zm-2 7H8a1 1 0 0 0 0 2h8a1 1 0 0 0 0-2z",false:"M18 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h12zm0 1H6a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z"};o.propTypes={checkedStatus:i.default.oneOf(["true","false","mixed"]).isRequired};var s=o;r.default=s},{"prop-types":"prop-types",react:"react"}],898:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e("react-redux"),i=e("../../reducers/labels"),l=e("../../reducers/user"),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./LabelPicker")),u=function(e){return{personalLabels:(0,i.labelGetAllPersonal)(e),sharedLabels:(0,i.labelGetAllShared)(e),maxLabelItemOrder:(0,i.labelGetMaxOrder)(e)+1,isPremium:(0,l.isPremium)(e)}},c=function(e){return{onLabelAdd:function(t,r){return e((0,i.labelAdd)({name:t,item_order:r}))}}},d=function(e,t,r){return n({},e,t,r,{onLabelAdd:function(r){return t.onLabelAdd(r,e.maxLabelItemOrder)}})},f=(0,a.connect)(u,c,d)(s.default);r.default=f},{"../../reducers/labels":1105,"../../reducers/user":1135,"./LabelPicker":896,"react-redux":"react-redux"}],899:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){var t=e.labelName,r=(0,p.default)(),n=r,a=(0,c.itemGetUncompleted)(n).filter(function(e){return e.labels&&e.labels.some(function(e){return e===t})}),u=(0,i.useSelector)(s.totalCompleted);return 0===a.length?l.default.createElement("div",{id:"agenda_view"},u<20?l.default.createElement(d.EmptyStateLabelNew,null):l.default.createElement(d.EmptyStateLabelZero,null)):l.default.createElement("div",{id:"agenda_view"},l.default.createElement(m.ViewHeader,{header:t}),l.default.createElement(f.default,o({rootItemIds:a.map(function(e){return e.id}),allowAdd:{defaultFields:{labels:[t]}}},r)))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var i=e("react-redux"),l=n(e("react")),s=e("../../reducers/stats"),u=n(e("prop-types")),c=e("../../reducers/items"),d=e("../emptyState"),f=n(e("../item_list/RootItemList")),p=n(e("../item_list/useRootItemListProps")),m=e("../view");a.yropTypes={labelName:u.default.string.isRequired}},{"../../reducers/items":1100,"../../reducers/stats":1130,"../emptyState":731,"../item_list/RootItemList":868,"../item_list/useRootItemListProps":872,"../view":1081,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],900:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./LabelView")),o=n.default;r.default=o},{"./LabelView":899}],901:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0
;var m=e("../../utils"),h=e("react-redux"),y=n(e("react")),v=n(e("prop-types")),g=n(e("../top_menu")),b=n(e("../icons/PlusIcon")),w=n(e("../expansion_panel")),E=n(e("../../components/projects_list/ProjectList")),j=e("../../reducers/selectors"),O=n(e("../Button")),S=n(e("../sidebar_filters_panel")),P=n(e("../sidebar_labels_panel")),I=e("../edit_project_modal"),k=function(e){function t(e){var r;a(this,t),r=s(this,u(t).call(this,e)),p(c(r),"oldComponentRendered",!1),p(c(r),"savePanelState",(0,m.debounce)(function(){localStorage.setItem("panels",JSON.stringify(r.state))},1e3)),p(c(r),"createPanelHandler",function(e){return function(){r.setState(function(t){return p({},e,!t[e])}),r.savePanelState();for(var t=0,n=[0,100,200,300,400];t<n.length;t++){var o=n[t];setTimeout(r.handleStickyHeaders,o)}}}),p(c(r),"handleFilterChange",r.createPanelHandler("filterOn")),p(c(r),"handleLabelChange",r.createPanelHandler("labelOn")),p(c(r),"handleProjectChanage",r.createPanelHandler("projectOn")),p(c(r),"handleProjectAddClick",function(){var e=r.state.projectOn;(0,I.showAddProjectModal)({addAbove:!0}),e||r.setState({projectOn:!0})}),p(c(r),"showEditorStream",function(e){r.showEditorStreamCallback=e}),r.state={projectOn:!0,filterOn:!1,labelOn:!1},r.leftMenuHolder=y.default.createRef(),r.handleStickyHeaders=r.handleStickyHeaders.bind(c(r));var n=r.loadPanelState();return n&&(r.state=n),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loaded&&!this.oldComponentRendered&&this.renderOldComponent(),this.panelSummaries=this.leftMenuHolder.current.getElementsByClassName("expansion_panel__header"),this.leftMenuHolder.current.addEventListener("click",this.handleStickyHeaders),this.leftMenuHolder.current.addEventListener("scroll",this.handleStickyHeaders),Signals.connect("filterlist_open_edit",function(){e.setState({filterOn:!0})})}},{key:"componentWillUnmount",value:function(){this.panelSummaries=null,this.leftMenuHolder.current.removeEventListener("click",this.handleStickyHeaders),this.leftMenuHolder.current.removeEventListener("scroll",this.handleStickyHeaders)}},{key:"componentWillReceiveProps",value:function(e){e.loaded&&!this.oldComponentRendered&&this.renderOldComponent()}},{key:"renderOldComponent",value:function(){this.oldComponentRendered||(E.default.initWithData(),E.default.render(),this.oldComponentRendered=!0)}},{key:"loadPanelState",value:function(){try{var e=localStorage.getItem("panels");return e?JSON.parse(e):null}catch(e){}}},{key:"handleStickyHeaders",value:function(){var e=44;window.MINI_VERSION&&(e=35);var t=document.getElementById("top_filters"),r=t.offsetTop+t.offsetHeight-e,n=this.leftMenuHolder.current.scrollTop;if(n<r){var o=!0,a=!1,i=void 0;try{for(var l,s=this.panelSummaries[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){l.value.style.top="auto"}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}}else{var u=!0,c=!1,d=void 0;try{for(var f,p=this.panelSummaries[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var m=f.value,h=m.nextSibling.offsetTop-m.offsetHeight-e,_=h+m.nextSibling.offsetHeight;m.style.top=n>=h&&n<=_?n-h+"px":n>=_?_-h+"px":"auto"}}catch(e){c=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}}}},{key:"render",value:function(){var e=this.props.loaded,t=this.state,r=t.projectOn,n=t.filterOn,o=t.labelOn;return y.default.createElement("div",{id:"left_menu",className:"left_menu",ref:this.leftMenuHolder},y.default.createElement("div",{id:"list_holder"},e?y.default.createElement(g.default,null):null,y.default.createElement(w.default,{title:_("Projects"),isExpanded:r,onToggleExpand:this.handleProjectChanage,track:"navigation|projects_panel",headerSideButton:y.default.createElement(O.default,{className:"adder_icon",onClick:this.handleProjectAddClick,"data-track":"navigation|projects_quick_add"},y.default.createElement(b.default,null))},y.default.createElement("ul",{id:"projects_list",className:"items generic_left_list"}),y.default.createElement("div",{id:"projects_list_manager",className:"left_list_manager_holder"})),e&&y.default.createElement(P.default,{expanded:o,onTogglePanel:this.handleLabelChange}),e&&y.default.createElement(S.default,{expanded:n,onTogglePanel:this.handleFilterChange})))}}]),t}(y.default.Component);p(k,"propTypes",{loaded:v.default.bool.isRequired});var T=function(e){return{loaded:(0,j.dataLoaded)(e)}},C=(0,h.connect)(T)(k);r.default=C},{"../../components/projects_list/ProjectList":71,"../../reducers/selectors":1128,"../../utils":1176,"../Button":648,"../edit_project_modal":714,"../expansion_panel":757,"../icons/PlusIcon":824,"../sidebar_filters_panel":1056,"../sidebar_labels_panel":1061,"../top_menu":1075,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],902:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("prop-types")),u=e("../utils"),c=n(e("classnames")),d=l.default.forwardRef(function(e,t){var r=e.text,n=e.icon,i=e.className,s=a(e,["text","icon","className"]);return l.default.createElement("li",o({role:"menuitem",tabIndex:0,ref:t,onKeyDown:(0,u.createKeyboardClickHandler)(s.onClick),className:(0,c.default)("menu_item","icon_menu_item",i)},s),l.default.createElement("div",{className:"icon_menu_item__icon","aria-hidden":!0},n),l.default.createElement("div",{className:"icon_menu_item__content"},r))});d.propTypes={text:s.default.string.isRequired,icon:s.default.node.isRequired};var f=d;r.default=f},{"../utils":1078,classnames:"classnames","prop-types":"prop-types",react:"react"}],903:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.children,r=a(e,["children"]);return s.default.createElement("li",o({className:"menu_item",role:"menuitem",tabIndex:0},r),t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var s=n(e("react")),u=n(e("prop-types"));l.propTypes={children:u.default.node.isRequired}},{"prop-types":"prop-types",react:"react"}],904:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.children,r=e.className,n=a(e,["children","className"]);return s.default.createElement(d.Transition,{in:!0,appear:!0,timeout:80},function(e){return s.default.createElement("ul",o({role:"menu",className:(0,c.default)("menu_list",r,e)},n),t)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var s=n(e("react")),u=n(e("prop-types")),c=n(e("classnames")),d=e("react-transition-group");l.propTypes={children:u.default.node.isRequired,className:u.default.string}},{classnames:"classnames","prop-types":"prop-types",react:"react","react-transition-group":"react-transition-group"}],905:[function(e,t,r){"use strict";function n(){return o.default.createElement("li",{className:"menu_separator","aria-hidden":!0})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],906:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.title,r=e.children;return a.default.createElement("li",{className:"section_menu_item prority_selector_menu"},t?a.default.createElement("div",{className:"section_menu_label"},t):null,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types"));o.propTypes={title:i.default.string,children:i.default.node.isRequired}},{"prop-types":"prop-types",react:"react"}],907:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"IconMenuItem",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"MenuItem",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"MenuList",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"MenuSeparator",{enumerable:!0,get:function(){return l.default}});var o=n(e("./IconMenuItem")),a=n(e("./MenuItem")),i=n(e("./MenuList")),l=n(e("./MenuSeparator"))},{"./IconMenuItem":902,"./MenuItem":903,"./MenuList":904,"./MenuSeparator":905}],908:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var g=n(e("react")),b=n(e("prop-types")),w=n(e("@doist/reactist/lib/Tooltip")),E=n(e("../Button")),j=e("../icons"),O=e("../../plugin_version/ContentTransformers"),S=function(e){function t(){var e,r;u(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=f(this,(e=p(t)).call.apply(e,[this].concat(o))),v(m(r),"handleClick",function(){var e=r.props,t=e.options,n=e.onFileUpload,o=new window.GFile,i=new TEXTAREA;t.annotate_fn(i);var l,s=i.value,u=O.ContentTransformers.onContentSave(s),c=O.ContentTransformers.type;if("gmail_new"==c)l="td/gmail";else if("outlook"==c)l="td/outlook";else if("thunderbird"==c)l="td/thunderbird";else{l="td/hyperlink";var d=window.PluginVersion.getTitleAndUrl(),f=a(d,2);s=f[0],u=f[1]}return o.setUploadContent({file_url:u,file_name:s,fileType:l}),n(o),O.ContentTransformers.onContollerHide(),!1}),r}return h(t,e),d(t,[{key:"getTooltipText",value:function(){var e=this.props.options;return e.annotate_attach_text?e.annotate_attach_text:e.is_email?_("Attach email to comment"):_("Attach website to comment")}},{key:"render",value:function(){return this.props.options?g.default.createElement(w.default,{delayShow:0,text:this.getTooltipText(),position:"top"},g.default.createElement(E.default,{onClick:this.handleClick,className:"ist_button ist_button_upload_btn ist_button_mini"},g.default.createElement(j.ExternalAttachmentIcon,null))):null}}]),t}(g.default.Component);r.default=S,v(S,"propTypes",{options:b.default.object,onFileUpload:b.default.func.isRequired})},{"../../plugin_version/ContentTransformers":641,"../Button":648,"../icons":842,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],909:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("./Website")),_=n(e("./Image")),y=n(e("./Icon")),v=n(e("./Audio")),g=n(e("../../../containers/ErrorBoundary")),b=e("../utils"),w=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"getFileType",value:function(){var e=this.props.attachment;return e.file_underlying_type||e.file_type||""}},{key:"getFileName",value:function(){var e=this.props.attachment;return"string"==typeof e.file_name?e.file_name.toLowerCase()||"":""}},{key:"getFileURL",value:function(){var e=this.props.attachment;return"string"==typeof e.file_url?e.file_url.toLowerCase()||"":""}},{key:"renderIconAttachment",value:function(e){var t=this.props.attachment;return p.default.createElement(y.default,{attachment:t,icon:e})}},{key:"isWebsite",value:function(e){var t=e.resourceType,r=e.attachment;return("website"===t||"rich"===t)&&r.title&&r.url}},{key:"isImage",value:function(e){var t=e.attachment;return(t.file_url||t.url)&&(t.image||t.tn_m)}},{key:"isOutlook",value:function(e){return"outlook/mail"===e.resourceType}},{key:"isLink",value:function(e){return 0===e.ftype.indexOf("td/hyperlink")}},{key:"isEmail",value:function(e){return 0===e.ftype.indexOf("td/")}},{key:"isAudio",value:function(e){var t=e.attachment,r=e.ftype;return t.file_url&&(-1!==t.file_url.indexOf("cloudfront.net")||-1!==t.file_url.indexOf("files.todoist.com"))&&-1!==r.indexOf("audio/")&&(0,b.canPlayAudio)(r)}},{key:"isPDF",value:function(e){return-1!==e.ftype.indexOf("pdf")}},{key:"isExcel",value:function(e){var t=e.fname,r=e.ftype;return-1!==t.indexOf(".xl")||-1!==r.indexOf("spreadsheet")}},{key:"isCode",value:function(e){var t=e.fname;return-1!==t.indexOf(".py")||-1!==t.indexOf(".php")||-1!==t.indexOf(".java")||-1!==t.indexOf(".rb")||-1!==t.indexOf(".js")}},{key:"isExtemail",value:function(e){var t=e.ftype,r=e.furl,n=e.attachment;return-1!==t.indexOf("/extemail")||-1!==r.indexOf(".email.")||"email"===n.resource_type}},{key:"renderContent",value:function(){var e=this.props.attachment;if(!e)return null;var t=this.getFileType(),r=this.getFileName(),n=this.getFileURL(),o=e.resource_type||"file",a={ftype:t,fname:r,furl:n,resourceType:o,attachment:e};return this.isWebsite(a)?p.default.createElement(h.default,{attachment:e}):this.isImage(a)?p.default.createElement(_.default,{attachment:e}):this.isOutlook(a)?this.renderIconAttachment("ft_outlook_mail"):this.isLink(a)?this.renderIconAttachment("ft_link"):this.isEmail(a)?this.renderIconAttachment("ft_email"):this.isAudio(a)?p.default.createElement(v.default,{attachment:e}):this.isPDF(a)?this.renderIconAttachment("ft_pdf"):this.isExcel(a)?this.renderIconAttachment("ft_excel"):-1!==r.indexOf(".doc")||-1!==t.indexOf("document")?this.renderIconAttachment("ft_word"):-1!==r.indexOf(".pp")?this.renderIconAttachment("ft_pp"):-1!==r.indexOf(".zip")?this.renderIconAttachment("ft_zip"):-1!==r.indexOf(".psd")?this.renderIconAttachment("ft_psd"):-1!==r.indexOf(".sketch")?this.renderIconAttachment("ft_sketch"):-1!==r.indexOf(".aep")?this.renderIconAttachment("ft_aep"):-1!==r.indexOf(".ai")?this.renderIconAttachment("ft_ai"):this.isCode(a)?this.renderIconAttachment("ft_code"):this.isExtemail(a)?this.renderIconAttachment("ft_extemail"):0===t.indexOf("text/")?this.renderIconAttachment("ft_text"):this.renderIconAttachment("ft_generic")}},{key:"render",value:function(){return p.default.createElement(g.default,{showErrorMsg:!1},this.renderContent())}}]),t}(p.default.Component);r.default=w,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(w,"propTypes",{attachment:m.default.object})},{"../../../containers/ErrorBoundary":100,"../utils":928,"./Audio":910,"./Icon":911,"./Image":912,"./Website":913,"prop-types":"prop-types",react:"react"}],910:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.attachment,r={__html:svgs.getString("sm1/audio_stop.svg",{className:"icon_stop"})},n={__html:svgs.getString("sm1/audio_play.svg",{className:"icon_play"})},o={__html:svgs.getString("sm1/link.svg")};return a.default.createElement(l.default,{duration:t.file_duration,src:t.file_url},function(e){var i=e.play,l=e.stop,c=e.time,d=e.isPlaying,f=e.duration;return a.default.createElement("div",{className:"audio_player"},a.default.createElement("span",{className:"play_control ".concat(d?"on":"")},d?a.default.createElement(s.default,{onClick:l,dangerouslySetInnerHTML:r}):a.default.createElement(s.default,{onClick:i,dangerouslySetInnerHTML:n})),a.default.createElement("span",{className:"timer"},(0,u.formatTime)(d?c:f)),a.default.createElement("a",{href:t.file_url,className:"audio_link",rel:"noopener noreferrer",target:"_blank",dangerouslySetInnerHTML:o}))})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../AudioPlayer")),s=n(e("../../Button")),u=e("../utils");o.propTypes={attachment:i.default.object}},{"../../Button":648,"../AudioPlayer":915,"../utils":928,"prop-types":"prop-types",react:"react"}],911:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.attachment,r=e.icon;if("ft_outlook_mail"===r)return i.default.createElement("div",{className:"file_attachment"},i.default.createElement("span",{className:"text"},$trim(t.file_name||"",50)));if("ft_email"===r){var n=s.default.format(t.file_url);return i.default.createElement("div",{className:"file_attachment link_attachment",dangerouslySetInnerHTML:{__html:n}})}var o="ft_link"===r?"sm1/link.svg":"ft/".concat(r,".svg"),l="ft_link"===r?"link_icon":"file_icon",u=svgs.getString(o,{className:l});return i.default.createElement("div",{className:"file_attachment ".concat("ft_link"===r?"link_attachment":"")},i.default.createElement("a",{onClick:"ft_extemail"===r?function(){return a(t)}:void 0,href:t.file_url,target:"_blank",rel:"noopener noreferrer"},i.default.createElement("span",{dangerouslySetInnerHTML:{__html:u}}),i.default.createElement("span",{className:"text"},$trim(t.file_name||"",50))))}function a(e){GB_show(e.file_name,e.file_url,500,800);var t=DIV({c:"orginal_link"},A({href:e.file_url,target:"_blank"},_("View in another window"))),r=$last(GB_CURRENT);return $addAfter(t,r.iframe),!1}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var i=n(e("react")),l=n(e("prop-types")),s=n(e("../../../components/formatter/Formatter"));o.propTypes={attachment:l.default.object,icon:l.default.string}},{"../../../components/formatter/Formatter":22,"prop-types":"prop-types",react:"react"}],912:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var g=n(e("react")),b=n(e("@doist/reactist/lib/Tooltip")),w=n(e("prop-types")),E=n(e("../../reactist/modal")),j=e("../../icons"),O=e("../utils"),S=function(e){function t(){var e,r;u(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=f(this,(e=p(t)).call.apply(e,[this].concat(o))),v(m(r),"state",{showBigImage:!1}),v(m(r),"showBigImage",function(e){e.preventDefault(),r.setState({showBigImage:!0})}),v(m(r),"hideBigImage",function(){r.setState({showBigImage:!1})}),r}return h(t,e),d(t,[{key:"renderBigImage",value:function(){var e=this.props.attachment,t=this.state.showBigImage,r=this.getBigImageSource();return g.default.createElement(E.default.Box,{overlayProps:{className:"comments_attachment_big_image_modal"},width:"auto",isOpen:t,onDismiss:this.hideBigImage,closeOnOverlayClick:!0},g.default.createElement("div",{className:"comments_attachment_big_image_container"},g.default.createElement("img",{onClick:this.hideBigImage,className:"comments_attachment_big_image",src:r}),g.default.createElement("div",null,g.default.createElement("a",{href:e.file_url,rel:"noreferrer noopener",target:"_blank"},_("View full size in another window")))))}},{key:"getBigImageSource",value:function(){var e=this.props.attachment,t=e.file_url||e.url;return-1===t.indexOf("resizeist")?"https://image-resize.todoist.com/?url=".concat(encodeURIComponent(t),"&maxheight=1600&maxwidth=1600&fallback=true"):t}},{key:"getPreviewSource",value:function(){var e,t=this.props.attachment;if(e="image/svg+xml"===t.file_type?t.file_url:t.image?t.image:t.tn_m[0]){if(-1===e.indexOf("image-resize")&&"image/svg+xml"!==t.file_type){var r=Array.from((0,O.calculateOptimalDimension)(t.image_width||300,t.image_height||200,300,200)),n=a(r,2),o=n[0],i=n[1];return"https://image-resize.todoist.com/?url=".concat(encodeURIComponent(e),"&width=").concat(o,"&height=").concat(i,"&fallback=true")}return e}}},{key:"render",value:function(){var e=this.props.attachment,t=e.file_url||e.url,r=this.getPreviewSource();return r?g.default.createElement(g.default.Fragment,null,this.renderBigImage(),g.default.createElement("div",{className:"comments_attachment_container"},g.default.createElement("a",{href:t,onClick:this.showBigImage,className:"file_attachment with_preview",rel:"noreferrer noopener",target:"_blank"},g.default.createElement("img",{className:"comments_attachment_image",src:r})),g.default.createElement("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",className:"comments_attachment_download"},g.default.createElement(b.default,{delayShow:0,text:_("Download"),position:"bottom"},g.default.createElement(j.DownloadIcon,null))))):null}}]),t}(g.default.Component);r.default=S,v(S,"propTypes",{attachment:w.default.object})},{"../../icons":842,"../../reactist/modal":971,"../utils":928,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],913:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.attachment,r=d.default.createElement(c,{attachment:t}),n=d.default.createElement(u,{attachment:t}),o="file_attachment ".concat(r?"has_image":""," ").concat(n?"has_content":"");return d.default.createElement("div",{className:o},d.default.createElement("a",{href:t.url,target:"_blank",rel:"noreferrer noopener"},r,n))}function u(e){var t=e.attachment;return t.image&&-1!==t.image.indexOf(".gif")?null:d.default.createElement("div",{className:"content_holder"},t.title&&d.default.createElement("div",{className:"text"},$trim(t.title,65)),t.description&&d.default.createElement("div",{className:"desc_text"},$trim(t.description,200)))}function c(e){var t=e.attachment;if(!t.image)return null;var r=Array.from((0,p.calculateOptimalDimension)(t.image_width,t.image_height,120,90)),n=o(r,2),a=n[0],i=n[1],l=-1===t.image.indexOf("resizeist")?"https://image-resize.todoist.com/?url=".concat(encodeURIComponent(t.image),"&width=").concat(a,"&height=").concat(i,"&fallback=true"):t.image;return d.default.createElement("div",{className:"image_holder"},d.default.createElement("img",{src:l}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var d=n(e("react")),f=n(e("prop-types")),p=e("../utils");s.propTypes={attachment:f.default.object},u.propTypes={attachment:f.default.object},c.propTypes={attachment:f.default.object}},{"../utils":928,"prop-types":"prop-types",react:"react"}],914:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./Attachment")),o=n.default;r.default=o},{"./Attachment":909}],915:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("../reactist/modal")),v=n(e("../Button")),g=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{duration:0,error:null,showError:!1,isPlaying:!1,time:0}),p(c(r),"audioRef",m.default.createRef()),p(c(r),"handleError",function(){r.setState({error:!0})}),p(c(r),"handleLoading",function(){r.setState({duration:r.audioRef.current.duration})}),p(c(r),"handleStop",function(){clearInterval(r.timer);var e=r.audioRef.current;if(e)try{r.setState({isPlaying:!1,time:0}),e.pause(),e.currentTime=0}catch(e){}}),p(c(r),"handlePlay",function(){if(r.state.error)return void r.setState({showError:!0});var e=r.audioRef.current;e&&(e.play(),r.setState({isPlaying:!0}),r.handleStartTimer())}),p(c(r),"handleErrorModalClosing",function(){r.setState({showError:!1})}),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){this.audioRef.current&&(this.audioRef.current.addEventListener("error",this.handleError),this.audioRef.current.addEventListener("loadedmetadata",this.handleLoading))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.audioRef.current&&(this.audioRef.current.removeEventListener("error",this.handleError),this.audioRef.current.removeEventListener("loadedmetadata",this.handleLoading))}},{key:"getDuration",value:function(){return this.props.duration||this.state.duration}},{key:"handleStartTimer",value:function(){var e=this,t=this.getDuration();this.timer=setInterval(function(){e.setState(function(r){var n=r.time,o=n+1;return o>=Math.ceil(t)?(setTimeout(e.handleStop,0),void clearInterval(e.timer)):{time:o}})},1e3)}},{key:"renderErrorModal",value:function(){var e=this.props.src,t=this.state.showError;return m.default.createElement(y.default.Box,{isOpen:t},m.default.createElement(y.default.Body,null,m.default.createElement("span",null,_("There was an error loading the audio file. Maybe your browser does not support audio playback.")," ",m.default.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"
},_("Direct link to the file.")))),m.default.createElement(y.default.Actions,null,m.default.createElement(v.default,{onClick:this.handleErrorModalClosing},_("OK"))))}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.src,n=this.state,o=n.isPlaying,a=n.time,i=n.duration,l=t({time:a,isPlaying:o,play:this.handlePlay,stop:this.handleStop,duration:i});return m.default.createElement(m.default.Fragment,null,l,m.default.createElement("audio",{volume:1,controls:!1,style:{display:"none"},ref:this.audioRef,src:r}))}}]),t}(m.default.Component);r.default=g,p(g,"propTypes",{duration:h.default.number,src:h.default.string,children:h.default.func})},{"../Button":648,"../reactist/modal":971,"prop-types":"prop-types",react:"react"}],916:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("../confirm_dialog")),v=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{showDeleteConfirmation:!1}),p(c(r),"handleDeleteConfirmationShow",function(){r.setState({showDeleteConfirmation:!0})}),p(c(r),"handleDeleteConfirmationHide",function(){r.setState({showDeleteConfirmation:!1})}),p(c(r),"handleDelete",function(){r.props.onDelete(),r.handleDeleteConfirmationHide()}),r}return d(t,e),l(t,[{key:"renderDeleteConfirmation",value:function(){var e=this.state.showDeleteConfirmation;return m.default.createElement(y.default,{isOpen:e,confirmLabel:_("Delete"),onConfirm:this.handleDelete,onCancel:this.handleDeleteConfirmationHide},_("Are you sure you want to delete this?"))}},{key:"render",value:function(){var e=this.props.children;return m.default.createElement(m.default.Fragment,null,e({showDeleteConfirmation:this.handleDeleteConfirmationShow}),this.renderDeleteConfirmation())}}]),t}(m.default.Component);r.default=v,p(v,"propTypes",{children:h.default.func,onDelete:h.default.func})},{"../confirm_dialog":680,"prop-types":"prop-types",react:"react"}],917:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("classnames")),v=n(e("../ResizableTextArea")),g=e("../icons"),b=n(e("../Dialog")),w=n(e("./Emojis")),E=n(e("../DropFiles")),j=n(e("../FileUploader")),O=n(e("./AttachButton")),S=n(e("./Recorder")),P=n(e("../Modal")),I=n(e("./File")),k=n(e("./NotifySelector")),T=n(e("../Button")),C=e("../../containers/premium_promo/PremiumOnlyModal"),D=e("../../reducers/notes"),A=e("./utils"),M=e("../../utils"),x=function(e){function t(e){var r;a(this,t),r=s(this,u(t).call(this,e)),p(c(r),"textarea",m.default.createRef()),p(c(r),"emojisButton",m.default.createRef()),p(c(r),"handleClosing",function(){var e=r.state.text,t=r.props,n=t.type,o=t.draft,a=t.parentId,i=t.onCloseWithoutSubmit;(e&&e!==o||!e&&o)&&i({text:e,parentId:a,parentType:n})}),p(c(r),"focusTextarea",function(){r.textarea.current&&r.textarea.current.focus()}),p(c(r),"handleShowEditor",function(){r.setState({isWriting:!0},r.focusTextarea)}),p(c(r),"handleSubmit",function(e){var t=r.props,n=t.onSubmit,o=t.isPremium,a=t.type,i=r.state,l=i.text,s=i.files,u=i.usersToNotify;if(e.preventDefault(),!o)return void r.setState({premiumError:a===D.TYPE_PROJECT_NOTE?"FEATURE_PROJECT_COMMENT":"FEATURE_TASK_COMMENT"});n({text:l,usersToNotify:u,files:s}),r.setState({text:"",files:[]},r.focusTextarea)}),p(c(r),"handleTextChange",function(e){r.setState({text:e})}),p(c(r),"handleEmojisTooltip",function(){r.setState(function(e){return{showEmojisTooltip:!e.showEmojisTooltip}})}),p(c(r),"handleFileAttaching",function(){r.setState(function(e){return{showFileAttaching:!e.showFileAttaching}})}),p(c(r),"handleRecording",function(){if(!r.props.isPremium)return void r.setState({premiumError:"FEATURE_AUDIO_RECORDING"});r.setState(function(e){return{showRecording:!e.showRecording}})}),p(c(r),"handleEmojiSelect",function(e){var t=r.textarea.current,n=t.value,o=t.selectionStart,a=t.selectionEnd,i=n.slice(0,o)+e+n.slice(a);r.setState({text:i,emojisTooltip:!1},function(){t.focus(),t.selectionStart=t.selectionEnd=o+e.length})}),p(c(r),"handleUpload",function(e){r.setState(function(t){return{showFileAttaching:!1,showRecording:!1,files:t.files.concat(e)}})}),p(c(r),"handleFileUploadError",function(){r.setState({premiumError:"FEATURE_SHARED_PROJECT_FILE_UPLOAD"})}),p(c(r),"handlePremiumModalClosing",function(){r.setState({premiumError:null})}),p(c(r),"handlePaste",function(e,t){if(e&&e.clipboardData){var r=e.clipboardData;if(r.types&&r.items){var n=[];r.types.forEach(function(e,t){if("text/plain"!==e){var o=r.items[t].getAsFile();o&&n.push(o)}}),n.length>0&&(e.preventDefault(),t(n))}}}),p(c(r),"handleKeydown",function(e){var t=(0,M.resolveKeyboardKey)(event.key);return(e.ctrlKey||e.metaKey)&&"Enter"===t?(e.preventDefault(),r.handleSubmit(e),!1):"Escape"===t?(r.collapseEditorIfEmpty(),!1):void 0}),p(c(r),"handleNotifyUsersUpdate",function(e){r.setState({usersToNotify:e})}),p(c(r),"collapseEditorIfEmpty",function(){r.setState(function(e){var t=e.text,r=e.files;return{isWriting:t.length>0||r.length>0}})});var n=(0,A.getUsersToNotify)(e);return r.state={text:r.props.draft||"",isWriting:Boolean(r.props.draft),showFileAttaching:!1,showRecording:!1,showEmojisTooltip:!1,files:[],premiumError:null,usersToNotify:n},r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.draft&&this.focusTextarea(),window.addEventListener("beforeunload",this.handleClosing)}},{key:"componentWillUnmount",value:function(){this.handleClosing(),window.removeEventListener("beforeunload",this.handleClosing)}},{key:"renderCommentActions",value:function(){var e=this.state.showEmojisTooltip;return m.default.createElement("div",{className:"comments_textarea_buttons textarea_buttons"},m.default.createElement("div",null,m.default.createElement(T.default,{onClick:this.handleFileAttaching,className:"ist_button ist_button_upload_btn ist_button_mini"},m.default.createElement(g.AttachmentIcon,null)),m.default.createElement(T.default,{onClick:this.handleRecording,className:"ist_button ist_button_upload_btn ist_button_mini"},m.default.createElement(g.MicrophoneIcon,null)),m.default.createElement(O.default,{onFileUpload:this.handleUpload,options:window.CURRENT_EXERNAL_SERVICE}),m.default.createElement("div",{style:{position:"relative"},className:"comments_textarea_button"},m.default.createElement(T.default,{ref:this.emojisButton,onClick:this.handleEmojisTooltip,className:"ist_button ist_button_upload_btn ist_button_mini"},m.default.createElement(g.EmojiIcon,null)),e&&m.default.createElement(b.default,{anchorGap:5,align:"top",anchor:this.emojisButton.current,onHide:this.handleEmojisTooltip,position:"right",width:222,isPositionFluid:!0},m.default.createElement("div",{className:"comments_tooltip"},m.default.createElement(w.default,{onClick:this.handleEmojiSelect}))))),m.default.createElement("div",{className:"comments_textarea_submit"},m.default.createElement(T.default,{type:"submit",className:"ist_button ist_button_red sel_submit_note","data-track":"comments|add_comment"},_("Add Comment"))))}},{key:"renderRecording",value:function(){return m.default.createElement("div",{className:"comments_drop_container"},m.default.createElement(S.default,{onUpload:this.handleUpload,onClose:this.handleRecording}))}},{key:"renderFileAttaching",value:function(){var e=this,t=this.props.isPremium,r=t?void 0:this.handleFileUploadError;return m.default.createElement(j.default,{onUpload:this.handleUpload},function(n){var o=n.uploadFiles,a=n.uploadFromGoogleDrive,i=n.uploadFromDropBox;return m.default.createElement("div",{className:"comments_drop_container"},m.default.createElement(T.default,{className:"comments_drop_close",onClick:e.handleFileAttaching},m.default.createElement(g.CloseIcon,{small:!0})),m.default.createElement("h4",{className:"comments_drop_title"},_("Drag & drop files here")),m.default.createElement("ul",{className:"comments_drop_links"},m.default.createElement("li",{onClick:r,className:"comments_drop_link"},t&&m.default.createElement("input",{onChange:function(e){return o(e.target.files)},className:"comments_drop_computer",name:"file",type:"file",multiple:!0}),_("Computer")),m.default.createElement("li",{className:"comments_drop_link",onClick:i},_("Dropbox")),m.default.createElement("li",{onClick:a,className:"comments_drop_link"},_("Google Drive"))))})}},{key:"renderFiles",value:function(){var e=this,t=this.state.files;return 0===t.length?null:t.map(function(r){var n=function(){e.setState({files:t.filter(function(e){return e!==r})})};return m.default.createElement(I.default,{key:r.temporaryId,fileObject:r,onDelete:n})})}},{key:"renderPremiumModal",value:function(){var e=this.state.premiumError;return m.default.createElement(P.default,{show:Boolean(e),onClickOutside:this.handlePremiumModalClosing},m.default.createElement("div",{style:{width:"450px"}},m.default.createElement(C.PremiumModal,{feature:e,onClose:this.handlePremiumModalClosing})))}},{key:"renderDragging",value:function(e){var t=e?"comments_drop_container__hover":"";return m.default.createElement("div",{className:"comments_drop_container ".concat(t)},m.default.createElement("h4",{className:"comments_drop_title"},_("Drag & drop files here")))}},{key:"render",value:function(){var e=this,t=this.state,r=t.isWriting,n=t.text,o=t.showFileAttaching,a=t.showRecording,i=t.usersToNotify,l=this.props,s=l.user,u=l.collaborators;return r||n?m.default.createElement(j.default,{onUpload:this.handleUpload},function(t){var r=t.uploadFiles;return m.default.createElement("div",{className:"note_submit"},e.renderPremiumModal(),m.default.createElement("form",{onSubmit:e.handleSubmit},m.default.createElement(E.default,{onDrop:r},function(t){var l=t.isDragging,c=t.isHovering;return m.default.createElement("div",null,m.default.createElement("div",{className:(0,y.default)("comments_textarea_holder",{"comments_textarea_holder--dragging":l&&!o})},m.default.createElement(v.default,{onPaste:function(t){return e.handlePaste(t,r)},onBlur:e.collapseEditorIfEmpty,onKeyDown:e.handleKeydown,onChange:e.handleTextChange,nodeRef:e.textarea,placeholder:_("Write a comment"),value:n}),m.default.createElement("div",{className:"files_view"},e.renderFiles()),a&&e.renderRecording(),o&&e.renderFileAttaching(),e.renderCommentActions(),l&&e.renderDragging(c)),m.default.createElement("div",null,m.default.createElement(k.default,{onChange:e.handleNotifyUsersUpdate,user:s,collaborators:u,usersToNotify:i})))})))}):m.default.createElement(j.default,{onUpload:this.handleUpload},function(t){var r=t.uploadFiles;return m.default.createElement(E.default,{onDrop:function(t){e.setState({isWriting:!0}),r(t)}},function(t){var r=t.isDragging,n=t.isHovering;return r?m.default.createElement("div",{className:"comments_textarea_holder comments_textarea_holder--dragging"},e.renderDragging(n)):m.default.createElement("div",null,m.default.createElement(T.default,{className:"comments_editor_img",onClick:e.handleShowEditor},_("Write a comment or upload a file")))})})}}]),t}(m.default.Component);r.default=x,p(x,"propTypes",{type:h.default.oneOf([D.TYPE_PROJECT_NOTE,D.TYPE_ITEM_NOTE]).isRequired,isPremium:h.default.bool.isRequired,onSubmit:h.default.func.isRequired,user:h.default.object.isRequired,collaborators:h.default.array.isRequired,notes:h.default.array.isRequired,item:h.default.object,project:h.default.object,parentId:h.default.oneOfType([h.default.number,h.default.string]).isRequired,onCloseWithoutSubmit:h.default.func.isRequired,draft:h.default.string})},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../reducers/notes":1114,"../../utils":1176,"../Button":648,"../Dialog":649,"../DropFiles":650,"../FileUploader":651,"../Modal":654,"../ResizableTextArea":656,"../icons":842,"./AttachButton":908,"./Emojis":918,"./File":919,"./NotifySelector":923,"./Recorder":927,"./utils":928,classnames:"classnames","prop-types":"prop-types",react:"react"}],918:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var v=n(e("react")),g=n(e("prop-types")),b=[[":-D","\ud83d\ude03"],[":-)","\ud83d\ude0a"],[";-)","\ud83d\ude09"],[";-D","\ud83d\ude02"],["^_^","\ud83d\ude01"],["(love)","\ud83d\ude0d"],[":-o","\ud83d\ude2e"],[":-P","\ud83d\ude0b"],[":-S","\ud83d\ude15"],[":-(","\ud83d\ude1e"],["-_-;","\ud83d\ude13"],["O:-)","\ud83d\ude07"],["X-(","\ud83d\ude21"],["}:-)","\ud83d\ude08"],[":-X","\ud83d\ude37"],[":-|","\ud83d\ude10"],[":-/","\ud83d\ude15"],[":'-(","\ud83d\ude22"],["(+1)","\ud83d\udc4d"],["(-1)","\ud83d\udc4e"],["(heart)","\u2764\ufe0f"],["(star)","\u2b50\ufe0f"],["(doh)","\ud83d\ude2b"]],w=function(e){function t(){var e,r;u(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=f(this,(e=p(t)).call.apply(e,[this].concat(o))),y(m(r),"renderEmoji",function(e){var t=a(e,2),n=t[0],o=t[1],i=r.props.onClick;return v.default.createElement("li",{onClick:function(){return i(n)},className:"comments_emojis_element",key:n},o)}),r}return h(t,e),d(t,[{key:"render",value:function(){var e=b.map(this.renderEmoji);return v.default.createElement("ul",{className:"comments_emojis_list"},e)}}]),t}(v.default.Component);r.default=w,y(w,"propTypes",{onClick:g.default.func})},{"prop-types":"prop-types",react:"react"}],919:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=e("../icons"),y=e("../spinners"),v=n(e("@doist/reactist/lib/Tooltip")),g=function(e){function t(e){var r;return a(this,t),r=s(this,c(t).call(this,e)),r.cb=function(){return r.forceUpdate()},r.fv={remove:function(){},updateProgress:r.cb,uploadDone:function(){}},e.fileObject.addView(r.fv),e.fileObject.addCallback(r.cb),r}return d(t,e),l(t,[{key:"componentWillUnmount",value:function(){var e=this,t=this.props.fileObject;t.removeView(this.fv),t.callbacks=t.callbacks.filter(function(t){return t!==e.cb})}},{key:"getFileName",value:function(e){var t=e.file.name||e.file.fileName;return t||(e.file_server_info?e.file_server_info.title:"file")}},{key:"render",value:function(){var e=this.props,t=e.fileObject,r=e.onDelete,n=this.getFileName(t),o=!t.processed,a=t.progress_prct&&t.progress_prct<100&&p.default.createElement("b",{className:"progress_bar"},t.progress_prct,"%"),i=_("Could not upload the file due to an unknown error. Click to try again.");return p.default.createElement("div",{className:"file_to_upload"},p.default.createElement("span",{className:"icon"},p.default.createElement(h.DeleteIcon,{onClick:r})),p.default.createElement("span",{className:"filename"},n),o&&p.default.createElement("div",{className:"comments_drop_spinner"},p.default.createElement(y.RingSpinner,{width:16,height:16})),a,t.error&&p.default.createElement("b",{className:"progress_bar"},p.default.createElement(v.default,{delayShow:0,text:i,position:"top"},p.default.createElement(h.WarningIcon,{className:"comments_drop_warning",onClick:function(){return t.upload()},style:{marginRight:"8px"}}))))}}]),t}(p.default.Component);r.default=g,function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(g,"propTypes",{fileObject:m.default.object,onDelete:m.default.func})},{"../icons":842,"../spinners":1067,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],920:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("classnames")),v=n(e("../Button")),g=n(e("../Avatar")),b=n(e("./Attachment")),w=n(e("@doist/reactist/lib/Tooltip")),E=n(e("../Dialog")),j=n(e("./ReactionsList")),O=n(e("./Reactions")),S=n(e("./NoteEditing")),P=n(e("./DeleteConfirmation")),I=n(e("./PeopleList")),k=e("../icons"),T=e("./utils"),C=n(e("../../components/formatter/Formatter")),D=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{showMenuReactions:!1}),p(c(r),"reactionsRef",m.default.createRef()),p(c(r),"toggleReactionsMenu",function(){r.setState(function(e){return{showMenuReactions:!e.showMenuReactions}})}),p(c(r),"handleEdit",function(){var e=r.props,t=e.note;(0,e.onEditing)(t.id)}),p(c(r),"handleRemoveNote",function(){var e=r.props;(0,e.onRemoveNote)(e.note.id)}),p(c(r),"handleRemoveNote",function(){var e=r.props;(0,e.onRemoveNote)(e.note.id)}),r}return d(t,e),l(t,[{key:"renderReactions",value:function(e){var t=this.props,r=t.allCollaborators,n=t.user,o=t.onAddReaction,a=t.onRemoveReaction;return m.default.createElement(O.default,{note:e,user:n,allCollaborators:r,onAddReaction:o,onRemoveReaction:a})}},{key:"renderPossibleReactions",value:function(e){var t=this.props,r=t.note,n=t.user,o=t.onAddReaction,a=t.onRemoveReaction;return m.default.createElement(j.default,{onSelect:e,note:r,user:n,onAddReaction:o,onRemoveReaction:a})}},{key:"renderCommentActions",value:function(e){var t=this.props,r=t.user,n=t.allCollaborators,o=this.state.showMenuReactions,a=e.posted_uid===r.id,i=a&&m.default.createElement(w.default,{delayShow:0,text:_("Edit"),position:"bottom"},m.default.createElement(v.default,{onClick:this.handleEdit,className:"menu_icon comments_actions_action"},m.default.createElement(k.EditIcon,{className:"comments_actions_icon"}))),l=a&&m.default.createElement(P.default,{onDelete:this.handleRemoveNote},function(e){var t=e.showDeleteConfirmation;return m.default.createElement(w.default,{delayShow:0,text:_("Delete"),position:"bottom"},m.default.createElement(v.default,{onClick:t,className:"menu_icon comments_actions_action"},m.default.createElement(k.DeleteIcon,{className:"comments_actions_icon"})))}),s=e.uids_to_notify&&e.uids_to_notify.length>0?m.default.createElement("span",{className:"menu_icon comments_actions_action"},m.default.createElement(w.default,{position:"bottom",delayShow:0,text:m.default.createElement("div",null,m.default.createElement("b",null,_("People notified")),m.default.createElement(I.default,{userIds:e.uids_to_notify,allCollaborators:n}))},m.default.createElement(k.BellIcon,{className:"comments_actions_icon"}))):null;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"comments_actions"},i,l,m.default.createElement("span",{className:"menu_icon comments_actions_action",ref:this.reactionsRef},m.default.createElement(w.default,{delayShow:0,text:_("Add reaction"),position:"bottom"},m.default.createElement(v.default,{onClick:this.toggleReactionsMenu},m.default.createElement(k.ReactionIcon,{className:"comments_actions_icon"}))),o&&m.default.createElement(E.default,{nose:!0,anchor:this.reactionsRef.current,onHide:this.toggleReactionsMenu,width:258},m.default.createElement("div",{className:"comments_tooltip"},this.renderPossibleReactions(this.toggleReactionsMenu)))),s))}},{key:"renderNote",value:function(){var e=this.props,t=e.forwardedRef,r=e.note,n=e.allCollaborators,o=e.isHighlighted,a=n[r.posted_uid],i=(0,T.getShortName)(a)||_("Someone"),l=window.DateUtils.formatView(r.posted),s=C.default.format(r.content,{as_html:!0,attachment:r.file_attachment}),u={opacity:r.is_buffer_obj?.6:1},c=(0,y.default)("note_text has_avatar",{active:o});return m.default.createElement("div",{ref:t,style:u,className:c},m.default.createElement(g.default,{user:a,size:"medium"}),m.default.createElement("div",{className:"comments_meta note_meta"},m.default.createElement("span",{className:"user_name"},i),m.default.createElement("span",{className:"time"},l),this.renderCommentActions(r)),m.default.createElement("span",{className:"note_content",dangerouslySetInnerHTML:{__html:s}}),m.default.createElement(b.default,{attachment:r.file_attachment}),this.renderReactions(r))}},{key:"renderEditing",value:function(){var e=this.props,t=e.onEditingClose,r=e.note,n=e.onUpdateNote,o=e.allCollaborators,a=e.user,i=r.posted_uid===a.id?a:o[r.posted_uid];return m.default.createElement("div",{className:"note_text has_avatar"},m.default.createElement(g.default,{user:i,size:"medium"}),m.default.createElement("div",{style:{marginLeft:"40px"}},m.default.createElement(S.default,{onEditingClose:t,onUpdateNote:n,note:r})))}},{key:"render",value:function(){return this.props.editing?this.renderEditing():this.renderNote()}}]),t}(m.default.Component);r.default=D,p(D,"propTypes",{forwardedRef:h.default.object,user:h.default.object.isRequired,allCollaborators:h.default.object.isRequired,note:h.default.object.isRequired,isHighlighted:h.default.bool,onAddReaction:h.default.func.isRequired,onRemoveReaction:h.default.func.isRequired,onRemoveNote:h.default.func.isRequired,onUpdateNote:h.default.func.isRequired,editing:h.default.bool.isRequired,onEditing:h.default.func.isRequired,onEditingClose:h.default.func.isRequired})},{"../../components/formatter/Formatter":22,"../Avatar":647,"../Button":648,"../Dialog":649,"../icons":842,"./Attachment":914,"./DeleteConfirmation":916,"./NoteEditing":921,"./PeopleList":924,"./Reactions":925,"./ReactionsList":926,"./utils":928,"@doist/reactist/lib/Tooltip":177,classnames:"classnames","prop-types":"prop-types",react:"react"}],921:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("../ResizableTextArea")),v=n(e("../Button")),g=e("../../utils/escapeHandler"),b=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{showConfirmUpdating:!1,editingText:r.props.note.content}),p(c(r),"editTextarea",m.default.createRef()),p(c(r),"handleSubmit",function(e){var t=r.props,n=t.onUpdateNote,o=t.note,a=r.state.editingText;e.preventDefault(),n(o.id,a)}),p(c(r),"handleKeydown",function(e){if((e.ctrlKey||e.metaKey)&&13==e.keyCode)return e.preventDefault(),r.handleSubmit(e),!1}),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.editTextarea.current;t&&(t.focus(),this.clean=(0,g.addEscapeHandler)(function(){e.props.onEditingClose()},{element:t}))}},{key:"componentWillUnmount",value:function(){this.clean&&this.clean()}},{key:"render",value:function(){var e=this,t=this.props.onEditingClose,r=this.state.editingText;return m.default.createElement("form",{onSubmit:this.handleSubmit},m.default.createElement("div",{className:"comments_textarea_holder"},m.default.createElement(y.default,{nodeRef:this.editTextarea,onKeyDown:this.handleKeydown,onChange:function(t){return e.setState({editingText:t})},placeholder:_("Write a comment"),value:r})),m.default.createElement("div",{className:"btn_area"},m.default.createElement(v.default,{className:"ist_button ist_button_red",type:"submit"},_("Update")),m.default.createElement(v.default,{className:"cancel comments_textarea_cancel",onClick:t},_("Cancel"))))}}]),t}(m.default.Component);r.default=b,p(b,"propTypes",{note:h.default.object.isRequired,onUpdateNote:h.default.func.isRequired,onEditingClose:h.default.func.isRequired})},{"../../utils/escapeHandler":1159,"../Button":648,"../ResizableTextArea":656,"prop-types":"prop-types",react:"react"}],922:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e
})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=e("../emptyState"),v=n(e("./Note")),g=n(e("./Editor")),b=n(e("../Button")),w=e("../spinners"),E=e("../../reducers/notes"),j=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{editing:null,loadingMore:!1,loadingMoreError:null}),p(c(r),"notesContainer",m.default.createRef()),p(c(r),"highlightedNoteEl",m.default.createRef()),p(c(r),"state",{draft:r.props.draft,highlightedNoteId:r.props.highlightedNoteId}),p(c(r),"scrollNotes",function(){var e=r.notesContainer.current;if(e){var t=r.highlightedNoteEl.current;t?(e.scrollTop=t.offsetTop-120,r.scrollListTimeout=setTimeout(function(){r.setState({highlightedNoteId:null}),r.props.onNoteHighlighted()},1500)):e.scrollTop=e.scrollHeight}}),p(c(r),"handleSubmitNote",function(e){var t=e.text,n=e.usersToNotify,o=e.files,a=r.props,i=a.onAddNote,l=a.type,s=a.parentId;(t||o&&o.length>0)&&i({parentId:s,type:l,content:t,files:o,usersToNotify:n})}),p(c(r),"handleEditing",function(e){r.setState({editing:e})}),p(c(r),"handleEditingClose",function(){r.setState({editing:null})}),p(c(r),"handleUpdateNote",function(){var e;r.setState({editing:null}),(e=r.props).onUpdateNote.apply(e,arguments)}),p(c(r),"handleLoadMore",function(){var e=r.props,t=e.type,n=e.onFetchMoreNotes,o=e.item,a=e.project;r.setState({loadingMore:!0,loadingMoreError:null},function(){n({item:o,project:a,type:t}).then(function(){r.setState({loadingMore:!1})}).catch(function(e){r.setState({loadingMore:!1,loadingMoreError:e})})})}),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){this.scrollNotes()}},{key:"componentDidUpdate",value:function(e,t){(e.notes.length<this.props.notes.length||this.state.highlightedNoteId&&t.highlightedNoteId!==this.state.highlightedNoteId)&&this.scrollNotes(),e.highlightedNoteId!==this.props.highlightedNoteId&&this.setState({highlightedNoteId:this.props.highlightedNoteId})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.scrollListTimeout)}},{key:"renderEmpty",value:function(){var e=this.props.type,t=e===E.TYPE_PROJECT_NOTE?m.default.createElement(y.EmptyStateProjectComments,null):m.default.createElement(y.EmptyStateTaskComments,null);return m.default.createElement("div",{className:"comments_list_container"},t)}},{key:"renderLoadingMoreError",value:function(){var e=this.state.loadingMoreError;if(!e)return null;var t=e.error_tag?_("The project was not found, could be deleted or moved."):_("An unknown error happened. Please try again later. We're sorry for the trouble.");return m.default.createElement("div",{className:"comments_list_error"},t)}},{key:"renderContent",value:function(){var e=this,t=this.props,r=t.notes,n=t.allCollaborators,o=t.user,a=t.onAddReaction,i=t.onRemoveReaction,l=t.onRemoveNote,s=t.hasMore,u=this.state,c=u.editing,d=u.highlightedNoteId,f=u.loadingMore;return 0===r.length?this.renderEmpty():m.default.createElement("div",{ref:this.notesContainer,className:"comments_list_container"},this.renderLoadingMoreError(),f&&m.default.createElement("div",{style:{textAlign:"center"}},m.default.createElement(w.DotsSpinner,null)),s&&!f&&m.default.createElement(b.default,{onClick:this.handleLoadMore,className:"fetch_old"},_("Fetch older comments")),r.map(function(t){return m.default.createElement(v.default,{forwardedRef:t.id===d?e.highlightedNoteEl:null,key:t.id,editing:c===t.id,isHighlighted:t.id===d,onEditing:e.handleEditing,onEditingClose:e.handleEditingClose,onAddReaction:a,onRemoveReaction:i,onRemoveNote:l,onUpdateNote:e.handleUpdateNote,user:o,note:t,allCollaborators:n})}))}},{key:"render",value:function(){var e=this.props,t=e.type,r=e.isPremium,n=e.user,o=e.collaborators,a=e.notes,i=e.item,l=e.project,s=e.onCloseWithoutSubmit,u=e.parentId,c=this.state.draft;return m.default.createElement("div",{className:"comments_container"},this.renderContent(),m.default.createElement("div",{className:"comments_editor_container"},m.default.createElement(g.default,{item:i,project:l,notes:a,user:n,collaborators:o,draft:c,parentId:u,type:t,isPremium:r,onSubmit:this.handleSubmitNote,onCloseWithoutSubmit:s})))}}]),t}(m.default.Component);r.default=j,p(j,"propTypes",{type:h.default.oneOf([E.TYPE_PROJECT_NOTE,E.TYPE_ITEM_NOTE]),parentId:h.default.oneOfType([h.default.number,h.default.string]),item:h.default.object,project:h.default.object,notes:h.default.array,user:h.default.object,allCollaborators:h.default.object,collaborators:h.default.array,isPremium:h.default.bool,draft:h.default.string,hasMore:h.default.bool,highlightedNoteId:h.default.number,onAddReaction:h.default.func,onRemoveReaction:h.default.func,onRemoveNote:h.default.func,onAddNote:h.default.func,onUpdateNote:h.default.func,onFetchMoreNotes:h.default.func.isRequired,onCloseWithoutSubmit:h.default.func.isRequired,onNoteHighlighted:h.default.func}),p(j,"defaultProps",{onNoteHighlighted:function(){}})},{"../../reducers/notes":1114,"../Button":648,"../emptyState":731,"../spinners":1067,"./Editor":917,"./Note":920,"prop-types":"prop-types",react:"react"}],923:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("../Avatar")),v=n(e("../Button")),g=n(e("@doist/reactist/lib/Tooltip")),b=n(e("./PeopleList")),w=e("./utils"),E=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{isExpanded:!1}),p(c(r),"handleExpanding",function(){r.setState(function(e){return{isExpanded:!e.isExpanded}})}),r}return d(t,e),l(t,[{key:"renderUsers",value:function(e){var t=e.users,r=this.props,n=r.usersToNotify,o=r.onChange;return t.map(function(e){var t=n.some(function(t){return t===e.id}),r="user_".concat(e.id),a=function(){o(t?n.filter(function(t){return t!==e.id}):n.concat(e.id))};return m.default.createElement("div",{key:e.id,className:"user"},m.default.createElement("input",{id:r,type:"checkbox",checked:t,onChange:a}),m.default.createElement("label",{htmlFor:r},m.default.createElement(y.default,{user:e,size:"small"}),m.default.createElement("span",{className:"truncated"},(0,w.getShortName)(e))))})}},{key:"renderTooltip",value:function(e){var t=this.props,r=t.usersToNotify,n=t.collaborators,o=(n||[]).reduce(function(e,t){return e[t.id]=t,e},{}),a=m.default.createElement(b.default,{userIds:r,allCollaborators:o});return m.default.createElement(g.default,{delayShow:0,text:m.default.createElement("div",null,a),position:"top"},e)}},{key:"renderText",value:function(e){var t,r,n=this,o=e.isEverybodyChecked,a=this.props,i=a.usersToNotify,l=a.collaborators;if(0===i.length)t=_("Notify <b>Nobody</b> about my comment");else if(o)t=_("Notify <b>Everybody</b> about my comment");else if(1===i.length){var s=l.find(function(e){return e.id===i[0]});t=_("Notify <b>%s</b> about my comment").replace("%s",(0,w.getShortName)(s))}else t=_("Notify <b>%s people</b> about my comment").replace("%s",i.length),r=!0;return t.replace(/(.*)<b>(.+)<\/b>(.*)/,function(e,o,a,i){var l=m.default.createElement("b",null,a);t=m.default.createElement(m.default.Fragment,null,o,r?n.renderTooltip(l):l,i)}),t}},{key:"renderSingleUserNotify",value:function(e){var t=this.props,r=t.usersToNotify,n=t.onChange,o=r.some(function(t){return t===e.id}),a=function(){var t=o?[]:[e.id];n(t)},i=_("Notify %s about my comment").replace("%s",(0,w.getShortName)(e));return m.default.createElement("div",{style:{textAlign:"right"}},m.default.createElement("div",{className:"who_to_notify"},m.default.createElement("input",{type:"checkbox",value:"notify_person",id:"notify_person",checked:o,onChange:a}),m.default.createElement("label",{htmlFor:"notify_person"},i)))}},{key:"render",value:function(){var e=this.props,t=e.collaborators,r=e.user,n=e.usersToNotify,o=e.onChange,a=this.state.isExpanded,i=t.filter(function(e){return e.id!==r.id});if(0===i.length)return null;if(1===i.length)return this.renderSingleUserNotify(i[0]);var l=i.some(function(e){return n.some(function(t){return t===e.id})}),s=i.every(function(e){return n.some(function(t){return t===e.id})}),u=function(){o(s?[]:i.map(function(e){return e.id}))},c=this.renderText({isEverybodyChecked:s});return m.default.createElement("div",{style:{textAlign:"right"}},m.default.createElement("div",{className:"who_to_notify ".concat(a?"expanded":"")},m.default.createElement("div",{className:"save_holder"},m.default.createElement(v.default,{onClick:this.handleExpanding,className:"hide_button"},_("Hide"))),m.default.createElement("span",{className:"desc_text"},c),m.default.createElement(v.default,{onClick:this.handleExpanding,className:"change"},_("Change")),m.default.createElement("div",{className:"selecter"},m.default.createElement("span",{className:"top_selecter"},m.default.createElement("input",{type:"checkbox",onChange:u,checked:l,id:"notify_toggle"}),m.default.createElement("label",{htmlFor:"notify_toggle"},_("Notify the following people"),":")),m.default.createElement("div",{className:"people people_holder"},this.renderUsers({users:i})))))}}]),t}(m.default.Component);r.default=E,p(E,"propTypes",{user:h.default.object.isRequired,collaborators:h.default.array.isRequired,usersToNotify:h.default.array.isRequired,onChange:h.default.func.isRequired})},{"../Avatar":647,"../Button":648,"./PeopleList":924,"./utils":928,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],924:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.userIds,r=e.allCollaborators,n=t.map(function(e){var t=r[e],n=(0,s.getShortName)(t)||_("Someone");return a.default.createElement("div",{key:e,className:"people_holder reacted_people",style:{textAlign:"left"}},a.default.createElement("div",{className:"user"},a.default.createElement(l.default,{className:"comments_reactions_avatar",user:t,size:"small"}),a.default.createElement("span",null,n)))});return a.default.createElement(a.default.Fragment,null,n)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../Avatar")),s=e("./utils");o.propTypes={userIds:i.default.arrayOf(i.default.number).isRequired,allCollaborators:i.default.object.isRequired};var u=o;r.default=u},{"../Avatar":647,"./utils":928,"prop-types":"prop-types",react:"react"}],925:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("../Button")),v=n(e("@doist/reactist/lib/Tooltip")),g=n(e("../Dialog")),b=n(e("./ReactionsList")),w=n(e("./PeopleList")),E=e("../icons"),j=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"reactionsContainer",m.default.createRef()),p(c(r),"state",{showReactions:!1}),p(c(r),"toggleReactionsMenu",function(){r.setState(function(e){return{showReactions:!e.showReactions}})}),p(c(r),"closeReactionsMenu",function(){r.setState({showReactions:!1})}),r}return d(t,e),l(t,[{key:"renderReactionsList",value:function(){var e=this.props,t=e.note,r=e.user,n=e.onAddReaction,o=e.onRemoveReaction;return this.state.showReactions?m.default.createElement(g.default,{nose:!0,anchor:this.reactionsContainer.current,onHide:this.closeReactionsMenu,position:"bottom",width:258,isPositionFluid:!0},m.default.createElement("div",{className:"comments_tooltip"},m.default.createElement(b.default,{onSelect:this.closeReactionsMenu,note:t,user:r,onAddReaction:n,onRemoveReaction:o}))):null}},{key:"render",value:function(){var e=this.props,t=e.note,r=e.allCollaborators,n=e.user,o=e.onAddReaction,a=e.onRemoveReaction;if(!t.reactions||t.reactions&&0===Object.keys(t.reactions).length)return null;var i=Object.keys(t.reactions).map(function(e){var i=t.reactions[e],l=i.includes(n.id),s="reaction_holder ".concat(l?"reacted":""),u=m.default.createElement("div",null,m.default.createElement(w.default,{userIds:i,allCollaborators:r}));return m.default.createElement("span",{onClick:function(){(l?a:o)(t.id,e)},key:e,className:s},m.default.createElement(v.default,{delayShow:0,text:u,position:"bottom"},m.default.createElement("span",{className:"only_emojis"},m.default.createElement("span",{className:"emoji"},e)),m.default.createElement("span",{className:"reactions_count"},i.length)))});return m.default.createElement("div",{className:"comments_actions_line reactions_line"},i,m.default.createElement(v.default,{delayShow:0,text:_("Add reaction"),position:"bottom"},m.default.createElement(y.default,{onClick:this.toggleReactionsMenu,ref:this.reactionsContainer,style:{position:"relative"},className:"comments_actions_button reaction_holder reaction_plus form_action_icon menu_icon"},m.default.createElement(E.PlusIcon,null))),this.renderReactionsList())}}]),t}(m.default.Component);r.default=j,p(j,"propTypes",{note:h.default.object.isRequired,user:h.default.object.isRequired,allCollaborators:h.default.object.isRequired,onAddReaction:h.default.func.isRequired,onRemoveReaction:h.default.func.isRequired})},{"../Button":648,"../Dialog":649,"../icons":842,"./PeopleList":924,"./ReactionsList":926,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],926:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),_=["\ud83d\udc4d","\ud83d\udc4e","\u2764\ufe0f\ufe0f","\ud83d\ude04","\ud83d\ude02","\ud83d\ude2e","\ud83d\ude22","\ud83d\ude21","\ud83d\udc4f","\ud83c\udf89"],y=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"renderReaction",function(e){var t=r.props,n=t.note,o=t.onSelect,a=t.user,i=t.onRemoveReaction,l=t.onAddReaction,s=function(){(n.reactions&&n.reactions[e]&&n.reactions[e].includes(a.id)?i:l)(n.id,e),o()};return m.default.createElement("li",{onClick:s,key:e,className:"comments_reactions_element"},m.default.createElement("span",{className:"only_emojis"},m.default.createElement("span",{className:"emoji"},e)))}),r}return d(t,e),l(t,[{key:"render",value:function(){return m.default.createElement("ul",{className:"comments_reactions_list"},_.map(this.renderReaction))}}]),t}(m.default.Component);r.default=y,p(y,"propTypes",{note:h.default.object,onSelect:h.default.func,user:h.default.object,onRemoveReaction:h.default.func,onAddReaction:h.default.func})},{"prop-types":"prop-types",react:"react"}],927:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("../Button")),v=n(e("../reactist/modal")),g=n(e("./AudioPlayer")),b=e("../icons"),w=e("./utils");navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var E=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{time:0,isRecording:!1,error:!1,audioURL:null}),p(c(r),"handleAttach",function(){var e=r.props.onUpload,t=r.state.time;r.audioBlob.name="voice".concat((new Date).getTime(),".wav");var n=new window.GFile;n.file=r.audioBlob,n.duration=t,n.upload(),e(n)}),p(c(r),"handleErrorClose",function(){r.setState({error:!1})}),p(c(r),"handleRetake",function(){r.setState({time:0,audioURL:null},r.handleRecord)}),p(c(r),"handleRecord",function(){var e=function(e){r.setState({isRecording:!0}),window.AudioContext=window.AudioContext||window.webkitAudioContext;var t=new window.AudioContext,n=t.createMediaStreamSource(e);r.recorder=new window.Recorder(n,e),r.recorder.record(),r.handleStartTimer()},t=function(){r.setState({error:!0})};navigator.getUserMedia?navigator.getUserMedia({audio:!0},e,t):t()}),p(c(r),"handleStopRecord",function(){r.recorder.stop(),r.handleStopTimer(),r.recorder.exportWAV(function(e){r.audioBlob=e;var t=URL.createObjectURL(e);r.setState({audioURL:t,isRecording:!1}),r.recorder.stopStream()})}),r}return d(t,e),l(t,[{key:"componentWillUnmount",value:function(){this.state.isRecording&&this.recorder&&(this.recorder.stop(),this.recorder.stopStream(),this.handleStopTimer())}},{key:"handleStartTimer",value:function(){var e=this;this.timer=setInterval(function(){e.setState(function(t){var r=t.time,n=r+1;return n>240?(e.handleStopTimer(),void e.handleStopRecord()):{time:n}})},1e3)}},{key:"handleStopTimer",value:function(){clearInterval(this.timer)}},{key:"renderErrorModal",value:function(){var e=this.state.error;return m.default.createElement(v.default.Box,{isOpen:e,onDismiss:this.handleErrorClose,closeOnOverlayClick:!0},m.default.createElement(v.default.Body,null,_("Your browser does not seem to support HTML5 Audio recording :-(")),m.default.createElement(v.default.Actions,null,m.default.createElement(y.default,{className:"ist_button ist_button_red",onClick:this.handleErrorClose},_("OK"))))}},{key:"renderButtons",value:function(e){var t=e.play,r=e.isPlaying,n=e.stop,o=this.state,a=o.isRecording,i=o.audioURL,l=!a&&!i&&m.default.createElement(y.default,{className:"comments_drop_link",onClick:this.handleRecord},_("Record")),s=a&&m.default.createElement(y.default,{className:"comments_drop_link",onClick:this.handleStopRecord},_("Stop")),u=i&&m.default.createElement(y.default,{className:"comments_drop_link",onClick:this.handleRetake},_("Retake")),c=i&&m.default.createElement(y.default,{className:"comments_drop_link",onClick:r?n:t},r?_x("audio_player","Stop"):_x("audio_player","Play")),d=i&&m.default.createElement(y.default,{className:"comments_drop_link",onClick:this.handleAttach},_("Attach"));return m.default.createElement("div",{className:"comments_drop_links"},l,s,u,c,d)}},{key:"render",value:function(){var e=this,t=this.props.onClose,r=this.state,n=r.audioURL,o=r.time,a=r.isRecording;return m.default.createElement(m.default.Fragment,null,m.default.createElement(g.default,{src:n,duration:o},function(r){var n=r.play,i=r.isPlaying,l=r.stop,s=r.time;return m.default.createElement(m.default.Fragment,null,e.renderErrorModal(),m.default.createElement(y.default,{className:"comments_drop_close",onClick:t},m.default.createElement(b.CloseIcon,{small:!0})),m.default.createElement("div",null,m.default.createElement("h4",{className:"comments_drop_title"},(0,w.formatTime)(i?s:o)),a?m.default.createElement("span",{className:"comments_drop_description"},"(",_("Max 4 min"),")"):null),e.renderButtons({play:n,isPlaying:i,stop:l}))}))}}]),t}(m.default.Component);r.default=E,p(E,"propTypes",{onUpload:h.default.func,onClose:h.default.func})},{"../Button":648,"../icons":842,"../reactist/modal":971,"./AudioPlayer":915,"./utils":928,"prop-types":"prop-types",react:"react"}],928:[function(e,t,r){"use strict";function n(e){if(!e)return"";var t=e.full_name.split(" ");return t.length>1?t[0]+" "+t[1].substring(0,1)+".":t[0]}function o(e){var t=document.createElement("audio");return Boolean(t.canPlayType&&t.canPlayType(e).replace(/no/,""))}function a(e,t,r,n){var o;return e/t>r/n?e<=r?[e,t]:(o=r/e,[r,Math.floor(t*o)]):t<=n?[e,t]:(o=n/t,[Math.floor(e*o),n])}function i(e){var t=Math.floor(e/60),r=Math.ceil(e%60),n=t<10?"0".concat(t):t,o=r<10?"0".concat(r):r;return"".concat(n,":").concat(o)}function l(e){var t=e.user,r=e.collaborators,n=e.notes,o=e.type,a=e.item,i=[],l=function(e){var n=r.map(function(e){return e.id});e&&e!==t.id&&n.includes(e)&&!i.includes(e)&&i.push(e)};if(0!==n.length){var u=n[n.length-1];(u.uids_to_notify||[]).concat(u.posted_uid).forEach(l)}else o===s.TYPE_ITEM_NOTE?(l(a.assigned_by_uid),l(a.responsible_uid)):r.forEach(function(e){return l(e.id)});return i}Object.defineProperty(r,"__esModule",{value:!0}),r.getShortName=n,r.canPlayAudio=o,r.calculateOptimalDimension=a,r.formatTime=i,r.getUsersToNotify=l;var s=e("../../reducers/notes")},{"../../reducers/notes":1114}],929:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,n,o=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"full_name";return e[r].localeCompare(t[r])}function c(e){return null==e?m.default.createElement(b.AssigneeIcon,null):m.default.createElement(g.default,{user:e,size:"small"})}function d(e){var t=e.text,r=e.searchText;if(0===r.trim().length)return t;var n=new RegExp("(".concat(r,")"),"gi");return t.replace(n,"<b>$1</b>")}function f(e){var t=e.user,r=e.text,n=m.default.useContext(w.Context),o=n.searchText.trim();if(0!==o.length&&!r.toLowerCase().includes(o))return null;var a=null!=t?String(t.id):E,i=d({text:r,searchText:o});return m.default.createElement(w.Option,{value:a,label:r},function(e){var r=e.isSelected;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"person_picker__option_avatar","aria-hidden":"true"},c(t)),m.default.createElement("div",{className:"person_picker__option_text",dangerouslySetInnerHTML:{__html:i}}),r?m.default.createElement(b.CheckmarkIcon,{"aria-hidden":"true"}):null)})}function p(e){function t(e){var t=e.target.value===E?null:Number(e.target.value),r=d.find(function(e){return e.id===t});n(a({},e,{target:a({},e.target,{value:t,selectedUser:r})}))}var r=e.value,n=e.onChange,i=e.children,s=void 0===i?function(e){return c(e.selectedUser)}:i,d=e.users,p=e.currentUser,h=e.showUnassignedOption,g=void 0===h||h,b=e.tooltip,j=e.className,O=l(e,["value","onChange","children","users","currentUser","showUnassignedOption","tooltip","className"]);if(0===d.length)return null;var S=d.find(function(e){return e.id===r}),P="function"==typeof b?b({selectedUser:S,currentUser:p}):b;return m.default.createElement(w.Select,o({},O,{value:null==r?E:String(r),onChange:t}),m.default.createElement(w.Toggle,{className:(0,y.default)(j,"person_picker__toggle"),tooltip:P},"function"==typeof s?s({selectedUser:S,currentUser:p}):s),m.default.createElement(w.Popup,{className:(0,y.default)(j,"person_picker__popup")},m.default.createElement(w.Search,{placeholder:_("Type an assignee")}),m.default.createElement(w.Options,null,g?m.default.createElement(f,{text:_("Unassigned")}):null,m.default.createElement(f,{user:p,text:"".concat(_x("task_assignment","Me")," (").concat((0,v.shortName)(p.full_name),")")}),d.filter(function(e){return e.id!==p.id}).sort(u).map(function(e){return m.default.createElement(f,{key:e.id,user:e,text:e.full_name})}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.PersonPicker=p;var m=n(e("react")),h=n(e("prop-types")),y=n(e("classnames")),v=e("../../utils"),g=n(e("../Avatar")),b=e("../icons"),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../dropdown")),E="UNASSIGNED";f.propTypes={user:h.default.object,text:h.default.string.isRequired},p.propTypes={value:h.default.number,onChange:h.default.func.isRequired,children:h.default.oneOfType([h.default.node,h.default.func]),tooltip:h.default.oneOfType([h.default.string,h.default.func]),showUnassignedOption:h.default.bool,className:h.default.string,projectId:h.default.oneOfType([h.default.number,h.default.string]),users:h.default.arrayOf(h.default.object.isRequired).isRequired,currentUser:h.default.object.isRequired}},{"../../utils":1176,"../Avatar":647,"../dropdown":700,"../icons":842,classnames:"classnames","prop-types":"prop-types",react:"react"}],930:[function(e,t,r){"use strict";function n(e,t){var r=t.projectId;return{currentUser:e.user,users:null!=r?(0,i.getAllProjectCollaborators)(e,r):(0,a.values)((0,i.getAllCollaborators)(e))}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getAssigneeTooltip",{enumerable:!0,get:function(){return s.getAssigneeTooltip}}),r.PersonPicker=void 0;var o=e("react-redux"),a=e("../../utils"),i=e("../../reducers/collaborators"),l=e("./PersonPicker"),s=e("./tooltip"),u=(0,o.connect)(n)(l.PersonPicker);r.PersonPicker=u},{"../../reducers/collaborators":1086,"../../utils":1176,"./PersonPicker":929,"./tooltip":931,"react-redux":"react-redux"}],931:[function(e,t,r){"use strict";function n(e){
var t=e.selectedUser,r=e.currentUser,n=null!=t&&t.id===r.id,a=n?_x("task_assignment","Me"):null!=t?(0,o.shortName)(t.full_name):_("Someone");return null==t?_("Assign a person"):(0,o.format)(_("Assigned to {username}"),{username:a})}Object.defineProperty(r,"__esModule",{value:!0}),r.getAssigneeTooltip=n;var o=e("../../utils")},{"../../utils":1176}],932:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.anchorElement,r=e.anchorPosition,n=e.anchorOrigin,o=void 0===n?{vertical:"bottom",horizontal:"left"}:n,s=e.transformOrigin,c=void 0===s?{vertical:"top",horizontal:"left"}:s,d=e.marginThreshold,f=void 0===d?16:d,p=e.children,m=e.disableScroll,h=void 0===m||m,_=e.onClose,y=(0,l.useRef)(),v=(0,l.useCallback)(function(){if(r)return r;var e={vertical:a(y,c.vertical),horizontal:i(y,c.horiontal)},n=t.getBoundingClientRect(),l={top:n.top+a(n,o.vertical),left:n.left+i(n,o.horizontal)};return{top:l.top-e.vertical,left:l.left-e.horizontal}},[r,c,o,t]);return(0,l.useLayoutEffect)(function(){var e=y.current,t=v(),r=e.getBoundingClientRect(),n=t.top+r.height,o=t.left+r.width,a=$winSize().h,i=$winSize().w;if(n>a){var l=n-a;t.top=t.top-l-f}if(o>i){var s=o-i;t.left=t.left-s-f}e.style.top="".concat(t.top,"px"),e.style.left="".concat(t.left,"px")},[v,f]),(0,l.useLayoutEffect)(function(){var e;if(h){var t=document.documentElement;e=t.style.overflow,t.style.overflow="hidden"}return function(){if(h){document.documentElement.style.overflow=e}}},[h]),l.default.createElement(u.default,{open:!0,className:"ist_popover"},l.default.createElement("div",{className:"ist_popover_overlay",onClick:function(e){e.stopPropagation(),_()}}),l.default.createElement("div",{ref:y,className:"ist_popover_content"},p))}function a(e,t){var r=0;return"number"==typeof t?r=t:"center"===t?r=e.height/2:"bottom"===t&&(r=e.height),r}function i(e,t){var r=0;return"number"==typeof t?r=t:"center"===t?r=e.width/2:"right"===t&&(r=e.width),r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),s=n(e("prop-types")),u=n(e("../reactist/Portal"));o.propTypes={anchorElement:s.default.object,anchorPosition:s.default.shape({top:s.default.number,left:s.default.number}),anchorOrigin:s.default.shape({horizontal:s.default.oneOf(["left","center","right"]),vertical:s.default.oneOf(["top","center","bottom"])}),transformOrigin:s.default.shape({horizontal:s.default.oneOf(["left","center","right"]),vertical:s.default.oneOf(["top","center","bottom"])}),marginThreshold:s.default.number,children:s.default.node,disableScroll:s.default.bool,onClose:s.default.func}},{"../reactist/Portal":966,"prop-types":"prop-types",react:"react"}],933:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"usePopoverMenu",{enumerable:!0,get:function(){return n.usePopoverMenu}}),Object.defineProperty(r,"Popover",{enumerable:!0,get:function(){return o.default}});var n=e("./usePopoverMenu"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./Popover"))},{"./Popover":932,"./usePopoverMenu":934}],934:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(){function e(){i(d)}var t=c.default.useState(d),r=a(t,2),o=r[0],i=r[1];return{props:n({},o,{onClose:e}),isOpen:null!=o.anchorElement||null!=o.anchorPosition,openOnAnchor:function(e){e.stopPropagation(),i(n({},d,{anchorElement:e.currentTarget}))},openOnContext:function(e){if(!e.shiftKey){e.stopPropagation(),e.preventDefault();var t=document.documentElement,r={top:e.pageY-t.scrollTop,left:e.pageX-t.scrollLeft};i(n({},d,{anchorPosition:r}))}},close:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return"function"!=typeof t&&e(),function(){t.apply(void 0,arguments),e()}}}}Object.defineProperty(r,"__esModule",{value:!0}),r.usePopoverMenu=u;var c=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),d={anchorElement:void 0,anchorPosition:void 0}},{react:"react"}],935:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.priority,r=void 0===t?4:t,n=e.isSelected,o=5-r;return i.default.createElement("div",{className:"priority_picker_item"},i.default.createElement("span",{"aria-hidden":"true",className:"priority_picker_item_priority_icon",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/priority_".concat(o,".svg"))}}),i.default.createElement("span",{className:"priority_picker_item_name"},_("Priority %s").replace("%s",o)),n&&i.default.createElement(u.CheckmarkIcon,{"aria-hidden":"true",className:"dropdown_select_checkmark"}))}function a(e){var t=e.className,r=e.children,n=e.priority,a=void 0===n?1:n,l=e.onSelect,u=void 0===l?function(){}:l;(a>4||a<1)&&(a=1);var c=function(e){u(Number(e.target.value))};return i.default.createElement(s.Select,{value:String(a),onChange:c},i.default.createElement(s.Toggle,{className:t},r),i.default.createElement(s.Popup,{className:"priority_picker"},i.default.createElement(s.Options,null,[4,3,2,1].map(function(e){return i.default.createElement(s.Option,{key:String(e),value:String(e)},function(t){var r=t.isSelected;return i.default.createElement(o,{priority:e,isSelected:r})})}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../dropdown")),u=e("../icons");o.propTypes={priority:l.default.number,isSelected:l.default.bool},a.propTypes={className:l.default.string,children:l.default.object,priority:l.default.number,onSelect:l.default.func};var c=a;r.default=c},{"../dropdown":700,"../icons":842,"prop-types":"prop-types",react:"react"}],936:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./PriorityPicker")),o=n.default;r.default=o},{"./PriorityPicker":935}],937:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=e("../../utils/fp"),h=e("redux"),y=n(e("react")),v=n(e("prop-types")),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../models/Colors")),b=n(e("../../utils/isoToDate")),w=n(e("../../utils/highDefCanvas")),E=window,j=E.DateUtils,O=window,S=O.IstTooltip,P=function(e){var t=(0,b.default)(e);return j.getWeekdayShort(t)},I=function(e){function t(e){var r;a(this,t),r=s(this,c(t).call(this,e)),r.canvas=null,r.chartHolder=null;var n=r.props,o=n.stat,i=n.goal,l=n.width,u=(0,h.compose)(m.sum,(0,m.map)(function(e){return e.completed})),d=(0,h.compose)(m.max,(0,m.map)(u),(0,m.map)(function(e){return e.items}))(o);return r.pxPerCount=(l-55)/(0,m.max)([d,i]),r.goalLineHeight=20*r.props.stat.length+10,r}return d(t,e),l(t,[{key:"componentDidUpdate",value:function(){this.drawCanvas()}},{key:"componentDidMount",value:function(){this.drawCanvas();var e=this.props,t=e.goal,r=e.stat,n=t*this.pxPerCount-7,o=4==r.length,a=o?SPAN(_("Weekly Goal"),": ",B(t)):SPAN(_("Daily Goal"),": ",B(t));S.showSimpleText(this.chartHolder,a,null,-1,n)}},{key:"drawCanvas",value:function(){var e=this.props,t=e.goal,r=e.stat,n=20*r.length+10,o=this.canvas.getContext("2d");(0,w.default)(this.canvas,o);var a=this.pxPerCount*t,i=n-4;o.strokeStyle="#a5a5a5",o.fillStyle="#a5a5a5",o.lineWidth=1.5,o.beginPath(),o.moveTo(a,4),o.lineTo(a,i),o.stroke(),o.closePath(),o.beginPath(),o.arc(a,4,2,0,2*Math.PI,!1),o.fill(),o.closePath(),o.beginPath(),o.arc(a,i,2,0,2*Math.PI,!1),o.fill(),o.closePath()}},{key:"renderSingleBar",value:function(e){var t=e.colors,r=e.count,n=e.weekday,o=e.baseKey;if(0===t.length)return y.default.createElement("li",{key:o},y.default.createElement("div",{className:"project_colors"},y.default.createElement("div",{key:"".concat(o,"-0"),className:"project_viz",style:{width:"1px"}})),n?y.default.createElement("span",{className:"short_date"},n):null,y.default.createElement("b",null,"0"));var a=t.map(function(e,t){var r=e.colorHex,n=e.width;return y.default.createElement("div",{key:"".concat(o,"-").concat(t),className:"project_viz",style:{backgroundColor:r,width:n}})});return y.default.createElement("li",{key:o},y.default.createElement("div",{className:"project_colors"},a),n?y.default.createElement("span",{className:"short_date"},n):null,y.default.createElement("b",null,r))}},{key:"render",value:function(){var e=this,t=this.props,r=t.stat,n=t.idToColor,o=t.width,a=(0,h.compose)(m.sum,(0,m.map)(function(e){return e.completed})),i=[],l=!0,s=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value,p=f.items,_=f.date,v=_&&10===_.length?P(_):null,b=a(p),w=p.map(function(t){return{color:n[t.id],colorHex:g.getHex("project",n[t.id]),width:e.pxPerCount*t.completed}});w.sort(function(e,t){return e.color-t.color}),i.push(this.renderSingleBar({colors:w,count:b,weekday:v,baseKey:i.length}))}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}var E={width:o,height:this.goalLineHeight,overflow:"hidden"};return y.default.createElement("div",{className:"completed_bar_chart",ref:function(t){return e.chartHolder=t}},y.default.createElement("ul",null,i),y.default.createElement("div",{className:"goalline",style:E},y.default.createElement("canvas",{ref:function(t){return e.canvas=t},width:o,height:this.goalLineHeight.height})))}}]),t}(y.default.PureComponent);p(I,"propTypes",{stat:v.default.arrayOf(v.default.shape({date:v.default.string,items:v.default.array})).isRequired,goal:v.default.number,idToColor:v.default.object.isRequired,width:v.default.number}),p(I,"defaultProps",{width:225});var k=I;r.default=k},{"../../models/Colors":149,"../../utils/fp":1166,"../../utils/highDefCanvas":1174,"../../utils/isoToDate":1185,"prop-types":"prop-types",react:"react",redux:"redux"}],938:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("../../utils/format")),h=n(e("react")),y=n(e("prop-types")),v=n(e("./CompletedBarChart")),g=n(e("./ProgressRing")),b=e("./utils"),w=n(e("./MedalIcon")),E=n(e("./MotivatorCatelog")),j=e("../../utils"),O=e("../../constants/themes"),S=new E.default({p0:[_("What will you focus on first?"),_("Just take it one task at a time."),_("What\u2019s first on your list?")],p25:[_("You\u2019re off to a great start. Keep it up!"),_("Nice first steps. Keep moving forward!"),_("Getting started is the hardest part. Keep going!")],p75:[_("You\u2019re making great progress. Stay focused!"),_("You\u2019ve got some great momentum!"),_("You\u2019re on your way!"),_("Nothing can stop you!")],p100:[_("You\u2019re almost there. Keep going!"),_("It\u2019s the last stretch of the day!"),_("It\u2019s the final leg. You\u2019ve got this!")],p100plus:[_("Well done, {user_name}!"),_("You conquered the day, {user_name}!"),_("Nice work, {user_name}!"),_("Mischief managed. Well done!")]}),P=function(e){function t(e){return a(this,t),s(this,c(t).call(this,e))}return d(t,e),l(t,[{key:"renderStatus",value:function(){var e=this.props,t=e.goal,r=e.completed,n=_n("Daily goal: <b>{num_completed}/{num_goal} task</b>","Daily goal: <b>{num_completed}/{num_goal} tasks</b>",t),o=_n("Daily goal completed: <b>{num_completed}/{num_goal} task</b>","Daily goal completed: <b>{num_completed}/{num_goal} tasks</b>",t),a=_("Edit goal"),i=r<t?n:o;i=(0,m.default)(i,{num_completed:r,num_goal:t});var l=r/t,s=(0,m.default)(S.get(l),{user_name:(0,j.firstName)(this.props.userName)});return h.default.createElement("div",null,h.default.createElement("h4",{dangerouslySetInnerHTML:{__html:i}}),h.default.createElement("p",null,s),h.default.createElement("a",{className:"edit_link","data-track":"karma|tab_daily_edit_goal",onClick:this.props.onEditGoalClick},a))}},{key:"renderStreaks",value:function(){if((0,b.isNilStreakData)(this.props.currentStreak))return null;var e=this.props.currentStreak.count,t=_n("You've completed your goal 1 day in a row.","You've completed your goal {n} days in a row.",e);t=(0,m.default)(t,{n:e});var r;if(!(0,b.isNilStreakData)(this.props.maxStreak)){var n=this.props.maxStreak.count,o=_n("Your longest streak: 1 day","Your longest streak: {n} days",n);o=(0,m.default)(o,{n:n});var a=this.props.maxStreak,i=a.start,l=a.end,s=(0,b.formatInterval)(i,l);r=h.default.createElement("p",{className:"sm"},o,h.default.createElement("br",null),"(",s,")")}return h.default.createElement("div",{className:"section_streak"},h.default.createElement("p",null,t),r)}},{key:"render",value:function(){var e=this.props,t=e.daysItems,r=e.projectColors,n=e.goal,o=e.completed,a=e.theme,i=e.disableAnimation,l=e.width,s=o/n,u=(0,O.colorInHex)(a);a!==O.THEME_SUNFLOWER&&a!==O.THEME_NEUTRAL||(u=(0,O.colorInHex)(O.THEME_NOIR)),a===O.THEME_DARK&&(u=O.DARK_THEME_ICON_COLOR);var c=a===O.THEME_DARK?O.DARK_THEME_ICON_COLOR_DARKER:"#B3B3B3",d=s<1?c:u,f=a===O.THEME_DARK?O.DARK_THEME_ICON_COLOR_DARKER:"#E6E6E6";return h.default.createElement("div",null,h.default.createElement("div",{className:"goal_status section_progress"},h.default.createElement(g.default,{className:"pie_chart",width:72,color:u,strokeColor:f,disableAnimation:i,progress:Math.min(s,1),animationStart:500,animationDuration:1200},h.default.createElement(w.default,{width:45,color:d})),this.renderStatus()),this.renderStreaks(),h.default.createElement("div",{className:"section_completebar"},h.default.createElement("h6",{className:"section_title"},_("Completed in the last 7 days")),h.default.createElement(v.default,{width:l,stat:t,idToColor:r,goal:n})))}}]),t}(h.default.PureComponent);r.default=P,p(P,"propTypes",{width:y.default.number,daysItems:y.default.arrayOf(y.default.shape({date:y.default.string,items:y.default.array})),maxStreak:y.default.shape({count:y.default.number,start:y.default.string,end:y.default.string}),currentStreak:y.default.object,projectColors:y.default.object,goal:y.default.number,completed:y.default.number,userName:y.default.string,color:y.default.string,theme:y.default.number,disableAnimation:y.default.bool,onEditGoalClick:y.default.func}),p(P,"defaultProps",{disableAnimation:!1})},{"../../constants/themes":99,"../../utils":1176,"../../utils/format":1162,"./CompletedBarChart":937,"./MedalIcon":942,"./MotivatorCatelog":943,"./ProgressRing":945,"./utils":949,"prop-types":"prop-types",react:"react"}],939:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,o=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function a(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),l=function(e){var t=e.level,r=e.color,a=e.width,l=o(e,["level","color","width"]),u=a;return i.default.createElement("svg",n({width:a,height:u,viewBox:"0 0 48 48"},l),i.default.createElement("defs",null,i.default.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"karma_gradient"},i.default.createElement("stop",{stopColor:r,stopOpacity:"0.7",offset:"0%"}),i.default.createElement("stop",{stopColor:r,offset:"100%"}))),i.default.createElement("g",{fill:"url(#karma_gradient)"},i.default.createElement("path",{d:s(t)})))},s=function(e){switch(e){case 0:return"M24,35.5 C23.4922575,34.6160564 17.4279735,29.0769802 15.5491755,24.6276455 C15.2124383,23.6024532 15,22.6896523 15,21.9834087 C15,13.6034107 20.4495689,12.5 24,12.5 C27.5504311,12.5 33,13.6034107 33,21.9834087 C33,22.7071186 32.7747552,23.6510549 32.4199381,24.7142173 C30.5057337,29.1627926 24.5069892,34.622891 24,35.5 L24,35.5 Z";case 1:return"M24,8.5 C27.5504311,8.5 33,9.22138793 33,17.5745 C33,20.8006862 28.6608354,26.3696799 27.0133088,30.4156594 C24.3939901,36.8483505 24,39.5 24,39.5 C24,39.5 23.6029966,36.8286695 20.9866912,30.4156594 C19.3293714,26.3552975 15,20.8135546 15,17.5745 C15,9.22138793 20.4495689,8.5 24,8.5 L24,8.5 Z";case 2:return"M34.3341908,22.1449031 C34.3341908,30.6167582 25.25,37.5 25.25,37.5 L25.25,34.1295334 L25.25,18.0254439 C25.25,9.55283987 30.9014098,10.5347691 33.577238,10.5347691 C36.2523093,10.5347691 34.3341908,13.6730481 34.3341908,22.1449031 Z M14.6658092,22.1449031 C14.6658092,13.6730481 12.7476907,10.5347691 15.422762,10.5347691 C18.0985902,10.5347691 23.75,9.55283987 23.75,18.0254439 L23.75,34.1295334 L23.75,37.5 C23.75,37.5 14.6658092,30.6167582 14.6658092,22.1449031 Z";case 3:return"M11.2039067,9 C14.9126968,9 21.4,9.51672416 21.4,18.0003 L21.4,33.0003 L21.4,39 C21.4,39 12.2039067,29.4829759 12.2039067,21.00015 C12.2039067,12.5173241 9.49511662,9 12.2039067,9 Z M35.7960933,9 C38.5048834,9 35.7960933,12.5173241 35.7960933,21.00015 C35.7960933,29.4829759 26.6,39 26.6,39 L26.6,33.0003 L26.6,18.0003 C26.6,9.51672416 33.0873032,9 35.7960933,9 Z";case 4:return"M8.73765498,11.0652174 C11.3560232,11.0652174 20.952381,17.6768433 20.952381,26.2826087 L20.952381,41.5 C20.952381,41.5 12.8049045,40.0483335 11.7911456,23.2392826 C11.2728156,14.6494947 6.11928675,11.0652174 8.73765498,11.0652174 Z M39.2364976,11.0652174 C41.9171215,11.0652174 36.7196515,14.6494947 36.1894684,23.2392826 C35.1511932,40.0483335 27.047619,41.5 27.047619,41.5 L27.047619,26.2826087 C27.047619,17.6768433 36.5558736,11.0652174 39.2364976,11.0652174 Z M24,6.5 C25.1835937,6.5 27,6.9975096 27,10.7796525 C27,14.5617954 24,20.1956522 24,20.1956522 C24,20.1956522 21,14.5617954 21,10.7796525 C21,6.9975096 22.8164062,6.5 24,6.5 Z";case 5:return"M6,19.6363636 C12.5502577,19.6363636 18.4900102,25.0448977 20.694,31.2730389 C22.5754726,36.5892127 23.6326531,37.091013 23.6326531,37.091013 C23.6326531,37.091013 23.6326531,35.8183312 23.6326531,40 C18.7655089,40 13.9747698,37.0488327 11.8773061,31.2730389 C8.2759868,21.3533932 6,22.4900799 6,19.6363636 Z M24.0003646,8 C24.0003646,8 27.2843944,9.21376761 29.8334549,10.9089697 C31.4258885,11.9678347 32.75,13.8179394 32.75,13.8179394 C32.75,13.8179394 29.1940023,16.6076413 26.9169097,19.6366061 C24.8272051,22.4153994 24.0003646,25.4545455 24.0003646,25.4545455 C24.0003646,25.4545455 23.2464376,22.5128498 21.0838194,19.6366061 C18.8723491,16.6956377 15.25,13.8179394 15.25,13.8179394 C15.25,13.8179394 16.6156723,11.9401995 18.1672743,10.9089697 C20.7272718,9.20649518 24.0003646,8 24.0003646,8 Z M42,19.6363636 C42,22.8173409 39.7240132,21.3533932 36.1226939,31.2730389 C34.0252302,37.0488327 29.2344911,40 24.3673469,40 C24.3673469,35.8183312 24.3673469,37.091013 24.3673469,37.091013 C24.3673469,37.091013 25.4245274,36.5892127 27.306,31.2730389 C29.5099898,25.0448977 35.4497423,19.6363636 42,19.6363636 Z";case 6:return"M30.9866785,26.31856 C32.837713,23.4054756 34.6740291,20.8399049 35.9673256,19.4937112 C44.7374194,10.3631561 40.9311693,24.5778132 38.9839734,28.3050478 C35.4253273,35.1146488 25.6142613,39.9058175 24.0979394,40.6151368 C24.0993101,40.6463881 24.1000004,40.6767717 24.1000004,40.706272 C24.1000004,40.706272 24.0637515,40.6918003 23.9946652,40.6631075 C23.9325212,40.6917468 23.8999996,40.706272 23.8999996,40.706272 C23.8999996,40.6796963 23.9005913,40.6523374 23.9017671,40.6242081 C22.3844859,39.9841274 12.5746114,35.6300737 9.01629119,28.6310582 C7.06832754,24.8011907 3.26289798,10.1910951 12.0328822,19.5752138 C13.3493838,20.9837268 15.2285682,23.6081896 17.1131724,26.5614364 L13,16.556599 L21.0668622,24.8577897 C21.0668622,24.8577897 22.5334311,26.3670971 24,26.3670971 C25.4665689,26.3670971 26.9331378,24.8577897 26.9331378,24.8577897 L35,16.556599 L30.9866785,26.31856 Z M24,7.5 L31.5,11.9997188 L24,19.5 L16.5,11.9997188 L24,7.5 Z";case 7:return"M21.0001875,18.8888348 C21.0001875,18.8888348 22.5000937,20.3702066 24,20.3702066 C25.4999063,20.3702066 26.9998125,18.8888348 26.9998125,18.8888348 L36,9.99986364 L26.9998125,27.7770653 C26.9998125,27.7770653 25.4249109,29.9998636 24,29.9998636 C22.431848,29.9998636 21.0001875,27.7770653 21.0001875,27.7770653 L12,9.99986364 L21.0001875,18.8888348 Z M23.75,40 C23.75,40 12.4318815,35.5474524 8.5377368,27.9997955 C6.57317123,24.1937185 2.73530912,9.67437844 11.5800373,19.0002045 C15.3623775,22.9877733 23.75,36.7818963 23.75,40 Z M23.75,40.072485 C23.75,36.8543812 32.1376225,23.0602582 35.9199627,19.0726895 C44.7646909,9.7468634 40.9268288,24.2662034 38.9622632,28.0722804 C35.0681185,35.6199373 23.75,40.072485 23.75,40.072485 Z M30,9.99986364 L24,16.0003409 L18,9.99986364 L24,7 L30,9.99986364 Z"}},u=l;r.default=u},{react:"react"}],940:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("./KarmaTrend")),v=e("./utils"),g=n(e("../../utils/format")),b=n(e("./ProgressRing")),w=n(e("./KarmaIcon")),E=e("../../constants/themes"),j=[_x("karma","You are a <b>Beginner</b>"),_x("karma","You are a <b>Novice</b>"),_x("karma","You are an <b>Intermediate</b>"),_x("karma","You are a <b>Professional</b>"),_x("karma","You are an <b>Expert</b>"),_x("karma","You are a <b>Master</b>"),_x("karma","You are a <b>Grand Master</b>"),_x("karma","You are <b>Enlightened</b>")],O=function(e){function t(e){return a(this,t),s(this,c(t).call(this,e))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.karma,r=e.theme,n=e.trendData,o=e.disableAnimation,a=(0,E.colorInHex)(r);r!==E.THEME_SUNFLOWER&&r!==E.THEME_NEUTRAL||(a=(0,E.colorInHex)(E.THEME_NOIR)),r===E.THEME_DARK&&(a=E.DARK_THEME_ICON_COLOR);var i=r===E.THEME_DARK?"#3e3e3e":"#E6E6E6",l=(0,v.toKarmaLevel)(t),s=j[l],u=l==v.karmaLevelSteps.length-1,c=null,d=1;if(!u){var f=v.karmaLevelSteps[l],p=v.karmaLevelSteps[l+1];d=(t-f)/(p-f);var h=p-t;_("{karma_num} left to get to {karma_level}");var O=_n("{karma_num} point required for next level","{karma_num} points required for next level",h);c=m.default.createElement("p",null,(0,g.default)(O,{karma_num:h}))}return m.default.createElement("div",null,m.default.createElement("div",{className:"section_progress"},m.default.createElement(b.default,{className:"pie_chart",width:72,color:a,strokeColor:i,progress:d,disableAnimation:o,animationStart:500,animationDuration:1200},m.default.createElement(w.default,{level:l,color:a,width:45})),m.default.createElement("h4",{dangerouslySetInnerHTML:{__html:s}}),c,m.default.createElement("a",{className:"edit_link","data-track":"karma|tab_karma_about_levels",onClick:this.props.onKarmaInfoClick},_("About Karma Levels"))),m.default.createElement("div",{className:"section_completebar"},m.default.createElement("h6",{className:"section_title"},_("Karma trend")),m.default.createElement(y.default,{trendData:n,colorHex:a,width:280})))}}]),t}(m.default.PureComponent);r.default=O,p(O,"propTypes",{color:h.default.string,karma:h.default.number,trendData:h.default.arrayOf(h.default.shape({date:h.default.string,karma_avg:h.default.number})),onKarmaInfoClick:h.default.func,disableAnimation:h.default.bool,theme:h.default.number}),p(O,"defaultProps",{disableAnimation:!1})},{"../../constants/themes":99,"../../utils/format":1162,"./KarmaIcon":939,"./KarmaTrend":941,"./ProgressRing":945,"./utils":949,"prop-types":"prop-types",react:"react"}],941:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=e("../../utils/fp"),h=n(e("react")),_=n(e("prop-types")),y=n(e("../../utils/isoToDate")),v=n(e("../../utils/mapRange")),g=n(e("../../utils/hexToRGB")),b=n(e("../../utils/highDefCanvas")),w=window,E=w.IstTooltip,j=w.DateUtils,O=function(e){function t(e){var r;a(this,t),r=s(this,u(t).call(this,e));var n=r.deriveGraphData(r.props);return Object.assign(c(r),n),r.canvas=null,r}return d(t,e),l(t,[{key:"deriveGraphData",value:function(){var e=this.props,t=e.trendData,r=e.width,n=e.height,o=e.paddingTop,a=e.paddingBottom,i=e.paddingLeft,l=e.paddingRight,s=i,u=r-l,c=o,d=n-a,f=(0,m.min)(t.map(function(e){return e.karma_avg})),p=(0,m.max)(t.map(function(e){return e.karma_avg}));f==p&&(p=f+1);var h=Math.ceil((u-s)/(t.length-1));return{points:t.map(function(e,t){return{x:s+h*t,y:(0,v.default)(f,p,c,d,e.karma_avg),yI:(0,v.default)(f,p,d,c,e.karma_avg),karma:e.karma_avg,date:(0,y.default)(e.date)}}),startX:s,endX:u,startY:c,endY:d}}},{key:"componentWillUpdate",value:function(e){var t=this.deriveGraphData(e);Object.assign(this,t),this.canvas=null}},{key:"componentDidUpdate",value:function(){this.updateCanvas()}},{key:"componentDidMount",value:function(){this.updateCanvas()}},{key:"updateCanvas",value:function(){var e=this.canvas.getContext("2d");(0,b.default)(this.canvas,e),this.drawCanvas(e,this.points,this.endY,this.props.colorHex,this.props.paddingBottom)}},{key:"drawCanvas",value:function(e,t,r,n,o){e.fillStyle="#eeeeee",e.translate(-2,0);var a=!0,i=!1,l=void 0;try{
for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value,d=c.x,f=c.yI;e.beginPath(),e.fillStyle=n,e.arc(d,f,2,0,2*Math.PI,!1),e.fill(),e.closePath()}}catch(e){i=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}e.lineWidth=2,e.strokeStyle=n;for(var p=1;p<t.length;p++){var m=t[p-1],h=t[p];e.beginPath(),e.moveTo(m.x,m.yI),e.lineTo(h.x,h.yI),e.stroke(),e.closePath()}e.strokeStyle="#999999",e.lineWidth=.2;var _=!0,y=!1,v=void 0;try{for(var b,w=t[Symbol.iterator]();!(_=(b=w.next()).done);_=!0){var E=b.value,d=E.x,f=E.yI;e.beginPath(),e.moveTo(d,f),e.lineTo(d,r),e.stroke(),e.closePath()}}catch(e){y=!0,v=e}finally{try{_||null==w.return||w.return()}finally{if(y)throw v}}e.beginPath();var O=t[0],S=t[t.length-1];e.moveTo(O.x,O.yI);var P=!0,I=!1,k=void 0;try{for(var T,C=t.slice(1)[Symbol.iterator]();!(P=(T=C.next()).done);P=!0){var D=T.value,d=D.x,f=D.yI;e.lineTo(d,f)}}catch(e){I=!0,k=e}finally{try{P||null==C.return||C.return()}finally{if(I)throw k}}e.lineTo(S.x,r),e.lineTo(O.x,r),e.moveTo(O.x,O.yI),e.fillStyle=(0,g.default)(n,.1),e.fill(),e.closePath(),e.fillStyle="#999999";var A=!0,M=!1,x=void 0;try{for(var R,N=t[Symbol.iterator]();!(A=(R=N.next()).done);A=!0){var L=R.value,$=j.getWeekdayShort(L.date);e.fillText($,L.x-5,r+o)}}catch(e){M=!0,x=e}finally{try{A||null==N.return||N.return()}finally{if(M)throw x}}}},{key:"renderDataPointTooltip",value:function(){return this.points.map(function(e,t){var r=e.x,n=e.yI,o=e.karma,a={position:"absolute",width:"".concat(20,"px"),height:"".concat(20,"px"),marginLeft:"".concat(r-10,"px"),marginTop:"".concat(n-10,"px")},i=function(e){E.showSimpleText(e,o||"0",null,-5,2)};return h.default.createElement("div",{key:t,className:"fixed_pos",style:a,ref:i})})}},{key:"render",value:function(){var e=this;return h.default.createElement("div",null,this.renderDataPointTooltip(),h.default.createElement("canvas",{ref:function(t){return e.canvas=t},width:this.props.width,height:this.props.height}))}}]),t}(h.default.PureComponent);p(O,"propTypes",{trendData:_.default.arrayOf(_.default.shape({date:_.default.string,karma_avg:_.default.number})),colorHex:_.default.string,width:_.default.number,height:_.default.number,paddingTop:_.default.number,paddingBottom:_.default.number,paddingLeft:_.default.number,paddingRight:_.default.number}),p(O,"defaultProps",{width:300,height:70,paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10});var S=O;r.default=S},{"../../utils/fp":1166,"../../utils/hexToRGB":1173,"../../utils/highDefCanvas":1174,"../../utils/isoToDate":1185,"../../utils/mapRange":1187,"prop-types":"prop-types",react:"react"}],942:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){var t=(0,s.default)(a.propType,e),r=e.width,n=e.color,l=r/c;n&&(n=(0,u.hexToRGB)(n,.85));var d={tick:n||"#B3B3B3",ring:n||"#E6E6E6",topLeft:n||"#CCC",topRight:n||"#E6E6E6"};return i.default.createElement("svg",o({width:r,height:l,viewBox:"0 0 48 48"},t),i.default.createElement("defs",null,i.default.createElement("linearGradient",{x1:"100%",y1:"0%",x2:"0%",y2:"100%",id:"b"},i.default.createElement("stop",{stopOpacity:"0",offset:"0%"}),i.default.createElement("stop",{offset:"100%"})),i.default.createElement("path",{d:"M34.6 14.7L40 4H28l-3.5 7a17 17 0 0 1 10.1 3.7z",id:"me_a"}),i.default.createElement("linearGradient",{x1:"0%",y1:"0%",y2:"100%",id:"d"},i.default.createElement("stop",{stopOpacity:"0",offset:"0%"}),i.default.createElement("stop",{offset:"100%"})),i.default.createElement("path",{d:"M23.5 11L20 4H8l5.4 10.7A17 17 0 0 1 23.5 11z",id:"c"})),i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M0 0h48v48H0z"}),i.default.createElement("g",null,i.default.createElement("use",{fill:d.topRight,xlinkHref:"#me_a"}),i.default.createElement("use",{fillOpacity:".1",fill:"url(#b)",xlinkHref:"#me_a"})),i.default.createElement("g",null,i.default.createElement("use",{fill:d.topLeft,xlinkHref:"#c"}),i.default.createElement("use",{fillOpacity:".1",fill:"url(#d)",xlinkHref:"#c"})),i.default.createElement("path",{d:"M24 44a16 16 0 1 1 0-32 16 16 0 0 1 0 32zm0-4a12 12 0 1 0 0-24 12 12 0 0 0 0 24z",fill:d.ring}),i.default.createElement("path",{fill:d.tick,d:"M22 33l-5-5 1.8-1.7 3.2 3.2 7.3-7.2L31 24z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var i=n(e("react")),l=n(e("prop-types")),s=n(e("../../utils/filterOtherProps")),u=e("../../utils");a.propType={color:l.default.string,width:l.default.number.isRequired};var c=1},{"../../utils":1176,"../../utils/filterOtherProps":1160,"prop-types":"prop-types",react:"react"}],943:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(){function e(t){var r=t.p0,o=t.p25,a=t.p75,i=t.p100,l=t.p100plus,s=t.p100plusFri;n(this,e),this.p0=r,this.p25=o,this.p75=a,this.p100=i,this.p100plus=l,this.p100plusFri=s}return a(e,[{key:"get",value:function(e){var t;switch(!0){case e>=1:t=5===(new Date).getDay()&&this.p100plusFri?this.p100plusFri:this.p100plus;break;case e>.75:t=this.p100;break;case e>.25:t=this.p75;break;case e>0:t=this.p25;break;case 0==e:default:t=this.p0}return t[(new Date).getDate()%t.length]}}]),e}();r.default=i},{}],944:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=n(e("react")),y=n(e("prop-types")),v=e("../reactist/tabs"),g=n(e("./DailyStat")),b=n(e("./WeeklyStat")),w=n(e("./KarmaStat")),E=n(e("./WeeklyPremiumOnly")),j=n(e("../../utils/format")),O=function(e){function t(e){var r;return i(this,t),r=u(this,c(t).call(this,e)),r.state={current:"daily",shown:{}},r.onTabChange=r.onTabChange.bind(d(r)),r}return f(t,e),s(t,[{key:"onTabChange",value:function(e){var t=this.state,r=t.shown,n=t.current;this.setState({shown:a(m({},n,!0),r),current:e})}},{key:"render",value:function(){var e=this.props,t=e.isPremium,r=e.userName,n=e.hideKarma,o=e.theme,a=this.props.stat.goals,i=a.daily_goal,l=a.current_daily_streak,s=a.max_daily_streak,u=a.weekly_goal,c=a.current_weekly_streak,d=a.max_weekly_streak,f=this.props.stat,p=f.karma,m=f.days_items,y=f.week_items,O=f.project_colors,S=f.karma_graph_data,P=f.completed_count,I=(0,j.default)(_n("{count_num} completed task","{count_num} completed tasks",P),{count_num:P}),k=this.state.shown;return h.default.createElement("div",{className:"completed_quick_viz",style:{width:"".concat(this.props.width,"px")}},h.default.createElement("div",{className:"total_stat"},h.default.createElement("span",null,I),h.default.createElement("a",{"data-track":"karma|view_completed_tasks",onClick:this.props.onViewAllCompletedClick},_("View all completed tasks"))),h.default.createElement(v.Tabs,{onChange:this.onTabChange},h.default.createElement(v.Tab,{value:"daily",title:_x("stat","Daily"),track:"karma|tab_daily"},h.default.createElement(g.default,{width:this.props.width,userName:r,daysItems:m,maxStreak:s,projectColors:O,completed:this.props.completedToday,goal:i,currentStreak:l,theme:o,disableAnimation:k.daily,onEditGoalClick:this.props.onSettingEditClick})),h.default.createElement(v.Tab,{value:"weekly",title:_x("stat","Weekly"),track:"karma|tab_weekly"},t?h.default.createElement(b.default,{width:this.props.width,userName:r,weekItems:y,maxStreak:d,projectColors:O,completed:this.props.completedThisWeek,goal:u,currentStreak:c,theme:o,disableAnimation:k.weekly,onEditGoalClick:this.props.onSettingEditClick}):h.default.createElement(E.default,null)),n?null:h.default.createElement(v.Tab,{value:"karma",title:_x("stat","Karma"),track:"karma|tab_karma"},h.default.createElement(w.default,{karma:p,theme:o,trendData:S,disableAnimation:k.karma,onKarmaInfoClick:this.props.onKarmaInfoClick}))),h.default.createElement("div",{className:"section_setting_link"},h.default.createElement("a",{"data-track":"karma|karma_goals_and_settings",onClick:this.props.onSettingEditClick},_("Karma Goals and Settings"))))}}]),t}(h.default.PureComponent);r.default=O,m(O,"propTypes",{stat:y.default.object.isRequired,completedToday:y.default.number.isRequired,completedThisWeek:y.default.number.isRequired,userName:y.default.string,onKarmaInfoClick:y.default.func,onSettingEditClick:y.default.func,onViewAllCompletedClick:y.default.func,isPremium:y.default.bool,hideKarma:y.default.bool,theme:y.default.number,width:y.default.number}),m(O,"defaultProps",{width:300,isPremium:!1,theme:0,hideKarma:!1})},{"../../utils/format":1162,"../reactist/tabs":973,"./DailyStat":938,"./KarmaStat":940,"./WeeklyPremiumOnly":947,"./WeeklyStat":948,"prop-types":"prop-types",react:"react"}],945:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),_=e("../../utils/easing"),y=n(e("../../utils/tweening")),v=n(e("../../utils/format")),g=e("../../utils"),b=function(e){function t(e){var r;return a(this,t),r=s(this,c(t).call(this,e)),r.progressbarRef=null,r.elementId=(0,g.generateElementId)("progress-ring"),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;if(!this.props.disableAnimation){var t=this.props,r=t.animationDuration,n=t.animationStart;(0,y.default)({from:0,to:this.props.progress,duration:r,easing:_.easeOutQuint,step:function(t){e.progressbarRef&&(e.progressbarRef.style.strokeDashoffset=e.deriveStrokeDashoffset(t))},startAfter:n})}}},{key:"deriveStrokeDashoffset",value:function(e){return 301.635*(1-e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.color,n=t.width,o=t.strokeWidth,a=t.progress,i=t.disableAnimation,l={display:"block",width:n},s={strokeDasharray:"".concat(301.635,", ").concat(301.635),strokeDashoffset:i?this.deriveStrokeDashoffset(a):301.635},u={position:"relative",height:n,width:n},c={position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%",height:"100%"},d=50-o/2,f=(0,v.default)("M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{radius2} a {radius},{radius} 0 1 1 0,-{radius2}",{radius:d,radius2:2*d});return m.default.createElement("div",{style:u},m.default.createElement("svg",{viewBox:"0 0 100 100",style:l},m.default.createElement("defs",null,m.default.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:this.elementId},m.default.createElement("stop",{stopColor:r,stopOpacity:"0.7",offset:"0%"}),m.default.createElement("stop",{stopColor:r,offset:"100%"}))),m.default.createElement("path",{d:f,stroke:this.props.strokeColor,strokeWidth:o,fillOpacity:"0"}),m.default.createElement("path",{ref:function(t){return e.progressbarRef=t},d:f,stroke:"url(#".concat(this.elementId,")"),strokeWidth:o,fillOpacity:"0",style:s})),m.default.createElement("div",{style:c},this.props.children))}}]),t}(m.default.PureComponent);r.default=b,p(b,"propTypes",{progress:h.default.number,width:h.default.number,strokeWidth:h.default.number,color:h.default.string,strokeColor:h.default.string,children:h.default.node,disableAnimation:h.default.bool,animationDuration:h.default.number,animationStart:h.default.number}),p(b,"defaultProps",{progress:.7,width:72,strokeWidth:6,disableAnimation:!1,animationDuration:1200,animationStart:500,color:"#316fea"})},{"../../utils":1176,"../../utils/easing":1158,"../../utils/format":1162,"../../utils/tweening":1210,"prop-types":"prop-types",react:"react"}],946:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){var t=(0,s.default)(a.propType,e),r=e.width,n=e.color,l={ribbon:n?"#FFF":"#B3B3B3",body:n||"#E6E6E6"};return n!==u.DARK_THEME_ICON_COLOR_DARKER&&n!==u.DARK_THEME_ICON_COLOR||(l.ribbon=u.DARK_THEME_BG_LIGHTER),i.default.createElement("svg",o({width:"".concat(r,"px"),viewBox:"0 0 48 48"},t),i.default.createElement("defs",null,i.default.createElement("linearGradient",{x1:"0%",y1:"0%",y2:"100%",id:"a"},i.default.createElement("stop",{offset:"0%"}),i.default.createElement("stop",{stopOpacity:"0",offset:"100%"})),i.default.createElement("linearGradient",{x1:"100%",y1:"100%",x2:"0%",y2:"0%",id:"b"},i.default.createElement("stop",{stopOpacity:"0",offset:"0%"}),i.default.createElement("stop",{stopOpacity:"0",offset:"40%"}),i.default.createElement("stop",{offset:"100%"}))),i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("path",{d:"M12.09368 22.50672C8.71832 19.0911 7 16.29787 7 14c0-2.76142 2.23858-5 5-5v2c-1.65685 0-3 1.34315-3 3 0 1.32495.98894 3.173 3 5.47536V7h24v12.47536c2.01106-2.30237 3-4.1504 3-5.47536 0-1.65685-1.34315-3-3-3V9c2.76142 0 5 2.23858 5 5 0 2.29787-1.71832 5.0911-5.09368 8.50672C35.20599 28.09724 30.65986 32.492 25 32.95892V35h-2v-2.04107c-5.65986-.46693-10.206-4.8617-10.90632-10.45221zM16 39h16v5H16v-5zm3-2h10v2H19v-2zm2-2h6v2h-6v-2zM10 4h28v3H10V4zm16 3v12l3-3 3 3V7h-6z",fillOpacity:".8",fill:l.body}),i.default.createElement("path",{fillOpacity:".08",fill:"url(#a)",d:"M21 37h8v2h-6zM23 35h4v2h-2zM23 32.9h2v2z"}),i.default.createElement("path",{d:"M15 21c0 5.52285 4.47715 10 10 10s10-4.47715 10-10V7H15v14z",fillOpacity:".08",fill:"url(#b)"}),i.default.createElement("path",{fill:l.ribbon,d:"M26 7h6v12l-3-3-3 3z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var i=n(e("react")),l=n(e("prop-types")),s=n(e("../../utils/filterOtherProps")),u=e("../../constants/themes");a.propType={color:l.default.string,width:l.default.number.isRequired}},{"../../constants/themes":99,"../../utils/filterOtherProps":1160,"prop-types":"prop-types",react:"react"}],947:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.color,r=_("Weekly goals and streaks are Premium features. <a>Learn more</a>").replace("<a>",'<a href="https://get.todoist.help/hc/en-us/articles/206209959-Karma" target="_blank" rel="noopener noreferrer">'),n={marginTop:"1em"};return a.default.createElement("div",null,a.default.createElement("div",{className:"goal_status section_progress",style:{border:0}},a.default.createElement(l.default,{className:"pie_chart",width:72,iconType:"trophy",color:t,disableAnimation:!0,progress:0},a.default.createElement(s.default,{width:45})),a.default.createElement("h4",{style:n,dangerouslySetInnerHTML:{__html:r}})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=n(e("./ProgressRing")),s=n(e("./TrophyIcon"));o.propTypes={color:i.default.string}},{"./ProgressRing":945,"./TrophyIcon":946,"prop-types":"prop-types",react:"react"}],948:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("./CompletedBarChart")),v=n(e("../../utils/format")),g=e("./utils"),b=n(e("./ProgressRing")),w=n(e("./TrophyIcon")),E=n(e("./MotivatorCatelog")),j=e("../../utils"),O=e("../../constants/themes"),S=new E.default({p0:[_("Big things happen one task at a time."),_("Starting is the hardest part. You\u2019ve got this!"),_("Build momentum with one small task.")],p25:[_("You\u2019re on the right track!"),_("Nice start! Keep it up."),_("Keep up the momentum!")],p75:[_("Keep up the pace!"),_("Nothing can stop you!"),_("Your focus is unbreakable!")],p100:[_("It\u2019s the final stretch. You\u2019ve got this!"),_("The end is in sight. Go for it!"),_("Just a bit more to go!"),_("Your goal is within reach!")],p100plus:[_("You did it, {user_name}!"),_("Nice work, {user_name}!"),_("Nicely done, {user_name}!"),_("You conquered the week!"),_("Treat yourself. You deserve it, {user_name}!")]}),P=function(e){function t(e){return a(this,t),s(this,c(t).call(this,e))}return d(t,e),l(t,[{key:"renderStatus",value:function(){var e=this.props,t=e.goal,r=e.completed,n=_n("Weekly goal: <b>{num_completed}/{num_goal} task</b>","Weekly goal: <b>{num_completed}/{num_goal} tasks</b>",t),o=_n("Weekly goal completed: <b>{num_completed}/{num_goal} task</b>","Weekly goal completed: <b>{num_completed}/{num_goal} tasks</b>",t),a=_("Edit goal"),i=r<t?n:o;i=(0,v.default)(i,{num_completed:r,num_goal:t});var l=r/t,s=(0,v.default)(S.get(l),{user_name:(0,j.firstName)(this.props.userName)});return m.default.createElement("div",null,m.default.createElement("h4",{dangerouslySetInnerHTML:{__html:i}}),m.default.createElement("p",null,s),m.default.createElement("a",{className:"edit_link","data-track":"karma|tab_weekly_edit_goal",onClick:this.props.onEditGoalClick},a))}},{key:"renderStreaks",value:function(){if((0,g.isNilStreakData)(this.props.currentStreak))return null;var e=this.props.currentStreak.count,t=_n("You've completed your goal 1 week in a row.","You've completed your goal {n} weeks in a row.",e);t=(0,v.default)(t,{n:e});var r;if(!(0,g.isNilStreakData)(this.props.maxStreak)){var n=this.props.maxStreak.count,o=_n("Your longest streak: 1 week","Your longest streak: {n} weeks",n);o=(0,v.default)(o,{n:n});var a=this.props.maxStreak,i=a.start,l=a.end,s=(0,g.formatInterval)(i,l);r=m.default.createElement("p",{className:"sm"},o,m.default.createElement("br",null),"(",s,")")}return m.default.createElement("div",{className:"section_streak"},m.default.createElement("p",null,t),r)}},{key:"render",value:function(){var e=this.props,t=e.weekItems,r=e.projectColors,n=e.completed,o=e.goal,a=e.theme,i=e.disableAnimation,l=e.width,s=n/o,u=(0,O.colorInHex)(a);a!==O.THEME_SUNFLOWER&&a!==O.THEME_NEUTRAL||(u=(0,O.colorInHex)(O.THEME_NOIR)),a===O.THEME_DARK&&(u=O.DARK_THEME_ICON_COLOR);var c=a===O.THEME_DARK?O.DARK_THEME_ICON_COLOR_DARKER:"#B3B3B3",d=s<1?c:u,f=a===O.THEME_DARK?O.DARK_THEME_ICON_COLOR_DARKER:"#E6E6E6";return m.default.createElement("div",null,m.default.createElement("div",{className:"goal_status section_progress"},m.default.createElement(b.default,{className:"pie_chart",width:72,iconType:"trophy",color:u,strokeColor:f,disableAnimation:i,progress:Math.min(n/o,1),animationStart:500,animationDuration:1200},m.default.createElement(w.default,{width:45,color:d})),this.renderStatus()),this.renderStreaks(),m.default.createElement("div",{className:"section_completebar"},m.default.createElement("h6",{className:"section_title"},_("Completed in the last 4 weeks")),m.default.createElement(y.default,{width:l,color:u,stat:t,idToColor:r,goal:o})))}}]),t}(m.default.PureComponent);r.default=P,p(P,"propTypes",{stat:h.default.object,completed:h.default.number,goal:h.default.number,weekItems:h.default.arrayOf(h.default.shape({items:h.default.array})),maxStreak:h.default.shape({count:h.default.number,start:h.default.string,end:h.default.string}),currentStreak:h.default.object,projectColors:h.default.object,color:h.default.string,userName:h.default.string,disableAnimation:h.default.bool,onEditGoalClick:h.default.func,theme:h.default.number,width:h.default.number}),p(P,"defaultProps",{disableAnimation:!1})},{"../../constants/themes":99,"../../utils":1176,"../../utils/format":1162,"./CompletedBarChart":937,"./MotivatorCatelog":943,"./ProgressRing":945,"./TrophyIcon":946,"./utils":949,"prop-types":"prop-types",react:"react"}],949:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNilStreakData=r.formatInterval=r.toKarmaLevel=r.karmaLevelSteps=void 0;var n=[0,500,2500,5e3,7500,1e4,2e4,5e4];r.karmaLevelSteps=n;var o=function(e){return n.reduce(function(t,r,n){return e>=r?n:t},-1)};r.toKarmaLevel=o;var a=function(e,t){return e=new Date(e),e.setSeconds(59),e=DateUtils.format(e,!1,{with_year:!0}),t=new Date(t),t.setSeconds(59),t=DateUtils.format(t,!1,{with_year:!0}),e+" - "+t};r.formatInterval=a;var i=function(e){return""===e.start||""==e.end};r.isNilStreakData=i},{}],950:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("../side_panel/SidePanel")),v=e("../reactist/tabs"),g=e("../../utils"),b=n(e("../activity_log")),w=n(e("../../containers/Notes")),E=n(e("../../containers/ErrorBoundary")),j=e("../../reducers/notes"),O=n(e("../tab_title")),S=e("./ProjectDetailHeader"),P=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"detailRef",m.default.createRef()),p(c(r),"state",{isSidePanelShown:!0}),p(c(r),"handleClose",function(){r.setState({isSidePanelShown:!1})}),p(c(r),"handleKeyPress",function(e){"Escape"===(0,g.resolveKeyboardKey)(e.key)&&r.setState({isSidePanelShown:!1})}),p(c(r),"handleSidePanelExited",function(){r.props.onClosed()}),p(c(r),"handleError",function(){r.props.onClosed()}),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){this.detailRef.current.focus(),document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props,t=e.project,r=e.notesCount,n=e.hasMoreNotes,o=e.highlightedNoteId,a=e.onNoteHighlighted;return m.default.createElement(y.default,{isShown:this.state.isSidePanelShown,onClickOutside:this.handleClose,onExited:this.handleSidePanelExited,onKeyPress:this.handleKeyPress,onClosed:this.handleOnClosed},m.default.createElement("div",{className:"item_detail",tabIndex:"-1",ref:this.detailRef},m.default.createElement(E.default,{onErrorCaught:this.handleError},m.default.createElement(S.ProjectDetailHeader,{project:t,onClose:this.handleClose}),m.default.createElement(v.Tabs,{onChange:this.onTabChange},m.default.createElement(v.Tab,{prerender:!1,className:"notes_tab_container",value:"comments",title:m.default.createElement(O.default,{label:_("Comments"),count:r,hasMore:n})},m.default.createElement(E.default,{showErrorMsg:!0},m.default.createElement(w.default,{project:t,highlightedNoteId:o,type:j.TYPE_PROJECT_NOTE,parentId:t.id,projectId:t.id,onNoteHighlighted:a}))),m.default.createElement(v.Tab,{value:"activity",title:_("Activity")},m.default.createElement(E.default,{showErrorMsg:!0},m.default.createElement(b.default,{filterBy:{parent_project_id:t.id}})))))))}}]),t}(m.default.Component);r.default=P,p(P,"propTypes",{highlightedNoteId:h.default.number,project:h.default.object.isRequired,notesCount:h.default.number.isRequired,hasMoreNotes:h.default.bool.isRequired,onClosed:h.default.func.isRequired,onNoteHighlighted:h.default.func.isRequired})},{"../../containers/ErrorBoundary":100,"../../containers/Notes":101,"../../reducers/notes":1114,"../../utils":1176,"../activity_log":668,"../reactist/tabs":973,"../side_panel/SidePanel":1052,"../tab_title":1073,"./ProjectDetailHeader":951,"prop-types":"prop-types",react:"react"}],951:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.project,r=e.onClose;return a.default.createElement("div",{className:"item_detail_header"},a.default.createElement("h4",{className:"item_detail_parent_info"},a.default.createElement("div",{className:"item_detail_parent_icon"},a.default.createElement(l.default,{color:t.color})),a.default.createElement(s.default,{className:"item_detail_parent_name",text:t.name})),a.default.createElement(u.default,{onClick:r,className:"item_detail_close","aria-label":_("Close")},a.default.createElement(c.CloseIcon,null)))}Object.defineProperty(r,"__esModule",{value:!0}),r.ProjectDetailHeader=o;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../icons/ProjectIcon")),s=n(e("../formatter/PlainText")),u=n(e("../Button")),c=e("../icons");o.propTypes={project:i.default.object.isRequired,onClose:i.default.func.isRequired}},{"../Button":648,"../formatter/PlainText":762,"../icons":842,"../icons/ProjectIcon":828,"prop-types":"prop-types",react:"react"}],952:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.detailView,r=e.projects;if(!t||"project"!==t.type)return{};var n=t.id;return{project:r[n],notesCount:(0,u.noteGetByProject)(e,n).length,hasMoreNotes:(0,u.hasMoreProjectNotes)(e,n),highlightedNoteId:t.highlightedNoteId}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=e("react-redux"),l=n(e("./ProjectDetail")),s=e("../../reducers/detailView"),u=e("../../reducers/notes"),c=function(e){return e.project?a.default.createElement(l.default,e):null},d=function(e){return{onClosed:function(){return e((0,s.detailViewClose)())},onNoteHighlighted:function(){return e((0,s.detailViewUnmarkNote)())}}},f=(0,i.connect)(o,d)(c);r.default=f},{"../../reducers/detailView":1092,"../../reducers/notes":1114,"./ProjectDetail":950,react:"react","react-redux":"react-redux"}],953:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function u(e,t){return f(e)||d(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function f(e){if(Array.isArray(e))return e}function p(e){
var t=e.children,r=e.collaborators,n=e.projects,i=e.sections,l=e.selectedProjectId,s=e.selectedSectionId,c=e.withAllProjectsOption,d=void 0!==c&&c,f=e.withSectionSelection,p=void 0!==f&&f,h=e.onProjectAdd,S=void 0===h?function(){}:h,P=e.onSelect,I=void 0===P?function(){}:P,k=m.default.useState(!1),T=u(k,2),C=T[0],D=T[1],A=m.default.useMemo(function(){return!!p&&n.some(function(e){var t=(0,b.sectionGetByPID)(e.id)({sections:i});return t&&t.length>0})},[p,n,i]),M=function(e,t){var n=(0,y.getHex)("project",t);return(0,v.isShared)({collaborators:r},e)?m.default.createElement("span",{className:"project_picker_item_icon",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/project_shared.svg")},style:{color:n}}):m.default.createElement("span",{className:"project_picker_item_icon project_picker_item_icon--unshared",style:{color:e?n:"transparent"}})},x=function(e,t,r){var n=[{id:-1,name:_("No Section"),project_id:e.id,followedBySeparator:!0}].concat(a(r));return m.default.createElement(O.default,{sections:n,onSelect:function(e){document.querySelector(".project_picker_item").click(),I({project_id:e.project_id,section_id:-1===e.id?null:e.id})},selectedSectionId:s,onClose:function(){return D(!1)}},function(r){var n=r.toggle,a=r.buttonProps;return m.default.createElement("div",o({onClick:function(){D(!C),n()},className:"project_picker_item project_picker_item--indent_".concat(e.indent)},a,{"data-sub-select-id":"sub_select-id-".concat(e.id)}),m.default.createElement("div",{className:"dropdown_select_subselect_holder"}),M(e.id,e.color),m.default.createElement("span",{className:"project_picker_item_name"},e.name),t?m.default.createElement(j.CheckmarkIcon,{className:"dropdown_select_checkmark"}):null)})},R=function(e,t){var r=m.default.createElement("div",{className:"project_picker_item project_picker_item--indent_".concat(e.indent)},M(e.id,e.color),m.default.createElement("span",{className:"project_picker_item_name"},e.name),t?m.default.createElement(j.CheckmarkIcon,{className:"dropdown_select_checkmark"}):null),n=(0,b.sectionGetByPID)(e.id)({sections:i}),o=n&&n.length>0;return p&&o?x(e,t,n):r},N=function(e){return m.default.createElement("div",{className:"project_picker_empty"},m.default.createElement("span",null,_("Project not found")),m.default.createElement(w.default,{onClick:function(t){t.stopPropagation(),S(e)}},m.default.createElement(j.CreateIcon,null),_('Create "{query}"').replace("{query}",e)))},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.closeDropdown,n=(0,b.sectionGetByPID)(e.id)({sections:i}),o=n&&n.length>0;if(!A||A&&!o)I({project_id:e.id,section_id:null}),"function"==typeof r&&r();else{var a=document.querySelector('[data-sub-select-id="sub_select-id-'.concat(e.id,'"]'));a&&a.click()}};return d&&(n=[{id:0,name:_("All Projects")}].concat(a(n))),m.default.createElement(E.default,{className:"project_picker",items:n,renderItem:function(e){var t=e.item,r=e.isSelected;return R(t,r)},filterItems:function(e){var t=e.items,r=e.value;return""===r?t:(0,g.projectGetByNameSearch)(r,{projects:t})},renderEmptyResult:function(e){var t=e.searchValue;return N(t)},inputPlaceholder:_("Type a project"),selectedItemId:l,onSelect:L,closeAfterSelection:!A,closeTriggersDisabled:C},t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=e("../../models/Colors"),v=e("../../reducers/collaborators"),g=e("../../reducers/projects"),b=e("../../reducers/sections"),w=n(e("../Button")),E=n(e("../dropdown_select")),j=e("../icons"),O=n(e("./SectionPicker"));p.propTypes={children:h.default.func,collaborators:h.default.object,projects:h.default.arrayOf(h.default.shape({id:h.default.oneOfType([h.default.string,h.default.number]).isRequired})),sections:h.default.object,selectedProjectId:h.default.oneOfType([h.default.string,h.default.number]),selectedSectionId:h.default.oneOfType([h.default.string,h.default.number]),withSectionSelection:h.default.bool,withAllProjectsOption:h.default.bool,onProjectAdd:h.default.func,onSelect:h.default.func};var S=p;r.default=S},{"../../models/Colors":149,"../../reducers/collaborators":1086,"../../reducers/projects":1119,"../../reducers/sections":1125,"../Button":648,"../dropdown_select":708,"../icons":842,"./SectionPicker":954,"prop-types":"prop-types",react:"react"}],954:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.sections,r=e.selectedSectionId,n=e.onSelect,o=e.onClose,i=e.children;return a.default.createElement(l.default,{className:"section_picker",items:t,renderItem:function(e){var t=e.item,r=e.isSelected;return a.default.createElement("div",{className:"section_picker_item"},a.default.createElement("span",{className:"section_picker_item_name"},t.name),r&&a.default.createElement(u.CheckmarkIcon,{className:"dropdown_select_checkmark"}))},filterItems:function(e){var t=e.items,r=e.value;return""===r?t:(0,s.sectionGetByNameSearch)(r,{sections:t})},renderEmptyResult:function(e){var t=e.searchValue;return a.default.createElement("div",{className:"section_picker_item"},a.default.createElement("span",{className:"section_picker_item_name"},"No result for: ",t))},inputPlaceholder:_("Type a section"),onSelect:n,onClose:o,selectedItemId:null!=r?r:-1,nose:!1,closeAfterSelection:!0},i)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../dropdown_select")),s=e("../../reducers/sections/selectors"),u=e("../icons");o.propTypes={sections:i.default.arrayOf(i.default.shape({id:i.default.oneOfType([i.default.string,i.default.number]).isRequired})),selectedSectionId:i.default.oneOfType([i.default.string,i.default.number]),onSelect:i.default.func,onClose:i.default.func,children:i.default.func};var c=o;r.default=c},{"../../reducers/sections/selectors":1127,"../dropdown_select":708,"../icons":842,"prop-types":"prop-types",react:"react"}],955:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=e("../../reducers/projects"),a=function(e){return e&&e.__esModule?e:{default:e}}(e("./ProjectPicker")),i=function(e){return{collaborators:e.collaborators,projects:(0,o.projectGetActiveWithIndent)(e),sections:e.sections}},l=function(e){return{onProjectAdd:function(t){return e((0,o.projectAdd)({name:t}))}}},s=(0,n.connect)(i,l)(a.default);r.default=s},{"../../reducers/projects":1119,"./ProjectPicker":953,"react-redux":"react-redux"}],956:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function l(e){return c(e)||u(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function d(e,t){return m(e)||p(e,t)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function m(e){if(Array.isArray(e))return e}function h(e){var t=e.project;(0,y.useLayoutEffect)(function(){r.current.scrollIntoView()},[]);var r=(0,y.useRef)(),n=(0,y.useState)(!0),o=d(n,2),a=o[0],s=o[1],u=(0,y.useState)(!1),c=d(u,2),f=c[0],p=c[1],m=(0,y.useState)([]),h=d(m,2),v=h[0],w=h[1],E=(0,y.useState)(0),S=d(E,2),C=S[0],D=S[1],A=function(){s(!0),T(t.id,C).then(function(e){s(!1),D(C+e.length),w([].concat(l(v),l(e))),e.length<10&&p(!0)}).catch(function(){s(!1)})};(0,y.useEffect)(A,[]);var M=(0,g.useSelector)(function(e){return{labels:(0,P.labelGetAllByName)(e),collaborators:e.collaborators,user:e.user,theme:(0,I.getTheme)(e)}}),x=(0,g.useDispatch)(),R=v.map(function(e){var r=function(){w(v.filter(function(t){return t!==e})),x((0,k.itemUnarchive)(e))};return y.default.createElement(O.default,i({item:e,project:t,key:e.id,indent:1,reminders:[],onCheckedChange:r},M))});return y.default.createElement("div",{ref:r,className:"list_editor history completed_section"},y.default.createElement("ul",{className:"items project_history"},R),y.default.createElement("div",{className:"control"},f?y.default.createElement("p",{className:"no_more"},_("No more completed tasks")," "):null,a?y.default.createElement(j.default,{theme:M.theme}):null,a||f?null:y.default.createElement("div",{className:"fetch_more"},y.default.createElement(b.default,{onClick:A},_("Fetch more...")))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=h;var y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),v=n(e("prop-types")),g=e("react-redux"),b=n(e("../Button")),w=n(e("../../models/SyncEngine")),E=e("../../utils/fp"),j=n(e("../spinners/RingSpinner")),O=n(e("../item_list_item")),S=e("../../reducers/items/utils"),P=e("../../reducers/labels"),I=e("../../reducers/settings"),k=e("../../reducers/items");h.propTypes={project:v.default.object};var T=function(e,t){return new Promise(function(r,n){var a=$requestJSON("/API/".concat(w.default.api_version,"/items/get_completed"));a.offline_message=!0,a.addCallback(function(e){e=(0,E.compose)((0,E.map)(function(e){return o({},(0,S.deserializeItemFields)(e),{parent_id:null,section_id:null})}),(0,E.sortBy)(["date_completed","id"]))(e),e.reverse(),r(e)}),a.addErrback(function(e){n(e)}),a.sendReq({project_id:e,offset:t})})}},{"../../models/SyncEngine":169,"../../reducers/items":1100,"../../reducers/items/utils":1103,"../../reducers/labels":1105,"../../reducers/settings":1129,"../../utils/fp":1166,"../Button":648,"../item_list_item":877,"../spinners/RingSpinner":1066,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],957:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.section,r=e.items,n=e.labels,o=e.notes,i=e.moreNotes,f=e.project,p=e.reminders,m=e.user,h=e.tempIds,y=e.collaborators,v=e.onSectionUpdate,g=e.onAddSectionBelowClick,b=e.onItemUpdate,w=e.onItemAdd,E=e.onItemCheckedChange,j=e.onItemArchive,O=e.onItemDelete,S=e.onItemDuplicate,P=e.onItemLinkCopy,I=e.onItemMoveToProject,k=(0,l.default)("section",t&&t.collapsed?"section__collapsed":null),T={};t&&(T["data-section-id"]=t.id);var C=(0,a.useCallback)(function(e){v({id:t.id,name:e})},[v,t]),D=(0,a.useCallback)(function(e){var r=e.collapsed;v({id:t.id,collapsed:r})},[v,t]);return a.default.createElement("li",T,a.default.createElement("div",{className:k},t?a.default.createElement(s.default,{section:t,itemCount:r.length,onRename:C,onCollapseChange:D}):null,a.default.createElement(d.default,{parentID:null,sectionID:t?t.id:null,items:r,project:f,labels:n,reminders:p,user:m,notes:o,moreNotes:i,tempIds:h,collaborators:y,onUpdate:b,onAdd:w,onCheckedChange:E,onArchive:j,onDelete:O,onDuplicate:S,onLinkCopy:P,onMoveToProject:I,listProps:{"data-section-list-id":t?t.id:"null"}})),(0,u.isDoistUser)({user:m})?a.default.createElement(c.default,{className:"hover_action_button",onClick:function(){g(t?t.id:null)}},_("Add section")):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("./SectionHead")),u=e("../../reducers/user"),c=n(e("../Button")),d=n(e("../item_list/ItemTreeList"));o.propTypes={section:i.default.object,items:i.default.array.isRequired,labels:i.default.object.isRequired,notes:i.default.object.isRequired,moreNotes:i.default.object.isRequired,project:i.default.object.isRequired,reminders:i.default.object.isRequired,user:i.default.object.isRequired,tempIds:i.default.object.isRequired,collaborators:i.default.object.isRequired,onSectionUpdate:i.default.func.isRequired,onAddSectionBelowClick:i.default.func.isRequired,onItemUpdate:i.default.func.isRequired,onItemAdd:i.default.func.isRequired,onItemCheckedChange:i.default.func.isRequired,onItemArchive:i.default.func.isRequired,onItemDelete:i.default.func.isRequired,onItemDuplicate:i.default.func.isRequired,onItemLinkCopy:i.default.func.isRequired,onItemMoveToProject:i.default.func.isRequired}},{"../../reducers/user":1135,"../Button":648,"../item_list/ItemTreeList":867,"./SectionHead":962,classnames:"classnames","prop-types":"prop-types",react:"react"}],958:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return l(e)||i(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function s(e,t){return d(e)||c(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function d(e){if(Array.isArray(e))return e}function f(e){var t=e.project,r=e.items,n=e.labels,o=e.notes,a=e.moreNotes,i=e.reminders,l=e.sections,u=e.tempIds,c=e.user,d=e.collaborators,f=e.onSectionUpdate,p=e.onSectionAdd,h=e.onSectionReorder,y=e.onItemUpdate,P=e.onItemAdd,I=e.onItemCheckedChange,T=e.onItemArchive,M=e.onItemDelete,x=e.onItemDuplicate,R=e.onItemLinkCopy,N=e.onItemMoveToProject,L=e.onItemMoveAndReorder,$=e.onShareOptionClick,U={items:r,sections:l},B=(0,E.sectionGetByPID)(t.id)(U),V=(0,w.itemGetSectionGroups)(t.id,U),F=B.map(function(e){return e.id});F.unshift(null);var H=(0,m.useState)(void 0),q=s(H,2),G=q[0],z=q[1],W=function(e){z(e)},Y=function(){z(void 0)},K=F.map(function(e){return m.default.createElement(b.default,{key:e||"default_section",project:t,items:V[e],moreNotes:a,labels:n,notes:o,reminders:i,tempIds:u,section:l[e]||null,user:c,collaborators:d,onSectionUpdate:f,onAddSectionBelowClick:W,onItemUpdate:y,onItemAdd:P,onItemCheckedChange:I,onItemArchive:T,onItemDelete:M,onItemDuplicate:x,onItemLinkCopy:R,onItemMoveToProject:N})}),J=F.indexOf(G);if(-1!==J){var Q=m.default.createElement("li",{key:"section_form_".concat(J)},m.default.createElement(S.default,{placeholder:_("Name this section"),submitBtn:_("Add Section"),onCancel:Y,onSubmit:function(e){z(void 0);var r=null===G?Number.NEGATIVE_INFINITY:l[G].section_order+1;p({name:e,section_order:r,project_id:t.id})}}));K.splice(J+1,0,Q)}var X=(0,m.useState)(!1),Z=s(X,2),ee=Z[0],te=Z[1],re=(0,v.default)("section_list",void 0===G?null:"section_add_active"),ne=(0,k.getAllProjectCollaborators)({collaborators:d,user:c},t.id).length;return D(h),A(t.id,L),m.default.createElement("div",{className:"project_editor_instance current_editor"},m.default.createElement(g.default,{project:t,noteCount:(0,j.noteGetByProject)({notes:o},t.id).length,noteHasMore:(0,O.hasMoreProjectNotes)({moreNotes:a},t.id),moreNotes:a,user:c,collaboratorCount:ne,onAddSection:function(){var e=F[F.length-1];z(e)},isCompletedShown:ee,onShowCompleted:(0,m.useCallback)(function(){return te(!0)},[]),onHideCompleted:(0,m.useCallback)(function(){return te(!1)},[]),onShareOptionClick:$}),m.default.createElement("div",{className:"list_editor"},m.default.createElement("ul",{className:re,"data-project-list-id":t.id},K)),ee?m.default.createElement(C.default,{project:t}):null)}function p(e,t,r){var n=e.pageX,o=e.pageY+t.scrollTop-$scrollTop(),a=r.current.find(function(e){var t=e.x,r=e.y,a=e.w,i=e.h;return n>=t&&n<=t+a&&o>=r&&o<=r+i});return a&&a.elm}Object.defineProperty(r,"__esModule",{value:!0}),r.default=f;var m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),h=e("../../utils"),y=n(e("prop-types")),v=n(e("classnames")),g=n(e("./ProjectViewHeader")),b=n(e("./ProjectSection")),w=e("../../reducers/items"),E=e("../../reducers/sections"),j=e("../../reducers/notes"),O=e("../../reducers/moreNotes"),S=n(e("./SectionForm")),P=n(e("../drag_and_drop/useSortable")),I=n(e("../drag_and_drop/useDraggable")),k=e("../../reducers/collaborators"),T=n(e("../drag_and_drop/sortable")),C=n(e("./CompletedSection")),D=function(e){return(0,P.default)({listIdAttr:"data-project-list-id",itemIdAttr:"data-section-id",handleSelector:".section_dnd_handle",maxIndent:5,onSort:(0,m.useCallback)(function(t){var r=t.orders;r=r.map(function(e){return{id:(0,h.parseId)(e.id),section_order:e.item_order}}),e(r)},[e])})},A=function(e,t){var r=(0,m.useRef)(),n=(0,m.useRef)(),a=(0,m.useRef)(),i=(0,m.useRef)(),l=document.getElementById("left_menu");(0,I.default)({itemSelector:"[data-section-list-id] [data-item-id]",handleSelector:".item_dnd_handle",scrollSelector:["#left_menu","html"],onDragStart:(0,m.useCallback)(function(e){r.current=e,n.current=(0,T.default)({dragItem:e,listIdAttr:"data-section-list-id",itemIdAttr:"data-item-id",maxIndent:5}),n.current.handleDragStart();var t=[document.getElementById("filter_inbox"),document.getElementById("filter_team_inbox")].concat(o(document.querySelectorAll("[data-type='project_list_item']"))).filter(function(e){return e&&"none"!==e.style.display});a.current=t.map(function(e){var t=$position(e);return{elm:e,x:t.x,y:t.y,w:e.offsetWidth,h:e.offsetHeight}})},[]),onDragging:(0,m.useCallback)(function(e){var t=p(e,l,a);i.current&&i.current!==t&&i.current.classList.remove("drop_background"),t&&t.classList.add("drop_background"),i.current=t,i.current||n.current.handleDragging()},[l]),onDragEnd:(0,m.useCallback)(function(){var r=n.current.handleDragEnd(),o=r.dragItemId,a=r.orders,l=r.dropListId,s=i.current;if(s)return s.classList.remove("drop_background"),void t({id:(0,h.parseId)(o),project_id:(0,h.parseId)(s.getAttribute("data-id"))});var u,c=a.findIndex(function(e){return e.id===o}),d=a[c].indent,f="null"===l?null:(0,h.parseId)(l);if(1===d)u={id:(0,h.parseId)(o),parent_id:null,section_id:f,project_id:e};else for(var p=c;p>=0;p--)if(a[p].indent<d){u={id:(0,h.parseId)(o),parent_id:(0,h.parseId)(a[p].id),section_id:f,project_id:e};break}a=a.map(function(e){return{id:(0,h.parseId)(e.id),child_order:e.item_order}}),t(u,a)},[t,e])})};f.propTypes={project:y.default.object.isRequired,items:y.default.object.isRequired,labels:y.default.object.isRequired,notes:y.default.object.isRequired,moreNotes:y.default.object.isRequired,reminders:y.default.object.isRequired,sections:y.default.object.isRequired,collaborators:y.default.object.isRequired,tempIds:y.default.object.isRequired,user:y.default.object.isRequired,onSectionUpdate:y.default.func.isRequired,onSectionAdd:y.default.func.isRequired,onSectionReorder:y.default.func.isRequired,onItemUpdate:y.default.func.isRequired,onItemAdd:y.default.func.isRequired,onItemCheckedChange:y.default.func.isRequired,onItemArchive:y.default.func.isRequired,onItemDelete:y.default.func.isRequired,onItemDuplicate:y.default.func.isRequired,onItemLinkCopy:y.default.func.isRequired,onItemMoveToProject:y.default.func.isRequired,onItemMoveAndReorder:y.default.func.isRequired,onShareOptionClick:y.default.func.isRequired}},{"../../reducers/collaborators":1086,"../../reducers/items":1100,"../../reducers/moreNotes":1111,"../../reducers/notes":1114,"../../reducers/sections":1125,"../../utils":1176,"../drag_and_drop/sortable":691,"../drag_and_drop/useDraggable":692,"../drag_and_drop/useSortable":693,"./CompletedSection":956,"./ProjectSection":957,"./ProjectViewHeader":959,"./SectionForm":961,classnames:"classnames","prop-types":"prop-types",react:"react"}],959:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.project,r=e.noteCount,n=e.noteHasMore,o=e.collaboratorCount,a=e.user,i=e.isCompletedShown,l=e.onShareOptionClick,c=e.onShowCompleted,m=e.onHideCompleted,h=e.onAddSection;return u.default.createElement(_.ViewHeader,{header:u.default.createElement(y.default,{text:t.name}),menu:u.default.createElement(u.default.Fragment,null,u.default.createElement(d.default,{noteParent:t,noteType:f.TYPE_PROJECT_NOTE,notesCount:r,hasMore:n,user:a}),t.inbox_project?null:u.default.createElement(s,{collaboratorCount:o,onClick:function(){return l(t.id)}}),u.default.createElement(p.default,{user:a,projectId:t.id,isCompletedShown:i,onShowCompleted:c,onHideCompleted:m,onAddSection:h}))})}function s(e){var t=e.collaboratorCount,r=a(e,["collaboratorCount"]);return u.default.createElement(h.default,o({className:"share_icon"},r),0===t?u.default.createElement(m.AssigneeIcon,null):u.default.createElement(u.default.Fragment,null,u.default.createElement(m.CollaboratorIcon,null),u.default.createElement("span",{className:"share_count"},t)))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var u=n(e("react")),c=n(e("prop-types")),d=n(e("../NotesButton")),f=e("../../reducers/notes"),p=n(e("./ProjectViewMenu")),m=e("../icons"),h=n(e("../Button")),_=e("../view"),y=n(e("../formatter/FormattedText"));l.propTypes={project:c.default.object.isRequired,collaboratorCount:c.default.number,noteCount:c.default.number.isRequired,noteHasMore:c.default.bool.isRequired,user:c.default.object.isRequired,isCompletedShown:c.default.bool.isRequired,onShareOptionClick:c.default.func.isRequired,onShowCompleted:c.default.func.isRequired,onHideCompleted:c.default.func.isRequired,onAddSection:c.default.func.isRequired},s.propTypes={collaboratorCount:c.default.number}},{"../../reducers/notes":1114,"../Button":648,"../NotesButton":655,"../formatter/FormattedText":761,"../icons":842,"../view":1081,"./ProjectViewMenu":960,"prop-types":"prop-types",react:"react"}],960:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=(e.projectId,e.isCompletedShown),r=e.onAddSection,n=e.onSortByPriority,a=e.onSortByDate,i=e.onSortByName,l=e.onImport,s=e.onExport,c=e.onShowMailItem,d=e.onShowProjectCalendar,m=e.onShowCompleted,h=e.onHideCompleted,g=e.user,b=(0,u.useState)(null),E=o(b,2),j=E[0],O=E[1],S=function(e){return function(){O(null);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(null,r)}},P=function(e){O(e.target)};return u.default.createElement(u.default.Fragment,null,u.default.createElement(v.default,{className:"gear_icon icon",onClick:P},u.default.createElement(p.MoreIcon,null)),j?u.default.createElement(y.default,{align:"bottom",anchor:j,onHide:function(){return O(null)}},u.default.createElement(f.MenuList,{className:"project_view_menu","aria-label":_x("a11y","task edit menu")},(0,w.isDoistUser)({user:g})?u.default.createElement(u.default.Fragment,null,u.default.createElement(f.IconMenuItem,{text:_("Add section"),icon:u.default.createElement(p.AddSectionIcon,null),onClick:S(r)}),u.default.createElement(f.MenuSeparator,null)):null,u.default.createElement(f.IconMenuItem,{text:_("Sort by date"),icon:u.default.createElement(p.CalendarIconB,null),onClick:S(a)}),u.default.createElement(f.IconMenuItem,{text:_("Sort by priority"),icon:u.default.createElement(p.PriorityIconB,null),onClick:S(n)}),u.default.createElement(f.IconMenuItem,{text:_("Sort by name"),icon:u.default.createElement(p.AlphabetIcon,null),onClick:S(i)}),u.default.createElement(f.MenuSeparator,null),u.default.createElement(f.IconMenuItem,{text:_("Import from template"),icon:u.default.createElement(p.DownloadIcon,null),onClick:S(l)}),u.default.createElement(f.IconMenuItem,{text:_("Export as a template"),icon:u.default.createElement(p.UploadIcon,null),onClick:S(s)}),u.default.createElement(f.MenuSeparator,null),u.default.createElement(f.IconMenuItem,{text:_("Email tasks to this project"),icon:u.default.createElement(p.MailIcon,null),onClick:S(c)}),u.default.createElement(f.IconMenuItem,{text:_("Project calendar feed"),icon:u.default.createElement(p.ListIcon,null),onClick:S(d)}),u.default.createElement(f.MenuSeparator,null),t?u.default.createElement(f.IconMenuItem,{text:_("Hide completed tasks"),icon:u.default.createElement(p.CheckboxCheckedIcon,null),onClick:S(h)}):u.default.createElement(f.IconMenuItem,{text:_("Show completed tasks"),icon:u.default.createElement(p.CheckboxCheckedIcon,null),onClick:S(m)}))):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=e("react-redux"),f=e("../menu_list"),p=e("../icons"),m=e("../../reducers/items"),h=e("../../components/agenda/sort"),y=n(e("../Dialog")),v=n(e("../Button")),g=n(e("../../components/templates/Templates")),b=n(e("../../components/project_editor/ProjectExtraActions")),w=e("../../reducers/user");s.propTypes={projectId:c.default.oneOfType([c.default.number,c.default.string]).isRequired,user:c.default.object,onAddSection:c.default.func.isRequired,onSortByPriority:c.default.func.isRequired,onSortByDate:c.default.func.isRequired,onSortByName:c.default.func.isRequired,onImport:c.default.func.isRequired,onExport:c.default.func.isRequired,onShowMailItem:c.default.func.isRequired,onShowProjectCalendar:c.default.func.isRequired,onShowCompleted:c.default.func.isRequired};var E=function(e,t){return{onSortByPriority:function(){return e((0,m.itemSortProjectItems)(t.projectId,(0,h.composeSortFunc)(h.byPriority,h.byChildOrder)))},onSortByDate:function(){return e((0,m.itemSortProjectItems)(t.projectId,(0,h.composeSortFunc)(h.byDueDate,h.byPriority,h.byChildOrder)))},onSortByName:function(){return e((0,m.itemSortProjectItems)(t.projectId,(0,h.composeSortFunc)(h.byItemContent,h.byPriority,h.byChildOrder)))},onImport:function(){g.default.showImport(t.projectId)},onExport:function(){g.default.showExportTemplate(t.projectId)},onShowMailItem:function(){b.default.showProjectEmail(t.projectId)},onShowProjectCalendar:function(){b.default.showCalFeed(t.projectId)}}},j=(0,d.connect)(null,E)(s);r.default=j},{"../../components/agenda/sort":16,"../../components/project_editor/ProjectExtraActions":64,"../../components/templates/Templates":94,"../../reducers/items":1100,"../../reducers/user":1135,"../Button":648,"../Dialog":649,"../icons":842,"../menu_list":907,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],961:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.name,r=e.submitBtn,n=e.placeholder,a=e.onSubmit,i=e.onCancel,l=(0,u.useState)(t||""),s=o(l,2),c=s[0],p=s[1],m=function(){var e=c.trim();""!==e&&a(e)};return u.default.createElement("div",{className:"section"},u.default.createElement("div",{className:"section_head_holder"},u.default.createElement("form",{className:"section_form"},u.default.createElement("input",{autoFocus:!0,className:"name",type:"text",value:c,placeholder:n,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){var t=(0,f.resolveKeyboardKey)(e.key);"Escape"===t&&i(),"Enter"===t&&m()}}),u.default.createElement("div",{className:"actions"},u.default.createElement(d.default,{className:"ist_button ist_button_red",onClick:m},r),u.default.createElement(d.default,{className:"cancel_link",onClick:i},_("Cancel"))))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../Button")),f=e("../../utils");s.propTypes={name:c.default.string,submitBtn:c.default.string.isRequired,placeholder:c.default.string,onSubmit:c.default.func.isRequired,onCancel:c.default.func.isRequired}},{"../../utils":1176,"../Button":648,"prop-types":"prop-types",react:"react"}],962:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.section,r=e.itemCount,n=e.onCollapseChange,a=e.onRename,i=(0,u.useState)(!1),l=o(i,2),s=l[0],c=l[1],v=function(){(0,m.eventFrom)([".section_head_menu",".section_head_menu_list",".dialog",".modal_overlay"],event)||n({collapsed:!t.collapsed})};return u.default.createElement("div",{className:"section_head_holder"},u.default.createElement("span",{className:"section_dnd_handle drag_and_drop_handler"},u.default.createElement(d.DragHandleIcon,null)),s?u.default.createElement(p.default,{submitBtn:_("Save"),name:t.name,onSubmit:function(e){c(!1),a(e)},onCancel:function(){return c(!1)}}):u.default.createElement("div",{
className:"section_head"},u.default.createElement("div",{className:"collapser",onClick:v},u.default.createElement(d.CaretIcon,null)),u.default.createElement("h2",null,t.name,r>0?u.default.createElement("small",null,"itemCount"):null),u.default.createElement(y.default,{label:(0,h.format)(_("Collapse section {name}"),{name:t.name}),onChange:function(){return c(!0)},checked:t.collapsed}),u.default.createElement(f.default,{section:t,itemCount:r,onRename:function(){return c(!0)}})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=e("../icons"),f=n(e("./SectionHeadMenu")),p=n(e("./SectionForm")),m=e("../../utils/dom"),h=e("../../utils"),y=n(e("../checkbox/BlockCheckbox"));s.propTypes={section:c.default.object.isRequired,itemCount:c.default.number.isRequired,onRename:c.default.func.isRequired,onCollapseChange:c.default.func.isRequired};var v=u.default.memo(s);r.default=v},{"../../utils":1176,"../../utils/dom":1156,"../checkbox/BlockCheckbox":676,"../icons":842,"./SectionForm":961,"./SectionHeadMenu":963,"prop-types":"prop-types",react:"react"}],963:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e){var t=e.section,r=e.itemCount,n=e.onRename,i=e.onDelete,l=e.onArchive,s=e.onMoveToProject,u=(0,c.useState)(null),d=a(u,2),y=d[0],v=d[1],E=(0,c.useState)(!1),j=a(E,2),O=j[0],S=j[1],P=(0,c.useState)(!1),I=a(P,2),k=I[0],T=I[1];return c.default.createElement(c.default.Fragment,null,c.default.createElement(h.default,{className:"section_head_menu",onClick:function(){return v(event.target)}},c.default.createElement(m.MoreIcon,null)),y?c.default.createElement(f.default,{align:"bottom",anchor:y,onHide:function(){return v(null)}},c.default.createElement(p.MenuList,{className:"section_head_menu_list","aria-label":_x("a11y","section menu")},c.default.createElement(p.IconMenuItem,{text:_("Edit section"),icon:c.default.createElement(m.EditIcon,null),onClick:function(e){return function(){v(null);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(null,r)}}(n)}),c.default.createElement(g.default,{withSectionSelection:!1,onSelect:function(e){var t=e.project_id;return s(t)}},function(e){var t=e.toggle,r=e.buttonProps;return c.default.createElement(p.IconMenuItem,o({text:_("Move section"),icon:c.default.createElement(m.MoveIcon,null),onClick:t},r))}),c.default.createElement(p.IconMenuItem,{text:_("Archive section"),icon:c.default.createElement(m.ArchiveIcon,null),onClick:function(){v(null),T(!0)}}),c.default.createElement(p.IconMenuItem,{text:_("Delete section"),icon:c.default.createElement(m.DeleteIcon,null),onClick:function(){v(null),S(!0)}}))):null,c.default.createElement(b.default,{isOpen:O,confirmLabel:_("Delete"),onConfirm:i,onCancel:function(){return S(!1)}},c.default.createElement("span",null,r<=0?c.default.createElement(w.default,{text:_("Are you sure you want to delete {section}?"),keyval:{section:c.default.createElement("b",null,t.name)}}):c.default.createElement(w.default,{text:_n("Delete {section} with its 1 task?","Delete {section} with its {n} tasks?",r),keyval:{section:c.default.createElement("b",null,t.name),n:c.default.createElement("b",null,r)}}))),c.default.createElement(b.default,{isOpen:k,confirmLabel:_("Archive"),onConfirm:l,onCancel:function(){return T(!1)}},c.default.createElement("span",null,r<=0?c.default.createElement(w.default,{text:_("Are you sure you want to archive {section}?"),keyval:{section:c.default.createElement("b",null,t.name)}}):c.default.createElement(w.default,{text:_n("Archive {section} with its 1 task?","Archive {section} with its {n} tasks?",r),keyval:{section:c.default.createElement("b",null,t.name),n:c.default.createElement("b",null,r)}}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),d=n(e("prop-types")),f=n(e("../Dialog")),p=e("../menu_list"),m=e("../icons"),h=n(e("../Button")),y=e("react-redux"),v=e("../../reducers/sections"),g=n(e("../project_picker")),b=n(e("../confirm_dialog")),w=n(e("../TemplateText"));u.propTypes={section:d.default.object.isRequired,itemCount:d.default.number.isRequired,onRename:d.default.func.isRequired,onDelete:d.default.func.isRequired,onArchive:d.default.func.isRequired,onMoveToProject:d.default.func.isRequired};var E=function(e,t){var r=t.section.id;return{onDelete:function(){e((0,v.sectionRemove)(r))},onArchive:function(){e((0,v.sectionArchive)(r))},onMoveToProject:function(t){e((0,v.sectionMove)({id:r,project_id:t}))}}},j=(0,y.connect)(null,E)(u);r.default=j},{"../../reducers/sections":1125,"../Button":648,"../Dialog":649,"../TemplateText":657,"../confirm_dialog":680,"../icons":842,"../menu_list":907,"../project_picker":955,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],964:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=e("react-redux"),a=n(e("./ProjectView")),i=e("../../reducers/sections"),l=n(e("../item_list/mapDispatchToItemListItemProps")),s=e("../../reducers/items"),u=e("../../reducers/labels"),c=function(e){return{items:e.items,tempIds:e.tempIds,labels:(0,u.labelGetAllByName)(e),notes:e.notes,reminders:e.reminders,sections:e.sections,user:e.user,moreNotes:e.moreNotes,collaborators:e.collaborators}},d=function(e){var t=(0,l.default)(e);return{onSectionAdd:function(t){e((0,i.sectionAdd)(t))},onSectionUpdate:function(t){e((0,i.sectionUpdate)(t))},onSectionReorder:function(t){e((0,i.sectionReorder)(t,!0))},onShareOptionClick:function(e){Signals.sendSignal("show_sharing_manager",e)},onItemMoveAndReorder:function(t,r){e((0,s.itemMoveAndReorder)(t,r))},onItemCheckedChange:t.onCheckedChange,onItemUpdate:t.onUpdate,onItemAdd:t.onAdd,onItemComplete:t.onComplete,onItemUncomplete:t.onUncomplete,onItemArchive:t.onArchive,onItemDelete:t.onDelete,onItemDuplicate:t.onDuplicate,onItemLinkCopy:t.onLinkCopy,onItemMoveToProject:t.onMoveToProject}},f=(0,o.connect)(c,d)(a.default);r.default=f},{"../../reducers/items":1100,"../../reducers/labels":1105,"../../reducers/sections":1125,"../item_list/mapDispatchToItemListItemProps":871,"./ProjectView":958,"react-redux":"react-redux"}],965:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),_=e("react-transition-group"),y=function(e){function t(e){var r;return a(this,t),r=s(this,u(t).call(this,e)),p(c(r),"timerAutoHide",null),p(c(r),"handleTransitionExited",function(){r.setState({exited:!0})}),p(c(r),"handleMouseEnter",function(e){r.props.onMouseEnter&&r.props.onMouseEnter(e),r.handlePause()}),p(c(r),"handleMouseLeave",function(e){r.props.onMouseLeave&&r.props.onMouseLeave(e),r.handleResume()}),p(c(r),"handlePause",function(){clearTimeout(r.timerAutoHide)}),p(c(r),"handleResume",function(){if(null!=r.props.autoHideDurationMs){if(void 0!==r.props.resumeHideDurationMs)return void r.setAutoHideTimer(r.props.resumeHideDurationMs);r.setAutoHideTimer(.5*(r.props.autoHideDurationMs||0))}}),p(c(r),"handleCloseClick",function(e){r.props.onClose&&(r.props.onClose(e,"clickicon"),e.stopPropagation())}),r.state={exited:!1},r}return d(t,e),l(t,[{key:"componentWillMount",value:function(){this.props.opened||this.setState({exited:!0})}},{key:"componentDidMount",value:function(){this.props.opened&&this.setAutoHideTimer()}},{key:"componentWillReceiveProps",value:function(e){e.opened&&this.state.exited&&this.setState({exited:!1})}},{key:"componentDidUpdate",value:function(e){e.opened!==this.props.opened&&(this.props.opened?this.setAutoHideTimer():clearTimeout(this.timerAutoHide))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerAutoHide)}},{key:"setAutoHideTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.props.onClose&&null!=this.props.autoHideDurationMs&&(clearTimeout(this.timerAutoHide),this.timerAutoHide=setTimeout(function(){e.props.onClose&&null!=e.props.autoHideDurationMs&&e.props.onClose(null,"timeout")},t||this.props.autoHideDurationMs||0))}},{key:"render",value:function(){var e=this,t=this.props,r=t.opened,n=t.transitionDurationMs;if(!r&&this.state.exited)return null;var o={in:r,appear:!0,timeout:n,onExited:this.handleTransitionExited};return m.default.createElement(_.Transition,o,function(t){return e.props.children(t,{onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave})})}}]),t}(m.default.Component);r.default=y,p(y,"propTypes",{opened:h.default.bool.isRequired,transitionDurationMs:h.default.number.isRequired,autoHideDurationMs:h.default.number.isRequired,resumeHideDurationMs:h.default.number.isRequired,onClose:h.default.func.isRequired})},{"prop-types":"prop-types",react:"react","react-transition-group":"react-transition-group"}],966:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),_=n(e("react-dom")),y=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"layer",null),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){_.default.createPortal||this.renderLayer()}},{key:"componentDidUpdate",value:function(){_.default.createPortal||this.renderLayer()}},{key:"componentWillUnmount",value:function(){this.unrenderLayer()}},{key:"getLayer",value:function(){return this.layer||(this.layer=document.createElement("div"),this.layer.setAttribute("data-mui-portal","true"),document.body&&this.layer&&document.body.appendChild(this.layer),this.props.className&&(this.layer.className=this.props.className)),this.layer}},{key:"unrenderLayer",value:function(){this.layer&&(_.default.createPortal||_.default.unmountComponentAtNode(this.layer),document.body&&document.body.removeChild(this.layer),this.layer=null)}},{key:"renderLayer",value:function(){var e=this.props,t=e.children;if(e.open){var r=m.default.Children.only(t);_.default.unstable_renderSubtreeIntoContainer(this,r,this.getLayer())}else this.unrenderLayer()}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.open;if(!_.default.createPortal)return null;if(r){var n=this.getLayer();return _.default.createPortal(t,n)}return this.unrenderLayer(),null}}]),t}(m.default.Component);y.propTypes={children:h.default.node,open:h.default.bool,className:h.default.string},y.defaultProps={open:!1};var v=y;r.default=v},{"prop-types":"prop-types",react:"react","react-dom":"react-dom"}],967:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y(e,t,r[t])})}return e}function l(e,t){if(null==e)return{};var r,n,o=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var v=n(e("react")),g=n(e("prop-types")),b=e("react-transition-group"),w=n(e("./Portal")),E=n(e("../icons/CloseIcon")),j={transition:"all ".concat(300,"ms ease-out"),top:"-10px",opacity:0},O={entering:{top:"20px",opacity:0},entered:{top:"50px",opacity:1}},S=function(e){function t(e){var r;return u(this,t),r=f(this,p(t).call(this,e)),y(m(r),"timerAutoHide",null),y(m(r),"handleTransitionExited",function(){r.setState({exited:!0})}),y(m(r),"handleMouseEnter",function(e){r.props.onMouseEnter&&r.props.onMouseEnter(e),r.handlePause()}),y(m(r),"handleMouseLeave",function(e){r.props.onMouseLeave&&r.props.onMouseLeave(e),r.handleResume()}),y(m(r),"handlePause",function(){clearTimeout(r.timerAutoHide)}),y(m(r),"handleResume",function(){if(null!=r.props.autoHideDuration){if(void 0!==r.props.resumeHideDuration)return void r.setAutoHideTimer(r.props.resumeHideDuration);r.setAutoHideTimer(.5*(r.props.autoHideDuration||0))}}),y(m(r),"handleCloseClick",function(e){r.props.onClose&&(r.props.onClose(e,"clickicon"),e.stopPropagation())}),r.state={exited:!1},r}return h(t,e),d(t,[{key:"componentWillMount",value:function(){this.props.open||this.setState({exited:!0})}},{key:"componentDidMount",value:function(){this.props.open&&this.setAutoHideTimer()}},{key:"componentWillReceiveProps",value:function(e){e.open&&this.state.exited&&this.setState({exited:!1})}},{key:"componentDidUpdate",value:function(e){e.open!==this.props.open&&(this.props.open?this.setAutoHideTimer():clearTimeout(this.timerAutoHide))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerAutoHide)}},{key:"setAutoHideTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.props.onClose&&null!=this.props.autoHideDuration&&(clearTimeout(this.timerAutoHide),this.timerAutoHide=setTimeout(function(){e.props.onClose&&null!=e.props.autoHideDuration&&e.props.onClose(null,"timeout")},t||this.props.autoHideDuration||0))}},{key:"render",value:function(){var e=this,t=this.props,r=t.open,n=(t.autoHideDuration,l(t,["open","autoHideDuration"]));if(!r&&this.state.exited)return null;var o={in:r,appear:!0,timeout:300,onExited:this.handleTransitionExited};return v.default.createElement(w.default,{open:!0},v.default.createElement(b.Transition,o,function(t){return v.default.createElement("div",a({onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,className:"top_notifier",style:i({},j,O[t])},n),v.default.createElement(E.default,{small:!0,onClick:e.handleCloseClick}),e.props.children)}))}}]),t}(v.default.Component);r.default=S,y(S,"propTypes",{open:g.default.bool,autoHideDuration:g.default.number,resumeHideDuration:g.default.number,onClose:g.default.func}),y(S,"defaultProps",{autoHideDuration:null})},{"../icons/CloseIcon":791,"./Portal":966,"prop-types":"prop-types",react:"react","react-transition-group":"react-transition-group"}],968:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16"},o.default.createElement("g",{transform:"translate(-266, -17)",fill:"#777777"},o.default.createElement("path",{d:"M280,22.7581818 L279.1564,22 L273.9922,26.506 L273.4414,26.0254545 L273.4444,26.0281818 L268.8562,22.0245455 L268,22.7712727 C269.2678,23.878 272.8084,26.9674545 273.9922,28 C274.8718,27.2330909 274.0144,27.9809091 280,22.7581818"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],969:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(null==e)return{};var r,n,o=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function u(e){e.preventDefault()}function c(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.filter(Boolean).forEach(function(t){return t(e)})}}function d(e){var t=e.isOpen,r=e.onDismiss,n=void 0===r?function(){}:r,i=e.className,s=e.size,d=e.closeOnOverlayClick,f=void 0!==d&&d,p=e.children,m=e.width,_=e.overlayProps,b=void 0===_?{}:_,w=l(e,["isOpen","onDismiss","className","size","closeOnOverlayClick","children","width","overlayProps"]),j=h.default.useMemo(function(){return w.id||(0,g.generateElementId)("reactist-modal-box")},[w.id]),O=c(f?void 0:u,b.onClick);return h.default.createElement(v.DialogOverlay,o({isOpen:t,onDismiss:n},b,{onClick:O}),h.default.createElement(v.DialogContent,o({},w,{id:j,className:(0,y.default)("reactist_modal_box",s,i),style:null!=m?a({width:m},w.style):w.style}),h.default.createElement(E.Provider,{value:n},p)))}function f(e){var t=e.title,r=e.subtitle,n=e.children,a=e.button,i=e.className,s=l(e,["title","subtitle","children","button","className"]),u=h.default.useContext(E);return h.default.createElement("header",o({},s,{className:(0,y.default)("reactist_modal_box__header",i)}),h.default.createElement("hgroup",null,h.default.createElement("h1",null,t),r&&h.default.createElement("h2",null,r),n),!1!==a&&h.default.createElement("aside",null,null!=a&&!0!==a?a:h.default.createElement(w.default,{onClick:u},h.default.createElement(b.default,null))))}function p(e){var t=e.className,r=e.icon,n=e.plain,a=e.children,i=e.showCloseIcon,s=void 0!==i&&i,u=l(e,["className","icon","plain","children","showCloseIcon"]),c=h.default.useContext(E);return h.default.createElement("section",o({},u,{className:(0,y.default)("reactist_modal_box__body",{plain:n},t)}),s&&h.default.createElement(w.default,{className:"close",onClick:c},h.default.createElement(b.default,null)),r?h.default.createElement("div",{className:"dialog"},h.default.createElement("div",{className:"icon"},r),h.default.createElement("div",{className:"content"},a)):a)}function m(e){var t=e.children,r=e.className,n=l(e,["children","className"]);return h.default.createElement("footer",o({},n,{className:(0,y.default)("reactist_modal_box__actions",r)}),t)}Object.defineProperty(r,"__esModule",{value:!0}),r.Box=d,r.Header=f,r.Body=p,r.Actions=m,r.Context=void 0;var h=n(e("react")),_=n(e("prop-types")),y=n(e("classnames")),v=e("@reach/dialog"),g=e("../../../utils"),b=n(e("../../icons/CloseIcon")),w=n(e("../../Button")),E=h.default.createContext(function(){});r.Context=E,d.displayName="Modal.Box",d.propTypes={isOpen:_.default.bool,onDismiss:_.default.func,className:_.default.string,size:_.default.oneOf(["small","medium","large"]),width:_.default.oneOfType([_.default.number,_.default.oneOf(["auto"])]),closeOnOverlayClick:_.default.bool,overlayProps:_.default.object,children:_.default.node},f.displayName="Modal.Header",f.propTypes={children:_.default.node,title:_.default.string.isRequired,subtitle:_.default.string,className:_.default.string,button:_.default.oneOfType([_.default.node,_.default.bool])},p.displayName="Modal.Body",p.propTypes={icon:_.default.node,showCloseIcon:_.default.bool,className:_.default.string,style:_.default.object,plain:_.default.bool,children:_.default.node},m.displayName="Modal.Actions",m.propTypes={children:_.default.node,className:_.default.string}},{"../../../utils":1176,"../../Button":648,"../../icons/CloseIcon":791,"@reach/dialog":"@reach/dialog",classnames:"classnames","prop-types":"prop-types",react:"react"}],970:[function(e,t,r){"use strict";function n(){var e=document.getElementById(l);return e||(e=document.createElement("div"),e.id=l,document.body.appendChild(e)),e}function o(e){var t=e(a);i.default.render(t,n())}function a(e){e&&e.preventDefault(),i.default.unmountComponentAtNode(n())}Object.defineProperty(r,"__esModule",{value:!0}),r.openModal=o,r.closeModal=a;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("react-dom")),l="modal_box"},{"react-dom":"react-dom"}],971:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"openModal",{enumerable:!0,get:function(){return o.openModal}}),Object.defineProperty(r,"closeModal",{enumerable:!0,get:function(){return o.closeModal}}),r.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./Modal")),o=e("./helpers"),a=n;r.default=a},{"./Modal":969,"./helpers":970}],972:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y(e,t,r[t])})}return e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t,r){return[e,t,r].join("-")}function g(e){var t=e.value,r=e.children,n=e.disabled,o=void 0!==n&&n,a=e.active,i=void 0!==a&&a,l=e.track,s=e.onClick,u=e.tabsId;return w.default.createElement("button",{id:v(u,"tab",t),"aria-controls":v(u,"panel",t),"aria-selected":i,role:"tab",className:"reactist","data-track":l,disabled:o,onClick:s},r)}function b(e){var t=e.tabsId,r=e.value,n=e.children,o=e.className,a=e.active,i=void 0!==a&&a,l=e.prerender,s=void 0===l||l;return w.default.createElement("div",{id:v(t,"panel",r),"aria-labelledby":v(t,"tab",r),role:"tabpanel",tabIndex:-1,hidden:!i,className:(0,j.default)(o,{active:i})},i||s?n:null)}Object.defineProperty(r,"__esModule",{value:!0}),r.Tab=b,r.Tabs=void 0;var w=n(e("react")),E=n(e("prop-types")),j=n(e("classnames")),O=e("../../../utils");b.propTypes={tabsId:E.default.string,children:E.default.node,active:E.default.bool,value:E.default.string.isRequired,title:E.default.node.isRequired,disabled:E.default.bool,className:E.default.string,track:E.default.string,prerender:E.default.bool};var S=function(e){function t(){var e,r;u(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=f(this,(e=p(t)).call.apply(e,[this].concat(o))),y(m(r),"state",{activeTab:r.props.activeTab||w.default.Children.toArray(r.props.children)[0].props.value}),y(m(r),"id",(0,O.generateElementId)("tabs")),y(m(r),"_switchActiveTab",function(e){r.setState({activeTab:e}),r.props.onChange&&r.props.onChange(e)}),r}return h(t,e),d(t,[{key:"render",value:function(){var e=this,t=this.props.className,r=this.state.activeTab,n=this.props.id||this.id,o=w.default.Children.toArray(this.props.children);return w.default.createElement("div",{id:n,className:(0,j.default)("reactist","tabs",t)},w.default.createElement("div",{role:"tablist"},o.map(function(t){var o=t.props,a=o.title,s=l(o,["title"]);return w.default.createElement(g,i({},s,{tabsId:n,key:s.value,active:s.value===r,onClick:function(){return e._switchActiveTab(s.value)}}),a)})),w.default.createElement("div",{className:"reactist tabs__body"},o.map(function(e){return w.default.cloneElement(e,a({},e.props,{tabsId:n,key:e.props.value,active:e.props.value===r}))})))}}]),t}(w.default.Component);r.Tabs=S,S.propTypes={id:E.default.string,activeTab:E.default.string,onChange:E.default.func,className:E.default.string}},{"../../../utils":1176,classnames:"classnames","prop-types":"prop-types",react:"react"}],973:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./Tabs");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})})},{"./Tabs":972}],974:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y(e,t,r[t])})}return e}function l(e,t){
if(null==e)return{};var r,n,o=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.duration=void 0;var v=n(e("react")),g=n(e("classnames")),b=n(e("prop-types")),w=e("react-transition-group"),E=e("./utils"),j={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};r.duration=j;var O=function(e){function t(){var e,r;u(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=f(this,(e=p(t)).call.apply(e,[this].concat(o))),y(m(r),"wrapper",null),y(m(r),"autoTransitionDuration",void 0),y(m(r),"timer",null),y(m(r),"handleEnter",function(e){e.style.height=r.props.collapsedHeight,r.props.onEnter&&r.props.onEnter(e)}),y(m(r),"handleEntering",function(e){var t=r.props.timeout,n=r.wrapper?r.wrapper.clientHeight:0,o=(0,E.getTransitionProps)(r.props,{mode:"enter"}),a=o.duration;if("auto"===t){var i=(0,E.getAutoHeightDuration)(n);e.style.transitionDuration="".concat(i,"ms"),r.autoTransitionDuration=i}else e.style.transitionDuration="string"==typeof a?a:"".concat(a,"ms");e.style.height="".concat(n,"px"),r.props.onEntering&&r.props.onEntering(e)}),y(m(r),"handleEntered",function(e){e.style.height="auto",r.props.onEntered&&r.props.onEntered(e)}),y(m(r),"handleExit",function(e){var t=r.wrapper?r.wrapper.clientHeight:0;e.style.height="".concat(t,"px"),r.props.onExit&&r.props.onExit(e)}),y(m(r),"handleExiting",function(e){var t=r.props.timeout,n=r.wrapper?r.wrapper.clientHeight:0,o=(0,E.getTransitionProps)(r.props,{mode:"exit"}),a=o.duration;if("auto"===t){var i=(0,E.getAutoHeightDuration)(n);e.style.transitionDuration="".concat(i,"ms"),r.autoTransitionDuration=i}else e.style.transitionDuration="string"==typeof a?a:"".concat(a,"ms");e.style.height=r.props.collapsedHeight,r.props.onExiting&&r.props.onExiting(e)}),y(m(r),"addEndListener",function(e,t){"auto"===r.props.timeout&&(r.timer=setTimeout(t,r.autoTransitionDuration||0))}),r}return h(t,e),d(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.className,o=t.collapsedHeight,s=t.component,u=(t.onEnter,t.onEntered,t.onEntering,t.onExit,t.onExiting,t.style),c=void 0===u?{}:u,d=t.timeout,f=l(t,["children","className","collapsedHeight","component","onEnter","onEntered","onEntering","onExit","onExiting","style","timeout"]);return v.default.createElement(w.Transition,a({onEntering:this.handleEntering,onEnter:this.handleEnter,onEntered:this.handleEntered,onExiting:this.handleExiting,onExit:this.handleExit,addEndListener:this.addEndListener,timeout:"auto"===d?null:d},f),function(t,l){return v.default.createElement(s,a({className:(0,g.default)("reactist","collapse",y({},"collapse--entered","entered"===t),n),style:i({},c,{display:"exited"===t?"none":c.display,minHeight:o})},l),v.default.createElement("div",{className:"collapse__wrapper",ref:function(t){e.wrapper=t}},v.default.createElement("div",{className:"collapse__wrapper_inner"},r)))})}}]),t}(v.default.Component);O.propTypes={children:b.default.node,className:b.default.string,collapsedHeight:b.default.string,component:b.default.oneOfType([b.default.string,b.default.func]),in:b.default.bool,onEnter:b.default.func,onEntered:b.default.func,onEntering:b.default.func,onExit:b.default.func,onExiting:b.default.func,style:b.default.object,timeout:b.default.oneOfType([b.default.number,b.default.shape({enter:b.default.number,exit:b.default.number}),b.default.oneOf(["auto"])])},O.defaultProps={collapsedHeight:"0px",component:"div",timeout:j.standard};var S=O;r.default=S},{"./utils":975,classnames:"classnames","prop-types":"prop-types",react:"react","react-transition-group":"react-transition-group"}],975:[function(e,t,r){"use strict";function n(e,t){var r=e.timeout,n=e.style,o=void 0===n?{}:n;return{duration:o.transitionDuration||"number"==typeof r?r:r[t.mode],delay:o.transitionDelay}}function o(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}Object.defineProperty(r,"__esModule",{value:!0}),r.getTransitionProps=n,r.getAutoHeightDuration=o,r.reflow=void 0;var a=function(e){return e.scrollTop};r.reflow=a},{}],976:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e){var t=e.locations,r=e.setPastLocation,n=t.map(function(e){var t=a(e,3),r=t[0],n=t[1],o=t[2];return{id:"".concat(r,"-").concat(n,"-").concat(o),name:r,lat:parseFloat(n),lng:parseFloat(o)}});return c.default.createElement(p.default,{label:_("Recent locations"),emptyResultsPlaceholder:_("No recent locations found."),items:n,selectedItemId:null,renderItem:function(e){var t=e.item;return c.default.createElement("div",{className:"reminders_picker_option"},t.name)},onSelect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.event;n&&n.stopPropagation(),r(e)},filterItems:function(e){var t=e.items,r=e.value;return t.filter(function(e){return e.name.includes(r)})}},function(e){var t=e.toggle,r=e.buttonProps;return c.default.createElement(f.default,o({className:"reminders_picker_locations",onClick:t},r),c.default.createElement(m.CaretIcon,null),c.default.createElement(m.LocationIcon,null))})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var c=n(e("react")),d=n(e("prop-types")),f=n(e("../Button")),p=n(e("../dropdown_select")),m=e("../icons");u.propTypes={locations:d.default.array.isRequired,setPastLocation:d.default.func.isRequired}},{"../Button":648,"../dropdown_select":708,"../icons":842,"prop-types":"prop-types",react:"react"}],977:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){var t=e.reminderTime,r=e.setReminderTime,n=_("%s before").replace("%s",d.minToWords[t]);return i.default.createElement(u.default,{label:_("Remind me"),className:"reminders_picker_relative_selector--container",emptyResultsPlaceholder:_("No matches. Press Esc to hide auto-completion."),items:f,selectedItemId:t,renderItem:function(e){var t=e.item;return i.default.createElement("div",{className:"reminders_picker_option"},t.name)},onSelect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.event;n&&n.stopPropagation(),r(e.id)},filterItems:function(e){var t=e.items,r=e.value;return t.filter(function(e){return e.name.includes(r)})}},function(e){var t=e.toggle,r=e.buttonProps;return i.default.createElement(s.default,o({className:"reminders_picker_relative_selector",onClick:t},r),n,i.default.createElement(c.CaretIcon,null))})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var i=n(e("react")),l=n(e("prop-types")),s=n(e("../Button")),u=n(e("../dropdown_select")),c=e("../icons"),d=e("./helpers"),f=Object.keys(d.minToWords).map(function(e){var t=d.minToWords[e];return e=parseInt(e),{id:e,name:t}});a.propTypes={reminderTime:l.default.number.isRequired,setReminderTime:l.default.func.isRequired}},{"../Button":648,"../dropdown_select":708,"../icons":842,"./helpers":985,"prop-types":"prop-types",react:"react"}],978:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.reminder,r=e.onDeleteReminder,n=e.allCollaborators,a=e.user,i=e.isSharedProject,l=(0,m.getReminderText)(t),s=o(l,2),c=s[0],h=s[1];return u.default.createElement("li",{className:"reminder"},u.default.createElement("div",null,u.default.createElement(p.ReminderIcon,{reminder:t,isSharedProject:i,user:a,allCollaborators:n}),u.default.createElement("span",{className:"text"},u.default.createElement("b",null,c),"string"==typeof h&&h.length>0?u.default.createElement(u.default.Fragment,null,u.default.createElement("br",null),h):null)),r?u.default.createElement(d.default,{onClick:function(e){e.stopPropagation(),r(t)}},u.default.createElement(f.DeleteIcon,{className:"trash"})):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("react")),c=n(e("prop-types")),d=n(e("../Button")),f=e("../icons"),p=e("./ReminderIcon"),m=e("./helpers");s.propTypes={reminder:c.default.object.isRequired,onDeleteReminder:c.default.func,allCollaborators:c.default.object.isRequired,user:c.default.object.isRequired,isSharedProject:c.default.bool.isRequired};var h=s;r.default=h},{"../Button":648,"../icons":842,"./ReminderIcon":979,"./helpers":985,"prop-types":"prop-types",react:"react"}],979:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.reminder,r=e.isSharedProject,n=e.user,o=e.allCollaborators;if(r){var s="location"===t.type||t.notify_uid===n.id?n:o[t.notify_uid];return a.default.createElement(i.default,{user:s,size:"small"})}switch(t.type){case"relative":return a.default.createElement(l.ClockIcon,null);case"location":return a.default.createElement(l.LocationIcon,null);case"absolute":default:return a.default.createElement(l.HistoryIcon,null)}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReminderIcon=o;var a=n(e("react")),i=n(e("../Avatar")),l=e("../icons")},{"../Avatar":647,"../icons":842,react:"react"}],980:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.projectId,r=e.whoToNotify,n=e.setWhoToNotify;return a.default.createElement(u.PersonPicker,{showUnassigned:!1,projectId:t,value:r.id,onChange:function(e){var t=e.target;return n(t.selectedUser)},className:"reminders_picker_collaborators"},a.default.createElement(s.default,{size:"small",user:r}),a.default.createElement(l.CaretIcon,null))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=e("../icons"),s=n(e("../Avatar")),u=e("../person_picker");o.propTypes={projectId:i.default.number.isRequired,whoToNotify:i.default.object.isRequired,setWhoToNotify:i.default.func.isRequired}},{"../Avatar":647,"../icons":842,"../person_picker":930,"prop-types":"prop-types",react:"react"}],981:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.item,r=e.reminders,n=void 0===r?[]:r,o=e.onDeleteReminder,i=(0,l.useSelector)(function(e){return e.collaborators}),c=(0,l.useSelector)(function(e){return e.user});if(0===n.length)return null;var d=(0,s.isShared)({collaborators:i},t.project_id);return a.default.createElement("ul",{className:"reminder_viewer"},n.map(function(e){return a.default.createElement(u.default,{key:e.id,reminder:e,allCollaborators:i.all,user:c,isSharedProject:d,onDeleteReminder:o})}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=e("react-redux"),s=e("../../reducers/collaborators"),u=n(e("./Reminder"));o.propTypes={item:i.default.object.isRequired,reminders:i.default.arrayOf(i.default.object.isRequired),onDeleteReminder:i.default.func};var c=o;r.default=c},{"../../reducers/collaborators":1086,"./Reminder":978,"prop-types":"prop-types",react:"react","react-redux":"react-redux"}],982:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return u(e)||s(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function u(e){if(Array.isArray(e))return e}function c(e){var t=e.item,r=e.onClose,n=e.onAddReminder,a=e.onDeleteReminder,l=e.reminders,s=void 0===l?[]:l,u=e.user,c=e.isSharedProject,f=e.lastLocations,E=(0,d.useState)(""),j=i(E,2),O=j[0],S=j[1],P=(0,d.useState)(null),I=i(P,2),k=I[0],T=I[1],C=(0,d.useState)(u),D=i(C,2),A=D[0],M=D[1],x=t.due&&t.due.with_time?"relative":"absolute",R=(0,d.useState)("relative"===x?v.RELATIVE_TIME:v.ABSOLUTE_TIME),N=i(R,2),L=N[0],$=N[1],U=void 0===u.auto_reminder||-1===u.auto_reminder?30:u.auto_reminder,B=(0,d.useState)(U),V=i(B,2),F=V[0],H=V[1],q=(0,g.useGoogleMapsInput)({type:L}),G=q.mapCanvasRef,z=q.place,W=q.googlePlacesRef,Y=q.getPlace,K=q.setPastLocation,J=q.resetPlace,Q=q.locationTriggerMoment,X=q.setLocationTriggerMoment;(0,d.useEffect)(function(){L===v.RELATIVE_TIME&&"absolute"===x&&$(v.ABSOLUTE_TIME)},[x,L]);var Z=function(e){if(e.preventDefault(),L===v.LOCATION)Y().then(function(e){var r=o({item_id:t.id,type:"location"},e);n(L,r),J()}).catch(function(){T(_("Please select a location first"))});else{var r={item_id:t.id,service:"default"};if(L===v.ABSOLUTE_TIME){var a=(0,v.parseDate)(O);if(a.error)return T(a.error),!1;r.due=b.default.fromDateist(a),r.type="absolute"}else r.minute_offset=F,r.type="relative";c&&A&&A.id&&(r.notify_uid=A.id),n(L,r),S("")}};return d.default.createElement(d.default.Fragment,null,d.default.createElement("form",{onSubmit:Z},d.default.createElement("div",{className:"reminders_picker_title_container"},d.default.createElement("h2",null,_("Reminders")),d.default.createElement(y.CloseIcon,{small:!0,onClick:r})),d.default.createElement("div",{className:"reminder_manager"},d.default.createElement(w.default,{item:t,reminders:s,onDeleteReminder:a}),d.default.createElement(h.default,{reminderInterface:x,reminderText:O,onReminderTextChange:S,locationTriggerMoment:Q,setLocationTriggerMoment:X,whoToNotify:A,setWhoToNotify:M,reminderTime:F,setReminderTime:H,setPastLocation:K,type:L,mapCanvasRef:G,place:z,googlePlacesRef:W,onTypeChange:$,isSharedProject:c,projectId:t.project_id,lastLocations:f}),d.default.createElement("div",null,d.default.createElement("a",{className:"help",target:"_blank",href:"/Help/Reminders"},d.default.createElement(y.HelpIcon,null)),d.default.createElement(p.default,{type:"submit",className:"ist_button ist_button_red"},_("Add reminder"))))),d.default.createElement(m.default.Box,{isOpen:Boolean(k),onDismiss:function(){return T(null)},closeOnOverlayClick:!0},d.default.createElement(m.default.Body,null,d.default.createElement("div",{className:"alert_holder"},d.default.createElement("div",{className:"text_holder"},k))),d.default.createElement(m.default.Actions,null,d.default.createElement(p.default,{className:"ist_button ist_button_red",onClick:function(){return T(null)}},_("OK")))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=c;var d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),f=n(e("prop-types")),p=n(e("../Button")),m=n(e("../reactist/modal")),h=n(e("./RemindersPickerInput")),y=e("../icons"),v=e("./helpers"),g=e("./hooks"),b=n(e("../../models/DateExt")),w=n(e("./RemindersList"));c.propTypes={item:f.default.object.isRequired,onClose:f.default.func.isRequired,onDeleteReminder:f.default.func.isRequired,onAddReminder:f.default.func.isRequired,reminders:f.default.array,user:f.default.object.isRequired,isSharedProject:f.default.bool.isRequired,collaborators:f.default.array,lastLocations:f.default.array.isRequired}},{"../../models/DateExt":152,"../Button":648,"../icons":842,"../reactist/modal":971,"./RemindersList":981,"./RemindersPickerInput":984,"./helpers":985,"./hooks":986,"prop-types":"prop-types",react:"react"}],983:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.children,r=e.item,n=e.reminders,a=e.user,i=e.isPremium,l=e.isSharedProject,s=e.collaborators,c=e.onAddReminder,h=e.onDeleteReminder,_=e.lastLocations,y=(0,u.useState)(!1),v=o(y,2),g=v[0],b=v[1],w=(0,u.useState)(!1),E=o(w,2),j=E[0],O=E[1],S=(0,u.useRef)(null),P=function(){O(!1)},I=u.default.createElement(p.default,{show:j,onClickOutside:P,width:450},u.default.createElement(m.PremiumModal,{feature:"FEATURE_REMINDER",onClose:P})),k={ref:S,onClick:function(){i?b(!g):O(!0)}};return u.default.createElement(u.default.Fragment,null,t(k),I,g&&u.default.createElement(d.default,{nose:!0,anchor:S.current,onHide:function(){S.current.focus(),b(!1)},contentClassName:"reminders_picker"},u.default.createElement(f.default,{item:r,reminders:n,onClose:function(){return b(!1)},onAddReminder:c,onDeleteReminder:h,user:a,isSharedProject:l,collaborators:s,lastLocations:_})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=n(e("../Dialog")),f=n(e("./RemindersPicker")),p=n(e("../Modal")),m=e("../../containers/premium_promo/PremiumOnlyModal");s.propTypes={children:c.default.func.isRequired,item:c.default.object.isRequired,reminders:c.default.array,user:c.default.object.isRequired,isPremium:c.default.bool.isRequired,isSharedProject:c.default.bool.isRequired,collaborators:c.default.array,onAddReminder:c.default.func.isRequired,onDeleteReminder:c.default.func.isRequired,lastLocations:c.default.array.isRequired}},{"../../containers/premium_promo/PremiumOnlyModal":108,"../Dialog":649,"../Modal":654,"./RemindersPicker":982,"prop-types":"prop-types",react:"react"}],984:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){switch(e){case g.RELATIVE_TIME:return c.default.createElement(v.BeforeIcon,null);case g.LOCATION:return c.default.createElement(v.LocationIcon,null);case g.ABSOLUTE_TIME:default:return c.default.createElement(v.HistoryIcon,null)}}function u(e){var t=e.reminderText,r=e.onReminderTextChange,n=e.reminderInterface,a=e.reminderTime,i=e.setReminderTime,l=e.whoToNotify,u=e.setWhoToNotify,d=e.type,b=e.onTypeChange,w=e.mapCanvasRef,E=e.googlePlacesRef,j=e.place,O=e.setPastLocation,S=e.isSharedProject,P=e.projectId,I=e.lastLocations,k=e.locationTriggerMoment,T=e.setLocationTriggerMoment,C=(0,c.useState)(!1),D=o(C,2),A=D[0],M=D[1],x=(0,c.useRef)(null),R=(0,c.useRef)(null);(0,c.useEffect)(function(){d===g.ABSOLUTE_TIME&&x.current?x.current.focus():d===g.LOCATION&&E.current&&E.current.focus()},[d,E]);var N=d===g.ABSOLUTE_TIME?_("today at 2pm"):_("Type location"),L=s(d),$=function(e,t){e.stopPropagation(),b(t),r(""),M(!1)},U=A&&c.default.createElement(p.default,{anchor:R.current,position:"bottom",width:200,onHide:function(){return M(!1)}},c.default.createElement("div",{className:"reminders_picker_options"},c.default.createElement("div",{className:"reminders_picker_option",onClick:function(e){return $(e,g.ABSOLUTE_TIME)}},c.default.createElement(v.HistoryIcon,{className:"reminders_picker_option__icon"}),_("Date and time")),"relative"===n?c.default.createElement("div",{className:"reminders_picker_option",onClick:function(e){return $(e,g.RELATIVE_TIME)}},c.default.createElement(v.BeforeIcon,{className:"reminders_picker_option__icon"}),_("Before task")):null,c.default.createElement("div",{className:"reminders_picker_option",onClick:function(e){return $(e,g.LOCATION)}},c.default.createElement(v.LocationIcon,{className:"reminders_picker_option__icon"}),_("Location")))),B=d===g.ABSOLUTE_TIME?c.default.createElement(c.default.Fragment,null,c.default.createElement("input",{ref:x,value:t,onChange:function(e){return r(e.target.value)},placeholder:N}),S?c.default.createElement(y.default,{projectId:P,whoToNotify:l,setWhoToNotify:u}):null):null,V=d===g.RELATIVE_TIME?c.default.createElement(c.default.Fragment,null,c.default.createElement(h.default,{reminderTime:a,setReminderTime:i}),S?c.default.createElement(y.default,{projectId:P,whoToNotify:l,setWhoToNotify:u}):null):null,F=d===g.LOCATION?c.default.createElement(c.default.Fragment,null,c.default.createElement("input",{ref:E,placeholder:N}),c.default.createElement(m.default,{setPastLocation:O,locations:I})):null;return c.default.createElement("div",null,c.default.createElement("div",{className:"adder"},c.default.createElement(f.default,{ref:R,className:"switcher menu",onClick:function(){return M(!A)}},L,c.default.createElement(v.CaretIcon,{className:"menu_icon"})),U,c.default.createElement("div",{className:"absolute reminders_picker_input_container"},B,V,F)),c.default.createElement("div",{className:"adder_below"},"location"===d?c.default.createElement("div",{className:"map_holder",style:{display:j?"block":"none"}},c.default.createElement("div",{className:"map",ref:w}),c.default.createElement("select",{value:k,onChange:function(e){T(e.target.value)}},c.default.createElement("option",{value:"on_enter"},_("When I arrive")),c.default.createElement("option",{value:"on_leave"},_("When I leave")))):null))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),d=n(e("prop-types")),f=n(e("../Button")),p=n(e("../Dialog")),m=n(e("./LastLocations")),h=n(e("./RelativeTimeSelector")),y=n(e("./ReminderNotifySelector")),v=e("../icons"),g=e("./helpers");u.propTypes={reminderText:d.default.string,onReminderTextChange:d.default.func.isRequired,reminderInterface:d.default.oneOf(["absolute","relative"]),type:d.default.oneOf(["absoluteTime","relativeTime","location"]),onTypeChange:d.default.func.isRequired,place:d.default.object,setPastLocation:d.default.func.isRequired,isSharedProject:d.default.bool.isRequired,projectId:d.default.number.isRequired,lastLocations:d.default.array.isRequired,mapCanvasRef:d.default.shape({current:d.default.any}).isRequired,googlePlacesRef:d.default.shape({current:d.default.any}).isRequired,locationTriggerMoment:d.default.oneOf(["on_enter","on_leave"]).isRequired,setLocationTriggerMoment:d.default.func.isRequired,reminderTime:d.default.number.isRequired,setReminderTime:d.default.func.isRequired,whoToNotify:d.default.object,setWhoToNotify:d.default.func.isRequired}},{"../Button":648,"../Dialog":649,"../icons":842,"./LastLocations":976,"./RelativeTimeSelector":977,"./ReminderNotifySelector":980,"./helpers":985,"prop-types":"prop-types",react:"react"}],985:[function(e,t,r){"use strict";function n(){return null!==d?d:d=new Promise(function(e){if(window.google&&window.google.maps)return e();var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?libraries=places&async=2&key=AIzaSyCXMDZI-DQwpQ72521KB_V45LXL1Zm_lHU",t.onload=e,document.body.appendChild(t)})}function o(e){if("absolute"===e.type){if(e.due.is_recurring)return[e.due.string];var t=e.due.toDate();return[c.humanizeDayDiff(s.day_diff(new Date,t),t)]}if("location"===e.type){return[e.name,"on_enter"===e.loc_trigger?_("When I arrive"):_("When I leave")]}if("relative"===e.type){var r=f[e.minute_offset];if(void 0!==r){return[_("%s before").replace("%s",r)]}return[(0,i.format)(_nx("reminder","1 min before","{n} min before",e.minute_offset),{n:e.minute_offset})]}}function a(e){var t=c.parse(e);if(""===e)return{error:_("Date can't be empty")};if(t.error||!t.due_date)return{error:_("Invalid date")};if(t.due_date&&!s.has_time(t.due_date)){var r=t;if(t=c.parse(t.date_string+" @ 9:00"),t.due_date){var n=new Date;if(s.day_diff(n,t.due_date)>=365){var o=n.getHours()+3,a="00";o>23&&(o=23,a=29),t=c.parse(r.date_string+" @ "+o+":"+a)}}}return t}Object.defineProperty(r,"__esModule",{value:!0}),r.loadGoogleMaps=n,r.getReminderText=o,r.parseDate=a,r.minToWords=r.LOCATION=r.ABSOLUTE_TIME=r.RELATIVE_TIME=void 0;var i=e("../../utils"),l=window,s=l.DateistDateHelpers,u=window,c=u.DateUtils;r.RELATIVE_TIME="relativeTime";r.ABSOLUTE_TIME="absoluteTime";r.LOCATION="location";var d=null,f={0:_("0 min"),10:_("10 min"),30:_("30 min"),45:_("45 min"),60:_("1 hour"),120:_("2 hours"),180:_("3 hours"),1440:_("1 day"),2880:_("2 days"),4320:_("3 days"),10080:_("1 week")};r.minToWords=f},{"../../utils":1176}],986:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e){function t(){var e={zoom:17,mapTypeControl:!1,zoomControl:!0,streetViewControl:!1},t=new window.google.maps.Map(b.current,e),r=new window.google.maps.Marker({map:t,anchorPoint:new window.google.maps.Point(0,-29),draggable:!0});g.current={gmap:t,gmarker:r}}function r(){return new Promise(function(e,t){if(p&&g.current&&g.current.gmarker){var r=g.current,n=r.gmarker,i=r.startLocation,l=n.getPosition();if(i&&l.lat()===i.lat()&&l.lng()===i.lng())return e(a(p.name,l));o(l,function(t){var r=t||p.name;e(a(r,l))})}else t(null)})}function o(e,t){var r=new window.google.maps.LatLng(e.lat(),e.lng()),n={location:r,radius:"5"};new window.google.maps.places.PlacesService(g.current.gmap).nearbySearch(n,function(e){return t(e&&e.length>0?e[0].name:null)})}function a(e,t){return{name:e,loc_lat:"".concat(t.lat()),loc_long:"".concat(t.lng()),loc_trigger:y,radius:100}}function i(){m(null),w.current&&(w.current.value="",w.current.focus())}function l(e){(0,u.loadGoogleMaps)().then(function(){var t={name:e.name,geometry:{viewport:null,location:new window.google.maps.LatLng(e.lat,e.lng)}};m(t),w.current&&(w.current.value=t.name)})}var c=e.type,d=(0,s.useState)(null),f=n(d,2),p=f[0],m=f[1],h=(0,s.useState)("on_enter"),_=n(h,2),y=_[0],v=_[1],g=(0,s.useRef)(null),b=(0,s.useRef)(null),w=(0,s.useRef)(null);return(0,s.useEffect)(function(){function e(){o=!1;var e=r.getPlace();m(e)}var t,r,n,o=!1;if("location"===c)return(0,u.loadGoogleMaps)().then(function(){r=new window.google.maps.places.Autocomplete(w.current),t=window.google.maps.event.addListener(r,"place_changed",e),n=window.google.maps.event.addDomListener(w.current,"keydown",function(e){13===e.keyCode?o&&(e.preventDefault(),e.stopPropagation()):o=!0})}),function(){t&&window.google&&window.google.maps.event.removeListener(t),n&&window.google&&window.google.maps.event.removeListener(n),g.current&&(g.current=null),m(null)}},[c,w]),(0,s.useEffect)(function(){if(p){var e=p.geometry;p.geometry&&(g.current||t(),g.current.gmarker.setPosition(e.location),g.current.gmarker.setVisible(!0),g.current.startLocation=g.current.gmarker.getPosition(),e.viewport?g.current.gmap.fitBounds(e.viewport):(g.current.gmap.setCenter(e.location),g.current.gmap.setZoom(17)))}},[p]),{place:p,mapCanvasRef:b,googlePlacesRef:w,setPastLocation:l,getPlace:r,resetPlace:i,locationTriggerMoment:y,setLocationTriggerMoment:v}}Object.defineProperty(r,"__esModule",{value:!0}),r.useGoogleMapsInput=l;var s=e("react"),u=e("./helpers")},{"./helpers":985,react:"react"}],987:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("react-redux"),l=n(e("./RemindersPickerDialog")),s=e("../../reducers/collaborators"),u=e("../../reducers/user"),c=n(e("../../models/RemindersLocationModel")),d=e("../../models/Reminders"),f=e("../../reducers/reminders"),p=function(e,t){return{reminders:t.reminders||(0,f.reminderGetGroupByItemID)(e)[t.item.id],isSharedProject:(0,s.isShared)(e,t.item.project_id),allCollaborators:(0,s.getAllCollaborators)(e),user:(0,u.getUser)(e),lastLocations:c.default.getLastLocations(),isPremium:(0,u.isPremium)(e),onAddReminder:function(e,r){
t.onReminderAdd?t.onReminderAdd(o({type:e},r)):t.item.id&&("time"===e?d.RemindersModel.add(r):d.RemindersModel.addLocation(r))},onDeleteReminder:function(e){t.onReminderDelete?t.onReminderDelete(e):t.item.id&&d.RemindersModel.remove(e.id)}}},m=(0,i.connect)(p)(l.default);r.default=m},{"../../models/Reminders":161,"../../models/RemindersLocationModel":162,"../../reducers/collaborators":1086,"../../reducers/reminders":1122,"../../reducers/user":1135,"./RemindersPickerDialog":983,"react-redux":"react-redux"}],988:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.autoFocus,r=e.className,n=e.collaborators,a=e.forwardRef,i=e.labels,l=e.item,s=void 0===l?{}:l,c=e.placeholder,j=e.project,O=e.projects,S=e.user,P=e.isAssigneeDisabled,I=e.isDateistDisabled,k=e.isPriorityDisabled,T=e.withIgnoredInitialMatches,C=void 0===T||T,D=e.onChange,A=void 0===D?function(){}:D,M=e.onEnter,x=void 0===M?function(){}:M,R=e.onEscape,N=void 0===R?function(){}:R,L=e.onLabelAdd,$=void 0===L?function(){}:L,U=e.onMultilinePaste,B=e.onProjectAdd,V=void 0===B?function(){}:B,F=e.onTab,H=void 0===F?function(){}:F,q=(0,u.useState)(d.EditorState.createWithContent(d.ContentState.createFromText(s.content||""))),G=o(q,2),z=G[0],W=G[1],Y=(0,u.useRef)(s.project_id),K=(0,u.useRef)(s.labels||[]),J=(0,u.useRef)(!1),Q=(0,u.useRef)(!1),X=(0,u.useRef)(s.due),Z=(0,u.useRef)((0,v.default)({collaborators:n,user:S,onCreate:oe})),ee=(0,u.useRef)((0,y.default)({item:s,user:S,project:j,labels:i,withIgnoredInitialMatches:C})),te=(0,u.useMemo)(function(){return[(0,g.default)(),Z.current,ee.current]},[]);(0,E.useUpdateEffect)(function(){if(!(0,_.isEqual)(K.current,s.labels)){var e=(0,h.difference)(s.labels,K.current),t=(0,h.difference)(K.current,s.labels),r=z;if(e.forEach(function(e){r=ee.current.insertMatch({editorState:r,type:b.MATCH_TYPE_LABEL,matchText:e,data:{name:e}})}),t.length>0){var n=(0,h.compose)((0,h.uniqBy)("match.name"),(0,h.filter)(function(e){var r=e.match,n=e.isIgnored;return r.type===b.MATCH_TYPE_LABEL&&!n&&t.indexOf(r.name)>-1}))(ee.current.getMatches());n.length>0&&(n.forEach(function(e){var t=e.match;r=(0,w.removeText)(r,t.match)}),r=d.EditorState.moveSelectionToEnd(r))}K.current=s.labels,Q.current=!0,a.current.update(r)}},[z,a,s.labels,i]),(0,E.useUpdateEffect)(function(){if(Y.current!==s.project_id){if(null===Y.current)return void(Y.current=s.project_id);var e=z,t=(0,h.findLast)(function(e){var t=e.match,r=e.isIgnored;return t.type===b.MATCH_TYPE_PROJECT&&!r},ee.current.getMatches());t&&(e=(0,w.removeText)(e,t.match.match,{onlyLastOccurence:!0}));var r=O[s.project_id];e=ee.current.insertMatch({editorState:e,type:b.MATCH_TYPE_PROJECT,matchText:r.name,data:{id:r.id}}),Y.current=s.project_id,J.current=!0,a.current.update(e)}},[z,a,s.project_id,O]),(0,u.useEffect)(function(){a&&(a.current.insertAtCursor=function(e){var t=(0,w.insertText)(a.current.getEditorState(),e,{atCursor:!0});a.current.update(t)})},[a]);var re=function(e){var t=ee.current.getMatches(),r={content:(0,w.stripContentMatches)(e.getCurrentContent().getPlainText(),t),labels:[],project_id:null};I||(r.due=null),k||(r.priority=null),P||(r.responsible_uid=null),t.forEach(function(e){var t=e.match,n=e.isIgnored;switch(t.type){case b.MATCH_TYPE_COLLABORATOR:r.responsible_uid=n?null:t.id;break;case b.MATCH_TYPE_DATE:n?r.due=null:t.result.has_only_time&&X.current?r.due=X.current.inheritDate({year:X.current.getFullYear(),month:X.current.getMonth(),day:X.current.getDate(),hours:t.result.due_date.getHours(),minutes:t.result.due_date.getMinutes(),seconds:0},{withTime:!0,timezone:X.current.timezone}):r.due=m.default.fromDateist(t.result);break;case b.MATCH_TYPE_LABEL:if(n)return;r.labels.push(t.name);break;case b.MATCH_TYPE_PRIORITY:r.priority=n?null:5-t.id;break;case b.MATCH_TYPE_PROJECT:r.project_id=n?null:t.id}}),r.labels=(0,_.uniq)(r.labels),Q.current&&!(0,_.isEqual)(K.current,r.labels)?r.labels=K.current:(Q.current=!1,K.current=r.labels),J.current&&r.project_id!==Y.current?r.project_id=Y.current:(J.current=!1,Y.current=r.project_id),A(r),W(e)},ne=function(e,t,r){var n=e.split("\n");return n.length>1?(U?U(n,function(){a.current.update((0,w.insertText)(a.current.getEditorState(),n.join("")))}):W((0,w.insertText)(r,n.join(""))),"handled"):"not-handled"},oe=function(e,t){switch(e){case b.MATCH_TYPE_LABEL:return $(t);case b.MATCH_TYPE_PROJECT:return V(t)}};Z.current.setListeners({onCreate:oe,onEnter:x,onEscape:N,onTab:H});var ae=Z.current.SuggestionsList,ie=(0,p.default)("richtextinput",r);return u.default.createElement("div",{className:ie},u.default.createElement(f.default,{ref:a,autoFocus:t,editorState:z,collaborators:n,labels:i,projects:O,placeholder:c,plugins:te,spellCheck:!0,stripPastedStyles:!0,isDateistDisabled:I,isPriorityDisabled:k,handlePastedText:ne,onChange:re}),u.default.createElement(ae,null))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("react")),c=n(e("prop-types")),d=e("draft-js"),f=n(e("draft-js-plugins-editor")),p=n(e("classnames")),m=n(e("../../models/DateExt")),h=e("../../utils/fp"),_=e("../../utils"),y=n(e("./natural_language_plugin")),v=n(e("./suggestions_plugin")),g=n(e("./content_normalizer_plugin")),b=e("./constants"),w=e("./utils"),E=e("../hooks");s.propTypes={autoFocus:c.default.bool,className:c.default.string,collaborators:c.default.object.isRequired,forwardRef:c.default.object,item:c.default.object,labels:c.default.object.isRequired,placeholder:c.default.string,project:c.default.object,projects:c.default.object.isRequired,suggestionAction:c.default.string,user:c.default.object.isRequired,isAssigneeDisabled:c.default.bool,isDateistDisabled:c.default.bool,isPriorityDisabled:c.default.bool,withIgnoredInitialMatches:c.default.bool,onChange:c.default.func,onEnter:c.default.func,onEscape:c.default.func,onLabelAdd:c.default.func,onMultilinePaste:c.default.func,onProjectAdd:c.default.func,onTab:c.default.func};var j=s;r.default=j},{"../../models/DateExt":152,"../../utils":1176,"../../utils/fp":1166,"../hooks":766,"./constants":989,"./content_normalizer_plugin":991,"./natural_language_plugin":995,"./suggestions_plugin":1001,"./utils":1003,classnames:"classnames","draft-js":"draft-js","draft-js-plugins-editor":"draft-js-plugins-editor","prop-types":"prop-types",react:"react"}],989:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PROJECT_CHAR=r.PRIORITY_CHAR=r.LABEL_CHAR=r.COLLABORATOR_CHAR=r.MATCH_TYPE_PROJECT=r.MATCH_TYPE_PRIORITY=r.MATCH_TYPE_LABEL=r.MATCH_TYPE_COLLABORATOR=r.MATCH_TYPE_DATE=void 0;r.MATCH_TYPE_DATE="date";r.MATCH_TYPE_COLLABORATOR="collaborator";r.MATCH_TYPE_LABEL="label";r.MATCH_TYPE_PRIORITY="priority";r.MATCH_TYPE_PROJECT="project";r.COLLABORATOR_CHAR="+";r.LABEL_CHAR="@";r.PRIORITY_CHAR="p";r.PROJECT_CHAR="#"},{}],990:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("react-redux"),l=e("../../utils/fp"),s=e("../../reducers/labels"),u=e("../../reducers/projects"),c=n(e("./RichTextInput")),d=n(e("./withPlaceholder")),f=function(e,t){return{collaborators:e.collaborators,labels:(0,s.labelGetAllByName)(e),maxLabelItemOrder:(0,s.labelGetMaxOrder)(e)+1,project:(0,u.projectGetByID)(e,t.item&&t.item.project_id),projects:e.projects,user:e.user}},p=function(e){return{onLabelAdd:function(t,r){return e((0,s.labelAdd)({name:t,item_order:r}))},onProjectAdd:function(t){return e((0,u.projectAdd)({name:t}))}}},m=function(e,t,r){return o({},e,t,r,{onLabelAdd:function(r){return t.onLabelAdd(r,e.maxLabelItemOrder)}})},h=(0,l.compose)(d.default,(0,i.connect)(f,p,m,{forwardedRef:!0}))(c.default);r.default=h},{"../../reducers/labels":1105,"../../reducers/projects":1119,"../../utils/fp":1166,"./RichTextInput":988,"./withPlaceholder":1004,"react-redux":"react-redux"}],991:[function(e,t,r){"use strict";function n(){return{onChange:function(e){return(0,o.removeText)(e,/\n/)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=e("./utils"),a=n;r.default=a},{"./utils":1003}],992:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./container")),o=n.default;r.default=o},{"./container":990}],993:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t;switch(e){case s.MATCH_TYPE_PROJECT:t="sm1/quick_add_project.svg";break;case s.MATCH_TYPE_LABEL:t="sm1/quick_add_label.svg";break;case s.MATCH_TYPE_COLLABORATOR:t="sm1/quick_add_assignee.svg";break;case s.MATCH_TYPE_PRIORITY:t="sm1/quick_add_priority.svg";break;case s.MATCH_TYPE_DATE:t="sm1/quick_add_calendar.svg";break;case"link":return""}return svgs.getString(t)}function a(e){var t=e.children,r=e.contentState,n=e.entityKey,a=e.getEditorState,l=e.setEditorState,s=e.onClick,u=void 0===s?function(){}:s,c=r.getEntity(n);return"HIDDEN"===c.type?i.default.createElement("div",{className:"richtextinput_hidden"},t):i.default.createElement("div",{className:"richtextinput_match",onClick:function(e){u(e,c,a,l)}},i.default.createElement("span",{dangerouslySetInnerHTML:{__html:o(c.data.type)}}),t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("react")),l=n(e("prop-types")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../constants"));a.propTypes={children:l.default.node,contentState:l.default.object.isRequired,entityKey:l.default.string.isRequired,getEditorState:l.default.func.isRequired,setEditorState:l.default.func.isRequired,onClick:l.default.func};var u=a;r.default=u},{"../constants":989,"prop-types":"prop-types",react:"react"}],994:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function u(e,t){return f(e)||d(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function f(e){if(Array.isArray(e))return e}function p(e){var t,r=e.item,o=e.user,i=e.project,l=e.withIgnoredInitialMatches,s=[],c=[],d=!l,f=null,p={};if(r){(r.labels||[]).forEach(function(e){s=s.concat("".concat(j.LABEL_CHAR).concat(e," "))})}var S=function(e,r){var l=r.getProps(),f=l.autoFocus,p=l.collaborators,m=l.labels,_=l.projects,v=l.isDateistDisabled,b=l.isPriorityDisabled,w=r.getPlugins(),O=u(w,2),S=O[1];if(d&&S.isVisible())return e;var P=e.getCurrentContent().getFirstBlock(),I=e,k=I.getSelection(),T=P.getKey();if(!d){P=e.getCurrentContent().getFirstBlock();var C=y.Modifier.insertText(e.getCurrentContent(),new y.SelectionState({anchorKey:T,anchorOffset:0,focusKey:T,focusOffset:0}),s.join(""));I=y.EditorState.push(e,C,"insert-characters"),P=I.getCurrentContent().getFirstBlock()}var D=P.getText(),A=[].concat(a((0,E.parseLabelMatches)(D,m)),a((0,E.parseProjectMatches)(D,_)),a((0,E.parseCollaboratorMatches)(D,o,p,t||i)));if(b||(A=A.concat((0,E.parsePriorityMatches)(D))),v||o.features.dateist_inline_disabled||o.dateist_inline_disabled||(A=A.concat((0,E.parseDueDateMatches)(D))),A=(0,g.sortBy)("start")(A),!d){if(c=A.map(function(e,t){return{match:e,isIgnored:t>=s.length}}),d=!0,I=h(I,c),!f)return y.EditorState.moveSelectionToEnd(I);if(document.body.createTextRange){var M=document.body.createTextRange();M.collapse(),M.select()}return y.EditorState.moveFocusToEnd(I)}for(var x=[],R={},N={},L=0;L<A.length;L++){var $=A[L],U=P.getEntityAt($.start+1),B=U&&I.getCurrentContent().getEntity(U),V=P.getEntityAt($.end-1),F=V&&I.getCurrentContent().getEntity(V);if(!(B&&"MATCH"===B.type&&B.data.isInserted&&B!==F||F&&"MATCH"===F.type&&F.data.isInserted&&F!==B||$.end<=N.end||$.start<N.end&&$.start>N.start)){var H=!(!F||"IGNORED"!==F.type);F&&F.data.isInserted&&($=n({},$,{id:F.data.id,name:F.data.name})),$.type===j.MATCH_TYPE_LABEL?x.push({match:$,isIgnored:H,isInserted:F&&F.data.isInserted}):H?x.push({match:$,isIgnored:!0}):R[$.type]={match:$,isIgnored:!1,isInserted:F&&F.data.isInserted},N=$}}for(var q in R)R[q],x.push(R[q]);t=R[j.MATCH_TYPE_PROJECT]?R[j.MATCH_TYPE_PROJECT].match:null;var G=y.Modifier.applyEntity(I.getCurrentContent(),new y.SelectionState({anchorKey:T,anchorOffset:0,focusKey:T,focusOffset:D.length}),null);return I=y.EditorState.push(I,G,"apply-entity"),I=h(I,x),c=(0,g.sortBy)("match.start")(x),I=y.EditorState.acceptSelection(I,k)},P=(0,v.debounce)(function(e,t){var r=t.getProps(),n=r.isDateistDisabled,o=r.isPriorityDisabled;if(e.getCurrentContent()!==f.getCurrentContent()||n!==p.isDateistDisabled||o!==p.isPriorityDisabled){var a=S(e,t);t.getEditorState().getCurrentContent().getPlainText()===a.getCurrentContent().getPlainText()&&(f=a,p={isDateistDisabled:n,isPriorityDisabled:o},t.setEditorState(f))}},50),I=function(e,t){return"ko"===window.LANG&&f&&(b.isMacApp||b.isSafari)&&event&&"insertReplacementText"===event.inputType?e:(!b.isIE&&f?P(e,t):f&&e.getCurrentContent()===f.getCurrentContent()||(e=S(e,t),f=e),e)},k=function(e,t){if(e.ctrlKey&&77===e.keyCode)return"handled";if(!("Backspace"!==(0,v.resolveKeyboardKey)(e.key)||e.ctrlKey||e.altKey||e.metaKey)){var r=t.getEditorState(),n=r.getSelection(),o=r.getCurrentContent().getFirstBlock(),a=o.getEntityAt(n.getStartOffset()-1),i=a&&r.getCurrentContent().getEntity(a);return i&&"IGNORED"!==i.type?(t.setEditorState(_({editorState:r,type:"IGNORED",start:i.data.start,end:i.data.end})),"handled"):void 0}};return{willUnmount:P.cancel,onChange:I,keyBindingFn:k,decorators:[{strategy:function(e,t,r){e.findEntityRanges(function(e){var t=e.getEntity();if(null===t)return!1;var n=r.getEntity(t).getType();return"IGNORED"!==n&&"LINK"!==n},t)},component:(0,w.decorateComponentWithProps)(O.default,{onClick:function(e,t,r,n){e.preventDefault(),e.stopPropagation(),n(_({editorState:r(),type:"IGNORED",start:t.data.start,end:t.data.end}))}})}],getMatches:function(){return c},getHighlightedProject:function(){return t||i},insertMatch:m}}function m(e){var t=e.editorState,r=e.type,o=e.matchText,a=e.data,i=e.atCursor;if(!r||!o)return t;var l;switch(r){case j.MATCH_TYPE_LABEL:l=j.LABEL_CHAR;break;case j.MATCH_TYPE_PROJECT:l=j.PROJECT_CHAR;break;case j.MATCH_TYPE_COLLABORATOR:l=j.COLLABORATOR_CHAR;break;default:l=""}var s="".concat(l).concat(o," ");t=(0,w.insertText)(t,s,{atCursor:i});var u=t.getCurrentContent().getPlainText();return t=h(t,[{isIgnored:!1,isInserted:!0,match:n({type:r,start:u.length-s.length,end:u.length-1,match:o},a)}])}function h(e,t){var r=e;return t.forEach(function(e){var t=e.match,o=e.isIgnored,a=e.isInserted,i=void 0!==a&&a,l=t.start;o||t.type===j.MATCH_TYPE_DATE||(l=t.type===j.MATCH_TYPE_PRIORITY?t.start+(t.match.length-1):t.start+1,r=_({editorState:r,type:"HIDDEN",start:t.start,end:l,data:t})),r=_({editorState:r,type:o?"IGNORED":"MATCH",start:l,end:t.end,data:n({},t,{isInserted:i})})}),r}function _(e){var t=e.editorState,r=e.type,n=e.start,o=e.end,a=e.data,i=t.getSelection(),l=t.getCurrentContent().createEntity(r,"MUTABLE",a),s=l.getLastCreatedEntityKey(),u=t.getCurrentContent().getFirstBlock().getKey(),c=new y.SelectionState({anchorKey:u,anchorOffset:n,focusKey:u,focusOffset:o}),d=y.Modifier.applyEntity(l,c,s);return y.EditorState.forceSelection(y.EditorState.push(t,d),i)}Object.defineProperty(r,"__esModule",{value:!0}),r.insertMatch=m,r.default=void 0;var y=e("draft-js"),v=e("../../../utils"),g=e("../../../utils/fp"),b=e("../../../utils/Env"),w=e("../utils"),E=e("./parsers"),j=e("../constants"),O=function(e){return e&&e.__esModule?e:{default:e}}(e("./Match")),S=p;r.default=S},{"../../../utils":1176,"../../../utils/Env":1144,"../../../utils/fp":1166,"../constants":989,"../utils":1003,"./Match":993,"./parsers":996,"draft-js":"draft-js"}],995:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./NaturalLanguagePlugin")),o=n.default;r.default=o},{"./NaturalLanguagePlugin":994}],996:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e){return c(e)||u(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){f(e,t,r[t])})}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){var r=[];t=t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&");for(var n,o=(0,b.getMatchRegex)(t);null!==(n=o.exec(e));){var a=n[0].match(t);if(a){var i=n.index+a.index;r.push({start:i,end:n.index+n[0].length})}}return r}Object.defineProperty(r,"__esModule",{value:!0}),r.parseProjectMatches=r.parsePriorityMatches=r.parseLabelMatches=r.parseDueDateMatches=r.parseCollaboratorMatches=void 0;var m=e("reselect"),h=e("../../../utils/fp"),_=e("../../../reducers/labels"),y=e("../../../reducers/projects"),v=e("../../../reducers/collaborators"),g=e("./utils"),b=e("../utils"),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../constants")),E=/([+.?*+^$[\]\\(){}|_&-])/g,j=(0,m.createSelector)(y.projectGetActive,function(e){return e.map(function(e){var t=e.name;return t=$strip(t.replace(E,"\\$1")),{regex:new RegExp("(?:^|\\s)#".concat(t),"i"),project:e}})}),O=(0,m.createSelector)(function(e){return e.collaborators.all},function(e){return e.user},function(e,t){var r={};e=d({},e,f({},t.id,t));for(var n in e){var o=e[n],a=o.full_name||o.email;if(a=$strip(a.replace(E,"\\$1")),0===a.length)return;var i=(0,g.getNameVariations)(a,n,t.id);r[n]={collaborator:o,regex:new RegExp("(?:^|\\s)\\+(?:".concat(i.join("|"),")"),"gi")}}return r}),S=function(e,t,r){var n=[].concat(l((0,h.keys)(e.byPID[r])),l((0,h.keys)(e.invitedByPID[r])),[t.id]),o=O({collaborators:e,user:t});return(0,h.pick)(n,o)},P=function(e,t,r,n){var o=[];if(e.match(/\+[^\s]+/)&&n&&(0,v.isShared)({collaborators:r},n.id)){var a=S(r,t,n.id);if(n){var i;for(var l in a){(function(t){var r=a[t],n=r.regex,l=r.collaborator;if(!l)return"continue";(i=e.match(n))&&i.forEach(function(t){t=$strip(t),p(e,t).forEach(function(e){o.push(d({},e,{match:t,type:w.MATCH_TYPE_COLLABORATOR,id:l.id,name:l.name}))})})})(l)}}}return o};r.parseCollaboratorMatches=P;var I=function(e){var t=DateUtils.parse(e,null,!0,null,!0);return t.length?t.map(function(e){var t=e.date_string_matched,r=n(e.pos,2);return{start:r[0],end:r[1],match:t,type:w.MATCH_TYPE_DATE,name:t,result:e}}):[]};r.parseDueDateMatches=I;var k=function(e,t){var r=e.match(/(?:^|\s+)@([^\s,]+)/g)||[],n={},o=[],a=!0,i=!1,l=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)!function(){var r=s.value;if(r=$strip(r),!n[r]){n[r]=!0;var a=(0,_.labelGetByName)(r.replace("@",""),{caseSensitive:!1},{labels:t});a&&(o=o.concat(p(e,r).map(function(e){return d({},e,{match:r,id:a.id,type:w.MATCH_TYPE_LABEL,name:a.name})})))}}()}catch(e){i=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}return o};r.parseLabelMatches=k;var T=function(e){var t=new RegExp("(?:(?:^|\\s)!!|\\bp)(1|2|3|4)(?=\\s|$)","g"),r=e.match(t),n=[];if(r){var o=!0,a=!1,i=void 0;try{for(var l,s=r[Symbol.iterator]();!(o=(l=s.next()).done);o=!0)!function(){var t=l.value;t=(t||"").trim();var r=t.match(/\d+/)[0];p(e,t).forEach(function(e){n.push(d({},e,{id:parseInt(r),match:t,type:w.MATCH_TYPE_PRIORITY,name:r}))})}()}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}}return n};r.parsePriorityMatches=T;var C=function(e,t){var r=[];return e.match(/#[^\s]+/)&&function(){var n,o=j({projects:t}),a=!0,i=!1,l=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)!function(){var t=s.value,o=t.regex,a=t.project;(n=e.match(o))&&(n=$strip(n[0]),a&&p(e,n).forEach(function(e){r.push(d({},e,{match:n,type:w.MATCH_TYPE_PROJECT,id:a.id,name:a.name,shared:a.shared}))}))}()}catch(e){i=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}}(),r};r.parseProjectMatches=C},{"../../../reducers/collaborators":1086,"../../../reducers/labels":1105,"../../../reducers/projects":1119,"../../../utils/fp":1166,"../constants":989,"../utils":1003,"./utils":997,reselect:"reselect"}],997:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e,t,r){var o=[e],a=e.split(" "),i=n(a,2),l=i[0],s=i[1],u="";if(s){var c=s[0];u="".concat(l," ").concat(c,"\\.")}return u!==e&&u.length>0&&o.push(u),l!==e&&l.length>0&&o.push(l),String(t)===String(r)&&o.push(_x("task_assignment","Me")),o}Object.defineProperty(r,"__esModule",{value:!0}),r.getNameVariations=l},{}],998:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r){switch(e){case b.MATCH_TYPE_PROJECT:var n=v.getHex(e,t.color);return(0,g.isShared)({collaborators:r},t.id)?h.default.createElement("span",{className:"richtextinput_suggestions_item_icon",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/project_shared.svg")},style:{color:n}}):h.default.createElement("span",{className:"richtextinput_suggestions_item_icon richtextinput_suggestions_item_icon--unshared",style:{color:n}});case b.MATCH_TYPE_LABEL:return h.default.createElement("span",{className:"richtextinput_suggestions_item_icon",dangerouslySetInnerHTML:{__html:svgs.getString("sm1/label.svg")},style:{color:v.getHex(e,t.color)}});case b.MATCH_TYPE_COLLABORATOR:return h.default.createElement("span",{className:"richtextinput_suggestions_item_icon"},h.default.createElement(w.default,{user:t,size:w.default.SIZE_SMALL}))}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=n(e("react")),_=n(e("prop-types")),y=n(e("classnames")),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../../models/Colors")),g=e("../../../reducers/collaborators"),b=e("../constants"),w=n(e("../../Avatar")),E=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"handleSelect",function(){r.props.onSelect(r.props.item)}),p(c(r),"handleRef",function(e){r.itemRef=e}),r}return d(t,e),l(t,[{key:"componentDidUpdate",value:function(e){var t=e.index===e.selectedIndex,r=this.props.index===this.props.selectedIndex;!t&&r&&this.itemRef&&this.itemRef.parentNode&&(this.itemRef.parentNode.scrollTop=this.itemRef.offsetTop-this.itemRef.parentNode.offsetTop)}},{key:"render",value:function(){var e=this.props,t=e.collaborators,r=e.item,n=e.index,o=e.type,a=e.selectedIndex,i=(0,y.default)("richtextinput_suggestions_item",{"richtextinput_suggestions_item--selected":n===a});return r.isIgnored?null:h.default.createElement("li",{className:i,key:r.id,onClick:this.handleSelect,ref:this.handleRef},m(o,r,t),h.default.createElement("span",null,r.name))}}]),t}(h.default.PureComponent);E.propTypes={collaborators:_.default.object.isRequired,index:_.default.number.isRequired,item:_.default.object.isRequired,type:_.default.string.isRequired,selectedIndex:_.default.number,onSelect:_.default.func},E.defaultProps={onSelect:function(){}};var j=E;r.default=j},{"../../../models/Colors":149,"../../../reducers/collaborators":1086,"../../Avatar":647,"../constants":989,classnames:"classnames","prop-types":"prop-types",react:"react"}],999:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("react-dom")),h=n(e("prop-types")),y=n(e("../../Dialog")),v=n(e("./SuggestionsItem")),g=e("../constants"),b=e("../../../utils"),w=e("../../../utils/fp"),E=function(e){function t(e){var r;return a(this,t),r=s(this,u(t).call(this,e)),r.handleAdd=r.handleAdd.bind(c(r)),r.handleSelect=r.handleSelect.bind(c(r)),r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.props.store.subscribeToItem("selectedIndex",function(){return e.forceUpdate()}),this.anchor=m.default.findDOMNode(this.props.store.getItem("getEditorRef")()).parentElement}},{key:"handleAdd",value:function(){this.props.onCreate(this.props.store.getItem("queryType"),this.props.store.getItem("query"))}},{key:"handleSelect",value:function(e){this.props.onSelect(this.props.store,e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.collaborators,n=t.store,o=t.onClickOutside,a=n.getItem("items"),i=n.getItem("query"),l=n.getItem("queryType"),s=n.getItem("selectedIndex");if(!this.anchor||!i&&!a.length)return null;var u=a.filter(function(e){return e.isIgnored}),c=u.length===a.length&&(0,w.find)(function(e){return e.name===i},u),d=0===a.length||u.length===a.length&&!c;return p.default.createElement(y.default,{autoFocus:!1,anchor:this.anchor,position:"bottom",width:this.anchor.offsetWidth,onHide:o},p.default.createElement("ul",{className:"richtextinput_suggestions"},a.map(function(t,n){return p.default.createElement(v.default,{key:t.id||t.name,collaborators:r,item:t,index:n,type:l,selectedIndex:s,onSelect:e.handleSelect})}),d?p.default.createElement("li",{className:"richtextinput_suggestions_item richtextinput_suggestions_item--create",onClick:this.props.onCreate},p.default.createElement("span",null,l===g.MATCH_TYPE_LABEL?_("Label not found."):_("Project not found."),p.default.createElement("b",null," ".concat(_("Create")," ").concat(i)))):null,c?p.default.createElement("li",{className:"richtextinput_suggestions_item richtextinput_suggestions_item--duplicate",onClick:function(){return e.handleSelect(u[0])}},p.default.createElement("span",null,(0,b.format)(_("Label @{label_name} is already included"),{label_name:i}))):null))}}]),t}(p.default.PureComponent);E.propTypes={
collaborators:h.default.object,store:h.default.object,onCreate:h.default.func,onClickOutside:h.default.func,onSelect:h.default.func},E.defaultProps={store:{},onCreate:function(){},onClickOutside:function(){},onSelect:function(){}};var j=E;r.default=j},{"../../../utils":1176,"../../../utils/fp":1166,"../../Dialog":649,"../constants":989,"./SuggestionsItem":998,"prop-types":"prop-types",react:"react","react-dom":"react-dom"}],1e3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return u(e)||s(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function u(e){if(Array.isArray(e))return e}function c(e){var t,r,n,a,l=e.collaborators,s=e.user,u=(0,b.default)({user:s,items:[],query:null,queryType:null,selectedIndex:0,isVisible:!1,hasInsertedMatch:!1}),c=function(e,t){var r=e.getSelection(),n=e.getCurrentContent().getFirstBlock(),a=r.getStartOffset(),l=n.getText().slice(0,a),c=l.substr(l.length-1);if(!u.getItem("isVisible")&&c!==v.LABEL_CHAR&&c!==v.PROJECT_CHAR&&c!==v.COLLABORATOR_CHAR)return e;var d=n.getEntityAt(a),f=n.getText()[a]&&" "!==n.getText()[a];if(d||f)return e;var g=E.exec(l)||[],b=i(g,3),w=b[1],j=b[2];if(void 0===j)return C(),e;switch(u.updateItem("query",j),w){case v.COLLABORATOR_CHAR:var O=t.getPlugins(),S=i(O,3),P=S[2],I=P.getHighlightedProject(),k=t.getProps(),T=k.collaborators;if(!I||!(0,h.isShared)({collaborators:T},I.id))return C(),e;u.updateItem("queryType",v.MATCH_TYPE_COLLABORATOR);var D=(0,h.getAllCollaboratorsGroupByPID)({collaborators:T,user:s})[I.id].filter(function(e){return s.id!==e.id}).map(function(e){return o({},e,{name:(0,p.shortName)(e.full_name)})});D.unshift(o({},s,{name:"".concat(_x("task_assignment","Me")," (").concat((0,p.shortName)(s.full_name),")")}));var A=""===u.getItem("query")?D:D.filter(function(e){return e.name.toLowerCase().includes(u.getItem("query").toLowerCase())});u.updateItem("items",A);break;case v.PROJECT_CHAR:var M=t.getProps(),x=M.projects;u.updateItem("queryType",v.MATCH_TYPE_PROJECT),u.updateItem("items",""===u.getItem("query")?(0,y.projectGetActiveSorted)({projects:x}):(0,y.projectGetByNameSearch)(u.getItem("query"),{projects:x}));break;case v.LABEL_CHAR:var R=t.getProps(),N=R.labels,L=t.getPlugins(),$=i(L,3),U=$[2],B=U.getMatches();u.updateItem("queryType",v.MATCH_TYPE_LABEL),u.updateItem("items",(0,_.labelGetBySearch)({labels:N},u.getItem("query")).map(function(e){return o({},e,{isIgnored:!!(0,m.find)(function(t){var r=t.match;return e.name===r.name},B)})}))}return 0===u.getItem("items").length&&(u.getItem("query").split(" ").length>1||w===v.COLLABORATOR_CHAR)?(C(),e):(u.updateItem("isVisible",!0),u.updateItem("selectedIndex",0),e)},f=function(e){if(u.getItem("isVisible")){e.preventDefault();var t=u.getItem("selectedIndex")+1,r=Math.max(0,u.getItem("items").length-1);return u.updateItem("selectedIndex",t>r?0:t),e.preventDefault()}},j=function(e){if(u.getItem("isVisible")){e.preventDefault();var t=u.getItem("selectedIndex")-1,r=Math.max(0,u.getItem("items").length-1);u.updateItem("selectedIndex",t<0?r:t)}},O=function(e){if(!u.getItem("isVisible"))return n(e);e.preventDefault(),C()},S=function(){var e=u.getItem("items"),r=u.getItem("query");if(e.length)d(u,e[u.getItem("selectedIndex")]);else if(r){var n=t(u.getItem("queryType"),r);d(u,n)}},P=function(e){return u.getItem("isVisible")?(S(),"handled"):(r(e),"handled")},I=function(e){if(!u.getItem("isVisible"))return a(e);e.preventDefault(),S()},k=function(e){switch((0,p.resolveKeyboardKey)(e.key)){case"ArrowUp":case"ArrowLeft":return j(e);case"ArrowDown":case"ArrowRight":return f(e);case"Escape":return O(e);case"Tab":return I(e)}},T=function(){var e=u.getItem("query"),r=t(u.getItem("queryType"),e);d(u,r)},C=function(){u.updateItem("queryType",null),u.updateItem("query",null),u.updateItem("items",[]),u.updateItem("isVisible",!1),u.updateItem("selectedIndex",20)},D={store:u,collaborators:l,onCreate:T,onSelect:d,onClickOutside:O};return{SuggestionsList:(0,g.decorateComponentWithProps)(w.default,D),initialize:function(e){var t=e.getEditorState,r=e.getEditorRef,n=e.setEditorState;u.updateItem("getEditorRef",r),u.updateItem("getEditorState",t),u.updateItem("setEditorState",n)},isVisible:function(){return u.getItem("isVisible")},setListeners:function(e){var o=e.onCreate,i=e.onEnter,l=e.onEscape,s=e.onTab;t=o,r=i,n=l,a=s},onChange:c,handleReturn:P,keyBindingFn:k,onSelect:d}}function d(e,t){var r=e.getItem("getEditorState")(),n=r.getSelection(),o=n.getStartOffset(),a=o-e.getItem("query").length-1,l=n.merge({anchorOffset:a,focusOffset:o}),s=r.getCurrentContent();r=f.EditorState.push(r,f.Modifier.replaceText(s,l,""),"remove-range");var u=e.getItem("queryType")===v.MATCH_TYPE_COLLABORATOR&&e.getItem("user").id===t.id?_x("task_assignment","Me"):t.name;r=i(e.getItem("getEditorRef")().props.plugins,3)[2].insertMatch({editorState:r,type:e.getItem("queryType"),matchText:u,data:t,atCursor:!0}),e.updateItem("query",null),e.updateItem("queryType",null),e.updateItem("items",[]),e.updateItem("isVisible",!1),e.updateItem("selectedIndex",0),e.getItem("setEditorState")(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=e("draft-js"),p=e("../../../utils"),m=e("../../../utils/fp"),h=e("../../../reducers/collaborators"),_=e("../../../reducers/labels"),y=e("../../../reducers/projects"),v=e("../constants"),g=e("../utils"),b=n(e("./store")),w=n(e("./SuggestionsList")),E=/(?:^|\s)(@|#|\+)([^(@|#|+)]{0,})([\s]{0,})$/,j=c;r.default=j},{"../../../reducers/collaborators":1086,"../../../reducers/labels":1105,"../../../reducers/projects":1119,"../../../utils":1176,"../../../utils/fp":1166,"../constants":989,"../utils":1003,"./SuggestionsList":999,"./store":1002,"draft-js":"draft-js"}],1001:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./SuggestionsPlugin")),o=n.default;r.default=o},{"./SuggestionsPlugin":1e3}],1002:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e){var t=e||{},r={};return{subscribeToItem:function(e,t){r[e]=r[e]||[],r[e].push(t)},unsubscribeFromItem:function(e,t){r[e]=r[e].filter(function(e){return e!==t})},updateItem:function(e,a){t=n({},t,o({},e,a)),r[e]&&r[e].forEach(function(r){return r(t[e])})},getItem:function(e){return t[e]}}},i=a;r.default=i},{}],1003:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){var r,n;return n=r=function(r){function n(){return a(this,n),s(this,c(n).apply(this,arguments))}return d(n,r),l(n,[{key:"render",value:function(){return b.default.createElement(e,o({},this.props,t))}}]),n}(b.default.Component),p(r,"displayName","Decorated(".concat(e.displayName,")")),n}function h(e,t){var r="",n=0;return t.forEach(function(t){var o=t.match;t.isIgnored||(r+=e.substr(n,o.start-n),n=" "===e[o.end]?o.end+1:o.end)}),$strip(r+e.substr(n,e.length))}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onlyLastOccurence,n=j.is_spaceless_lang(window.DATEIST_LANG),o=n?"(^|\\s*)".concat(e):"(^|\\s+)".concat(e,"(?:$|(?=[\\s\\)\\]]+))");return r&&(o="".concat(o,"(?!.*").concat(o,")")),new RegExp(o,"gi")}function y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.atCursor;e=void 0!==n&&n?w.EditorState.forceSelection(e,e.getSelection()):w.EditorState.moveFocusToEnd(e);var o=e.getCurrentContent(),a=o.getPlainText(),i=a[a.length-1],l=!a||i&&" "===i?"":" ",s=w.Modifier.replaceText(o,e.getSelection(),"".concat(l).concat(t));return w.EditorState.push(e,s,"insert-characters")}function v(e,t){if(null===t)return e;var r=e.getCurrentContent().getFirstBlock().getEntityAt(t.index+1),n=r&&e.getCurrentContent().getEntity(r);n&&n.type;var o=e.getSelection().merge({anchorOffset:t.index,focusOffset:t.index+t[0].length}),a=w.Modifier.removeRange(e.getCurrentContent(),o,"forward");return w.EditorState.push(e,a,"remove-range")}function g(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.onlyLastOccurence,a=void 0!==o&&o,i=t instanceof RegExp?t:_(t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&"),{onlyLastOccurence:a}),l=e.getCurrentContent().getPlainText();if(a)return r=i.exec(l),v(e,r);for(;null!==(r=i.exec(l));)e=v(e,r),l=e.getCurrentContent().getPlainText(),i.lastIndex=0;return e}Object.defineProperty(r,"__esModule",{value:!0}),r.decorateComponentWithProps=m,r.stripContentMatches=h,r.getMatchRegex=_,r.insertText=y,r.removeText=g;var b=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),w=e("draft-js"),E=window,j=E.DateistUtils},{"draft-js":"draft-js",react:"react"}],1004:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){$request("/sync/v8/tooltips/mark_as_seen").sendReq({name:E,token:window.User.token})}function m(){var e=$requestJSON("/sync/v8/tooltips/is_seen");return e.addCallback(function(e){e.result?$storage(w).set(b):$storage(w).set("0")}),e.sendReq({name:E,token:window.User.token})}function h(){var e=$storage(w).get();if(null===e)return m(),b;var t=parseInt(e||0);return t+=1,$storage(w).set("".concat(t)),t===b&&p(),t}function y(e){return function(t){function r(e){var t;if(a(this,r),t=s(this,c(r).call(this,e)),h()<b){var n=Math.floor(Math.random()*g.length);t.placeholder=_("e.g.")+" "+g[n]}return t}return d(r,t),l(r,[{key:"render",value:function(){return v.default.createElement(e,o({},this.props,{placeholder:this.placeholder}))}}]),r}(v.default.PureComponent)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=y;var v=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),g=[_("Get pastries sun at 9")+" "+_("#Family"),_("Renew gym every May 1st")+" "+_("#Health"),_("Design meeting at 11am p1")+" "+_("#Meeting"),_("Learn Portuguese every 2 days")+" "+_("#Learning"),_("Buy gift tomorrow at 6pm p1")+" "+_("#Errands"),_("Read every day p3 @goals")+" "+_("#Learning"),_("Conference Wednesday at 15")+" "+_("#Meeting"),_("Family lunch on Sunday at 11am")+" "+_("#Personal")],b=100,w="WR_PlaceholderCount",E="web_ph_natrual_text"},{react:"react"}],1005:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dayViewLink=void 0;var n=e("../../utils"),o=function(e){return"/app#agenda/".concat((0,n.toISODateString)(e,{dateOnly:!0}))};r.dayViewLink=o},{"../../utils":1176}],1006:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(){E(h)}function r(e){e.stopPropagation(),b(e)}var n=e.timeFormat,o=e.userTimezoneInfo,i=e.isTimePickerShown,u=void 0!==i&&i,h=e.selectedDate,y=e.onTimePickerToggle,v=void 0===y?function(){}:y,g=e.onTimeSelect,b=void 0===g?function(){}:g,w=e.onSave,E=void 0===w?function(){}:w,j=a.default.useRef(h),O=a.default.useRef(null),S=(0,s.default)("scheduler-actions-save",{"scheduler-actions-save--disabled":u}),P=Boolean(h&&h.with_time),I=Boolean(P||j.current&&j.current.with_time);return a.default.createElement("div",{className:"scheduler-actions"},P?a.default.createElement(a.default.Fragment,null,a.default.createElement("span",{className:"scheduler-actions-time"},a.default.createElement(d.default,{ref:O,className:"scheduler-actions-time-label",onClick:function(e){return v(!0,e)},"data-track":"scheduler|full_calendar_time"},h.format({inTimezoneTime:!0,onlyTime:!0})),a.default.createElement("span",{className:"scheduler-actions-time-separator"}),a.default.createElement(d.default,{className:"scheduler-actions-time-remove",onClick:r},a.default.createElement(f.default,null)))):a.default.createElement(d.default,{ref:O,className:"scheduler-actions-addtime",onClick:function(e){return v(!0,e)},"data-track":"scheduler|full_calendar_time","aria-haspopup":"true","aria-expanded":u},"+ ",_("Add time")),I&&a.default.createElement(d.default,{className:S,onClick:t,"data-track":"scheduler|full_calendar_save"},_("Save")),u&&a.default.createElement(c.default,{className:"dialog-timepicker",anchor:O.current,onHide:function(e){return v(!1,e)},position:"top",width:m,isPositionFluid:!0},a.default.createElement(l.default,null,a.default.createElement(p.default,{selectedDate:h,timeFormat:n,userTimezoneInfo:o,onCancel:function(e){return v(!1,e)},onSelect:b}))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("react-focus-lock")),s=n(e("classnames")),u=n(e("../../models/DateExt")),c=n(e("../Dialog")),d=n(e("../Button")),f=n(e("./datePicker/icons/DeleteIcon")),p=n(e("./timePicker")),m=225;o.propTypes={timeFormat:i.default.number.isRequired,userTimezoneInfo:i.default.object.isRequired,isTimePickerShown:i.default.bool,selectedDate:i.default.instanceOf(u.default),onTimePickerToggle:i.default.func,onTimeSelect:i.default.func,onSave:i.default.func},o.defaultProps={onTimePickerToggle:function(){},onTimeSelect:function(){},onSave:function(){}};var h=o;r.default=h},{"../../models/DateExt":152,"../Button":648,"../Dialog":649,"./datePicker/icons/DeleteIcon":1018,"./timePicker":1045,classnames:"classnames","prop-types":"prop-types",react:"react","react-focus-lock":"react-focus-lock"}],1007:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var v=n(e("react")),g=n(e("prop-types")),b=n(e("react-focus-lock")),w=n(e("../../models/DateExt")),E=e("../../utils"),j=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./suggestions/constants")),O=n(e("./Actions")),S=n(e("./datePicker")),P=n(e("./dueDateInput")),I=n(e("./suggestions")),k=e("../../utils/deps"),T=(0,k.defineDeps)("Scheduler",["SmartSchedule"]),C=function(e){function t(e){var r;u(this,t),r=f(this,p(t).call(this,e)),y(m(r),"handleDateSelect",function(e){var t=r.state.selectedDate;if(r.props.selectedItems.length>1&&(!t||!t.with_time)){var n=r.props.selectedItems.map(function(t){return t.due?t.due.inheritDate({year:e.getFullYear(),month:e.getMonth(),day:e.getDate()}):w.default.fromDate(e)});return r.props.onDateSelect(n)}return t?t.with_time?void r.setState(function(t){return{selectedDate:t.selectedDate.inheritDate({year:e.getFullYear(),month:e.getMonth(),day:e.getDate()})}}):r.props.onDateSelect(t.inheritDate({year:e.getFullYear(),month:e.getMonth(),day:e.getDate()})):r.props.onDateSelect(w.default.fromDate(e))}),y(m(r),"handleInputDateSelect",function(e,t){t||r.setState({selectedDate:null}),r.props.onDateSelect(e)}),y(m(r),"handleTimePickerToggle",function(e,t){t.nativeEvent?t.nativeEvent.stopImmediatePropagation():t.stopImmediatePropagation(),r.setState({isTimePickerShown:e})}),y(m(r),"handleTimeSelect",function(e,t,n){var o=r.state.selectedDate;e.nativeEvent.stopImmediatePropagation(),t?o=o?o.changeTime(t.getHours(),t.getMinutes(),t.getSeconds(),{timezone:n}):w.default.fromDate(t,{timezone:n,withTime:!0}):o&&(o=o.inheritDate({year:o.getFullYear(),month:o.getMonth(),day:o.getDate(),hours:23,minutes:59,seconds:59},{withTime:!0})),r.setState({selectedDate:o,isTimePickerShown:!1})}),y(m(r),"handleDueDateInputToggle",function(e){r.el.current.style.height=e?"inherit":"".concat(r.initialHeight,"px"),r.setState({isDueDateInputActive:e})}),y(m(r),"handleKeyDown",function(e){"Escape"===(0,E.resolveKeyboardKey)(e.key)&&(e.stopPropagation(),$$(".dialog",document.body).length>1?(e.preventDefault(),r.setState({isTimePickerShown:!1})):r.state.isDueDateInputActive||r.props.onClose())}),y(m(r),"handleSuggestionSelect",function(e,t){if(e===j.SMART_SCHEDULER)return T.SmartSchedule.openSmartSchedule(r.props.selectedItems),r.props.onClose();if(e===j.POSTPONE||!t)return r.props.onDateSelect(t);var n;if(r.state.selectedDate){var o=r.state.selectedDate.inheritDate({year:t.getFullYear(),month:t.getMonth(),day:t.getDate()});n=r.props.selectedItems.map(function(){return o})}else n=r.props.selectedItems.map(function(e){return e.due?e.due.inheritDate({year:t.getFullYear(),month:t.getMonth(),day:t.getDate()}):w.default.fromDate(t)});r.props.onDateSelect(n.length>1?n:n[0])});var n=e.selectedDate;return r.initialSelectedDate=n,r.state={selectedDate:n,isDueDateInputActive:!1,isTimePickerShown:!1},r.initialHeight=null,r.el=v.default.createRef(),r}return h(t,e),d(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),this.initialHeight=this.el.current.clientHeight}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.currentDate,r=e.ignoredDays,n=e.items,o=e.karma,i=e.nextWeekDay,l=e.predictedDate,s=e.selectedItems,u=e.suggestions,c=e.timeFormat,d=e.userTimezoneInfo,f=e.collaboratorsByPID,p=e.user,m=e.weekStartDay,h=e.onDateSelect,_=e.initialInputValue,y=this.state,g=y.selectedDate,w=y.isDueDateInputActive,k=y.isTimePickerShown;return v.default.createElement(b.default,null,v.default.createElement("div",{ref:this.el,className:"scheduler",onKeyDown:this.handleKeyDown},v.default.createElement(P.default,{currentDate:t,items:n,collaboratorsByPID:f,user:p,karma:o,selectedDate:g,userTimezoneInfo:d,onActiveChange:this.handleDueDateInputToggle,onDateSelect:this.handleInputDateSelect,initialInputValue:_}),!w&&v.default.createElement(v.default.Fragment,null,v.default.createElement(I.default,{currentDate:t,ignoredDays:r,nextWeekDay:i,predictedDate:l,types:this.initialSelectedDate||(0,E.some)(s,"due")?[].concat(a(u),[j.NO_DATE]):u,selectedDate:this.initialSelectedDate,weekStartDay:m,onSuggestionSelect:this.handleSuggestionSelect}),v.default.createElement(S.default,{currentDate:t,ignoredDays:r,items:n,collaboratorsByPID:f,user:p,selectedDate:g,weekStartDay:m,onDateSelect:this.handleDateSelect}),v.default.createElement(O.default,{selectedDate:g,timeFormat:c,userTimezoneInfo:d,isTimePickerShown:k,onTimePickerToggle:this.handleTimePickerToggle,onTimeSelect:this.handleTimeSelect,onSave:h}))))}}]),t}(v.default.PureComponent);C.propTypes={currentDate:g.default.instanceOf(Date).isRequired,ignoredDays:g.default.array,items:g.default.array,karma:g.default.number.isRequired,nextWeekDay:g.default.number,predictedDate:g.default.oneOfType([g.default.instanceOf(Promise),g.default.instanceOf(w.default),g.default.arrayOf(g.default.instanceOf(w.default))]),selectedDate:g.default.instanceOf(w.default),selectedItems:g.default.array,suggestions:g.default.array,timeFormat:g.default.number,userTimezoneInfo:g.default.object,collaboratorsByPID:g.default.object,user:g.default.object,weekStartDay:g.default.number,onClose:g.default.func,onDateSelect:g.default.func,initialInputValue:g.default.string},C.defaultProps={currentDate:new Date,ignoredDays:[6,7],items:[],nextWeekDay:1,predictedDate:Promise.resolve(),selectedItems:[],suggestions:[],timeFormat:0,userTimezoneInfo:{},weekStartDay:7,onClose:function(){},onDateSelect:function(){}};var D=C;r.default=D},{"../../models/DateExt":152,"../../utils":1176,"../../utils/deps":1154,"./Actions":1006,"./datePicker":1021,"./dueDateInput":1027,"./suggestions":1042,"./suggestions/constants":1032,"prop-types":"prop-types",react:"react","react-focus-lock":"react-focus-lock"}],1008:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.align,r=e.anchor,n=e.className,o=e.isFixed,i=e.selectedDate,f=e.selectedItems,p=e.onHide,m=e.onDateSelect,h=e.initialInputValue,_=function(){r&&r.focus(),p()},y=(0,s.getPredictedDateType)(f),v=(0,s.fetchPredictedDate)(f,y);return a.default.createElement(l.default,{align:t,anchor:r,className:n,isFixed:o,width:d,onHide:_},a.default.createElement(c.default,{currentDate:new Date,predictedDate:v,selectedDate:i,selectedItems:f,suggestions:[u.TODAY,u.TOMORROW,u.NEXT_WEEK,y],onClose:_,onDateSelect:function(e){r&&r.focus(),m(e)},initialInputValue:h}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../Dialog")),s=e("./utils"),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./suggestions/constants")),c=n(e("./container")),d=250;o.propTypes={align:i.default.string,anchor:i.default.object,className:i.default.string,selectedDate:i.default.object,selectedItems:i.default.array,isFixed:i.default.bool,onDateSelect:i.default.func,onHide:i.default.func,initialInputValue:i.default.string},o.defaultProps={isFixed:!1,onDateSelect:function(){},onHide:function(){}};var f=o;r.default=f},{"../Dialog":649,"./container":1010,"./suggestions/constants":1032,"./utils":1051,"prop-types":"prop-types",react:"react"}],1009:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("react-dom")),u=e("react-redux"),c=n(e("../../stores/store")),d=n(e("./SchedulerDialog")),f=function(){function e(){o(this,e)}return i(e,[{key:"show",value:function(e){var t=this,r=e.align,n=e.anchor,o=e.dialogClassName,a=e.hideMenus,i=void 0===a||a,f=e.holder,p=e.isDialogFixed,m=e.onDateSelect,h=e.onHide,_=e.selectedDate,y=e.selectedItems;if(i&&(IstTooltip.hide(),IstMenu.hide()),n===this.anchor)return this.anchor=null,s.default.unmountComponentAtNode(f);this.anchor=n,s.default.render(l.default.createElement(u.Provider,{store:c.default},l.default.createElement(d.default,{align:r,anchor:n,className:o,isFixed:p,selectedDate:_,selectedItems:y,onHide:function(){h&&h(),t.anchor=null,s.default.unmountComponentAtNode(f)},onDateSelect:function(e){m&&m(e),t.anchor=null,s.default.unmountComponentAtNode(f)}})),f)}}]),e}(),p=new f;r.default=p},{"../../stores/store":1140,"./SchedulerDialog":1008,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],1010:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../reducers/user")),a=e("../../reducers/items/selectors"),i=function(e){return e&&e.__esModule?e:{default:e}}(e("./Scheduler")),l=function(e){return{items:(0,a.getUncompletedExcludeSection)(e),ignoredDays:o.getDaysOff(e),karma:o.getKarma(e),nextWeekDay:o.getNextWeekDay(e),weekStartDay:o.getWeekStartDay(e),timeFormat:o.getTimeFormat(e),userTimezoneInfo:o.getTimezoneInfo(e),collaboratorsByPID:e.collaborators.byPID,user:(0,o.getUser)(e)}},s=(0,n.connect)(l)(i.default);r.default=s},{"../../reducers/items/selectors":1102,"../../reducers/user":1135,"./Scheduler":1007,"react-redux":"react-redux"}],1011:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),_=n(e("classnames")),y=n(e("../../Button")),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./constants")),g=n(e("./MonthList")),b=n(e("./MonthListHeader")),w=n(e("./icons/NextIcon")),E=n(e("./icons/PreviousIcon")),j=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"initialLabel","".concat(v.shortMonths[r.props.currentDate.getMonth()]," ").concat(r.props.currentDate.getFullYear())),p(c(r),"state",{hoverDate:null,scrollAction:null,topMonthLabel:r.initialLabel,hasHeaderBorder:!1}),p(c(r),"handleDayMouseEnter",function(e){r.setState({hoverDate:e})}),p(c(r),"handleDayMouseLeave",function(){r.setState({hoverDate:null})}),p(c(r),"handleMonthListScroll",function(e){var t={};r.state.hoverDate&&(t.hoverDate=null),r.hasActionQueued?r.hasActionQueued=!1:t.hasHeaderBorder=0!==e,r.setState(t)}),p(c(r),"handleScrollActionCompleted",function(){r.hasActionQueued=!0,r.setState({hasHeaderBorder:!1,scrollAction:null})}),p(c(r),"handleScrollNextMonth",function(){r.setState({scrollAction:v.SCROLL_NEXT})}),
p(c(r),"handleScrollPreviousMonth",function(){r.setState({scrollAction:v.SCROLL_PREV})}),p(c(r),"handleScrollTop",function(){r.setState({scrollAction:v.SCROLL_TOP})}),p(c(r),"handleTopMonthChange",function(e){r.setState({topMonthLabel:e})}),r}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.currentDate,r=e.ignoredDays,n=e.items,o=e.selectedDate,a=e.weekStartDay,i=e.onDateSelect,l=e.collaboratorsByPID,s=e.user,u=this.state,c=u.hoverDate,d=u.scrollAction,f=u.topMonthLabel,p=u.hasHeaderBorder,h=this.initialLabel===f,v=(0,_.default)("scheduler-picker-header-action",{"scheduler-picker-header-action--disabled":h});return m.default.createElement("div",{ref:this.picker,className:"scheduler-picker"},m.default.createElement("div",{className:"scheduler-picker-header"},m.default.createElement("span",{className:"scheduler-picker-header-month"},f),m.default.createElement("div",{className:"scheduler-picker-header-actions"},m.default.createElement(y.default,{className:v,onClick:this.handleScrollPreviousMonth,disabled:h},m.default.createElement(E.default,null)),m.default.createElement(y.default,{className:"scheduler-picker-header-action",onClick:this.handleScrollTop},m.default.createElement("div",null,m.default.createElement("div",{className:"outline-circle"}))),m.default.createElement(y.default,{className:"scheduler-picker-header-action",onClick:this.handleScrollNextMonth},m.default.createElement(w.default,null)))),m.default.createElement(b.default,{collaboratorsByPID:l,user:s,dueDate:c,items:n,weekStartDay:a,hasBorder:p}),m.default.createElement(g.default,{currentDate:t,ignoredDays:r,scrollAction:d,selectedDate:o,weekStartDay:a,onDayClick:i,onDayMouseEnter:this.handleDayMouseEnter,onDayMouseLeave:this.handleDayMouseLeave,onScroll:this.handleMonthListScroll,onScrollActionCompleted:this.handleScrollActionCompleted,onTopMonthChange:this.handleTopMonthChange}))}}]),t}(m.default.PureComponent);j.propTypes={currentDate:h.default.instanceOf(Date).isRequired,ignoredDays:h.default.array.isRequired,initialHeight:h.default.number,items:h.default.array,collaboratorsByPID:h.default.object,user:h.default.object,selectedDate:h.default.object,weekStartDay:h.default.number,onDateSelect:h.default.func,onFixedToggle:h.default.func,onScrollTopSet:h.default.func},j.defaultProps={initialHeight:0,items:[],weekStartDay:7,onDateSelect:function(){},onFixedToggle:function(){},onScrollTopSet:function(){}};var O=j;r.default=O},{"../../Button":648,"./MonthList":1014,"./MonthListHeader":1015,"./constants":1017,"./icons/NextIcon":1019,"./icons/PreviousIcon":1020,classnames:"classnames","prop-types":"prop-types",react:"react"}],1012:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){e.stopPropagation(),p(r)}var r=e.date,n=e.isIgnored,o=void 0!==n&&n,i=e.isSelected,u=void 0!==i&&i,c=e.isFocusable,d=void 0!==c&&c,f=e.onClick,p=void 0===f?function(){}:f,m=e.onMouseEnter,h=void 0===m?function(){}:m,_=e.onMouseLeave,y=void 0===_?function(){}:_,v=(0,l.default)("scheduler-picker-cell",{"scheduler-picker-cell--greyed":o&&!u,"scheduler-picker-cell--selected":u});return a.default.createElement(s.default,{className:v,tabIndex:d?0:-1,onClick:t,onMouseEnter:function(){return h(r)},onMouseLeave:y,"data-track":"scheduler|calendar_day"},a.default.createElement("span",null,r.getDate()))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("../../Button"));o.propTypes={date:i.default.instanceOf(Date).isRequired,isIgnored:i.default.bool,isSelected:i.default.bool,isFocusable:i.default.bool,onClick:i.default.func,onMouseEnter:i.default.func,onMouseLeave:i.default.func};var u=o;r.default=u},{"../../Button":648,classnames:"classnames","prop-types":"prop-types",react:"react"}],1013:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=o(e("react")),_=o(e("prop-types")),y=o(e("classnames")),v=e("../../../utils"),g=n(e("./constants")),b=n(e("./utils")),w=o(e("./Day")),E=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=u(this,(e=c(t)).call.apply(e,[this].concat(o))),m(d(r),"days",h.default.createRef()),m(d(r),"handleKeyDown",function(e){var t=(0,v.resolveKeyboardKey)(e.key);if("Tab"!==t){e.preventDefault();var n=document.activeElement;switch(t){case"ArrowUp":for(var o=0;o<7;o++)if(!(n=n.previousSibling)||"scheduler-picker-month-spacer"===n.className){n=r.getPreviousMonthDay();break}break;case"ArrowDown":for(var a=0;a<7;a++)(n=n.nextSibling)||(n=r.getNextMonthDay());break;case"ArrowLeft":n=n.previousSibling,n&&"scheduler-picker-month-spacer"!==n.className||(n=r.getPreviousMonthDay());break;case"ArrowRight":n=n.nextSibling,n||(n=r.getNextMonthDay());break;default:return}n&&n.focus()}}),r}return f(t,e),s(t,[{key:"componentDidMount",value:function(){this.days.current.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){this.days.current.removeEventListener("keydown",this.handleKeyDown)}},{key:"getNextMonthDay",value:function(){var e=this.days.current.parentNode.nextSibling;if(e){return $$(".scheduler-picker-cell",e)[0]}}},{key:"getPreviousMonthDay",value:function(){var e=this.days.current.parentNode.previousSibling;if(e){var t=$$(".scheduler-picker-cell",e);return t[t.length-1]}}},{key:"render",value:function(){var e,t,r,n=this.props,o=n.date,a=n.forwardRef,i=n.ignoredDays,l=n.focusedDate,s=n.selectedDate,u=n.weekStartDay,c=n.isFirstRowFilled,d=n.onDayClick,f=n.onDayMouseEnter,p=n.onDayMouseLeave,m=o.getFullYear(),_=o.getMonth(),v=o.getDate(),E=o.getDay();s&&(e=s.getDate(),t=s.getMonth(),r=s.getFullYear());var j,O,S=b.getDaysInMonth(m,_),P=S-v,I=[],k=(E-u+7)%7;if(c){var T=_-1,C=m;j=v-k,j<1&&(T<0&&(T=11,C=m-1),O=b.getDaysInMonth(C,T),j=O+j)}for(var D=0;D<k;D++){var A=void 0;c&&(A=j+D,A=A>O?A-O:A),I.push(h.default.createElement("div",{key:"spacer-".concat(D),className:"scheduler-picker-month-spacer"},A))}for(var M=0;M<=P;M++){var x=e===v&&t===_&&r===m,R=E-1<0?7:E,N=i.indexOf(R)>-1,L=v===l.getDate()&&_===l.getMonth()&&m===l.getFullYear();I.push(h.default.createElement(w.default,{key:M,date:new Date(m,_,v++,23,59,59),isIgnored:N,isSelected:x,isFocusable:L,onClick:d,onMouseEnter:f,onMouseLeave:p})),E=(E+1)%7}var $=(0,y.default)("scheduler-picker-month",{"scheduler-picker-month--first":c});return h.default.createElement("div",{ref:a,className:$},!c&&h.default.createElement("div",{className:"scheduler-picker-month-header"},g.shortMonths[_]),h.default.createElement("div",{ref:this.days,className:"scheduler-picker-month-days",tabIndex:"-1"},I))}}]),t}(h.default.PureComponent);E.propTypes={date:_.default.instanceOf(Date).isRequired,forwardRef:_.default.func.isRequired,ignoredDays:_.default.array.isRequired,focusedDate:_.default.instanceOf(Date).isRequired,selectedDate:_.default.object,weekStartDay:_.default.number.isRequired,isFirstRowFilled:_.default.bool,onDayClick:_.default.func,onDayMouseEnter:_.default.func,onDayMouseLeave:_.default.func},E.defaultProps={isFirstRowFilled:!1,onDayClick:function(){},onDayMouseEnter:function(){},onDayMouseLeave:function(){}};var j=E;r.default=j},{"../../../utils":1176,"./Day":1012,"./constants":1017,"./utils":1022,classnames:"classnames","prop-types":"prop-types",react:"react"}],1014:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return u(e)||s(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?h(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var g=o(e("react")),b=o(e("prop-types")),w=e("../../../utils"),E=n(e("./constants")),j=n(e("./utils")),O=o(e("./Month")),S=32,P=24,I=function(e){function t(e){var r;c(this,t),r=p(this,m(t).call(this,e)),v(h(r),"handleScrollImpl",function(){var e=r.monthList.current.parentElement.scrollTop;if(clearTimeout(r.scrollEndTimeout),r.scrollEndTimeout=setTimeout(function(){r.scrollEndTimeout=null},150),r.props.onScroll(e),!r.shifted){var t=r.state,n=t.monthsInView,o=t.topMonthIndex,a=r.props,l=a.currentDate,s=a.weekStartDay,u=r.topMonthEl.offsetTop,c=r.topMonthEl.scrollHeight;if(e<=0)return r.props.onTopMonthChange("".concat(E.shortMonths[l.getMonth()]," ").concat(l.getFullYear())),r.lastTop=0,r.shifted=!0,r.setState({monthsInView:[l].concat(i(j.getNextMonths(l,6))),topMonthIndex:0});var d=0;if(e>u+c){var f=new Date(n[o].getTime());f.setDate(1);for(var p,m=!0;m;){var h=f.getTime(),_=f.getFullYear(),y=f.getMonth();r.monthsHeights[h]?p=r.monthsHeights[h]:_<=l.getFullYear()&&y<=l.getMonth()?(p=r.monthList.current.childNodes[0].clientHeight,r.monthsHeights[l.getTime()]=p):(p=j.getWeeksInMonth(_,y,1,s)*P+S,r.monthsHeights[h]=p);var v=r.lastTop+p;v>e?m=!1:(d++,r.lastTop=v,f.setMonth(y+1))}}else if(e<u){var g=new Date(n[o].getTime());g.setMonth(g.getMonth()-1);for(var b,w=!0;w;){var O=g.getTime(),I=g.getFullYear(),k=g.getMonth();r.monthsHeights[O]?b=r.monthsHeights[O]:I<=l.getFullYear()&&k<=l.getMonth()?(b=j.getWeeksInMonth(I,k,l.getDate(),s)*P,r.monthsHeights[l.getTime()]=b):(b=j.getWeeksInMonth(I,k,1,s)*P+S,r.monthsHeights[O]=b);var T=r.lastTop-b;T<e&&(w=!1),d--,r.lastTop=T,g.setMonth(k-1)}}if(d){var C,D=o+d,A=new Date(n[o].getTime());if(A.setDate(1),A.setMonth(A.getMonth()+d),d>0&&D>3){var M=j.getPreviousMonths(l,A,3);C=[].concat(i(M),[A],i(j.getNextMonths(A,3-M.length+3))),r.shifted=!0,D=3,r.setState({topMonthIndex:D,monthsInView:C,isScrolling:!0})}else if(d<0&&D<3){var x;A.getMonth()<=l.getMonth()&&A.getFullYear()<=l.getFullYear()?(A=l,x=[]):x=j.getPreviousMonths(l,A,3),C=[].concat(i(x),[A],i(j.getNextMonths(A,3-x.length+3))),r.shifted=!0,D=3-(3-x.length),r.setState({topMonthIndex:D,monthsInView:C,isScrolling:!0})}else r.setState({topMonthIndex:D,isScrolling:!0});var R=C&&C[D]||n[D];r.props.onTopMonthChange("".concat(E.shortMonths[R.getMonth()]," ").concat(R.getFullYear()))}}}),v(h(r),"handleScroll",(0,w.throttle)(r.handleScrollImpl,1,{trailing:!0})),v(h(r),"handleScrollAction",function(){var e=r.monthList.current.parentElement;switch(r.props.scrollAction){case E.SCROLL_PREV:var t=r.topMonthEl.previousSibling;if(!t)return;e.scrollTop=0===t.offsetTop?0:t.offsetTop+S;break;case E.SCROLL_TOP:e.scrollTop=0;break;case E.SCROLL_NEXT:var n=r.topMonthEl.nextSibling;if(!n)return;e.scrollTop=n.offsetTop+S}}),v(h(r),"handleDayMouseEnter",function(e){r.scrollEndTimeout||r.props.onDayMouseEnter(e)}),v(h(r),"handleDayMouseLeave",function(){r.scrollEndTimeout||r.props.onDayMouseLeave()});var n=new Date(e.currentDate.getTime());return n.setDate(1),r.state={monthsInView:[e.currentDate].concat(i(j.getNextMonths(n,6))),topMonthIndex:0},r.shifted=!1,r.monthList=g.default.createRef(),r.monthsHeights={},r.lastTop=0,r}return _(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this.monthList.current.childNodes,t=this.lastTop;e[0].style.top="".concat(t,"px");for(var r=1;r<e.length;r++)t+=e[r-1].clientHeight,e[r].style.top="".concat(t,"px");var n=this.monthList.current.parentElement,o=n.offsetWidth-n.clientWidth;n.style.marginRight="-".concat(o||20,"px"),n.style.paddingRight="".concat(o?0:20,"px")}},{key:"componentDidUpdate",value:function(e){if(this.shifted){var t=this.monthList.current.childNodes,r=this.lastTop;this.topMonthEl.style.top="".concat(r,"px");for(var n=this.state.topMonthIndex+1;n<t.length;n++)r+=t[n-1].clientHeight,t[n].style.top="".concat(r,"px");r=this.lastTop;for(var o=this.state.topMonthIndex-1;o>=0;o--)r-=t[o].clientHeight,t[o].style.top="".concat(r,"px");this.shifted=!1}this.props.scrollAction&&this.props.scrollAction!==e.scrollAction&&(this.handleScrollAction(),this.props.onScrollActionCompleted())}},{key:"render",value:function(){var e=this,t=this.props,r=t.currentDate,n=t.ignoredDays,o=t.selectedDate,a=t.weekStartDay,i=t.onDayClick,l=new Date(Math.max(o&&o._date,r,this.state.monthsInView[0])),s=this.state.monthsInView.map(function(t,s){return g.default.createElement(O.default,{key:t.getTime(),date:t,forwardRef:function(t){s===e.state.topMonthIndex&&(e.topMonthEl=t)},ignoredDays:n,focusedDate:l,selectedDate:o,weekStartDay:a,isFirstRowFilled:0===s&&r.getTime()===t.getTime(),onDayClick:i,onDayMouseEnter:e.handleDayMouseEnter,onDayMouseLeave:e.handleDayMouseLeave})});return g.default.createElement("div",{className:"scheduler-picker-monthlist-wrapper",onScroll:this.handleScroll},g.default.createElement("div",{className:"scheduler-picker-monthlist",ref:this.monthList},s))}}]),t}(g.default.PureComponent);I.propTypes={currentDate:b.default.instanceOf(Date).isRequired,ignoredDays:b.default.array.isRequired,selectedDate:b.default.object,scrollAction:b.default.string,weekStartDay:b.default.number.isRequired,onDayClick:b.default.func,onDayMouseEnter:b.default.func,onDayMouseLeave:b.default.func,onTopMonthChange:b.default.func,onScrollActionCompleted:b.default.func,onScroll:b.default.func},I.defaultProps={onDayClick:function(){},onDayMouseEnter:function(){},onDayMouseLeave:function(){},onTopMonthChange:function(){}};var k=I;r.default=k},{"../../../utils":1176,"./Month":1013,"./constants":1017,"./utils":1022,"prop-types":"prop-types",react:"react"}],1015:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),_=n(e("classnames")),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./constants")),v=n(e("./TasksDue")),g=e("./utils"),b=function(e){function t(){var e,r;a(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=s(this,(e=u(t)).call.apply(e,[this].concat(o))),p(c(r),"state",{days:r.getDays(r.props.weekStartDay)}),r}return d(t,e),l(t,[{key:"componentDidUpdate",value:function(e){e.weekStartDay!==this.props.weekStartDay&&this.setState({days:this.getDays(this.props.weekStartDay)})}},{key:"getDays",value:function(e){for(var t=[],r=0;r<y.shortDays.length;r++)t.push(y.shortDays[(e+r)%7]);return t}},{key:"render",value:function(){var e,t=this.props,r=t.dueDate,n=t.items,o=t.hasBorder,a=t.collaboratorsByPID,i=t.user;e=r?m.default.createElement(v.default,{date:r,tasks:(0,g.getTasksDue)(n,r,{user:i,collaboratorsByPID:a})}):m.default.createElement("div",{className:"scheduler-picker-monthlistheader-labels"},this.state.days.map(function(e,t){return m.default.createElement("div",{key:t},e)}));var l=(0,_.default)("scheduler-picker-monthlistheader",{"scheduler-picker-monthlistheader--bordered":o});return m.default.createElement("div",{className:l},e)}}]),t}(m.default.PureComponent);b.propTypes={collaboratorsByPID:h.default.object,user:h.default.object,dueDate:h.default.instanceOf(Date),items:h.default.array,weekStartDay:h.default.number.isRequired,hasBorder:h.default.bool},b.defaultProps={items:[]};var w=b;r.default=w},{"./TasksDue":1016,"./constants":1017,"./utils":1022,classnames:"classnames","prop-types":"prop-types",react:"react"}],1016:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("../../../utils/format")),_=n(e("../../../containers/TasksDueBar")),y=window,v=y.DateUtils,g=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props.tasks,t=v.format(this.props.date,!1,{with_time:!1,with_weekday:!0}),r=(0,h.default)(_n("{count} task due","{count} tasks due",e.length),{count:e.length}),n=e.length>0&&8*e.length>200?200/e.length:8;return p.default.createElement("div",{className:"scheduler-picker-tasksdue"},p.default.createElement("div",{className:"scheduler-picker-tasksdue-info"},p.default.createElement("span",{className:"scheduler-picker-tasksdue-info-date"},"".concat(t," \u2022 ")),p.default.createElement("span",{className:"scheduler-picker-tasksdue-info-tasks"},r)),p.default.createElement(_.default,{className:"scheduler-picker-tasksdue-colors",blockWidth:n,blockHeight:3,items:e}))}}]),t}(p.default.PureComponent);g.propTypes={date:m.default.object.isRequired,tasks:m.default.array.isRequired};var b=g;r.default=b},{"../../../containers/TasksDueBar":106,"../../../utils/format":1162,"prop-types":"prop-types",react:"react"}],1017:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SCROLL_NEXT=r.SCROLL_TOP=r.SCROLL_PREV=r.shortMonths2=r.shortMonths=r.daysInMonth=r.shortDays=void 0;var n=[_x("weekday_sunday","S"),_x("weekday_monday","M"),_x("weekday_tuesday","T"),_x("weekday_wednesday","W"),_x("weekday_thursday","T"),_x("weekday_friday","F"),_x("weekday_saturday","S")];r.shortDays=n;var o=[31,28,31,30,31,30,31,31,30,31,30,31];r.daysInMonth=o;var a=[_("Jan"),_("Feb"),_("Mar"),_("Apr"),_x("short_month","May"),_("Jun"),_("Jul"),_("Aug"),_("Sep"),_("Oct"),_("Nov"),_("Dec")];r.shortMonths=a;var i=[_x("mm/yy","Jan"),_x("mm/yy","Feb"),_x("mm/yy","Mar"),_x("mm/yy","Apr"),_x("mm/yy","May"),_x("mm/yy","Jun"),_x("mm/yy","Jul"),_x("mm/yy","Aug"),_x("mm/yy","Sep"),_x("mm/yy","Oct"),_x("mm/yy","Nov"),_x("mm/yy","Dec")];r.shortMonths2=i;r.SCROLL_PREV="SCROLL_PREV";r.SCROLL_TOP="SCROLL_TOP";r.SCROLL_NEXT="SCROLL_NEXT"},{}],1018:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:16,height:16},e,{viewBox:"0 0 24 24"}),a.default.createElement("path",{fill:"gray",fillRule:"evenodd",d:"M12 10.62l4.833-4.834a.976.976 0 1 1 1.381 1.38L13.381 12l4.833 4.833a.976.976 0 0 1-1.38 1.381L12 13.381l-4.833 4.833a.976.976 0 0 1-1.381-1.38L10.619 12 5.786 7.167a.976.976 0 1 1 1.38-1.381L12 10.619z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1019:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},e),a.default.createElement("g",{fill:"none",fillRule:"evenodd"},a.default.createElement("path",{d:"M0 24V0h24v24z"}),a.default.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M13.293 12L9.646 8.354a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 12z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1020:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},e),a.default.createElement("g",{fill:"none",fillRule:"evenodd"},a.default.createElement("path",{d:"M24 0v24H0V0z"}),a.default.createElement("path",{fill:"currentColor",fillRule:"nonzero",d:"M10.707 12l3.647 3.646a.5.5 0 0 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 0 1 .708.708L10.707 12z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1021:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./DatePicker")),o=n.default;r.default=o},{"./DatePicker":1011}],1022:[function(e,t,r){"use strict";function n(e,t,r){var n=new Date(e,0,1);return Math.ceil((Math.round((t-n)/864e5)+n.getDay()+1-r)/7)}Object.defineProperty(r,"__esModule",{value:!0}),r.getTasksDue=r.getWeeksInMonth=r.getDaysInMonth=r.getPreviousMonths=r.getNextMonths=r.getPreviousMonthDate=r.getNextMonthDate=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./constants")),a=e("../../../utils"),i=e("../../../reducers/collaborators"),l=function(e){var t=e.getMonth(),r=new Date(e.getFullYear(),e.getMonth(),1);return r.setMonth(t+1),r};r.getNextMonthDate=l;var s=function(e,t){var r=e.getMonth(),n=new Date(e.getFullYear(),e.getMonth(),1);return n.setMonth(r-1),t&&n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()?t:n};r.getPreviousMonthDate=s;var u=function(e,t){for(var r=[],n=0;n<t;n++)e=l(e),r.push(e);return r};r.getNextMonths=u;var c=function(e,t,r){var n=[];if(t.getTime()===e.getTime())return n;for(var o=0;o<r;o++){if((t=s(t,e))===e)return[e].concat(n);n.unshift(t)}return n};r.getPreviousMonths=c;var d=function(e,t){return 1==t?e%4==0?29:28:o.daysInMonth[t]};r.getDaysInMonth=d;var f=function(e,t,r,o){var a=new Date(e,t,r),i=n(e,a,o);return n(e,new Date(e,t+1,0),o)-i+1};r.getWeeksInMonth=f;var p=function(e,t,r){var n=r.user,o=r.collaboratorsByPID;return t?e.filter(function(e){return!!e.due&&((!(0,i.isShared)({collaborators:{byPID:o}},e.project_id)||!e.responsible_uid||e.responsible_uid===n.id)&&(0,a.isOnSameDate)(e.due,t))}):[]};r.getTasksDue=p},{"../../../reducers/collaborators":1086,"../../../utils":1176,"./constants":1017}],1023:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("../../../models/DateExt")),v=e("../timezoneSelector/constants"),g=e("./utils"),b=n(e("../datePicker/icons/DeleteIcon")),w=n(e("./DueDatePreview")),E=n(e("./icons/TimezoneIcon")),j=n(e("../../Button")),O=e("../../../utils"),S=window,P=S.DateUtils,I=function(e){function t(e){var r;a(this,t),r=s(this,u(t).call(this,e)),p(c(r),"isInitialFocus",!0),p(c(r),"shouldAutoSelectOnFocus",function(){return!r.isInitialFocus||null==r.props.initialInputValue}),p(c(r),"handleFocus",function(){window.requestAnimationFrame(function(){var e=c(r),t=e.input;t&&r.shouldAutoSelectOnFocus()?t.select():t.selectionStart=t.selectionEnd=t.value.length,r.isInitialFocus&&(r.isInitialFocus=!1)})}),p(c(r),"handleInputChange",function(e){var t=e.target.value;if(""===t)return r.handleInputReset(e);var n={dateResult:P.parse(t,r.parsingDate),inputValue:t};r.state.isSubmitted&&(n.isSubmitted=!1),r.state.dateResult||r.props.onActiveChange(!0),r.setState(n)}),p(c(r),"handleInputKeyDown",function(e){var t=(0,O.resolveKeyboardKey)(e.key);"Enter"===t?r.handleSubmit(e):"Escape"===t&&r.handleInputReset(e)}),p(c(r),"handleInputReset",function(e){var t=(0,O.resolveKeyboardKey)(e.key);!r.state.inputValue&&!r.state.dateResult||t&&"Enter"!==t&&"Escape"!==t||(e.nativeEvent.stopImmediatePropagation(),r.setState({dateResult:null,inputValue:"",isSubmitted:!1}),r.input.focus(),r.props.onActiveChange(!1))}),p(c(r),"handleSubmit",function(e){e.preventDefault();var t=r.state,n=t.dateResult,o=t.inputValue,a=t.timezone;if(r.setState({isSubmitted:!0}),!n||n.due_date){var i;if(n)if(n.due_date instanceof y.default)i=a!==n.due_date.timezone?n.due_date.changeTimezone(a):n.due_date;else{var l=n.all_day?{}:{timezone:a};i=y.default.fromDateist(n,l)}else i=o?r.props.selectedDate:null;track("scheduler","enter","type_a_date"),r.props.onDateSelect(i)}}),p(c(r),"handleTimezoneIconClick",function(e){e.stopPropagation();var t=r.state.inputValue||(0,g.getInputValue)(r.props.selectedDate),n=P.parse(t,r.parsingDate);n.due_date=r.props.selectedDate,r.setState({dateResult:n}),r.input.focus(),r.props.onActiveChange(!0)}),p(c(r),"handleTimezoneSelect",function(e){var t;switch(e){case v.FIXED_DATE:t=r.props.userTimezoneInfo.timezone;break;case v.TASK_DATE:t=r.props.selectedDate.timezone;break;case v.FLOATING_DATE:default:t=null}r.setState({timezone:t}),r.input.focus()});var n=e.currentDate,o=e.selectedDate;return r.state={dateResult:null,inputValue:null!=e.initialInputValue?e.initialInputValue:(0,g.getInputValue)(o),timezone:o&&o.timezone,isSubmitted:!1},r.initialDate=e.selectedDate,
r.parsingDate=e.selectedDate?e.selectedDate.inheritDate({year:n.getFullYear(),month:n.getMonth(),day:n.getDate()}):null,r}return d(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;window.requestAnimationFrame(function(){e.input.focus()})}},{key:"componentDidUpdate",value:function(e){var t={};this.initialDate&&(!this.initialDate||this.initialDate.is_recurring)||this.props.selectedDate===e.selectedDate||(t.inputValue=(0,g.getInputValue)(this.props.selectedDate)),this.props.selectedDate!==e.selectedDate&&(t.timezone=this.props.selectedDate.timezone),this.setState(t)}},{key:"render",value:function(){var e=this,t=this.state,r=t.dateResult,n=t.inputValue,o=t.timezone,a=t.isSubmitted,i=t.collaboratorsByPID,l=t.user,s=this.props,u=s.karma,c=s.items,d=s.selectedDate,f=s.userTimezoneInfo;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"scheduler-input"},m.default.createElement("input",{ref:function(t){e.input=t},placeholder:_("Type a due date"),value:n,spellCheck:"false",onChange:this.handleInputChange,onFocus:this.handleFocus,onKeyDown:this.handleInputKeyDown}),r?n.length>0&&m.default.createElement(j.default,{onClick:this.handleInputReset},m.default.createElement(b.default,null)):o&&m.default.createElement(j.default,{onClick:this.handleTimezoneIconClick},m.default.createElement(E.default,null))),r&&m.default.createElement(w.default,{dateResult:r,karma:u,items:c,user:l,collaboratorsByPID:i,selectedDate:d,userTimezoneInfo:f,timezone:o,isSubmitted:a,onClick:this.handleSubmit,onTimezoneSelect:this.handleTimezoneSelect}))}}]),t}(m.default.PureComponent);I.propTypes={currentDate:h.default.instanceOf(Date).isRequired,karma:h.default.number.isRequired,items:h.default.array,collaboratorsByPID:h.default.object,user:h.default.object,selectedDate:h.default.instanceOf(y.default),userTimezoneInfo:h.default.object.isRequired,onActiveChange:h.default.func,onDateSelect:h.default.func,initialInputValue:h.default.string},I.defaultProps={items:[],onActiveChange:function(){},onDateSelect:function(){}};var k=I;r.default=k},{"../../../models/DateExt":152,"../../../utils":1176,"../../Button":648,"../datePicker/icons/DeleteIcon":1018,"../timezoneSelector/constants":1048,"./DueDatePreview":1024,"./icons/TimezoneIcon":1026,"./utils":1028,"prop-types":"prop-types",react:"react"}],1024:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){e.stopPropagation(),E(e)}var r=e.dateResult,n=e.karma,o=e.items,i=void 0===o?[]:o,f=e.userTimezoneInfo,h=e.timezone,y=e.isSubmitted,v=void 0!==y&&y,g=e.user,b=e.collaboratorsByPID,w=e.onClick,E=void 0===w?function(){}:w,j=e.onTimezoneSelect,O=void 0===j?function(){}:j;if(v&&!r.due_date)return a.default.createElement("div",{className:"scheduler-preview scheduler-preview--invalid"},a.default.createElement("div",{className:"scheduler-preview-content"},a.default.createElement("img",{src:"https://d3ptyyxy2at9ui.cloudfront.net/search-8f03c9.svg",width:"24",height:"24"}),a.default.createElement("div",{className:"scheduler-preview-date"},_("No results"),n<m&&a.default.createElement(c.default,{isValid:!1}))));if(r.due_date){var S,P,I,k,T=r.is_recurring?"https://d3ptyyxy2at9ui.cloudfront.net/recurring-32a0c2.svg":"https://d3ptyyxy2at9ui.cloudfront.net/valid-f9e1a8.svg",C=p.format(r.due_date,!1,{with_time:!1,with_weekday:!0}),D=(0,u.getTasksDue)(i,r.due_date,{user:g,collaboratorsByPID:b});return r.all_day||(I=r.due_date instanceof l.default?r.due_date.format({inTimezoneTime:!0,onlyTime:!0}):p.getHourAndMin(r.due_date)),D.length>0?(P=_n("1 task","{n} tasks",D.length),P=(0,s.default)(P,{n:D.length})):P=_("No tasks"),r.is_recurring?(S=r.end_date?p.format(r.end_date,!1,{with_time:!1,with_weekday:!0}):_("Forever"),k=(0,s.default)(_("Repeats {recurring_date_pattern}"),{recurring_date_pattern:r.start_string||r.date_string})):k=P,a.default.createElement("div",{className:"scheduler-preview scheduler-preview--valid"},a.default.createElement("div",{className:"scheduler-preview-content",onClick:t},a.default.createElement("img",{src:T,width:24,height:24}),a.default.createElement("div",{className:"scheduler-preview-date"},a.default.createElement("div",{className:"scheduler-preview-date-info"},a.default.createElement("span",null,C),S&&a.default.createElement("span",null," \u2192 ".concat(S)),a.default.createElement("span",{className:"scheduler-preview-date-info-time"},I)),a.default.createElement("span",{className:"scheduler-preview-date-tasks"},k))),(!r.all_day||h)&&a.default.createElement(d.default,{userTimezoneInfo:f,timezone:h,onSelect:O}),n<m&&a.default.createElement(c.default,null))}return null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("../../../models/DateExt")),s=n(e("../../../utils/format")),u=e("../datePicker/utils"),c=n(e("./HelpText")),d=n(e("../timezoneSelector")),f=window,p=f.DateUtils,m=2500;o.propTypes={dateResult:i.default.object.isRequired,karma:i.default.number.isRequired,items:i.default.array,collaboratorsByPID:i.default.object,user:i.default.object,userTimezoneInfo:i.default.object.isRequired,selectedDate:i.default.instanceOf(l.default),isSubmitted:i.default.bool,onClick:i.default.func,onTimezoneSelect:i.default.func,timezone:i.default.string};var h=o;r.default=h},{"../../../models/DateExt":152,"../../../utils/format":1162,"../datePicker/utils":1022,"../timezoneSelector":1050,"./HelpText":1025,"prop-types":"prop-types",react:"react"}],1025:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e,t,r;return this.props.isValid?(e=_("You can also type in recurring due dates like <b>every day</b>, <b>every 2 weeks</b>, and <b>every last Fri of the month</b>."),t=_("More about recurring due dates"),r="https://support.todoist.com/hc/en-us/articles/360000636289"):(e=_("Did you know you can type in due dates like <b>Jan 15 at 9am</b>, <b>2 months from now</b>, or <b>every Friday</b>?"),t=_("More about due dates"),r="https://support.todoist.com/hc/en-us/articles/205325931"),p.default.createElement("div",{className:"scheduler-preview-help"},p.default.createElement("p",{dangerouslySetInnerHTML:{__html:e}}),p.default.createElement("p",null,p.default.createElement("a",{href:r,rel:"noopener noreferrer",className:"scheduler-preview-help-link",target:"_blank"},t)))}}]),t}(p.default.PureComponent);h.propTypes={isValid:m.default.bool},h.defaultProps={isValid:!0};var y=h;r.default=y},{"prop-types":"prop-types",react:"react"}],1026:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24"},o.default.createElement("path",{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm7 8.7v.3c0 .1 0 .3-.1.4 0 .1-.1.3-.1.4 0 .1 0 .2-.1.3 0 .1-.1.3-.1.4 0 .1 0 .1-.1.2-.1.2-.1.3-.2.5 0 0 0 .1-.1.1-.1.2-.2.3-.3.5v.1c-.1.2-.2.3-.3.5-.1.2-.3.3-.4.5-.2-.7-.9-1.2-1.7-1.2h-.9v-2.6c0-.5-.4-.9-.9-.9H8.5v-1.8h1.8c.5 0 .9-.4.9-.9V7.6H13c1 0 1.8-.8 1.8-1.8v-.3c.3.1.6.3.9.5.6.3 1.1.8 1.6 1.3.4.5.8 1 1.1 1.6 0 0 0 .1.1.1.3.6.5 1.2.6 1.8v.2c0 .3.1.6.1 1 0-.3 0-.6-.1-1 0 .3.1.6.1 1-.2.2-.2.5-.2.7zm0 0v.2c-.1 0 0-.1 0-.2zm-.1.7c0 .1 0 .2-.1.3 0-.1 0-.2.1-.3zm-.2.6c0 .1-.1.2-.1.3 0-.1.1-.2.1-.3zm-.2.6c0 .1-.1.2-.1.3 0-.1 0-.2.1-.3zm-.3.6c-.1.1-.1.2-.2.3.1-.1.1-.2.2-.3zm-.3.6c-.1.1-.1.2-.2.3 0-.1.1-.2.2-.3zm-.4.5c-.1.1-.1.2-.2.3 0-.1.1-.2.2-.3zM14.7 5.5c.3.1.6.3.8.4-.3-.1-.6-.3-.8-.4zM18.3 9c.1.3.2.5.3.8 0-.2-.1-.5-.3-.8zm.4.9c.1.3.2.6.2.9-.1-.3-.1-.6-.2-.9zm-1-1.9c-.2-.2-.3-.5-.5-.7.2.2.4.5.5.7zm.5.8c-.1-.3-.3-.5-.5-.8.3.3.4.6.5.8zm-1.1-1.6c-.2-.2-.4-.4-.7-.6.2.2.5.4.7.6zM15.6 6c.2.1.5.3.7.5-.2-.2-.4-.3-.7-.5zM5 11.2v.8c0-.5.1-1.1.2-1.6l4.2 4.2v.9c0 1 .8 1.8 1.8 1.8V19c-1-.1-2-.5-2.9-1 0 0-.1 0-.1-.1-.1-.1-.2-.2-.3-.2-.1 0-.1-.1-.2-.1-.1-.1-.2-.2-.3-.2l-.2-.2c-.1-.2-.2-.3-.3-.4-.1-.1-.1-.2-.2-.2-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.2-.3-.1-.1-.1-.2-.1-.3 0-.1-.1-.2-.1-.3 0-.1-.1-.2-.1-.3 0-.1-.1-.2-.1-.3 0-.1-.1-.2-.1-.4 0-.1 0-.2-.1-.3 0-.1 0-.3-.1-.4V11.2zm.2-.7c0 .2-.1.3-.1.5 0-.2 0-.3.1-.5zm5.6 8.4h-.3.3zm-.7-.2c-.1 0-.2 0-.2-.1.1.1.2.1.2.1zm-.7-.2c-.1 0-.2-.1-.3-.1.1 0 .2 0 .3.1zm-.7-.3c-.1 0-.2-.1-.3-.2.1.1.2.1.3.2zm-.6-.4c-.1-.1-.2-.1-.3-.2.2.1.3.2.3.2zm-.5-.3c-.1-.1-.2-.1-.2-.2.1 0 .1.1.2.2zm-.9-.9c-.1-.1-.1-.2-.2-.2.1 0 .1.1.2.2zm-.4-.6c-.1-.1-.1-.2-.2-.2.1.1.1.2.2.2zm-.4-.5c0-.1-.1-.2-.1-.3 0 .1.1.2.1.3zm-.3-.6c0-.1-.1-.2-.1-.3.1.1.1.2.1.3zm-.2-.6c0-.1-.1-.2-.1-.3 0 .1.1.2.1.3zm-.2-.7c0-.1 0-.2-.1-.2.1 0 .1.1.1.2zm-.1-.7v-.2c-.1.1 0 .1 0 .2zm1.8 3.9l.2.2-.2-.2z",fill:"#b2b2b2"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react")),a=n;r.default=a},{react:"react"}],1027:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./DueDateInput")),o=n.default;r.default=o},{"./DueDateInput":1023}],1028:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getInputValue=void 0;var n=function(e){return e?e.is_recurring?e.string:e.format({inTimezoneTime:!0}):""};r.getInputValue=n},{}],1029:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=o(e("react")),y=o(e("prop-types")),v=o(e("classnames")),g=n(e("../../../models/DateExt")),b=e("../../../utils"),w=o(e("../../Button")),E=n(e("./constants")),j=o(e("./SuggestionIcon")),O=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=u(this,(e=c(t)).call.apply(e,[this].concat(o))),m(d(r),"isUnmounted",!1),m(d(r),"state",r.getSuggestionInfo(r.props)),m(d(r),"handleClick",function(){var e=r.props,t=e.predictedDate,n=e.type,o=e.onClick;if(n!==E.SUGGESTED||r.state.suggestedDate)return n===E.NO_DATE?o(n,null):n===E.SMART_SCHEDULER?o(n):n===E.POSTPONE?o(n,t):void o(n,r.state.suggestedDate)}),r}return f(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){e.type===this.props.type&&e.ignoredDays===this.props.ignoredDays||this.setState(this.getSuggestionInfo(e))}},{key:"componentWillUnmount",value:function(){this.isUnmounted=!0}},{key:"getSuggestionInfo",value:function(e){var t,r,n,o,a,i,l=this,s=e.currentDate,u=e.ignoredDays,c=e.nextWeekDay,d=e.predictedDate,f=e.selectedDate,p=e.type,m=e.weekStartDay,h=f&&f.timezone?(0,g.getOffsetDate)(s,-s.getTimezoneOffset(),-f.timezone_offset):new Date(s.getTime());switch(h.setHours(23,59,59),p){case E.TODAY:i=_("Today");break;case E.TOMORROW:i=_("Tomorrow"),h.setDate(h.getDate()+1);break;case E.NEXT_WEEK:i=_("Next week"),o=m-(0===h.getDay()?7:h.getDay()),o<=0&&(o+=7),t=c-m,t<0&&(t+=7),n=o+t,h.setDate(h.getDate()+n);break;case E.NEXT_WEEKEND:i=_("Next weekend"),a=u.reduce(function(e,t){return Math.min(e,t)}),r=a-h.getDay(),r<=0&&(r+=7),h.setDate(h.getDate()+r);break;case E.IN_THE_MORNING:i=_("In the morning"),h.setDate(h.getDate()+1),h.setHours(9,0,0);break;case E.SUGGESTED:d.then(function(e){l.isUnmounted||(e.setSeconds(59),l.setState({suggestedDate:e,suggestionLabel:_x("scheduler_suggested_date","Suggested")}))}).catch(function(){l.isUnmounted||l.setState({hasError:!0,suggestionLabel:_x("scheduler_suggested_date_error","Suggested error")})}),h=null,i=_x("scheduler_suggested_date_loading","Suggesting...");break;case E.POSTPONE:d instanceof Array?h=null:(h.setSeconds(59),h=d),i=_("Postpone");break;case E.SMART_SCHEDULER:h=null,i=_("Open Smart Schedule");break;case E.NO_DATE:h=null,i=_("No Date")}return{hasError:void 0,suggestedDate:h,suggestionLabel:i}}},{key:"render",value:function(){var e=this.state,t=e.hasError,r=e.suggestedDate,n=e.suggestionLabel,o=this.props.type,a=r&&r.getDay(),i=null===r&&o===E.SUGGESTED,l=(0,v.default)("scheduler-suggestions-item",{"scheduler-suggestions-item--disabled":i});return h.default.createElement(w.default,{className:l,onClick:this.handleClick,"data-track":"scheduler|".concat(E.trackingActions[o]),disabled:i},h.default.createElement(j.default,{hasError:t,date:r,type:o}),h.default.createElement("div",{className:"scheduler-suggestions-item-label"},n),(0,b.isNumber)(a)&&h.default.createElement("div",{className:"scheduler-suggestions-item-weekday"},E.shortWeekdays[a]))}}]),t}(h.default.PureComponent);O.propTypes={currentDate:y.default.object.isRequired,ignoredDays:y.default.array.isRequired,nextWeekDay:y.default.number.isRequired,predictedDate:y.default.oneOfType([y.default.instanceOf(Promise),y.default.instanceOf(g.default),y.default.arrayOf(y.default.instanceOf(g.default))]),selectedDate:y.default.instanceOf(g.default),type:y.default.string.isRequired,weekStartDay:y.default.number.isRequired,onClick:y.default.func.isRequired},O.defaultProps={predictedDate:Promise.resolve(),onClick:function(){}};var S=O;r.default=S},{"../../../models/DateExt":152,"../../../utils":1176,"../../Button":648,"./SuggestionIcon":1030,"./constants":1032,classnames:"classnames","prop-types":"prop-types",react:"react"}],1030:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t,r,n=e.date,o=e.hasError,i=void 0!==o&&o,y=e.type;switch(y){case l.TODAY:t=s.default,r=n.getDate();break;case l.TOMORROW:t=u.default;break;case l.NEXT_WEEK:t=d.default;break;case l.NEXT_WEEKEND:t=f.default;break;case l.NO_DATE:t=p.default;break;case l.IN_THE_MORNING:t=c.default;break;case l.SMART_SCHEDULER:case l.SUGGESTED:t=i?_.default:h.default,r=n&&n.getDate();break;case l.POSTPONE:t=m.default}var v=y===l.SUGGESTED?"scheduler-suggestions-item-icon--suggested":"";return a.default.createElement("div",{className:"scheduler-suggestions-item-icon"},a.default.createElement(t,{"aria-hidden":"true",focusable:"false"}),r&&a.default.createElement("span",{className:v},r))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./constants")),s=n(e("./icons/Today")),u=n(e("./icons/Tomorrow")),c=n(e("./icons/Morning")),d=n(e("./icons/NextWeek")),f=n(e("./icons/NextWeekend")),p=n(e("./icons/NoDate")),m=n(e("./icons/Postpone")),h=n(e("./icons/Suggested")),_=n(e("./icons/SuggestedError"));o.propTypes={date:i.default.object,hasError:i.default.bool,type:i.default.string.isRequired};var y=o;r.default=y},{"./constants":1032,"./icons/Morning":1033,"./icons/NextWeek":1034,"./icons/NextWeekend":1035,"./icons/NoDate":1036,"./icons/Postpone":1037,"./icons/Suggested":1038,"./icons/SuggestedError":1039,"./icons/Today":1040,"./icons/Tomorrow":1041,"prop-types":"prop-types",react:"react"}],1031:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var p=n(e("react")),m=n(e("prop-types")),h=n(e("../../../models/DateExt")),_=n(e("./Suggestion")),y=function(e){function t(){return a(this,t),s(this,c(t).apply(this,arguments))}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.currentDate,r=e.ignoredDays,n=e.nextWeekDay,o=e.predictedDate,a=e.selectedDate,i=e.types,l=e.weekStartDay,s=e.onSuggestionSelect;return p.default.createElement("div",{className:"scheduler-suggestions"},i.map(function(e){return p.default.createElement(_.default,{key:e,type:e,currentDate:t,ignoredDays:r,nextWeekDay:n,predictedDate:o,selectedDate:a,weekStartDay:l,onClick:s})}))}}]),t}(p.default.PureComponent);y.propTypes={currentDate:m.default.object.isRequired,types:m.default.array,ignoredDays:m.default.array.isRequired,nextWeekDay:m.default.number.isRequired,predictedDate:m.default.oneOfType([m.default.instanceOf(Promise),m.default.instanceOf(h.default),m.default.arrayOf(m.default.instanceOf(h.default))]),selectedDate:m.default.instanceOf(h.default),tabIndex:m.default.string,weekStartDay:m.default.number.isRequired,onSuggestionSelect:m.default.func},y.defaultProps={types:[],onSuggestionSelect:function(){}};var v=y;r.default=v},{"../../../models/DateExt":152,"./Suggestion":1029,"prop-types":"prop-types",react:"react"}],1032:[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.shortWeekdays=r.trackingActions=r.NO_DATE=r.SMART_SCHEDULER=r.POSTPONE=r.SUGGESTED=r.IN_THE_MORNING=r.NEXT_WEEKEND=r.NEXT_WEEK=r.TOMORROW=r.TODAY=void 0;var o;r.TODAY="today";r.TOMORROW="tomorrow";r.NEXT_WEEK="nextWeek";r.NEXT_WEEKEND="nextWeekend";r.IN_THE_MORNING="inTheMorning";r.SUGGESTED="suggested";r.POSTPONE="postpone";r.SMART_SCHEDULER="smartScheduler";r.NO_DATE="noDate";var a=(o={},n(o,"today","date_shortcut_today"),n(o,"tomorrow","date_shortcut_tomorrow"),n(o,"nextWeek","date_shortcut_nextweek"),n(o,"nextWeekend","date_shortcut_nextweekend"),n(o,"inTheMorning","date_shortcut_morning"),n(o,"suggested","date_shortcut_suggested"),n(o,"postpone","date_shortcut_postpone"),n(o,"smartScheduler","date_shortcut_smartscheduler"),n(o,"noDate","date_shortcut_nodate"),o);r.trackingActions=a;var i=[_("Sun"),_("Mon"),_("Tue"),_("Wed"),_("Thu"),_("Fri"),_("Sat")];r.shortWeekdays=i},{}],1033:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("path",{fill:"gray",fillRule:"evenodd",d:"M8.535 14a4 4 0 1 1 6.93 0h-6.93zm.02-10.315a.5.5 0 0 1 .654.27l.765 1.848a.5.5 0 1 1-.923.383l-.766-1.848a.5.5 0 0 1 .27-.653zm6.89 0a.5.5 0 0 1 .27.653l-.766 1.848a.5.5 0 0 1-.923-.383l.765-1.847a.5.5 0 0 1 .653-.27zm4.87 4.87a.5.5 0 0 1-.27.654l-1.848.765a.5.5 0 0 1-.383-.923l1.848-.766a.5.5 0 0 1 .653.27zm-16.63 0a.5.5 0 0 1 .653-.27l1.848.766a.5.5 0 0 1-.383.923L3.956 9.21a.5.5 0 0 1-.27-.653zM9.5 17h5a.5.5 0 1 1 0 1h-5a.5.5 0 1 1 0-1zm-4-2h13a.5.5 0 1 1 0 1h-13a.5.5 0 1 1 0-1z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1034:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("g",{fill:"gray",fillRule:"evenodd"},a.default.createElement("rect",{width:2,height:1,x:8,y:13,rx:.5,strokeWidth:0}),a.default.createElement("path",{d:"M20 8v9.436c0 .892-.093 1.215-.267 1.54a1.81 1.81 0 0 1-.756.757c-.326.174-.65.267-1.54.267H6.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54V6a2 2 0 0 1 2-2h1V2.5a.5.5 0 0 1 1 0V4h8V2.5a.5.5 0 1 1 1 0V4h1a2 2 0 0 1 2 2v2zM6.564 8c-.662 0-.864.039-1.07.149a.818.818 0 0 0-.345.346C5.039 8.7 5 8.902 5 9.564v7.872c0 .662.039.864.149 1.07a.818.818 0 0 0 .346.345c.205.11.407.149 1.069.149h10.872c.662 0 .864-.039 1.07-.149a.818.818 0 0 0 .345-.346c.11-.205.149-.407.149-1.069V9.564c0-.662-.039-.864-.149-1.07a.818.818 0 0 0-.346-.345C18.3 8.039 18.098 8 17.436 8H6.564z"}),a.default.createElement("path",{d:"M15.043 13l-1.897-1.896a.5.5 0 0 1 .708-.708l2.828 2.829a.498.498 0 0 1 0 .707l-2.828 2.828a.5.5 0 1 1-.708-.707L15.2 14h-3.7a.5.5 0 1 1 0-1h3.543z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1035:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("g",{fill:"gray",fillRule:"evenodd"},a.default.createElement("path",{d:"M17 15v-3a2 2 0 1 1 4 0v4.436c0 .892-.093 1.215-.267 1.54a1.81 1.81 0 0 1-.756.757c-.326.174-.65.267-1.54.267H5.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54V12a2 2 0 1 1 4 0v3h10z"}),a.default.createElement("path",{d:"M19 9a3 3 0 0 0-3 3v2H8v-2a3 3 0 0 0-3-3v-.436c0-.892.093-1.215.267-1.54a1.81 1.81 0 0 1 .756-.757c.326-.174.65-.267 1.54-.267h8.873c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54V9z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1036:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("path",{fill:"gray",d:"M17.657 17.657A8 8 0 1 1 6.343 6.343a8 8 0 0 1 11.314 11.314zm-.707-.707a7 7 0 1 0-9.9-9.9 7 7 0 0 0 9.9 9.9zm-8.096-1.096a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708.708l-7 7z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1037:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("path",{fill:"gray",d:"M18.121 4l-1.939-1.94a.5.5 0 0 1 .707-.706l2.829 2.828a.5.5 0 0 1 0 .707l-2.829 2.829a.5.5 0 0 1-.707-.708L18.192 5H12a7 7 0 1 0 6.929 8h1.009A8 8 0 1 1 12 4h6.121z"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1038:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("g",{fill:"gray",fillRule:"evenodd"},a.default.createElement("path",{d:"M11.488 5.018a7 7 0 1 0 7.495 7.47h1.002a8 8 0 1 1-8.497-8.472v1.002zm7.494 6.47a6.995 6.995 0 0 0-3.072-5.295l.502-.868a7.995 7.995 0 0 1 3.572 6.163h-1.002zm-6.494-6.471V4.015a7.954 7.954 0 0 1 3.057.811l-.501.869a6.958 6.958 0 0 0-2.556-.678z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1039:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("g",{fill:"gray",fillRule:"evenodd"},a.default.createElement("path",{d:"M19 12a6.993 6.993 0 0 0-3.09-5.807l.502-.868A7.993 7.993 0 0 1 20 12h-1zm-7-7V4c1.273 0 2.477.297 3.545.826l-.501.869A6.972 6.972 0 0 0 12 5zm-1 .07A7.002 7.002 0 0 0 12 19a7.002 7.002 0 0 0 6.93-6h1.008A8.001 8.001 0 0 1 4 12a8.001 8.001 0 0 1 7-7.938V5.07z"}),a.default.createElement("path",{d:"M10.88 7.41h2.345l-.195 5.923h-1.954L10.88 7.41zm-.073 7.914c0-.709.458-1.118 1.246-1.118s1.252.41 1.252 1.118c0 .702-.464 1.11-1.252 1.11s-1.246-.408-1.246-1.11z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1040:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e,{viewBox:"0 0 24 24"}),a.default.createElement("g",{fill:"gray",fillRule:"evenodd"},a.default.createElement("path",{d:"M20 8v9.436c0 .892-.093 1.215-.267 1.54a1.81 1.81 0 0 1-.756.757c-.326.174-.65.267-1.54.267H6.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 0 1-.757-.756c-.174-.326-.267-.65-.267-1.54V6a2 2 0 0 1 2-2h1V2.5a.5.5 0 0 1 1 0V4h8V2.5a.5.5 0 1 1 1 0V4h1a2 2 0 0 1 2 2v2zM6.564 8c-.662 0-.864.039-1.07.149a.818.818 0 0 0-.345.346C5.039 8.7 5 8.902 5 9.564v7.872c0 .662.039.864.149 1.07a.818.818 0 0 0 .346.345c.205.11.407.149 1.069.149h10.872c.662 0 .864-.039 1.07-.149a.818.818 0 0 0 .345-.346c.11-.205.149-.407.149-1.069V9.564c0-.662-.039-.864-.149-1.07a.818.818 0 0 0-.346-.345C18.3 8.039 18.098 8 17.436 8H6.564z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1041:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("g",{fill:"none",fillRule:"evenodd"},a.default.createElement("rect",{width:2e3,height:1952,rx:8,transform:"translate(-520 -902)"}),a.default.createElement("path",{fill:"gray",d:"M12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zM8.556 3.685a.5.5 0 0 1 .653.27l.765 1.848a.5.5 0 1 1-.923.383l-.766-1.848a.5.5 0 0 1 .27-.653zm6.888 0a.5.5 0 0 1 .27.653l-.765 1.848a.5.5 0 0 1-.923-.383l.765-1.847a.5.5 0 0 1 .653-.27zm4.87 4.87a.5.5 0 0 1-.27.654l-1.847.765a.5.5 0 0 1-.383-.923l1.848-.766a.5.5 0 0 1 .653.27zm0 6.89a.5.5 0 0 1-.652.27l-1.848-.766a.5.5 0 0 1 .383-.923l1.847.765a.5.5 0 0 1 .27.653zm-4.87 4.87a.5.5 0 0 1-.653-.27l-.765-1.848a.5.5 0 0 1 .923-.383l.766 1.848a.5.5 0 0 1-.27.653zm-6.888 0a.5.5 0 0 1-.27-.653l.765-1.848a.5.5 0 0 1 .923.383l-.765 1.847a.5.5 0 0 1-.653.27zm-4.87-4.87a.5.5 0 0 1 .27-.654l1.847-.765a.5.5 0 0 1 .383.923l-1.848.766a.5.5 0 0 1-.653-.27zm0-6.89a.5.5 0 0 1 .652-.27l1.848.766a.5.5 0 0 1-.383.923L3.956 9.21a.5.5 0 0 1-.27-.653z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1042:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./Suggestions")),o=n.default;r.default=o},{"./Suggestions":1031}],1043:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}
function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var m=n(e("react")),h=n(e("prop-types")),y=n(e("@doist/reactist/lib/Tooltip")),v=e("../../../utils"),g=n(e("../../../models/DateExt")),b=n(e("../timezoneSelector")),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../timezoneSelector/constants")),E=n(e("../../Button")),j=n(e("./icons/Invalid")),O=window,S=O.DateUtils,P=function(e){function t(e){var r;a(this,t),r=s(this,u(t).call(this,e)),p(c(r),"handleInputChange",function(e){var t=e.target.value,n=r.props.selectedDate,o=S.parse(t),a=o.due_date,i=o.has_only_time;return""===t?(clearTimeout(r.errorTimeout),r.errorTimeout=null,r.setState({timeInputValue:t,selectedTime:null,isAddButtonDisabled:!(n&&n.with_time),isErrorShown:!1})):a&&i?(clearTimeout(r.errorTimeout),r.errorTimeout=null,void r.setState({timeInputValue:t,selectedTime:a,isAddButtonDisabled:!1,isErrorShown:!1})):(r.errorTimeout||(r.errorTimeout=setTimeout(function(){r.setState({isErrorShown:!0})},500)),r.setState({timeInputValue:t,isAddButtonDisabled:!0}))}),p(c(r),"handleKeyDown",function(e){"Escape"===(0,v.resolveKeyboardKey)(e.key)&&r.props.onCancel(e)}),p(c(r),"handleSubmit",function(e){e.preventDefault();var t=r.state,n=t.selectedTime,o=t.timezone;t.isAddButtonDisabled||r.props.onSelect(e,n,o)}),p(c(r),"handleTimezoneSelect",function(e){var t,n=r.props,o=n.selectedDate,a=n.userTimezoneInfo;switch(e){case w.FIXED_DATE:t=a.timezone;break;case w.TASK_DATE:t=o.timezone;break;case w.FLOATING_DATE:default:t=null}r.setState({timezone:t})});var n=r.props.selectedDate;if(n&&n.with_time){var o=new Date;o.setHours(n.getTimezoneHours(),n.getTimezoneMinutes(),n.getTimezoneSeconds()),r.state={selectedTime:o,timezone:n.timezone,timeInputValue:n.format({inTimezoneTime:!0,onlyTime:!0}),iisAddButtonDisabled:!1,isErrorShown:!1}}else r.state={selectedTime:null,timezone:null,timeInputValue:"",iisAddButtonDisabled:!0,isErrorShown:!1};return r}return d(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.selectedDate,r=e.userTimezoneInfo,n=e.timeFormat,o=e.onCancel,a=this.state,i=a.timeInputValue,l=a.timezone,s=a.isAddButtonDisabled,u=a.isErrorShown,c=t&&t.with_time;return m.default.createElement("form",{className:"scheduler-timepicker",onSubmit:this.handleSubmit,onKeyDown:this.handleKeyDown},m.default.createElement("div",{className:"scheduler-timepicker-controls"},m.default.createElement("div",{className:"scheduler-timepicker-input"},m.default.createElement("div",{className:"scheduler-timepicker-input-label"},m.default.createElement("label",{htmlFor:"scheduler-timepicker-input-element"},_("Time")),u&&m.default.createElement(y.default,{delayShow:0,text:m.default.createElement(m.default.Fragment,null,m.default.createElement("div",null,_("Invalid Time")),m.default.createElement("div",null,_("Use 13:00 or 1PM format"))),position:"bottom",tooltipClassName:"scheduler-timepicker-tooltip"},m.default.createElement(j.default,{className:"tip_item"}))),m.default.createElement("div",{className:"scheduler-timepicker-input-controls"},m.default.createElement("input",{id:"scheduler-timepicker-input-element",placeholder:n?_("eg, 2pm"):_("eg, 14:00"),value:i,onChange:this.handleInputChange}))),m.default.createElement(b.default,{timezone:l,userTimezoneInfo:r,onSelect:this.handleTimezoneSelect})),m.default.createElement("div",{className:"scheduler-timepicker-actions"},m.default.createElement(E.default,{type:"submit",className:"scheduler-timepicker-actions-add",disabled:s},c?_x("scheduler_change_time_button","Change"):_x("scheduler_add_time_button","Add")),m.default.createElement(E.default,{onClick:o},_("Cancel"))))}}]),t}(m.default.PureComponent);P.propTypes={selectedDate:h.default.instanceOf(g.default),userTimezoneInfo:h.default.object.isRequired,timeFormat:h.default.number,onCancel:h.default.func,onSelect:h.default.func},P.defaultProps={timeFormat:0,onCancel:function(){},onSelect:function(){}};var I=P;r.default=I},{"../../../models/DateExt":152,"../../../utils":1176,"../../Button":648,"../timezoneSelector":1050,"../timezoneSelector/constants":1048,"./icons/Invalid":1044,"@doist/reactist/lib/Tooltip":177,"prop-types":"prop-types",react:"react"}],1044:[function(e,t,r){"use strict";function n(){return o.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},o.default.createElement("g",{fill:"#979797",fillRule:"evenodd"},o.default.createElement("path",{d:"M12 9a1 1 0 0 1 1 1v4a1 1 0 0 1-2 0v-4a1 1 0 0 1 1-1zm0 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}),o.default.createElement("path",{d:"M13.73 4.96L20.75 17A2 2 0 0 1 19.02 20H4.98a2 2 0 0 1-1.73-3l7.02-12.04a2 2 0 0 1 3.46 0zm-.7.55a1.2 1.2 0 0 0-2.07 0L4.15 17.2A1.2 1.2 0 0 0 5.18 19h13.64a1.2 1.2 0 0 0 1.03-1.8L13.04 5.5z"})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1045:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./TimePicker")),o=n.default;r.default=o},{"./TimePicker":1043}],1046:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){function t(e){e.stopPropagation(),w(!1)}function r(e){w(!1),l(e)}var n=e.timezone,a=e.userTimezoneInfo,i=e.onSelect,l=void 0===i?function(){}:i,s=u.default.useRef(),c=u.default.useState(!1),g=o(c,2),b=g[0],w=g[1];return u.default.createElement("div",{className:"scheduler-timezone"},u.default.createElement(p.default,{ref:s,className:"scheduler-timezone-label",onClick:function(){return w(!b)},"aria-haspopup":"true","aria-expanded":b},u.default.createElement("span",null,n||_("Time Zone")),u.default.createElement(h.default,null)),b&&u.default.createElement(f.default,{anchor:s.current,anchorGap:2,className:"dialog-timezone",contentClassName:"scheduler-timezone-list",width:v,onHide:t},u.default.createElement(d.default,null,u.default.createElement(y.default,{value:m.FLOATING_DATE,isSelected:null===n,onClick:r},u.default.createElement("div",{className:"scheduler-timezone-item-header"},_("Floating Time")),u.default.createElement("div",{className:"scheduler-timezone-item-description"},_("Due time stays the same across time zones"))),u.default.createElement(y.default,{value:m.FIXED_DATE,isSelected:n===a.timezone,onClick:r},u.default.createElement("div",{className:"scheduler-timezone-item-header"},a.timezone),u.default.createElement("div",{className:"scheduler-timezone-item-description"},_("Your current time zone"))),n&&n!==a.timezone&&u.default.createElement(y.default,{value:m.TASK_DATE,isSelected:n&&n!==a.timezone,onClick:r},u.default.createElement("div",{className:"scheduler-timezone-item-header"},n),u.default.createElement("div",{className:"scheduler-timezone-item-description"},_("This task's current time zone"))),u.default.createElement("div",{className:"scheduler-timezone-help"},u.default.createElement("a",{href:"https://get.todoist.help/hc/articles/360001450039",target:"_blank",rel:"noopener noreferrer"},_("Time Zones Help"))))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("react")),c=n(e("prop-types")),d=n(e("react-focus-lock")),f=n(e("../../Dialog")),p=n(e("../../Button")),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./constants")),h=n(e("./icons/RightArrow")),y=n(e("./TimezoneSelectorItem")),v=225;s.propTypes={userTimezoneInfo:c.default.object.isRequired,timezone:c.default.string,onSelect:c.default.func};var g=s;r.default=g},{"../../Button":648,"../../Dialog":649,"./TimezoneSelectorItem":1047,"./constants":1048,"./icons/RightArrow":1049,"prop-types":"prop-types",react:"react","react-focus-lock":"react-focus-lock"}],1047:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){e.nativeEvent.stopImmediatePropagation(),c(r)}var r=e.value,n=e.isSelected,o=void 0!==n&&n,i=e.children,u=e.onClick,c=void 0===u?function(){}:u,d=(0,l.default)("scheduler-timezone-item",{"scheduler-timepicker-item--selected":o});return a.default.createElement(s.default,{className:d,onClick:t},i)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("../../Button"));o.propTypes={value:i.default.string.isRequired,isSelected:i.default.bool,onClick:i.default.func,children:i.default.node};var u=o;r.default=u},{"../../Button":648,classnames:"classnames","prop-types":"prop-types",react:"react"}],1048:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TASK_DATE=r.FIXED_DATE=r.FLOATING_DATE=void 0;r.FLOATING_DATE="floating";r.FIXED_DATE="fixed";r.TASK_DATE="task"},{}],1049:[function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e){return a.default.createElement("svg",n({width:24,height:24},e),a.default.createElement("path",{d:"M14.243 12L9.646 7.404a.5.5 0 1 1 .708-.707l4.95 4.95a.5.5 0 0 1 0 .707l-4.95 4.95a.5.5 0 0 1-.708-.708L14.243 12z",fill:"currentColor",fillRule:"evenodd"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("react"))},{react:"react"}],1050:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./TimezoneSelector")),o=n.default;r.default=o},{"./TimezoneSelector":1046}],1051:[function(e,t,r){"use strict";function n(t,r){if(r===a.SUGGESTED){var n=e("../../models/SmartSchedule");return new Promise(function(e,r){n.predictItemDuedate(t[0],function(t,n){n&&r(),e(t)})})}if(r===a.POSTPONE)return 1===t.length?t[0].due.nextRecurrence()[0]:t.map(function(e){return e.due.nextRecurrence()[0]})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0,r=!0,n=e[0]&&e[0].due;return e.forEach(function(e){(!e.due||e.due&&!e.due.is_recurring)&&(t=!1),e.due!==n&&(r=!1)}),t?a.POSTPONE:r?a.SUGGESTED:a.SMART_SCHEDULER}Object.defineProperty(r,"__esModule",{value:!0}),r.fetchPredictedDate=n,r.getPredictedDateType=o;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./suggestions/constants"))},{"../../models/SmartSchedule":164,"./suggestions/constants":1032}],1052:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h=n(e("react")),_=n(e("prop-types")),y=e("react-transition-group"),v=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=u(this,(e=c(t)).call.apply(e,[this].concat(o))),m(d(r),"overlay",h.default.createRef()),m(d(r),"handleClickOutside",function(){r.setState({on:!1})}),m(d(r),"handleTransitionExited",function(){r.props.onExited()}),r}return f(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.transitionDuration,n=t.isShown,o=t.onClickOutside,i={transition:"all ".concat(r,"ms cubic-bezier(0, 0, 0.2, 1) 0ms")},l={entered:{opacity:1,right:"0px"}},s={entered:{opacity:1}},u={in:n,appear:!0,timeout:r,onExited:this.handleTransitionExited};return h.default.createElement(y.Transition,u,function(t){var r=a({},i,l[t]),n=a({},i,s[t]);return h.default.createElement("div",{className:"side_panel"},h.default.createElement("div",{ref:e.overlay,className:"side_panel_overlay",onClick:o,style:n}),h.default.createElement("div",{className:"side_panel_content_wrapper",style:r},h.default.createElement("div",{className:"side_panel_content"},e.props.children)))})}}]),t}(h.default.Component);m(v,"propTypes",{transitionDuration:_.default.number,isShown:_.default.bool,onClickOutside:_.default.func,onExited:_.default.func.isRequired}),m(v,"defaultProps",{transitionDuration:200,isShown:!0,onClickOutside:function(){}});var g=v;r.default=g},{"prop-types":"prop-types",react:"react","react-transition-group":"react-transition-group"}],1053:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){var t=e.reduce(function(e,t,r){return r+1!==t.item_order&&(e[t.id]=r+1),e},{});m(t)}function r(e){return a.default.createElement("li",{className:"FilterListItemSortable dragLabel",key:e.id,onClick:function(){return y(e)}},a.default.createElement(s.default,{filter:e,count:f[e.name]||0}))}function n(e){var t=e.item,r=e.connectDragSource,n=e.isDragging,i=e.style,c=e.forwardedRef;return a.default.createElement("li",{style:i,ref:c,className:(0,l.default)("FilterListItemSortable",{is_dragging:n}),key:t.id,onClick:function(){return y(t)}},r(a.default.createElement("div",{className:"dnd_handle"},a.default.createElement(u.DragAndDropIcon,null))),a.default.createElement(s.default,{filter:t,count:f[t.name]||0,isSelected:p===t.id,onFilterEdit:h,onFilterDelete:o?v:null,onFilterFavorite:o?g:null}))}var o=e.isPremium,i=e.filters,c=e.filterCount,f=void 0===c?{}:c,p=e.selectedFilterID,m=e.onReorderFilters,h=e.onFilterEdit,y=e.onFilterSelect,v=e.onFilterDelete,g=e.onFilterFavorite;return 0===i.length?a.default.createElement("ul",{id:"filters_list",className:"items generic_left_list"},a.default.createElement("li",{className:"empty"},_("Your list of filters will show up here."))):a.default.createElement(d,{selectedFilterID:p,onChange:t,renderListItem:n,renderDragLayer:r,items:i},function(e){return a.default.createElement("ul",{id:"filters_list",className:"items generic_left_list"},e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("./FilterWithMenu")),u=e("../icons"),c=e("../sortable/Sortable"),d=(0,c.createSortableClass)("BottomFiltersList");o.propTypes={isPremium:i.default.bool.isRequired,filters:i.default.array.isRequired,filterCount:i.default.object,selectedFilterID:i.default.oneOfType([i.default.number,i.default.string]),onReorderFilters:i.default.func,onFilterEdit:i.default.func.isRequired,onFilterSelect:i.default.func.isRequired,onFilterDelete:i.default.func.isRequired,onFilterFavorite:i.default.func.isRequired};var f=o;r.default=f},{"../icons":842,"../sortable/Sortable":1062,"./FilterWithMenu":1054,classnames:"classnames","prop-types":"prop-types",react:"react"}],1054:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.filter,r=e.count,n=void 0===r?t.count||0:r,i=e.isSelected,l=void 0!==i&&i,d=e.onFilterEdit,p=e.onFilterDelete,b=e.onFilterFavorite,w=a(e,["filter","count","isSelected","onFilterEdit","onFilterDelete","onFilterFavorite"]),E=(0,g.usePopoverMenu)(),j=(0,v.useConfirmDialog)({confirmLabel:_("Delete"),onConfirm:function(){return p(t)},htmlMessage:(0,f.default)(_("Are you sure you want to delete {item_name}?"),{item_name:"<b>".concat(s(t),"</b>")})}),O=null!=d,S=null!=p,P=!t.is_favorite&&null!=b,I=S&&(O||P),k=!O&&!S&&!P;return c.default.createElement(c.default.Fragment,null,c.default.createElement(m.default,o({color:t.color,leftIcon:c.default.createElement(y.FilterIcon,null),isSelected:l,onMenuClick:E.openOnAnchor,onContextMenu:E.openOnContext},w),c.default.createElement("span",{dangerouslySetInnerHTML:{__html:u(t)}}),n>0&&c.default.createElement("div",{className:"counter_count"},n)),E.isOpen&&!k?c.default.createElement(g.Popover,E.props,c.default.createElement(h.MenuList,{className:"item_menu_list"},O&&c.default.createElement(h.IconMenuItem,{text:_("Edit filter"),icon:c.default.createElement(y.EditIcon,null),onClick:E.close(function(){return d(t)}),"data-track":"filters|menu_edit"}),P&&c.default.createElement(h.IconMenuItem,{text:_("Add to favorites"),icon:c.default.createElement(y.HeartIcon,null),onClick:E.close(function(){return b(t)}),"data-track":"filters|menu_add_to_favorites"}),I&&c.default.createElement(h.MenuSeparator,null),S&&c.default.createElement(h.IconMenuItem,{text:_("Delete filter"),icon:c.default.createElement(y.DeleteIcon,null),onClick:E.close(j),"data-track":"filters|menu_delete"}))):null)}function s(e){return p.default.formatSimple(e.name,{only_text:!0,as_html:!1,with_link:!1})}function u(e){return p.default.formatSimple(e.name,{only_text:!1,as_html:!0,with_links:!1,cache_prefix:"flist_"})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var c=n(e("react")),d=n(e("prop-types")),f=n(e("../../utils/format")),p=n(e("../../components/formatter/Formatter.js")),m=n(e("../ListItem")),h=e("../menu_list"),y=e("../icons"),v=e("../confirm_dialog"),g=e("../popover");l.propTypes={filter:d.default.object.isRequired,count:d.default.number,isSelected:d.default.bool,onLabelEdit:d.default.func,onLabelDelete:d.default.func,onLabelFavorite:d.default.func}},{"../../components/formatter/Formatter.js":22,"../../utils/format":1162,"../ListItem":653,"../confirm_dialog":680,"../icons":842,"../menu_list":907,"../popover":933,"prop-types":"prop-types",react:"react"}],1055:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){function t(e){var t=s.reduce(function(e,t){return e[t.id]=t.item_order+1,e},{});b(t),w(o({},e,{item_order:1}))}function r(e){if(!i)return void f.showFilter();(0,h.openModal)(function(r){return l.default.createElement(p.default,{filter:e,onCreate:t,onUpdate:E,onClose:r})})}var n=e.expanded,a=e.onTogglePanel,i=e.isPremium,s=e.filters,v=e.filterCount,g=e.selectedFilterID,b=e.onReorderFilters,w=e.onFilterCreate,E=e.onFilterUpdate,j=e.onFilterSelect,O=e.onFilterDelete,S=e.onFilterFavorite;return l.default.createElement(c.default,{title:_("Filters"),isExpanded:n,onToggleExpand:a,track:"navigation|filters_panel",headerSideButton:l.default.createElement(d.default,{className:"adder_icon",onClick:function(){return r(y)},"aria-label":_("Add new filter"),"data-track":"navigation|filters_quick_add"},l.default.createElement(u.default,null))},l.default.createElement(m.default,{isPremium:i,filters:s,filterCount:v,selectedFilterID:g,onReorderFilters:b,onFilterEdit:r,onFilterSelect:j,onFilterDelete:O,onFilterFavorite:S}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("prop-types")),u=n(e("../icons/PlusIcon")),c=n(e("../expansion_panel")),d=n(e("../Button")),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../containers/premium_promo/PremiumOnlyModal")),p=n(e("../edit_filter_modal")),m=n(e("./FilterList")),h=e("../reactist/modal"),y={name:"",query:"",color:null};i.propTypes={expanded:s.default.bool.isRequired,onTogglePanel:s.default.func.isRequired,isPremium:s.default.bool.isRequired,filters:s.default.array.isRequired,filterCount:s.default.object.isRequired,selectedFilterID:s.default.oneOfType([s.default.number,s.default.string]),onReorderFilters:s.default.func.isRequired,onFilterCreate:s.default.func.isRequired,onFilterUpdate:s.default.func.isRequired,onFilterSelect:s.default.func.isRequired,onFilterDelete:s.default.func.isRequired,onFilterFavorite:s.default.func.isRequired};var v=i;r.default=v},{"../../containers/premium_promo/PremiumOnlyModal":108,"../Button":648,"../edit_filter_modal":710,"../expansion_panel":757,"../icons/PlusIcon":824,"../reactist/modal":971,"./FilterList":1053,"prop-types":"prop-types",react:"react"}],1056:[function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,a=o(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function o(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e("react-redux"),i=e("reselect"),l=e("../../reducers/filters"),s=e("../../reducers/user"),u=e("../../reducers/mainView"),c=e("../../constants/constants"),d=function(e){return e&&e.__esModule?e:{default:e}}(e("./SidebarFiltersPanel")),f=(0,i.createSelector)(s.isPremium,l.filterGetAll,function(e){var t=e.mainView;return t.type===c.MAIN_VIEW_TYPE_FILTER&&t.bottomListSelected?t.id:null},function(e,t,r){return{isPremium:e,filters:t,filterCount:{},selectedFilterID:r}}),p=function(e){return{onReorderFilters:function(t){e((0,l.filterUpdateOrders)(t))},onFilterCreate:function(t){var r=e((0,l.filterAdd)(t)),n=r.id;e((0,u.showFilterView)(n,{bottomListSelected:!0}))},onFilterUpdate:function(t){var r=t.id,o=n(t,["id"]);e((0,l.filterUpdate)(r,o)),e((0,u.showFilterView)(r,{bottomListSelected:!0}))},onFilterSelect:function(t){e((0,u.showFilterView)(t.id,{bottomListSelected:!0}))},onFilterDelete:function(t){e((0,l.filterRemove)(t.id))},onFilterFavorite:function(t){return e((0,l.filterUpdate)(t.id,{is_favorite:!0}))}}},m=(0,a.connect)(f,p)(d.default);r.default=m},{"../../constants/constants":98,"../../reducers/filters":1095,"../../reducers/mainView":1109,"../../reducers/user":1135,"./SidebarFiltersPanel":1055,"react-redux":"react-redux",reselect:"reselect"}],1057:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){var t=e.reduce(function(e,t,r){return r+1!==t.item_order&&(e[t.id]=r+1),e},{});p(t)}function r(e){return a.default.createElement("li",{className:"LabelListItem dragLabel",key:e.id,onClick:function(){return h(e)}},a.default.createElement(s.default,{label:e,count:c[e.name]||0}))}function n(e){var t=e.item,r=e.connectDragSource,n=e.isDragging,i=e.style,d=e.forwardedRef;return a.default.createElement("li",{style:i,ref:d,className:(0,l.default)("LabelListItem",{is_dragging:n}),key:t.id,onClick:function(){return h(t)}},r(a.default.createElement("div",{className:"dnd_handle"},a.default.createElement(u.DragAndDropIcon,null))),a.default.createElement(s.default,{label:t,count:c[t.name]||0,isSelected:f===t.name,onLabelEdit:m,onLabelDelete:o?y:null,onLabelFavorite:o?v:null,onLabelRemoveFromPersonal:o?g:null}))}var o=e.isPremium,i=e.labels,c=e.labelCount,f=e.selectedLabelName,p=e.onReorderLabels,m=e.onLabelEdit,h=e.onLabelSelect,y=e.onLabelDelete,v=e.onLabelFavorite,g=e.onLabelRemoveFromPersonal;return 0===i.length?a.default.createElement("ul",{id:"labels_list",className:"items generic_left_list"},a.default.createElement("li",{className:"empty"},_("Your list of labels will show up here."))):a.default.createElement(d,{selectedLabelName:f,onChange:t,renderListItem:n,renderDragLayer:r,items:i},function(e){return a.default.createElement("ul",{id:"labels_list",className:"items generic_left_list"},e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames")),s=n(e("./LabelWithMenu")),u=e("../icons"),c=e("../sortable/Sortable"),d=(0,c.createSortableClass)("BottomLabelsList");o.propTypes={isPremium:i.default.bool.isRequired,labels:i.default.array.isRequired,labelCount:i.default.object.isRequired,selectedLabelName:i.default.string,onReorderLabels:i.default.func,onLabelEdit:i.default.func.isRequired,onLabelSelect:i.default.func,onLabelDelete:i.default.func,onLabelFavorite:i.default.func,onLabelRemoveFromPersonal:i.default.func};var f=o;r.default=f},{"../icons":842,"../sortable/Sortable":1062,"./LabelWithMenu":1058,classnames:"classnames","prop-types":"prop-types",react:"react"}],1058:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e){var t=e.label,r=e.color,n=void 0===r?t.color||v.DEFAULT_COLOR:r,i=e.count,l=void 0===i?t.count||0:i,d=e.isSelected,p=void 0!==d&&d,w=e.onLabelEdit,E=e.onLabelRename,j=e.onLabelDelete,O=e.onLabelFavorite,S=e.onLabelMoveToPersonal,P=e.onLabelRemoveFromPersonal,I=a(e,["label","color","count","isSelected","onLabelEdit","onLabelRename","onLabelDelete","onLabelFavorite","onLabelMoveToPersonal","onLabelRemoveFromPersonal"]),k=(0,b.usePopoverMenu)(),T=(0,g.useConfirmDialog)({confirmLabel:_("Delete"),onConfirm:function(){return j(t)},htmlMessage:(0,f.default)(_("Are you sure you want to delete {item_name}?"),{item_name:"<b>".concat(s(t),"</b>")})}),C=null==t.id,D=null!=w,A=null!=E&&!D,M=null!=O&&!t.is_favorite,x=null!=S&&C,R=null!=P&&!C,N=null!=j,L=!(D||A||M||N||x||R),$=N&&(D||A||M||x||R);return c.default.createElement(c.default.Fragment,null,c.default.createElement(m.default,o({color:n||t.color,leftIcon:c.default.createElement(y.LabelIcon,null),isSelected:p,onMenuClick:L?void 0:k.openOnAnchor,onContextMenu:L?void 0:k.openOnContext},I),c.default.createElement("span",{dangerouslySetInnerHTML:{__html:u(t)}}),l>0&&c.default.createElement("div",{className:"counter_count"},l)),k.isOpen&&!L?c.default.createElement(b.Popover,k.props,c.default.createElement(h.MenuList,{className:"item_menu_list"},D&&c.default.createElement(h.IconMenuItem,{text:_("Edit label"),icon:c.default.createElement(y.EditIcon,null),onClick:k.close(function(){return w(t)}),"data-track":"labels|menu_edit"}),A&&c.default.createElement(h.IconMenuItem,{text:_("Rename label"),icon:c.default.createElement(y.EditIcon,null),onClick:k.close(function(){return E(t)}),"data-track":"labels|menu_edit"}),M&&c.default.createElement(h.IconMenuItem,{text:_("Add to favorites"),icon:c.default.createElement(y.HeartIcon,null),onClick:k.close(function(){return O(t)}),"data-track":"labels|menu_add_to_favorites"}),x&&c.default.createElement(h.IconMenuItem,{text:_("Move to personal labels"),icon:c.default.createElement(y.AddAboveIcon,null),onClick:k.close(function(){return S(t)}),"data-track":"labels|menu_move_to_personal"}),R&&c.default.createElement(h.IconMenuItem,{text:_("Remove from personal labels"),icon:c.default.createElement(y.AddBelowIcon,null),onClick:k.close(function(){return P(t)}),"data-track":"labels|menu_move_to_shared"}),$&&c.default.createElement(h.MenuSeparator,null),N&&c.default.createElement(h.IconMenuItem,{text:_("Delete label"),icon:c.default.createElement(y.DeleteIcon,null),onClick:k.close(T),"data-track":"labels|menu_delete"}))):null)}function s(e){return p.default.formatSimple(e.name,{only_text:!0,as_html:!1,with_link:!1})}function u(e){var t=e.name,r=t.match(/[^ ]{20}.+?/g);if(r){var n=!0,o=!1,a=void 0;try{for(var i,l=r[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;t=t.replace(s,s.substr(0,21)+" <br />")}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}return t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l;var c=n(e("react")),d=n(e("prop-types")),f=n(e("../../utils/format")),p=n(e("../../components/formatter/Formatter.js")),m=n(e("../ListItem")),h=e("../menu_list"),y=e("../icons"),v=e("../../models/Colors"),g=e("../confirm_dialog"),b=e("../popover");l.propTypes={label:d.default.object.isRequired,
color:d.default.number,count:d.default.number,isSelected:d.default.bool,onLabelEdit:d.default.func,onLabelRename:d.default.func,onLabelDelete:d.default.func,onLabelFavorite:d.default.func,onLabelMoveToPersonal:d.default.func,onLabelRemoveFromPersonal:d.default.func}},{"../../components/formatter/Formatter.js":22,"../../models/Colors":149,"../../utils/format":1162,"../ListItem":653,"../confirm_dialog":680,"../icons":842,"../menu_list":907,"../popover":933,"prop-types":"prop-types",react:"react"}],1059:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.isExpanded,r=e.onToggleExpand,n=e.sharedLabels,o=e.labelCount,i=e.selectedLabelName,c=e.onLabelSelect,d=e.onLabelRename,f=e.onLabelDelete,p=e.onLabelMoveToPersonal;return a.default.createElement(s.default,{title:_("Shared"),titleTooltip:_("These labels are inherited from shared projects"),isExpanded:t,onToggleExpand:r},a.default.createElement("ul",{className:"items generic_left_list"},n.map(function(e){return a.default.createElement("li",{key:e.name,className:"LabelListItem",onClick:function(){return c(e)}},a.default.createElement(l.default,{label:e,color:u,count:o[e.name]||0,isSelected:i===e.name,onLabelRename:d,onLabelDelete:f,onLabelMoveToPersonal:p}))})))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types")),l=n(e("./LabelWithMenu")),s=n(e("../expansion_panel")),u=48;o.propTypes={isExpanded:i.default.bool.isRequired,onToggleExpand:i.default.func.isRequired,sharedLabels:i.default.array.isRequired,labelCount:i.default.object.isRequired,selectedLabelName:i.default.string,onLabelSelect:i.default.func.isRequired,onLabelRename:i.default.func.isRequired,onLabelDelete:i.default.func.isRequired,onLabelMoveToPersonal:i.default.func.isRequired};var c=o;r.default=c},{"../expansion_panel":757,"./LabelWithMenu":1058,"prop-types":"prop-types",react:"react"}],1060:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){function t(e){var t=e.name,r=e.color,n=e.is_favorite,o=s.reduce(function(e,t){return e[t.id]=t.item_order+1,e},{});O(o),P({name:t,color:r,is_favorite:n,item_order:1})}function r(e){if(!i)return void m.showLabel();(0,b.openModal)(function(r){return u.default.createElement(h.default,{label:e,labels:s.map(function(e){return e.name}),onLabelCreate:t,onLabelUpdate:I,onLabelRename:S,onModalClose:r})})}var n=e.expanded,a=e.onTogglePanel,i=e.isPremium,l=e.isDoistUser,s=e.personalLabels,c=e.sharedLabels,E=e.labelCount,j=e.selectedLabelName,O=e.onReorderLabels,S=e.onLabelRename,P=e.onLabelCreate,I=e.onLabelUpdate,k=e.onLabelSelect,T=e.onLabelDelete,C=e.onLabelFavorite,D=e.onLabelMoveToPersonal,A=e.onLabelRemoveFromPersonal,M=(0,g.useLocalStorageState)("sharedLabelsExpanded",!1),x=o(M,2),R=x[0],N=x[1];return u.default.createElement(f.default,{title:_("Labels"),isExpanded:n,onToggleExpand:a,track:"navigation|labels_panel",headerSideButton:u.default.createElement(p.default,{className:"adder_icon",onClick:function(){return r(w)},"aria-label":_("Add new label"),"data-track":"navigation|labels_quick_add"},u.default.createElement(d.default,null))},u.default.createElement(y.default,{isPremium:i,labels:s,labelCount:E,selectedLabelName:j,onReorderLabels:O,onLabelEdit:r,onLabelSelect:k,onLabelDelete:T,onLabelFavorite:C,onLabelRemoveFromPersonal:l?A:void 0}),c.length>0&&u.default.createElement(v.default,{isExpanded:R,onToggleExpand:function(){return N(!R)},sharedLabels:c,labelCount:E,selectedLabelName:j,onLabelSelect:k,onLabelRename:r,onLabelDelete:T,onLabelMoveToPersonal:D}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("react")),c=n(e("prop-types")),d=n(e("../icons/PlusIcon")),f=n(e("../expansion_panel")),p=n(e("../Button")),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../containers/premium_promo/PremiumOnlyModal")),h=n(e("../edit_label_modal")),y=n(e("./LabelList")),v=n(e("./SharedLabelsList")),g=e("../hooks"),b=e("../reactist/modal"),w={name:"",color:null};s.propTypes={expanded:c.default.bool.isRequired,onTogglePanel:c.default.func.isRequired,isPremium:c.default.bool.isRequired,isDoistUser:c.default.bool.isRequired,personalLabels:c.default.array.isRequired,sharedLabels:c.default.array.isRequired,labelCount:c.default.object.isRequired,selectedLabelName:c.default.string,onReorderLabels:c.default.func.isRequired,onLabelRename:c.default.func.isRequired,onLabelCreate:c.default.func.isRequired,onLabelUpdate:c.default.func.isRequired,onLabelSelect:c.default.func.isRequired,onLabelDelete:c.default.func.isRequired,onLabelFavorite:c.default.func.isRequired,onLabelMoveToPersonal:c.default.func.isRequired,onLabelRemoveFromPersonal:c.default.func.isRequired};var E=s;r.default=E},{"../../containers/premium_promo/PremiumOnlyModal":108,"../Button":648,"../edit_label_modal":712,"../expansion_panel":757,"../hooks":766,"../icons/PlusIcon":824,"../reactist/modal":971,"./LabelList":1057,"./SharedLabelsList":1059,"prop-types":"prop-types",react:"react"}],1061:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=e("reselect"),a=e("../../reducers/labels"),i=e("../../reducers/user"),l=e("../../reducers/counts"),s=e("../../reducers/mainView"),u=e("../../constants/constants"),c=function(e){return e&&e.__esModule?e:{default:e}}(e("./SidebarLabelsPanel")),d=(0,o.createSelector)(i.isPremium,i.isDoistUser,a.labelGetAllPersonal,a.labelGetAllShared,l.countByLabel,function(e){var t=e.mainView;return t.type===u.MAIN_VIEW_TYPE_LABEL&&t.bottomListSelected?t.id:null},function(e,t,r,n,o,a){return{isPremium:e,isDoistUser:t,personalLabels:r,sharedLabels:n,labelCount:o,selectedLabelName:a}}),f=function(e){return{onReorderLabels:function(t){e((0,a.labelUpdateOrders)(t))},onLabelRename:function(t){var r=t.oldName,n=t.newName;e((0,a.labelRename)({oldName:r,newName:n})),e((0,s.showLabelView)(n,{bottomListSelected:!0}))},onLabelCreate:function(t){e((0,a.labelAdd)(t)),e((0,s.showLabelView)(t.name,{bottomListSelected:!0}))},onLabelUpdate:function(t){var r=t.id,n=t.name,o=t.color,i=t.is_favorite;e((0,a.labelUpdate)(r,{name:n,color:o,is_favorite:i})),n&&e((0,s.showLabelView)(n,{bottomListSelected:!0}))},onLabelSelect:function(t){e((0,s.showLabelView)(t.name,{bottomListSelected:!0}))},onLabelDelete:function(t){e((0,a.labelRemove)(t.name))},onLabelFavorite:function(t){e((0,a.labelUpdate)(t.id,{is_favorite:!0}))},onLabelMoveToPersonal:function(t){e((0,a.labelMoveToPersonal)(t.name))},onLabelRemoveFromPersonal:function(t){e((0,a.labelRemoveFromPersonal)(t.id))}}},p=(0,n.connect)(d,f)(c.default);r.default=p},{"../../constants/constants":98,"../../reducers/counts":1090,"../../reducers/labels":1105,"../../reducers/mainView":1109,"../../reducers/user":1135,"./SidebarLabelsPanel":1060,"react-redux":"react-redux",reselect:"reselect"}],1062:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=e.getBoundingClientRect();return{height:t.height,width:t.width,left:t.left,top:t.top}}function _(e){var t=(0,j.createSortableItemClass)(e),r=(0,O.createSortableDragLayerClass)(e),n=function(e){function n(){var e,t;i(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=u(this,(e=c(n)).call.apply(e,[this].concat(o))),m(d(t),"state",{isDragging:!1}),m(d(t),"deriveRectTo",function(){var e=t.state,r=e.itemsFrom,n=e.itemsTo,o=t.rectFrom[r[0].id].top;return(0,v.keyBy)("id",n.map(function(e){var r=t.rectFrom[e.id],n={id:e.id,height:r.height,width:r.width,top:o,left:r.left};return o+=r.height,n}))}),m(d(t),"dragBegin",function(e){var r=t.props.onDragStart;t.rectFrom=(0,v.mapValues)(function(e){return h(e.current)},t.itemRefs),t.setState({isDragging:!0}),r&&r(e)}),m(d(t),"dragEnd",function(){var e=t.props,r=e.onChange,n=e.onDragEnd,o=t.state.itemsTo;n&&n(),r&&r(o),t.setState({isDragging:!1})}),m(d(t),"itemDrop",function(){return{dropInSortable:!0}}),m(d(t),"itemHover",function(e,r,n){var o=t.state,a=o.itemsFrom,i=o.itemsTo,l=t.deriveRectTo(),s=e.y,u=i.findIndex(function(e){return e.id===r.id}),c=a.findIndex(function(e){return e.id===r.id}),d=a[c],f=l[d.id],p=i.findIndex(function(e,t){var r=l[e.id];if(u===t)return!1;if(r.height>f.height){if(t<u){var n=r.height-f.height;return s>r.top&&s<r.top+r.height-n}if(t>u){var o=r.height-f.height;return s>r.top+o&&s<r.top+r.height}}return s>r.top&&s<r.top+r.height});if(-1===u&&-1!==p)return void t.addItem(r,p,n);u!=p&&-1!=u&&-1!=p&&t.moveItem(u,p)}),m(d(t),"styleCache",{}),m(d(t),"createTransformStyle",function(e,r){if(!e)return P;var n=e[r],o=n.x,a=n.y,i="translate(".concat(o,"px, ").concat(a,"px)");if(t.styleCache[i])return t.styleCache[i];var l={transform:i};return t.styleCache[i]=l,l}),m(d(t),"scheduleStateUpdate",function(e){t.pendingUpdateFn=e,t.frameRequest||(t.frameRequest=requestAnimationFrame(t.drawFrame))}),m(d(t),"drawFrame",function(){t.setState(a({},t.pendingUpdateFn)),t.pendingUpdateFn=null,t.frameRequest=null}),t}return f(n,e),s(n,[{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.frameRequest)}},{key:"moveItem",value:function(e,t){var r=(0,y.move)(e,t,this.state.itemsTo);this.scheduleStateUpdate({itemsTo:r})}},{key:"deriveTransforms",value:function(){var e=this,t=this.state,r=t.itemsFrom,n=t.itemsTo;if(!this.rectFrom)return null;var o=this.rectFrom[r[0].id].top,a=(0,b.compose)((0,v.keyBy)("id"),(0,v.map)(function(t){var r=o;return o+=e.rectFrom[t.id].height,{id:t.id,top:r}}))(n);return r.map(function(t){var r=e.rectFrom[t.id].top;return{x:0,y:a[t.id].top-r}})}},{key:"render",value:function(){var e=this,n=this.props,o=n.children,a=n.renderListItem,i=n.renderDragLayer,l=n.connectDropTarget,s=this.state.itemsFrom,u=this.deriveTransforms();return this.itemRefs&&this.itemRefsFingerprint===s||(this.itemRefs=s.reduce(function(e,t){return e[t.id]=g.default.createRef(),e},{}),this.itemRefsFingerprint=s,this.rectFrom=null),l(o(g.default.createElement(g.default.Fragment,null,s.map(function(r,n){return g.default.createElement(t,{key:r.id,id:r.id,item:r,render:a,style:e.createTransformStyle(u,n),forwardedRef:e.itemRefs[r.id],dragBegin:e.dragBegin,dragEnd:e.dragEnd})}),g.default.createElement(r,{render:i}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.itemsFrom===e.items||t.isDragging?null:{itemsFrom:e.items,itemsTo:e.items}}}]),n}(g.default.Component);return m(n,"propTypes",{items:E.default.arrayOf(E.default.shape({id:E.default.any})),renderListItem:E.default.func.isRequired,renderDragLayer:E.default.func.isRequired,children:E.default.func,onDragStart:E.default.func,onDragEnd:E.default.func,onChange:E.default.func,connectDropTarget:E.default.func,isOver:E.default.bool,dropResult:E.default.object}),m(n,"defaultProps",{children:function(e){return g.default.createElement("ul",null,e)}}),(0,y.flow)((0,w.DropTarget)(e,S,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),dropResult:t.getDropResult()}},{arePropsEqual:function(e,t){return(0,y.shallowEqual)(e,t)}}))(n)}Object.defineProperty(r,"__esModule",{value:!0}),r.createSortableClass=_;var y=e("../../utils"),v=e("../../utils/fp"),g=n(e("react")),b=e("redux"),w=e("react-dnd"),E=n(e("prop-types")),j=e("./SortableItem"),O=e("./SortableDragLayer"),S={hover:function(e,t,r){var n=t.getItem();r.itemHover(t.getClientOffset(),n.item,n.rect)},drop:function(e,t,r){return r.itemDrop()}},P={}},{"../../utils":1176,"../../utils/fp":1166,"./SortableDragLayer":1063,"./SortableItem":1064,"prop-types":"prop-types",react:"react","react-dnd":"react-dnd",redux:"redux"}],1063:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=e.initialOffset,r=e.currentOffset;if(!t||!r)return{};var n={x:r.x,y:r.y},o=n.x,a=n.y,i="translate(".concat(o,"px, ").concat(a,"px)");return{transform:i,WebkitTransform:i,width:e.dragItem.componentWidth}}function h(e){var t=function(t){function r(){var e,t;a(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=s(this,(e=u(r)).call.apply(e,[this].concat(o))),p(c(t),"frameRequest",null),t}return d(r,t),l(r,[{key:"shouldComponentUpdate",value:function(){var e=this;return!this.frameRequest&&(this.frameRequest=requestAnimationFrame(function(){e.forceUpdate(),e.frameRequest=null}),!1)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.frameRequest)}},{key:"render",value:function(){if(!this.props.isDragging||this.props.itemType!==e)return null;var t=(0,v.default)(["list_item_draglayer"]);return y.default.createElement("div",{style:b},y.default.createElement("div",{className:t,style:m(this.props)},this.props.render(this.props.dragItem.item)))}}]),r}(y.default.Component);return p(t,"propTypes",{render:g.default.func,initialOffset:g.default.shape({x:g.default.number.isRequired,y:g.default.number.isRequired}),currentOffset:g.default.shape({x:g.default.number.isRequired,y:g.default.number.isRequired}),isDragging:g.default.bool.isRequired,itemType:g.default.string,dragItem:g.default.object}),(0,_.DragLayer)(w)(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.createSortableDragLayerClass=h;var _=e("react-dnd"),y=n(e("react")),v=n(e("classnames")),g=n(e("prop-types")),b={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},w=function(e){return{dragItem:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}}},{classnames:"classnames","prop-types":"prop-types",react:"react","react-dnd":"react-dnd"}],1064:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e){function t(){return l(this,t),c(this,f(t).apply(this,arguments))}return p(t,e),u(t,[{key:"render",value:function(){var e=this.props;return(0,e.render)(a(e,["render"]))}}]),t}(v.default.PureComponent);return h(t,"propTypes",{forwardedRef:b.default.object,render:b.default.func.isRequired,item:b.default.object.isRequired,style:b.default.object,dragBegin:b.default.func,dragEng:b.default.func,connectDragSource:b.default.func.isRequired,isDragging:b.default.bool.isRequired}),(0,w.DragSource)(e,j,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}},{arePropsEqual:function(e,t){return(0,E.default)(e,t)}})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.createSortableItemClass=_;var y=e("../../utils"),v=n(e("react")),g=e("react-dom"),b=n(e("prop-types")),w=e("react-dnd"),E=n(e("../../utils/shallowEqual")),j=function(e){return(0,y.mapValues)(e,function(e){return function(){try{return e.apply(void 0,arguments)}catch(e){console.log(e)}}})}({beginDrag:function(e,t,r){var n=(0,g.findDOMNode)(r),o=n.getBoundingClientRect();return e.dragBegin(e.item),{id:e.id,item:e.item,rect:o,componentWidth:o.width}},isDragging:function(e,t){return e.id==t.getItem().id&&!t.didDrop()},endDrag:function(e,t){e.dragEnd(t.getDropResult())}})},{"../../utils":1176,"../../utils/shallowEqual":1200,"prop-types":"prop-types",react:"react","react-dnd":"react-dnd","react-dom":"react-dom"}],1065:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.size,r=void 0===t?"small":t;return a.default.createElement("div",{className:"spinner spinner--".concat(r)},a.default.createElement("div",{className:"bounce1"}),a.default.createElement("div",{className:"bounce2"}),a.default.createElement("div",{className:"bounce3"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=n(e("react")),i=n(e("prop-types"));o.propTypes={size:i.default.oneOf(["small"])};var l=o;r.default=l},{"prop-types":"prop-types",react:"react"}],1066:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function i(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=n(e("react")),s=n(e("prop-types")),u=e("../../constants/themes"),c=e("../../utils"),d=function(e){var t=e.theme,r=a(e,["theme"]),n=(0,u.colorInHex)(t);t!==u.THEME_NEUTRAL&&t!=u.THEME_NOIR||(n="#848484");var i=(0,c.hexToRGB)(n,.2);return l.default.createElement("svg",o({className:"ring_spinner",width:"24",height:"24",viewBox:"0 0 24 24"},r),l.default.createElement("g",{fill:"none",fillRule:"nonzero"},l.default.createElement("path",{fill:n,d:"M17.945 3.958A9.955 9.955 0 0 0 12 2c-2.19 0-4.217.705-5.865 1.9L5.131 2.16A11.945 11.945 0 0 1 12 0c2.59 0 4.99.82 6.95 2.217l-1.005 1.741z"}),l.default.createElement("path",{fill:i,d:"M5.13 2.16L6.136 3.9A9.987 9.987 0 0 0 2 12c0 5.523 4.477 10 10 10s10-4.477 10-10a9.986 9.986 0 0 0-4.055-8.042l1.006-1.741A11.985 11.985 0 0 1 24 12c0 6.627-5.373 12-12 12S0 18.627 0 12c0-4.073 2.029-7.671 5.13-9.84z"})))};d.propTypes={theme:s.default.number},d.defaultProps={theme:u.THEME_NEUTRAL};var f=d;r.default=f},{"../../constants/themes":99,"../../utils":1176,"prop-types":"prop-types",react:"react"}],1067:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RingSpinner",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"DotsSpinner",{enumerable:!0,get:function(){return a.default}});var o=n(e("./RingSpinner")),a=n(e("./DotsSpinner"))},{"./DotsSpinner":1065,"./RingSpinner":1066}],1068:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e,t){if(null==e)return{};var r,n,o=c(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(e){var t=e.className,r=e.checked,n=e.onChange,i=u(e,["className","checked","onChange"]),l=f.default.useState(!1),s=a(l,2),c=s[0],d=s[1];return f.default.createElement("div",{className:(0,m.default)("reactist_switch",t,{"reactist_switch--checked":r,"focus-outline":c})},f.default.createElement("input",o({type:"checkbox",checked:r,onChange:n},i,{onFocus:function(e){i.onFocus&&i.onFocus(e),d(!0)},onBlur:function(e){i.onBlur&&i.onBlur(e),d(!1)}})),f.default.createElement("span",{className:"reactist_switch--handle"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f=n(e("react")),p=n(e("prop-types")),m=n(e("classnames"));d.propTypes={className:p.default.string,checked:p.default.bool.isRequired,onChange:p.default.func.isRequired};var h=d;r.default=h},{classnames:"classnames","prop-types":"prop-types",react:"react"}],1069:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./Switch")),o=n.default;r.default=o},{"./Switch":1068}],1070:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e){return f(e)||d(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function f(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}function _(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?v(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var E=e("../../utils"),j=n(e("react")),O=n(e("prop-types")),S=e("../spinners"),P=function(e){function t(e){var r;return p(this,t),r=_(this,y(t).call(this,e)),w(v(r),"handleReportExportClick",function(){r.setState({reportExporting:!0}),r.props.onReportExportClick().then(function(e){r.setState({reportExporting:!1,reportExportLink:e})}).catch(function(e){r.setState({reportExporting:!1,reportExportError:e})})}),w(v(r),"handleUnsyncExportClick",function(){r.setState({unsyncExporting:!0}),r.props.onUnsyncExportClick().then(function(e){r.setState({unsyncExporting:!1,unsyncExportLink:e})}).catch(function(e){r.setState({unsyncExporting:!1,unsyncExportError:e})})}),r.state={reportExporting:!1,reportExportError:null,reportExportLink:null,unsyncExporting:!1,unsyncExportError:null,unsyncExportLink:null},r}return g(t,e),h(t,[{key:"renderSyncLogs",value:function(){var e=u(this.props.logs);e.reverse();var t=e.map(function(e,t){return j.default.createElement("tr",{className:"level_error",key:"".concat(e.timestamp,".").concat(t)},j.default.createElement("td",{className:"time"},e.isoTime),j.default.createElement("td",null,"[ERROR] ",e.msg))});return 0==t.length&&(t=j.default.createElement("tr",null,j.default.createElement("td",{className:"time"}),j.default.createElement("td",null,"No error events recorded"))),j.default.createElement("div",null,j.default.createElement("h4",null,"Sync error history logs (most recent on the top)"),j.default.createElement("table",{className:"sync_logs"},j.default.createElement("tbody",null,t)))}},{key:"renderStatus",value:function(){var e,t=this.props,r=t.queueLength,n=t.firstRunCmdCount,o=t.failedCmdCount,i=t.lastSyncAt,l=t.unsync;i&&(e=i.toString());var s,u=(0,E.flatten)((0,E.values)(l)).length;return u>0&&(s=(0,E.toPairs)(l).map(function(e){var t=a(e,2),r=t[0],n=t[1];return 0==n.length?null:"".concat(r,": ").concat(n.length)}).filter(function(e){return e}).join(" "),s="("+s+")"),j.default.createElement("div",null,j.default.createElement("h4",null,"System summery"),j.default.createElement("table",{className:"status_table"},j.default.createElement("tbody",null,j.default.createElement("tr",null,j.default.createElement("td",null,"Last sync"),j.default.createElement("td",null,e)),j.default.createElement("tr",null,j.default.createElement("td",null,"Sync queue length"),j.default.createElement("td",null,r)),j.default.createElement("tr",null,j.default.createElement("td",null,"First run commands count"),j.default.createElement("td",null,n)),j.default.createElement("tr",null,j.default.createElement("td",null,"Failed commands count"),j.default.createElement("td",null,o)),j.default.createElement("tr",null,j.default.createElement("td",null,"Unsynced objects count"),j.default.createElement("td",null,u," ",s)))))}},{key:"renderReportDownload",value:function(){return this.state.reportExportLink?j.default.createElement("section",null,j.default.createElement("a",{href:this.state.reportExportLink,target:"_blank",rel:"noopener noreferrer"},"Download")):j.default.createElement("section",null,j.default.createElement("a",{className:"ist_button",onClick:this.handleReportExportClick},"Download Error Logs"),this.state.reportExporting?j.default.createElement(S.RingSpinner,null):null)}},{key:"renderUnsyncExport",value:function(){return 0===(0,E.flatten)((0,E.values)(this.props.unsync)).length?null:this.state.unsyncExportLink?j.default.createElement("section",null,j.default.createElement("a",{href:this.state.unsyncExportLink,target:"_blank",rel:"noopener noreferrer"},"Download")):j.default.createElement("section",null,j.default.createElement("a",{className:"ist_button",onClick:this.handleUnsyncExportClick},"Download Unsynced Datas"),this.state.unsyncExporting?j.default.createElement(S.RingSpinner,null):null)}},{key:"render",value:function(){return j.default.createElement("div",{className:"debug_tool"},this.renderStatus(),this.renderSyncLogs(),this.renderReportDownload(),this.renderUnsyncExport())}}]),t}(j.default.Component);r.default=P,w(P,"propTypes",{logs:O.default.array.isRequired,unsync:O.default.shape({items:O.default.array,projects:O.default.array,notes:O.default.array,reminders:O.default.array,labels:O.default.array}).isRequired,lastSyncAt:O.default.object,queueLength:O.default.number,firstRunCmdCount:O.default.number,failedCmdCount:O.default.number,onReportExportClick:O.default.func,onUnsyncExportClick:O.default.func})},{"../../utils":1176,
"../spinners":1067,"prop-types":"prop-types",react:"react"}],1071:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=e("../../utils"),y=n(e("react")),v=n(e("react-dom")),g=n(e("../../stores/store")),b=n(e("../../models/SyncLogs")),w=n(e("./SyncDebugConsole")),E=n(e("../../models/ProjectsModel")),j=e("../../models/Reminders"),O=n(e("../../models/LabelsModel"));$AEV(document,"keydown",function(e){var t=window.event?event:e;68==t.keyCode&&t.ctrlKey&&e.altKey&&S()});var S=function(){var e=DIV();GB_showHTML(_("Sync debug console"),e,500,700,{close_validator_fn:function(){return v.default.unmountComponentAtNode(e),!0}}),v.default.render(y.default.createElement(I,null),e)},P=function(e){return(0,h.values)(e).filter(function(e){return(0,h.isTempID)(e.id)})},I=function(e){function t(e){var r;i(this,t),r=u(this,c(t).call(this,e)),m(d(r),"handleUnsyncExport",function(){var e=r.getAllUnsyncObject();e.user_id=window.User.id;var t=JSON.stringify(e);return(0,h.uploadJSON)(t,"unsync_data.json")}),m(d(r),"handleReportExport",function(){var e=b.default.getReport(),t=JSON.stringify(e);return(0,h.uploadJSON)(t,"sync_report.json")});var n=b.default.getReport(),o=r.getAllUnsyncObject();return r.state=a({},n,{unsync:o,onUnsyncExportClick:r.handleUnsyncExport,onReportExportClick:r.handleReportExport}),r}return f(t,e),s(t,[{key:"getAllUnsyncObject",value:function(){return{projects:P(E.default.model_data),notes:P(g.default.getState().notes),reminders:P(j.RemindersModel.model_data),labels:P(O.default.model_data)}}},{key:"render",value:function(){return y.default.createElement(w.default,this.state)}}]),t}(y.default.Component)},{"../../models/LabelsModel":156,"../../models/ProjectsModel":159,"../../models/Reminders":161,"../../models/SyncLogs":170,"../../stores/store":1140,"../../utils":1176,"./SyncDebugConsole":1070,react:"react","react-dom":"react-dom"}],1072:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.label,r=e.count,n=void 0===r?0:r,o=e.hasMore,i=void 0!==o&&o;return a.default.createElement(a.default.Fragment,null,t,n>0?" ":null,n>0?a.default.createElement("small",null,n,i?"+":null):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.TabTitle=o;var a=n(e("react")),i=n(e("prop-types"));o.propTypes={label:i.default.node.isRequired,count:i.default.number,hasMore:i.default.bool}},{"prop-types":"prop-types",react:"react"}],1073:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("./TabTitle"),o=n.TabTitle;r.default=o},{"./TabTitle":1072}],1074:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h,y=n(e("react")),v=n(e("prop-types")),g=n(e("classnames")),b=e("../icons"),w=n(e("../../components/formatter/Formatter")),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../models/Colors")),j=function(e,t){h||(h=new IstMenu,_("Remove from favorites"),h.addItems(IstMenu.createItem(_("Hide from favorites"),function(){h.onUnfavorite&&h.onUnfavorite(),h.hide()},{icon:svgs.get("sm1/heart_strike.svg")})),$AEV(document,"click",function(e){h.shown&&h.hide(e)})),h.onUnfavorite=t,h.shown&&h.hide(),h.show({},e,{pos_y_offset:10})},O=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=u(this,(e=c(t)).call.apply(e,[this].concat(o))),m(d(r),"handleClick",function(){var e=r.props,t=e.menu,n=e.item;return(0,e.onClick)({menu:t,item:n})}),m(d(r),"handleMenuClick",function(e){e.stopPropagation(),j(e,r.handleUnfavorite)}),m(d(r),"handleContextMenu",function(e){if(e.shift)return!0;e.preventDefault(),j(e,r.handleUnfavorite)}),m(d(r),"handleUnfavorite",function(){var e=r.props,t=e.menu,n=e.item;(0,e.onUnfavorite)({menu:t,item:n})}),r}return f(t,e),s(t,[{key:"render",value:function(){var e,t=this.props,r=t.icon,n=t.item,o=t.isSelected,a=t.count,i=t.menu,l=(e={className:(0,g.default)("favorite_item",o?"current":null)},m(e,"data-id",n.id),m(e,"data-type","".concat(i,"_list_item")),m(e,"onClick",this.handleClick),m(e,"onContextMenu",this.handleContextMenu),e),s=w.default.formatSimple(n.name,{only_text:!1,as_html:!0,with_links:!1,cache_prefix:"top_menu_item"}),u="project"==i?{color:E.getHex("project",n.color)}:{color:E.getHex("filter",n.color)};return y.default.createElement("li",l,y.default.createElement("span",{className:"item_icon",style:u},r),y.default.createElement("span",{className:"item_content"},y.default.createElement("span",{dangerouslySetInnerHTML:{__html:s}}),y.default.createElement("small",{className:"item_counter"},a||null)),y.default.createElement("span",{className:"item_menu icon menu gear_menu",onClick:this.handleMenuClick},y.default.createElement(b.MoreSmallIcon,null)))}}]),t}(y.default.PureComponent);m(O,"propTypes",{menu:v.default.oneOf(["project","label","filter"]).isRequired,item:v.default.shape({id:v.default.any,name:v.default.string}).isRequired,count:v.default.number.isRequired,isSelected:v.default.bool.isRequired,onUnfavorite:v.default.func.isRequired,onClick:v.default.func.isRequired});var S=function(e){function t(){var e,r;i(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=u(this,(e=c(t)).call.apply(e,[this].concat(o))),m(d(r),"handleTodayClick",function(){r.props.onSelect({menu:"today"})}),m(d(r),"handle7DaysClick",function(){r.props.onSelect({menu:"7days"})}),m(d(r),"handleInboxClick",function(){var e=r.props;(0,e.onSelect)({menu:"project",item:{id:e.inboxPID}})}),m(d(r),"handleTeamInboxClick",function(){var e=r.props;(0,e.onSelect)({menu:"project",item:{id:e.teamInboxPID}})}),m(d(r),"handleFavoriteItemClick",function(e){var t=e.menu,n=e.item;r.props.onSelect({menu:t,item:n})}),m(d(r),"sharedProjectIcon",y.default.createElement(b.ProjectIcon,{isShared:!0})),m(d(r),"personalProjectIcon",y.default.createElement(b.ProjectIcon,{isShared:!1})),m(d(r),"labelIcon",y.default.createElement(b.LabelIcon,null)),m(d(r),"filterIcon",y.default.createElement(b.FilterIcon,null)),r}return f(t,e),s(t,[{key:"renderProjectItem",value:function(){var e=this,t=this.props,r=t.projects,n=t.projectCount,a=t.collaboratorsByPID,i=t.selected;return r?r.map(function(t){var r="project"===i.menu&&i.id===t.id,l=!!a[t.id],s=l?e.sharedProjectIcon:e.personalProjectIcon,u={menu:"project",item:t,count:n[t.id],isSelected:r,onUnfavorite:e.props.onUnfavorite,onClick:e.handleFavoriteItemClick,icon:s};return y.default.createElement(O,o({key:t.id},u))}):null}},{key:"renderLabelItem",value:function(){var e=this,t=this.props,r=t.labels,n=t.labelCount,o=t.onUnfavorite,a=t.selected;return r?r.map(function(t){var r="label"===a.menu&&a.id===t.name;return y.default.createElement(O,{key:t.id,menu:"label",item:t,count:n[t.name]||0,isSelected:r,onUnfavorite:o,onClick:e.handleFavoriteItemClick,icon:e.labelIcon})}):null}},{key:"renderFilterItems",value:function(){var e=this,t=this.props,r=t.filters,n=t.filterCount,a=t.selected;return r?r.map(function(t){var r="filter"===a.menu&&a.id===t.id,i={menu:"filter",item:t,count:n[t.id],isSelected:r,onUnfavorite:e.props.onUnfavorite,onClick:e.handleFavoriteItemClick,icon:e.filterIcon};return y.default.createElement(O,o({key:t.id},i))}):null}},{key:"render",value:function(){var e=this.props,t=e.selected,r=e.inboxPID,n=e.teamInboxPID,o=e.projectCount,a=e.overdueCount,i=e.todayCount,l=e.sevenDaysCount,s=e.clock,u=i+a,c=l+a,d=function(e,r){return(0,g.default)("filter",!t||t.menu!==e||r&&t.id!==r?null:"current")};return y.default.createElement("div",null,y.default.createElement("ul",{id:"top_filters"},y.default.createElement("li",{className:d("project",r),id:"filter_inbox",onClick:this.handleInboxClick,"data-id":r,"data-track":"navigation|inbox"},y.default.createElement("span",{className:"item_icon"},y.default.createElement(b.InboxIcon,null)),y.default.createElement("span",{className:"item_content"},_("Inbox"),y.default.createElement("small",{className:"item_counter"},o[r]||null))),n?y.default.createElement("li",{className:d("project",n),id:"filter_team_inbox",onClick:this.handleTeamInboxClick,"data-id":n,"data-track":"navigation|team_inbox"},y.default.createElement("span",{className:"item_icon"},y.default.createElement(b.TeamInboxIcon,null)),y.default.createElement("span",{className:"item_content"},_("Team Inbox"),y.default.createElement("small",{className:"item_counter"},o[n]||null))):null,y.default.createElement("li",{className:d("today"),onClick:this.handleTodayClick,"data-track":"navigation|today"},y.default.createElement("span",{className:"item_icon",style:{position:"relative",top:"1px"}},y.default.createElement(b.TodayIcon,{dateString:s})),y.default.createElement("span",{className:"item_content"},_("Today"),y.default.createElement("small",{className:(0,g.default)("item_counter",a>0?"overdue_color":null)},u||null))),y.default.createElement("li",{className:d("7days"),onClick:this.handle7DaysClick,"data-track":"navigation|next_7_days"},y.default.createElement("span",{className:"item_icon",style:{position:"relative",top:"1px"}},y.default.createElement(b.Next7DaysIcon,null)),y.default.createElement("span",{className:"item_content"},_("Next 7 days"),y.default.createElement("small",{className:"item_counter"},c||null))),this.renderProjectItem(),this.renderLabelItem(),this.renderFilterItems()))}}]),t}(y.default.Component);r.default=S,m(S,"propTypes",{onTodayClick:v.default.func,on7DaysClick:v.default.func,onProjectClick:v.default.func,onSelect:v.default.func.isRequired,inboxPID:v.default.number,teamInboxPID:v.default.number,selected:v.default.PropTypes.shape({menu:v.default.oneOf(["today","7days","project","label","filter"]),id:v.default.oneOfType([v.default.number,v.default.string])}),collaboratorsByPID:v.default.object,projects:v.default.array,labels:v.default.array,filters:v.default.array,todayCount:v.default.number.isRequired,sevenDaysCount:v.default.number.isRequired,overdueCount:v.default.number.isRequired,projectCount:v.default.object.isRequired,labelCount:v.default.object.isRequired,filterCount:v.default.object,onUnfavorite:v.default.func,clock:v.default.string.isRequired}),m(S,"defaultProps",{selected:{}})},{"../../components/formatter/Formatter":22,"../../models/Colors":149,"../icons":842,classnames:"classnames","prop-types":"prop-types",react:"react"}],1075:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("react-redux"),o=e("../../constants/constants.js"),a=e("../../reducers/mainView"),i=function(e){return e&&e.__esModule?e:{default:e}}(e("./TopMenu")),l=e("../../reducers/projects"),s=e("../../reducers/labels"),u=e("../../reducers/filters"),c=e("../../reducers/user"),d=e("../../reducers/counts"),f=e("../../utils"),p=e("../../utils/fp"),m=e("reselect"),h=(0,m.createSelector)(function(e){return e.mainView},function(e){return e.projects},function(e,t){var r=e.id,n=e.ids,a=e.bottomListSelected;if(!a)switch(e.type){case o.MAIN_VIEW_TYPE_TODAY:return{menu:"today"};case o.MAIN_VIEW_TYPE_7_DAYS:return{menu:"7days"};case o.MAIN_VIEW_TYPE_LABEL:return{menu:"label",id:r};case o.MAIN_VIEW_TYPE_FILTER:return{menu:"filter",id:r};case o.MAIN_VIEW_TYPE_PROJECT:if(1!==n.length)return;var i=n[0],l=t[i];if(!l)return;if(l.inbox_project||l.team_inbox||!a)return{menu:"project",id:i};return;default:return}}),_=[],y=(0,m.createSelector)(d.countByProject,l.projectGetFavorite,function(e){return e.user},(0,f.memoizeReturn)(function(e,t,r){var n=t.map(function(e){return e.id});return n.push(r.inbox_project),n.push(r.team_inbox),(0,p.pick)(n)(e)})),v=(0,m.createSelector)(h,s.labelGetFavorite,u.filterGetFavorite,l.projectGetFavorite,d.countToday,d.countSevenDays,d.countOverdue,y,d.countByLabel,d.countByFilter,(0,p.get)("collaborators.byPID"),function(e){return e.user},function(e){return e.clock},c.isPremium,function(e,t,r,n,o,a,i,l,s,u,c,d,f,p){return{selected:e,clock:f,inboxPID:d.inbox_project,teamInboxPID:d.team_inbox,projects:n,labels:p?t:_,filters:p?r:_,todayCount:o,sevenDaysCount:a,overdueCount:i,projectCount:l,labelCount:s,filterCount:u,collaboratorsByPID:c}}),g=(0,f.LMemoize)(function(e){return{onSelect:function(t){var r=t.menu,n=t.item;switch(r){case"today":e((0,a.showTodayView)());break;case"7days":e((0,a.show7DaysView)());break;case"project":e((0,a.showProjectView)([n.id]));break;case"label":e((0,a.showLabelView)(n.name));break;case"filter":e((0,a.showFilterView)(n.id))}},onUnfavorite:function(t){var r=t.menu,n=t.item;switch(r){case"project":e((0,l.projectUpdate)(n.id,{is_favorite:0}));break;case"label":e((0,s.labelUpdate)(n.id,{is_favorite:0}));break;case"filter":e((0,u.filterUpdate)(n.id,{is_favorite:0}))}}}}),b=(0,n.connect)(v,g)(i.default);r.default=b},{"../../constants/constants.js":98,"../../reducers/counts":1090,"../../reducers/filters":1095,"../../reducers/labels":1105,"../../reducers/mainView":1109,"../../reducers/projects":1119,"../../reducers/user":1135,"../../utils":1176,"../../utils/fp":1166,"./TopMenu":1074,"react-redux":"react-redux",reselect:"reselect"}],1076:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){var t=e.vocationMode,r=e.completed,n=e.goal,o=e.counter,a=e.theme,i=e.onClick,l=(0,u.isUndefined)(n)||(0,u.isUndefined)(r);l&&(r=0,n=1);var s,p=Math.min(r/n,1),y=(0,d.topIconColor)(a),v=(0,d.colorInHex)(a);return s=t?c.default.createElement(f.default,{className:"icon_vocation",color:y}):0===p?c.default.createElement(h,{color:y,bgColor:v}):p<1?c.default.createElement(m,{progress:p,color:y}):c.default.createElement(_,{color:y,bgColor:v}),c.default.createElement("span",{id:"top_completed_holder"},c.default.createElement("a",{href:"#completed",className:"fixed_pos"},c.default.createElement("span",{id:"top_completed",className:"completed_pie_stat","data-track":"navigation|karma",onClick:i},s,l?null:c.default.createElement("span",{className:"count"},o||null))))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=e("../../utils"),c=n(e("react")),d=e("../../constants/themes"),f=n(e("../icons/VocationModeIcon")),p=function(e){return[Math.cos(2*Math.PI*e),Math.sin(2*Math.PI*e)]},m=function(e){var t=e.progress,r=e.color,n=p(0),a=o(n,2),i=a[0],l=a[1],s=p(t),u=o(s,2),d=u[0],f=u[1],m=t>.5?1:0,h=["M ".concat(i," ").concat(l),"A 1 1 0 ".concat(m," 1 ").concat(d," ").concat(f),"L 0 0"].join(" "),_={transform:"rotate(-90deg)",width:"24px",height:"24px"};return c.default.createElement("svg",{viewBox:"-2 -2 4 4",style:_},c.default.createElement("circle",{cx:"0",cy:"0",r:"1.4",fill:"none",visibility:"visible",stroke:r,strokeWidth:"0.2"}),c.default.createElement("path",{fill:r,d:h}))},h=c.default.memo(function(e){var t=e.color;return c.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},c.default.createElement("defs",null),c.default.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(3 3)"},c.default.createElement("mask",{id:"4ZtaWA",fill:"#fff"},c.default.createElement("path",{id:"a",d:"M12.3 5L7 10.3 5.4 8.6a.5.5 0 0 0-.8 0l-3.9 4a9 9 0 1 1 .5.9L5 9.7l1.6 1.7a.5.5 0 0 0 .8 0L13 5.7v3.8a.5.5 0 1 0 1 0v-5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.8z"})),c.default.createElement("g",{mask:"url(#4ZtaWA)"},c.default.createElement("path",{fill:t,d:"M-3-3h24v24H-3z"}))))}),_=c.default.memo(function(e){var t=e.color;return c.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},c.default.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(3 3)"},c.default.createElement("mask",{id:"y8QpGa",fill:"#fff"},c.default.createElement("path",{id:"a",d:"M9 18A9 9 0 1 1 9 0a9 9 0 0 1 0 18zm4.9-12.9l-6.7 6.7-3.1-3.2a.5.5 0 1 0-.7.8l3.5 3.5a.5.5 0 0 0 .7 0l7-7a.5.5 0 0 0-.7-.8z"})),c.default.createElement("g",{mask:"url(#y8QpGa)"},c.default.createElement("path",{fill:t,d:"M-3-3h24v24H-3z"}))))})},{"../../constants/themes":99,"../../utils":1176,"../icons/VocationModeIcon":840,react:"react"}],1077:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){h(e,t,r[t])})}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=e.text;return v.default.createElement("span",{dangerouslySetInnerHTML:{__html:O.default.formatSimple(t)}})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var v=n(e("react")),g=e("react-redux"),b=e("../../reducers/items"),w=e("../../reducers/projects"),E=e("../../reducers/sections"),j=e("../../reducers/mainView"),O=n(e("../../components/formatter/Formatter")),S=e("../../reducers/undo"),P=e("../../utils/fp"),I=e("../../utils"),k=n(e("../../react_components/reactist/Notifier")),T=n(e("../../react_components/TemplateText")),C={transition:"all ".concat(300,"ms ease-out"),bottom:"-10px",opacity:0},D={entering:{bottom:"-10px",opacity:0},entered:{bottom:"10px",opacity:1}},A=function(e,t,r){switch(e.type){case w.PROJECT_MOVE_AND_REORDER_UNDO:return{onUndoClick:function(){return t((0,w.projectMoveAndReorderUndo)())},renderContent:function(){return _("Order changed")}};case b.ITEM_UPDATE_DAY_ORDER_UNDO:return{onUndoClick:function(){return t((0,b.itemUpdateDayOrderUndo)())},renderContent:function(){return _("Order changed")}};case b.ITEM_UPDATE_DUE_UNDO:return{onUndoClick:function(){return t((0,b.itemUpdateDueUndo)())},renderContent:function(){return _("Due date updated")}};case E.SECTION_REOREDER_UNDO:return{onUndoClick:function(){return t((0,E.sectionReorderUndo)())},renderContent:function(){return _("Order changed")}};case E.SECTION_MOVE_UNDO:return{onUndoClick:function(){return t((0,E.sectionMoveUndo)())},renderContent:function(){var n=e.destProject,o=v.default.createElement("a",{className:"project_link",href:"#project/".concat(n.id),onClick:function(e){e.preventDefault(),t((0,j.showProjectView)([n.id])),r()}},v.default.createElement(y,{text:n.name}));return v.default.createElement(T.default,{text:_("Section moved to {project_name}"),keyval:{project_name:o}})}};case b.ITEM_MOVE_AND_REORDER_UNDO:return{onUndoClick:function(){return t((0,b.itemMoveAndReorderUndo)())},renderContent:function(){return _("Order changed")}};case b.ITEM_MOVE_MULTIPLE_UNDO:return{renderContent:function(){var n=e.destProject,o=v.default.createElement("a",{className:"project_link",href:"#project/".concat(n.id),onClick:function(e){e.preventDefault(),t((0,j.showProjectView)([n.id])),r()}},v.default.createElement(y,{text:n.name}));return v.default.createElement(T.default,{text:_("Task moved to {project_name}"),keyval:{project_name:o}})}};case b.ITEM_COMPLETE_RECURRING_UNDO:return{onUndoClick:function(){return t((0,b.itemCompleteRecurringUndo)())},renderContent:function(){return(0,I.format)(_("Completed. Next occurrence: {date}"),{date:DateUtils.formatView(e.due)})}};case b.ITEM_COMPLETE_UNDO:return{onUndoClick:function(){return t((0,b.itemCompleteUndo)())},renderContent:function(){var t=(0,P.values)(e.prevState.items).length;return(0,I.format)(_n("1 task completed","{n} tasks completed",t),{n:t})}};case b.ITEM_ARCHIVE_UNDO:return{onUndoClick:function(){return t((0,b.itemArchiveUndo)())},renderContent:function(){var t=(0,P.values)(e.prevState.items).length;return(0,I.format)(_n("1 task archived","{n} tasks archived",t),{n:t})}};case S.NOTIFY_ADD_TO_PROJECT:return{renderContent:function(){var n=e.project,o=v.default.createElement("a",{className:"project_link",href:"#project/".concat(n.id),onClick:function(e){e.preventDefault(),t((0,j.showProjectView)([n.id])),r()}},v.default.createElement(y,{text:n.name})),a=_("Task added to {project_name}");return v.default.createElement(T.default,{text:a,keyval:{project_name:o}})}};default:return{renderContent:function(){return e.message}}}},M=function(e){function t(e){var r;return l(this,t),r=c(this,d(t).call(this,e)),h(f(r),"handleHideClick",function(){return r.props.dispatch((0,S.undoClear)())}),h(f(r),"handleOnClose",function(){return r.props.dispatch((0,S.undoClear)())}),r}return p(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.undo,n=t.dispatch;if(!r)return null;var o=A(r,n,this.handleHideClick),l=o.renderContent,s=o.onUndoClick;return v.default.createElement(k.default,{opened:!0,autoHideDurationMs:8e3,resumeHideDurationMs:8e3,transitionDurationMs:300,onClose:this.handleOnClose},function(t,r){return v.default.createElement("div",{className:"undo_toast_positioner"},v.default.createElement("div",a({className:"undo_toast",style:i({},C,D[t])},r),v.default.createElement("div",{className:"notifier_content"},v.default.createElement("span",{className:"text_holder"},l()),s?v.default.createElement("a",{id:"undo_link",onClick:s},_("Undo")):null,v.default.createElement("a",{className:"hide_link",onClick:e.handleHideClick},_("Hide")))))})}}]),t}(v.default.Component),x=function(e){return{undo:e.undo}},R=function(e){return{dispatch:e}},N=(0,g.connect)(x,R)(M);r.default=N},{"../../components/formatter/Formatter":22,"../../react_components/TemplateText":657,"../../react_components/reactist/Notifier":965,"../../reducers/items":1100,"../../reducers/mainView":1109,"../../reducers/projects":1119,"../../reducers/sections":1125,"../../reducers/undo":1134,"../../utils":1176,"../../utils/fp":1166,react:"react","react-redux":"react-redux"}],1078:[function(e,t,r){"use strict";function n(e){return e?function(t){t.keyCode!==o&&t.keyCode!==a||(t.preventDefault(),e(t))}:void 0}Object.defineProperty(r,"__esModule",{value:!0}),r.createKeyboardClickHandler=n;var o=13,a=32},{}],1079:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.header,r=e.subheader,n=e.children;if(t instanceof Date){var o=DateistDateHelpers.date_max(t),i=DateistDateHelpers.date_max(new Date),s=Math.abs(DateistDateHelpers.day_diff(i,o));t=DateUtils.humanizeDayDiff(s,o),r=(0,l.formatDate)(o,{withWeekday:!0,withTime:!1})}return a.default.createElement("div",{className:"section"},a.default.createElement("div",{className:"section_head_holder"},a.default.createElement("div",{className:"section_head"},a.default.createElement("h2",null,t,a.default.createElement("small",{className:"section_subheader"},r)))),n)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=e("../../utils");o.propTypes={header:i.default.oneOfType([i.default.instanceOf(Date),i.default.string]).isRequired,subheader:i.default.string,children:i.default.node.isRequired}},{"../../utils":1176,"prop-types":"prop-types",react:"react"}],1080:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.header,r=e.subheader,n=e.className,o=e.menu,i=e.largeBottomMargin;return a.default.createElement("header",{className:(0,l.default)("view_header",n,{large_margin_bottom:i})},a.default.createElement("h1",null,t,r?a.default.createElement("small",null,r):null),o?a.default.createElement("div",{className:"view_header_menu"},o):null)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("react")),i=n(e("prop-types")),l=n(e("classnames"));o.propTypes={header:i.default.node.isRequired,subheader:i.default.string,className:i.default.string,menu:i.default.node,largeBottomMargin:i.default.bool}},{classnames:"classnames","prop-types":"prop-types",react:"react"}],1081:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ViewHeader",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Section",{enumerable:!0,get:function(){return a.default}});var o=n(e("./ViewHeader")),a=n(e("./Section"))},{"./Section":1079,"./ViewHeader":1080}],1082:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.archivedItemFetch=r.ARCHIVED_ITEM_FETCH=void 0;r.ARCHIVED_ITEM_FETCH="ARCHIVED_ITEM_FETCH";var n=function(e){return{type:"ARCHIVED_ITEM_FETCH",payload:{item:e}}};r.archivedItemFetch=n},{}],1083:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ARCHIVED_ITEM_FETCH",{enumerable:!0,get:function(){return n.ARCHIVED_ITEM_FETCH}}),Object.defineProperty(r,"archivedItemFetch",{enumerable:!0,get:function(){return n.archivedItemFetch}}),Object.defineProperty(r,"archivedCases",{enumerable:!0,get:function(){return o.archivedCases}}),r.default=void 0;var n=e("./actions"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./reducers")),a=o.default;r.default=a},{"./actions":1082,"./reducers":1084}],1084:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.reducer=r.archivedCases=void 0;var a=e("../items"),i=e("./actions"),l=e("../../utils/fp"),s=function(e,t){switch(t.type){case a.ITEM_ARCHIVE:case a.ITEM_COMPLETE:var r=t.payload.id,i=e.items[r];return n({},e,{archived:n({},e.archived,{items:n({},e.archived.items,o({},r,n({},i,{checked:1,in_history:1})))})});case a.ITEM_ARCHIVE_UNDO:case a.ITEM_COMPLETE_UNDO:return n({},e,{archived:n({},e.archived,{items:(0,l.omit)(e.undo.id,e.archived.items)})});case a.ITEM_UNARCHIVE:case a.ITEM_UNCOMPLETE:var s=t.payload.id;return n({},e,{archived:n({},e.archived,{items:(0,l.omit)(s,e.archived.items)})});default:return e}};r.archivedCases=s;var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.ARCHIVED_ITEM_FETCH:var r=t.payload.item;return n({},e,{items:n({},e.items,o({},r.id,r))});default:return e}};r.reducer=u;var c=u;r.default=c},{"../../utils/fp":1166,"../items":1100,"./actions":1082}],1085:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.tick=r.CLOCK_TICK=void 0;var n=e("../utils")
;r.CLOCK_TICK="CLOCK_TICK";var o=function(){return{type:"CLOCK_TICK"}};r.tick=o;var a=function(e,t){if(!e)return(0,n.todayISO)();if("CLOCK_TICK"===t.type){var r=(0,n.todayISO)();return e===r?e:r}return e},i=a;r.default=i},{"../utils":1176}],1086:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=(0,u.createSelector)((0,i.get)("collaborators.all"),(0,i.get)("user"),function(t,r){var o=n({},t);return r&&(o[r.id]=r),e.indexOf("@")>0?(0,l.compose)((0,i.pickBy)(function(t){return t.email===e}))(o):(0,l.compose)((0,i.pickBy)(function(t){return(0,c.partialMatchName)(e,t.full_name)}))(o)});return 1===arguments.length?t:t(arguments[1])}Object.defineProperty(r,"__esModule",{value:!0}),r.searchCollaborators=a,r.createCollaboratorPickBySelector=r.getAllCollaborators=r.getAllProjectCollaborators=r.getAllCollaboratorsGroupByPID=r.isShared=r.isSharedProject=r.default=void 0;var i=e("../utils/fp"),l=e("redux"),s=e("../reducers/modelbridge"),u=e("reselect"),c=e("../utils"),d=e("../reducers/sync"),f=[],p={all:{},byPID:{},invitedByPID:{}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.SYNC_UPDATE:var r=t.payload.projects;if(!r||0===r.length)return e;var o=e.byPID,a=e.invitedByPID,l=r.filter(function(e){return!e.shared||e.is_archived||e.is_deleted}).map(function(e){return e.id});if(0===l.length)return e;var u=!0,c=!1,f=void 0;try{for(var m,h=l[Symbol.iterator]();!(u=(m=h.next()).done);u=!0){var _=m.value;o[_]&&(o=(0,i.omit)(_)(o)),a[_]&&(a=(0,i.omit)(_)(a))}}catch(e){c=!0,f=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw f}}return n({},e,{byPID:o,invitedByPID:a});case s.MODEL_BRIDGE_UPDATE:var y=t.payload.collaborators;return y?{all:n({},y.all),byPID:n({},y.byPID),invitedByPID:n({},y.invitedByPID)}:e;default:return e}},h=m;r.default=h;var _=(0,u.createSelector)((0,i.get)("collaborators.byPID"),function(e){return e?function(t){return!!e[t]}:function(){return!1}});r.isSharedProject=_;var y=function(e,t){return _(e)(t)};r.isShared=y;var v=(0,u.createSelector)(function(e){return e.collaborators},function(e){return e.user},function(e,t){var r=e.all,n=e.byPID,o=e.invitedByPID,a={},l=function(e){for(var n in e){var o=a[n]||{};for(var i in e[n])r[i]&&(o[i]=r[i]);o[t.id]=t,a[n]=o}};return l(n),l(o),a=(0,i.mapValues)(i.values,a)});r.getAllCollaboratorsGroupByPID=v;var g=function(e,t){return v(e)[t]||f};r.getAllProjectCollaborators=g;var b=function(e){return e.collaborators.all};r.getAllCollaborators=b;var w=function(e){return(0,u.createSelector)((0,i.get)("collaborators.all"),(0,i.get)("user"),function(t,r){var a=n({},t,o({},r.id,r));return(0,i.pickBy)(e,a)})};r.createCollaboratorPickBySelector=w},{"../reducers/modelbridge":1110,"../reducers/sync":1131,"../utils":1176,"../utils/fp":1166,redux:"redux",reselect:"reselect"}],1087:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return(e||[]).reduce(function(e,t){return t.project_id&&(e.projects[t.project_id]=n({},t,{id:t.project_id})),t.section_id&&(e.sections[t.section_id]=n({},t,{id:t.section_id})),t.item_id&&(e.items[t.item_id]=n({},t,{id:t.item_id})),e},{projects:{},sections:{},items:{}})}function i(e){var t=e.state,r=e.projectIds;return function(e){if(0===r.length)return e;var n=(0,m.getAssociatesObjectIDs)(r,t),o=n.items,a=n.sections;return(0,_.compose)((0,h.removeFromSlice)("projects",r),(0,h.removeFromSlice)("sections",a),(0,h.removeFromSlice)("items",o))(e)}}function l(e){var t=e.state,r=e.sectionIds;return function(e){if(0===r.length)return e;var n=r.reduce(function(e,t){return e[t]=!0,e},{}),o=(0,y.values)(t.items).filter(function(e){return n[e.section_id]}).map(function(e){return e.id});return(0,_.compose)((0,h.removeFromSlice)("sections",r),(0,h.removeFromSlice)("items",o))(e)}}function s(e,t){switch(t.type){case c.SYNC_UPDATE:var r=t.payload,o=r.sections,a=r.projects,s=r.items,u=(o||[]).filter(function(e){return e.is_deleted}),d=(a||[]).filter(function(e){return e.is_deleted}),m=(s||[]).filter(function(e){return e.is_deleted});if(d.length>0||u.length>0||m.length>0){return n({},e,{completed:(0,_.compose)(l({state:e,sectionIds:u.map(function(e){return e.id})}),i({state:e,projectIds:d.map(function(e){return e.id})}),(0,h.removeFromSlice)("items",m.map(function(e){return e.id})))(e.completed)})}return e;case f.PROJECT_REMOVE:return n({},e,{completed:i({projectIds:t.payload,state:e})(e.completed)});case p.SECTION_REMOVE:return n({},e,{completed:l({sectionIds:[t.payload],state:e})(e.completed)})}return e}Object.defineProperty(r,"__esModule",{value:!0}),r.parseCompleted=a,r.completedCases=s,r.default=void 0;var u=e("./load"),c=e("./sync"),d=e("./items"),f=e("./projects"),p=e("./sections"),m=e("./projects/reducers"),h=e("./utils"),_=e("redux"),y=e("../utils/fp"),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.LOAD_LOCAL_DATA:var r=t.payload.completed;return r||e;case c.SYNC_FULL_UPDATE:return a(t.payload.completed_info);case c.SYNC_UPDATE:var o=t.payload.completed_info,i=e||{},l=i.items,s=i.projects,f=i.sections,p=a(o);return{projects:n({},s,p.projects),sections:n({},f,p.sections),items:n({},l,p.items)};case d.ITEM_DELETE:var m=t.payload.ids;return(0,h.removeFromSlice)("items",m)(e)}return e},g=v;r.default=g},{"../utils/fp":1166,"./items":1100,"./load":1108,"./projects":1119,"./projects/reducers":1120,"./sections":1125,"./sync":1131,"./utils":1136,redux:"redux"}],1088:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./reducers")),o=n.default;r.default=o},{"./reducers":1089}],1089:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){switch(t.type){case i.SYNC_UPDATE:case i.SYNC_FULL_UPDATE:var r=t.payload.items;if(!r)return e;var o=r.filter(function(t){return e.items[t.id]&&!e.projects[t.project_id]});if(0===o.length)return e;var a=n({},e,{items:e.items});return o.forEach(function(e){delete a.items[e.id]}),a;default:return e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var i=e("../sync")},{"../sync":1131}],1090:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}Object.defineProperty(r,"__esModule",{value:!0}),r.countOverdue=r.countSevenDays=r.countToday=r.countByFilter=r.partialStateForFilter=r.countBySection=r.countByLabel=r.countByProject=void 0;var l=e("../utils/fp"),s=e("redux"),u=e("../filterist"),c=e("reselect"),d=e("../utils"),f=e("./selectors"),p=e("./items/selectors"),m=(0,l.mapValues)(function(){return 0}),h=(0,d.memoizeReturn)((0,c.createSelector)(p.getUncompletedExcludeSection,function(e){return e.projects},function(e,t){if(!e||!t)return{};var r=m(t),n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value,u=s.project_id;r[u]||(r[u]=0),r[u]++}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}));r.countByProject=h;var _=(0,d.memoizeReturn)((0,c.createSelector)(p.getUncompletedExcludeSection,function(e){return e.reduce(function(e,t){var r=t.labels;return(void 0===r?[]:r).forEach(function(t){null!=e[t]?e[t]++:e[t]=1}),e},{})}));r.countByLabel=_;var y=(0,c.createSelector)(p.getUncompletedExcludeSection,function(e){return e.sections},function(e,t){if(!e||!t)return{};var r=m(t),n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;s.section_id&&(r[s.section_id]||(r[s.section_id]=0),r[s.section_id]++)}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r});r.countBySection=y;var v=(0,c.createSelector)(p.getUncompletedExcludeSection,function(e){return e.user},function(e){return e.projects},function(e){return e.labels},function(e){return e.collaborators},f.dataLoaded,u.getFilteristConfig,function(e){return e.clock},function(e,t,r,n,o,a,i){return{uncompleted:e,user:t,projects:r,labels:n,collaborators:o,dataLoaded:a,filteristConfig:i}});r.partialStateForFilter=v;var g=(0,d.memoizeReturn)((0,c.createSelector)(v,function(e){return e.filters},function(e,t){var r=e.uncompleted,o=e.dataLoaded,a=e.filteristConfig;if(!o)return{};var i=m(t),c=(0,s.compose)((0,l.map)(function(e){var t=n(e,2),r=t[0],o=t[1];return[r,o,(0,u.createFilterFunc)(o.query,a)]}),(0,l.filter)(function(e){var t=n(e,2);t[0];return t[1].is_favorite}),l.toPairs)(t),d=!0,f=!1,p=void 0;try{for(var h,_=r[Symbol.iterator]();!(d=(h=_.next()).done);d=!0){var y=h.value,v=!0,g=!1,b=void 0;try{for(var w,E=c[Symbol.iterator]();!(v=(w=E.next()).done);v=!0){var j=n(w.value,3),O=j[0];j[1];(0,j[2])(y,e)&&i[O]++}}catch(e){g=!0,b=e}finally{try{v||null==E.return||E.return()}finally{if(g)throw b}}}}catch(e){f=!0,p=e}finally{try{d||null==_.return||_.return()}finally{if(f)throw p}}return i}));r.countByFilter=g;var b=function(e){return(0,c.createSelector)(v,function(t){var r=t.dataLoaded,n=t.uncompleted,o=t.filteristConfig;if(!r)return 0;var a=(0,u.createFilterFunc)(e,o);return n.filter(function(e){return a(e,t)}).length})},w=b("today & !assigned to: other");r.countToday=w;var E=b("7 days & !assigned to: other");r.countSevenDays=E;var j=b("overdue & !assigned to: other");r.countOverdue=j},{"../filterist":121,"../utils":1176,"../utils/fp":1166,"./items/selectors":1102,"./selectors":1128,redux:"redux",reselect:"reselect"}],1091:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e("../reducers/load"),i=e("../reducers/sync"),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_LOCAL_DATA:var r=t.payload.items;if(!r)return e;var o={};for(var l in r)if(r.hasOwnProperty(l)){var s=r[l].due;s&&(o[s.lang]=1)}return o;case i.SYNC_FULL_UPDATE:case i.SYNC_UPDATE:var u=t.payload.items;if(!u)return e;var c=n({},e),d=!1;return u.forEach(function(e){var t=e.due;t&&!c[t.lang]&&(d=1,c[t.lang]=1)}),d?c:e;default:return e}},s=l;r.default=s},{"../reducers/load":1108,"../reducers/sync":1131}],1092:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.detailViewClose=r.detailViewUnmarkNote=r.detailViewShowProject=r.detailViewShowItem=r.default=void 0;var a=e("./sync"),i=e("../utils"),l=function(e){return e&&e.__esModule?e:{default:e}}(e("../models/TemporaryIds")),s=e("../reducers/items"),u=e("../reducers/user"),c=e("../utils/deps"),d=(0,c.defineDeps)("detailView",["Notes"]),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.ITEM_ARCHIVE:case s.ITEM_DELETE:return null===e||t.payload.ids.includes(e.id)?null:e;case"DETAIL_VIEW_SHOW_ITEM":case"DETAIL_VIEW_SHOW_PROJECT":return t.payload;case"DETAIL_VIEW_UNMARK_NOTE":return(0,i.omit)(e,"highlightedNoteId");case"DETAIL_VIEW_CLOSE":return null;case a.SYNC_UPDATE:var r=t.payload.temp_id_mapping;return e&&(0,i.isTempID)(e.id)&&r[e.id]?n({},e,{id:r[e.id]}):e;default:return e}},p=f;r.default=p;var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.activeTab,n=void 0===r?null:r,o=t.highlightedNoteId,a=void 0===o?null:o;return function(t,r){e=l.default.getRealId(e);var o=r();if(!(0,u.isDoistUser)(o)||event&&event.altKey){var i=o.items[e];d.Notes.showItemNotes(i.id,null)}else t({type:"DETAIL_VIEW_SHOW_ITEM",payload:{type:"item",id:e,activeTab:n,highlightedNoteId:a,previousWindowLocation:window.LocationManager.getHash()}}),Signals.sendSignal("change_location","task/"+e)}};r.detailViewShowItem=m;var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.activeTab,n=void 0===r?null:r,o=t.highlightedNoteId,a=void 0===o?null:o;return function(t,r){e=l.default.getRealId(e);var o=r();(0,u.isDoistUser)(o)&&event&&!event.altKey?t({type:"DETAIL_VIEW_SHOW_PROJECT",payload:{type:"project",id:e,activeTab:n,highlightedNoteId:a}}):d.Notes.showProjectNotes(e,a)}};r.detailViewShowProject=h;var _=function(){return{type:"DETAIL_VIEW_UNMARK_NOTE"}};r.detailViewUnmarkNote=_;var y=function(){return function(e,t){var r=t();Signals.sendSignal("change_location",r.detailView.previousWindowLocation),e({type:"DETAIL_VIEW_CLOSE"})}};r.detailViewClose=y},{"../models/TemporaryIds":172,"../reducers/items":1100,"../reducers/user":1135,"../utils":1176,"../utils/deps":1154,"./sync":1131}],1093:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=e.type,r=e.id;return"".concat(t,":").concat(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.draftGet=r.draftAdd=r.DRAFT_ADD=void 0;var i=e("../utils/fp"),l=e("./load"),s=e("./notes"),u=e("./items"),c=e("./projects");r.DRAFT_ADD="DRAFT_ADD";var d=function(e){var t=e.text;return{type:"DRAFT_ADD",payload:{key:a({type:e.parentType,id:e.parentId}),value:t}}};r.draftAdd=d;var f=function(e,t){var r=t.id,n=t.type;return(0,i.get)(["drafts",a({type:n,id:r})],e)};r.draftGet=f;var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.LOAD_LOCAL_DATA:return t.payload.drafts?n({},t.payload.drafts):e;case"DRAFT_ADD":var r=t.payload,i=r.key,d=r.value;if(!d){var f=n({},e);return delete f[i],f}return n({},e,o({},i,d));case s.NOTE_ADD:var p=t.payload,m=p.item_id?s.TYPE_ITEM_NOTE:s.TYPE_PROJECT_NOTE,h=a({type:m,id:p.item_id||p.project_id}),_=n({},e);return delete _[h],_;case u.ITEM_DELETE:var y=t.payload.ids;if(y&&y.length>0){var v=n({},e);return y.forEach(function(e){var t=a({type:s.TYPE_ITEM_NOTE,id:e});delete v[t]}),v}return e;case c.PROJECT_REMOVE:var g=t.payload;if(g&&g.length>0){var b=n({},e);return g.forEach(function(e){var t=a({type:s.TYPE_PROJECT_NOTE,id:e});delete b[t]}),b}return e;default:return e}},m=p;r.default=m},{"../utils/fp":1166,"./items":1100,"./load":1108,"./notes":1114,"./projects":1119}],1094:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return p(e)||f(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function p(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}Object.defineProperty(r,"__esModule",{value:!0}),r.filterRemove=r.filterUpdateOrders=r.filterUpdate=r.filterAdd=r.FILTER_REMOVE=r.FILTER_UPDATE=r.FILTER_ADD=void 0;var m=e("../../utils"),h=n(e("../../models/SyncEngine")),_=n(e("../../models/TemporaryIds"));r.FILTER_ADD="FILTER_ADD";r.FILTER_UPDATE="FILTER_UPDATE";r.FILTER_REMOVE="FILTER_REMOVE";var y=function(e){return e.replace(/[<>"=#+]+/g,"_")},v=function(e){var t=e.name,r=e.query,n=e.color,o=e.is_favorite;return function(e,a){var i=_.default.generate("filter"),l=Math.max.apply(Math,c((0,m.values)(a().filters).map(function(e){return e.item_order}))),s={id:i,name:y(t).trim(),item_order:l+1,query:r,color:n,is_favorite:o};return h.default.queueUpdate({type:"filter_add",temp_id:i,args:s}),e({type:"FILTER_ADD",payload:s}),s}};r.filterAdd=v;var g=function(e,t){return function(r,n){e=_.default.getRealId(e);var o=n().filters[e];if(o)return o=s({},o,t),o.name=y(o.name).trim(),h.default.queueUpdate({type:"filter_update",args:o}),r({type:"FILTER_UPDATE",payload:o}),o}};r.filterUpdate=g;var b=function(e){return function(t){if(0!==Object.keys(e).length){e=(0,m.mapKeys)(e,function(e,t){return(0,m.isTempID)(t)?_.default.getRealId(t):t}),h.default.queueUpdate({type:"filter_update_orders",args:{id_order_mapping:JSON.stringify(e)}});t({type:"FILTER_UPDATE",payload:(0,m.toPairs)(e).map(function(e){var t=o(e,2),r=t[0],n=t[1];return{id:(0,m.isTempID)(r)?r:parseInt(r),item_order:n}})})}}};r.filterUpdateOrders=b;var w=function(e){return function(t,r){e=_.default.getRealId(e);var n=r().filters[e];n&&(h.default.queueUpdate({type:"filter_delete",args:{id:n.id}}),t({type:"FILTER_REMOVE",payload:n.id}))}};r.filterRemove=w},{"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../utils":1176}],1095:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"FILTER_ADD",{enumerable:!0,get:function(){return n.FILTER_ADD}}),Object.defineProperty(r,"FILTER_UPDATE",{enumerable:!0,get:function(){return n.FILTER_UPDATE}}),Object.defineProperty(r,"FILTER_REMOVE",{enumerable:!0,get:function(){return n.FILTER_REMOVE}}),Object.defineProperty(r,"filterAdd",{enumerable:!0,get:function(){return n.filterAdd}}),Object.defineProperty(r,"filterUpdate",{enumerable:!0,get:function(){return n.filterUpdate}}),Object.defineProperty(r,"filterUpdateOrders",{enumerable:!0,get:function(){return n.filterUpdateOrders}}),Object.defineProperty(r,"filterRemove",{enumerable:!0,get:function(){return n.filterRemove}}),Object.defineProperty(r,"filterGetSource",{enumerable:!0,get:function(){return a.filterGetSource}}),Object.defineProperty(r,"filterGetFavorite",{enumerable:!0,get:function(){return a.filterGetFavorite}}),Object.defineProperty(r,"filterGetByID",{enumerable:!0,get:function(){return a.filterGetByID}}),Object.defineProperty(r,"filterGetAll",{enumerable:!0,get:function(){return a.filterGetAll}}),Object.defineProperty(r,"filterGetByName",{enumerable:!0,get:function(){return a.filterGetByName}}),Object.defineProperty(r,"isDefaultFilter",{enumerable:!0,get:function(){return a.isDefaultFilter}}),r.default=void 0;var n=e("./actions"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./reducers")),a=e("./selectors"),i=o.default;r.default=i},{"./actions":1094,"./reducers":1096,"./selectors":1097}],1096:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e("../../utils"),i=e("../load"),l=e("../sync"),s=e("../utils"),u=e("./actions"),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.LOAD_LOCAL_DATA:return t.payload.filters?t.payload.filters:e;case l.SYNC_UPDATE:var r=t.payload,o=r.filters,c=r.temp_id_mapping;return c&&(e=(0,s.resolveTempID)(e,c)),o&&(e=(0,s.mergeSyncUpdate)(e,o)),e;case l.SYNC_FULL_UPDATE:return(0,a.keyBy)(t.payload.filters,"id");case u.FILTER_ADD:var d=Object.assign({},e),f=t.payload;return d[f.id]=f,d;case u.FILTER_UPDATE:var p=$isArray(t.payload)?t.payload:[t.payload];p=p.filter(function(t){return!!e[t.id]}).map(function(t){return n({},e[t.id],t)});var m=(0,a.keyBy)(p,"id");return n({},e,m);case u.FILTER_REMOVE:var h=t.payload,_=Object.assign({},e);return delete _[h],_;default:return e}},d=c;r.default=d},{"../../utils":1176,"../load":1108,"../sync":1131,"../utils":1136,"./actions":1094}],1097:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.isDefaultFilter=r.filterGetByName=r.filterGetAll=r.filterGetByID=r.filterGetFavorite=r.filterGetSource=void 0;var o=e("../../utils"),a=e("../../utils/fp"),i=e("reselect"),l=n(e("../../models/TemporaryIds")),s=e("redux"),u=n(e("../../utils/partialMatchIndex")),c=e("../user"),d={1:{id:1,name:_x("filter","Assigned to me"),query:"assigned to: me",color:12},2:{id:2,name:_x("filter","Assigned to others"),query:"assigned to: others",color:12},3:{id:3,name:_x("filter","Priority 1"),query:"priority 1",color:6},4:{id:4,name:_x("filter","Priority 2"),query:"priority 2",color:6},5:{id:5,name:_x("filter","Priority 3"),query:"priority 3",color:6},6:{id:6,name:_x("filter","Priority 4"),query:"priority 4",color:6},7:{id:7,name:_x("filter","View all"),query:"view all",color:6},8:{id:8,name:_x("filter","No due date"),query:"no due date",color:6}},f=(0,i.createSelector)(c.isPremium,function(e){return e.filters},function(e,t){return e?t:d});r.filterGetSource=f;var p=(0,i.createSelector)(f,(0,s.compose)((0,a.sortBy)(["item_order"]),(0,a.filter)(function(e){return e.is_favorite}),o.values));r.filterGetFavorite=p;var m=function(e,t){return t=l.default.getRealId(t),f(e)[t]};r.filterGetByID=m;var h=(0,i.createSelector)(f,(0,s.compose)((0,a.sortBy)("item_order"),o.values,function(e){return e||{}}));r.filterGetAll=h;var _=function(e,t){return(0,s.compose)((0,a.map)(function(e){return e.x}),(0,a.sortBy)(["i","x.item_order","x.id"]),(0,a.filter)(function(e){return-1!==e.i}),(0,a.map)(function(e){return{i:(0,u.default)(t,e.name),x:e}}),o.values,f)(e)};r.filterGetByName=_;var y=function(e){return!!d[e]};r.isDefaultFilter=y},{"../../models/TemporaryIds":172,"../../utils":1176,"../../utils/fp":1166,"../../utils/partialMatchIndex":1194,"../user":1135,redux:"redux",reselect:"reselect"}],1098:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../../logger/Logger")),o=function(e,t){return function(r,o){try{return e(r,o)}catch(e){return n.captureError(e,t),r}}},a=o;r.default=a},{"../../logger/Logger":129}],1099:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){return d(e)||c(e)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.delta,o=void 0===n?0:n,a=r.asError,i=void 0!==a&&a,l=(0,O.countByProject)(e)[t],s=(0,S.itemsPerProjectLimit)(e);if(l+o>=s){var u=A(s);return i?{error:u}:((0,S.isPremium)(e)?alert(u):(0,C.showTaskLimit)(),!0)}return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.itemMoveDueToDate=r.itemUpdateDayOrder=r.itemDuplicate=r.itemSortProjectItems=r.itemUpdateDayOrderUndo=r.itemUpdateDueUndo=r.itemUpdateDue=r.itemMoveAndReorderUndo=r.itemMoveAndReorder=r.itemMoveMultiple=r.itemUnarchive=r.itemUncomplete=r.itemArchiveUndo=r.itemArchive=r.itemCompleteRecurringUndo=r.itemCompleteUndo=r.completeNonRecurring=r.itemComplete=r.itemUpdate=r.itemDelete=r.itemAdd=r.ITEM_UPDATE_DUE_UNDO=r.ITEM_UPDATE_DUE=r.ITEM_UPDATE_DAY_ORDER_UNDO=r.ITEM_UPDATE_DAY_ORDER=r.ITEM_UPDATE=r.ITEM_UNCOMPLETE=r.ITEM_UNARCHIVE=r.ITEM_MOVE_MULTIPLE_UNDO=r.ITEM_MOVE_MULTIPLE=r.ITEM_MOVE_AND_REORDER_UNDO=r.ITEM_MOVE_AND_REORDER=r.ITEM_DUPLICATE=r.ITEM_DELETE=r.ITEM_COMPLETE_UNDO=r.ITEM_COMPLETE_RECURRING_UNDO=r.ITEM_COMPLETE_RECURRING=r.ITEM_COMPLETE=r.ITEM_ARCHIVE_UNDO=r.ITEM_ARCHIVE=r.ITEM_ADD=void 0;var h=e("../../utils"),_=e("../../utils/fp"),y=e("redux"),v=n(e("../../models/SyncEngine")),g=n(e("../../models/TemporaryIds")),b=n(e("../../models/DateExt")),w=e("./selectors"),E=e("../collaborators"),j=e("../utils"),O=e("../counts"),S=e("../user"),P=e("../../models/Reminders.js"),I=e("../../utils/deps"),k=e("../notes/constants"),T=e("./utils"),C=e("../../containers/premium_promo/PremiumOnlyModal"),D=(0,I.defineDeps)("reducers/items/actions",["notesActions"]);r.ITEM_ADD="ITEM_ADD";r.ITEM_ARCHIVE="ITEM_ARCHIVE";r.ITEM_ARCHIVE_UNDO="ITEM_ARCHIVE_UNDO";r.ITEM_COMPLETE="ITEM_COMPLETE";r.ITEM_COMPLETE_RECURRING="ITEM_COMPLETE_RECURRING";r.ITEM_COMPLETE_RECURRING_UNDO="ITEM_COMPLETE_RECURRING_UNDO";r.ITEM_COMPLETE_UNDO="ITEM_COMPLETE_UNDO";r.ITEM_DELETE="ITEM_DELETE";r.ITEM_DUPLICATE="ITEM_DUPLICATE";r.ITEM_MOVE_AND_REORDER="ITEM_MOVE_AND_REORDER";r.ITEM_MOVE_AND_REORDER_UNDO="ITEM_MOVE_AND_REORDER_UNDO";r.ITEM_MOVE_MULTIPLE="ITEM_MOVE_MULTIPLE";r.ITEM_MOVE_MULTIPLE_UNDO="ITEM_MOVE_MULTIPLE_UNDO";r.ITEM_UNARCHIVE="ITEM_UNARCHIVE";r.ITEM_UNCOMPLETE="ITEM_UNCOMPLETE";r.ITEM_UPDATE="ITEM_UPDATE";r.ITEM_UPDATE_DAY_ORDER="ITEM_UPDATE_DAY_ORDER";r.ITEM_UPDATE_DAY_ORDER_UNDO="ITEM_UPDATE_DAY_ORDER_UNDO";r.ITEM_UPDATE_DUE="ITEM_UPDATE_DUE";r.ITEM_UPDATE_DUE_UNDO="ITEM_UPDATE_DUE_UNDO",_n("For performance reasons a task can only have one character.","For performance reasons a task can only have {n} characters.",1);var A=function(e){return(0,h.format)(_n("For performance reasons you can add at most one task per project. Please try re-organizing your tasks into multiple projects.","For performance reasons you can add at most {n} tasks per project. Please try re-organizing your tasks into multiple projects.",e),{n:e})},M=function(e,t){return(0,h.isEqual)((0,_.pick)((0,h.keys)(e),t),e)},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r,n){var o=n(),a=m(o,e.project_id,{asError:t.return_as_error});if(a)return a;var i=f({id:g.default.generate("item"),due:e.due||null,section_id:null,parent_id:null,checked:0,user_id:o.user.id,in_history:0,collapsed:0,date_added:new Date,assigned_by_uid:null,responsible_uid:null},e);if(i.content=$strip(i.content),0===i.content.length)throw new Error("item.add(): content cannot be empty");return i.labels=i.labels||[],i.child_order=i.child_order||(0,w.itemGetMaxTopLevelChildOrder)((0,_.pick)(["section_id","project_id"],e),o)+1,i.responsible_uid&&(0,E.isShared)(o,i.project_id)&&(i.assigned_by_uid=o.user.id),i=(0,j.resolveTempIDFields)(["section_id","project_id","parent_id"],i),delete i.note,delete i.reminders,v.default.queueUpdate({type:"item_add",temp_id:i.id,args:se(i)}),r({type:"ITEM_ADD",payload:i}),e.note&&r(D.notesActions.noteAdd({parentId:i.id,type:k.TYPE_ITEM_NOTE,content:e.note})),e.reminders&&e.reminders.length&&e.reminders.forEach(function(e){var t=f({},e,{item_id:i.id});"location"===t.type?P.RemindersModel.addLocation(t):P.RemindersModel.add(t)}),o=n(),ue(i.id,o),i}};r.itemAdd=x;var R=function(e){var t=(0,h.isArray)(e)?e:[e];return t=t.map(function(e){return g.default.getRealId(e)}),t.forEach(function(e){v.default.queueUpdate({type:"item_delete",args:{id:e}})}),{type:"ITEM_DELETE",payload:{ids:t}}};r.itemDelete=R;var N=function(e){return function(t,r){e=(0,j.resolveTempIDFields)(["id","project_id","parent_id","labels"],e),e=(0,_.omit)(["section_id","parent_id","child_order"],e);var n=e,o=n.id,a=r(),i=a.items[e.id];if(M(e,i))return i;if(e.content&&(e.content=$strip(e.content),0===e.content.length))return i;e.project_id&&i.project_id!==e.project_id&&(t(Y([o],e.project_id)),a=r(),i=a.items[o],delete e.project_id),(e.due&&(!i.due||i.due.isSameDate(e.due))||e.priority&&e.priority!==i.priority)&&(e.day_order=-1);var l=f({},e);return l.due&&(l.due=l.due.toAPIFormat()),v.default.queueUpdate({type:"item_update",args:l}),t({type:"ITEM_UPDATE",payload:e}),a=r(),ue(i.id,a),a=r(),a.items[o]}};r.itemUpdate=N;var L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force_history,n=void 0===r?0:r
;return e=g.default.getRealId(e),function(t,r){var o=r().items[e];return o.due&&o.due.is_recurring&&0===o.in_history&&!n?U(o,t,r):$(o,n,t,r)}};r.itemComplete=L;var $=function(e,t,r,n){var o=(0,h.toISODateString)(new Date,{toUTC:!0}),a=[e].concat(s((0,w.itemGetChildren)(e.id,n())));v.default.queueUpdate({type:"item_complete",args:{id:e.id,date_completed:o,force_history:t}}),r({type:"ITEM_COMPLETE",payload:{id:e.id,force_history:t,date_completed:o}});var i;if(t||null===e.parent_id)i=a.map(function(e){return f({},e,{in_history:1,checked:1})});else{var l=n();i=a.map(function(e){return l.items[e.id]})}return i};r.completeNonRecurring=$;var U=function(e,t,r){var n=Array.from(e.due.nextRecurrence()),a=o(n,2),i=a[0];return a[1]?$(e,1,t,r):(v.default.queueUpdate({type:"item_update_date_complete",args:{id:e.id,due:i.toAPIFormat(),is_forward:1}}),t({type:"ITEM_COMPLETE_RECURRING",payload:{id:e.id,nextRecurrence:i}}),e=r().items[e.id],[e])},B=function(){return function(e,t){var r=t().undo,n=r.type,o=r.id,a=r.prevState;if("ITEM_COMPLETE_UNDO"===n){o=g.default.getRealId(o);var i=(0,y.compose)((0,_.map)((0,_.pick)(["id","checked"])),(0,_.filter)(function(e){return e.id!==o}),h.values)(a.items);v.default.queueUpdate({type:"item_complete_undo",args:{id:o,descendants:i}}),e({type:"ITEM_COMPLETE_UNDO"}),Signals.sendSignal("instant_refresh_interface")}}};r.itemCompleteUndo=B;var V=function(){return function(e,t){var r=t().undo,n=r.type,o=r.id,a=r.duePrev;"ITEM_COMPLETE_RECURRING_UNDO"===n&&(o=g.default.getRealId(o),v.default.queueUpdate({type:"item_update_date_complete",args:{id:o,due:a,is_forward:0}}),e({type:"ITEM_COMPLETE_RECURRING_UNDO"}),Signals.sendSignal("instant_refresh_interface"))}};r.itemCompleteRecurringUndo=V;var F=function(e){return function(t,r){var n=(0,h.isArray)(e)?e:[e];n=n.map(function(e){return g.default.getRealId(e)});var o=r(),a=(0,h.toISODateString)(new Date,{toUTC:!0}),i=!0,l=!1,u=void 0;try{for(var c,d=n[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var f=c.value,p=o.items[f];v.default.queueUpdate({type:"item_complete",args:{id:f,force_history:1,date_completed:p.date_completed||a}})}}catch(e){l=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw u}}return t({type:"ITEM_ARCHIVE",payload:{ids:n}}),(0,y.compose)(_.flatten,(0,_.map)(function(e){return[o.items[e]].concat(s((0,w.itemGetChildren)(e,o)))}))(n)}};r.itemArchive=F;var H=function(){return function(e,t){var r=t().undo,n=r.type,o=r.ids,a=r.prevState;if("ITEM_ARCHIVE_UNDO"===n){o=o.map(function(e){return g.default.getRealId(e)});var i=!0,l=!1,s=void 0;try{for(var u,c=o[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)!function(){var e=u.value,t=a.items[e],r=(0,y.compose)((0,_.map)((0,_.pick)(["id","checked"])),(0,_.filter)(function(t){return t.id!==e}),h.values)(a.items);v.default.queueUpdate({type:"item_archive_undo",args:{id:e,checked:t.checked,descendants:r}})}()}catch(e){l=!0,s=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw s}}e({type:"ITEM_ARCHIVE_UNDO"}),Signals.sendSignal("instant_refresh_interface")}}};r.itemArchiveUndo=H;var q=function(e){return e=g.default.getRealId(e),v.default.queueUpdate({type:"item_uncomplete",args:{id:e}}),{type:"ITEM_UNCOMPLETE",payload:e}};r.itemUncomplete=q;var G=function(e){return e=(0,T.deserializeItemFields)(e),v.default.queueUpdate({type:"item_unarchive",args:{id:e.id}}),{type:"ITEM_UNARCHIVE",payload:e}};r.itemUnarchive=G;var z=function(e,t){var r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;if(t[l])return p({},l,t[l])}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return{}},W=function(e){return f({id:e.id},z(["parent_id","section_id","project_id"],e))},Y=function(e,t,r){return function(n,o){var a=o();if(e=e.map(function(e){return g.default.getRealId(e)}),t=g.default.getRealId(t),!m(a,t,{delta:e.length})){var i=(0,y.compose)(function(e){return new Set(e)},(0,_.map)(function(e){return e.id}),_.flatten,(0,_.map)(function(e){return(0,w.itemGetChildren)(e,a)}))(e);e=e.filter(function(e){return!i.has(e)});var l=!0,s=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value;r?v.default.queueUpdate({type:"item_move",args:{id:f,section_id:r}}):v.default.queueUpdate({type:"item_move",args:{id:f,project_id:t}})}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}n({type:"ITEM_MOVE_MULTIPLE",payload:{ids:e,destPID:t}})}}};r.itemMoveMultiple=Y;var K=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.allowUndo,o=void 0===n||n;return function(r,n){var a=n(),i=a.items;if(e){if(e=(0,j.resolveTempIDFields)(["id","parent_id","section_id","project_id"],e),e.parent_id===e.id)throw Error("item parent_id cannot be itself");var l=n().items[e.id];if(m(a,e.project_id))return;M(e,l)?e=null:(e=W(e),v.default.queueUpdate({type:"item_move",args:e}))}if(t&&(t=t.map((0,j.resolveTempIDFields)("id")).filter(function(e){var t=e.id,r=e.child_order;return i[t].child_order!==r}),t.length>0?v.default.queueUpdate({type:"item_reorder",args:{items:t}}):t=null),e||t)return r({type:"ITEM_MOVE_AND_REORDER",payload:{moveTo:e,orders:t,allowUndo:o}})}};r.itemMoveAndReorder=K;var J=function(){return function(e,t){var r=t().undo,n=r.type,o=r.moveTo,a=r.orders;"ITEM_MOVE_AND_REORDER_UNDO"===n&&(o&&(o=(0,j.resolveTempIDFields)(["id","parent_id","section_id","project_id"],o),o=W(o),v.default.queueUpdate({type:"item_move",args:o})),a&&(a=a.map((0,j.resolveTempIDFields)("id")),v.default.queueUpdate({type:"item_reorder",args:{items:a}})),e({type:"ITEM_MOVE_AND_REORDER_UNDO",payload:{moveTo:o,orders:a}}),Signals.sendSignal("instant_refresh_interface"))}};r.itemMoveAndReorderUndo=J;var Q=function(e){return function(t,r){var n=r(),a=n,i=a.items;e=(0,h.mapKeys)(e,function(e,t){return g.default.getRealId(t)}),(0,_.toPairs)(e).forEach(function(t){var r=o(t,2),n=r[0],a=r[1];a instanceof Date&&(a=i[n].due?i[n].due.inheritDate({year:a.getFullYear(),month:a.getMonth(),day:a.getDate()}):b.default.fromDate(a),e[n]=a),v.default.queueUpdate({type:"item_update",args:{id:n,due:a?a.toAPIFormat():null}})}),t({type:"ITEM_UPDATE_DUE",payload:e}),n=r(),(0,h.keys)(e).forEach(function(e){return ue(e,n)}),Signals.sendSignal("instant_refresh_interface")}};r.itemUpdateDue=Q;var X=function(){return function(e,t){var r=t(),n=r.undo;if("ITEM_UPDATE_DUE_UNDO"===n.type){var a=(0,h.mapKeys)(n.idToDue,function(e,t){return g.default.getRealId(t)});(0,_.toPairs)(a).forEach(function(e){var t=o(e,2),r=t[0],n=t[1];v.default.queueUpdate({type:"item_update",args:{id:r,due:n?n.toAPIFormat():null}})}),e({type:"ITEM_UPDATE_DUE_UNDO"}),Signals.sendSignal("instant_refresh_interface")}}};r.itemUpdateDueUndo=X;var Z=function(){return function(e,t){var r=t(),n=r.undo;"ITEM_UPDATE_DAY_ORDER_UNDO"===n.type&&(v.default.queueUpdate({type:"item_update_day_orders",args:{ids_to_orders:n.orders}}),e({type:"ITEM_UPDATE_DAY_ORDER_UNDO"}),Signals.sendSignal("instant_refresh_interface"))}};r.itemUpdateDayOrderUndo=Z;var ee=(0,h.curry)(function(e,t){return(0,y.compose)(_.flatten,h.values,(0,_.mapValues)(function(e){return e.map(function(e,t){return{id:e.id,child_order:t+1}})}),(0,_.mapValues)(function(t){return t.sort(e),t}),(0,_.groupBy)("parent_id"))(t)}),te=function(e,t){return function(r,n){e=g.default.getRealId(e);var o=n(),a=(0,w.itemGetByPID)(o)[e],i=(0,y.compose)((0,_.filter)(function(e){var t=e.id,r=e.child_order;return o.items[t].child_order!==r}),_.flatten,h.values,(0,_.mapValues)(ee(t)),(0,_.groupBy)("section_id"))(a);r(K(null,i))}};r.itemSortProjectItems=te;var re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.withNotes,n=void 0===r||r;return function(t,r){e=e.map(function(e){return g.default.getRealId(e)});var o=r(),a=[],i=[],l={};e.forEach(function(e){var t=ae(e,o),r=t.next,n=t.newIDs,s=t.reorderedIDs,u=t.idMapping;o=r,a=a.concat(n),i=i.concat(s),l=f({},l,u)});var s=new Set(e.map(function(e){return o.items[e].project_id})),u=!0,c=!1,d=void 0;try{for(var p,_=s[Symbol.iterator]();!(u=(p=_.next()).done);u=!0){var y=p.value;if(m(o,y))return}}catch(e){c=!0,d=e}finally{try{u||null==_.return||_.return()}finally{if(c)throw d}}(0,h.uniq)(a).forEach(function(e){v.default.queueUpdate({type:"item_add",temp_id:e,args:se(o.items[e])})}),i.length>0&&v.default.queueUpdate({type:"item_reorder",args:{items:(0,h.uniq)(i).map(function(e){return{id:e,child_order:o.items[e].child_order}})}});var b=(0,h.keys)(l).map(h.parseId);o=ie(b,l,o),n&&(o=le(b,l,o)),t({type:"ITEM_DUPLICATE",payload:{state:o}}),Signals.sendSignal("instant_refresh_interface")}};r.itemDuplicate=re;var ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.withUndo,n=void 0!==r&&r;return e=(0,h.mapKeys)(e,function(e,t){return g.default.getRealId(t)}),v.default.queueUpdate({type:"item_update_day_orders",args:{ids_to_orders:e}}),{type:"ITEM_UPDATE_DAY_ORDER",payload:{orders:e,withUndo:n}}};r.itemUpdateDayOrder=ne;var oe=function(e,t){return function(r,n){var o=n(),a=o.items[e];if(a.due){var i=a.due.inheritDate({year:t.getFullYear(),month:t.getMonth(),day:t.getDate()});a.due.isSameDate(i)||r(Q(p({},a.id,i)))}else{var l=b.default.fromDate(t,{withTime:!1});r(Q(p({},a.id,l)))}}};r.itemMoveDueToDate=oe;var ae=function(e,t){var r=t.items[e],n=(0,w.itemGetChildren)(e,t),o=[r].concat(s(n)).map(h.cloneDeep),a=o.reduce(function(e,t){var r=g.default.generate("item");return e[t.id]=r,e},{}),i=(0,h.toISODateString)(new Date,{toUTC:!0});o=o.map(function(e){return f({},e,{id:a[e.id],parent_id:a[e.parent_id]||e.parent_id,checked:0,date_added:i})});var l=r.child_order;o[0]=f({},o[0],{child_order:l+1});var u;if(r.parent_id){var c=t.items[r.parent_id];u=(0,w.itemGetChildren)(c.id,t).filter(function(e){return e.child_order>l}).map(function(e){return f({},e,{child_order:e.child_order+1})})}else{u=(0,w.itemGetByPID)(t)[r.project_id].filter(function(e){return!e.parent_id}).filter(function(e){return e.child_order>l}).map(function(e){return f({},e,{child_order:e.child_order+1})})}var d=f({},t.items,(0,h.byID)(o),(0,h.byID)(u)),p=f({},t,{items:d}),m=u.map(function(e){return e.id});return{next:p,newIDs:o.map(function(e){return e.id}),reorderedIDs:m,idMapping:a}},ie=function(e,t,r){var n=(0,T.getAssociatesObjectIDs)(e,r),o=n.reminders,a=o.map(function(e){var n=r.reminders[e];return f({},n,{id:g.default.generate("reminders"),item_id:t[n.item_id]})}),i=f({},r,{reminders:f({},r.reminders,(0,h.byID)(a))});return a.forEach(function(e){v.default.queueUpdate({type:"reminder_add",temp_id:e.id,args:e})}),i},le=function(e,t,r){var n=(0,T.getAssociatesObjectIDs)(e,r),o=n.notes,a=o.map(function(e){var n=r.notes[e];return f({},n,{id:g.default.generate("notes"),item_id:t[n.item_id]})}),i=f({},r,{notes:f({},r.notes,(0,h.byID)(a))});return a.forEach(function(e){v.default.queueUpdate({type:"note_add",temp_id:e.id,args:e})}),i},se=function(e){var t=f({},e,{due:e.due?e.due.toAPIFormat():null});return delete t.sync_id,t},ue=function(e,t){var r=t.items[e];if(r.due){if(!r.due.with_time)return void P.RemindersModel.removeRelative(r.id);var n=t.user,o=n.auto_reminder,a=n.default_reminder;if(-1!==o&&(0,S.isPremium)(t)&&r.due&&r.due.with_time){var i=(0,h.values)(t.reminders).filter(function(e){return e.item_id===r.id});if(i=i.concat(P.BufferedRemindersModel.reminders),!(i.length>0)){var l=r.responsible_uid||n.id;P.RemindersModel.add({item_id:r.id,service:a,minute_offset:o,notify_uid:l,type:"relative"})}}}}},{"../../containers/premium_promo/PremiumOnlyModal":108,"../../models/DateExt":152,"../../models/Reminders.js":161,"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../utils":1176,"../../utils/deps":1154,"../../utils/fp":1166,"../collaborators":1086,"../counts":1090,"../notes/constants":1113,"../user":1135,"../utils":1136,"./selectors":1102,"./utils":1103,redux:"redux"}],1100:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ITEM_ARCHIVE",{enumerable:!0,get:function(){return n.ITEM_ARCHIVE}}),Object.defineProperty(r,"ITEM_ARCHIVE_UNDO",{enumerable:!0,get:function(){return n.ITEM_ARCHIVE_UNDO}}),Object.defineProperty(r,"ITEM_COMPLETE",{enumerable:!0,get:function(){return n.ITEM_COMPLETE}}),Object.defineProperty(r,"ITEM_COMPLETE_RECURRING",{enumerable:!0,get:function(){return n.ITEM_COMPLETE_RECURRING}}),Object.defineProperty(r,"ITEM_COMPLETE_RECURRING_UNDO",{enumerable:!0,get:function(){return n.ITEM_COMPLETE_RECURRING_UNDO}}),Object.defineProperty(r,"ITEM_COMPLETE_UNDO",{enumerable:!0,get:function(){return n.ITEM_COMPLETE_UNDO}}),Object.defineProperty(r,"ITEM_DELETE",{enumerable:!0,get:function(){return n.ITEM_DELETE}}),Object.defineProperty(r,"ITEM_MOVE_AND_REORDER",{enumerable:!0,get:function(){return n.ITEM_MOVE_AND_REORDER}}),Object.defineProperty(r,"ITEM_MOVE_AND_REORDER_UNDO",{enumerable:!0,get:function(){return n.ITEM_MOVE_AND_REORDER_UNDO}}),Object.defineProperty(r,"ITEM_MOVE_MULTIPLE",{enumerable:!0,get:function(){return n.ITEM_MOVE_MULTIPLE}}),Object.defineProperty(r,"ITEM_MOVE_MULTIPLE_UNDO",{enumerable:!0,get:function(){return n.ITEM_MOVE_MULTIPLE_UNDO}}),Object.defineProperty(r,"ITEM_UNARCHIVE",{enumerable:!0,get:function(){return n.ITEM_UNARCHIVE}}),Object.defineProperty(r,"ITEM_UNCOMPLETE",{enumerable:!0,get:function(){return n.ITEM_UNCOMPLETE}}),Object.defineProperty(r,"ITEM_UPDATE",{enumerable:!0,get:function(){return n.ITEM_UPDATE}}),Object.defineProperty(r,"ITEM_UPDATE_DUE",{enumerable:!0,get:function(){return n.ITEM_UPDATE_DUE}}),Object.defineProperty(r,"ITEM_UPDATE_DUE_UNDO",{enumerable:!0,get:function(){return n.ITEM_UPDATE_DUE_UNDO}}),Object.defineProperty(r,"ITEM_UPDATE_DAY_ORDER_UNDO",{enumerable:!0,get:function(){return n.ITEM_UPDATE_DAY_ORDER_UNDO}}),Object.defineProperty(r,"itemAdd",{enumerable:!0,get:function(){return n.itemAdd}}),Object.defineProperty(r,"itemArchive",{enumerable:!0,get:function(){return n.itemArchive}}),Object.defineProperty(r,"itemArchiveUndo",{enumerable:!0,get:function(){return n.itemArchiveUndo}}),Object.defineProperty(r,"itemComplete",{enumerable:!0,get:function(){return n.itemComplete}}),Object.defineProperty(r,"itemCompleteRecurringUndo",{enumerable:!0,get:function(){return n.itemCompleteRecurringUndo}}),Object.defineProperty(r,"itemCompleteUndo",{enumerable:!0,get:function(){return n.itemCompleteUndo}}),Object.defineProperty(r,"itemDelete",{enumerable:!0,get:function(){return n.itemDelete}}),Object.defineProperty(r,"itemDuplicate",{enumerable:!0,get:function(){return n.itemDuplicate}}),Object.defineProperty(r,"itemMoveAndReorder",{enumerable:!0,get:function(){return n.itemMoveAndReorder}}),Object.defineProperty(r,"itemMoveAndReorderUndo",{enumerable:!0,get:function(){return n.itemMoveAndReorderUndo}}),Object.defineProperty(r,"itemMoveMultiple",{enumerable:!0,get:function(){return n.itemMoveMultiple}}),Object.defineProperty(r,"itemSortProjectItems",{enumerable:!0,get:function(){return n.itemSortProjectItems}}),Object.defineProperty(r,"itemUnarchive",{enumerable:!0,get:function(){return n.itemUnarchive}}),Object.defineProperty(r,"itemUncomplete",{enumerable:!0,get:function(){return n.itemUncomplete}}),Object.defineProperty(r,"itemUpdate",{enumerable:!0,get:function(){return n.itemUpdate}}),Object.defineProperty(r,"itemUpdateDayOrder",{enumerable:!0,get:function(){return n.itemUpdateDayOrder}}),Object.defineProperty(r,"itemUpdateDayOrderUndo",{enumerable:!0,get:function(){return n.itemUpdateDayOrderUndo}}),Object.defineProperty(r,"itemUpdateDue",{enumerable:!0,get:function(){return n.itemUpdateDue}}),Object.defineProperty(r,"itemUpdateDueUndo",{enumerable:!0,get:function(){return n.itemUpdateDueUndo}}),Object.defineProperty(r,"itemMoveDueToDate",{enumerable:!0,get:function(){return n.itemMoveDueToDate}}),Object.defineProperty(r,"itemGetAncestors",{enumerable:!0,get:function(){return o.itemGetAncestors}}),Object.defineProperty(r,"itemGetByID",{enumerable:!0,get:function(){return o.itemGetByID}}),Object.defineProperty(r,"itemGetByName",{enumerable:!0,get:function(){return o.itemGetByName}}),Object.defineProperty(r,"itemGetByPID",{enumerable:!0,get:function(){return o.itemGetByPID}}),Object.defineProperty(r,"itemGetBySyncID",{enumerable:!0,get:function(){return o.itemGetBySyncID}}),Object.defineProperty(r,"itemGetChildren",{enumerable:!0,get:function(){return o.itemGetChildren}}),Object.defineProperty(r,"itemGetIndent",{enumerable:!0,get:function(){return o.itemGetIndent}}),Object.defineProperty(r,"itemGetMaxTopLevelChildOrder",{enumerable:!0,get:function(){return o.itemGetMaxTopLevelChildOrder}}),Object.defineProperty(r,"itemGetOwn",{enumerable:!0,get:function(){return o.itemGetOwn}}),Object.defineProperty(r,"itemGetSectionGroups",{enumerable:!0,get:function(){return o.itemGetSectionGroups}}),Object.defineProperty(r,"itemGetUncompleted",{enumerable:!0,get:function(){return o.itemGetUncompleted}}),Object.defineProperty(r,"itemGetVisible",{enumerable:!0,get:function(){return o.itemGetVisible}}),Object.defineProperty(r,"itemGetDueByDate",{enumerable:!0,get:function(){return o.itemGetDueByDate}}),Object.defineProperty(r,"annotateWithIndent",{enumerable:!0,get:function(){return o.annotateWithIndent}}),Object.defineProperty(r,"deserializeItemFields",{enumerable:!0,get:function(){return a.deserializeItemFields}}),Object.defineProperty(r,"itemsCaseReducer",{enumerable:!0,get:function(){return i.itemsCaseReducer}}),r.default=void 0;var n=e("./actions"),o=e("./selectors"),a=e("./utils"),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./reducers")),l=i.default;r.default=l},{"./actions":1099,"./reducers":1101,"./selectors":1102,"./utils":1103}],1101:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function c(e){if(Array.isArray(e))return e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){f(e,t,r[t])})}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.resolveFields=r.itemsCaseReducer=r.default=void 0;var p=e("../../utils"),m=e("../../utils/fp"),h=e("redux"),_=e("../modelbridge"),y=e("../utils"),v=e("../undo"),g=e("../load"),b=e("./actions"),w=e("../labels"),E=e("../sync"),j=e("./selectors"),O=e("./utils"),S=e("../notes/utils"),P=function(e){return e&&e.__esModule?e:{default:e}}(e("../../logger/Logger")),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.LOAD_LOCAL_DATA:var r=t.payload.items;return r?(0,m.mapValues)(O.deserializeItemFields,r):e;case b.ITEM_ADD:var n=t.payload;return d({},e,f({},n.id,n));case b.ITEM_UNARCHIVE:var o=d({},t.payload);return o=d({},o,{checked:0,in_history:0,child_order:(0,j.itemGetMaxTopLevelChildOrder)({project_id:o.project_id,section_id:null},{items:e})+1}),d({},e,f({},o.id,o));case _.MODEL_BRIDGE_UPDATE:return t.payload.items?d({},t.payload.items):e;case w.LABEL_RENAME:var a=t.payload,i=a.oldName,l=a.newName,s=Object.keys(e).filter(function(t){return e[t].labels.includes(i)});if(0===s.length)return e;var u=s.reduce(function(t,r){var n=e[r],o=n.labels.map(function(e){return e===i?l:e});return t[r]=d({},n,{labels:o}),t},{});return d({},e,u);case w.LABEL_REMOVE:var c=t.payload,p=c.name,h=c.removeFromTasks;if(!(void 0===h||h))return e;var y=Object.keys(e).filter(function(t){return e[t].labels.includes(p)});if(0===y.length)return e;var v=y.reduce(function(t,r){var n=e[r],o=n.labels.filter(function(e){return e!==p});return t[r]=d({},n,{labels:o}),t},{});return d({},e,v);default:return e}},k=I;r.default=k;var T=function(e,t){switch(t.type){case E.SYNC_FULL_UPDATE:var r=t.payload.items||[];return r=(0,p.byID)(r.map(O.deserializeItemFields)),d({},e,{items:r});case E.SYNC_UPDATE:var o=t.payload,a=o.day_orders,i=o.items,s=o.temp_id_mapping,u=o.notes,c=o.reminders;i&&(i=i.map(O.deserializeItemFields)),u&&(u=u.map(S.deserializeNote));var _=d({},e);if(s&&(_.items=(0,y.resolveTempID)(_.items,s)),a&&(0,p.toPairs)(a).forEach(function(e){var t=l(e,2),r=t[0],n=t[1],o=_.items[r];o&&n!==o.day_order&&(_.items[r]=d({},o,{day_order:n}))}),!i||0===i.length)return _;_.items=d({},_.items,(0,p.byID)(i)),_=C(_,{temp_id_mapping:s,items:i,reminders:c,notes:u});var g=(0,h.compose)((0,m.map)(function(e){return e.id}),m.flatten,(0,m.map)(function(e){return[e].concat(n((0,j.itemGetChildren)(e.id,_)))}),(0,m.filter)(function(e){return e.in_history||e.is_deleted}))(i);return _=R(g,_)[0];case b.ITEM_UPDATE_DUE:var w=t.payload,P=(0,h.compose)((0,m.mapValues)(function(e){return d({},e,{due:w[e.id]})}),(0,m.pick)((0,p.keys)(w)))(e.items),I=d({},e,{items:d({},e.items,P)}),k=(0,h.compose)((0,m.mapValues)(function(e){return e.due}),(0,m.pick)((0,p.keys)(w)))(e.items);return I=(0,v.setUndo)({type:b.ITEM_UPDATE_DUE_UNDO,idToDue:k},I);case b.ITEM_UPDATE_DUE_UNDO:var T=e.undo.idToDue,D=(0,h.compose)((0,m.mapValues)(function(e){return d({},e,{due:T[e.id]})}),(0,m.pick)((0,p.keys)(T)))(e.items);return d({},e,{items:d({},e.items,D),undo:null});case b.ITEM_COMPLETE:var A=t.payload,N=A.id,L=A.force_history,$=A.date_completed,U=e.items[N],B=(0,j.itemGetChildren)(N,e),V=[U].concat(n(B)),F=V.map(function(e){return e.id}),H=(0,O.getAssociatesObjectIDs)(F,e),q=H.notes,G=H.reminders;if(e=(0,v.setUndo)({type:b.ITEM_COMPLETE_UNDO,id:N,prevState:{items:(0,p.toIDMap)(V),notes:(0,m.pick)(q,e.notes),reminders:(0,m.pick)(G,e.reminders)},force_history:L},e),L||null===U.parent_id)e=(0,h.compose)((0,y.removeFromSlice)("items",F),(0,y.removeFromSlice)("notes",q),(0,y.removeFromSlice)("reminders",G))(e);else{var z=(0,h.compose)(p.toIDMap,(0,m.map)(function(e){return d({},e,{checked:1,date_completed:$})}))(V);e=d({},e,{items:d({},e.items,z)})}return e;case b.ITEM_COMPLETE_UNDO:var W=e.undo.prevState;return d({},e,{items:d({},e.items,W.items),notes:d({},e.notes,W.notes),reminders:d({},e.reminders,W.reminders),undo:null});case b.ITEM_COMPLETE_RECURRING:var Y=t.payload,K=Y.id,J=Y.nextRecurrence,Q=e,X=Q.items;e=(0,v.setUndo)({type:b.ITEM_COMPLETE_RECURRING_UNDO,id:K,due:J,duePrev:X[K].due},e);var Z=d({},X[K],{due:J});return d({},e,{items:d({},X,f({},K,Z))});case b.ITEM_COMPLETE_RECURRING_UNDO:var ee=e.undo,te=ee.id,re=ee.duePrev,ne=d({},e.items[te],{due:re});return d({},e,{items:d({},e.items,f({},te,ne)),undo:null});case b.ITEM_UNCOMPLETE:var oe=t.payload,ae=e.items[oe],ie=[ae].concat(n((0,j.itemGetAncestors)(oe,e))),le=(0,h.compose)(p.toIDMap,(0,m.map)(function(e){return d({},e,{checked:0,date_completed:null})}),(0,m.filter)(function(e){return e.checked}))(ie);if(0===(0,p.values)(le).length)return e;var se=d({},e.items,le),ue=e,ce=ue.reminders,de=(0,h.compose)((0,m.mapValues)((0,m.unset)("lprocessed")),(0,m.pickBy)(function(e){return le[e.item_id]&&e.lprocessed}))(ce);return(0,p.values)(de).length>0&&(ce=d({},ce,de)),d({},e,{items:se,reminders:ce});case b.ITEM_DELETE:case b.ITEM_ARCHIVE:var fe=t.payload.ids,pe=(0,h.compose)(m.flatten,(0,m.map)(function(t){return[e.items[t]].concat(n((0,j.itemGetChildren)(t,e)))}))(fe),me=pe.map(function(e){return e.id}),he=(0,O.getAssociatesObjectIDs)(me,e),_e=he.notes,ye=he.reminders;return t.type===b.ITEM_ARCHIVE&&(e=(0,v.setUndo)({type:b.ITEM_ARCHIVE_UNDO,ids:me,prevState:{items:(0,p.toIDMap)(pe),notes:(0,m.pick)(_e,e.notes),reminders:(0,m.pick)(ye,e.reminders)}},e)),e=(0,h.compose)((0,y.removeFromSlice)("items",me),(0,y.removeFromSlice)("notes",_e),(0,y.removeFromSlice)("reminders",ye))(e);case b.ITEM_ARCHIVE_UNDO:var ve=e.undo.prevState;return d({},e,{items:d({},e.items,ve.items),notes:d({},e.notes,ve.notes),reminders:d({},e.reminders,ve.reminders),undo:null});case b.ITEM_MOVE_MULTIPLE:var ge=t.payload,be=ge.ids,we=ge.destPID,Ee=(0,v.setUndo)({type:b.ITEM_MOVE_MULTIPLE_UNDO,prevState:{items:(0,m.pick)(be,e.items)},destProject:e.projects[we]},e),je=(0,j.itemGetMaxTopLevelChildOrder)({project_id:we,section_id:null},e),Oe=!0,Se=!1,Pe=void 0;try{for(var Ie,ke=be[Symbol.iterator]();!(Oe=(Ie=ke.next()).done);Oe=!0){var Te=Ie.value;je++,Ee=x({id:Te,project_id:we},Ee),Ee.items[Te].child_order=je}}catch(e){Se=!0,Pe=e}finally{try{Oe||null==ke.return||ke.return()}finally{if(Se)throw Pe}}return Ee;case b.ITEM_MOVE_AND_REORDER:var Ce=t.payload,De=Ce.moveTo,Ae=Ce.orders,Me=Ce.allowUndo,xe=d({},e);return De&&(xe=x(De,e)),Ae&&(xe.items=(0,m.merge)(xe.items,(0,p.byID)(Ae))),Me&&(xe=(0,v.setUndo)({type:b.ITEM_MOVE_AND_REORDER_UNDO,moveTo:De?(0,m.pick)(["id","parent_id","section_id","project_id"],e.items[De.id]):null,orders:Ae?Ae.map(function(t){var r=t.id;return(0,m.pick)(["id","child_order"],e.items[r])}):null},xe)),xe;case b.ITEM_MOVE_AND_REORDER_UNDO:var Re=t.payload,Ne=Re.moveTo,Le=Re.orders,$e=d({},e);return Ne&&($e=x(Ne,e)),Le&&($e.items=(0,m.merge)($e.items,(0,p.byID)(Le))),$e.undo=null,$e;case b.ITEM_DUPLICATE:return t.payload.state;case b.ITEM_UPDATE:var Ue=t.payload,Be=Ue.id,Ve=Ue.due,Fe=e.items[Be];return Fe.due&&Ve&&(e=M(Fe.id,e)),Fe=d({},Fe,t.payload),d({},e,{items:d({},e.items,f({},Be,Fe))});case b.ITEM_UPDATE_DAY_ORDER:var He=t.payload,qe=He.orders,Ge=He.withUndo,ze=d({},e,{items:d({},e.items)});if((0,p.keys)(qe).forEach(function(e){var t=qe[e];ze.items[e]=d({},ze.items[e],{day_order:t})}),Ge){var We={};(0,p.keys)(qe).forEach(function(t){We[t]=e.items[t].day_order}),ze=(0,v.setUndo)({type:b.ITEM_UPDATE_DAY_ORDER_UNDO,orders:We},ze)}return ze;case b.ITEM_UPDATE_DAY_ORDER_UNDO:var Ye=e.undo.orders,Ke=d({},e,{items:d({},e.items),undo:null});return(0,p.keys)(Ye).forEach(function(e){var t=Ye[e];Ke.items[e]=d({},Ke.items[e],{day_order:t})}),Ke;default:return e}};r.itemsCaseReducer=T;var C=function(e,t){try{var r=e.undo;if(!r)return e;var n=t.temp_id_mapping;switch(r.type){case b.ITEM_ARCHIVE_UNDO:case b.ITEM_COMPLETE_UNDO:var o=d({},r.prevState);o=D("items",o,t,["checked","in_history"]),o=D("notes",o,t,["is_archived"]),o=D("reminders",o,t);var a=d({},r,{prevState:o});return r.type===b.ITEM_ARCHIVE_UNDO&&(a.ids=a.ids.map(function(e){return n[e]||e})),r.type===b.ITEM_COMPLETE_UNDO&&(a.id=n[a.id]||a.id),d({},e,{undo:a});case b.ITEM_UPDATE_DUE_UNDO:var i=r.idToDue;return i=(0,m.mapKeys)(function(e){return n[e]||e},i),d({},e,{undo:d({},r,{idToDue:i})});case b.ITEM_MOVE_AND_REORDER_UNDO:var l=r.moveTo,s=r.orders;return l&&(l=A(["id","parent_id","section_id","project_id"],l,n)),s&&(s=s.map(function(e){return A(["id","child_order"],e,n)})),d({},e,{undo:d({},r,{moveTo:l,orders:s})});case b.ITEM_COMPLETE_RECURRING_UNDO:var u=n[r.id]||r.id;return d({},e,{undo:d({},r,{id:u})});default:return e}}catch(t){return P.default.captureError(t),e}},D=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=r.temp_id_mapping;if(!o&&!r[e])return t;var a=(0,y.resolveTempID)(t[e],o),i=(0,p.byID)(r[e]);return a=(0,m.mapValues)(function(e){return i[e.id]?d({},e,(0,m.omit)(n,i[e.id])):e})(a),d({},t,f({},e,a))},A=function(e,t,r){var n=d({},t),o=!1;return e.forEach(function(e){var a=n[e];if(t.hasOwnProperty(e)){var i=r[a];i&&a!==i&&(o=!0,n[e]=i)}}),o?n:t};r.resolveFields=A;var M=function(e,t){var r=t.reminders,n=(0,p.values)(r).filter(function(t){return t.item_id===e&&t.lprocessed});return 0===n.length?t:(n=(0,h.compose)(p.byID,(0,m.map)((0,m.omit)("lprocessed")))(n),r=d({},r,n),d({},t,{reminders:r}))},x=function(e,t){var r=t.items,n=t.sections,o=e.id,a=e.parent_id,i=void 0===a?null:a,l=e.section_id,s=void 0===l?null:l,u=e.project_id,c=void 0===u?null:u;if(i)s=r[i].section_id,c=r[i].project_id;else if(s)c=n[s].project_id;else if(!c)return t;var _=d({},r[o],{parent_id:i,section_id:s,project_id:c}),y=(0,h.compose)(p.byID,(0,m.map)(function(e){return d({},e,{section_id:s,project_id:c})}))((0,j.itemGetChildren)(o,t));return d({},t,{items:d({},r,f({},o,_),y)})},R=function(e,t){var r=(0,O.getAssociatesObjectIDs)(e,t),n=r.notes,o=r.reminders;return t=(0,h.compose)((0,y.removeFromSlice)("items",e),(0,y.removeFromSlice)("notes",n),(0,y.removeFromSlice)("reminders",o))(t),[t,{items:e,notes:n,reminders:o}]}},{"../../logger/Logger":129,"../../utils":1176,"../../utils/fp":1166,"../labels":1105,"../load":1108,"../modelbridge":1110,"../notes/utils":1117,"../sync":1131,"../undo":1134,"../utils":1136,"./actions":1099,"./selectors":1102,"./utils":1103,redux:"redux"}],1102:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}Object.defineProperty(r,"__esModule",{value:!0}),r.annotateWithIndent=r.itemGetDueByDate=r.itemGetIndent=r.itemGetMaxTopLevelChildOrder=r.itemGetSectionGroups=r.itemGetAncestors=r.itemGetChildren=r.itemGetByName=r.itemGetBySyncID=r.itemGetByPID=r.itemGetByID=r.itemGetOwn=r.getUncompletedExcludeSection=r.itemGetUncompleted=r.itemGetVisible=void 0;var u=e("../../utils"),c=e("../../utils/fp"),d=e("redux"),f=e("reselect"),p=function(e){return e&&e.__esModule?e:{default:e}}(e("../../models/TemporaryIds")),m=e("../collaborators"),h=(0,f.createSelector)(function(e){return e.items},(0,c.filter)(function(e){return!e.in_history}));r.itemGetVisible=h;var _=(0,f.createSelector)(h,(0,c.filter)(function(e){return!e.checked}));r.itemGetUncompleted=_;var y=(0,f.createSelector)(_,(0,c.filter)(function(e){return!(0,u.isSection)(e.content)}));r.getUncompletedExcludeSection=y;var v=(0,f.createSelector)(_,m.isSharedProject,function(e){return e.user},function(e,t,r){return e.filter(function(e){return!t(e.project_id)||!e.responsible_uid||e.responsible_uid===r.id})});r.itemGetOwn=v;var g=function(e,t){return t=p.default.getRealId(t),e.items[t]};r.itemGetByID=g;var b=(0,f.createSelector)(h,(0,c.groupBy)("project_id"));r.itemGetByPID=b;var w=function(e,t){return(0,u.values)(t.items).find(function(t){return t.sync_id===e})};r.itemGetBySyncID=w;var E=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=_(t),o=n.reduce(function(t,r){var n=(0,u.partialMatchIndex)(e,r.content);return-1!==n&&t.push({item:r,index:n}),t},[]);return o=(0,c.sortBy)(["index","id"],o).slice(0,r).map(function(e){return e.item})};r.itemGetByName=E;var j=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.sorted,o=void 0!==n&&n;e=p.default.getRealId(e);var i=t.items[e]
;if(!i)throw new Error("itemGetChildren() called with non-exist item id");var l=b(t)[i.project_id],s=(0,c.groupBy)("parent_id")(l),u=function e(t){var r=s[t.id];return o&&(r=(0,c.sortBy)("child_order",r)),[t].concat(a((0,d.compose)(c.flatten,(0,c.map)(function(t){return e(t)}))(r)))}(i);return u.splice(0,1),u};r.itemGetChildren=j;var O=function e(t,r){var n=r.items[t].parent_id;return n?[r.items[n]].concat(a(e(n,r))):[]};r.itemGetAncestors=O;var S=(0,u.curry)(function(e,t){var r=b(t)[e],n=(0,c.groupBy)("section_id",r),o=(0,c.groupBy)("parent_id",r),i=function(e){return n[e]?n[e].filter(function(e){return null===e.parent_id}):[]},l=function e(t){var r=o[t.id];return[t].concat(a((0,d.compose)(c.flatten,(0,c.map)(function(t){return e(t)}),(0,c.sortBy)("child_order"))(r)))},s=function(e){var t=(0,d.compose)(c.flatten,(0,c.map)(l),(0,c.sortBy)("child_order"))(i(e));return C(t)},u=(0,d.compose)((0,c.mapValues)(function(e){return s(e.id)}),(0,c.pickBy)(function(t){return t.project_id===e}),(0,c.get)("sections"))(t);return u[null]=s(null),u});r.itemGetSectionGroups=S;var P=function(e,t){var r=e.project_id,n=e.section_id;return r||(r=t.sections[n].project_id),n||(n=null),(0,d.compose)((0,c.get)("child_order"),c.last,(0,c.sortBy)("child_order"),(0,c.filter)(function(e){return e.section_id===n&&null===e.parent_id}),(0,c.get)(r),b)(t)||0};r.itemGetMaxTopLevelChildOrder=P;var I=function e(t,r){var n=r.items[t];return n&&n.parent_id?e(n.parent_id,r)+1:1};r.itemGetIndent=I;var k=(0,u.curry)(function(e,t){return _(t).filter(function(t){return!!t.due&&t.due.isSameDate(e)})});r.itemGetDueByDate=k;var T=function(e,t){return n({},e,{indent:I(e.id,t)})};r.annotateWithIndent=T;var C=function(e){var t={};return e.forEach(function(e,r){e.item_order=r+1,null===e.parent_id?e.indent=1:e.indent=(t[e.parent_id]||1)+1,t[e.id]=e.indent}),e}},{"../../models/TemporaryIds":172,"../../utils":1176,"../../utils/fp":1166,"../collaborators":1086,redux:"redux",reselect:"reselect"}],1103:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.getAssociatesObjectIDs=r.deserializeItemFields=void 0;var u=function(e){return e&&e.__esModule?e:{default:e}}(e("../../models/DateExt")),c=e("../../utils"),d=e("../../utils/fp"),f=function(e){var t=l({},e),r=!1;return t.due&&t.due instanceof Object&&(t.due=new u.default(t.due),r=!0),(0,c.isString)(t.date_added)&&(t.date_added=new Date(t.date_added),r=!0),r?t:e};r.deserializeItemFields=f;var p=function(e,t){e=new Set(e);var r=function(e){return(0,d.compose)(function(e){return new Set(e)},(0,d.map)(function(e){return e.id}),(0,d.filter)(e),c.values)},o=r(function(t){return e.has(t.item_id)})(t.notes),a=r(function(t){return e.has(t.item_id)})(t.reminders);return{notes:n(o),reminders:n(a)}};r.getAssociatesObjectIDs=p},{"../../models/DateExt":152,"../../utils":1176,"../../utils/fp":1166}],1104:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.labelUpdateOrders=r.labelRename=r.labelUpdate=r.labelRemoveFromPersonal=r.labelMoveToPersonal=r.labelRemove=r.labelAdd=r.LABEL_RENAME=r.LABEL_UPDATE=r.LABEL_REMOVE=r.LABEL_ADD=void 0;var c=e("../../utils"),d=n(e("../../models/TemporaryIds")),f=n(e("../../models/SyncEngine")),p=e("./selectors");r.LABEL_ADD="LABEL_ADD";r.LABEL_REMOVE="LABEL_REMOVE";r.LABEL_UPDATE="LABEL_UPDATE";r.LABEL_RENAME="LABEL_RENAME";var m=function(e){return $isString(e)&&0==e.indexOf("_")},h=function(e){var t=e.name,r=e.color,n=void 0===r?7:r,o=e.item_order,a=e.is_favorite;return function(e){if(void 0===t||void 0===n||void 0===o)throw new Error("Missing required parameters");t=(0,p.labelNormalizeName)(t);var r=d.default.generate("label"),i={id:r,name:t,color:n,item_order:o,is_favorite:a};return f.default.queueUpdate({type:"label_register",temp_id:r,args:s({},i)}),e({type:"LABEL_ADD",payload:i}),i}};r.labelAdd=h;var _=function(e){return function(t,r){var n=(0,p.labelGetByName)(e,{caseSensitive:!0},r());if(n){var o=n.id;f.default.queueUpdate({type:"label_delete",args:{id:o}})}else f.default.queueUpdate({type:"label_delete_occurrences",args:{name:e}});t({type:"LABEL_REMOVE",payload:{name:e}})}};r.labelRemove=_;var y=function(e){return function(t,r){var n=r();if(!(0,p.labelGetByName)(e,{caseSensitive:!0},n)){var o={name:e,item_order:(0,p.labelGetMaxOrder)(n)+1};return h(o)(t)}}};r.labelMoveToPersonal=y;var v=function(e){return function(t,r){m(e)&&(e=d.default.getRealId(e));var n=(0,p.labelGetByID)(r(),e);n&&(f.default.queueUpdate({type:"label_delete",args:{id:e,cascade:"none"}}),t({type:"LABEL_REMOVE",payload:{name:n.name,removeFromTasks:!1}}))}};r.labelRemoveFromPersonal=v;var g=function(e,t){var r=t.name,n=t.color,o=t.item_order,a=t.is_favorite;return function(t,i){m(e)&&(e=d.default.getRealId(e));var l=(0,p.labelGetByID)(i(),e);if(l){var s={id:e,name:r,color:n,item_order:o,is_favorite:a};if(s=(0,c.omitBy)(s,function(e){return void 0===e}),s.name&&(s.name=(0,p.labelNormalizeName)(s.name)),null!=r){var u={oldName:l.name,newName:r,sync:!1};b(u)(t)}var h=Object.keys(s);h.length<=1||h.every(function(e){return s[e]===l[e]})||(f.default.queueUpdate({type:"label_update",args:s}),t({type:"LABEL_UPDATE",payload:s}))}}};r.labelUpdate=g;var b=function(e){var t=e.oldName,r=e.newName,n=e.sync,o=void 0===n||n;return function(e){r=(0,p.labelNormalizeName)(r),t!==r&&(o&&f.default.queueUpdate({type:"label_rename",args:{name_old:t,name_new:r}}),e({type:"LABEL_RENAME",payload:{oldName:t,newName:r}}))}};r.labelRename=b;var w=function(e){return function(t){if(0!==Object.keys(e).length){e=(0,c.mapKeys)(e,function(e,t){return m(t)?d.default.getRealId(t):t}),f.default.queueUpdate({type:"label_update_orders",args:{id_order_mapping:JSON.stringify(e)}});t({type:"LABEL_UPDATE",payload:(0,c.toPairs)(e).map(function(e){var t=o(e,2),r=t[0],n=t[1];return{id:m(r)?r:parseInt(r),item_order:n}})})}}};r.labelUpdateOrders=w},{"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../utils":1176,"./selectors":1107}],1105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"LABEL_ADD",{enumerable:!0,get:function(){return n.LABEL_ADD}}),Object.defineProperty(r,"LABEL_REMOVE",{enumerable:!0,get:function(){return n.LABEL_REMOVE}}),Object.defineProperty(r,"LABEL_UPDATE",{enumerable:!0,get:function(){return n.LABEL_UPDATE}}),Object.defineProperty(r,"LABEL_RENAME",{enumerable:!0,get:function(){return n.LABEL_RENAME}}),Object.defineProperty(r,"labelAdd",{enumerable:!0,get:function(){return n.labelAdd}}),Object.defineProperty(r,"labelUpdate",{enumerable:!0,get:function(){return n.labelUpdate}}),Object.defineProperty(r,"labelRename",{enumerable:!0,get:function(){return n.labelRename}}),Object.defineProperty(r,"labelUpdateOrders",{enumerable:!0,get:function(){return n.labelUpdateOrders}}),Object.defineProperty(r,"labelRemove",{enumerable:!0,get:function(){return n.labelRemove}}),Object.defineProperty(r,"labelMoveToPersonal",{enumerable:!0,get:function(){return n.labelMoveToPersonal}}),Object.defineProperty(r,"labelRemoveFromPersonal",{enumerable:!0,get:function(){return n.labelRemoveFromPersonal}}),Object.defineProperty(r,"labelGetFavorite",{enumerable:!0,get:function(){return a.labelGetFavorite}}),Object.defineProperty(r,"labelGetByID",{enumerable:!0,get:function(){return a.labelGetByID}}),Object.defineProperty(r,"labelGetByName",{enumerable:!0,get:function(){return a.labelGetByName}}),Object.defineProperty(r,"labelGetAllPersonal",{enumerable:!0,get:function(){return a.labelGetAllPersonal}}),Object.defineProperty(r,"labelGetAllShared",{enumerable:!0,get:function(){return a.labelGetAllShared}}),Object.defineProperty(r,"labelGetAllByName",{enumerable:!0,get:function(){return a.labelGetAllByName}}),Object.defineProperty(r,"labelSearchList",{enumerable:!0,get:function(){return a.labelSearchList}}),Object.defineProperty(r,"labelGetBySearch",{enumerable:!0,get:function(){return a.labelGetBySearch}}),Object.defineProperty(r,"labelGetMaxOrder",{enumerable:!0,get:function(){return a.labelGetMaxOrder}}),Object.defineProperty(r,"labelGetCount",{enumerable:!0,get:function(){return a.labelGetCount}}),Object.defineProperty(r,"labelNormalizeName",{enumerable:!0,get:function(){return a.labelNormalizeName}}),r.default=void 0;var n=e("./actions"),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./reducers")),a=e("./selectors"),i=o.default;r.default=i},{"./actions":1104,"./reducers":1106,"./selectors":1107}],1106:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e("../../utils"),i=e("../load"),l=e("../sync"),s=e("../utils"),u=e("./actions"),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.LOAD_LOCAL_DATA:return t.payload.labels?t.payload.labels:e;case l.SYNC_UPDATE:var r=t.payload,c=r.labels,d=r.temp_id_mapping;return d&&(e=(0,s.resolveTempID)(e,d)),c&&(e=(0,s.mergeSyncUpdate)(e,c)),e;case l.SYNC_FULL_UPDATE:return(0,a.keyBy)(t.payload.labels,"id");case u.LABEL_ADD:var f=t.payload,p=n({},e);return p[f.id]=f,p;case u.LABEL_REMOVE:var m=t.payload.name,h=Object.keys(e).find(function(t){return e[t].name===m});if(void 0===h)return e;var _=n({},e);return delete _[h],_;case u.LABEL_UPDATE:var y=$isArray(t.payload)?t.payload:[t.payload],v=n({},e),g=!0,b=!1,w=void 0;try{for(var E,j=y[Symbol.iterator]();!(g=(E=j.next()).done);g=!0){var O=E.value,S=O.id;v[S]&&(v[S]=n({},v[S],O))}}catch(e){b=!0,w=e}finally{try{g||null==j.return||j.return()}finally{if(b)throw w}}return v;case u.LABEL_RENAME:var P=t.payload,I=P.oldName,k=P.newName,T=Object.keys(e).find(function(t){return e[t].name===I});return void 0===T?e:n({},e,o({},T,n({},e[T],{name:k})));default:return e}},d=c;r.default=d},{"../../utils":1176,"../load":1108,"../sync":1131,"../utils":1136,"./actions":1104}],1107:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return"number"==typeof e?String(e):e.replace(/[<>"=#+\s%!?~:@,()&]+/g,"_").trim()}function l(e,t,r){var n=t.caseSensitive;if(arguments.length<2)throw new Error("First two arguments are required");e=i(e),n||(e=e.toLowerCase());var o=(0,d.createSelector)(function(e){return e.labels},function(t){return(0,p.compose)((0,c.find)(function(t){return n?t.name===e:t.name.toLowerCase()===e}),u.values)(t)});return 2===arguments.length?o:o(r)}function s(e,t){return(0,p.compose)((0,c.map)(function(e){return e.label}),(0,c.sortBy)(["i","label.item_order","label.id","label.name"]),(0,c.filter)(function(e){return-1!==e.i}),(0,c.map)(function(e){return{i:(0,m.default)(t,e.name),label:e}}))(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.labelNormalizeName=i,r.labelGetByName=l,r.labelSearchList=s,r.labelGetFavorite=r.labelGetAllPersonal=r.labelGetAllShared=r.labelGetAllByName=r.labelGetCount=r.labelGetMaxOrder=r.labelGetBySearch=r.labelGetByID=void 0;var u=e("../../utils"),c=e("../../utils/fp"),d=e("reselect"),f=n(e("../../models/TemporaryIds")),p=e("redux"),m=n(e("../../utils/partialMatchIndex")),h=e("../user"),_=e("../..//utils/deps"),y=(0,_.defineDeps)("reducers/labels/selectors",["itemGetVisible"]),v=function(e,t){var r=e.labels;return t=f.default.getRealId(t),r[t]};r.labelGetByID=v;var g=function(e,t){var r=e.labels;return s(Object.values(r),t)};r.labelGetBySearch=g;var b=function(e){var t=e.labels,r=Object.values(t);return 0==r.length?1:r.reduce(function(e,t){return Math.max(e,t.item_order)},Number.NEGATIVE_INFINITY)};r.labelGetMaxOrder=b;var w=function(e){var t=e.labels;return Object.values(t).length};r.labelGetCount=w;var E=(0,u.memoizeReturn)(function(e){var t=y.itemGetVisible(e),r={};return t.forEach(function(e){e.labels.forEach(function(e){r[e]||(e=i(e),r[e]={name:e})})}),r}),j=(0,d.createSelector)(E,function(e){return e.labels},h.isDoistUser,function(e,t,r){var n=(0,u.keyBy)((0,u.values)(t),function(e){return i(e.name)});return r?o({},e,n):n});r.labelGetAllByName=j;var O=(0,d.createSelector)(j,u.values),S=(0,d.createSelector)(O,(0,p.compose)((0,c.sortBy)("name"),(0,c.filter)(function(e){return void 0===e.id})));r.labelGetAllShared=S;var P=(0,d.createSelector)(O,(0,p.compose)((0,c.sortBy)("item_order"),(0,c.filter)(function(e){return void 0!==e.id})));r.labelGetAllPersonal=P;var I=(0,d.createSelector)(P,(0,c.filter)(function(e){return e.is_favorite}));r.labelGetFavorite=I},{"../..//utils/deps":1154,"../../models/TemporaryIds":172,"../../utils":1176,"../../utils/fp":1166,"../../utils/partialMatchIndex":1194,"../user":1135,redux:"redux",reselect:"reselect"}],1108:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadLocalData=r.LOAD_LOCAL_DATA=void 0;r.LOAD_LOCAL_DATA="LOAD_LOCAL_DATA";var n=function(e){return{type:"LOAD_LOCAL_DATA",payload:e}};r.loadLocalData=n},{}],1109:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.show7DaysView=r.showTodayView=r.showActivityView=r.showQueryView=r.showFilterView=r.showLabelView=r.showProjectView=r.VIEW_SHOW_7_DAYS=r.VIEW_SHOW_TODAY=r.VIEW_SHOW_FILTER=r.VIEW_SHOW_LABEL=r.VIEW_SHOW_ACTIVITY_LOG=r.VIEW_SHOW_QUERY=r.VIEW_SHOW_PROJECT=void 0;var a=e("./sync"),i=e("../constants/constants"),l=e("./utils"),s=e("./filters"),u=e("./user"),c=function(e){return e&&e.__esModule?e:{default:e}}(e("../utils/isTempID"));r.VIEW_SHOW_PROJECT="VIEW_SHOW_PROJECT";r.VIEW_SHOW_QUERY="VIEW_SHOW_QUERY";r.VIEW_SHOW_ACTIVITY_LOG="VIEW_SHOW_ACTIVITY_LOG";r.VIEW_SHOW_LABEL="VIEW_SHOW_LABEL";r.VIEW_SHOW_FILTER="VIEW_SHOW_FILTER";r.VIEW_SHOW_TODAY="VIEW_SHOW_TODAY";r.VIEW_SHOW_7_DAYS="VIEW_SHOW_7_DAYS";var d=function(){e("../components/projects_list/ProjectList").deselectCurrent()},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bottomListSelected,n=void 0!==r&&r,o=t.withChildren,a=void 0!==o&&o,i=t.focusedItemId,s=void 0===i?null:i;return function(t,r){n||d();var o=r();return e=e.map((0,l.toUniqueID)(o)),t({type:"VIEW_SHOW_PROJECT",payload:{ids:e,bottomListSelected:n,withChildren:a,focusedItemId:s,reactView:(0,u.shouldShowReactView)(o)}})}};r.showProjectView=f;var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bottomListSelected,n=void 0!==r&&r;return function(t,r){n||d(),t({type:"VIEW_SHOW_LABEL",payload:{id:e,bottomListSelected:n,reactView:(0,u.shouldShowReactView)(r())}})}};r.showLabelView=p;var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bottomListSelected,n=void 0!==r&&r;return n||d(),function(t,r){var o=r();if(!(0,s.filterGetByID)(o,e))throw new Error("Cannot show filter view for non-exist filter id: "+e);t({type:"VIEW_SHOW_FILTER",payload:{id:e,bottomListSelected:n,reactView:(0,u.shouldShowReactView)(o)}})}};r.showFilterView=m;var h=function(e){return d(),{type:"VIEW_SHOW_QUERY",payload:e}};r.showQueryView=h;var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.projectId,r=e.itemId,n=e.eventFilter,o=e.userFilter;return d(),{type:"VIEW_SHOW_ACTIVITY_LOG",payload:{projectId:t,itemId:r,eventFilter:n,userFilter:o}}};r.showActivityView=_;var y=function(){return function(e,t){return d(),e({type:"VIEW_SHOW_TODAY",payload:{reactView:(0,u.shouldShowReactView)(t())}})}};r.showTodayView=y;var v=function(){return d(),{type:"VIEW_SHOW_7_DAYS"}};r.show7DaysView=v;var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VIEW_SHOW_PROJECT":return n({type:i.MAIN_VIEW_TYPE_PROJECT},t.payload);case"VIEW_SHOW_QUERY":return{type:i.MAIN_VIEW_TYPE_QUERY,query:t.payload};case"VIEW_SHOW_ACTIVITY_LOG":return n({type:i.MAIN_VIEW_TYPE_ACTIVITY_LOG},t.payload);case"VIEW_SHOW_LABEL":return n({type:i.MAIN_VIEW_TYPE_LABEL},t.payload);case"VIEW_SHOW_FILTER":return n({type:i.MAIN_VIEW_TYPE_FILTER},t.payload);case"VIEW_SHOW_TODAY":return n({type:i.MAIN_VIEW_TYPE_TODAY},t.payload);case"VIEW_SHOW_7_DAYS":return{type:i.MAIN_VIEW_TYPE_7_DAYS};case a.SYNC_UPDATE:var r=t.payload.temp_id_mapping;return(0,c.default)(e.id)&&r[e.id]?n({},e,{id:r[e.id]}):e;default:return e}},b=g;r.default=b},{"../components/projects_list/ProjectList":71,"../constants/constants":98,"../utils/isTempID":1183,"./filters":1095,"./sync":1131,"./user":1135,"./utils":1136}],1110:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.modelBridgeMiddleware=r.ModelBridge=r.bridgeUpdate=r.MODEL_BRIDGE_UPDATE=void 0;var s=e("../utils"),u=e("../utils/fp"),c=function(e){return e&&e.__esModule?e:{default:e}}(e("../logger/Logger")),d=window,f=d.Signals;r.MODEL_BRIDGE_UPDATE="MODEL_BRIDGE_UPDATE";var p=function(e){return{type:"MODEL_BRIDGE_UPDATE",payload:e}};r.bridgeUpdate=p;var m=function(){function e(){var t=this;o(this,e),l(this,"handleModelUpdate",function(e){try{if(1===(0,s.keys)(e)||0===(0,s.keys)(e))throw new Error("Assertion error: update should be a single key object");t.dispatchBridgeUpdate(e)}catch(e){c.default.captureError(e,{tags:{critical:"model_bridge"}})}}),l(this,"dispatchBridgeUpdate",function(e){t.store.dispatch(p(e))}),l(this,"dispatchBridgeUpdateDebounced",(0,s.debounce)(this.dispatchBridgeUpdate,30))}return i(e,[{key:"init",value:function(e){this.store=e,f.connect("bridge:model_update",this.handleModelUpdate)}}]),e}(),h=new m;r.ModelBridge=h;var _=function(e,t){var r={},n=!0,o=!1,a=void 0;try{for(var i,l=(0,s.keys)(e)[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value;e[u]!==t[u]&&(r[u]=e[u])}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r},y=(0,u.mapValues)(function(e){return n({},e)}),v=function(e){return function(t){return function(r){var n=e.getState(),o=t(r),a=e.getState(),i=_(a,n);return i=y(i),f.sendSignal("bridge:redux_update",i),o}}};r.modelBridgeMiddleware=v},{"../logger/Logger":129,"../utils":1176,"../utils/fp":1166}],1111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.hasMoreItemNotes=r.hasMoreProjectNotes=void 0;var n=e("./sync"),o=e("./load"),a=e("./notes"),i=e("../utils/fp"),l=function(e){return e.reduce(function(e,t){return e[t]=1,e},{})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.LOAD_LOCAL_DATA:var r=t.payload.moreNotes;return void 0===r?e:null===r?{items:{},projects:{}}:r;case a.NOTE_FETCH:if(!t.payload||0===t.payload.length)return e;var s=t.payload[0];return s.item_id?(0,i.unset)("items.".concat(s.item_id),e):(0,i.unset)("projects.".concat(s.project_id),e);case n.SYNC_FULL_UPDATE:var u=t.payload,c=u.incomplete_item_ids,d=u.incomplete_project_ids;return{items:c?l(c):{},projects:d?l(d):{}};default:return e}},u=function(e,t){return Boolean((0,i.get)("moreNotes.projects.".concat(t),e))};r.hasMoreProjectNotes=u;var c=function(e,t){return Boolean((0,i.get)("moreNotes.items.".concat(t),e))};r.hasMoreItemNotes=c;var d=s;r.default=d},{"../utils/fp":1166,"./load":1108,"./notes":1114,"./sync":1131}],1112:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.noteFetch=r.noteFetchFromProject=r.noteFetchFromItem=r.noteRemoveReaction=r.noteAddReaction=r.noteInsert=r.noteRemove=r.noteAddWithFiles=r.noteUpdate=r.noteAdd=void 0;var c=n(e("../../models/TemporaryIds")),d=n(e("../../models/SyncEngine")),f=e("../user"),p=e("./constants"),m=e("./selectors"),h=e("./utils"),_=e("../items"),y=e("../projects"),v=function(e){var t=e.parentId,r=e.content,n=e.type,o=e.usersToNotify,a=e.file,i=e.additionalProperties,l=void 0===i?{}:i;return function(e,i){if(n!==p.TYPE_ITEM_NOTE&&n!==p.TYPE_PROJECT_NOTE)throw new Error("Programming error: incorrect note type. (note_type=".concat(n,")"));var u=i(),f=u.user.id,m=s({content:r,posted_uid:f},l);n===p.TYPE_ITEM_NOTE?m.item_id=t:m.project_id=t,o&&(m.uids_to_notify=o),a&&a.file_server_info&&(m.file_attachment=a.file_server_info);var h=s({},m,{id:c.default.generate("note"),posted:new Date});return d.default.queueUpdate({type:"note_add",temp_id:h.id,args:m}),e({type:p.NOTE_ADD,payload:h}),h}};r.noteAdd=v;var g=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(o,a){e=c.default.getRealId(e);var i=a(),l=i.notes[e];if(l){var u={note_id:l.id};t&&(u.content=t),r&&(u.file_attachment=r),d.default.queueUpdate({type:"note_update",args:u});var f=s({},l,u,n);return delete f.note_id,o({type:p.NOTE_UPDATE,payload:f}),f}}};r.noteUpdate=g;var b=function(e){var t=e.parentId,r=e.content,n=e.type,o=e.usersToNotify,a=e.files;return function(e){if(0===a.length)return e(v({parentId:t,content:r,type:n,usersToNotify:o}));a.forEach(function(a,i){var l=(0,h.generateFile)(a),s=l.file_info,u=l.is_buffer_obj,c=e(v({parentId:t,content:0===i?r:"",type:n,usersToNotify:o,file:s,additionalProperties:{is_buffer_obj:u}}));a.addCallback(function(t){if(t.success&&!t.instant){var r=t.file_server_info;r.upload_state="completed",e(g(c.id,null,r,{is_buffer_obj:!1}))}})})}};r.noteAddWithFiles=b;var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.shouldSync,n=void 0===r||r;return function(t,r){e=c.default.getRealId(e);var o=r(),a=o.notes[e];a&&(n&&d.default.queueUpdate({type:"note_delete",args:{note_id:a.id}}),t({type:p.NOTE_REMOVE,payload:a.id}))}};r.noteRemove=w;var E=function(e){if(e&&e.id)return e=(0,h.deserializeNote)(e),{type:p.NOTE_UPDATE,payload:e}};r.noteInsert=E;var j=function(e,t){return function(r,n){e=c.default.getRealId(e);var o=n(),a=o.user.id;o.notes[e]&&(d.default.queueUpdate({type:"note_reaction_add",args:{id:e,reaction:t}}),r({type:p.NOTE_ADD_REACTION,payload:{id:e,userId:a,reaction:t}}))}};r.noteAddReaction=j;var O=function(e,t){return function(r,n){e=c.default.getRealId(e);var o=n(),a=o.user.id,i=o.notes[e];i&&i.reactions&&(d.default.queueUpdate({type:"note_reaction_remove",args:{id:e,reaction:t}}),r({type:p.NOTE_REMOVE_REACTION,payload:{id:e,userId:a,reaction:t}}))}};r.noteRemoveReaction=O;var S=function(e,t){return function(r,n){e=c.default.getRealId(e);var a=n();return fetch("/API/".concat(d.default.api_version,"/get_item"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:(0,f.getToken)(a),item_id:e,sync_id:t,all_data:1})}).then(function(e){return e.json().then(function(t){return[e.status,t]})}).then(function(e){var t=o(e,2),n=t[0],a=t[1];if(200!==n)throw a;return a.notes=a.notes.map(h.deserializeNote),r({type:p.NOTE_FETCH,payload:a.notes}),a.item=(0,_.deserializeItemFields)(a.item),Signals.sendSignal("refresh_interface"),a})}};r.noteFetchFromItem=S;var P=function(e){return function(t,r){e=c.default.getRealId(e);var n=r();return fetch("/API/".concat(d.default.api_version,"/get_project"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:(0,f.getToken)(n),project_id:e,all_data:1})}).then(function(e){return e.json().then(function(t){return[e.status,t]})}).then(function(e){var r=o(e,2),n=r[0],a=r[1];if(200!==n)throw a;return t({type:p.NOTE_FETCH,payload:a.notes}),t((0,y.projectArchivedFeteched)(s({},a.project))),Signals.sendSignal("refresh_interface"),a})}};r.noteFetchFromProject=P;var I=function(e){var t=e.type,r=e.item,n=e.project;return function(e){return e(t===p.TYPE_ITEM_NOTE?S(r.id,r.sync_id):P(n.id))}};r.noteFetch=I,$queryArgument("print_mode")&&(window.NotesModel={},window.NotesModel.TYPE_ITEM_NOTE=p.TYPE_ITEM_NOTE,window.NotesModel.TYPE_PROJECT_NOTE=p.TYPE_PROJECT_NOTE,window.NotesModel.getNotes=function(t,r){var n=e("../../stores/store").default;return(0,m.noteGetByParentIDSorted)(n.getState(),t,r)})},{"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../stores/store":1140,"../items":1100,"../projects":1119,"../user":1135,"./constants":1113,"./selectors":1116,"./utils":1117}],1113:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NOTE_REMOVE_REACTION=r.NOTE_ADD_REACTION=r.NOTE_FETCH=r.NOTE_REMOVE=r.NOTE_UPDATE=r.NOTE_ADD=r.TYPE_ITEM_NOTE=r.TYPE_PROJECT_NOTE=void 0;r.TYPE_PROJECT_NOTE="project_note";r.TYPE_ITEM_NOTE="item_note";r.NOTE_ADD="NOTE_ADD";r.NOTE_UPDATE="NOTE_UPDATE";r.NOTE_REMOVE="NOTE_REMOVE";r.NOTE_FETCH="NOTE_FETCH";r.NOTE_ADD_REACTION="NOTE_ADD_REACTION";r.NOTE_REMOVE_REACTION="NOTE_REMOVE_REACTION"},{}],1114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"noteAdd",{enumerable:!0,get:function(){return o.noteAdd}}),Object.defineProperty(r,"noteAddReaction",{enumerable:!0,get:function(){return o.noteAddReaction}}),Object.defineProperty(r,"noteAddWithFiles",{enumerable:!0,get:function(){return o.noteAddWithFiles}}),Object.defineProperty(r,"noteFetch",{enumerable:!0,get:function(){return o.noteFetch}}),Object.defineProperty(r,"noteFetchFromItem",{enumerable:!0,get:function(){return o.noteFetchFromItem}}),Object.defineProperty(r,"noteFetchFromProject",{enumerable:!0,get:function(){return o.noteFetchFromProject}}),Object.defineProperty(r,"noteInsert",{enumerable:!0,get:function(){return o.noteInsert}}),Object.defineProperty(r,"noteRemove",{enumerable:!0,get:function(){return o.noteRemove}}),Object.defineProperty(r,"noteRemoveReaction",{enumerable:!0,get:function(){return o.noteRemoveReaction}}),Object.defineProperty(r,"noteUpdate",{enumerable:!0,get:function(){return o.noteUpdate}}),Object.defineProperty(r,"TYPE_PROJECT_NOTE",{enumerable:!0,get:function(){return a.TYPE_PROJECT_NOTE}}),Object.defineProperty(r,"TYPE_ITEM_NOTE",{enumerable:!0,get:function(){return a.TYPE_ITEM_NOTE}}),Object.defineProperty(r,"NOTE_ADD",{enumerable:!0,get:function(){return a.NOTE_ADD}}),Object.defineProperty(r,"NOTE_UPDATE",{enumerable:!0,get:function(){return a.NOTE_UPDATE}}),Object.defineProperty(r,"NOTE_REMOVE",{enumerable:!0,get:function(){return a.NOTE_REMOVE}}),Object.defineProperty(r,"NOTE_FETCH",{enumerable:!0,get:function(){return a.NOTE_FETCH}}),Object.defineProperty(r,"NOTE_ADD_REACTION",{enumerable:!0,get:function(){return a.NOTE_ADD_REACTION}}),Object.defineProperty(r,"NOTE_REMOVE_REACTION",{enumerable:!0,get:function(){return a.NOTE_REMOVE_REACTION}}),Object.defineProperty(r,"noteGetAll",{enumerable:!0,get:function(){return i.noteGetAll}}),Object.defineProperty(r,"noteGetByID",{enumerable:!0,get:function(){return i.noteGetByID}}),Object.defineProperty(r,"noteGetByItem",{enumerable:!0,get:function(){return i.noteGetByItem}}),Object.defineProperty(r,"noteGetByItemSorted",{enumerable:!0,get:function(){return i.noteGetByItemSorted}}),Object.defineProperty(r,"noteGetByParentID",{enumerable:!0,get:function(){return i.noteGetByParentID}}),Object.defineProperty(r,"noteGetByParentIDSorted",{enumerable:!0,get:function(){return i.noteGetByParentIDSorted}}),Object.defineProperty(r,"noteGetByProject",{enumerable:!0,get:function(){return i.noteGetByProject}}),Object.defineProperty(r,"noteGetByProjectSorted",{enumerable:!0,get:function(){return i.noteGetByProjectSorted}}),Object.defineProperty(r,"noteGetGroupedByParentID",{enumerable:!0,get:function(){return i.noteGetGroupedByParentID}}),Object.defineProperty(r,"hasMoreNotes",{enumerable:!0,get:function(){return i.hasMoreNotes}}),Object.defineProperty(r,"hasMoreItemNotes",{enumerable:!0,get:function(){return i.hasMoreItemNotes}}),Object.defineProperty(r,"hasMoreProjectNotes",{enumerable:!0,get:function(){return i.hasMoreProjectNotes}}),
r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./reducers")),o=e("./actions"),a=e("./constants"),i=e("./selectors"),l=n.default;r.default=l},{"./actions":1112,"./constants":1113,"./reducers":1115,"./selectors":1116}],1115:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return s(e)||l(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=e("../../utils"),c=e("../../utils/fp"),d=e("../load"),f=e("../sync"),p=e("../items"),m=e("./constants"),h=e("../utils"),_=e("./utils"),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.LOAD_LOCAL_DATA:return t.payload.notes?(0,c.compose)((0,c.keyBy)("id"),(0,c.map)(_.deserializeNote))((0,c.values)(t.payload.notes)):e;case f.SYNC_UPDATE:var r=t.payload,i=r.notes,l=r.project_notes,s=r.temp_id_mapping;s&&(e=(0,h.resolveTempID)(e,s));var y=[];return i&&(y=i),l&&(y=[].concat(a(y),a(l))),y=y.map(function(e){return e.posted?(0,_.deserializeNote)(e):e}),y.length>0&&(e=(0,h.mergeSyncUpdate)(e,y)),Signals.sendSignal("notes_updated",y),e;case f.SYNC_FULL_UPDATE:var v=t.payload,g=v.notes,b=v.project_notes;return g=g||[],b=b||[],(0,c.compose)((0,c.keyBy)("id"),(0,c.map)(_.deserializeNote))([].concat(a(g),a(b)));case m.NOTE_ADD:case m.NOTE_UPDATE:return n({},e,o({},t.payload.id,t.payload));case m.NOTE_REMOVE:var w=n({},e);return delete w[t.payload],w;case m.NOTE_ADD_REACTION:var E=t.payload,j=E.id,O=E.reaction,S=E.userId,P=e[j],I=P.reactions||{},k=I[O]||[];return k.indexOf(S)>-1?e:(k=[].concat(a(k),[S]),I=n({},I,o({},O,k)),n({},e,o({},j,n({},e[j],{reactions:I}))));case m.NOTE_REMOVE_REACTION:var T=t.payload,C=T.id,D=T.reaction,A=T.userId,M=e[C],x=M.reactions;if(!x[D]||-1===x[D].indexOf(A))return e;return 0===x[D].filter(function(e){return e!==A}).length&&(x=(0,u.omit)(x,D)),0===Object.keys(x).length&&(x=null),n({},e,o({},C,n({},e[C],{reactions:x})));case p.ITEM_UNCOMPLETE:var R=(0,c.compose)((0,c.map)(function(e){return n({},e,{is_archived:0})}),(0,c.filter)(function(e){return e.item_id===t.payload}),c.values)(e);return R.length?n({},e,(0,c.keyBy)("id",R)):e;case m.NOTE_FETCH:if(!t.payload||0===t.payload.length)return e;var N=t.payload.filter(function(t){return!e[t.id]}).map(_.deserializeNote);return 0===N.length?e:n({},e,(0,c.keyBy)("id",N));default:return e}},v=y;r.default=v},{"../../utils":1176,"../../utils/fp":1166,"../items":1100,"../load":1108,"../sync":1131,"../utils":1136,"./constants":1113,"./utils":1117}],1116:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}Object.defineProperty(r,"__esModule",{value:!0}),r.hasMoreProjectNotes=r.hasMoreItemNotes=r.hasMoreNotes=r.noteGetItemNoteCount=r.noteGetByParentIDSorted=r.noteGetByParentID=r.noteGetByProjectSorted=r.noteGetByProject=r.noteGetByItemSorted=r.noteGetByItem=r.noteGetGroupedByParentID=r.noteGetByID=r.noteGetAll=void 0;var l=e("../../utils"),s=e("reselect"),u=function(e){return e&&e.__esModule?e:{default:e}}(e("../../models/TemporaryIds")),c=e("./constants"),d=e("./utils"),f=e("../items/selectors"),p=(0,s.createSelector)(function(e){return e.notes},function(e){return(0,l.values)(e)});r.noteGetAll=p;var m=function(e,t){return e.notes[u.default.getRealId(t)]};r.noteGetByID=m;var h=(0,s.createSelector)(p,function(e){var t={},r={};return e.forEach(function(e){e.item_id?(r[e.item_id]||(r[e.item_id]=[]),r[e.item_id].push(e)):(t[e.project_id]||(t[e.project_id]=[]),t[e.project_id].push(e))}),{itemNotes:r,projectNotes:t}});r.noteGetGroupedByParentID=h;var _=function(e,t){return h(e).itemNotes[t]||[]};r.noteGetByItem=_;var y=function(e,t){return _(e,t).sort(d.sortByPostedTimeFn)};r.noteGetByItemSorted=y;var v=function(e,t){return h(e).projectNotes[t]||[]};r.noteGetByProject=v;var g=function(e,t){return v(e,t).sort(d.sortByPostedTimeFn)};r.noteGetByProjectSorted=g;var b=function(e,t,r){return t=u.default.getRealId(t),r===c.TYPE_ITEM_NOTE?_(e,t):r===c.TYPE_PROJECT_NOTE?v(e,t):void 0};r.noteGetByParentID=b;var w=function(e,t,r){return b(e,t,r).sort(d.sortByPostedTimeFn)};r.noteGetByParentIDSorted=w;var E=function(e,t,r){var o=r.countChildren;if(void 0!==o&&o){var a,i=t.map(function(t){return(0,f.itemGetChildren)(t,e).map(function(e){return e.id})});t=(a=t).concat.apply(a,n(i))}var s=t.map(function(t){return _(e,t).length});return l.sum.apply(void 0,n(s))};r.noteGetItemNoteCount=E;var j=function(e,t,r){return r===c.TYPE_ITEM_NOTE?O(e,t):r===c.TYPE_PROJECT_NOTE?S(e,t):void 0};r.hasMoreNotes=j;var O=function(e,t){return Boolean(e.moreNotes.items[t])};r.hasMoreItemNotes=O;var S=function(e,t){return Boolean(e.moreNotes.projects[t])};r.hasMoreProjectNotes=S},{"../../models/TemporaryIds":172,"../../utils":1176,"../items/selectors":1102,"./constants":1113,"./utils":1117,reselect:"reselect"}],1117:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.generateFile=r.sortByPostedTimeFn=r.deserializeNote=void 0;var a=e("../../utils"),i=function(e){return n({},e,{posted:new Date(e.posted)})};r.deserializeNote=i;var l=function(e,t){return(0,a.isString)(e.posted)&&(e.posted=new Date(e.posted)),(0,a.isString)(t.posted)&&(t.posted=new Date(t.posted)),e.posted.getTime()===t.posted.getTime()?e.id-t.id:e.posted.getTime()-t.posted.getTime()};r.sortByPostedTimeFn=l;var s=function(e){var t,r={};return e.file_server_info?(r.file_server_info=e.file_server_info,t=!1):(r.file_server_info={file_name:e.file.name,file_type:e.file.type,file_size:e.file.size,upload_state:"pending"},t=!0),{file_info:r,is_buffer_obj:t}};r.generateFile=s},{"../../utils":1176}],1118:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.projectArchive=r.projectArchivedFeteched=r.projectFetchArchived=r.projectUnarchive=r.projectMoveAndReorderUndo=r.projectMoveAndReorder=r.projectUpdateLocalFields=r.projectUpdate=r.projectRemove=r.projectAdd=r.PROJECT_UPDATE_LOCAL=r.PROJECT_UPDATE=r.PROJECT_UNARCHIVE=r.PROJECT_REMOVE=r.PROJECT_MOVE_AND_REORDER_UNDO=r.PROJECT_MOVE_AND_REORDER=r.PROJECT_ARCHIVED_FETCHED=r.PROJECT_ARCHIVE=r.PROJECT_ADD=void 0;var i=e("../../utils"),l=e("../utils"),s=n(e("../../models/SyncEngine")),u=n(e("../../models/TemporaryIds")),c=n(e("../../logger/Logger")),d=e("../../reducers/items"),f=e("../../models/Colors"),p=e("./selectors");r.PROJECT_ADD="PROJECT_ADD";r.PROJECT_ARCHIVE="PROJECT_ARCHIVE";r.PROJECT_ARCHIVED_FETCHED="PROJECT_ARCHIVED_FETCHED";r.PROJECT_MOVE_AND_REORDER="PROJECT_MOVE_AND_REORDER";r.PROJECT_MOVE_AND_REORDER_UNDO="PROJECT_MOVE_AND_REORDER_UNDO";r.PROJECT_REMOVE="PROJECT_REMOVE";r.PROJECT_UNARCHIVE="PROJECT_UNARCHIVE";r.PROJECT_UPDATE="PROJECT_UPDATE";r.PROJECT_UPDATE_LOCAL="PROJECT_UPDATE_LOCAL";var m=function(e){var t=e.name,r=e.color,n=void 0===r?f.DEFAULT_COLOR:r,o=e.parent_id,a=void 0===o?null:o,i=e.is_favorite,l=void 0!==i&&i,c=e.child_order;return function(e,r){if(!t||""==t.trim())throw new Error("project name cannot be empty");var o=(0,p.projectGetByParentID)(a)(r()).filter(function(e){return e.child_order>=c}).map(function(e){return{id:e.id,child_order:e.child_order+1}});e(v(o,{noUndo:!0}));var i={id:u.default.generate("project"),name:t.trim(),color:n,parent_id:a,child_order:c,is_favorite:l,collapsed:0,is_archived:!1};return s.default.queueUpdate({type:"project_add",temp_id:i.id,args:i}),e({type:"PROJECT_ADD",payload:i}),i}};r.projectAdd=m;var h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t=t.map(function(e){return u.default.getRealId(e)}),t.find(function(e){return(0,i.isRealID)(e)&&(0,l.isNonUniqueID)(e)}))return void c.default.captureMessage("Attempt to delete project with non-unique ID",{level:"error",extra:{ids:t}});var n=!0,o=!1,a=void 0;try{for(var d,f=t[Symbol.iterator]();!(n=(d=f.next()).done);n=!0){var p=d.value;s.default.queueUpdate({type:"project_delete",args:{id:p}})}}catch(e){o=!0,a=e}finally{try{n||null==f.return||f.return()}finally{if(o)throw a}}return{type:"PROJECT_REMOVE",payload:t}};r.projectRemove=h;var _=function(e,t){return function(r){e=u.default.getRealId(e),t=o({},t),(t.hasOwnProperty("indent")||t.hasOwnProperty("item_order")||t.hasOwnProperty("parent_id")||t.hasOwnProperty("child_order"))&&(console.log("[warning] ordering structure should not be updated by PROJECT_UPDATE action"),t=(0,i.omit)(t,["indent","item_order","parent_id","child_order"])),t.name&&(t.name=t.name.trim()),s.default.queueUpdate({type:"project_update",args:o({id:e},t)}),r({type:"PROJECT_UPDATE",payload:a({},e,t)})}};r.projectUpdate=_;var y=function(e){return{type:"PROJECT_UPDATE_LOCAL",payload:e}};r.projectUpdateLocalFields=y;var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{noUndo:!1},r=t.noUndo;return function(t,n){var a=n(),i=a.projects;e=e.map((0,l.resolveTempIDFields)(["id","parent_id"]));var u=e.map(function(e){e=o({},e);var t=i[e.id];return t.parent_id===e.parent_id&&delete e.parent_id,t.child_order===e.child_order&&delete e.child_order,e}).filter(function(e){return void 0!==e.parent_id||void 0!==e.child_order}),c=!0,d=!1,f=void 0;try{for(var p,m=u[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=p.value,_=h.id,y=h.parent_id;void 0!==y&&s.default.queueUpdate({type:"project_move",args:{id:_,parent_id:y}})}}catch(e){d=!0,f=e}finally{try{c||null==m.return||m.return()}finally{if(d)throw f}}var v=u.filter(function(e){return void 0!==e.child_order}).map(function(e){return{id:e.id,child_order:e.child_order}});0!==v.length&&s.default.queueUpdate({type:"project_reorder",args:{projects:v}}),u.length>0&&t({type:"PROJECT_MOVE_AND_REORDER",payload:{orders:u,noUndo:r}})}};r.projectMoveAndReorder=v;var g=function(){return function(e,t){var r=t(),n=r.undo;if("PROJECT_MOVE_AND_REORDER_UNDO"===n.type){var o=(0,i.values)(n.projects),a=!0,l=!1,u=void 0;try{for(var c,d=o[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value,p=f.id,m=f.parent_id;void 0!==m&&s.default.queueUpdate({type:"project_move",args:{id:p,parent_id:m}})}}catch(e){l=!0,u=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw u}}var h=o.filter(function(e){return void 0!==e.child_order}).map(function(e){return{id:e.id,child_order:e.child_order}});h.length>0&&s.default.queueUpdate({type:"project_reorder",args:{projects:h}}),e({type:"PROJECT_MOVE_AND_REORDER_UNDO"}),Signals.sendSignal("instant_refresh_interface")}}};r.projectMoveAndReorderUndo=g;var b=function(e){return function(t){e.is_archived=!1,s.default.queueUpdate({type:"project_unarchive",args:{id:e.id}}),t({type:"PROJECT_UNARCHIVE",payload:e})}};r.projectUnarchive=b;var w=function(e){return function(t,r){var n=r().user.token;return fetch("/API/".concat(s.default.api_version,"/projects/get_data"),{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"project_id=".concat(e,"&token=").concat(n)}).then(function(e){if(200===e.status)return e.json();throw e}).then(function(e){return t(E(e.project)),e.items=e.items.map(function(e){return(0,d.deserializeItemFields)(e)}),e})}};r.projectFetchArchived=w;var E=function(e){e=(0,i.isArray)(e)?e:[e];var t=e.filter(function(e){return(0,i.isRealID)(e.id)&&(0,l.isNonUniqueID)(e.id)});return t.length>0?(c.default.captureMessageWithTrace("Fetched non-unique projects",{extra:{bads:t},tags:{critical:"unique_id"}}),{type:"PROJECT_ARCHIVED_FETCHED",payload:[]}):{type:"PROJECT_ARCHIVED_FETCHED",payload:e}};r.projectArchivedFeteched=E;var j=function(t){return function(r){return e("../../models/SyncEngine").queueUpdate({type:"project_archive",args:{id:t}}),r({type:"PROJECT_ARCHIVE",payload:t})}};r.projectArchive=j},{"../../logger/Logger":129,"../../models/Colors":149,"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../reducers/items":1100,"../../utils":1176,"../utils":1136,"./selectors":1121}],1119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"projectsCases",{enumerable:!0,get:function(){return n.projectsCases}}),Object.defineProperty(r,"projectAdd",{enumerable:!0,get:function(){return o.projectAdd}}),Object.defineProperty(r,"projectArchive",{enumerable:!0,get:function(){return o.projectArchive}}),Object.defineProperty(r,"projectArchivedFeteched",{enumerable:!0,get:function(){return o.projectArchivedFeteched}}),Object.defineProperty(r,"projectFetchArchived",{enumerable:!0,get:function(){return o.projectFetchArchived}}),Object.defineProperty(r,"projectMoveAndReorder",{enumerable:!0,get:function(){return o.projectMoveAndReorder}}),Object.defineProperty(r,"projectMoveAndReorderUndo",{enumerable:!0,get:function(){return o.projectMoveAndReorderUndo}}),Object.defineProperty(r,"projectRemove",{enumerable:!0,get:function(){return o.projectRemove}}),Object.defineProperty(r,"projectUnarchive",{enumerable:!0,get:function(){return o.projectUnarchive}}),Object.defineProperty(r,"projectUpdate",{enumerable:!0,get:function(){return o.projectUpdate}}),Object.defineProperty(r,"projectUpdateLocalFields",{enumerable:!0,get:function(){return o.projectUpdateLocalFields}}),Object.defineProperty(r,"PROJECT_ADD",{enumerable:!0,get:function(){return o.PROJECT_ADD}}),Object.defineProperty(r,"PROJECT_ARCHIVE",{enumerable:!0,get:function(){return o.PROJECT_ARCHIVE}}),Object.defineProperty(r,"PROJECT_ARCHIVED_FETCHED",{enumerable:!0,get:function(){return o.PROJECT_ARCHIVED_FETCHED}}),Object.defineProperty(r,"PROJECT_MOVE_AND_REORDER",{enumerable:!0,get:function(){return o.PROJECT_MOVE_AND_REORDER}}),Object.defineProperty(r,"PROJECT_MOVE_AND_REORDER_UNDO",{enumerable:!0,get:function(){return o.PROJECT_MOVE_AND_REORDER_UNDO}}),Object.defineProperty(r,"PROJECT_REMOVE",{enumerable:!0,get:function(){return o.PROJECT_REMOVE}}),Object.defineProperty(r,"PROJECT_UNARCHIVE",{enumerable:!0,get:function(){return o.PROJECT_UNARCHIVE}}),Object.defineProperty(r,"PROJECT_UPDATE",{enumerable:!0,get:function(){return o.PROJECT_UPDATE}}),Object.defineProperty(r,"PROJECT_UPDATE_LOCAL",{enumerable:!0,get:function(){return o.PROJECT_UPDATE_LOCAL}}),Object.defineProperty(r,"projectGetActive",{enumerable:!0,get:function(){return a.projectGetActive}}),Object.defineProperty(r,"projectGetActiveSorted",{enumerable:!0,get:function(){return a.projectGetActiveSorted}}),Object.defineProperty(r,"projectGetActiveWithIndent",{enumerable:!0,get:function(){return a.projectGetActiveWithIndent}}),Object.defineProperty(r,"projectGetByID",{enumerable:!0,get:function(){return a.projectGetByID}}),Object.defineProperty(r,"projectGetByNameSearch",{enumerable:!0,get:function(){return a.projectGetByNameSearch}}),Object.defineProperty(r,"projectGetChildren",{enumerable:!0,get:function(){return a.projectGetChildren}}),Object.defineProperty(r,"projectGetFavorite",{enumerable:!0,get:function(){return a.projectGetFavorite}}),Object.defineProperty(r,"projectGetInbox",{enumerable:!0,get:function(){return a.projectGetInbox}}),Object.defineProperty(r,"projectGetMaxTopLevelChildOrder",{enumerable:!0,get:function(){return a.projectGetMaxTopLevelChildOrder}}),Object.defineProperty(r,"projectGetParent",{enumerable:!0,get:function(){return a.projectGetParent}}),Object.defineProperty(r,"projectGetTeamInbox",{enumerable:!0,get:function(){return a.projectGetTeamInbox}}),Object.defineProperty(r,"createProjectPickBySelector",{enumerable:!0,get:function(){return a.createProjectPickBySelector}}),r.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./reducers")),o=e("./actions"),a=e("./selectors"),i=n.default;r.default=i},{"./actions":1118,"./reducers":1120,"./selectors":1121}],1120:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e,t){return c(e)||u(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function c(e){if(Array.isArray(e))return e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){f(e,t,r[t])})}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.projectsCases=r.getAssociatesObjectIDs=r.default=void 0;var p=e("../../utils"),m=e("../../utils/fp"),h=e("../load"),y=function(e){return e&&e.__esModule?e:{default:e}}(e("../../utils/deleteUndefinedProperties")),v=e("../sync"),g=e("./actions"),b=e("./selectors"),w=e("../utils"),E=e("../undo"),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.LOAD_LOCAL_DATA:if(!t.payload.projects)return e;return(0,m.mapValues)(function(e){return e=d({},e),e.inbox_project&&(e.name=_("Inbox")),e.team_inbox&&(e.name=_("Team Inbox")),e},t.payload.projects);case v.SYNC_FULL_UPDATE:return(0,p.keyBy)(t.payload.projects,"id");case g.PROJECT_ADD:return d({},e,f({},t.payload.id,t.payload));case g.PROJECT_UPDATE_LOCAL:case g.PROJECT_UPDATE:var r=d({},e),n=!0,o=!1,a=void 0;try{for(var i,s=(0,p.toPairs)(t.payload)[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=l(i.value,2),c=u[0],w=u[1],E=r[c];E&&(E=d({},E,w),E=(0,y.default)(E),r[c]=E)}}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r;case g.PROJECT_UNARCHIVE:var j=t.payload;return j=d({},j,{is_archived:0,parent_id:null,child_order:(0,b.projectGetMaxTopLevelChildOrder)({projects:e})+1}),d({},e,f({},j.id,j));case g.PROJECT_ARCHIVED_FETCHED:return d({},e,(0,m.compose)(p.toIDMap,(0,m.map)(function(e){return d({},e,{_fetched_at:Date.now()})}))(t.payload));default:return e}},O=function(e){if(!e)return e;var t=!1,r=d({},e),n=Date.now(),o=!0,a=!1,i=void 0;try{for(var l,s=(0,p.values)(e)[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;u.is_archived&&u._fetched_at&&n-u._fetched_at>864e5&&(delete r[u.id],t=!0)}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return t?r:e},S=(0,m.compose)(O,j);r.default=S;var P=function(e,t){e=new Set(e);var r=function(e){return(0,m.compose)(function(e){return new Set(e)},(0,m.map)(function(e){return e.id}),(0,m.filter)(e),p.values)},n=r(function(t){return e.has(t.project_id)})(t.items),o=r(function(t){return!t.item_id?e.has(t.project_id):n.has(t.item_id)})(t.notes),a=r(function(e){return n.has(e.item_id)})(t.reminders),i=r(function(t){return e.has(t.project_id)})(t.sections);return{items:n,notes:o,reminders:a,sections:i}};r.getAssociatesObjectIDs=P;var I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.includeSubprojects;if(void 0!==o&&o){var a=(0,m.compose)((0,m.map)(function(e){return e.id}),m.flatten,(0,m.map)(function(e){return(0,b.projectGetChildren)(e,t)}))(e);e=new Set([].concat(n(e),n(a)))}else e=new Set(e);var i=P(e,t),l=i.items,s=i.notes,u=i.reminders,c=i.sections;return(0,m.compose)((0,w.removeFromSlice)("projects",e),(0,w.removeFromSlice)("sections",c),(0,w.removeFromSlice)("items",l),(0,w.removeFromSlice)("notes",s),(0,w.removeFromSlice)("reminders",u))(t)},k=function(e,t){switch(t.type){case g.PROJECT_MOVE_AND_REORDER:var r=t.payload,n=r.orders,o=r.noUndo,a=d({},e.projects),i={},l=!0,s=!1,u=void 0;try{for(var c,f=n[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var h=c.value,y=h.id,b=h.parent_id,j=h.child_order,O=d({},a[y]);i[y]={id:y},void 0!==b&&(i[y].parent_id=O.parent_id,O.parent_id=b),void 0!==j&&(i[y].child_order=O.child_order,O.child_order=j),a[y]=O}}catch(e){s=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}var S=d({},e,{projects:a});return o||(S=(0,E.setUndo)({type:g.PROJECT_MOVE_AND_REORDER_UNDO,projects:i},S)),S;case g.PROJECT_MOVE_AND_REORDER_UNDO:return d({},e,{projects:(0,m.merge)(e.projects,e.undo.projects),undo:null});case g.PROJECT_ARCHIVE:var P=t.payload,k=e.projects[P],C=I([P],e,{includeSubprojects:!0});return C=(0,E.pushMessage)((0,p.format)(_("{project_name} archived"),{project_name:k.name}),C);case g.PROJECT_REMOVE:var D=t.payload;return I(D,e,{includeSubprojects:!1});case v.SYNC_UPDATE:var A=t.payload,M=A.projects,x=A.temp_id_mapping;if(x&&(e=d({},e,{projects:(0,w.resolveTempID)(e.projects,x)}),e=T(e,t.payload)),!M||0===M.length)return e;e=d({},e,{projects:d({},e.projects,(0,p.byID)(M))});var R=(0,m.compose)((0,m.map)(function(e){return e.id}),(0,m.filter)(function(e){return e.is_deleted||e.is_archived}))(M);return e=I(R,e,{includeSubprojects:!1})}return e};r.projectsCases=k;var T=function(e,t){try{var r=e.undo;if(!r)return e;var n=t.temp_id_mapping;switch(r.type){case g.PROJECT_MOVE_AND_REORDER_UNDO:var o=r.projects;return o=(0,m.compose)((0,m.mapValues)(function(e){return d({},e,{parent_id:n[e.parent_id]||e.parent_id})}),(0,m.mapKeys)(function(e){return n[e]||e}))(o),d({},e,{undo:d({},r,{projects:o})});default:return e}}catch(t){return e}}},{"../../utils":1176,"../../utils/deleteUndefinedProperties":1153,"../../utils/fp":1166,"../load":1108,"../sync":1131,"../undo":1134,"../utils":1136,"./actions":1118,"./selectors":1121}],1121:[function(e,t,r){"use strict";function n(e,t){var r=(0,s.createSelector)(function(e){return e.projects},function(t){return(0,i.getByNameSearch)(e,t)});return 1===arguments.length?r:r(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.projectGetByNameSearch=n,r.createProjectPickBySelector=r.projectGetMaxTopLevelChildOrder=r.projectGetMinTopLevelChildOrder=r.projectGetFavorite=r.projectGetParent=r.projectGetChildren=r.projectGetActiveWithIndent=r.projectGetActiveSorted=r.projectGetByParentID=r.projectGetActive=r.projectGetTeamInbox=r.projectGetInbox=r.projectGetByID=void 0;var o=e("../../utils/fp"),a=e("redux"),i=e("../utils"),l=function(e){return e&&e.__esModule?e:{default:e}}(e("../../models/TemporaryIds")),s=e("reselect"),u=function(e,t){return t=l.default.getRealId(t),e.projects[t]};r.projectGetByID=u;var c=function(e){return e.projects[e.user.inbox_project]};r.projectGetInbox=c;var d=function(e){return e.projects[e.user.team_inbox]};r.projectGetTeamInbox=d;var f=(0,s.createSelector)(function(e){return e.projects},(0,o.filter)(function(e){return!e.is_archived}));r.projectGetActive=f;var p=(0,s.createSelector)(f,(0,o.groupBy)("parent_id")),m=function(e){return(0,a.compose)((0,o.sortBy)("child_order"),(0,o.filter)(function(t){return t.parent_id===e}),o.values,function(e){return e.projects})};r.projectGetByParentID=m;var h=(0,s.createSelector)(p,function(e){return(0,i.descendentsSorted)(null,e)});r.projectGetActiveSorted=h;var _=(0,s.createSelector)(p,function(e){return(0,i.annotateIndentOrder)((0,i.descendentsSorted)(null,e))});r.projectGetActiveWithIndent=_;var y=function(e,t){return(0,i.descendentsSorted)(e,p(t))};r.projectGetChildren=y;var v=function(e,t){var r=e.projects[t];return e.projects[r.parent_id]};r.projectGetParent=v;var g=(0,s.createSelector)(h,(0,o.filter)(function(e){return e.is_favorite}));r.projectGetFavorite=g;var b=(0,s.createSelector)(h,(0,a.compose)(function(e){return e.length>0?e[0].child_order:1},(0,o.filter)(function(e){return null===e.parent_id})));r.projectGetMinTopLevelChildOrder=b;var w=(0,s.createSelector)(h,(0,a.compose)(function(e){return e.length>0?e[e.length-1].child_order:1},(0,o.filter)(function(e){return null===e.parent_id})));r.projectGetMaxTopLevelChildOrder=w;var E=function(e){return(0,s.createSelector)(function(e){return e.projects},(0,o.pickBy)(e))};r.createProjectPickBySelector=E},{"../../models/TemporaryIds":172,"../../utils/fp":1166,"../utils":1136,redux:"redux",reselect:"reselect"}],1122:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.getRemindersByItemID=r.reminderGetGroupByItemID=r.reminderUpdate=void 0;var a=e("../utils/fp"),i=e("../utils"),l=e("../reducers/modelbridge"),s=e("./items/actions"),u=e("../models/Reminders"),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.MODEL_BRIDGE_UPDATE:var r=t.payload.reminders;return r?n({},r):e;case s.ITEM_COMPLETE_RECURRING:var o=t.payload.id,i=(0,a.values)(e).filter(function(e){return e.item_id===o&&e.lprocessed});return 0===i.length?e:(i=(0,a.compose)(a.byID,(0,a.map)((0,a.omit)("lprocessed")))(i),n({},e,i));default:return e}},d=function(e,t){return function(r,n){var o=n(),a=m(e,o),i=t.filter(function(e){return!e.id}),l=a.filter(function(e){return!t.some(function(t){return t.id===e.id})});i.forEach(function(e){"time"===e.type?u.RemindersModel.add(e):u.RemindersModel.addLocation(e)}),l.forEach(function(e){u.RemindersModel.remove(e.id)})}};r.reminderUpdate=d;var f=(0,a.createSelector)(function(e){return e.reminders},(0,a.compose)((0,a.groupBy)("item_id"),a.values));r.reminderGetGroupByItemID=f;var p=[],m=(0,i.curry)(function(e,t){return f(t)[e]||p});r.getRemindersByItemID=m;var h=c;r.default=h},{"../models/Reminders":161,"../reducers/modelbridge":1110,"../utils":1176,"../utils/fp":1166,"./items/actions":1099}],1123:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e("redux"),i=o(e("./user")),l=n(e("./archived")),s=n(e("./items")),u=n(e("./projects")),c=o(e("./filters")),d=o(e("./labels")),f=o(e("./notes")),p=o(e("./reminders")),m=o(e("./tooltip")),h=o(e("./mainView")),_=o(e("./collaborators")),y=o(e("./stats")),v=o(e("./clock")),g=o(e("./settings")),b=o(e("./undo")),w=o(e("./dateistLangs")),E=o(e("./detailView")),j=o(e("./drafts")),O=o(e("./tempIds")),S=n(e("./sections")),P=o(e("./moreNotes")),I=n(e("./completed")),k=o(e("./consistency")),T=(0,a.combineReducers)({user:i.default,notes:f.default,reminders:p.default,items:s.default,sections:S.default,projects:u.default,labels:d.default,filters:c.default,collaborators:_.default,tooltip:m.default,mainView:h.default,detailView:E.default,stats:y.default,settings:g.default,clock:v.default,undo:b.default,dateistLangs:w.default,drafts:j.default,moreNotes:P.default,tempIds:O.default,archived:l.default,completed:I.default}),C=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){return t.reduce(function(e,t){return t(e,r)},e)}}(T,l.archivedCases,s.itemsCaseReducer,I.completedCases,S.sectionsCaseReducer,u.projectsCases,k.default);r.default=C},{"./archived":1083,"./clock":1085,"./collaborators":1086,"./completed":1087,"./consistency":1088,"./dateistLangs":1091,"./detailView":1092,"./drafts":1093,"./filters":1095,"./items":1100,"./labels":1105,"./mainView":1109,"./moreNotes":1111,"./notes":1114,"./projects":1119,"./reminders":1122,"./sections":1125,"./settings":1129,"./stats":1130,"./tempIds":1132,"./tooltip":1133,"./undo":1134,"./user":1135,redux:"redux"}],1124:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.sectionReorderUndo=r.sectionReorder=r.sectionMoveUndo=r.sectionMove=r.sectionUpdate=r.sectionArchive=r.sectionRemove=r.sectionAdd=r.SECTION_UPDATE=r.SECTION_REOREDER_UNDO=r.SECTION_REOREDER=r.SECTION_REMOVE=r.SECTION_MOVE_UNDO=r.SECTION_MOVE=r.SECTION_ARCHIVE=r.SECTION_ADD=void 0;var i=n(e("../../models/TemporaryIds")),l=n(e("../../models/SyncEngine")),s=e("../../utils"),u=e("../utils"),c=e("./selectors"),d=e("../../constants/constants");r.SECTION_ADD="SECTION_ADD";r.SECTION_ARCHIVE="SECTION_ARCHIVE";r.SECTION_MOVE="SECTION_MOVE";r.SECTION_MOVE_UNDO="SECTION_MOVE_UNDO";r.SECTION_REMOVE="SECTION_REMOVE";r.SECTION_REOREDER="SECTION_REOREDER";r.SECTION_REOREDER_UNDO="SECTION_REOREDER_UNDO";r.SECTION_UPDATE="SECTION_UPDATE";var f=function(e){return function(t,r){var n=r(),a=(0,c.sectionGetByPID)(e.project_id)(n);if(a.length>=d.MAX_SECTION_PER_PERJECT){var u=(0,s.format)(_n("For performance reasons you can add at most one section per project.","For performance reasons you can add at most {n} sections per project.",d.MAX_SECTION_PER_PERJECT),{n:d.MAX_SECTION_PER_PERJECT});return alert(u),null}var f=o({
id:i.default.generate("section"),date_added:(0,s.toISODateString)(new Date,{toUTC:!0})},e);e.section_order===Number.NEGATIVE_INFINITY&&(f.section_order=1),l.default.queueUpdate({type:"section_add",temp_id:f.id,args:f});var p=a.filter(function(t){return t.section_order>=e.section_order}),m=p.map(function(e,t){return{id:e.id,section_order:f.section_order+t+1}});return m.length>0&&l.default.queueUpdate({type:"section_reorder",args:{sections:m}}),t({type:"SECTION_ADD",payload:{section:f,reorder:m}}),f}};r.sectionAdd=f;var p=function(e){return function(t){e=i.default.getRealId(e),l.default.queueUpdate({type:"section_delete",args:{id:e}}),t({type:"SECTION_REMOVE",payload:e}),Signals.sendSignal("instant_refresh_interface")}};r.sectionRemove=p;var m=function(e){return function(t){e=i.default.getRealId(e),l.default.queueUpdate({type:"section_archive",args:{id:e,date_archived:(0,s.toISODateString)(new Date,{toUTC:!0})}}),t({type:"SECTION_ARCHIVE",payload:e}),Signals.sendSignal("instant_refresh_interface")}};r.sectionArchive=m;var h=function(e){return e=o({},e,{id:i.default.getRealId(e.id)}),l.default.queueUpdate({type:"section_update",args:e}),{type:"SECTION_UPDATE",payload:e}};r.sectionUpdate=h;var _=function(e){return function(t,r){var n=r();e=(0,u.resolveTempIDFields)(["id","project_id"],e),l.default.queueUpdate({type:"section_move",args:e}),e.section_order=(0,c.sectionGetMaxOrder)(e.project_id,n)+1,l.default.queueUpdate({type:"section_reorder",args:{sections:[{id:e.id,section_order:e.section_order}]}}),t({type:"SECTION_MOVE",payload:e}),Signals.sendSignal("instant_refresh_interface")}};r.sectionMove=_;var y=function(){return function(e,t){var r=t();if("SECTION_MOVE_UNDO"===r.undo.type){var n=r.undo.section,o=n.id,a=n.section_order,i=n.project_id;l.default.queueUpdate({type:"section_move",args:{id:o,project_id:i}}),l.default.queueUpdate({type:"section_reorder",args:{sections:[{id:o,section_order:a}]}}),e({type:"SECTION_MOVE_UNDO"}),Signals.sendSignal("instant_refresh_interface")}}};r.sectionMoveUndo=y;var v=function(e,t){return function(r,n){e=e.map((0,u.resolveTempIDFields)("id"));var o=n(),a=o.sections;if(e=e.filter(function(e){var t=e.id,r=e.section_order;return a[t].section_order!==r}),0!==e.length)return l.default.queueUpdate({type:"section_reorder",args:{sections:e}}),r({type:"SECTION_REOREDER",payload:{orders:e,withUndo:t}})}};r.sectionReorder=v;var g=function(){return function(e,t){var r=t(),n=r.undo,o=r.sections;if("SECTION_REOREDER_UNDO"===n.type){var a=n.orders;a=a.filter(function(e){var t=e.id,r=e.section_order;return o[t].section_order!==r}),0!==a.length&&(l.default.queueUpdate({type:"section_reorder",args:{sections:a}}),e({type:"SECTION_REOREDER_UNDO",payload:a}),Signals.sendSignal("instant_refresh_interface"))}}};r.sectionReorderUndo=g},{"../../constants/constants":98,"../../models/SyncEngine":169,"../../models/TemporaryIds":172,"../../utils":1176,"../utils":1136,"./selectors":1127}],1125:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"SECTION_ADD",{enumerable:!0,get:function(){return n.SECTION_ADD}}),Object.defineProperty(r,"SECTION_ARCHIVE",{enumerable:!0,get:function(){return n.SECTION_ARCHIVE}}),Object.defineProperty(r,"SECTION_MOVE",{enumerable:!0,get:function(){return n.SECTION_MOVE}}),Object.defineProperty(r,"SECTION_MOVE_UNDO",{enumerable:!0,get:function(){return n.SECTION_MOVE_UNDO}}),Object.defineProperty(r,"SECTION_REMOVE",{enumerable:!0,get:function(){return n.SECTION_REMOVE}}),Object.defineProperty(r,"SECTION_REOREDER_UNDO",{enumerable:!0,get:function(){return n.SECTION_REOREDER_UNDO}}),Object.defineProperty(r,"SECTION_UPDATE",{enumerable:!0,get:function(){return n.SECTION_UPDATE}}),Object.defineProperty(r,"sectionAdd",{enumerable:!0,get:function(){return n.sectionAdd}}),Object.defineProperty(r,"sectionArchive",{enumerable:!0,get:function(){return n.sectionArchive}}),Object.defineProperty(r,"sectionMove",{enumerable:!0,get:function(){return n.sectionMove}}),Object.defineProperty(r,"sectionMoveUndo",{enumerable:!0,get:function(){return n.sectionMoveUndo}}),Object.defineProperty(r,"sectionRemove",{enumerable:!0,get:function(){return n.sectionRemove}}),Object.defineProperty(r,"sectionReorder",{enumerable:!0,get:function(){return n.sectionReorder}}),Object.defineProperty(r,"sectionReorderUndo",{enumerable:!0,get:function(){return n.sectionReorderUndo}}),Object.defineProperty(r,"sectionUpdate",{enumerable:!0,get:function(){return n.sectionUpdate}}),Object.defineProperty(r,"sectionGetByPID",{enumerable:!0,get:function(){return o.sectionGetByPID}}),Object.defineProperty(r,"sectionGetMaxOrder",{enumerable:!0,get:function(){return o.sectionGetMaxOrder}}),Object.defineProperty(r,"sectionsCaseReducer",{enumerable:!0,get:function(){return a.sectionsCaseReducer}}),r.default=void 0;var n=e("./actions"),o=e("./selectors"),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./reducers")),i=a.default;r.default=i},{"./actions":1124,"./reducers":1126,"./selectors":1127}],1126:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.sectionsCaseReducer=r.default=void 0;var u=e("../../utils/fp"),c=e("../../utils"),d=e("../load"),f=e("../sync"),p=e("./actions"),m=e("../utils"),h=e("../undo"),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.LOAD_LOCAL_DATA:var r=t.payload.sections;return r?(0,u.mapValues)(g)(r):e;case f.SYNC_FULL_UPDATE:var n=t.payload.sections;return n?(0,u.compose)(c.toIDMap,(0,u.map)(g))(n):e;case p.SECTION_ADD:var o=t.payload,a=o.section,i=o.reorder,m=l({},e,s({},a.id,a));return i.length>0&&(m=(0,u.merge)(m,(0,u.byID)(i))),m;case p.SECTION_UPDATE:var h=t.payload,_=e[h.id];return l({},e,s({},_.id,l({},_,h)));default:return e}},y=_;r.default=y;var v=function(e){return function(t,r){var n=e(t,r);if(void 0===t||t.sections===n.sections)return n;var o=(0,u.compose)((0,u.map)(function(e){return e.id}),(0,u.filter)(function(e){return e.is_archived||e.is_deleted}),(0,u.get)("sections"))(n);return w(o,n)}}(function(e,t){switch(t.type){case p.SECTION_ARCHIVE:case p.SECTION_REMOVE:var r=t.payload,n=(0,m.updateObjects)(r,{is_archived:!0},e.sections);return l({},e,{sections:n});case p.SECTION_MOVE:var o=t.payload,a=o.id,i=o.project_id,d=o.section_order,_=e.sections,y=_[a],v=l({},y,{project_id:i,section_order:d}),b=l({},e,{sections:l({},_,s({},a,v))});return b=E([a],b),b=(0,h.setUndo)({type:p.SECTION_MOVE_UNDO,section:y,destProject:e.projects[i]},b);case p.SECTION_MOVE_UNDO:var w=e.undo.section,O=w.id,S=w.project_id,P=w.section_order,I=e.sections,k=I[O],T=l({},k,{project_id:S,section_order:P}),C=l({},e,{sections:l({},I,s({},O,T)),undo:null});return C=E([O],C);case f.SYNC_UPDATE:var D=t.payload,A=D.temp_id_mapping,M=D.sections,x=l({},e);if(A&&(x.sections=(0,m.resolveTempID)(x.sections,A),x=j(x,A)),!M||0==M.length)return x;M=(0,u.compose)(c.toIDMap,(0,u.map)(g))(M),x.sections=l({},x.sections,M);var R=(0,u.compose)((0,u.map)(function(e){return e.id}),(0,u.filter)(function(e){return M[e.id].project_id!==e.project_id}),u.values,(0,u.pick)((0,c.keys)(M)),(0,u.get)("sections"))(e);return R.length>0&&(x=E(R,x)),x;case p.SECTION_REOREDER:var N=t.payload.orders,L=N.map(function(t){var r=t.id;return{id:r,section_order:e.sections[r].section_order}}),$=l({},e);return $.sections=(0,u.merge)($.sections,(0,u.byID)(N)),t.payload.withUndo&&($=(0,h.setUndo)({type:p.SECTION_REOREDER_UNDO,orders:L},$)),$;case p.SECTION_REOREDER_UNDO:var U=e.undo.orders;return l({},e,{sections:(0,u.merge)(e.sections,(0,u.byID)(U)),undo:null})}return e});r.sectionsCaseReducer=v;var g=function(e){return l({},e,{date_added:new Date(e.date_added)})},b=function(e,t){e=new Set(e);var r=function(e){return(0,u.compose)(function(e){return new Set(e)},(0,u.map)(function(e){return e.id}),(0,u.filter)(e),u.values)},o=r(function(t){return e.has(t.section_id)})(t.items),a=r(function(e){return o.has(e.item_id)})(t.notes),i=r(function(e){return o.has(e.item_id)})(t.reminders);return(0,u.mapValues)(function(e){return n(e)},{items:o,notes:a,reminders:i})},w=function(e,t){e=new Set(e);var r=b(e,t),n=r.items,o=r.notes,a=r.reminders;return(0,u.compose)((0,m.removeFromSlice)("sections",e),(0,m.removeFromSlice)("items",n),(0,m.removeFromSlice)("notes",o),(0,m.removeFromSlice)("reminders",a))(t)},E=function(e,t){var r=b(e,t),n=r.items,o=r.notes;return n=(0,u.compose)(c.toIDMap,(0,u.map)(function(e){return l({},e,{project_id:t.sections[e.section_id].project_id})}),(0,u.map)(function(e){return t.items[e]}))(n),o=(0,u.compose)(c.toIDMap,(0,u.map)(function(e){return l({},e,{project_id:n[e.item_id].project_id})}),(0,u.map)(function(e){return t.notes[e]}))(o),l({},t,{items:l({},t.items,n),notes:l({},t.notes,o)})},j=function(e,t){var r=e.undo;if(!r)return e;switch(r.type){case p.SECTION_MOVE_UNDO:var n=r.section;return n=(0,m.resolveTempIDPaths)(["id","project_id"],t,n),l({},e,{undo:l({},r,{section:n})});case p.SECTION_REOREDER_UNDO:var o=r.orders;return o=o.map((0,m.resolveTempIDPaths)(["id"],t)),l({},e,{undo:l({},r,{orders:o})});default:return e}}},{"../../utils":1176,"../../utils/fp":1166,"../load":1108,"../sync":1131,"../undo":1134,"../utils":1136,"./actions":1124}],1127:[function(e,t,r){"use strict";function n(e,t){return(0,a.getByNameSearch)(e,t.sections)}Object.defineProperty(r,"__esModule",{value:!0}),r.sectionGetByNameSearch=n,r.sectionGetMaxOrder=r.sectionGetByPID=void 0;var o=e("../../utils/fp"),a=e("../utils"),i=function(e){return(0,o.compose)((0,o.sortBy)("section_order"),(0,o.filter)(function(t){return t.project_id===e}),o.values,(0,o.get)("sections"))};r.sectionGetByPID=i;var l=function(e,t){return(0,o.compose)(function(e){return e||0},o.last,(0,o.sortBy)(function(e){return e}),(0,o.map)(function(e){return e.section_order}),(0,o.filter)(function(t){return t.project_id===e}),o.values,(0,o.get)("sections"))(t)};r.sectionGetMaxOrder=l},{"../../utils/fp":1166,"../utils":1136}],1128:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}Object.defineProperty(r,"__esModule",{value:!0}),r.sortedProjects=r.dataLoaded=void 0;var l=e("../utils"),s=e("../utils/fp"),u=function(e){return null!=e.user&&null!=e.items&&null!=e.projects};r.dataLoaded=u;var c=function(e){var t=e.projects,r=t,o=(0,s.compose)((0,s.groupBy)("parent_id"),l.values)(t);return function e(t){var a=r[t],i=o[t];if(!i||0===i.length)return[a];var l=(0,s.compose)(s.flatten,(0,s.map)(function(t){return e(t.id)}),(0,s.sortBy)("child_order"))(i);return null===t?l:[a].concat(n(l))}(null)};r.sortedProjects=c},{"../utils":1176,"../utils/fp":1166}],1129:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.getTheme=void 0;var n=e("../utils/fp"),o=e("./load"),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if(t.type===o.LOAD_LOCAL_DATA){var r=t.payload["settings.theme"];return 0===r||r?{theme:r}:e}return e},i=function(e){var t=$queryArgument("theme");if(t)try{return parseInt(t)}catch(e){}var r=(0,n.get)("settings.theme",e);return 0===r||r?r:(0,n.get)("user.theme",e)};r.getTheme=i;var l=a;r.default=l},{"../utils/fp":1166,"./load":1108}],1130:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.totalCompleted=r.weekGoal=r.completedThisWeek=r.dailyGoal=r.completedToday=r.default=r.removeOldWeekItems=r.removeOldDayItems=r.thisWeek=r.weekItemsKey=r.today=r.resetThisWeekCount=r.resetTodayCount=r.fetchStats=void 0;var u=e("../utils"),c=e("../utils/fp"),d=e("redux"),f=e("./load"),p=e("../reducers/sync"),m=e("../reducers/items"),h=function(e){return e&&e.__esModule?e:{default:e}}(e("./higherorder/catchAndLogError")),_=function(){return function(e){return fetch("/sync/v8.3/completed/get_stats?as_karma_graph=0",{credentials:"include"}).then(function(e){if(200!=e.status){var t=new Error(e.statusText);throw t.jsonRes=e,t}return e.json()}).then(function(t){return e({type:"STATS_FETCHED",payload:t}),t})}};r.fetchStats=_;var y=function(e){return{type:"STATS_RESET_TODAY_COUNT",payload:e}};r.resetTodayCount=y;var v=function(e){return{type:"STATS_RESET_THIS_WEEK_COUNT",payload:e}};r.resetThisWeekCount=v;var g=function(){return(0,u.toISODateString)(new Date,{dateOnly:!0})};r.today=g;var b=function(e){var t=new Date(e);return t.setDate(e.getDate()+(1-e.getDay()-7)%7),t},w=function(e){var t=b(e),r=new Date(e);return r.setDate(t.getDate()+6),t=(0,u.toISODateString)(t,{dateOnly:!0}),r=(0,u.toISODateString)(r,{dateOnly:!0}),"".concat(t,"/").concat(r)};r.weekItemsKey=w;var E=function(){return w(new Date)};r.thisWeek=E;var j=function(e,t,r){var n=e[t];return n||(n={total_completed:0,date:t}),n=l({},n,{total_completed:Math.max(n.total_completed+r,0)}),l({},e,s({},t,n))},O=function(e,t,r){var o=e[t];if(!o){var a=t.split("/"),i=n(a,2);o={total_completed:0,from:i[0],to:i[1]}}return o=l({},o,{total_completed:Math.max(o.total_completed+r,0)}),l({},e,s({},t,o))},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=[0,1,2,3,4,5,6].map(function(e){var r=new Date(t);return r.setDate(t.getDate()-e),(0,u.toISODateString)(r,{dateOnly:!0})});return(0,u.keys)(e).find(function(e){return-1===r.indexOf(e)})?(0,c.pick)(r,e):e};r.removeOldDayItems=S;var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=[0,1,2,3].map(function(e){var r=new Date(t);return r.setDate(r.getDate()-7*e),w(r)});return(0,u.keys)(e).find(function(e){return-1===r.indexOf(e)})?(0,c.pick)(r,e):e};r.removeOldWeekItems=P;var I=(0,d.compose)((0,c.keyBy)("date"),(0,c.map)((0,c.pick)(["total_completed","date"]))),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;switch(t.type){case f.LOAD_LOCAL_DATA:var o=t.payload.stats;if(!o)return e;return(0,u.mapValues)(o.days_items,function(e){return e.goal_first_reached_at?l({},e,{goal_first_reached_at:new Date(e.goal_first_reached_at)}):e});case"STATS_FETCHED":return I(t.payload.days_items);case p.SYNC_FULL_UPDATE:case p.SYNC_UPDATE:var a=(0,c.get)("stats.days_items")(t.payload);if(!a)return e;a=I(a);var i=l({},e),d=!1,h=!0,_=!1,y=void 0;try{for(var v,b=(0,c.toPairs)(a)[Symbol.iterator]();!(h=(v=b.next()).done);h=!0){var w=n(v.value,2),E=w[0],O=w[1];(0,c.get)("".concat(E,".total_completed"))(e)!==O.total_completed&&(i[E]=l({},i[E],O),d=!0)}}catch(e){_=!0,y=e}finally{try{h||null==b.return||b.return()}finally{if(_)throw y}}return d?i:e;case m.ITEM_COMPLETE:case m.ITEM_COMPLETE_RECURRING:var S=j(e,g(),1),P=(0,c.getOr)(0,"".concat(g(),".total_completed"),e)<r,k=(0,c.getOr)(0,"".concat(g(),".total_completed"),S)>=r;return!(0,c.get)("".concat(g(),".goal_first_reached_at"),S)&&P&&k&&(S[g()].goal_first_reached_at=new Date),S;case m.ITEM_UNCOMPLETE:case m.ITEM_COMPLETE_UNDO:case m.ITEM_COMPLETE_RECURRING_UNDO:return j(e,g(),-1);case"STATS_RESET_TODAY_COUNT":var T=t.payload,C=e[g()];return C?(C=l({},C,{total_completed:T}),delete C.goal_first_reached_at,l({},e,s({},g(),C))):e;default:return e}},T=(0,d.compose)((0,c.keyBy)(function(e){return"".concat(e.from,"/").concat(e.to)}),(0,c.map)((0,c.pick)(["total_completed","to","from"]))),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;switch(t.type){case f.LOAD_LOCAL_DATA:var o=t.payload.stats;if(!o)return e;return(0,u.mapValues)(o.week_items,function(e){return e.goal_first_reached_at?l({},e,{goal_first_reached_at:new Date(e.goal_first_reached_at)}):e});case"STATS_FETCHED":return T(t.payload.week_items);case p.SYNC_FULL_UPDATE:case p.SYNC_UPDATE:var a=(0,c.get)("stats.week_items")(t.payload);if(!a)return e;a=T(a);var i=l({},e),d=!1,h=!0,_=!1,y=void 0;try{for(var v,g=(0,c.toPairs)(a)[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var b=n(v.value,2),w=b[0],j=b[1];(0,c.get)("".concat(w,".total_completed"))(e)!==j.total_completed&&(i[w]=l({},i[w],j),d=!0)}}catch(e){_=!0,y=e}finally{try{h||null==g.return||g.return()}finally{if(_)throw y}}return d?i:e;case m.ITEM_COMPLETE:case m.ITEM_COMPLETE_RECURRING:var S=E(),P=O(e,S,1),I=(0,c.getOr)(0,"".concat(S,".total_completed"),e)<r,k=(0,c.getOr)(0,"".concat(S,".total_completed"),P)>=r;return!(0,c.get)("".concat(S,".goal_first_reached_at"),P)&&I&&k&&(P[S].goal_first_reached_at=new Date),P;case m.ITEM_UNCOMPLETE:case m.ITEM_COMPLETE_UNDO:case m.ITEM_COMPLETE_RECURRING_UNDO:return O(e,E(),-1);case"STATS_RESET_THIS_WEEK_COUNT":var C=t.payload,D=e[E()];return D?(D=l({},D,{total_completed:C}),delete D.goal_first_reached_at,l({},e,s({},E(),D))):e;default:return e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{daily_goal:1,ignore_days:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.LOAD_LOCAL_DATA:var r=t.payload.stats;return r?r.goals:e;case"STATS_FETCHED":var n=t.payload.goals.daily_goal,o=t.payload.goals.ignore_days,a=t.payload.goals.weekly_goal;return n===e.daily_goal&&a===e.weekly_goal&&(0,u.isEqual)(o,e.ignore_days)?e:{daily_goal:n,ignore_days:o,weekly_goal:a};case p.SYNC_FULL_UPDATE:case p.SYNC_UPDATE:var i=t.payload.user;if(!i)return e;var l=i.daily_goal,s=i.weekly_goal,c=i.ignore_days;return l===e.daily_goal&&s===e.weekly_goal&&(0,u.isEqual)(c,e.ignore_days)?e:{daily_goal:l,ignore_days:c,weekly_goal:s};default:return e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.LOAD_LOCAL_DATA:if(!t.payload.user&&!t.payload.stats)return e;var r=(0,c.get)("user.completed_count")(t.payload);return r||(0,c.getOr)(0,"stats.completed_count")(t.payload);case"STATS_FETCHED":return t.payload.completed_count;case p.SYNC_FULL_UPDATE:case p.SYNC_UPDATE:var n=(0,c.get)("stats.completed_count")(t.payload);return n||e;case m.ITEM_COMPLETE:case m.ITEM_COMPLETE_RECURRING:return e+1;case m.ITEM_UNCOMPLETE:case m.ITEM_COMPLETE_UNDO:case m.ITEM_COMPLETE_RECURRING_UNDO:return e-1;default:return e}},M=function(e,t){var r=e&&e.goals,n=e&&e.days_items,o=e&&e.week_items,a=e&&e.completed_count;return r=D(r,t),n=k(n,t,r.daily_goal),o=C(o,t,r.weekly_goal),a=A(a,t),e?e.goals===r&&e.days_items===n&&e.week_items===o&&e.completed_count===a?e:(n=S(n),o=P(o),{days_items:n,week_items:o,goals:r,completed_count:a}):{days_items:n,week_items:o,goals:r,completed_count:a}},x=(0,h.default)(M,{tags:{reducer:"stats"}});r.default=x;var R=function(e){return(0,c.getOr)(0,"stats.days_items.".concat(g(),".total_completed"),e)};r.completedToday=R;var N=function(e){return(0,c.get)("stats.goals.daily_goal",e)};r.dailyGoal=N;var L=function(e){return(0,c.getOr)(0,"stats.week_items.".concat(E(),".total_completed"),e)};r.completedThisWeek=L;var $=function(e){return(0,c.get)("stats.goals.weekly_goal",e)};r.weekGoal=$;var U=function(e){return(0,c.getOr)(0,"stats.completed_count",e)};r.totalCompleted=U},{"../reducers/items":1100,"../reducers/sync":1131,"../utils":1176,"../utils/fp":1166,"./higherorder/catchAndLogError":1098,"./load":1108,redux:"redux"}],1131:[function(e,t,r){"use strict";function n(e){return{type:i,payload:e}}function o(e){return{type:a,payload:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.receiveSyncUpdate=n,r.receiveFullSyncUpdate=o,r.SYNC_UPDATE=r.SYNC_FULL_UPDATE=void 0;var a="SYNC_FULL_UPDATE";r.SYNC_FULL_UPDATE=a;var i="SYNC_UPDATE";r.SYNC_UPDATE=i},{}],1132:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e("../modelbridge"),i=e("../sync"),l=e("../../utils/fp"),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.MODEL_BRIDGE_UPDATE:var r=t.payload.tempIds;return r?n({},r):e;case i.SYNC_UPDATE:var o=t.payload.temp_id_mapping;return o&&0!==(0,l.keys)(o).length?n({},e,o):e;default:return e}},u=s;r.default=u},{"../../utils/fp":1166,"../modelbridge":1110,"../sync":1131}],1133:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(){return u(v,g),j(v)}function s(){return u(v,b),j(v)}function u(e,t){fetch("/sync/v8/tooltips/mark_event?token=".concat(window.User.token,"&name=").concat(e,"&event=").concat(t)).catch(function(e){h.captureError(e)})}function c(e,t){var r=(0,y.createSelector)(T,function(t){return null===t||-1!==t.indexOf(e)});return 1===arguments.length?r:arguments.length>1?r(arguments[1]):void 0}function d(e,t){var r=(0,y.createSelector)(C,function(t){return null!==t&&-1!==t.indexOf(e)});return 1===arguments.length?r:arguments.length>1?r(arguments[1]):void 0}Object.defineProperty(r,"__esModule",{value:!0}),r.acceptPremiumTrial=l,r.rejectPremiumTrial=s,r.markEvent=u,r.hasSeen=c,r.isScheduled=d,r.default=r.markUnseen=r.markSeen=r.scheduledUpdated=r.seenUpdated=r.EVENT_CLOSE=r.EVENT_FOLLOW=r.EVENT_PREMIUM_EXPIRING_CLOSE=r.EVENT_PREMIUM_EXPIRING_FOLLOW=r.EVENT_PREMIUM_TRIAL_CLOSE=r.EVENT_PREMIUM_TRIAL_FOLLOW=r.TOOLTIP_GOOGLE_ASSISTANT=r.TOOLTIP_CHECKBOX_PRIORITY=r.TOOLTIP_EMPTY_STATE_NEXT_7DAYS=r.TOOLTIP_EMPTY_STATE_INBOX=r.TOOLTIP_DARK_THEME=r.TOOLTIP_FIRST_TASK_COMPLETED=r.TOOLTIP_COMPLETE_FIRST_TASK=r.TOOLTIP_PREMIUM_EXPIRING=r.TOOLTIP_PREMIUM_TRIAL=r.TOOLTIP_SHARING=r.TOOLTIP_SMART_SCHEDULE=r.TOOLTIP_MARK_UNSEEN=r.TOOLTIP_RECEIVED_UPDATE=r.TOOLTIP_MARK_AS_SEEN=r.TOOLTIP_UPDATED=void 0;var f=e("../utils"),p=e("../utils/fp"),m=e("redux"),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../logger/Logger")),_=e("./load"),y=e("reselect");r.TOOLTIP_UPDATED="TOOLTIP_UPDATED";r.TOOLTIP_MARK_AS_SEEN="TOOLTIP_MARK_AS_SEEN";r.TOOLTIP_RECEIVED_UPDATE="TOOLTIP_RECEIVED_UPDATE";r.TOOLTIP_MARK_UNSEEN="TOOLTIP_MARK_UNSEEN";r.TOOLTIP_SMART_SCHEDULE="smart_schedule";r.TOOLTIP_SHARING="sharing";var v="premium_trial";r.TOOLTIP_PREMIUM_TRIAL=v;r.TOOLTIP_PREMIUM_EXPIRING="premium_expiring";r.TOOLTIP_COMPLETE_FIRST_TASK="web_complete_first_task";r.TOOLTIP_FIRST_TASK_COMPLETED="web_first_task_completed";r.TOOLTIP_DARK_THEME="dark_theme";r.TOOLTIP_EMPTY_STATE_INBOX="empty_state_inbox_first";r.TOOLTIP_EMPTY_STATE_NEXT_7DAYS="empty_state_next7days_first";r.TOOLTIP_CHECKBOX_PRIORITY="checkboxes_priority";r.TOOLTIP_GOOGLE_ASSISTANT="assistant_intro";var g="follow";r.EVENT_PREMIUM_TRIAL_FOLLOW=g;var b="close";r.EVENT_PREMIUM_TRIAL_CLOSE=b;r.EVENT_PREMIUM_EXPIRING_FOLLOW="follow";r.EVENT_PREMIUM_EXPIRING_CLOSE="close";r.EVENT_FOLLOW="follow";r.EVENT_CLOSE="close";var w=function(e){return{type:"TOOLTIP_UPDATED",payload:{seen:e}}};r.seenUpdated=w;var E=function(e){return{type:"TOOLTIP_UPDATED",payload:{scheduled:e}}};r.scheduledUpdated=E;var j=function(e,t){return function(r,n){return r({type:"TOOLTIP_MARK_AS_SEEN",payload:e}),t&&u(e,t),fetch("/sync/v8/tooltips/mark_as_seen?token=".concat(n().user.token,"&name=").concat(e)).catch(function(){})}};r.markSeen=j;var O=function(e){return function(t,r){return t({type:"TOOLTIP_MARK_UNSEEN",payload:e}),fetch("/sync/v8/tooltips/reset_seen?token=".concat(r().user.token,"&name=").concat(e))}};r.markUnseen=O;var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.LOAD_LOCAL_DATA:return t.payload["tooltip.seen"]||e;case"TOOLTIP_UPDATED":var r=t.payload.seen;if(void 0===r)return e;if(null===e)return r;var o=(0,p.difference)(r,e);return 0===o.length?e:[].concat(n(e),n(o));case"TOOLTIP_MARK_AS_SEEN":if(null===e)return e;var a=t.payload;return(0,f.uniq)([].concat(n(e),[a]));case"TOOLTIP_MARK_UNSEEN":return null===e?e:(0,f.without)(e,t.payload);default:return e}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.LOAD_LOCAL_DATA:return t.payload["tooltip.scheduled"]||e;case"TOOLTIP_UPDATED":var r=t.payload.scheduled;if(void 0===r)return e;if(null===e)return r;var o=(0,p.difference)(r,e);return 0===o.length?e:[].concat(n(e),n(o));case"TOOLTIP_MARK_AS_SEEN":return null===e?e:(0,f.without)(e,t.payload);default:return e}},I=(0,m.combineReducers)({seen:S,scheduled:P}),k=I;r.default=k;var T=(0,p.get)("tooltip.seen"),C=(0,p.get)("tooltip.scheduled")},{"../logger/Logger":129,"../utils":1176,"../utils/fp":1166,"./load":1108,redux:"redux",reselect:"reselect"}],1134:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.pushMessage=r.setUndo=r.notifyAddToProject=r.undoPushMessage=r.undoClear=r.NOTIFY_ADD_TO_PROJECT=r.UNDO_PUSH_MESSAGE=r.UNDO_CLEAR=void 0;r.UNDO_CLEAR="UNDO_CLEAR";r.UNDO_PUSH_MESSAGE="UNDO_PUSH_MESSAGE";r.NOTIFY_ADD_TO_PROJECT="NOTIFY_ADD_TO_PROJECT";var a=function(){return{type:"UNDO_CLEAR"}};r.undoClear=a;var i=function(e){return{type:"UNDO_PUSH_MESSAGE",payload:e}};r.undoPushMessage=i;var l=function(e,t){return function(r,n){var o=n().projects[t];r({type:"NOTIFY_ADD_TO_PROJECT",payload:{itemID:e,project:o}})}};r.notifyAddToProject=l;var s=function(e,t){return n({},t,{undo:n({createdAt:new Date},e)})};r.setUndo=s;var u=function(e,t){return n({},t,{undo:{createdAt:new Date,message:e}})};r.pushMessage=u;var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UNDO_CLEAR":return null;case"UNDO_PUSH_MESSAGE":return{createdAt:new Date,message:t.payload};case"NOTIFY_ADD_TO_PROJECT":return n({type:t.type,createdAt:new Date},t.payload);default:return e}},d=c;r.default=d},{}],1135:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.shouldShowReactView=r.getToken=r.getTimezoneInfo=r.getTimeFormat=r.getWeekStartDay=r.getNextWeekDay=r.getDaysOff=r.getKarma=r.getUser=r.itemsPerProjectLimit=r.isDoistUser=r.isDayOff=r.isPremium=r.daysSinceJoin=r.default=r.receivedUserUpdate=r.USER_RECEIVED_UPDATE=void 0;var a=e("../utils"),i=e("./load"),l=e("../reducers/sync"),s=e("../constants/constants"),u=e("reselect");r.USER_RECEIVED_UPDATE="USER_RECEIVED_UPDATE";var c=function(e){return{type:"USER_RECEIVED_UPDATE",payload:e}};r.receivedUserUpdate=c;var d=function(e){return e.join_date instanceof Date?e:n({},e,{join_date:new Date(e.join_date)})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.LOAD_LOCAL_DATA:return t.payload.user?d(t.payload.user):e;case l.SYNC_FULL_UPDATE:case l.SYNC_UPDATE:var r=t.payload.user;return r?(r=d(r),e&&(0,a.isEqual)(r.days_off,e.days_off)&&(r.days_off=e.days_off),r):e;case"USER_RECEIVED_UPDATE":return n({},e,t.payload);default:return e}},p=f;r.default=p;var m=function(e){var t=e.user;return Math.round(((new Date).getTime()-t.join_date.getTime())/864e5)};r.daysSinceJoin=m;var h=(0,u.createSelector)(function(e){return e.user},function(e){if(!e)return!1;if(e.is_premium)return!0;var t;return e.premium_until?t=new Date(e.premium_until):e.free_trail_expires&&(t=new Date(e.free_trail_expires)),!!(t&&t>new Date)});r.isPremium=h;var _=function(e){var t=e.user.days_off,r=(new Date).getDay(),n=0===r?7:r;return-1!==t.indexOf(n)};r.isDayOff=_;var y=(0,u.createSelector)(function(e){return e.user},function(e){return e&&(e.email.endsWith("@doist.com")||e.email.endsWith("@doist.io"))});r.isDoistUser=y;var v=function(e){return h(e)?s.MAX_ITEMS_PER_PROJECT_PREMIUM:s.MAX_ITEMS_PER_PROJECT_FREE};r.itemsPerProjectLimit=v;var g=function(e){return e.user};r.getUser=g;var b=function(e){return e.user.karma};r.getKarma=b;var w=function(e){return e.user.days_off};r.getDaysOff=w;var E=function(e){return e.user.next_week};r.getNextWeekDay=E;var j=function(e){return e.user.start_day};r.getWeekStartDay=j;var O=function(e){return e.user.time_format};r.getTimeFormat=O;var S=function(e){return e.user.tz_info};r.getTimezoneInfo=S;var P=function(e){return e.user.token};r.getToken=P;var I=function(e){return y(e)&&event&&event.altKey};r.shouldShowReactView=I},{
"../constants/constants":98,"../reducers/sync":1131,"../utils":1176,"./load":1108,reselect:"reselect"}],1136:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return f(e)||d(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function f(e){if(Array.isArray(e))return e}function p(e,t){return e=e.toLowerCase(),null==t||0===t.length||""===e?[]:(0,m.compose)((0,m.map)(function(e){return e.e}),(0,m.sortBy)(["i","e.item_order","e.id"]),(0,m.filter)(function(e){return-1!==e.i}),(0,m.map)(function(t){return{i:(0,h.partialMatchIndex)(e,t.name),e:t}}),(0,m.filter)(function(e){return!e.is_archived&&!e.is_deleted}))(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.getByNameSearch=p,r.resolveTempIDPaths=r.resolveTempIDFields=r.updateObjects=r.annotateIndentOrder=r.descendentsSorted=r.toUniqueID=r.isNonUniqueID=r.isUniqueID=r.mergeSyncUpdate=r.removeFromSlice=r.resolveTempID=void 0;var m=e("../utils/fp"),h=e("../utils"),_=function(e){return e&&e.__esModule?e:{default:e}}(e("../models/TemporaryIds")),y=function(e,t){var r,n=!0,o=!1,a=void 0;try{for(var i,s=(0,h.toPairs)(t)[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=u(i.value,2),d=c[0],f=c[1],p=e[d];p&&(r||(r=l({},e)),p=l({},p,{id:f}),delete r[d],r[p.id]=p)}}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r||e};r.resolveTempID=y;var v=(0,h.curry)(function(e,t,r){(0,h.isIterable)(t)&&(t=new Set(t));var n=t instanceof Set?function(e){return t.has(e.id)}:t,o=new Set((0,m.compose)((0,m.map)(function(e){return e.id}),(0,m.filter)(n),m.values,(0,m.get)(e))(r));if(0===o.size)return r;var a=l({},r[e]),i=!0,u=!1,c=void 0;try{for(var d,f=o[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){delete a[d.value]}}catch(e){u=!0,c=e}finally{try{i||null==f.return||f.return()}finally{if(u)throw c}}return l({},r,s({},e,a))});r.removeFromSlice=v;var g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.removeArchived,o=void 0===n||n;if(!t||0==t.length)return e;var a=l({},e),i=!0,s=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var f=c.value,p=f.id,m=f.is_deleted,h=f.is_archived;if(o&&(m||h))delete a[p];else if(a[p]){var _=e[p];a[p]=l({},_,f)}else a[p]=f}}catch(e){s=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(s)throw u}}return a};r.mergeSyncUpdate=g;var b=Math.pow(2,28)-1,w=function(e){return e>b};r.isUniqueID=w;var E=function(e){return e<=b};r.isNonUniqueID=E;var j=(0,h.curry)(function(e,t){return(0,h.isTempID)(t)||w(t)?t:e.user.unique_prefix<<28|t});r.toUniqueID=j;var O=function e(t,r){var o=r[t];return o?(0,m.compose)(m.flatten,(0,m.map)(function(t){return[t].concat(n(e(t.id,r)))}),(0,m.sortBy)("child_order"))(o):[]};r.descendentsSorted=O;var S=function(e){var t={};return e.map(function(e,r){var n=r+1,o=null===e.parent_id?1:(t[e.parent_id]||1)+1;return t[e.id]=o,l({},e,{item_order:n,indent:o})})};r.annotateIndentOrder=S;var P=function(e,t,r){return(0,h.isArray)(e)||(e=[e]),l({},r,(0,m.compose)((0,m.mapValues)(function(e){return l({},e,t)}),(0,m.pick)(e))(r))};r.updateObjects=P;var I=(0,h.curry)(function(e,t){e=(0,h.isArray)(e)?e:[e];var r=l({},t),n=!1;return e.forEach(function(e){if(t.hasOwnProperty(e)){var o=r[e];if((0,h.isArray)(o))r[e]=o.map(function(e){var t=_.default.getRealId(e);return e!==t&&(n=!0),t});else{var a=_.default.getRealId(o);o!==a&&(n=!0),r[e]=a}}}),n?r:t});r.resolveTempIDFields=I;var k=(0,h.curry)(function(e,t,r){e=(0,h.isArray)(e)?e:[e];var n=l({},r),o=!1;return e.forEach(function(e){if(r.hasOwnProperty(e)){var a=n[e];if((0,h.isArray)(a))n[e]=a.map(function(e){var r=t[e]||e;return e!==r&&(o=!0),r});else{var i=t[a]||a;a!==i&&(o=!0),n[e]=i}}}),o?n:r});r.resolveTempIDPaths=k},{"../models/TemporaryIds":172,"../utils":1176,"../utils/fp":1166}],1137:[function(e,t,r){"use strict";function n(){if(navigator.onLine){return a.global_error||a.getQueueErrorLength()||!i.fetched_data_from_server}return!0}function o(){var e=/(iPhone)/i.test(navigator.userAgent),t=!!navigator.userAgent.match(/Version\/[\d.]+.*Safari/);return e&&t}Object.defineProperty(r,"__esModule",{value:!0}),r.isOffline=n,r.isMobileSafari=o;var a=e("../models/SyncEngine"),i=e("../models/LoadEngine")},{"../models/LoadEngine":157,"../models/SyncEngine":169}],1138:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../logger/Logger")),o=e("../reducers/mainView"),a=e("../reducers/modelbridge"),i=new Set([a.MODEL_BRIDGE_UPDATE,o.VIEW_SHOW_PROJECT,o.VIEW_SHOW_QUERY,o.VIEW_SHOW_ACTIVITY_LOG,o.VIEW_SHOW_LABEL,o.VIEW_SHOW_FILTER,o.VIEW_SHOW_TODAY,o.VIEW_SHOW_7_DAYS]),l=function(){return function(e){return function(t){try{i.has(t.type)||n.captureBreadcrumb({message:t.type,category:"redux_action",level:"debug"})}catch(e){}return e(t)}}},s=l;r.default=s},{"../logger/Logger":129,"../reducers/mainView":1109,"../reducers/modelbridge":1110}],1139:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("../logger/Logger")),i=e("../reducers/modelbridge"),l=e("../reducers/sync"),s=function(){return function(e){return function(t){try{return e(t)}catch(e){throw t=n({},t),t.type!=i.MODEL_BRIDGE_UPDATE&&t.type!=l.SYNC_FULL_UPDATE||delete t.payload,a.captureError(e,{tags:{where:"redux"},extra:{action:t}}),e}}}},u=s;r.default=u},{"../logger/Logger":129,"../reducers/modelbridge":1110,"../reducers/sync":1131}],1140:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=e("redux"),a=n(e("redux-thunk")),i=n(e("../reducers/root")),l=n(e("./crashReporter")),s=n(e("./actionLogger")),u=e("../reducers/modelbridge"),c=n(e("../models/DateistDefLoader")),d=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.compose,f=[l.default,a.default,u.modelBridgeMiddleware,s.default],p=(0,o.createStore)(i.default,d(o.applyMiddleware.apply(void 0,f)));u.ModelBridge.init(p),c.default.init(p);var m=p;r.default=m},{"../models/DateistDefLoader":153,"../reducers/modelbridge":1110,"../reducers/root":1123,"./actionLogger":1138,"./crashReporter":1139,redux:"redux","redux-thunk":"redux-thunk"}],1141:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.subscribeSelectedPromise=void 0;var l=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(r.length<2)throw new Error("subscribeSelected error: missing required argument");var a=r.slice(0,-1),i=r[r.length-1],l=a.map(function(t){return t(e.getState())});return e.subscribe(function(){var t=e.getState(),r=!1,o=a.map(function(e,n){var o=e(t);return l[n]!==o&&(r=!0),o});r&&(l=o,i.apply(void 0,n(o)))})},s=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return new Promise(function(t){var o=r.slice(0,-1),a=r[r.length-1],i=l.apply(void 0,[e].concat(n(o),[function(){a.apply(void 0,arguments)&&(i(),t.apply(void 0,arguments))}]))})};r.subscribeSelectedPromise=s;var u=l;r.default=u},{}],1142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US"," ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"],o=n.reduce(function(e,t,r){return e[t]=r,e},{}),a=o;r.default=a},{}],1143:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.idbs=void 0;var l=n(e("idbstorage")),s=n(e("../logger/Logger")),u="localStorage",c=/.*quota*./i,d=function(e){return c.test(e.name)||c.test(e.message)},f=new l.default({name:"todoist.cellstorage"});r.idbs=f;var p=function(){function e(t){o(this,e),this.key=t,this.driverType=localStorage.getItem("".concat(this.key,"/driver"))||u}return i(e,[{key:"get",value:function(){if(this.checkDriverType(),this.usingLocalStorage){var e=localStorage.getItem("".concat(this.key,"/data"));return void 0===e?Promise.resolve(e):Promise.resolve(JSON.parse(e))}return f.getItem(this.key)}},{key:"set",value:function(e){if(this.checkDriverType(),this.usingLocalStorage)try{return void 0===e?this.clear():(localStorage.setItem("".concat(this.key,"/data"),JSON.stringify(e)),Promise.resolve())}catch(t){return d(t)?(this.switchToIDBDriver(),this.set(e)):Promise.reject(t)}return f.setItem(this.key,e)}},{key:"clear",value:function(){return this.checkDriverType(),this.usingLocalStorage?(localStorage.removeItem("".concat(this.key,"/data")),Promise.resolve()):f.clear()}},{key:"switchToIDBDriver",value:function(){localStorage.removeItem("".concat(this.key,"/data")),this.driverType="indexedDB",localStorage.setItem("".concat(this.key,"/driver"),"indexedDB")}},{key:"checkDriverType",value:function(){if(this.driverType!==u&&"indexedDB"!==this.driverType){var e=new Error("CellStorage: invalid driver '".concat(this.driverType,"'"));throw s.default.captureError(e,{tags:{where:"cellstroage"}}),Signals.sendSignal("clean_reload"),e}}},{key:"_DEBUG_forceSwtichIndexedDB",value:function(){var e=JSON.parse(localStorage.getItem("".concat(this.key,"/data")));this.switchToIDBDriver(),this.set(e)}},{key:"usingLocalStorage",get:function(){return this.driverType===u}},{key:"usingIndexedDB",get:function(){return"indexedDB"===this.driverType}}]),e}();r.default=p},{"../logger/Logger":129,idbstorage:"idbstorage"}],1144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isSafari=r.isIE=r.isMacApp=r.isChromeApp=r.isOutlookApp=r.isWindowApp=void 0;var n=-1!=window.location.hostname.indexOf("win.todoist");r.isWindowApp=n;var o=-1!=window.location.hostname.indexOf("outlook.todoist");r.isOutlookApp=o;var a=-1!=window.location.hostname.indexOf("chrome.todoist");r.isChromeApp=a;var i=null!=navigator.userAgent.match(/Todoist for macOS|TDMacApp/);r.isMacApp=i;var l=window.navigator.userAgent.toLowerCase().match(/msie|trident/);r.isIE=l;var s=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);r.isSafari=s},{}],1145:[function(e,t,r){"use strict";function n(){return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1146:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){this.size=0,this.limit="number"==typeof e?e:10,this.map={},this.head=null,this.tail=null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=n(e("lodash/isNumber")),i=n(e("lodash/isString")),l=n(e("lodash/values")),s=n(e("lodash/keys"));o.prototype.lrunode=function(e,t){void 0!==e&&null!==e&&(this.key=e),void 0!==t&&null!==t&&(this.value=t),this.prev=null,this.next=null},o.prototype.setHead=function(e){e.next=this.head,e.prev=null,null!==this.head&&(this.head.prev=e),this.head=e,null===this.tail&&(this.tail=e),this.size++,this.map[e.key]=e},o.prototype.set=function(e,t){if(!(0,a.default)(e)&&!(0,i.default)(e))throw new Error("Invalid arguemnt. key has to be string or number, but ".concat(e," is received"));var r=new o.prototype.lrunode(e,t);return this.map[e]?(this.map[e].value=r.value,this.delete(r.key)):this.size>=this.limit&&(delete this.map[this.tail.key],this.size--,this.tail=this.tail.prev,this.tail.next=null),this.setHead(r),this},o.prototype.get=function(e){if(this.map[e]){var t=this.map[e].value,r=new o.prototype.lrunode(e,t);return this.delete(e),this.setHead(r),t}},o.prototype.has=function(e){return!!this.map[e]},o.prototype.delete=function(e){if(!this.has(e))return!1;var t=this.map[e];return null!==t.prev?t.prev.next=t.next:this.head=t.next,null!==t.next?t.next.prev=t.prev:this.tail=t.prev,delete this.map[e],this.size--,!0},o.prototype.clear=function(e){this.size=0,this.map={},this.head=null,this.tail=null,"number"==typeof e&&(this.limit=e)},o.prototype.forEach=function(e){for(var t=this.head,r=0;t;)e.apply(this,[t,r,this]),r++,t=t.next},o.prototype.values=function(){return(0,l.default)(this.map).map(function(e){return e.value})},o.prototype.keys=function(){return(0,s.default)(this.map)}},{"lodash/isNumber":"lodash/isNumber","lodash/isString":"lodash/isString","lodash/keys":"lodash/keys","lodash/values":"lodash/values"}],1147:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function(){function e(t,r,o){n(this,e),this.jobFn=t,this.resolve=r,this.reject=o}return a(e,[{key:"exec",value:function(){try{var e=this.jobFn();return e instanceof Promise?e.then(this.resolve.bind(this),this.reject.bind(this)):(this.resolve(e),Promise.resolve(e))}catch(e){return Promise.reject(e)}}}]),e}(),l=function(){function e(){n(this,e),this.queue=[],this.isExecuting=!1}return a(e,[{key:"put",value:function(e){var t=this;return new Promise(function(r,n){var o=new i(e,r,n);t.queue.push(o),t.startNextJob()})}},{key:"clear",value:function(){this.queue=[]}},{key:"startNextJob",value:function(){if(0!=this.length&&!this.isExecuting){var e=this.queue[0];this.queue=this.queue.slice(1),this.isExecuting=!0,e.exec().then(this.onExecComplete.bind(this),this.onExecComplete.bind(this))}}},{key:"onExecComplete",value:function(){this.isExecuting=!1,this.startNextJob()}},{key:"length",get:function(){return this.queue.length}}]),e}();r.default=l},{}],1148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){var r=new Date;e.addEventListener("compositionstart",function(){r=new Date}),e.addEventListener("compositionend",function(e){var n=new Date;setTimeout(function(){r&&r>=n&&r.getTime()-n.getTime()<50||t(e)},10)})},o=n;r.default=o},{}],1149:[function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1150:[function(e,t,r){"use strict";function n(){var e=function(e,t,r,n,o){arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]&&arguments[6];r.lang=t;try{return Dateist.parse(e,r)}catch(e){return null}},t=(0,o.default)(e),r=(0,o.default)(e);return function(e,o,a){var i=n.now(),l=t(e,o,a,i.getMonth(),i.getDate());return l&&"hour"===l.unit&&(l=r(e,o,a,i.getMonth(),i.getDate(),i.getHours(),i.getMinutes())),l?l.due_date:null}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("./memoize"));n.defaultNow=function(){return new Date},n.now=n.defaultNow},{"./memoize":1188}],1151:[function(e,t,r){"use strict";function n(e){return e=new Date(e.getTime()),e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.setMilliseconds(999),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1152:[function(e,t,r){"use strict";function n(e){return e=new Date(e.getTime()),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1153:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){return s(e)||l(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function s(e){if(Array.isArray(e))return e}function u(e){var t=(0,c.default)(e).filter(function(e){var t=a(e,2);t[0];return void 0===t[1]}).map(function(e){return a(e,1)[0]});if(0===t.length)return e;var r=n({},e),o=!0,i=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){delete r[s.value]}}catch(e){i=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}return r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=u;var c=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash/toPairs"))},{"lodash/toPairs":"lodash/toPairs"}],1154:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function d(e,t){return new b(e,t)}function f(e){for(var t in e){if(!v[t])throw new Error("Undefined dep: cannot inject dependencies ".concat(t," that is not defined yet"));var r=e[t];v[t].inject(r)}}function p(){var e=w(v);if(e.length>0){var t=e.map(function(e){var t=o(e,2),r=t[0],n=t[1];return"".concat(r,": [").concat(n.join(", "),"]")}).join("\n");throw new Error("Following deps was not injected:\n".concat(t))}}Object.defineProperty(r,"__esModule",{value:!0}),r.defineDeps=d,r.inject=f,r.checkIfAllInjected=p,r.Deps=r._clearRegistry=void 0;var m=e("redux"),h=n(e("lodash/fp/toPairs")),_=n(e("lodash/fp/filter")),y=n(e("lodash/fp/map")),v={},g=function(){for(var e in v)delete v[e]};r._clearRegistry=g;var b=function(){function e(t,r){if(s(this,e),v[t])throw new Error("Name collision error: Deps for module ".concat(t," has already defined. (try use different ID)"));this.id=t,this.expectedDeps=r,v[t]=this}return c(e,[{key:"inject",value:function(e){for(var t in e)this[t]=e[t]}},{key:"missingDeps",get:function(){var e=this;return this.expectedDeps.filter(function(t){return!e[t]})}},{key:"hasMissingDeps",get:function(){return 0===this.missingDeps.length}}]),e}();r.Deps=b;var w=(0,m.compose)((0,_.default)(function(e){var t=o(e,2);t[0];return t[1].length>0}),(0,y.default)(function(e){var t=o(e,2);return[t[0],t[1].missingDeps]}),h.default)},{"lodash/fp/filter":"lodash/fp/filter","lodash/fp/map":"lodash/fp/map","lodash/fp/toPairs":"lodash/fp/toPairs",redux:"redux"}],1155:[function(e,t,r){"use strict";function n(e,t){"function"==typeof e&&(e=[e]);var r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;if(t.target.closest(l))return!0}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1156:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"eventFrom",{enumerable:!0,get:function(){return n.default}});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./eventFrom"))},{"./eventFrom":1155}],1157:[function(e,t,r){"use strict";Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this,r=this;if(!document.documentElement.contains(t))return null;do{if(r.matches(e))return r;r=r.parentElement}while(null!==r&&void 0!==r);return null}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].filter(Boolean).forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})},{}],1158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.easeOutQuint=r.easeInQuint=r.easeInOutQuart=r.easeOutQuart=r.easeInQuart=r.easeInOutCubic=r.easeOutCubic=r.easeInCubic=r.easeInOutQuad=r.easeOutQuad=r.easeInQuad=r.linear=void 0;var n=function(e){return e};r.linear=n;var o=function(e){return Math.pow(e,2)};r.easeInQuad=o;var a=function(e){return-(Math.pow(e-1,2)-1)};r.easeOutQuad=a;var i=function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)};r.easeInOutQuad=i;var l=function(e){return Math.pow(e,3)};r.easeInCubic=l;var s=function(e){return Math.pow(e-1,3)+1};r.easeOutCubic=s;var u=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)};r.easeInOutCubic=u;var c=function(e){return Math.pow(e,4)};r.easeInQuart=c;var d=function(e){return-(Math.pow(e-1,4)-1)};r.easeOutQuart=d;var f=function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)};r.easeInOutQuart=f;var p=function(e){return Math.pow(e,5)};r.easeInQuint=p;var m=function(e){return Math.pow(e-1,5)+1};r.easeOutQuint=m},{}],1159:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.element,n=void 0===r?document:r,o=t.stopPropagation,a=void 0===o||o,i=function(t){if(t.key&&"Escape"===t.key||27===t.keyCode)return a&&t.stopPropagation(),e(t)};return n.addEventListener("keydown",i),function(){n.removeEventListener("keydown",i)}}Object.defineProperty(r,"__esModule",{value:!0}),r.addEscapeHandler=n},{}],1160:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a(e,t,r[t])})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=(0,s.default)(e);return(0,l.default)(o({},t),r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var l=n(e("lodash/omit")),s=n(e("lodash/keys"))},{"lodash/keys":"lodash/keys","lodash/omit":"lodash/omit"}],1161:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e.split(" ")[0]},o=n;r.default=o},{}],1162:[function(e,t,r){"use strict";function n(e,t){for(var r=e,n=0,o=Object.keys(t);n<o.length;n++){var a=o[n],i=new RegExp("\\{\\s*".concat(a,"\\s*\\}"),"g"),l=t[a];r=r.replace(i,l)}return r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1163:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.withWeekday,n=void 0===r||r,o=t.withTime;return void 0===o||o||(e instanceof a.DateExt&&(e=e.toDate()),e=DateistDateHelpers.date_max(e)),DateUtils.formatView(e,n)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("../utils/deps"),a=(0,o.defineDeps)("utils/formatDate",["DateExt"])},{"../utils/deps":1154}],1164:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}function s(e,t){var r=(0,u.compose)((0,d.default)(function(e){var t=o(e,2),r=t[0];return{name:r,value:t[1],re:new RegExp("\\{\\s*".concat(r,"\\s*\\}"),"g")}}),c.default)(t),n=(0,u.compose)((0,p.default)("startIndex"),(0,f.default)(function(e){return e}),m.default,(0,d.default)(function(t){for(var r,n=t.name,o=t.value,a=t.re,i=[];null!==(r=a.exec(e));)i.push({name:n,value:o,re:a,startIndex:r.index,endIndex:r.index+r[0].length});return i}))(r),a=[],i=0,l=!0,s=!1,_=void 0;try{for(var y,v=n[Symbol.iterator]();!(l=(y=v.next()).done);l=!0){var g=y.value,b=g.startIndex,w=g.endIndex,E=g.value,j=document.createTextNode(e.slice(i,b)),O=E;(0,h.default)(E)||E instanceof Element||(O=document.createTextNode(E)),a.push(j),a.push(O),i=w}}catch(e){s=!0,_=e}finally{try{l||null==v.return||v.return()}finally{if(s)throw _}}var S=document.createTextNode(e.slice(i,e.length));return a.push(S),a}Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;var u=e("redux"),c=n(e("lodash/toPairs")),d=n(e("lodash/fp/map")),f=n(e("lodash/fp/filter")),p=n(e("lodash/fp/sortBy")),m=n(e("lodash/flatten")),h=n(e("lodash/isElement"))},{"lodash/flatten":"lodash/flatten","lodash/fp/filter":"lodash/fp/filter","lodash/fp/map":"lodash/fp/map","lodash/fp/sortBy":"lodash/fp/sortBy","lodash/isElement":"lodash/isElement","lodash/toPairs":"lodash/toPairs",redux:"redux"}],1165:[function(e,t,r){"use strict";function n(e){return function(t){return e?console.log(e,t):console.log(t),t}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1166:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"compose",{enumerable:!0,get:function(){return o.compose}}),Object.defineProperty(r,"createSelector",{enumerable:!0,get:function(){return a.createSelector}}),Object.defineProperty(r,"byID",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"consoleLog",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"difference",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"filter",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"find",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"findLast",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"flatten",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"get",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"getOr",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"groupBy",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"head",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"keyBy",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"keys",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"last",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"map",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"mapValues",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(r,"mapKeys",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"max",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"merge",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"min",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"omit",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(r,"pick",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(r,"pickBy",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(r,"set",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"sortBy",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"sum",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(r,"toPairs",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"unset",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(r,"values",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(r,"partition",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(r,"intersectionWith",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(r,"uniqBy",{enumerable:!0,get:function(){return L.default}})
;var o=e("redux"),a=e("reselect"),i=n(e("../toIDMap")),l=n(e("./consoleLog")),s=n(e("lodash/fp/difference")),u=n(e("lodash/fp/filter")),c=n(e("lodash/fp/find")),d=n(e("lodash/fp/findLast")),f=n(e("lodash/fp/flatten")),p=n(e("lodash/fp/get")),m=n(e("lodash/fp/getOr")),h=n(e("lodash/fp/groupBy")),_=n(e("lodash/fp/head")),y=n(e("lodash/fp/keyBy")),v=n(e("lodash/keys")),g=n(e("lodash/fp/last")),b=n(e("lodash/fp/map")),w=n(e("lodash/fp/mapValues")),E=n(e("lodash/fp/mapKeys")),j=n(e("lodash/fp/max")),O=n(e("lodash/fp/merge")),S=n(e("lodash/fp/min")),P=n(e("lodash/fp/omit")),I=n(e("lodash/fp/pick")),k=n(e("lodash/fp/pickBy")),T=n(e("lodash/fp/set")),C=n(e("lodash/fp/sortBy")),D=n(e("lodash/fp/sum")),A=n(e("lodash/fp/toPairs")),M=n(e("lodash/fp/unset")),x=n(e("lodash/values")),R=n(e("lodash/fp/partition")),N=n(e("lodash/fp/intersectionWith")),L=n(e("lodash/fp/uniqBy"))},{"../toIDMap":1205,"./consoleLog":1165,"lodash/fp/difference":"lodash/fp/difference","lodash/fp/filter":"lodash/fp/filter","lodash/fp/find":"lodash/fp/find","lodash/fp/findLast":"lodash/fp/findLast","lodash/fp/flatten":"lodash/fp/flatten","lodash/fp/get":"lodash/fp/get","lodash/fp/getOr":"lodash/fp/getOr","lodash/fp/groupBy":"lodash/fp/groupBy","lodash/fp/head":"lodash/fp/head","lodash/fp/intersectionWith":"lodash/fp/intersectionWith","lodash/fp/keyBy":"lodash/fp/keyBy","lodash/fp/last":"lodash/fp/last","lodash/fp/map":"lodash/fp/map","lodash/fp/mapKeys":"lodash/fp/mapKeys","lodash/fp/mapValues":"lodash/fp/mapValues","lodash/fp/max":"lodash/fp/max","lodash/fp/merge":"lodash/fp/merge","lodash/fp/min":"lodash/fp/min","lodash/fp/omit":"lodash/fp/omit","lodash/fp/partition":"lodash/fp/partition","lodash/fp/pick":"lodash/fp/pick","lodash/fp/pickBy":"lodash/fp/pickBy","lodash/fp/set":"lodash/fp/set","lodash/fp/sortBy":"lodash/fp/sortBy","lodash/fp/sum":"lodash/fp/sum","lodash/fp/toPairs":"lodash/fp/toPairs","lodash/fp/uniqBy":605,"lodash/fp/unset":"lodash/fp/unset","lodash/keys":"lodash/keys","lodash/values":"lodash/values",redux:"redux",reselect:"reselect"}],1167:[function(e,t,r){"use strict";function n(){return a++}function o(e){var t=n();return"".concat(e,"-").concat(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=0},{}],1168:[function(e,t,r){"use strict";function n(e){var t=0,r=0,n=e;do{t+=n.offsetTop||0,r+=n.offsetLeft||0,n=n.offsetParent}while(n);return{top:t,left:r}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1169:[function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(e!==Object(e)||t!==Object(t))return{};var r=n({},e);for(var o in t)(void 0===e[o]||(0,i.default)(e[o],t[o]))&&delete r[o];return r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash/isEqual"))},{"lodash/isEqual":"lodash/isEqual"}],1170:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<e.length;r++)if(t.hasOwnProperty(e[r]))return!0;return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1171:[function(e,t,r){"use strict";function n(e,t){return(0,o.default)(e,t)&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("./isOnSameDate"))},{"./isOnSameDate":1180}],1172:[function(e,t,r){"use strict";function n(e){return!(59===e.getMinutes()&&59===e.getSeconds())}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1173:[function(e,t,r){"use strict";function n(e,t){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba(".concat(parseInt(r[1],16),", ").concat(parseInt(r[2],16),", ").concat(parseInt(r[3],16),", ").concat(t,")")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1174:[function(e,t,r){"use strict";function n(e,t){var r=window.devicePixelRatio;if(r){var n=e.width,o=e.height;e.width=n*r,e.height=o*r,e.style.width="".concat(n,"px"),e.style.height="".concat(o,"px"),t.scale(r,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1175:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./isTempID")),o=function(e){return e=e.map(function(e){return(0,n.default)(e)?-1*parseInt(e.substring(1)):e}),e.reduce(function(e,t){return e^t},0)},a=o;r.default=a},{"./isTempID":1183}],1176:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ASCII",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Env",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"SeqJobQueue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"addDeferCompositionEndListener",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"easing",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"filterOtherProps",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"format",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"hexToRGB",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"highDefCanvas",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"isCompositionEscEvent",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"isTempID",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"isRealID",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"isoToDate",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"mapRange",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(r,"partialMatchName",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"partialMatchIndex",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"shallowEqual",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"toISODateString",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(r,"todayISO",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"tweening",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(r,"firstName",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"toIDMap",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"parseId",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(r,"idHash",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(r,"uploadJSON",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(r,"isSection",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"isIterable",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"looseMatch",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(r,"shortName",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"formatToDOM",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(r,"memoize",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(r,"memoizeReturn",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(r,"isOnSameDate",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(r,"hasSameDateAndTime",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(r,"dayMax",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(r,"dayMin",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(r,"hasTime",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(r,"range",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(r,"move",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(r,"traverseTracking",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(r,"getElementOffset",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(r,"GUID",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(r,"LRU",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(r,"CellStorage",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(r,"createMemoizedDateParser",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(r,"timezones",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(r,"LMemoize",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(r,"byID",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(r,"shuffle",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(r,"recursiveTraverse",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(r,"isUniqueID",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(r,"toUniqueID",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(r,"sum",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(r,"plainItemText",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(r,"generateElementId",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(r,"nextWeek",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(r,"resolveKeyboardKey",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(r,"normalizeMatchStr",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(r,"hasAny",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(r,"getObjectDifference",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(r,"isMouseOver",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(r,"formatDate",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(r,"cloneDeep",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(r,"debounce",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(r,"findIndex",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(r,"flatten",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(r,"flow",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(r,"groupBy",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(r,"intersection",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(r,"isArray",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(r,"isString",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(r,"isElement",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(r,"isNumber",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(r,"isUndefined",{enumerable:!0,get:function(){return je.default}}),Object.defineProperty(r,"isEqual",{enumerable:!0,get:function(){return Oe.default}}),Object.defineProperty(r,"keyBy",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(r,"keys",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(r,"mapKeys",{enumerable:!0,get:function(){return Ie.default}}),Object.defineProperty(r,"mapValues",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(r,"max",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(r,"merge",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(r,"omit",{enumerable:!0,get:function(){return De.default}}),Object.defineProperty(r,"omitBy",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(r,"pick",{enumerable:!0,get:function(){return Me.default}}),Object.defineProperty(r,"without",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(r,"sortBy",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(r,"sortedUniq",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(r,"toPairs",{enumerable:!0,get:function(){return Le.default}}),Object.defineProperty(r,"throttle",{enumerable:!0,get:function(){return $e.default}}),Object.defineProperty(r,"uniq",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(r,"values",{enumerable:!0,get:function(){return Be.default}}),Object.defineProperty(r,"curry",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(r,"some",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(r,"invert",{enumerable:!0,get:function(){return He.default}});var o=n(e("./ASCII")),a=n(e("./Env")),i=n(e("./SeqJobQueue")),l=n(e("./addDeferCompositionEndListener")),s=n(e("./easing")),u=n(e("./filterOtherProps")),c=n(e("./format")),d=n(e("./hexToRGB")),f=n(e("./highDefCanvas")),p=n(e("./isCompositionEscEvent")),m=n(e("./isTempID")),h=n(e("./isRealID")),_=n(e("./isoToDate")),y=n(e("./mapRange")),v=n(e("./partialMatchName")),g=n(e("./partialMatchIndex")),b=n(e("./shallowEqual")),w=n(e("./toISODateString")),E=n(e("./todayISO")),j=n(e("./tweening")),O=n(e("./firstName")),S=n(e("./toIDMap")),P=n(e("./parseId")),I=n(e("./idHash")),k=n(e("./uploadJSON")),T=n(e("./isSection")),C=n(e("./isIterable")),D=n(e("./looseMatch")),A=n(e("./shortName")),M=n(e("./formatToDOM")),x=n(e("./memoize")),R=n(e("./memoizeReturn")),N=n(e("./isOnSameDate")),L=n(e("./hasSameDateAndTime")),$=n(e("./dayMax")),U=n(e("./dayMin")),B=n(e("./hasTime")),V=n(e("./range")),F=n(e("./move")),H=n(e("./traverseTracking")),q=n(e("./getElementOffset")),G=n(e("./GUID")),z=n(e("./LRU")),W=n(e("./CellStorage")),Y=n(e("./createMemoizedDateParser")),K=n(e("./timezones")),J=n(e("lodash/memoize")),Q=n(e("./byID")),X=n(e("./shuffle")),Z=n(e("./recursiveTraverse")),ee=n(e("./isUniqueID")),te=n(e("./toUniqueID")),re=n(e("./sum")),ne=n(e("./plainItemText")),oe=n(e("./generateElementId")),ae=n(e("./nextWeek")),ie=n(e("./resolveKeyboardKey")),le=n(e("./normalizeMatchStr")),se=n(e("./hasAny")),ue=n(e("./getObjectDifference")),ce=n(e("./isMouseOver")),de=n(e("./formatDate")),fe=n(e("lodash/cloneDeep")),pe=n(e("lodash/debounce")),me=n(e("lodash/findIndex")),he=n(e("lodash/flatten")),_e=n(e("lodash/flow")),ye=n(e("lodash/groupBy")),ve=n(e("lodash/intersection")),ge=n(e("lodash/isArray")),be=n(e("lodash/isString")),we=n(e("lodash/isElement")),Ee=n(e("lodash/isNumber")),je=n(e("lodash/isUndefined")),Oe=n(e("lodash/isEqual")),Se=n(e("lodash/keyBy")),Pe=n(e("lodash/keys")),Ie=n(e("lodash/mapKeys")),ke=n(e("lodash/mapValues")),Te=n(e("lodash/max")),Ce=n(e("lodash/merge")),De=n(e("lodash/omit")),Ae=n(e("lodash/omitBy")),Me=n(e("lodash/pick")),xe=n(e("lodash/without")),Re=n(e("lodash/sortBy")),Ne=n(e("lodash/sortedUniq")),Le=n(e("lodash/toPairs")),$e=n(e("lodash/throttle")),Ue=n(e("lodash/uniq")),Be=n(e("lodash/values")),Ve=n(e("lodash/curry")),Fe=n(e("lodash/some")),He=n(e("lodash/invert"))},{"./ASCII":1142,"./CellStorage":1143,"./Env":1144,"./GUID":1145,"./LRU":1146,"./SeqJobQueue":1147,"./addDeferCompositionEndListener":1148,"./byID":1149,"./createMemoizedDateParser":1150,"./dayMax":1151,"./dayMin":1152,"./easing":1158,"./filterOtherProps":1160,"./firstName":1161,"./format":1162,"./formatDate":1163,"./formatToDOM":1164,"./generateElementId":1167,"./getElementOffset":1168,"./getObjectDifference":1169,"./hasAny":1170,"./hasSameDateAndTime":1171,"./hasTime":1172,"./hexToRGB":1173,"./highDefCanvas":1174,"./idHash":1175,"./isCompositionEscEvent":1177,"./isIterable":1178,"./isMouseOver":1179,"./isOnSameDate":1180,"./isRealID":1181,"./isSection":1182,"./isTempID":1183,"./isUniqueID":1184,"./isoToDate":1185,"./looseMatch":1186,"./mapRange":1187,"./memoize":1188,"./memoizeReturn":1189,"./move":1190,"./nextWeek":1191,"./normalizeMatchStr":1192,"./parseId":1193,"./partialMatchIndex":1194,"./partialMatchName":1195,"./plainItemText":1196,"./range":1197,"./recursiveTraverse":1198,"./resolveKeyboardKey":1199,"./shallowEqual":1200,"./shortName":1201,"./shuffle":1202,"./sum":1203,"./timezones":1204,"./toIDMap":1205,"./toISODateString":1206,"./toUniqueID":1207,"./todayISO":1208,"./traverseTracking":1209,"./tweening":1210,"./uploadJSON":1211,"lodash/cloneDeep":"lodash/cloneDeep","lodash/curry":"lodash/curry","lodash/debounce":"lodash/debounce","lodash/findIndex":"lodash/findIndex","lodash/flatten":"lodash/flatten","lodash/flow":"lodash/flow","lodash/groupBy":"lodash/groupBy","lodash/intersection":"lodash/intersection","lodash/invert":"lodash/invert","lodash/isArray":"lodash/isArray","lodash/isElement":"lodash/isElement","lodash/isEqual":"lodash/isEqual","lodash/isNumber":"lodash/isNumber","lodash/isString":"lodash/isString","lodash/isUndefined":"lodash/isUndefined","lodash/keyBy":"lodash/keyBy","lodash/keys":"lodash/keys","lodash/mapKeys":"lodash/mapKeys","lodash/mapValues":"lodash/mapValues","lodash/max":"lodash/max","lodash/memoize":"lodash/memoize","lodash/merge":"lodash/merge","lodash/omit":"lodash/omit","lodash/omitBy":"lodash/omitBy","lodash/pick":"lodash/pick","lodash/some":"lodash/some","lodash/sortBy":"lodash/sortBy","lodash/sortedUniq":"lodash/sortedUniq","lodash/throttle":"lodash/throttle","lodash/toPairs":"lodash/toPairs","lodash/uniq":"lodash/uniq","lodash/values":"lodash/values","lodash/without":"lodash/without"}],1177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o;document.addEventListener("compositionend",function(){n=new Date,o=!1}),document.addEventListener("compositionstart",function(){o=!0});var a=function(e){var t=new Date,r=n&&t.getTime()-n.getTime()<500;return 27==e.keyAscii&&(o||r)},i=a;r.default=i},{}],1178:[function(e,t,r){"use strict";function n(e){return null!==e&&void 0!==e&&"function"==typeof e[Symbol.iterator]}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1179:[function(e,t,r){"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.within,o=void 0===n?0:n,a=t.getBoundingClientRect(),i=a.top,l=a.right,s=a.bottom,u=a.left,c=e.clientX,d=e.clientY;return c>=u-o&&c<=l+o&&d<=s+o&&d>=i-o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1180:[function(e,t,r){"use strict";function n(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1181:[function(e,t,r){"use strict";function n(e){return!(0,o.default)(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("./isTempID"))},{"./isTempID":1183}],1182:[function(e,t,r){"use strict";function n(e){return e&&(0===e.indexOf("* ")||e.lastIndexOf(":")===e.length-1)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1183:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return $isString(e)&&0==e.indexOf("_")},o=n;r.default=o},{}],1184:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=Math.pow(2,28)-1,o=function(e){return e>n},a=o;r.default=a},{}],1185:[function(e,t,r){"use strict";function n(e){var t=o.exec(e);if(!t)return new Date;try{var r=[parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3])],n=r[0],a=r[1],i=r[2];return new Date(n,a,i)}catch(e){return new Date}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=/\s*(\d\d\d\d)-(\d\d)-(\d\d)\s*/i},{}],1186:[function(e,t,r){"use strict";function n(e){var t=e.toLowerCase().split(" ").filter(function(e){return!!e}),r=function(e){return e=e.toLowerCase(),-1===t.map(function(t){return e.indexOf(t)}).indexOf(-1)};return 1===arguments.length?r:arguments.length>1?r(arguments[1]):void 0}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1187:[function(e,t,r){"use strict";function n(e,t,r,n,o){return r+(n-r)*(o-e)/(t-e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1188:[function(e,t,r){"use strict";function n(e,t){return e===t}function o(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e(t[o],r[o]))return!1;return!0}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=null,a=null;return function(){return o(t,r,arguments)||(a=e.apply(null,arguments)),r=arguments,a}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{}],1189:[function(e,t,r){"use strict";function n(e){var t;return function(){var r=e.apply(null,arguments);return t===r||(0,o.default)(t,r)?t:(t=r,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash/isEqual"))},{"lodash/isEqual":"lodash/isEqual"}],1190:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e,t){var r=function(r){if(e<0||t<0||e>=r.length||t>=r.length)throw new Error("Invalid array index");var o=n(r);return o.splice(e,1),o.splice(t,0,r[e]),o};return 3===arguments.length?r(arguments[2]):r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{}],1191:[function(e,t,r){"use strict";function n(e){var t=new Date,r=e.next_week,n=e.start_day,o=n-(0===t.getDay()?7:t.getDay());o<=0&&(o+=7);var a=r-n;a<0&&(a+=7);var i=o+a,l=new Date;return l.setDate(t.getDate()+i),l}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1192:[function(e,t,r){"use strict";function n(e){return e.normalize?e.normalize("NFD").replace(o,"").normalize("NFC").toLowerCase().trim():e.toLowerCase().trim()}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=new RegExp("[\\u0300-\\u036e\\u1dc0-\\u1dfe\\u20d0-\\u20fe\\ufe20-\\ufe2e\\u3099-\\u309a\\u1161-\\u1175\\u11a8-\\u11c2]","g")},{}],1193:[function(e,t,r){"use strict";function n(e){if((0,o.default)(e))return e;try{return parseInt(e)}catch(e){}return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("./isTempID"))},{"./isTempID":1183}],1194:[function(e,t,r){"use strict";function n(e,t){e=e.toLowerCase(),t=t.toLowerCase();var r=a(t),n=t.indexOf(e),o=r.indexOf(e);return-1!==n?n:-1!==o?o:-1}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=void 0!="".normalize,a=function(e){return o?e.normalize("NFD").replace(/[\u0300-\u036e\u1dc0-\u1dfe\u20d0-\u20fe\ufe20-\ufe2e\u3099-\u309a]+/g,""):e}},{}],1195:[function(e,t,r){"use strict";function n(e,t){if(!e||!t)return!1;if(t=t.trim().toLowerCase(),e=e.toLowerCase(),e.split(" ").filter(function(e){return""!==e}).length>1)return 0===t.indexOf(e);var r=t.split(" ").filter(function(e){return""!==e});return e=e.trim(),r.filter(function(t){return 0===t.indexOf(e)}).length>0}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash/curry")),a=(0,o.default)(n);r.default=a},{"lodash/curry":"lodash/curry"}],1196:[function(e,t,r){"use strict";function n(e){return o.default.format(e,a).replace(/^\*\s+/g,"")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../components/formatter/Formatter")),a={only_text:!0,as_html:!1,with_links:!0,with_email:!0}},{"../components/formatter/Formatter":22}],1197:[function(e,t,r){"use strict";function n(){var e,t;if(1==arguments.length)e=0,t=arguments[0];else{if(2!=arguments.length)throw new Error("Invalid arguments");e=arguments[0],t=arguments[1]}for(var r=[],n=e;n<t;n++)r.push(n);return r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1198:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return l(e)||i(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function l(e){if(Array.isArray(e))return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash/toPairs")),u=function e(t,r,a){var i=!0,l=!1,u=void 0;try{for(var c,d=(0,s.default)(t)[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var f=o(c.value,2),p=f[0],m=f[1],h=a?a+"."+p:p;r(h,m),"object"===n(m)&&e(m,r,h)}}catch(e){l=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw u}}},c=function(e,t){u(e,t,null)},d=c;r.default=d},{"lodash/toPairs":"lodash/toPairs"}],1199:[function(e,t,r){"use strict";function n(e){switch(e){case 37:case"Left":case"ArrowLeft":return o.ARROW_LEFT;case 38:case"Up":case"ArrowUp":return o.ARROW_UP;case 39:case"Right":case"ArrowRight":return o.ARROW_RIGHT;case 40:case"Down":case"ArrowDown":return o.ARROW_DOWN;case 13:case"Enter":return o.ENTER;case 8:case"Backspace":return o.BACKSPACE;case 27:case"Esc":case"Escape":return o.ESCAPE;case 9:case"Tab":return o.TAB;default:return e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o={ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ENTER:"Enter",BACKSPACE:"Backspace",ESCAPE:"Escape",TAB:"Tab"}},{}],1200:[function(e,t,r){"use strict";function n(e,t){if(e===t)return!0;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=Object.prototype.hasOwnProperty,a=0;a<r.length;a+=1){if(!o.call(t,r[a])||e[r[a]]!==t[r[a]])return!1;if(e[r[a]]!==t[r[a]])return!1}return!0}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1201:[function(e,t,r){"use strict";function n(e){var t=e.split(" ");return t.length>1?t[0]+" "+t[1].substring(0,1)+".":t[0]}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1202:[function(e,t,r){"use strict";function n(e){return i(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e){e=n(e);for(var t,r,o=e.length;0!==o;)r=Math.floor(Math.random()*o),o-=1,t=e[o],e[o]=e[r],e[r]=t;return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{}],1203:[function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t){return e+t},0)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1204:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.getTimezoneName=r.getTimezoneOffset=void 0;var o=n(e("./toISODateString")),a=n(e("moment-timezone")),i={"GMT -12:00":"Etc/GMT+12","GMT -11:00":"Etc/GMT+11","GMT -10:00":"Etc/GMT+10","GMT -9:00":"Etc/GMT+9","GMT -8:00":"Etc/GMT+8","GMT -7:00":"Etc/GMT+7","GMT -6:00":"Etc/GMT+6","GMT -5:00":"Etc/GMT+5","GMT -4:00":"Etc/GMT+4","GMT -3:00":"Etc/GMT+3","GMT -2:00":"Etc/GMT+2","GMT -1:00":"Etc/GMT+1",GMT:"Etc/GMT+0",UTC:"Etc/GMT+0","GMT +1:00":"Etc/GMT-1","GMT +2:00":"Etc/GMT-3","GMT +3:00":"Etc/GMT-3","GMT +4:00":"Etc/GMT-4","GMT +5:00":"Etc/GMT-5","GMT +6:00":"Etc/GMT-6","GMT +7:00":"Etc/GMT-7","GMT +8:00":"Etc/GMT-8","GMT +9:00":"Etc/GMT-9","GMT +10:00":"Etc/GMT-10","GMT +11:00":"Etc/GMT-11","GMT +12:00":"Etc/GMT-12","GMT +13:00":"Etc/GMT-13"},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.useUTC,i=void 0!==n&&n;try{return-a.default.tz(i?t:(0,o.default)(t),s(e)).utcOffset()}catch(e){return 0}};r.getTimezoneOffset=l;var s=function(e){return i[e]?i[e]:e};r.getTimezoneName=s;var u={getTimezoneName:s,getTimezoneOffset:l};r.default=u},{"./toISODateString":1206,"moment-timezone":"moment-timezone"}],1205:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("lodash/isString")),a=n(e("lodash/isNumber")),i=function(e){return e.reduce(function(e,t){return(0,o.default)(t.id)||(0,a.default)(t.id)?(e[t.id]=t,e):e},{})},l=i;r.default=l},{"lodash/isNumber":"lodash/isNumber","lodash/isString":"lodash/isString"}],1206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e<10?"0"+e:e},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.toUTC,o=void 0!==r&&r,a=t.dateOnly,i=void 0!==a&&a,l=t.withOffset,s=void 0!==l&&l,u=o?e.getUTCFullYear():e.getFullYear(),c=n(o?e.getUTCMonth()+1:e.getMonth()+1),d=n(o?e.getUTCDate():e.getDate());if(i)return"".concat(u,"-").concat(c,"-").concat(d);var f=n(o?e.getUTCHours():e.getHours()),p=n(o?e.getUTCMinutes():e.getMinutes()),m=n(o?e.getUTCSeconds():e.getSeconds());if(o)return"".concat(u,"-").concat(c,"-").concat(d,"T").concat(f,":").concat(p,":").concat(m,"Z");if(!s)return"".concat(u,"-").concat(c,"-").concat(d,"T").concat(f,":").concat(p,":").concat(m);var h=e.getTimezoneOffset(),_=n(Math.abs(Math.floor(h/60))),y=n(Math.abs(h%60)),v=h>0?"-":"+",g="".concat(v).concat(_,":").concat(y);return"".concat(u,"-").concat(c,"-").concat(d,"T").concat(f,":").concat(p,":").concat(m).concat(g)},a=o;r.default=a},{}],1207:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./isTempID")),a=n(e("./isUniqueID")),i=n(e("lodash/curry")),l=(0,i.default)(function(e,t){return(0,o.default)(t)||(0,a.default)(t)?t:e.user.unique_prefix<<28|t}),s=l;r.default=s},{"./isTempID":1183,"./isUniqueID":1184,"lodash/curry":"lodash/curry"}],1208:[function(e,t,r){"use strict";function n(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],1209:[function(e,t,r){"use strict";function n(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}function i(e){if(Array.isArray(e))return e}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";if(e.getAttribute){var r=e.getAttribute("data-track");if(r){var o=r.split("|"),a=n(o,2),i=a[0],s=a[1];track(i,t,s)}}e.parentNode&&l(e.parentNode)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=l},{}],1210:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./mapRange")),o=function(e){
var t,r=e.from,o=e.to,a=e.duration,i=e.easing,l=e.step,s=e.startAfter,u=void 0===s?0:s,c=Date.now()+u,d=c+a,f=new Promise(function(e){t=e}),p=function e(){var a=Date.now();if(a<c)return void requestAnimationFrame(e);if(a>=d)return void t();var s=(0,n.default)(c,d,0,1,a);s=i(s);var u=(0,n.default)(0,1,r,o,s);l(u),requestAnimationFrame(e)};return requestAnimationFrame(p),f},a=o;r.default=a},{"./mapRange":1187}],1211:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){return new Promise(function(r,n){var o=new Blob([e],{type:"application/json"}),a=new File([o],t),i="/sync/v8/uploads/add?token=".concat(window.User.token,"&file_name=").concat(t),l=new XMLHttpRequest,s=new FormData;s.append("file",o),s.append("file_name",t),s.append("file_size",a.size|a.fileSize),s.append("file_type","application/json"),l.addEventListener("error",function(e){n(e.errors)}),l.addEventListener("load",function(e){var t=JSON.parse(e.currentTarget.responseText);t.error?n(t.error):r(t.file_url)}),l.open("POST",i,!0),l.send(s)})},o=n;r.default=o},{}]},{},[126]);
//# sourceMappingURL=/generated/Col_AppCollection.map.js
